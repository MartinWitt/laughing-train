# bookkeeper 
 
# Bad smells
I found 2754 bad smells with 125 repairable:
| ruleID | number | fixable |
| --- | --- | --- |
| JavadocDeclaration | 711 | false |
| FieldCanBeLocal | 205 | false |
| FieldMayBeFinal | 201 | false |
| NullableProblems | 134 | false |
| ConstantValue | 128 | false |
| UnstableApiUsage | 122 | false |
| UnusedAssignment | 113 | false |
| DuplicatedCode | 104 | false |
| JavadocReference | 101 | false |
| OptionalUsedAsFieldOrParameterType | 77 | false |
| AutoCloseableResource | 71 | false |
| DataFlowIssue | 67 | false |
| DuplicateThrows | 44 | false |
| UnnecessaryReturn | 39 | true |
| SynchronizationOnLocalVariableOrMethodParameter | 35 | false |
| UnnecessaryLocalVariable | 34 | true |
| DeprecatedIsStillUsed | 33 | false |
| DanglingJavadoc | 24 | false |
| StringBufferReplaceableByString | 23 | false |
| NonAtomicOperationOnVolatileField | 23 | false |
| JavadocLinkAsPlainText | 21 | false |
| FinalStaticMethod | 19 | false |
| IfStatementWithIdenticalBranches | 19 | false |
| IgnoreResultOfCall | 18 | false |
| NonStrictComparisonCanBeEquality | 18 | true |
| RedundantCast | 18 | false |
| UnnecessaryContinue | 18 | false |
| BusyWait | 16 | false |
| WrapperTypeMayBePrimitive | 15 | false |
| PointlessArithmeticExpression | 15 | false |
| RedundantTypeArguments | 13 | false |
| SimplifyStreamApiCallChains | 13 | false |
| UnnecessaryStringEscape | 12 | true |
| ToArrayCallWithZeroLengthArrayArgument | 10 | true |
| IntegerMultiplicationImplicitCastToLong | 10 | false |
| IOStreamConstructor | 10 | false |
| TrivialIf | 10 | false |
| InfiniteLoopStatement | 9 | false |
| OptionalIsPresent | 9 | false |
| CollectionAddAllCanBeReplacedWithConstructor | 9 | false |
| PointlessBitwiseExpression | 8 | false |
| UNCHECKED_WARNING | 8 | false |
| UnnecessaryModifier | 7 | true |
| DuplicateBranchesInSwitch | 7 | false |
| ManualMinMaxCalculation | 7 | false |
| MismatchedCollectionQueryUpdate | 7 | false |
| CharsetObjectCanBeUsed | 7 | false |
| ConditionCoveredByFurtherCondition | 7 | false |
| EmptyStatementBody | 6 | false |
| Deprecation | 6 | false |
| SynchronizeOnNonFinalField | 6 | false |
| StringEquality | 5 | false |
| NonFinalFieldInEnum | 5 | false |
| InnerClassMayBeStatic | 5 | true |
| AccessStaticViaInstance | 4 | false |
| RedundantMethodOverride | 4 | false |
| UNUSED_IMPORT | 4 | false |
| InfiniteRecursion | 4 | false |
| StringConcatenationInsideStringBufferAppend | 4 | false |
| RedundantLengthCheck | 4 | false |
| ManualArrayToCollectionCopy | 4 | false |
| MismatchedJavadocCode | 4 | false |
| MismatchedArrayReadWrite | 3 | false |
| NegativeIntConstantInLongContext | 3 | false |
| RedundantStringFormatCall | 3 | false |
| RedundantOperationOnEmptyContainer | 3 | false |
| SwitchStatementWithTooFewBranches | 3 | false |
| CatchMayIgnoreException | 3 | false |
| UnnecessaryInitCause | 3 | false |
| CaughtExceptionImmediatelyRethrown | 3 | false |
| UseBulkOperation | 3 | false |
| StaticInitializerReferencesSubClass | 2 | false |
| OctalLiteral | 2 | false |
| DuplicateExpressions | 2 | false |
| SlowListContainsAll | 2 | false |
| OptionalGetWithoutIsPresent | 2 | false |
| UnnecessarySemicolon | 2 | false |
| ImplicitArrayToString | 2 | false |
| ComparatorMethodParameterNotUsed | 2 | false |
| ConditionalBreakInInfiniteLoop | 1 | false |
| LoopConditionNotUpdatedInsideLoop | 1 | false |
| JavaLangInvokeHandleSignature | 1 | false |
| CommentedOutCode | 1 | false |
| SortedCollectionWithNonComparableKeys | 1 | false |
| SimplifiableConditionalExpression | 1 | false |
| TrivialStringConcatenation | 1 | false |
| ExplicitArrayFilling | 1 | false |
| MalformedFormatString | 1 | false |
| DefaultAnnotationParam | 1 | false |
| SimplifiableBooleanExpression | 1 | false |
| PointlessNullCheck | 1 | false |
| DoubleNegation | 1 | false |
| StringOperationCanBeSimplified | 1 | false |
| SuspiciousToArrayCall | 1 | false |
| RedundantFileCreation | 1 | false |
| ArraysAsListWithZeroOrOneArgument | 1 | false |
## RuleId[id=ToArrayCallWithZeroLengthArrayArgument]
### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[etcdEndpoints.size()\]'
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdMetadataDriverBase.java`
#### Snippet
```java
        synchronized (this) {
            this.client = Client.builder()
                .endpoints(etcdEndpoints.toArray(new String[etcdEndpoints.size()]))
                .build();
        }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[cmdList.size()\]'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/ScriptBasedMapping.java`
#### Snippet
```java
                    dir = new File(userDir);
                }
                ShellCommandExecutor s = new ShellCommandExecutor(cmdList.toArray(new String[cmdList.size()]), dir);
                try {
                    s.execute();
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[hosts.size()\]'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/DNS.java`
#### Snippet
```java
            return new String[]{cachedHostname};
        } else {
            return hosts.toArray(new String[hosts.size()]);
        }
    }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[roles.size()\]'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/CertUtils.java`
#### Snippet
```java
                    roles.add(role.trim());
                }
                return roles.toArray(new String[roles.size()]);
            }
        }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new FileStatus\[statusList.size()\]'
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLFileSystem.java`
#### Snippet
```java
            }
            Collections.sort(statusList, Comparator.comparing(fileStatus -> fileStatus.getPath().getName()));
            return statusList.toArray(new FileStatus[statusList.size()]);
        } catch (LogNotFoundException e) {
            throw new FileNotFoundException(path.toString());
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Op\[successOps.size()\]'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
            // create stream only when stream doesn't exists
            .If(store.newCompareValue(CompareResult.EQUAL, streamMetadataKey, null))
            .Then(successOps.toArray(new Op[successOps.size()]))
            .build();

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[serviceHosts.size()\]'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/net/ServiceURI.java`
#### Snippet
```java
            serviceInfos,
            serviceUser,
            serviceHosts.toArray(new String[serviceHosts.size()]),
            servicePath,
            uri);
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new CompletableFuture\[futureList.size()\]'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/concurrent/FutureUtils.java`
#### Snippet
```java
    public static <T> CompletableFuture<List<T>> collect(List<CompletableFuture<T>> futureList) {
        CompletableFuture<Void> finalFuture =
            CompletableFuture.allOf(futureList.toArray(new CompletableFuture[futureList.size()]));
        return finalFuture.thenApply(result ->
            futureList
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new AsyncLogReader\[readers.size()\]'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
        @Override
        public CompletableFuture<Void> asyncClose() {
            return Utils.closeSequence(executorService, true, readers.toArray(new AsyncLogReader[readers.size()]))
                    .thenApply(value -> {
                        readers.clear();
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new LedgerHandle\[openLedgerHandles.size()\]'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
            }
            closeFuture = closePromise = new CompletableFuture<Void>();
            lhsToClose = openLedgerHandles.toArray(new LedgerHandle[openLedgerHandles.size()]);
            // set the exception to cancel pending and subsequent reads
            exception = new ReadCancelledException(getSegment().getZNodeName(), "Reader was closed");
```

## RuleId[id=StringEquality]
### StringEquality
String values are compared using `==`, not 'equals()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
        if (Order.ASC == order) {
            myMap = map;
            if (EMPTY_END_KEY == lastKey || lastKey.compareTo(myMap.lastKey()) > 0) {
                lastKey = myMap.lastKey();
                lastInclusive = true;
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
                lastInclusive = true;
            }
            if (EMPTY_START_KEY == firstKey || firstKey.compareTo(myMap.firstKey()) < 0) {
                firstKey = myMap.firstKey();
                firstInclusive = true;
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
        } else if (Order.DESC == order) {
            myMap = map.descendingMap();
            if (EMPTY_START_KEY == lastKey || lastKey.compareTo(myMap.lastKey()) < 0) {
                lastKey = myMap.lastKey();
                lastInclusive = true;
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
                lastInclusive = true;
            }
            if (EMPTY_END_KEY == firstKey || firstKey.compareTo(myMap.firstKey()) > 0) {
                firstKey = myMap.firstKey();
                firstInclusive = true;
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/cluster/ZkClusterInitializer.java`
#### Snippet
```java
                    String ledgersPath = metadataServiceUri.getPath();
                    Optional<String> segmentStorePath;
                    if (Strings.isNullOrEmpty(ledgersPath) || "/" == ledgersPath) {
                        segmentStorePath = Optional.empty();
                    } else {
```

## RuleId[id=WrapperTypeMayBePrimitive]
### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
                    // Lower bits are full. Need to expand and create another HOB node.
                    try {
                        Long newHighBits = highBits + 1;
                        createHOBPathAndGenerateId(ledgerPrefix, newHighBits.intValue(), cb);
                    } catch (KeeperException e) {
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java

                if (parts[1].equals(V1_CLOSED_TAG)) {
                    Long l = Long.parseLong(parts[0]);
                    if (l == V1_IN_RECOVERY_ENTRY_ID) {
                        builder.withInRecoveryState();
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookies/RecoverCommand.java`
#### Snippet
```java
        boolean skipUnrecoverableLedgers = flags.skipUnrecoverableLedgers;

        Long ledgerId = flags.ledger;
        int replicateRate = flags.replicateRate;

```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/WeightedRandomSelectionImpl.java`
#### Snippet
```java
        // get the sum total of all the values; this will be used to
        // calculate the weighted probability later on
        Long totalWeight = 0L, min = Long.MAX_VALUE;
        List<WeightedObject> values = new ArrayList<WeightedObject>(map.values());
        Collections.sort(values, new Comparator<WeightedObject>() {
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            BookieId address = ensemble.get(idx);
            String region = writeSetWithRegion.get(idx);
            Long lastFailedEntryOnBookie = bookiesHealthInfo.getBookieFailureHistory(address);
            if (null == knownBookies.get(address)) {
                // there isn't too much differences between readonly bookies
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/TriggerGCService.java`
#### Snippet
```java
            return response;
        } else if (HttpServer.Method.GET == request.getMethod()) {
            Boolean isInForceGC = bookieServer.getBookie().getLedgerStorage().isInForceGC();
            Pair<String, String> output = Pair.of("is_in_force_gc", isInForceGC.toString());
            String jsonResponse = JsonUtil.toJson(output);
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/Main.java`
#### Snippet
```java
                String sPort = cmdLine.getOptionValue("httpport");
                log.info("Get cmdline http port: {}", sPort);
                Integer iPort = Integer.parseInt(sPort);
                conf.setHttpServerPort(iPort.intValue());
            }
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ReadLedgerEntryService.java`
#### Snippet
```java

        if (HttpServer.Method.GET == request.getMethod() && (params != null) && params.containsKey("ledger_id")) {
            Long ledgerId = Long.parseLong(params.get("ledger_id"));
            Long startEntryId = 0L;
            Long endEntryId = -1L;
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ReadLedgerEntryService.java`
#### Snippet
```java
        if (HttpServer.Method.GET == request.getMethod() && (params != null) && params.containsKey("ledger_id")) {
            Long ledgerId = Long.parseLong(params.get("ledger_id"));
            Long startEntryId = 0L;
            Long endEntryId = -1L;
            if (params.containsKey("start_entry_id")) {
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ReadLedgerEntryService.java`
#### Snippet
```java
            Long ledgerId = Long.parseLong(params.get("ledger_id"));
            Long startEntryId = 0L;
            Long endEntryId = -1L;
            if (params.containsKey("start_entry_id")) {
                startEntryId = Long.parseLong(params.get("start_entry_id"));
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ReadLedgerEntryService.java`
#### Snippet
```java

            // Page index should start from 1;
            Integer pageIndex = params.containsKey("page") ? Integer.parseInt(params.get("page")) : -1;
            if (pageIndex > 0) {
                // start and end ledger index for wanted page.
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ReadLedgerEntryService.java`
#### Snippet
```java
                // start and end ledger index for wanted page.
                Long startIndexInPage = (pageIndex - 1) * ENTRIES_PER_PAE;
                Long endIndexInPage = startIndexInPage + ENTRIES_PER_PAE - 1;

                if ((startEntryId == 0L) || (startEntryId < startIndexInPage)) {
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/DeleteLedgerService.java`
#### Snippet
```java
                clientConf.addConfiguration(conf);
                BookKeeper bk = new BookKeeper(clientConf);
                Long ledgerId = Long.parseLong(params.get("ledger_id"));

                bk.deleteLedger(ledgerId);
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/GetLedgerMetaService.java`
#### Snippet
```java

        if (HttpServer.Method.GET == request.getMethod() && (params != null) && params.containsKey("ledger_id")) {
            Long ledgerId = Long.parseLong(params.get("ledger_id"));

            LedgerManager manager = ledgerManagerFactory.newLedgerManager();
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListBookieInfoService.java`
#### Snippet
```java
             */
            LinkedHashMap<String, String> output = Maps.newLinkedHashMapWithExpectedSize(map.size());
            Long totalFree = 0L, total = 0L;
            for (Map.Entry<BookieId, BookieInfoReader.BookieInfo> infoEntry : map.entrySet()) {
                BookieInfoReader.BookieInfo bInfo = infoEntry.getValue();
```

## RuleId[id=UnnecessaryModifier]
### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
     * Interface for a batch to be written in the storage.
     */
    public interface Batch extends Closeable {
        void put(byte[] key, byte[] value) throws IOException;

```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
        private int numVal;

        private PlacementPolicyAdherence(int numVal) {
            this.numVal = numVal;
        }
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MSException.java`
#### Snippet
```java
        private final String description;

        private Code(int code, String description) {
            this.code = code;
            this.description = description;
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `circe-checksum/src/main/java/com/scurrilous/circe/HashSupport.java`
#### Snippet
```java
    private final int priority;

    private HashSupport(int priority) {
        this.priority = priority;
    }
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `circe-checksum/src/main/java/com/scurrilous/circe/params/MurmurHash3Variant.java`
#### Snippet
```java
    private final String algorithm;

    private MurmurHash3Variant(String algorithm) {
        this.algorithm = algorithm;
    }
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        public final int value;

        private LogSegmentMetadataVersion(int value) {
            this.value = value;
        }
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        private final int value;

        private TruncationStatus(int value) {
            this.value = value;
        }
```

## RuleId[id=MismatchedArrayReadWrite]
### MismatchedArrayReadWrite
Contents of array `tmpArray` are read, but never written to
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
    public static final AvailabilityOfEntriesOfLedger EMPTY_AVAILABILITYOFENTRIESOFLEDGER;
    static {
        long[] tmpArray = {};
        EMPTY_AVAILABILITYOFENTRIESOFLEDGER = new AvailabilityOfEntriesOfLedger(Arrays.stream(tmpArray).iterator());
    }
```

### MismatchedArrayReadWrite
Contents of array `hardLinkMultSuffix` are written to, but never read
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
    private static String[] hardLinkCommand = {"ln", null, null};
    private static String[] hardLinkMultPrefix = {"ln"};
    private static String[] hardLinkMultSuffix = {null};
    private static String[] getLinkCountCommand = {"stat", "-c%h", null};
    //Unix guarantees at least 32K bytes cmd length.
```

### MismatchedArrayReadWrite
Contents of array `reverseSortedItems` are written to, but never read
in `microbenchmarks/src/main/java/org/apache/bookkeeper/bookie/GroupSortBenchmark.java`
#### Snippet
```java
        private final long[] randomItems = new long[N * 4];
        private final long[] sortedItems;
        private final long[] reverseSortedItems = new long[N * 4];
        private final long[] groupSortedItems;
        private final long[] reverseGroupSortedItems = new long[N * 4];
```

## RuleId[id=ConditionalBreakInInfiniteLoop]
### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java

            // Read through the entry log file and extract the ledger ID's.
            while (true) {
                // Check if we've finished reading the entry log file.
                if (pos >= bc.size()) {
```

## RuleId[id=PointlessArithmeticExpression]
### PointlessArithmeticExpression
`offset + i8 + 0` can be replaced with 'offset + i8'
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/MurmurHash.java`
#### Snippet
```java
            int i8 = i << 3;

            long k64 = ((long) key.getByte(offset + i8 + 0) & 0xff)
                + (((long) key.getByte(offset + i8 + 1) & 0xff) << 8)
                + (((long) key.getByte(offset + i8 + 2) & 0xff) << 16)
```

### PointlessArithmeticExpression
`offset + i4 + 0` can be replaced with 'offset + i4'
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/MurmurHash.java`
#### Snippet
```java
            k = k | (data.getByte(offset + i4 + 1) & 0xff);
            k = k << 8;
            k = k | (data.getByte(offset + i4 + 0) & 0xff);
            k *= m;
            k ^= k >>> r;
```

### PointlessArithmeticExpression
`1 * 1024 * 1024` can be replaced with '1024 \* 1024'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     */
    public int getRecvByteBufAllocatorSizeMax() {
        return getInt(BYTEBUF_ALLOCATOR_SIZE_MAX, 1 * 1024 * 1024);
    }

```

### PointlessArithmeticExpression
`(long) 1.2 * getEntryLogSizeLimit()` can be replaced with 'getEntryLogSizeLimit()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     */
    public long getMinUsableSizeForEntryLogCreation() {
        return this.getLong(MIN_USABLESIZE_FOR_ENTRYLOG_CREATION, (long) 1.2 * getEntryLogSizeLimit());
    }

```

### PointlessArithmeticExpression
`1 * 60 * 1000L` can be replaced with '60 \* 1000L'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java
    // thread will not sleep between refresh attempts any less than 1 minute (60*1000 milliseconds = 1 minute).
    // Change the '1' to e.g. 5, to change this to 5 minutes.
    private static final long MIN_TIME_BEFORE_RELOGIN = 1 * 60 * 1000L;

    private long getRefreshTime(KerberosTicket tgt) {
```

### PointlessArithmeticExpression
`1 * 1024 * 1024 * 1024` can be replaced with '1024 \* 1024 \* 1024'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/BookKeeperConstants.java`
#### Snippet
```java
     * memtable (for performance consideration)
     */
    public static final long MAX_LOG_SIZE_LIMIT = 1 * 1024 * 1024 * 1024;

    public static final String FEATURE_REPP_DISABLE_DURABILITY_ENFORCEMENT = "repp_disable_durability_enforcement";
```

### PointlessArithmeticExpression
`1 * 9` can be replaced with '9'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BKStats.java`
#### Snippet
```java
                bucket = (int) (latency / 10);
            } else if (latency <= 1000) { // 100ms ~ 1000ms
                bucket = 1 * 9 + (int) (latency / 100);
            } else if (latency <= 10000) { // 1s ~ 10s
                bucket = 2 * 9 + (int) (latency / 1000);
```

### PointlessArithmeticExpression
`1 * 1024 * 1024` can be replaced with '1024 \* 1024'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    public int getClientSendBufferSize() {
        return getInt(CLIENT_SENDBUFFER_SIZE, 1 * 1024 * 1024);
    }

```

### PointlessArithmeticExpression
`1 * 1024 * 1024` can be replaced with '1024 \* 1024'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    public int getClientReceiveBufferSize() {
        return getInt(CLIENT_RECEIVEBUFFER_SIZE, 1 * 1024 * 1024);
    }

```

### PointlessArithmeticExpression
`entry.readerIndex() + 0` can be replaced with 'entry.readerIndex()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java`
#### Snippet
```java
    @Override
    public long addEntry(ByteBuf entry) throws IOException {
        long ledgerId = entry.getLong(entry.readerIndex() + 0);
        long entryId = entry.getLong(entry.readerIndex() + 8);
        long lac = entry.getLong(entry.readerIndex() + 16);
```

### PointlessArithmeticExpression
`entry.readerIndex() + 0` can be replaced with 'entry.readerIndex()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SortedLedgerStorage.java`
#### Snippet
```java
    @Override
    public long addEntry(ByteBuf entry) throws IOException {
        long ledgerId = entry.getLong(entry.readerIndex() + 0);
        long entryId = entry.getLong(entry.readerIndex() + 8);
        long lac = entry.getLong(entry.readerIndex() + 16);
```

### PointlessArithmeticExpression
`entry.readerIndex() + 0` can be replaced with 'entry.readerIndex()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
    public void logAddEntry(ByteBuf entry, boolean ackBeforeSync, WriteCallback cb, Object ctx)
            throws InterruptedException {
        long ledgerId = entry.getLong(entry.readerIndex() + 0);
        long entryId = entry.getLong(entry.readerIndex() + 8);
        logAddEntry(ledgerId, entryId, entry, ackBeforeSync, cb, ctx);
```

### PointlessArithmeticExpression
`start + 0` can be replaced with 'start'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
            long rc = 0;
            try {
                rc = fi.write(buffs, entries.get(start + 0).getFirstEntryPosition());
            } catch (FileInfo.FileInfoDeletedException e) {
                throw new Bookie.NoLedgerException(ledger);
```

### PointlessArithmeticExpression
`1 * 1024 * 1024 * 1024` can be replaced with '1024 \* 1024 \* 1024'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/WriteCache.java`
#### Snippet
```java
    public WriteCache(ByteBufAllocator allocator, long maxCacheSize) {
        // Default maxSegmentSize set to 1Gb
        this(allocator, maxCacheSize, 1 * 1024 * 1024 * 1024);
    }

```

### PointlessArithmeticExpression
`1 * 1024 * 1024 * 1024` can be replaced with '1024 \* 1024 \* 1024'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/ReadCache.java`
#### Snippet
```java
    private static final Logger log = LoggerFactory.getLogger(ReadCache.class);

    private static final int DEFAULT_MAX_SEGMENT_SIZE = 1 * 1024 * 1024 * 1024;

    private final List<ByteBuf> cacheSegments;
```

## RuleId[id=LoopConditionNotUpdatedInsideLoop]
### LoopConditionNotUpdatedInsideLoop
Variable 'success' is not updated inside loop
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamCluster.java`
#### Snippet
```java
        int retries = 0;

        while (!success) {
            synchronized (this) {
                bookiePort = nextBookiePort++;
```

## RuleId[id=EmptyStatementBody]
### EmptyStatementBody
`if` statement has empty body
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
        if (!isCurSequenceInitialized()) {
            initializeCurSequence(entryId);
        } else if (isEntryExistingInCurSequence(entryId)) {
            /* this entry is already added so do nothing */
        } else if (isEntryAppendableToCurSequence(entryId)) {
```

### EmptyStatementBody
`else` statement has empty body
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex.java`
#### Snippet
```java
            }
            pendingLedgersUpdates.add(new SimpleEntry<Long, LedgerData>(ledgerId, newLedgerData));
        } else {
            // unknown ledger here
        }
```

### EmptyStatementBody
`if` statement has empty body
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/ReadCache.java`
#### Snippet
```java
            }
            int offset = currentSegmentOffset.getAndAdd(alignedSize);
            if (offset + entrySize > segmentSize) {
                // Roll-over the segment (outside the read-lock)
            } else {
```

### EmptyStatementBody
`else` statement has empty body
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/ReadCache.java`
#### Snippet
```java
                } else if (!cacheIndexes.get(i).isEmpty()) {
                    size += segmentSize;
                } else {
                    // the segment is empty
                }
```

### EmptyStatementBody
`while` statement has empty body
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifier.java`
#### Snippet
```java

            /* see startRead and startWrite, they return false once no more IO can be started */
            while (startRead() || startWrite()) {}
            long toWait = testEnd - System.currentTimeMillis();

```

### EmptyStatementBody
`else` statement has empty body
in `cpu-affinity/src/main/java/org/apache/bookkeeper/common/util/affinity/impl/ProcessorsInfo.java`
#### Snippet
```java
                } else if (key.equals("processor")) {
                    cpuId = Integer.parseInt(value);
                } else {
                    // ignore
                }
```

## RuleId[id=JavaLangInvokeHandleSignature]
### JavaLangInvokeHandleSignature
Cannot resolve method 'onSpinWait'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BusyWait.java`
#### Snippet
```java
        MethodHandle handle = null;
        try {
            handle = MethodHandles.lookup().findStatic(Thread.class, "onSpinWait", MethodType.methodType(void.class));
        } catch (Throwable t) {
            // Ignore
```

## RuleId[id=UnnecessaryStringEscape]
### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java

        if (allowedRoles == null || allowedRoles.length == 0) {
            throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                    + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java

        if (allowedRoles == null || allowedRoles.length == 0) {
            throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                    + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        if (allowedRoles == null || allowedRoles.length == 0) {
            throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                    + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
        }

```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        if (allowedRoles == null || allowedRoles.length == 0) {
            throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                    + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
        }

```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        if (allowedRoles == null || allowedRoles.length == 0) {
            throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                    + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
        }

```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        if (allowedRoles == null || allowedRoles.length == 0) {
            throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                    + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
        }

```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        for (String allowedRole : allowedRoles) {
            if (Strings.isNullOrEmpty(allowedRole)) {
                throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                        + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
            }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        for (String allowedRole : allowedRoles) {
            if (Strings.isNullOrEmpty(allowedRole)) {
                throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                        + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
            }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
            if (Strings.isNullOrEmpty(allowedRole)) {
                throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                        + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
            }
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
            if (Strings.isNullOrEmpty(allowedRole)) {
                throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                        + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
            }
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
            if (Strings.isNullOrEmpty(allowedRole)) {
                throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                        + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
            }
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
            if (Strings.isNullOrEmpty(allowedRole)) {
                throw new RuntimeException("Configuration option \'bookieAuthProviderFactoryClass\' is set to"
                        + " \'BookieAuthZFactory\' but no roles set for configuration field \'authorizedRoles\'.");
            }
        }
```

## RuleId[id=StaticInitializerReferencesSubClass]
### StaticInitializerReferencesSubClass
Referencing subclass LongLedgerIdFormatter from superclass LedgerIdFormatter initializer might lead to class loading deadlock
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LedgerIdFormatter.java`
#### Snippet
```java

    // Used by BKExtentIdByteArray
    public static final LedgerIdFormatter LONG_LEDGERID_FORMATTER = new LongLedgerIdFormatter();

    public static LedgerIdFormatter newLedgerIdFormatter(AbstractConfiguration<?> conf) {
```

### StaticInitializerReferencesSubClass
Referencing subclass StringEntryFormatter from superclass EntryFormatter initializer might lead to class loading deadlock
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/EntryFormatter.java`
#### Snippet
```java
     */
    public abstract void formatEntry(java.io.InputStream input);
    public static final EntryFormatter STRING_FORMATTER = new StringEntryFormatter();

    public static EntryFormatter newEntryFormatter(AbstractConfiguration<?> conf) {
```

## RuleId[id=CommentedOutCode]
### CommentedOutCode
Commented out code (3 lines)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
        //    on its znode registration due zookeeper session expire.
        // e. if we want to permanently remove a bookkeeper client, we should watch on the cookies' list.
        // if (bk.getBookieClient() != null) {
        //     bk.getBookieClient().closeClients(deadBookies);
        // }
```

## RuleId[id=SortedCollectionWithNonComparableKeys]
### SortedCollectionWithNonComparableKeys
Construction of sorted collection with non-comparable elements
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/SnapshotMap.java`
#### Snippet
```java
        updates = new ConcurrentHashMap<K, V>();
        updatesToMerge = new ConcurrentHashMap<K, V>();
        snapshot = new ConcurrentSkipListMap<K, V>();
    }

```

## RuleId[id=DuplicateBranchesInSwitch]
### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
            return true;
        case NOT_PRESENT:
            return false;
        default:
            return false;
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/BKHttpServiceProvider.java`
#### Snippet
```java
                return new HeartbeatService();
            case SERVER_CONFIG:
                return new ConfigurationService(configuration);
            case METRICS:
                return new MetricsService(configuration, statsProvider);
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCCommandProcessor.java`
#### Snippet
```java
        switch (command.getReqCase()) {
            case NOP_REQ:
                return;
            case PUT_REQ:
                applyPutCommand(txid, command, store);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/LimitedPermitManager.java`
#### Snippet
```java
                break;
            case Expired:
                forceSetAllowPermits(false);
                break;
            default:
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
                switch (event.getState()) {
                    case SyncConnected:
                        break;
                    case Expired:
                        LOG.info("Session {} is expired for lock {} at {} : watcher epoch {}, lock epoch {}.",
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
            switch (toState) {
                case INIT:
                    return false;
                case PREPARING:
                    return inState(State.INIT);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
                    return inState(State.PREPARED);
                case WAITING:
                    return inState(State.PREPARED);
                case EXPIRED:
                    return isTryingOrClaimed();
```

## RuleId[id=NonFinalFieldInEnum]
### NonFinalFieldInEnum
Non-final field `str` in enum 'KeyStoreType'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/TLSContextFactory.java`
#### Snippet
```java
        PEM("PEM");

        private String str;

        KeyStoreType(String str) {
```

### NonFinalFieldInEnum
Non-final field `numVal` in enum 'PlacementPolicyAdherence'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
    enum PlacementPolicyAdherence {
        FAIL(1), MEETS_SOFT(3), MEETS_STRICT(5);
        private int numVal;

        private PlacementPolicyAdherence(int numVal) {
```

### NonFinalFieldInEnum
Non-final field `code` in enum 'Type'
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/io/CompressionCodec.java`
#### Snippet
```java
        LZ4(0x1);

        private int code;

        Type(int code) {
```

### NonFinalFieldInEnum
Non-final field `validator` in enum 'Type'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/Type.java`
#### Snippet
```java
    CLASS((name, value) -> value instanceof Class || value instanceof String);

    private Validator validator;

    Type(Validator validator) {
```

### NonFinalFieldInEnum
Non-final field `value` in enum 'StatusCode'
in `bookkeeper-http/http-server/src/main/java/org/apache/bookkeeper/http/HttpServer.java`
#### Snippet
```java
        SERVICE_UNAVAILABLE(503);

        private int value;

        StatusCode(int value) {
```

## RuleId[id=OctalLiteral]
### OctalLiteral
Octal integer `00644`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectWriter.java`
#### Snippet
```java
            fd = nativeIO.open(filename,
                               NativeIO.O_CREAT | NativeIO.O_WRONLY | NativeIO.O_DIRECT,
                               00644);
            checkState(fd >= 0, "Open should have thrown exception, fd is invalid : %d", fd);
        } catch (NativeIOException ne) {
```

### OctalLiteral
Octal integer `00755`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java
            fd = nativeIO.open(filename,
                               NativeIO.O_RDONLY | NativeIO.O_DIRECT,
                               00755);
            checkState(fd >= 0, "Open should throw exception on negative return (%d)", fd);
        } catch (NativeIOException ne) {
```

## RuleId[id=DuplicateExpressions]
### DuplicateExpressions
Multiple occurrences of `i + 1 == chars.length || chars[i + 1] == '/'`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/DLUtils.java`
#### Snippet
```java

                    if (c == '.' && lastc == '.') {
                        if (chars[i - 2] == '/' && (i + 1 == chars.length || chars[i + 1] == '/')) {
                            reason = "relative paths not allowed @" + i;
                            break;
```

### DuplicateExpressions
Multiple occurrences of `i + 1 == chars.length || chars[i + 1] == '/'`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/DLUtils.java`
#### Snippet
```java
                        }
                    } else if (c == '.') {
                        if (chars[i - 1] == '/' && (i + 1 == chars.length || chars[i + 1] == '/')) {
                            reason = "relative paths not allowed @" + i;
                            break;
```

## RuleId[id=StringBufferReplaceableByString]
### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerLayout.java`
#### Snippet
```java
    public byte[] serialize() throws IOException {
        String s =
          new StringBuilder().append(layoutFormatVersion).append(lSplitter)
              .append(managerFactoryClass).append(splitter).append(managerVersion).toString();

```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java`
#### Snippet
```java
    @Override
    public String getLedgerPath(long ledgerId) {
        StringBuilder sb = new StringBuilder();
        sb.append(ledgerPrefix)
          .append(StringUtils.getZKStringId(ledgerId));
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
        String ledgerIdStr = getZKStringIdForLongHierarchical(ledgerId);
        // do 3-4-4-4-4 split
        StringBuilder sb = new StringBuilder();
        sb.append("/")
          .append(ledgerIdStr, 0, 3).append("/")
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
        String ledgerIdStr = getZKStringId(ledgerId);
        // do 2-4-4 split
        StringBuilder sb = new StringBuilder();
        sb.append("/")
          .append(ledgerIdStr, 0, 2).append("/")
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java

    static String rangeToString(Long firstLedger, boolean firstInclusive, Long lastLedger, boolean lastInclusive) {
        StringBuilder sb = new StringBuilder();
        sb.append(firstInclusive ? "[ " : "( ").append(firstLedger).append(" ~ ").append(lastLedger)
                .append(lastInclusive ? " ]" : " )");
```

### StringBufferReplaceableByString
`StringBuilder builder` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append(CURRENT_STATUS_LAYOUT_VERSION);
        builder.append(",");
```

### StringBufferReplaceableByString
`StringBuilder b` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java

    private String toStringVersion3() {
        StringBuilder b = new StringBuilder();
        b.append(CURRENT_COOKIE_LAYOUT_VERSION).append("\n")
            .append(bookieId).append("\n")
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLocation.java`
#### Snippet
```java
    @Override
    public String toString() {
        return new StringBuilder().append("EntryLocation{")
            .append("ledger=").append(ledger)
            .append(",entry=").append(entry)
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerEntryPage.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(getLedger());
        sb.append('@');
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LogMark.java`
#### Snippet
```java
    @Override
    public synchronized String toString() {
        StringBuilder sb = new StringBuilder();

        sb.append("LogMark: logFileId - ").append(logFileId)
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadata.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("{totalSize = ").append(totalSize).append(", remainingSize = ").append(remainingSize)
                .append(", ledgersMap = ").append(ledgersMap.toString()).append("}");
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
        int parent = (int) (ledgerId & 0xff);
        int grandParent = (int) ((ledgerId & 0xff00) >> 8);
        StringBuilder sb = new StringBuilder();
        sb.append(Integer.toHexString(grandParent));
        sb.append('/');
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingAddOp.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("PendingAddOp(lid:").append(lh.ledgerId)
          .append(", eid:").append(entryId).append(", completed:")
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/RangeId.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("range(")
            .append(streamId)
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/StatsLogger.java`
#### Snippet
```java
    default StatsLogger scopeLabel(String labelName, String labelValue) {
        // Provide default implementation for backward compatibility
        return scope(new StringBuilder()
                .append(labelName)
                .append('_')
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/EntryPosition.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("(").append(lssn).append(", ").append(entryId).append(")");
        return sb.toString();
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/bk/QuorumConfig.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("QuorumConfig[ensemble=")
          .append(ensembleSize).append(", write quorum=")
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControl.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("entry(path=").append(zkPath).append(", acl=")
                .append(accessControlEntry).append(")");
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/injector/AsyncRandomFailureInjector.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append("FailureInjector[");
        sb.append("errors=(").append(simulateErrors).append(", pct=")
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
            @Override
            public String getActionName() {
                StringBuilder sb = new StringBuilder();
                sb.append("watchLockOwner(myNode=").append(myNode).append(", siblingNode=")
                        .append(siblingNode).append(", ownerNode=").append(ownerNode).append(")");
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
            throws UnsupportedEncodingException {
        // member_<clientid>_s<owner_session>_
        StringBuilder sb = new StringBuilder();
        sb.append(lockPath).append(LOCK_PATH_PREFIX).append(URLEncoder.encode(clientId, UTF_8.name())).
                append(LOCK_PART_SEP).append("s").append(String.format("%10d", sessionOwner)).append(LOCK_PART_SEP);
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
                                @Override
                                public String getActionName() {
                                    StringBuilder sb = new StringBuilder();
                                    sb.append("postWatchLockOwner(myNode=").append(myNode).append(", siblingNode=")
                                            .append(siblingNode).append(", ownerNode=").append(ownerNode).append(")");
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/namespace/NamespaceDriverManager.java`
#### Snippet
```java
        @Override
        public String toString() {
            StringBuilder sb = new StringBuilder();
            sb.append("driver[")
                    .append(driverClassName)
```

## RuleId[id=Deprecation]
### Deprecation
'setNettyUsePooledBuffers(boolean)' is deprecated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerEntry.java`
#### Snippet
```java
     * @return a ByteBuf which contains the data
     *
     * @see ClientConfiguration#setNettyUsePooledBuffers(boolean)
     * @throws IllegalStateException if the entry has been retrieved by {@link #getEntry()}
     * or {@link #getEntryInputStream()}.
```

### Deprecation
'getReadTimeout()' is deprecated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * writing when a bookie has failed but the failure has not yet been detected. Detecting
     * a bookie has failed can take a number of seconds, as configured by the read timeout
     * {@link ClientConfiguration#getReadTimeout()}. Once the bookie failure is detected,
     * that bookie will be removed from the ensemble.
     *
```

### Deprecation
'getReadTimeout()' is deprecated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * writing when a bookie has failed but the failure has not yet been detected. Detecting
     * a bookie has failed can take a number of seconds, as configured by the read timeout
     * {@link ClientConfiguration#getReadTimeout()}. Once the bookie failure is detected,
     * that bookie will be removed from the ensemble.
     *
```

### Deprecation
'getReadTimeout()' is deprecated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * writing when a bookie has failed but the failure has not yet been detected. Detecting
     * a bookie has failed can take a number of seconds, as configured by the read timeout
     * {@link ClientConfiguration#getReadTimeout()}. Once the bookie failure is detected,
     * that bookie will be removed from the ensemble.
     *
```

### Deprecation
'getZkAvailableBookiesPath()' is deprecated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          client assumes that the running bookies have been registered with
     *          zookeeper under the path
     *          {@link AbstractConfiguration#getZkAvailableBookiesPath()}
     * @throws IOException
     * @throws InterruptedException
```

### Deprecation
'getZkLedgersRootPath()' is deprecated
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BookKeeperClientBuilder.java`
#### Snippet
```java
     *          ledgers path
     * @return builder
     * @see org.apache.bookkeeper.conf.ClientConfiguration#getZkLedgersRootPath()
     */
    public synchronized BookKeeperClientBuilder ledgersPath(String ledgersPath) {
```

## RuleId[id=UnnecessaryReturn]
### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLayoutManager.java`
#### Snippet
```java
                log.debug("Successfully delete layout '{}'", layoutKey.toString(StandardCharsets.UTF_8));
            }
            return;
        } else {
            throw new IOException("No ledger layout is found under '" + layoutKey.toString(StandardCharsets.UTF_8)
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLayoutManager.java`
#### Snippet
```java
        // key doesn't exist and we created the key
        if (!response.isSucceeded()) {
            return;
        // key exists and we retrieved the key
        } else {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLedgerManager.java`
#### Snippet
```java
        LedgerMetadataConsumer oldConsumer = listeners.putIfAbsent(listener, lmConsumer);
        if (null != oldConsumer) {
            return;
        } else {
            lmStream.readAndWatch(lmConsumer)
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLedgerManager.java`
#### Snippet
```java
                        log.error("Could not parse ledger metadata for ledger : {}", ledgerId, ioe);
                        promise.completeExceptionally(new BKException.MetaStoreException());
                        return;
                    }
                } else {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLedgerManager.java`
#### Snippet
```java
        ValueStream<LedgerMetadata> lmStream = watchers.get(ledgerId);
        if (null == lmStream) {
            return;
        } else {
            lmStream.unwatch(lmConsumer).thenAccept(noConsumers -> {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongHierarchicalLedgerManager.java`
#### Snippet
```java
            if ((level == 0) && !isLedgerParentNode(lNode)) {
                cb.processResult(successRc, null, context);
                return;
            } else if (level < 3) {
                asyncProcessLevelNodes(nodePath,
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java`
#### Snippet
```java
                        + "since DISABLE_NODE ZNode is deleted");
                cb.operationComplete(0, null);
                return;
            }
        } catch (KeeperException ke) {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java`
#### Snippet
```java
            if (null == zkc.exists(lostBookieRecoveryDelayZnode, w)) {
                cb.operationComplete(0, null);
                return;
            }
        } catch (KeeperException ke) {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                            channel, builder.build()
                    );
                    return;
                } else {
                    AuthMessage message = AuthMessage.newBuilder().setAuthPluginName(pluginName)
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
            errorOut(completionKey);
            ReferenceCountUtil.release(toSend);
            return;
        } else {
            // addEntry times out on backpressure
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LocalBookieEnsemblePlacementPolicy.java`
#### Snippet
```java
    @Override
    public void registerSlowBookie(BookieId bookieSocketAddress, long entryId) {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LocalBookieEnsemblePlacementPolicy.java`
#### Snippet
```java
    @Override
    public void updateBookieInfo(Map<BookieId, BookieInfo> bookieToFreeSpaceMap) {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    default void resumeMajorGC() {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    default void suspendMajorGC() {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    default void suspendMinorGC() {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    default void entryLocationCompact(List<String> locations) {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    default void entryLocationCompact() {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     */
    default void forceGC(Boolean forceMajor, Boolean forceMinor) {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     */
    default void forceGC() {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    default void resumeMinorGC() {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStateManager.java`
#### Snippet
```java
                    + " Shutting down", e);
            shutdownHandler.shutdown(ExitCode.BOOKIE_EXCEPTION);
            return;
        }
    }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStateManager.java`
#### Snippet
```java
            // already see the bookie in writable list. so just log the exception
            LOG.warn("Failed to delete bookie readonly state in zookeeper : ", e);
            return;
        }
    }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
            // ledger has been deleted
            LOG.info("No ledger {} found when flushing header.", ledger);
            return;
        } finally {
            if (null != fi) {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DefaultEnsemblePlacementPolicy.java`
#### Snippet
```java
    @Override
    public void registerSlowBookie(BookieId bookieSocketAddress, long entryId) {
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadOnlyLedgerHandle.java`
#### Snippet
```java

                handleUnrecoverableErrorDuringAdd(e.getCode());
                return;
            }
        }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerRecoveryOp.java`
#### Snippet
```java
                    entry.getEntryId(), lh.getId(), readDone);
        }
        return;
    }

```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/KVCommandProcessor.java`
#### Snippet
```java
                return;
            default:
                return;
        }
    }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCCommandProcessor.java`
#### Snippet
```java
                return;
            default:
                return;
        }
    }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/journal/AbstractStateStoreWithJournal.java`
#### Snippet
```java
                    log.error(msg);
                    FutureUtils.completeExceptionally(future, new InvalidStateStoreException(msg));
                    return;
                }
            }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/ZkStorageContainerManager.java`
#### Snippet
```java

            if (oldSad.equals(newSad)) {
                return;
            } else {
                log.info("Server assignment is change for {}:\nold assignment: {}\nnew assignment: {}",
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogHandler.java`
#### Snippet
```java
                                if (1 == numFailures.incrementAndGet()) {
                                    readResult.completeExceptionally(cause);
                                    return;
                                }
                            }
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
                    removeLogSegmentFromCache(segmentMetadata.getZNodeName());
                    promise.complete(segmentMetadata);
                    return;
                } else {
                    LOG.error("Couldn't purge {} for {}: with error {}",
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogReader.java`
#### Snippet
```java
                            && readAheadReader.isReaderIdle(idleErrorThresholdMillis, TimeUnit.MILLISECONDS))) {
                        markReaderAsIdle();
                        return;
                    } else if (lastProcessTime.elapsed(TimeUnit.MILLISECONDS) > idleErrorThresholdMillis) {
                        markReaderAsIdle();
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogReader.java`
#### Snippet
```java
                } catch (IOException e) {
                    setLastException(e);
                    return;
                }
            }, period, period, TimeUnit.MILLISECONDS);
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLockFactory.java`
#### Snippet
```java
                // if the creation is interrupted, throw the exception without retrie.
                createPromise.completeExceptionally(dlie);
                return;
            } catch (IOException e) {
                if (numRetries.getAndDecrement() < 0) {
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/metadata/ZKLogStreamMetadataStore.java`
#### Snippet
```java
                public void onFailure(Throwable cause) {
                    promise.completeExceptionally(cause);
                    return;
                }
            });
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
            if (isNotBeyondLastAddConfirmed(cacheEntry.getEntryId())) {
                issueSimpleRead(cacheEntry);
                return;
            } else {
                // Reach the end of stream
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                promise.completeExceptionally(
                        KeeperException.create(KeeperException.Code.get(rc)));
                return;
            }
        }, null);
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                promise.completeExceptionally(
                        KeeperException.create(KeeperException.Code.get(rc)));
                return;
            }
        }, null);
```

## RuleId[id=SimplifiableConditionalExpression]
### SimplifiableConditionalExpression
`(logChannel == null) ? false : logChannelWithDirInfo.isLedgerDirFull()` can be simplified to 'logChannel!=null \&\& logChannelWithDirInfo.isLedgerDirFull()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                    : readEntryLogHardLimit(logChannel, entrySize);
            // Create new log if logSizeLimit reached or current disk is full
            boolean diskFull = (logChannel == null) ? false : logChannelWithDirInfo.isLedgerDirFull();
            boolean allDisksFull = !ledgerDirsManager.hasWritableLedgerDirs();

```

## RuleId[id=ManualMinMaxCalculation]
### ManualMinMaxCalculation
Can be replaced with 'Math.max()' call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BKStats.java`
#### Snippet
```java
        public OpStats diff(OpStats base) {
            OpStats diff = new OpStats();
            diff.maxLatency = this.maxLatency > base.maxLatency ? this.maxLatency : base.maxLatency;
            diff.minLatency = this.minLatency > base.minLatency ? base.minLatency : this.minLatency;
            diff.totalLatency = this.totalLatency - base.totalLatency;
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BKStats.java`
#### Snippet
```java
            OpStats diff = new OpStats();
            diff.maxLatency = this.maxLatency > base.maxLatency ? this.maxLatency : base.maxLatency;
            diff.minLatency = this.minLatency > base.minLatency ? base.minLatency : this.minLatency;
            diff.totalLatency = this.totalLatency - base.totalLatency;
            diff.numSuccessOps = this.numSuccessOps - base.numSuccessOps;
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            throws BKNotEnoughBookiesException {
        int bookieToReplaceIndex = currentEnsemble.indexOf(bookieToReplace);
        int desiredNumZonesPerWriteQuorumForThisEnsemble = (writeQuorumSize < desiredNumZonesPerWriteQuorum)
                ? writeQuorumSize : desiredNumZonesPerWriteQuorum;
        List<BookieId> newEnsemble = new ArrayList<BookieId>(currentEnsemble);
        rwLock.readLock().lock();
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifier.java`
#### Snippet
```java
        }
        long start = Math.abs(opRand.nextLong() % lastEntryCompleted);
        long end = start + targetReadGroup > lastEntryCompleted ? lastEntryCompleted : start + targetReadGroup;
        System.out.format("Reading %d -> %d from ledger %d%n", start, end, ledger.ledgerID);
        LedgerInfo finalLedger = ledger;
```

### ManualMinMaxCalculation
Can be replaced with 'Math.max()' call
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLOutputStream.java`
#### Snippet
```java
        this.dlm = dlm;
        this.writer = writer;
        this.writePos = writer.getLastTxId() < 0L ? 0L : writer.getLastTxId();
        this.syncPos[0] = writePos;
    }
```

### ManualMinMaxCalculation
Can be replaced with 'Math.max()' call
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLOutputStream.java`
#### Snippet
```java
        this.dlm = dlm;
        this.writer = writer;
        this.writePos = writer.getLastTxId() < 0L ? 0L : writer.getLastTxId();
        this.syncPos[0] = writePos;
    }
```

### ManualMinMaxCalculation
Can be replaced with 'Math.max()' call
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLFileSystem.java`
#### Snippet
```java
                ),
                statistics,
                writer.getLastTxId() < 0L ? 0L : writer.getLastTxId());
        } catch (LogNotFoundException le) {
            throw new FileNotFoundException(path.toString());
```

## RuleId[id=TrivialStringConcatenation]
### TrivialStringConcatenation
Empty string used in concatenation
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/container/StorageContainerChannel.java`
#### Snippet
```java
                new StorageContainerException(StatusCode.STALE_GROUP_INFO,
                    "Fetched a stale storage container info : current = " + scInfo.getRevision()
                        + ", fetched = " + endpoint.getRevision() + ""));
            return;
        }
```

## RuleId[id=FinalStaticMethod]
### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
    private static final int R = 47;

    static final long hash(long key) {
        long hash = key * HashMixer;
        hash ^= hash >>> R;
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
    }

    static final int signSafeMod(long n, int max) {
        return (int) n & (max - 1);
    }
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashSet.java`
#### Snippet
```java
    private static final int R = 47;

    static final <K> long hash(K key) {
        long hash = key.hashCode() * HashMixer;
        hash ^= hash >>> R;
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashSet.java`
#### Snippet
```java
    }

    static final int signSafeMod(long n, int max) {
        return (int) n & (max - 1);
    }
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java
    }

    static final int signSafeMod(long n, int max) {
        return (int) (n & (max - 1)) << 1;
    }
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java
    private static final int R = 47;

    static final <K> long hash(K key) {
        long hash = key.hashCode() * HashMixer;
        hash ^= hash >>> R;
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
    private static final int R = 47;

    static final long hash(long key) {
        long hash = key * HashMixer;
        hash ^= hash >>> R;
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
    }

    static final int signSafeMod(long n, int max) {
        return (int) (n & (max - 1)) << 1;
    }
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
    }

    static final int signSafeMod(long n, int max) {
        return (int) (n & (max - 1));
    }
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
    private static final int R = 47;

    static final long hash(long key) {
        long hash = key * HashMixer;
        hash ^= hash >>> R;
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java

    @VisibleForTesting
    public static final String getLedgerName(long ledgerId) {
        int parent = (int) (ledgerId & 0xff);
        int grandParent = (int) ((ledgerId & 0xff00) >> 8);
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
    }

    static final int signSafeMod(long n, int max) {
        return (int) (n & (max - 1)) << 2;
    }
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
    private static final int R = 47;

    static final long hash(long key1, long key2) {
        long hash = key1 * HashMixer;
        hash ^= hash >>> R;
```

### FinalStaticMethod
'static' method declared `final`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/EmbeddedServer.java`
#### Snippet
```java
     * @return a new embedded server builder
     */
    public static final Builder builder(BookieConfiguration conf) {
        return new Builder(conf);
    }
```

### FinalStaticMethod
'static' method declared `final`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    }

    public static final byte[] getStreamRangeKey(long streamId, long rangeId) {
        byte[] rangeKey = new byte[2 * Long.BYTES + 1];
        Bytes.toBytes(streamId, rangeKey, 0);
```

### FinalStaticMethod
'static' method declared `final`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    private static final byte END_SEP = (byte) 0xff;

    public static final byte[] getStreamMetadataKey(long streamId) {
        byte[] metadataKey = new byte[Long.BYTES + 1];
        Bytes.toBytes(streamId, metadataKey, 0);
```

### FinalStaticMethod
'static' method declared `final`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    }

    static final boolean isStreamRangeKey(byte[] key) {
        return key.length == (2 * Long.BYTES + 1) && key[Long.BYTES] == RANGE_SEP;
    }
```

### FinalStaticMethod
'static' method declared `final`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    }

    public static final byte[] getStreamMetadataEndKey(long streamId) {
        byte[] metadataKey = new byte[Long.BYTES + 1];
        Bytes.toBytes(streamId, metadataKey, 0);
```

### FinalStaticMethod
'static' method declared `final`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    }

    public static final boolean isMetadataKey(byte[] key) {
        return key.length == (Long.BYTES + 1) && key[Long.BYTES] == METADATA_SEP;
    }
```

## RuleId[id=RedundantTypeArguments]
### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ClientInternalConf.java`
#### Snippet
```java
                                        conf.getSpeculativeReadTimeoutBackoffMultiplier()));
        } else {
            this.readSpeculativeRequestPolicy = Optional.<SpeculativeRequestExecutionPolicy>empty();
        }
        if (conf.getFirstSpeculativeReadLACTimeout() > 0) {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ClientInternalConf.java`
#### Snippet
```java
                        conf.getSpeculativeReadLACTimeoutBackoffMultiplier()));
        } else {
            this.readLACSpeculativeRequestPolicy = Optional.<SpeculativeRequestExecutionPolicy>empty();
        }
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/ReadHandle.java`
#### Snippet
```java
    default LedgerEntries readUnconfirmed(long firstEntry, long lastEntry)
            throws BKException, InterruptedException {
        return FutureUtils.<LedgerEntries, BKException>result(readUnconfirmedAsync(firstEntry, lastEntry),
                                                              BKException.HANDLER);
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/ReadHandle.java`
#### Snippet
```java
                                                               boolean parallel)
            throws BKException, InterruptedException {
        return FutureUtils.<LastConfirmedAndEntry, BKException>result(
                readLastAddConfirmedAndEntryAsync(entryId, timeOutInMillis, parallel),
                BKException.HANDLER);
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/ReadHandle.java`
#### Snippet
```java
     */
    default LedgerEntries read(long firstEntry, long lastEntry) throws BKException, InterruptedException {
        return FutureUtils.<LedgerEntries, BKException>result(readAsync(firstEntry, lastEntry),
                                                              BKException.HANDLER);
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
    synchronized Future<?> submitLostBookieRecoveryDelayChangedEvent() {
        if (executor.isShutdown()) {
            SettableFuture<Void> f = SettableFuture.<Void>create();
            f.setException(new BKAuditException("Auditor shutting down"));
            return f;
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
    synchronized Future<?> submitAuditTask() {
        if (executor.isShutdown()) {
            SettableFuture<Void> f = SettableFuture.<Void>create();
            f.setException(new BKAuditException("Auditor shutting down"));
            return f;
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKSyncLogReader.java`
#### Snippet
```java
        this.bkdlm = bkdlm;
        this.readHandler = bkdlm.createReadHandler(
                Optional.<String>empty(),
                this,
                true);
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadUtils.java`
#### Snippet
```java
                            Lists.newArrayList(0L, lastEntryId),
                            nWays,
                            Optional.<LogRecordWithDLSN>empty(),
                            promise);
                }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
                    eventLoopGroup,
                    requestTimer,
                    Optional.<FeatureProvider>empty(),
                    statsLogger);
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
    @Override
    public LogReader openLogReader(DLSN fromDLSN) throws IOException {
        return getInputStreamInternal(fromDLSN, Optional.<Long>empty());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
                        fetchPromise.complete(Optional.of(uri));
                    } else if (Code.NONODE.intValue() == rc) {
                        fetchPromise.complete(Optional.<URI>empty());
                    } else {
                        fetchPromise.completeExceptionally(KeeperException.create(Code.get(rc)));
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
 */
    public static class WatchNamespaceCommand extends PerDLCommand implements NamespaceListener {
        private Set<String> currentSet = Sets.<String>newHashSet();
        private CountDownLatch doneLatch = new CountDownLatch(1);

```

## RuleId[id=NullableProblems]
### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/utils/ListenableFutureRpcProcessor.java`
#### Snippet
```java

    @Override
    public void onFailure(Throwable t) {
        Status status = null;
        if (t instanceof StatusRuntimeException) {
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/utils/RpcUtils.java`
#### Snippet
```java

                @Override
                public void onFailure(Throwable throwable) {
                    GrpcUtils.processRpcException(throwable, result);
                }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `stream/common/src/main/java/org/apache/bookkeeper/common/util/ListenableFutures.java`
#### Snippet
```java

            @Override
            public void onFailure(Throwable t) {
                completableFuture.completeExceptionally(t);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `stream/common/src/main/java/org/apache/bookkeeper/common/util/ListenableFutures.java`
#### Snippet
```java

            @Override
            public void onFailure(Throwable t) {
                completableFuture.completeExceptionally(t);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DaemonThreadFactory.java`
#### Snippet
```java
    }
    @Override
    public Thread newThread(Runnable r) {
        Thread thread = defaultThreadFactory.newThread(r);
        thread.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSource.java`
#### Snippet
```java

            @Override
            public int compareTo(Checkpoint o) {
                if (o == MAX) {
                    return 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSource.java`
#### Snippet
```java
        Checkpoint MIN = new Checkpoint() {
            @Override
            public int compareTo(Checkpoint o) {
                if (o == MIN) {
                    return 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java

        @Override
        public Void get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {
            throw new ExecutionException(failureCause);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java

        @Override
        public Iterator<LedgerCache.PageEntries> iterator() {
            return new Iterator<LedgerCache.PageEntries>() {
                @Override
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                    .removalListener(new RemovalListener<Long, MutableInt>() {
                        @Override
                        public void onRemoval(RemovalNotification<Long, MutableInt> removedEntryFromCounterMap) {
                            if ((removedEntryFromCounterMap != null)
                                    && (removedEntryFromCounterMap.getValue() != null)) {
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
        this.entryLogAndLockTupleCacheLoader = new CacheLoader<Long, EntryLogAndLockTuple>() {
            @Override
            public EntryLogAndLockTuple load(Long key) throws Exception {
                return new EntryLogAndLockTuple(key);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
        this.entryLogAndLockTupleCacheLoader = new CacheLoader<Long, EntryLogAndLockTuple>() {
            @Override
            public EntryLogAndLockTuple load(Long key) throws Exception {
                return new EntryLogAndLockTuple(key);
            }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                    }).build(new CacheLoader<Long, MutableInt>() {
                        @Override
                        public MutableInt load(Long key) throws Exception {
                            synchronized (EntryLogsPerLedgerCounter.this) {
                                return new MutableInt();
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                    }).build(new CacheLoader<Long, MutableInt>() {
                        @Override
                        public MutableInt load(Long key) throws Exception {
                            synchronized (EntryLogsPerLedgerCounter.this) {
                                return new MutableInt();
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                    @Override
                    public void onRemoval(
                            RemovalNotification<Long, EntryLogAndLockTuple> expiredLedgerEntryLogMapEntry) {
                        onCacheEntryRemoval(expiredLedgerEntryLogMapEntry);
                    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSourceList.java`
#### Snippet
```java

        @Override
        public int compareTo(Checkpoint o) {
            if (o == Checkpoint.MAX) {
                return -1;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java

        @Override
        public int compareTo(Checkpoint o) {
            if (o == Checkpoint.MAX) {
                return -1;
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DefaultSpeculativeRequestExecutionPolicy.java`
#### Snippet
```java

                        @Override
                        public void onFailure(Throwable thrown) {
                            LOG.warn("Failed to issue speculative request for {}, speculativeReadTimeout = {} : ",
                                    requestExecutor, speculativeRequestTimeout, thrown);
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                .build(new CacheLoader<BookieId, Long>() {
                    @Override
                    public Long load(BookieId key) throws Exception {
                        return -1L;
                    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                .build(new CacheLoader<BookieId, Long>() {
                    @Override
                    public Long load(BookieId key) throws Exception {
                        return -1L;
                    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            .build(new CacheLoader<BookieId, Long>() {
                @Override
                public Long load(BookieId key) throws Exception {
                    return -1L;
                }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            .build(new CacheLoader<BookieId, Long>() {
                @Override
                public Long load(BookieId key) throws Exception {
                    return -1L;
                }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
            .build(new CacheLoader<BookieId, Long>() {
            @Override
            public Long load(BookieId key) {
                return -1L;
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
            .build(new CacheLoader<BookieId, Long>() {
            @Override
            public Long load(BookieId key) {
                return -1L;
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java

                    @Override
                    public void onRemoval(RemovalNotification<BookieId, Boolean> bookie) {
                        log.info("Bookie {} is no longer quarantined", bookie.getKey());
                    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerOutputStream.java`
#### Snippet
```java

    @Override
    public synchronized void write(byte[] b, int off, int len) {
        if (!makeSpace(len)) {
            // lets try making the buffer bigger
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerInputStream.java`
#### Snippet
```java

    @Override
    public synchronized int read(byte[] b, int off, int len) throws IOException {
        // again dont need ot fully
        // fill b, just return
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerInputStream.java`
#### Snippet
```java

    @Override
    public synchronized int read(byte[] b) throws IOException {
        // be smart ... just copy the bytes
        // once and return the size
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorElector.java`
#### Snippet
```java
        executor = Executors.newSingleThreadExecutor(new ThreadFactory() {
                @Override
                public Thread newThread(Runnable r) {
                    return new Thread(r, "AuditorElector-" + bookieId);
                }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorCheckAllLedgersTask.java`
#### Snippet
```java
        this.ledgerCheckerExecutor = Executors.newSingleThreadExecutor(new ThreadFactory() {
            @Override
            public Thread newThread(Runnable r) {
                Thread t = new Thread(r, "AuditorCheckAllLedgers-LedgerChecker");
                t.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
        executor = Executors.newSingleThreadScheduledExecutor(new ThreadFactory() {
            @Override
            public Thread newThread(Runnable r) {
                Thread t = new Thread(r, "AuditorBookie-" + bookieIdentifier);
                t.setDaemon(true);
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
                .build(new CacheLoader<Long, AtomicInteger>() {
                    @Override
                    public AtomicInteger load(Long key) throws Exception {
                        return new AtomicInteger();
                    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
                .build(new CacheLoader<Long, AtomicInteger>() {
                    @Override
                    public AtomicInteger load(Long key) throws Exception {
                        return new AtomicInteger();
                    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
                .build(new CacheLoader<Long, ConcurrentSkipListSet<Long>>() {
                    @Override
                    public ConcurrentSkipListSet<Long> load(Long key) throws Exception {
                        return new ConcurrentSkipListSet<Long>();
                    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
                .build(new CacheLoader<Long, ConcurrentSkipListSet<Long>>() {
                    @Override
                    public ConcurrentSkipListSet<Long> load(Long key) throws Exception {
                        return new ConcurrentSkipListSet<Long>();
                    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLOutputStream.java`
#### Snippet
```java

    @Override
    public void write(byte[] b) throws IOException {
        write(Unpooled.wrappedBuffer(b));
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLOutputStream.java`
#### Snippet
```java

    @Override
    public void write(byte[] b, int off, int len) throws IOException {
        write(Unpooled.wrappedBuffer(b, off, len));
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, final int off, final int len) throws IOException {
        int remaining = len;
        int numBytesRead = 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLOutputStream.java`
#### Snippet
```java

    @Override
    public void write(byte[] b) throws IOException {
        write(Unpooled.wrappedBuffer(b));
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLOutputStream.java`
#### Snippet
```java

    @Override
    public void write(byte[] b, int off, int len) throws IOException {
        write(Unpooled.wrappedBuffer(b, off, len));
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableFuture<?> submit(Runnable task) {
        this.checkQueue(1);
        return super.submit(task);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
    @Override
    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                         long timeout, TimeUnit unit) throws InterruptedException {
        this.checkQueue(tasks.size());
        return super.invokeAll(tasks, timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                            long initialDelay, long period, TimeUnit unit) {
        this.checkQueue(1);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
    @Override
    public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                            long initialDelay, long period, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.scheduleAtFixedRate(command, initialDelay, period, unit);
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    protected ListeningExecutorService delegate() {
        return this.thread;
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks, long timeout,
                           TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {
        this.checkQueue(tasks.size());
        return super.invokeAny(tasks, timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(command, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(command, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(callable, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(callable, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public void execute(Runnable command) {
        this.checkQueue(1);
        super.execute(command);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public <T> ListenableFuture<T> submit(Runnable task, T result) {
        this.checkQueue(1);
        return super.submit(task, result);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                               long initialDelay, long delay, TimeUnit unit) {
        this.checkQueue(1);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
    @Override
    public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                               long initialDelay, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.scheduleAtFixedRate(command, initialDelay, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public <T> ListenableFuture<T> submit(Callable<T> task) {
        this.checkQueue(1);
        return super.submit(task);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks, long timeout, TimeUnit unit)
            throws InterruptedException {
        checkQueue(tasks.size());
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    protected ExecutorService delegate() {
        return this.thread;
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    public <T> Future<T> submit(Callable<T> task) {
        checkQueue(1);
        return super.submit(task);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks, long timeout, TimeUnit unit)
            throws InterruptedException, ExecutionException, TimeoutException {
        checkQueue(tasks.size());
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    public Future<?> submit(Runnable task) {
        checkQueue(1);
        return super.submit(task);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    public void execute(Runnable command) {
        checkQueue(1);
        super.execute(command);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedExecutorService.java`
#### Snippet
```java

    @Override
    public <T> Future<T> submit(Runnable task, T result) {
        checkQueue(1);
        return super.submit(task, result);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public Future<?> submit(Runnable task) {
        return super.submit(new SafeRunnable(task));
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                  long initialDelay, long period, TimeUnit unit) {
        return super.scheduleAtFixedRate(new SafeRunnable(command), initialDelay, period, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java
    @Override
    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                  long initialDelay, long period, TimeUnit unit) {
        return super.scheduleAtFixedRate(new SafeRunnable(command), initialDelay, period, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        return super.schedule(new SafeRunnable(command), delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        return super.schedule(new SafeRunnable(command), delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                     long initialDelay, long delay, TimeUnit unit) {
        return super.scheduleWithFixedDelay(new SafeRunnable(command), initialDelay, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadSafeScheduledExecutorService.java`
#### Snippet
```java
    @Override
    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                     long initialDelay, long delay, TimeUnit unit) {
        return super.scheduleWithFixedDelay(new SafeRunnable(command), initialDelay, delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadExecutor.java`
#### Snippet
```java

    @Override
    public void execute(Runnable r) {
        if (state != State.Running) {
            throw new RejectedExecutionException("Executor is shutting down");
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
                return delegate.schedule(timedCallable(callable), delay, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
                return delegate.schedule(timedCallable(callable), delay, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public void execute(Runnable command) {
                super.execute(timedRunnable(command));
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                                 long timeout, TimeUnit unit) throws InterruptedException {
                return super.invokeAll(timedCallables(tasks), timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            @Override
            public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                                 long timeout, TimeUnit unit) throws InterruptedException {
                return super.invokeAll(timedCallables(tasks), timeout, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    @Override
    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                  long initialDelay, long period, TimeUnit unit) {
        return chooseThread().scheduleAtFixedRate(command, initialDelay, period, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    @Override
    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                  long initialDelay, long period, TimeUnit unit) {
        return chooseThread().scheduleAtFixedRate(command, initialDelay, period, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    @Override
    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        return chooseThread().schedule(command, delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    @Override
    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        return chooseThread().schedule(command, delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <T> ListenableFuture<T> submit(Callable<T> task) {
                return super.submit(timedCallable(task));
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <T> T invokeAny(Collection<? extends Callable<T>> tasks)
                    throws InterruptedException, ExecutionException {
                return super.invokeAny(timedCallables(tasks));
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    @Override
    public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        return chooseThread().schedule(callable, delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    @Override
    public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        return chooseThread().schedule(callable, delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <T> T invokeAny(Collection<? extends Callable<T>> tasks, long timeout,
                                   TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {

```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            @Override
            public <T> T invokeAny(Collection<? extends Callable<T>> tasks, long timeout,
                                   TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {

                return super.invokeAny(timedCallables(tasks), timeout, unit);
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

        @Override
            protected ListeningExecutorService delegate() {
                return delegate;
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <T> ListenableFuture<T> submit(Runnable task, T result) {
                return super.submit(timedRunnable(task), result);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                                       long initialDelay, long delay, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            @Override
            public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                                       long initialDelay, long delay, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, delay, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableFuture<?> submit(Runnable task) {
                return super.submit(timedRunnable(task));
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    @Override
    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                     long initialDelay, long delay, TimeUnit unit) {
        return chooseThread().scheduleWithFixedDelay(command, initialDelay, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    @Override
    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                     long initialDelay, long delay, TimeUnit unit) {
        return chooseThread().scheduleWithFixedDelay(command, initialDelay, delay, unit);
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                                    long initialDelay, long period, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, period, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            @Override
            public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                                    long initialDelay, long period, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, period, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks) throws InterruptedException {
                return super.invokeAll(timedCallables(tasks));
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
                return delegate.schedule(timedRunnable(command), delay, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
                return delegate.schedule(timedRunnable(command), delay, unit);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public boolean awaitTermination(long timeout, TimeUnit unit) throws InterruptedException {
        boolean ret = true;
        for (int i = 0; i < threads.length; i++) {
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> Future<T> submit(Runnable task, T result) {
        return chooseThread().submit(task, result);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks)
        throws InterruptedException, ExecutionException {
        return chooseThread().invokeAny(tasks);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                                 long timeout, TimeUnit unit)
                    throws InterruptedException {
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
            @Override
            public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                                 long timeout, TimeUnit unit)
                    throws InterruptedException {
                return super.invokeAll(timedCallables(tasks), timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public void execute(Runnable command) {
                super.execute(timedRunnable(command));
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public <T> Future<T> submit(Callable<T> task) {
                return super.submit(timedCallable(task));
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks, long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException {
        return chooseThread().invokeAny(tasks, timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> T invokeAny(Collection<? extends Callable<T>> tasks, long timeout, TimeUnit unit)
        throws InterruptedException, ExecutionException, TimeoutException {
        return chooseThread().invokeAny(tasks, timeout, unit);
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
        return new ForwardingExecutorService() {
            @Override
            protected ExecutorService delegate() {
                return executor;
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> Future<T> submit(Callable<T> task) {
        return chooseThread().submit(task);
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public <T> Future<T> submit(Runnable task, T result) {
                return super.submit(timedRunnable(task), result);
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public <T> T invokeAny(Collection<? extends Callable<T>> tasks)
                    throws InterruptedException, ExecutionException {
                return super.invokeAny(timedCallables(tasks));
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                         long timeout,
                                         TimeUnit unit)
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks,
                                         long timeout,
                                         TimeUnit unit)
        throws InterruptedException {
        return chooseThread().invokeAll(tasks, timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks)
        throws InterruptedException {
        return chooseThread().invokeAll(tasks);
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public Future<?> submit(Runnable task) {
                return super.submit(timedRunnable(task));
            }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public <T> List<Future<T>> invokeAll(Collection<? extends Callable<T>> tasks)
                    throws InterruptedException {
                return super.invokeAll(timedCallables(tasks));
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public Future<?> submit(Runnable task) {
        return chooseThread().submit(task);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     */
    @Override
    public void execute(Runnable command) {
        chooseThread().execute(command);
    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java

            @Override
            public <T> T invokeAny(Collection<? extends Callable<T>> tasks,
                                   long timeout, TimeUnit unit)
                    throws InterruptedException, ExecutionException, TimeoutException {
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
            @Override
            public <T> T invokeAny(Collection<? extends Callable<T>> tasks,
                                   long timeout, TimeUnit unit)
                    throws InterruptedException, ExecutionException, TimeoutException {
                return super.invokeAny(timedCallables(tasks), timeout, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BlockingMpscQueue.java`
#### Snippet
```java

    @Override
    public void put(T e) throws InterruptedException {
        while (!this.relaxedOffer(e)) {
            // Do busy-spin loop
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

    @Override
    public int drainTo(Collection<? super T> c) {
        return drainTo(c, Integer.MAX_VALUE);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

    @Override
    public int drainTo(Collection<? super T> c, int maxElements) {
        long stamp = headLock.readLock();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

    @Override
    public void put(T e) {
        long stamp = tailLock.writeLock();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

    @Override
    public boolean offer(T e) {
        // Queue is unbounded and it will never reject new items
        put(e);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

    @Override
    public boolean offer(T e, long timeout, TimeUnit unit) {
        // Queue is unbounded and it will never reject new items
        put(e);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

    @Override
    public boolean add(T e) {
        put(e);
        return true;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedArrayBlockingQueue.java`
#### Snippet
```java

    @Override
    public int drainTo(Collection<? super T> c, int maxElements) {
        lock.lock();
        try {
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedArrayBlockingQueue.java`
#### Snippet
```java

    @Override
    public int drainTo(Collection<? super T> c) {
        return drainTo(c, capacity);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedArrayBlockingQueue.java`
#### Snippet
```java

    @Override
    public void put(T e) throws InterruptedException {
        lock.lockInterruptibly();

```

### NullableProblems
Non-annotated parameter 'e' in method 'add' from 'AbstractQueue' should not override non-null parameter from 'BlockingQueue'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedArrayBlockingQueue.java`
#### Snippet
```java
public class BatchedArrayBlockingQueue<T>
        extends AbstractQueue<T>
        implements BlockingQueue<T>, BatchedBlockingQueue<T> {

    private final ReentrantLock lock = new ReentrantLock();
```

### NullableProblems
Non-annotated parameter 'e' in method 'add' from 'AbstractQueue' should not override non-null parameter from 'BlockingQueue'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedArrayBlockingQueue.java`
#### Snippet
```java
public class BatchedArrayBlockingQueue<T>
        extends AbstractQueue<T>
        implements BlockingQueue<T>, BatchedBlockingQueue<T> {

    private final ReentrantLock lock = new ReentrantLock();
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedArrayBlockingQueue.java`
#### Snippet
```java

    @Override
    public boolean offer(T e) {
        lock.lock();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/AppendOnlyStreamReader.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int read = 0;
        if (currentLogRecord == null) {
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
                }
                @Override
                public void onFailure(Throwable cause) {
                    LOG.error("addComplete processing failed for {} entry {} lastTxId {} rc {} with error",
                        fullyQualifiedLogSegment, entryId,
```

## RuleId[id=JavadocLinkAsPlainText]
### JavadocLinkAsPlainText
Link specified as plain text
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/MurmurHash.java`
#### Snippet
```java
/**
 * This is a very fast, non-cryptographic hash suitable for general hash-based
 * lookup. See http://murmurhash.googlepages.com/ for more details.
 *
 * <p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
 *
 * Murmur3 32 and 128 bit variants.
 * 32-bit Java port of https://code.google.com/p/smhasher/source/browse/trunk/MurmurHash3.cpp#94
 * 128-bit Java port of https://code.google.com/p/smhasher/source/browse/trunk/MurmurHash3.cpp#255
 *
```

### JavadocLinkAsPlainText
Link specified as plain text
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
 * Murmur3 32 and 128 bit variants.
 * 32-bit Java port of https://code.google.com/p/smhasher/source/browse/trunk/MurmurHash3.cpp#94
 * 128-bit Java port of https://code.google.com/p/smhasher/source/browse/trunk/MurmurHash3.cpp#255
 *
 * This is a public domain code with no copyrights.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
 *
 * This is a public domain code with no copyrights.
 * From homepage of MurmurHash (https://code.google.com/p/smhasher/),
 * "All MurmurHash versions are public domain software, and the author disclaims all copyright
 * to their code."
```

### JavadocLinkAsPlainText
Link specified as plain text
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/DLNamespaceProviderService.java`
#### Snippet
```java
 * A service to provide distributedlog namespace.
 *
 * <p>TODO: eliminate the direct usage of zookeeper here {@link https://github.com/apache/bookkeeper/issues/1331}
 */
@Slf4j
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
     * The benchmark is assuming zookeeper based metadata service.
     *
     * <p>TODO: update benchmark to use metadata service uri {@link https://github.com/apache/bookkeeper/issues/1331}
     */
    private static long warmUp(byte[] data, int ledgers, int ensemble, int qSize,
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/NettyChannelUtil.java`
#### Snippet
```java
     * Lastly, it reduces pollution of useless {@link io.netty.channel.ChannelPromise} objects created
     * by the default write and flush method {@link ChannelOutboundInvoker#writeAndFlush(Object)}.
     * See https://stackoverflow.com/q/54169262 and https://stackoverflow.com/a/9030420 for more details.
     *
     * @param ctx channel's context
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/NettyChannelUtil.java`
#### Snippet
```java
     * Lastly, it reduces pollution of useless {@link io.netty.channel.ChannelPromise} objects created
     * by the default write and flush method {@link ChannelOutboundInvoker#writeAndFlush(Object)}.
     * See https://stackoverflow.com/q/54169262 and https://stackoverflow.com/a/9030420 for more details.
     *
     * @param ctx channel's context
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java`
#### Snippet
```java
 * Class to start/stop the AutoRecovery daemons Auditor and ReplicationWorker.
 *
 * <p>TODO: eliminate the direct usage of zookeeper here {@link https://github.com/apache/bookkeeper/issues/1332}
 */
public class AutoRecoveryMain {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
 * failed bookie as underreplicated znode in zk.
 *
 * <p>TODO: eliminate the direct usage of zookeeper here {@link https://github.com/apache/bookkeeper/issues/1332}
 */
public class Auditor implements AutoCloseable {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java

/**
 * A key/value store implemented using {@link http://rocksdb.org/}.
 *
 * @param <K> key type
```

### JavadocLinkAsPlainText
Link specified as plain text
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java
    /**
     * Returns jni library extension based on OS specification. Maven-nar generates jni library based on different OS :
     * http://mark.donszelmann.org/maven-nar-plugin/aol.html (jni.extension)
     *
     * @return
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/MathUtils.java`
#### Snippet
```java
     *
     * <p>NOTE: only use it for measuring.
     * http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29
     *
     * @return current time in nanoseconds.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
     * Create a stream of exponential backoffs with jitters.
     *
     * <p>This is "full jitter" via http://www.awsarchitectureblog.com/2015/03/backoff.html
     *
     * @param startMs initial backoff in milliseconds.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
     * between {@code startMs} and 3 times the previously selected value, capped at {@code maxMs}.
     *
     * <p>this is "decorrelated jitter" via http://www.awsarchitectureblog.com/2015/03/backoff.html
     *
     * @param startMs initial backoff in milliseconds
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
     * A Jittered backoff policy.
     *
     * <p>It is an implementation of {@link http://www.awsarchitectureblog.com/2015/03/backoff.html}
     */
    @Data(staticConstructor = "of")
```

### JavadocLinkAsPlainText
Link specified as plain text
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
     * between 0 and that amount.
     *
     * <p>this is "equal jitter" via http://www.awsarchitectureblog.com/2015/03/backoff.html
     *
     * @param startMs initial backoff in milliseconds.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManagerBenchmark.java`
#### Snippet
```java
 * Microbenchmarks for different digest type
 * getting started:
 * 1. http://tutorials.jenkov.com/java-performance/jmh.html
 * 2. http://hg.openjdk.java.net/code-tools/jmh/file/tip/jmh-samples/src/main/java/org/openjdk/jmh/samples/
 * 3. google
```

### JavadocLinkAsPlainText
Link specified as plain text
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManagerBenchmark.java`
#### Snippet
```java
 * getting started:
 * 1. http://tutorials.jenkov.com/java-performance/jmh.html
 * 2. http://hg.openjdk.java.net/code-tools/jmh/file/tip/jmh-samples/src/main/java/org/openjdk/jmh/samples/
 * 3. google
 * To run:
```

### JavadocLinkAsPlainText
Link specified as plain text
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/checksum/DigestTypeBenchmark.java`
#### Snippet
```java
 * Microbenchmarks for different digest type
 * getting started:
 * 1. http://tutorials.jenkov.com/java-performance/jmh.html
 * 2. http://hg.openjdk.java.net/code-tools/jmh/file/tip/jmh-samples/src/main/java/org/openjdk/jmh/samples/
 * 3. google
```

### JavadocLinkAsPlainText
Link specified as plain text
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/checksum/DigestTypeBenchmark.java`
#### Snippet
```java
 * getting started:
 * 1. http://tutorials.jenkov.com/java-performance/jmh.html
 * 2. http://hg.openjdk.java.net/code-tools/jmh/file/tip/jmh-samples/src/main/java/org/openjdk/jmh/samples/
 * 3. google
 * To run:
```

## RuleId[id=NegativeIntConstantInLongContext]
### NegativeIntConstantInLongContext
Negative int hexadecimal constant in long context
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLocation.java`
#### Snippet
```java
            .append("ledger=").append(ledger)
            .append(",entry=").append(entry)
            .append(",locationLog=").append(location >> 32 & 0xFFFFFFFF)
            .append(",locationOffset=").append((int) (location & 0xFFFFFFFF))
            .append("}").toString();
```

### NegativeIntConstantInLongContext
Negative int hexadecimal constant in long context
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLocation.java`
#### Snippet
```java
            .append(",entry=").append(entry)
            .append(",locationLog=").append(location >> 32 & 0xFFFFFFFF)
            .append(",locationOffset=").append((int) (location & 0xFFFFFFFF))
            .append("}").toString();
    }
```

### NegativeIntConstantInLongContext
Negative int hexadecimal constant in long context
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java
            throws IOException, NoEntryException {
        int logId = (int) (location >> 32);
        int pos = (int) (location & 0xFFFFFFFF);

        long start = System.nanoTime();
```

## RuleId[id=ExplicitArrayFilling]
### ExplicitArrayFilling
Can be replaced with single 'Arrays.fill()' method call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RoundRobinDistributionSchedule.java`
#### Snippet
```java

        private RRQuorumCoverageSet() {
            for (int i = 0; i < covered.length; i++) {
                covered[i] = BKException.Code.UNINITIALIZED;
            }
```

## RuleId[id=FieldCanBeLocal]
### FieldCanBeLocal
Field can be converted to a local variable
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/internal/LocationClientImpl.java`
#### Snippet
```java
public class LocationClientImpl implements LocationClient {

    private final StorageClientSettings settings;
    private final OrderedScheduler scheduler;
    private final ManagedChannel channel;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/internal/RootRangeClientImpl.java`
#### Snippet
```java
class RootRangeClientImpl implements RootRangeClient {

    private final ScheduledExecutorService executor;
    private final StorageContainerChannel scClient;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-slogger/api/src/main/java/org/apache/bookkeeper/slogger/ConsoleSlogger.java`
#### Snippet
```java
    private static final int MAX_STACKTRACE_ELEMENTS = 20;
    private static final int MAX_CAUSES = 10;
    private final Class<?> clazz;

    ConsoleSlogger() {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/CompareOpImpl.java`
#### Snippet
```java
class CompareOpImpl<K, V> implements CompareOp<K, V> {

    private final Handle<CompareOpImpl<K, V>> handle;

    private CompareTarget target;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/CompareOpImpl.java`
#### Snippet
```java
    private final Handle<CompareOpImpl<K, V>> handle;

    private CompareTarget target;
    private CompareResult result;
    private K key;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/CompareOpImpl.java`
#### Snippet
```java

    private CompareTarget target;
    private CompareResult result;
    private K key;
    private V value;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/CompareOpImpl.java`
#### Snippet
```java
    private K key;
    private V value;
    private long revision;

    CompareOpImpl(Handle<CompareOpImpl<K, V>> handle) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/RangeResultImpl.java`
#### Snippet
```java
    private List<KeyValue<K, V>> kvs = Collections.emptyList();
    private long count = 0L;
    private boolean more = false;

    RangeResultImpl(Handle<RangeResultImpl<K, V>> handle) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/RangeResultImpl.java`
#### Snippet
```java

    private List<KeyValue<K, V>> kvs = Collections.emptyList();
    private long count = 0L;
    private boolean more = false;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/DeleteResultImpl.java`
#### Snippet
```java

    private List<KeyValue<K, V>> prevKvs = Collections.emptyList();
    private long numDeleted = 0L;

    DeleteResultImpl(Handle<DeleteResultImpl<K, V>> handle) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/KeyValueImpl.java`
#### Snippet
```java
    private long version = -1L;
    private boolean isNumber = false;
    private long numberValue = -1L;

    KeyValueImpl(Handle<KeyValueImpl<K, V>> handle) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/KeyValueImpl.java`
#### Snippet
```java
    private long modifiedRevision = -1L;
    private long version = -1L;
    private boolean isNumber = false;
    private long numberValue = -1L;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/KeyValueImpl.java`
#### Snippet
```java
    private V value = null;
    private long createRevision = -1L;
    private long modifiedRevision = -1L;
    private long version = -1L;
    private boolean isNumber = false;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/KeyValueImpl.java`
#### Snippet
```java
    private K key = null;
    private V value = null;
    private long createRevision = -1L;
    private long modifiedRevision = -1L;
    private long version = -1L;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/KeyValueImpl.java`
#### Snippet
```java
    private long createRevision = -1L;
    private long modifiedRevision = -1L;
    private long version = -1L;
    private boolean isNumber = false;
    private long numberValue = -1L;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java
    private long minModRev = Long.MIN_VALUE;
    private long maxModRev = Long.MAX_VALUE;
    private long minCreateRev = Long.MIN_VALUE;
    private long maxCreateRev = Long.MAX_VALUE;
    private boolean keysOnly;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java

    private long limit = -1L;
    private long minModRev = Long.MIN_VALUE;
    private long maxModRev = Long.MAX_VALUE;
    private long minCreateRev = Long.MIN_VALUE;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java
    private final Recycler<RangeOptionImpl<K>> optionRecycler;

    private long limit = -1L;
    private long minModRev = Long.MIN_VALUE;
    private long maxModRev = Long.MAX_VALUE;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java
    private long minCreateRev = Long.MIN_VALUE;
    private long maxCreateRev = Long.MAX_VALUE;
    private boolean keysOnly;
    private boolean countOnly;
    private K endKey;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java
    private long maxCreateRev = Long.MAX_VALUE;
    private boolean keysOnly;
    private boolean countOnly;
    private K endKey;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java
    private long limit = -1L;
    private long minModRev = Long.MIN_VALUE;
    private long maxModRev = Long.MAX_VALUE;
    private long minCreateRev = Long.MIN_VALUE;
    private long maxCreateRev = Long.MAX_VALUE;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/RangeOptionBuilderImpl.java`
#### Snippet
```java
    private long maxModRev = Long.MAX_VALUE;
    private long minCreateRev = Long.MIN_VALUE;
    private long maxCreateRev = Long.MAX_VALUE;
    private boolean keysOnly;
    private boolean countOnly;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/DeleteOptionBuilderImpl.java`
#### Snippet
```java
    private final Recycler<DeleteOptionImpl<K>> optionRecycler;

    private boolean prevKv;
    private K endKey;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/IncrementOptionBuilderImpl.java`
#### Snippet
```java
    private final Recycler<IncrementOptionImpl<K>> optionRecycler;

    private boolean getTotal;

    IncrementOptionBuilderImpl(Handle<IncrementOptionBuilderImpl<K>> handle,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/options/PutOptionBuilderImpl.java`
#### Snippet
```java
    private final Recycler<PutOptionImpl<K>> optionRecycler;

    private boolean prevKv;

    PutOptionBuilderImpl(Handle<PutOptionBuilderImpl<K>> handle,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/CuratorProviderService.java`
#### Snippet
```java

    private final String zkServers;
    private final RetryPolicy curatorRetryPolicy;
    private final CuratorFramework curatorClient;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServer.java`
#### Snippet
```java
    }

    private final Endpoint myEndpoint;
    private final Server grpcServer;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    private LedgerManagerFactory lmFactory;
    private LedgerManager ledgerManager;
    private Supplier<BookieServiceInfo> bookieServiceInfoProvider;

    public BookieService(BookieConfiguration conf, StatsLogger statsLogger,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/io/etcd/jetcd/EtcdConnectionManager.java`
#### Snippet
```java
public class EtcdConnectionManager {

    private final ClientImpl client;
    private ClientConnectionManager connMgr;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLayoutManager.java`
#### Snippet
```java
    private final Client client;
    private final KV kvClient;
    private final String scope;
    private final ByteSequence layoutKey;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLayoutManager.java`
#### Snippet
```java
class EtcdLayoutManager implements LayoutManager {

    private final Client client;
    private final KV kvClient;
    private final String scope;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamCluster.java`
#### Snippet
```java
    private final List<Endpoint> rpcEndpoints;
    private ServiceURI metadataServiceUri;
    private int zkPort;
    private ZooKeeperServerShim zks;
    private List<LifecycleComponent> servers;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatcher.java`
#### Snippet
```java
    private final WatchOption watchOption;
    @Getter
    private final ByteSequence key;
    // watch listener
    private final CopyOnWriteArraySet<BiConsumer<WatchResponse, Throwable>> consumers;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatcher.java`
#### Snippet
```java
    private final ScheduledExecutorService executor;
    @Getter
    private final WatchOption watchOption;
    @Getter
    private final ByteSequence key;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/helpers/KeyStream.java`
#### Snippet
```java

    private final KV kvClient;
    private final ByteSequence startKey;
    private final ByteSequence endKey;
    private final Function<ByteSequence, T> encoder;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatchClient.java`
#### Snippet
```java
public class EtcdWatchClient implements AutoCloseable {

    private final EtcdConnectionManager connMgr;
    private final WatchGrpc.WatchStub stub;
    private volatile StreamObserver<WatchRequest> grpcWatchStreamObserver;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLClientProviderFactory.java`
#### Snippet
```java
    private Subject subject;
    private String principal;
    private boolean isKrbTicket;
    private boolean isUsingTicketCache;
    private String loginContextName;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslClientState.java`
#### Snippet
```java
    private final SaslClient saslClient;
    private final Subject clientSubject;
    private String username;
    private String password;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslClientState.java`
#### Snippet
```java
    private final Subject clientSubject;
    private String username;
    private String password;

    public SaslClientState(String serverHostname, Subject subject) throws SaslException {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory.java`
#### Snippet
```java
    private ServerConfiguration serverConfiguration;
    private Subject subject;
    private boolean isKrbTicket;
    private boolean isUsingTicketCache;
    private String principal;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
    private static String zooKeeperDefaultHost = "127.0.0.1";
    private static int zooKeeperDefaultPort = 2181;
    private static int zkSessionTimeOut = 5000;
    private static String defaultLocalBookiesConfigDir = "/tmp/localbookies-config";

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/RequestStats.java`
#### Snippet
```java
        parent = ADD_ENTRY_REQUEST
    )
    private final OpStatsLogger addEntryStats;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/RequestStats.java`
#### Snippet
```java
            parent = READ_ENTRY_REQUEST
    )
    private final Counter readEntryRejectedCounter;
    @StatsDoc(
        name = FORCE_LEDGER,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/RequestStats.java`
#### Snippet
```java
            parent = ADD_ENTRY_REQUEST
    )
    private final Counter addEntryRejectedCounter;
    @StatsDoc(
        name = READ_ENTRY_REQUEST,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/RequestStats.java`
#### Snippet
```java
            parent = ADD_ENTRY_REQUEST
    )
    private final OpStatsLogger writeThreadQueuedLatency;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/RequestStats.java`
#### Snippet
```java
        help = "request stats of AddEntry on a bookie"
    )
    private final OpStatsLogger addRequestStats;
    @StatsDoc(
        name = ADD_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestProcessor.java`
#### Snippet
```java
    final Consumer<Channel> onResponseTimeout;

    private final ByteBufAllocator allocator;

    private final boolean throttleReadResponses;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieServer.java`
#### Snippet
```java

    // Expose Stats
    private final StatsLogger statsLogger;

    // Exception handler
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClientImpl.java`
#### Snippet
```java

    private final OrderedExecutor executor;
    private final ScheduledExecutorService scheduler;
    private final ScheduledFuture<?> timeoutFuture;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
        new SynchronizedHashMultiMap<>();

    private final StatsLogger statsLogger;
    @StatsDoc(
        name = BookKeeperClientStats.CHANNEL_READ_OP,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
     */
    private final ConcurrentLongHashMap<BufferedLogChannelWithDirInfo> replicaOfCurrentLogChannels;
    private final CacheLoader<Long, EntryLogAndLockTuple> entryLogAndLockTupleCacheLoader;
    private final DefaultEntryLogger.RecentEntryLogsStatus recentlyCreatedEntryLogsStatus;
    private final int entrylogMapAccessExpiryTimeInSeconds;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java

    // Expose Stats
    private final StatsLogger statsLogger;
    final EntryLogsPerLedgerCounter entryLogsPerLedgerCounter;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
    private final ConcurrentMap<File, Float> diskUsages =
            new ConcurrentHashMap<File, Float>();
    private final long entryLogSize;
    private long minUsableSizeForEntryLogCreation;
    private long minUsableSizeForIndexFileCreation;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerEntryPage.java`
#### Snippet
```java

    private static final int indexEntrySize = 8;
    private final int pageSize;
    private final int entriesPerPage;
    private volatile EntryKey entryKey = new EntryKey(-1, BookieProtocol.INVALID_ENTRY_ID);
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultFileChannel.java`
#### Snippet
```java
    private final File file;
    private RandomAccessFile randomAccessFile;
    private final ServerConfiguration configuration;

    DefaultFileChannel(File file, ServerConfiguration serverConfiguration) throws IOException {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
        // should we group force writes
        private final boolean enableGroupForceWrites;
        private final Counter forceWriteThreadTime;

        public ForceWriteThread(Thread threadToNotifyOnEx,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java

    private final Counter callbackTime;
    private final Counter journalTime;
    private static final String journalThreadName = "BookieJournal";

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java

        // should we group force writes
        private final boolean enableGroupForceWrites;
        private final Counter forceWriteThreadTime;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java`
#### Snippet
```java
    private final IndexPersistenceMgr indexPersistenceManager;
    private final int pageSize;
    private final int entriesPerPage;

    public LedgerCacheImpl(ServerConfiguration conf, SnapshotMap<Long, Boolean> activeLedgers,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The number of journal flushes triggered when journal queue becomes empty"
    )
    private final Counter flushEmptyQueueCounter;
    @StatsDoc(
        name = JOURNAL_WRITE_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        happensAfter = JOURNAL_PROCESS_TIME_LATENCY
    )
    private final OpStatsLogger fwEnqueueTimeStats;
    @StatsDoc(
        name = JOURNAL_CREATION_LATENCY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        happensAfter = JOURNAL_CREATION_LATENCY
    )
    private final OpStatsLogger journalFlushStats;
    @StatsDoc(
        name = JOURNAL_PROCESS_TIME_LATENCY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The force write queue size"
    )
    private final Counter forceWriteQueueSize;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
            help = "The actual amount of memory in bytes currently used by the bookie journal"
    )
    private final Gauge<Long> journalMemoryUsedStats;

    public JournalStats(StatsLogger statsLogger, final long maxJournalMemoryBytes,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The journal queue size"
    )
    private final Counter journalQueueSize;
    @StatsDoc(
        name = JOURNAL_FORCE_WRITE_QUEUE_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        parent = JOURNAL_ADD_ENTRY
    )
    private final OpStatsLogger journalQueueStats;
    @StatsDoc(
        name = JOURNAL_FORCE_WRITE_GROUPING_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        parent = FORCE_LEDGER
    )
    private final OpStatsLogger journalForceLedgerStats;
    @StatsDoc(
        name = JOURNAL_SYNC,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The number of journal flushes triggered by MAX_OUTSTANDING_BYTES"
    )
    private final Counter flushMaxOutstandingBytesCounter;
    @StatsDoc(
        name = JOURNAL_NUM_FLUSH_EMPTY_QUEUE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
            help = "The max amount of memory in bytes that can be used by the bookie journal"
    )
    private final Gauge<Long> journalMemoryMaxStats;
    @StatsDoc(
            name = JOURNAL_MEMORY_USED,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The distribution of number of force write requests grouped in a force write"
    )
    private final OpStatsLogger forceWriteGroupingCountStats;
    @StatsDoc(
        name = JOURNAL_FORCE_WRITE_BATCH_ENTRIES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The distribution of number of bytes grouped together into a force write request"
    )
    private final OpStatsLogger forceWriteBatchBytesStats;
    @StatsDoc(
        name = JOURNAL_QUEUE_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        happensAfter = JOURNAL_QUEUE_LATENCY
    )
    private final OpStatsLogger journalProcessTimeStats;
    @StatsDoc(
        name = JOURNAL_QUEUE_LATENCY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        happensAfter = JOURNAL_FORCE_WRITE_ENQUEUE
    )
    private final OpStatsLogger journalSyncStats;
    @StatsDoc(
        name = JOURNAL_FORCE_WRITE_ENQUEUE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The distribution of number of entries grouped together into a force write request"
    )
    private final OpStatsLogger forceWriteBatchEntriesStats;
    @StatsDoc(
        name = JOURNAL_FORCE_WRITE_BATCH_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        parent = JOURNAL_PROCESS_TIME_LATENCY
    )
    private final OpStatsLogger journalCreationStats;
    @StatsDoc(
        name = JOURNAL_FLUSH_LATENCY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The number of journal flushes triggered by MAX_WAIT time"
    )
    private final Counter flushMaxWaitCounter;
    @StatsDoc(
        name = JOURNAL_NUM_FLUSH_MAX_OUTSTANDING_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        parent = ADD_ENTRY
    )
    private final OpStatsLogger journalAddEntryStats;
    @StatsDoc(
        name = JOURNAL_FORCE_LEDGER,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/JournalStats.java`
#### Snippet
```java
        help = "The number of bytes appended to the journal"
    )
    private final Counter journalWriteBytes;
    @StatsDoc(
            name = JOURNAL_MEMORY_MAX,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/EntryMemTableStats.java`
#### Snippet
```java
        help = "The distribution of request throttled duration"
    )
    private final OpStatsLogger throttlingStats;

    public EntryMemTableStats(StatsLogger statsLogger) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/EntryMemTableStats.java`
#### Snippet
```java
        help = "The number of requests throttled due to memtables are full"
    )
    private final Counter throttlingCounter;
    @StatsDoc(
        name = SKIP_LIST_THROTTLING_LATENCY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/EntryMemTableStats.java`
#### Snippet
```java
        help = "The number of bytes flushed from memtable to entry log files"
    )
    private final Counter flushBytesCounter;
    @StatsDoc(
        name = SKIP_LIST_THROTTLING,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/EntryMemTableStats.java`
#### Snippet
```java
        parent = BOOKIE_ADD_ENTRY
    )
    private final OpStatsLogger putEntryStats;
    @StatsDoc(
        name = SKIP_LIST_GET_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/EntryMemTableStats.java`
#### Snippet
```java
        help = "operation stats of taking memtable snapshots"
    )
    private final OpStatsLogger snapshotStats;
    @StatsDoc(
        name = SKIP_LIST_PUT_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/EntryMemTableStats.java`
#### Snippet
```java
        parent = BOOKIE_READ_ENTRY
    )
    private final OpStatsLogger getEntryStats;
    @StatsDoc(
        name = SKIP_LIST_FLUSH_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexInMemPageMgrStats.java`
#### Snippet
```java
        help = "The number of index pages detected as in illegal state when deleting"
    )
    private final Counter illegalStateDeleteCounter;

    public IndexInMemPageMgrStats(StatsLogger statsLogger) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexInMemPageMgrStats.java`
#### Snippet
```java
        help = "The number of index pages detected as in illegal state when resetting"
    )
    private final Counter illegalStateResetCounter;
    @StatsDoc(
        name = INDEX_INMEM_ILLEGAL_STATE_DELETE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Current number of active ledgers"
    )
    private final Gauge<Integer> activeLedgerCountGauge;

    public GarbageCollectorStats(StatsLogger statsLogger,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Operation stats of garbage collections"
    )
    private final OpStatsLogger gcThreadRuntime;
    @StatsDoc(
        name = ACTIVE_ENTRY_LOG_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Number of ledgers deleted by garbage collection"
    )
    private final Counter deletedLedgerCounter;
    @StatsDoc(
        name = THREAD_RUNTIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Number of disk space bytes reclaimed via compacting entry log files"
    )
    private final Counter reclaimedSpaceViaCompaction;
    @StatsDoc(
        name = DELETED_LEDGER_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Number of minor compactions"
    )
    private final Counter minorCompactionCounter;
    @StatsDoc(
        name = MAJOR_COMPACTION_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Current number of active entry log space bytes"
    )
    private final Gauge<Long> activeEntryLogSpaceBytesGauge;
    @StatsDoc(
        name = ACTIVE_LEDGER_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Number of major compactions"
    )
    private final Counter majorCompactionCounter;
    @StatsDoc(
        name = RECLAIMED_DELETION_SPACE_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Current number of active entry log files"
    )
    private final Gauge<Integer> activeEntryLogCountGauge;
    @StatsDoc(
        name = ACTIVE_ENTRY_LOG_SPACE_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/GarbageCollectorStats.java`
#### Snippet
```java
        help = "Number of disk space bytes reclaimed via deleting entry log files"
    )
    private final Counter reclaimedSpaceViaDeletes;
    @StatsDoc(
        name = RECLAIMED_COMPACTION_SPACE_BYTES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStateManager.java`
#### Snippet
```java
        help = "Bookie sanity (1: up, 0: down, -1: unknown)"
    )
    private final Gauge<Number> serverSanityGauge;

    public BookieStateManager(ServerConfiguration conf,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStateManager.java`
#### Snippet
```java
        help = "Bookie status (1: up, 0: readonly, -1: unregistered)"
    )
    private final Gauge<Number> serverStatusGauge;
    @StatsDoc(
        name = SERVER_SANITY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
        parent = READ_ENTRY
    )
    private final OpStatsLogger readEntryStats;
    @StatsDoc(
            name = BOOKIE_GET_LIST_OF_ENTRIES_OF_LEDGER,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    private final OpStatsLogger readBytesStats;
    @StatsDoc(name = JOURNAL_DIRS, help = "number of configured journal directories")
    private final Gauge<Integer> journalDirsGauge;
    @StatsDoc(name = JOURNAL_QUEUE_MAX_SIZE, help = "maximum length of a journal queue")
    private final Gauge<Integer> journalQueueMaxQueueSizeGauge;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
            parent = GET_LIST_OF_ENTRIES_OF_LEDGER
    )
    private final OpStatsLogger getListOfEntriesOfLedgerStats;
    // Bookie Operation Bytes Stats
    @StatsDoc(name = BOOKIE_ADD_ENTRY_BYTES, help = "bytes stats of AddEntry on a bookie")
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    private final Gauge<Integer> journalDirsGauge;
    @StatsDoc(name = JOURNAL_QUEUE_MAX_SIZE, help = "maximum length of a journal queue")
    private final Gauge<Integer> journalQueueMaxQueueSizeGauge;

    public BookieStats(StatsLogger statsLogger, int numJournalDirs, int maxJournalQueueSize) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
        parent = ADD_ENTRY
    )
    private final OpStatsLogger addEntryStats;
    @StatsDoc(name = BOOKIE_RECOVERY_ADD_ENTRY, help = "operation stats of RecoveryAddEntry on a bookie")
    private final OpStatsLogger recoveryAddEntryStats;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    // Bookie Operation Bytes Stats
    @StatsDoc(name = BOOKIE_ADD_ENTRY_BYTES, help = "bytes stats of AddEntry on a bookie")
    private final OpStatsLogger addBytesStats;
    @StatsDoc(name = BOOKIE_READ_ENTRY_BYTES, help = "bytes stats of ReadEntry on a bookie")
    private final OpStatsLogger readBytesStats;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    private final Counter writeBytes;
    @StatsDoc(name = READ_BYTES, help = "total bytes read from a bookie")
    private final Counter readBytes;
    @StatsDoc(name = BOOKIE_FORCE_LEDGER, help = "total force operations occurred on a bookie")
    private final Counter forceLedgerOps;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    final StatsLogger statsLogger;
    @StatsDoc(name = WRITE_BYTES, help = "total bytes written to a bookie")
    private final Counter writeBytes;
    @StatsDoc(name = READ_BYTES, help = "total bytes read from a bookie")
    private final Counter readBytes;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    private final OpStatsLogger addBytesStats;
    @StatsDoc(name = BOOKIE_READ_ENTRY_BYTES, help = "bytes stats of ReadEntry on a bookie")
    private final OpStatsLogger readBytesStats;
    @StatsDoc(name = JOURNAL_DIRS, help = "number of configured journal directories")
    private final Gauge<Integer> journalDirsGauge;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    private final OpStatsLogger addEntryStats;
    @StatsDoc(name = BOOKIE_RECOVERY_ADD_ENTRY, help = "operation stats of RecoveryAddEntry on a bookie")
    private final OpStatsLogger recoveryAddEntryStats;
    @StatsDoc(
        name = BOOKIE_READ_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/BookieStats.java`
#### Snippet
```java
    private final Counter readBytes;
    @StatsDoc(name = BOOKIE_FORCE_LEDGER, help = "total force operations occurred on a bookie")
    private final Counter forceLedgerOps;
    // Bookie Operation Latency Stats
    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexPersistenceMgrStats.java`
#### Snippet
```java
        help = "Current read file info cache size"
    )
    private final Gauge<Number> readFileInfoCacheSizeGauge;

    public IndexPersistenceMgrStats(StatsLogger statsLogger,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexPersistenceMgrStats.java`
#### Snippet
```java
        help = "Current write file info cache size"
    )
    private final Gauge<Number> writeFileInfoCacheSizeGauge;
    @StatsDoc(
        name = READ_FILE_INFO_CACHE_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexPersistenceMgrStats.java`
#### Snippet
```java
        help = "Number of ledgers evicted from ledger caches"
    )
    private final Counter evictedLedgersCounter;
    @StatsDoc(
        name = PENDING_GET_FILE_INFO,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexPersistenceMgrStats.java`
#### Snippet
```java
        help = "Number of pending get-file-info requests"
    )
    private final Counter pendingGetFileInfoCounter;
    @StatsDoc(
        name = WRITE_FILE_INFO_CACHE_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java

    private final LedgerDirsManager ledgerDirsManager;
    private final boolean entryLogPerLedgerEnabled;

    final RecentEntryLogsStatus recentlyCreatedEntryLogsStatus;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/EntryLocationIndexStats.java`
#### Snippet
```java
            help = "operation stats of looking up entry location"
    )
    private final OpStatsLogger lookupEntryLocationStats;

    EntryLocationIndexStats(StatsLogger statsLogger,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/EntryLocationIndexStats.java`
#### Snippet
```java
        help = "Current number of entries"
    )
    private final Gauge<Long> entriesCountGauge;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "Current number of entries in read cache"
    )
    private final Gauge<Long> readCacheCountGauge;

    DbLedgerStorageStats(StatsLogger stats,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            help = "operation stats of flushing to the ledger index"
    )
    private final OpStatsLogger flushLedgerIndexStats;
    @StatsDoc(
        name = FLUSH_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "Current number of bytes in write cache"
    )
    private final Gauge<Long> writeCacheSizeGauge;
    @StatsDoc(
        name = WRITE_CACHE_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        parent = BOOKIE_READ_ENTRY
    )
    private final OpStatsLogger readEntryStats;
    @StatsDoc(
            name = READ_ENTRY_LOCATIONS_INDEX_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "Current number of entries in write cache"
    )
    private final Gauge<Long> writeCacheCountGauge;
    @StatsDoc(
        name = READ_CACHE_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            parent = READ_ENTRY
    )
    private final Counter readFromLocationIndexTime;
    @StatsDoc(
            name = READ_ENTRYLOG_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "The number of requests rejected due to write cache is full"
    )
    private final Counter rejectedWriteRequests;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            help = "The stats of throttled write due to write cache is full"
    )
    private final OpStatsLogger throttledWriteStats;
    @StatsDoc(
        name = REJECTED_WRITE_REQUESTS,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "operation stats of flushing write cache to entry log files"
    )
    private final OpStatsLogger flushStats;
    @StatsDoc(
            name = FLUSH_ENTRYLOG,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            parent = READ_ENTRY
    )
    private final Counter writeCacheMissCounter;
    @StatsDoc(
        name = READ_CACHE_HITS,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        parent = BOOKIE_ADD_ENTRY
    )
    private final OpStatsLogger addEntryStats;
    @StatsDoc(
        name = READ_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "the distribution of number of bytes flushed from write cache to entry log files"
    )
    private final OpStatsLogger flushSizeStats;
    @StatsDoc(
        name = THROTTLED_WRITE_REQUESTS,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "Current number of bytes in read cache"
    )
    private final Gauge<Long> readCacheSizeGauge;
    @StatsDoc(
        name = READ_CACHE_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            help = "operation stats of flushing to the locations index"
    )
    private final OpStatsLogger flushLocationIndexStats;
    @StatsDoc(
            name = FLUSH_LOCATIONS_INDEX,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "the distribution of num of entries to read in one readahead batch"
    )
    private final OpStatsLogger readAheadBatchCountStats;
    @StatsDoc(
        name = READAHEAD_BATCH_SIZE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            parent = READ_ENTRY
    )
    private final Counter writeCacheHitCounter;
    @StatsDoc(
            name = WRITE_CACHE_MISSES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            help = "operation stats of flushing to the current entry log file"
    )
    private final OpStatsLogger flushEntryLogStats;
    @StatsDoc(
            name = FLUSH_LOCATIONS_INDEX,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        parent = READ_ENTRY
    )
    private final Counter readCacheHitCounter;
    @StatsDoc(
        name = READ_CACHE_MISSES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "the distribution of num of bytes to read in one readahead batch"
    )
    private final OpStatsLogger readAheadBatchSizeStats;
    @StatsDoc(
            name = READAHEAD_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        help = "The number of requests throttled due to write cache is full"
    )
    private final Counter throttledWriteRequests;
    @StatsDoc(
            name = THROTTLED_WRITE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
        parent = READ_ENTRY
    )
    private final Counter readCacheMissCounter;
    @StatsDoc(
        name = READAHEAD_BATCH_COUNT,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            help = "Time spent on readahead operations"
    )
    private final Counter readAheadTime;
    @StatsDoc(
        name = FLUSH,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java
            parent = READ_ENTRY
    )
    private final Counter readFromEntryLogTime;
    @StatsDoc(
            name = WRITE_CACHE_HITS,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex.java`
#### Snippet
```java

    private final KeyValueStorage ledgersDb;
    private final LedgerMetadataIndexStats stats;

    // Holds ledger modifications applied in memory map, and pending to be flushed on db
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/TransientLedgerInfo.java`
#### Snippet
```java
    private boolean isClosed;

    private final long ledgerId;
    // reference to LedgerMetadataIndex
    private final LedgerMetadataIndex ledgerIndex;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/TransientLedgerInfo.java`
#### Snippet
```java
    private final long ledgerId;
    // reference to LedgerMetadataIndex
    private final LedgerMetadataIndex ledgerIndex;

    private long lastAccessed;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndexStats.java`
#### Snippet
```java
        help = "Current number of ledgers"
    )
    private final Gauge<Long> ledgersCountGauge;

    LedgerMetadataIndexStats(StatsLogger statsLogger,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
            help = "the configured readahead batch size"
    )
    private Gauge<Integer> readaheadBatchSizeGauge;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
            help = "the configured write cache size"
    )
    private Gauge<Long> writeCacheSizeGauge;

    @Override
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java
    private Checkpoint lastCheckpoint = Checkpoint.MIN;

    private final long writeCacheMaxSize;
    private final long readCacheMaxSize;
    private final int readAheadCacheBatchSize;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java

    private final long writeCacheMaxSize;
    private final long readCacheMaxSize;
    private final int readAheadCacheBatchSize;
    private final long readAheadCacheBatchBytesSize;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DefaultEnsemblePlacementPolicy.java`
#### Snippet
```java

    private boolean isWeighted;
    private int maxWeightMultiple;
    private Set<BookieId> knownBookies = new HashSet<BookieId>();
    private Map<BookieId, WeightedObject> bookieInfoMap;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataImpl.java`
#### Snippet
```java

    private final NavigableMap<Long, ImmutableList<BookieId>> ensembles;
    private final ImmutableList<BookieId> currentEnsemble;

    private final boolean hasPassword;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/datainteg/EntryCopierImpl.java`
#### Snippet
```java
    private final BookieClient bookieClient;
    private final LedgerStorage storage;
    private final Ticker ticker;
    private final SinBin sinBin;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
    // BookKeeper instance
    private BookKeeper bkc;
    private StatsLogger statsLogger;
    @StatsDoc(
        name = NUM_ENTRIES_READ,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
    };

    private final ClientConfiguration conf;
    private final RegistrationClient registrationClient;
    private final EnsemblePlacementPolicy placementPolicy;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/MetricsService.java`
#### Snippet
```java
public class MetricsService implements HttpEndpointService {

    private final ServerConfiguration conf;
    private final StatsProvider statsProvider;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/GetLedgerMetaService.java`
#### Snippet
```java
    protected ServerConfiguration conf;
    private final LedgerManagerFactory ledgerManagerFactory;
    private final LedgerMetadataSerDe serDe;

    public GetLedgerMetaService(ServerConfiguration conf, LedgerManagerFactory ledgerManagerFactory) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the latency distribution of auditing all the bookies"
    )
    private final OpStatsLogger auditBookiesTime;
    @StatsDoc(
            name = NUM_LEDGERS_CHECKED,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "Gauge for number of underreplicated ledgers elapsed recovery grace period"
    )
    private final Gauge<Integer> numUnderreplicatedLedgersElapsedRecoveryGracePeriod;
    @StatsDoc(
            name = NUM_LEDGERS_HAVING_NO_REPLICA_OF_AN_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the times of auditor check task skipped"
    )
    private final Counter numSkippingCheckTaskTimes;

    public AuditorStats(StatsLogger statsLogger) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the distribution of number of bookies per ledger"
    )
    private final OpStatsLogger numBookiesPerLedger;
    @StatsDoc(
            name = NUM_BOOKIE_AUDITS_DELAYED,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the distribution of number of fragments per ledger"
    )
    private final OpStatsLogger numFragmentsPerLedger;
    @StatsDoc(
            name = NUM_BOOKIES_PER_LEDGER,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "Gauge for number of ledgers softly adhering to placement policy found in placement policy check"
    )
    private final Gauge<Integer> numLedgersSoftlyAdheringToPlacementPolicy;
    @StatsDoc(
            name = NUM_UNDERREPLICATED_LEDGERS_ELAPSED_RECOVERY_GRACE_PERIOD,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the distribution of under_replicated ledgers total size on each auditor run"
    )
    private final OpStatsLogger underReplicatedLedgerTotalSize;
    @StatsDoc(
            name = URL_PUBLISH_TIME_FOR_LOST_BOOKIE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "Gauge for num of underreplicated ledgers"
    )
    private final Gauge<Integer> numUnderReplicatedLedgers;
    @StatsDoc(
            name = NUM_SKIPPING_CHECK_TASK_TIMES,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the latency distribution of replicas check"
    )
    private final OpStatsLogger replicasCheckTime;
    @StatsDoc(
            name = AUDIT_BOOKIES_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the number of bookie-audits delayed"
    )
    private final Counter numBookieAuditsDelayed;
    @StatsDoc(
            name = NUM_DELAYED_BOOKIE_AUDITS_DELAYES_CANCELLED,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the number of ledgers checked by the auditor"
    )
    private final Counter numLedgersChecked;
    @StatsDoc(
            name = NUM_FRAGMENTS_PER_LEDGER,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the latency distribution of checking all ledgers"
    )
    private final OpStatsLogger checkAllLedgersTime;
    @StatsDoc(
            name = PLACEMENT_POLICY_CHECK_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the number of replicated ledgers"
    )
    private final Counter numReplicatedLedgers;
    @StatsDoc(
            name = NUM_LEDGERS_NOT_ADHERING_TO_PLACEMENT_POLICY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
                    + ", this doesn't include ledgers counted towards numLedgersHavingLessThanAQReplicasOfAnEntry"
    )
    private final Gauge<Integer> numLedgersHavingLessThanWQReplicasOfAnEntry;
    @StatsDoc(
            name = NUM_UNDER_REPLICATED_LEDGERS_GUAGE,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the latency distribution of placementPolicy check"
    )
    private final OpStatsLogger placementPolicyCheckTime;
    @StatsDoc(
            name = REPLICAS_CHECK_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the latency distribution of publishing under replicated ledgers for lost bookies"
    )
    private final OpStatsLogger uRLPublishTimeForLostBookies;
    @StatsDoc(
            name = BOOKIE_TO_LEDGERS_MAP_CREATION_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
    private final AtomicInteger numLedgersHavingLessThanWQReplicasOfAnEntryGuageValue;
    private final AtomicInteger underReplicatedLedgersGuageValue;
    private final StatsLogger statsLogger;
    @StatsDoc(
            name = NUM_UNDER_REPLICATED_LEDGERS,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the latency distribution of creating bookies-to-ledgers map"
    )
    private final OpStatsLogger bookieToLedgersMapCreationTime;
    @StatsDoc(
            name = CHECK_ALL_LEDGERS_TIME,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "Gauge for number of ledgers having an entry with all the replicas missing"
    )
    private final Gauge<Integer> numLedgersHavingNoReplicaOfAnEntry;
    @StatsDoc(
            name = NUM_LEDGERS_HAVING_LESS_THAN_AQ_REPLICAS_OF_AN_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the distribution of num under_replicated ledgers on each auditor run"
    )
    private final OpStatsLogger numUnderReplicatedLedger;

    @StatsDoc(
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "Gauge for number of ledgers not adhering to placement policy found in placement policy check"
    )
    private final Gauge<Integer> numLedgersNotAdheringToPlacementPolicy;
    @StatsDoc(
            name = NUM_LEDGERS_SOFTLY_ADHERING_TO_PLACEMENT_POLICY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
                    + ", this doesn't include ledgers counted towards numLedgersHavingNoReplicaOfAnEntry"
    )
    private final Gauge<Integer> numLedgersHavingLessThanAQReplicasOfAnEntry;
    @StatsDoc(
            name = NUM_LEDGERS_HAVING_LESS_THAN_WQ_REPLICAS_OF_AN_ENTRY,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorStats.java`
#### Snippet
```java
            help = "the number of delayed-bookie-audits cancelled"
    )
    private final Counter numDelayedBookieAuditsCancelled;
    @StatsDoc(
            name = NUM_REPLICATED_LEDGERS,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java

    // Expose Stats
    private final StatsLogger statsLogger;
    @StatsDoc(
        name = REPLICATE_EXCEPTION,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/op/proto/ProtoPutOpImpl.java`
#### Snippet
```java
    private byte[] key;
    private byte[] value;
    private long revision;

    @Override
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/op/proto/ProtoTxnOpImpl.java`
#### Snippet
```java

    private final Handle<ProtoTxnOpImpl> recyclerHandle;
    private TxnRequest request;
    private RecyclableArrayList<CompareOp<byte[], byte[]>> compareOps;
    private RecyclableArrayList<Op<byte[], byte[]>> successOps;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java

    // checkpointer store
    private CheckpointStore checkpointStore;
    private ScheduledExecutorService checkpointScheduler;
    // rocksdb checkpointer
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksdbRestoreTask.java`
#### Snippet
```java
public class RocksdbRestoreTask {

    private final String dbName;
    private final File checkpointDir;
    private final CheckpointStore checkpointStore;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResources.java`
#### Snippet
```java

    private final Resource<OrderedScheduler> scheduler;
    private final Resource<OrderedScheduler> ioWriteScheduler;
    private final Resource<OrderedScheduler> ioReadScheduler;
    private final Resource<OrderedScheduler> checkpointScheduler;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResources.java`
#### Snippet
```java
    private final Resource<OrderedScheduler> ioReadScheduler;
    private final Resource<OrderedScheduler> checkpointScheduler;
    private final Resource<HashedWheelTimer> timer;

    private StorageResources(StorageResourcesSpec spec) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResources.java`
#### Snippet
```java
    private final Resource<OrderedScheduler> ioWriteScheduler;
    private final Resource<OrderedScheduler> ioReadScheduler;
    private final Resource<OrderedScheduler> checkpointScheduler;
    private final Resource<HashedWheelTimer> timer;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResources.java`
#### Snippet
```java
    }

    private final Resource<OrderedScheduler> scheduler;
    private final Resource<OrderedScheduler> ioWriteScheduler;
    private final Resource<OrderedScheduler> ioReadScheduler;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResources.java`
#### Snippet
```java
    private final Resource<OrderedScheduler> scheduler;
    private final Resource<OrderedScheduler> ioWriteScheduler;
    private final Resource<OrderedScheduler> ioReadScheduler;
    private final Resource<OrderedScheduler> checkpointScheduler;
    private final Resource<HashedWheelTimer> timer;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/StorageContainerStoreImpl.java`
#### Snippet
```java
    implements StorageContainerStore {

    private final StorageContainerManagerFactory scmFactory;
    private final StorageContainerRegistryImpl scRegistry;
    private final StorageContainerManager scManager;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/service/RangeStoreServiceFactoryImpl.java`
#### Snippet
```java
public class RangeStoreServiceFactoryImpl implements RangeStoreServiceFactory {

    private final StorageConfiguration storageConf;
    private final StorageContainerPlacementPolicy rangePlacementPolicy;
    private final Resource<OrderedScheduler> schedulerResource;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/service/RangeStoreServiceImpl.java`
#### Snippet
```java
    private final TableStoreCache tableStoreCache;
    @Getter(value = AccessLevel.PACKAGE)
    private final TableStoreFactory tableStoreFactory;

    private final StorageServerClientManager clientManager;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/rate/MovingAverageRateFactory.java`
#### Snippet
```java
    private static final int DEFAULT_INTERVAL_SECS = 1;

    private final ScheduledExecutorService scheduler;
    private final ScheduledFuture<?> scheduledFuture;
    private final CopyOnWriteArrayList<SampledMovingAverageRate> avgs;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/PrometheusMetricsProvider.java`
#### Snippet
```java
public class PrometheusMetricsProvider implements StatsProvider {

    private ScheduledExecutorService executor;

    public static final String PROMETHEUS_STATS_HTTP_ENABLE = "prometheusStatsHttpEnable";
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
    private final OpStatsLogger closeOpStats;
    private final OpStatsLogger openOpStats;
    private final OpStatsLogger recoverOpStats;
    private final OpStatsLogger deleteOpStats;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogWriter.java`
#### Snippet
```java
    private long lastTxId = DistributedLogConstants.INVALID_TXID;

    private final StatsLogger statsLogger;
    private final OpStatsLogger writeOpStatsLogger;
    private final OpStatsLogger markEndOfStreamOpStatsLogger;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadAheadEntryReader.java`
#### Snippet
```java
    private SegmentReader currentSegmentReader;
    private SegmentReader nextSegmentReader;
    private DLSN lastDLSN;
    private final EntryPosition nextEntryPosition;
    private volatile boolean isCatchingUp = true;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogReadHandler.java`
#### Snippet
```java

    // stats
    private final StatsLogger perLogStatsLogger;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/ZKWatcherManager.java`
#### Snippet
```java

    private final String name;
    private final ZooKeeperClient zkc;
    private final StatsLogger statsLogger;
    // Gauges and their labels
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/ZKWatcherManager.java`
#### Snippet
```java
    }

    private final String name;
    private final ZooKeeperClient zkc;
    private final StatsLogger statsLogger;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
    private final long logSegmentSequenceNumber;
    // Used only for values that *could* change (e.g. buffer size etc.)
    private final DistributedLogConfiguration conf;
    private final OrderedScheduler scheduler;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
    private StatsLogger perLogStatsLogger;
    private String clientId;
    private int regionId;

    //
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
    private AsyncFailureInjector failureInjector;
    private StatsLogger statsLogger;
    private StatsLogger perLogStatsLogger;
    private String clientId;
    private int regionId;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
    private EventLoopGroup eventLoopGroup;
    private HashedWheelTimer requestTimer;
    private BookKeeperClientBuilder sharedWriterBKCBuilder;
    private BookKeeperClient writerBKC;
    private BookKeeperClientBuilder sharedReaderBKCBuilder;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
    private BookKeeperClientBuilder sharedWriterBKCBuilder;
    private BookKeeperClient writerBKC;
    private BookKeeperClientBuilder sharedReaderBKCBuilder;
    private BookKeeperClient readerBKC;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentRandomAccessEntryReader.java`
#### Snippet
```java
    private final boolean deserializeRecordSet;
    // state
    private final LogSegmentMetadata metadata;
    private final LedgerHandle lh;
    private CompletableFuture<Void> closePromise = null;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryStore.java`
#### Snippet
```java
    private final OrderedScheduler scheduler;
    private final DistributedLogConfiguration conf;
    private final DynamicDistributedLogConfiguration dynConf;
    private final StatsLogger statsLogger;
    private final AsyncFailureInjector failureInjector;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKDistributedLock.java`
#### Snippet
```java
        AtomicIntegerFieldUpdater.newUpdater(ZKDistributedLock.class, "reacquireCount");
    private volatile int reacquireCount = 0;
    private final StatsLogger lockStatsLogger;
    private final OpStatsLogger acquireStats;
    private final OpStatsLogger reacquireStats;
```

## RuleId[id=IgnoreResultOfCall]
### IgnoreResultOfCall
Result of `InputStream.read()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HexDumpEntryFormatter.java`
#### Snippet
```java
        try {
            byte[] data = new byte[input.available()];
            input.read(data, 0, data.length);
            formatEntry(data);
        } catch (IOException ie) {
```

### IgnoreResultOfCall
Result of `InputStream.read()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringEntryFormatter.java`
#### Snippet
```java
        try {
            byte[] data = new byte[input.available()];
            input.read(data, 0, data.length);
            formatEntry(data);
        } catch (IOException ie) {
```

### IgnoreResultOfCall
Result of `FileChannel.write()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/JournalChannel.java`
#### Snippet
```java
            nextPrealloc += preAllocSize;
            zeros.clear();
            fc.write(zeros, nextPrealloc - journalAlignSize);
        }
    }
```

### IgnoreResultOfCall
Result of `FileChannel.write()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/JournalChannel.java`
#### Snippet
```java
        bb.putInt(formatVersion);
        bb.clear();
        fc.write(bb);

        bc = bcBuilder.create(fc, writeBufferSize);
```

### IgnoreResultOfCall
Result of `FileChannel.write()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/JournalChannel.java`
#### Snippet
```java
        forceWrite(true);
        nextPrealloc = this.preAllocSize;
        fc.write(zeros, nextPrealloc - journalAlignSize);
    }

```

### IgnoreResultOfCall
Result of `FileChannel.write()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
        bb.rewind();
        fc.position(0);
        fc.write(bb);
    }

```

### IgnoreResultOfCall
Result of `FileChannel.write()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
            mapInfo.putInt(numberOfLedgers);
            mapInfo.flip();
            this.fileChannel.write(mapInfo, LEDGERS_MAP_OFFSET_POSITION);
        }
    }
```

### IgnoreResultOfCall
Result of `ByteArrayInputStream.read()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/PersistentEntryLogMetadataMap.java`
#### Snippet
```java
            datais.set(new DataInputStream(newBais));
        } else {
            localBais.read(value, 0, value.length);
        }
        localBais.reset();
```

### IgnoreResultOfCall
Result of `File.list()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java

            final AtomicBoolean oldDataExists = new AtomicBoolean(false);
            parent.list(new FilenameFilter() {
                    @Override
                    public boolean accept(File dir, String name) {
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java

            cleanupExecutor.shutdown();
            cleanupExecutor.awaitTermination(1, TimeUnit.SECONDS);

            ledgerIndex.close();
```

### IgnoreResultOfCall
Result of `Semaphore.tryAcquire()` is ignored
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/BookieSanityService.java`
#### Snippet
```java
                // longer time to complete
                try {
                    lock.tryAcquire(MAX_CONCURRENT_REQUESTS, TIMEOUT_MS, TimeUnit.MILLISECONDS);
                } catch (InterruptedException e) {
                    LOG.error("Timing out due to max {} of sanity request are running concurrently",
```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLInputStream.java`
#### Snippet
```java
                return true;
            } else {
                this.currentRecord.payloadStream.skip(
                    this.currentRecord.payloadStream.available() - (endPos - position));
                this.pos = position;
```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLInputStream.java`
#### Snippet
```java
                return n;
            } else {
                currentRecord.payloadStream.skip(remaining);
                this.pos = endPos - currentRecord.payloadStream.available();
                return n;
```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
                return n;
            } else {
                currentRecord.payloadStream.skip(remaining);
                this.pos = endPos - currentRecord.payloadStream.available();
                return n;
```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
                return true;
            } else {
                this.currentRecord.payloadStream.skip(
                    this.currentRecord.payloadStream.available() - (endPos - position));
                this.pos = position;
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java

        File dir = File.createTempFile("native", "");
        dir.delete();
        if (!(dir.mkdir())) {
            throw new IOException("Failed to create temp directory " + dir.getAbsolutePath());
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/util/SchedulerUtils.java`
#### Snippet
```java
        service.shutdown();
        try {
            service.awaitTermination(timeout, timeUnit);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
```

### IgnoreResultOfCall
Result of `Integer.parseUnsignedInt()` is ignored
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/net/ServiceURI.java`
#### Snippet
```java
        } else if (parts.length == 2) {
            try {
                Integer.parseUnsignedInt(parts[1]);
            } catch (NumberFormatException nfe) {
                throw new IllegalArgumentException("Invalid hostname : " + hostname);
```

## RuleId[id=AccessStaticViaInstance]
### AccessStaticViaInstance
Static member 'org.apache.bookkeeper.metadata.etcd.EtcdWatchClient.isHaltError(io.grpc.Status)' accessed via instance reference
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatchClient.java`
#### Snippet
```java

        Status status = Status.fromThrowable(t);
        if (this.isHaltError(status) || this.isNoLeaderError(status)) {
            this.notifyWatchers(toEtcdException(status));
            this.closeGrpcWatchStreamObserver();
```

### AccessStaticViaInstance
Static member 'org.apache.bookkeeper.metadata.etcd.EtcdWatchClient.isNoLeaderError(io.grpc.Status)' accessed via instance reference
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatchClient.java`
#### Snippet
```java

        Status status = Status.fromThrowable(t);
        if (this.isHaltError(status) || this.isNoLeaderError(status)) {
            this.notifyWatchers(toEtcdException(status));
            this.closeGrpcWatchStreamObserver();
```

### AccessStaticViaInstance
Static member 'org.apache.bookkeeper.metadata.etcd.EtcdWatchClient.toWatchCreateRequest(org.apache.bookkeeper.metadata.etcd.EtcdWatcher)' accessed via instance reference
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatchClient.java`
#### Snippet
```java
        EtcdWatcher pendingWatcher = this.pendingWatchers.peek();
        if (pendingWatcher != null) {
            return Optional.of(this.toWatchCreateRequest(pendingWatcher));
        }
        return Optional.empty();
```

### AccessStaticViaInstance
Static member 'org.apache.distributedlog.lock.ZKSessionLock.epochUpdater' accessed via instance reference
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java

        // already closed or expired, nothing to cleanup
        this.epochUpdater.incrementAndGet(this);
        if (null != watcher) {
            this.zkClient.unregister(watcher);
```

## RuleId[id=MalformedFormatString]
### MalformedFormatString
Too many arguments for format string (found: 3, expected: 0)
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
                    List<byte[]> cfNames = RocksDB.listColumnFamilies(opts, dbDir.getAbsolutePath());
                    if (!cfNames.contains(wanted) && cfNames.contains(other)) {
                        throw new StateStoreException(String.format("{}: expected {} column family, found {}",
                                dbDir.getAbsolutePath(), wanted, other));
                    }
```

## RuleId[id=DefaultAnnotationParam]
### DefaultAnnotationParam
Redundant default parameter value assignment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/RegenerateInterleavedStorageIndexFileCommand.java`
#### Snippet
```java
        @Parameter(names = { "-l", "--ledgerids" },
            description = "Ledger(s) whose index needs to be regenerated. Multiple can be specified, comma separated.",
            splitter = CommaParameterSplitter.class)
        private List<Long> ledgerIds;

```

## RuleId[id=RedundantMethodOverride]
### RedundantMethodOverride
Method `equals()` is identical to its super method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSource.java`
#### Snippet
```java

            @Override
            public boolean equals(Object o) {
                return this == o;
            }
```

### RedundantMethodOverride
Method `equals()` is identical to its super method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSource.java`
#### Snippet
```java

            @Override
            public boolean equals(Object o) {
                return this == o;
            }
```

### RedundantMethodOverride
Method `reorderReadSequence()` is identical to its super method
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java

    @Override
    public DistributionSchedule.WriteSet reorderReadSequence(List<BookieId> ensemble,
            BookiesHealthInfo bookiesHealthInfo, DistributionSchedule.WriteSet writeSet) {
        return writeSet;
```

### RedundantMethodOverride
Method `markSupported()` is identical to its super method
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLInputStream.java`
#### Snippet
```java

    @Override
    public boolean markSupported() {
        return false;
    }
```

## RuleId[id=IntegerMultiplicationImplicitCastToLong]
### IntegerMultiplicationImplicitCastToLong
sent \* 1000: integer multiplication implicitly cast to long
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
            duration = System.currentTimeMillis() - start;
        }
        throughput = sent * 1000 / getDuration();

        reporter.interrupt();
```

### IntegerMultiplicationImplicitCastToLong
entrylogMapAccessExpiryTimeInSeconds \* entryLogPerLedgerCounterLimitsMultFactor: integer multiplication implicitly cast to long
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java

            ledgerIdEntryLogCounterCacheMap = CacheBuilder.newBuilder()
                    .expireAfterAccess(entrylogMapAccessExpiryTimeInSeconds * entryLogPerLedgerCounterLimitsMultFactor,
                            TimeUnit.SECONDS)
                    .maximumSize(maximumNumberOfActiveEntryLogs * entryLogPerLedgerCounterLimitsMultFactor)
```

### IntegerMultiplicationImplicitCastToLong
maximumNumberOfActiveEntryLogs \* entryLogPerLedgerCounterLimitsMultFactor: integer multiplication implicitly cast to long
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                    .expireAfterAccess(entrylogMapAccessExpiryTimeInSeconds * entryLogPerLedgerCounterLimitsMultFactor,
                            TimeUnit.SECONDS)
                    .maximumSize(maximumNumberOfActiveEntryLogs * entryLogPerLedgerCounterLimitsMultFactor)
                    .removalListener(new RemovalListener<Long, MutableInt>() {
                        @Override
```

### IntegerMultiplicationImplicitCastToLong
this.conf.getZkTimeout() \* 2: integer multiplication implicitly cast to long
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector.java`
#### Snippet
```java

            // Iterate over all the ledger on the metadata store
            long zkOpTimeoutMs = this.conf.getZkTimeout() * 2;
            LedgerRangeIterator ledgerRangeIterator = ledgerManager
                    .getLedgerRanges(zkOpTimeoutMs);
```

### IntegerMultiplicationImplicitCastToLong
duration \* 1000: integer multiplication implicitly cast to long
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifier.java`
#### Snippet
```java
    public synchronized void run() throws Exception {
        long start = System.currentTimeMillis();
        long testEnd = start + (duration * 1000);
        long testDrainEnd = testEnd + (drainTimeout * 1000);

```

### IntegerMultiplicationImplicitCastToLong
drainTimeout \* 1000: integer multiplication implicitly cast to long
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifier.java`
#### Snippet
```java
        long start = System.currentTimeMillis();
        long testEnd = start + (duration * 1000);
        long testDrainEnd = testEnd + (drainTimeout * 1000);

        /* Keep IO running until testEnd */
```

### IntegerMultiplicationImplicitCastToLong
ttlSeconds \* 1000: integer multiplication implicitly cast to long
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
            record.getValue().writeLong(newAmount);
            record.setModRev(revision);
            record.setExpireTime(System.currentTimeMillis() + (ttlSeconds * 1000));

            // write the mvcc record back
```

### IntegerMultiplicationImplicitCastToLong
ttlSeconds \* 1000: integer multiplication implicitly cast to long
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
            record.setValue(rawValBuf, ValueType.BYTES);
            record.setModRev(revision);
            record.setExpireTime(System.currentTimeMillis() + (ttlSeconds * 1000));

            // write the mvcc record back
```

### IntegerMultiplicationImplicitCastToLong
zkTimeoutSec \* 1000: integer multiplication implicitly cast to long
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java
    public void start() throws Exception {
        bkStartupThread.start();
        if (!LocalBookKeeper.waitForServerUp(zkEnsemble, zkTimeoutSec * 1000)) {
            throw new Exception("Error starting zookeeper/bookkeeper");
        }
```

### IntegerMultiplicationImplicitCastToLong
2 \* getReadLACLongPollTimeout(): integer multiplication implicitly cast to long
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
        long readerIdleWarnThresholdMs = getReaderIdleWarnThresholdMillis();
        if (readerIdleWarnThresholdMs > 0) { // NOTE: some test cases set the idle warn threshold to 0
            checkArgument(readerIdleWarnThresholdMs > 2 * getReadLACLongPollTimeout(),
                    "Invalid configuration: ReaderIdleWarnThreshold should be 2x larget than readLACLongPollTimeout");
        }
```

## RuleId[id=IfStatementWithIdenticalBranches]
### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java

                    if (key.equals(storedKey)) {
                        if (!onlyIfAbsent) {
                            // Over written an old value for same key
                            table[bucket + 1] = value;
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java

                    if (key == storedKey) {
                        if (!onlyIfAbsent) {
                            // Over written an old value for same key
                            table[bucket + 1] = value;
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLoggerAllocator.java`
#### Snippet
```java
        synchronized (createEntryLogLock) {
            BufferedLogChannel bc;
            if (!entryLogPreAllocationEnabled){
                // create a new log directly
                bc = allocateNewLog(dirForNextEntryLog);
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/WhoIsAuditorService.java`
#### Snippet
```java
        HttpServiceResponse response = new HttpServiceResponse();

        if (HttpServer.Method.GET == request.getMethod()) {
            BookieId bookieId;
            try {
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/TriggerAuditService.java`
#### Snippet
```java
        HttpServiceResponse response = new HttpServiceResponse();

        if (HttpServer.Method.PUT == request.getMethod()) {
            try {
                bka.triggerAudit();
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListUnderReplicatedLedgerService.java`
#### Snippet
```java
                    }
                }
                if (!hasURLedgers) {
                    response.setCode(HttpServer.StatusCode.NOT_FOUND);
                    response.setBody("No under replicated ledgers found");
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ReadLedgerEntryService.java`
#### Snippet
```java
        Map<String, String> params = request.getParams();

        if (HttpServer.Method.GET == request.getMethod() && (params != null) && params.containsKey("ledger_id")) {
            Long ledgerId = Long.parseLong(params.get("ledger_id"));
            Long startEntryId = 0L;
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListDiskFilesService.java`
#### Snippet
```java
        Map<String, String> params = request.getParams();

        if (HttpServer.Method.GET == request.getMethod()) {
            /**
             * output:
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/LostBookieRecoveryDelayService.java`
#### Snippet
```java
            @SuppressWarnings("unchecked")
            HashMap<String, Integer> configMap = JsonUtil.fromJson(requestBody, HashMap.class);
            if (configMap != null && configMap.containsKey("delay_seconds")) {
                int delaySeconds = configMap.get("delay_seconds");
                bka.setLostBookieRecoveryDelay(delaySeconds);
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/DeleteLedgerService.java`
#### Snippet
```java
        if (HttpServer.Method.DELETE == request.getMethod()) {
            Map<String, String> params = request.getParams();
            if (params != null && params.containsKey("ledger_id")) {
                ClientConfiguration clientConf = new ClientConfiguration();
                clientConf.addConfiguration(conf);
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListBookiesService.java`
#### Snippet
```java
        HttpServiceResponse response = new HttpServiceResponse();
        // GET
        if (HttpServer.Method.GET == request.getMethod()) {
            Collection<BookieId> bookies = new ArrayList<BookieId>();

```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/GCDetailsService.java`
#### Snippet
```java
        HttpServiceResponse response = new HttpServiceResponse();

        if (HttpServer.Method.GET == request.getMethod()) {
            List<GarbageCollectionStatus> details = bookieServer.getBookie()
                .getLedgerStorage().getGarbageCollectionStatus();
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/GetLedgerMetaService.java`
#### Snippet
```java
        Map<String, String> params = request.getParams();

        if (HttpServer.Method.GET == request.getMethod() && (params != null) && params.containsKey("ledger_id")) {
            Long ledgerId = Long.parseLong(params.get("ledger_id"));

```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ExpandStorageService.java`
#### Snippet
```java
        HttpServiceResponse response = new HttpServiceResponse();

        if (HttpServer.Method.PUT == request.getMethod()) {
            File[] ledgerDirectories = BookieImpl.getCurrentDirectories(conf.getLedgerDirs());
            File[] journalDirectories = BookieImpl.getCurrentDirectories(conf.getJournalDirs());
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListBookieInfoService.java`
#### Snippet
```java
        HttpServiceResponse response = new HttpServiceResponse();

        if (HttpServer.Method.GET == request.getMethod()) {
            ClientConfiguration clientConf = new ClientConfiguration(conf);
            clientConf.setDiskWeightBasedPlacementEnabled(true);
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/RecoveryBookieService.java`
#### Snippet
```java
        }

        if (HttpServer.Method.PUT == request.getMethod() && !requestJsonBody.bookieSrc.isEmpty()) {
            runFunctionWithRegistrationManager(conf, rm -> {
                final String bookieSrcSerialized = requestJsonBody.bookieSrc.get(0);
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListLedgerService.java`
#### Snippet
```java
        // GET
        // parameter could be like: print_metadata=true&page=PageIndex
        if (HttpServer.Method.GET == request.getMethod()) {
            Map<String, String> params = request.getParams();
            // default not print metadata
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/cluster/ClusterControllerLeaderImpl.java`
#### Snippet
```java
        if (null == availableServersSnapshot || availableServersSnapshot.isEmpty()) {
            // haven't received any servers from registration service, wait for 200ms and retry.
            if (lastSuccessfulAssigmentAt < 0) {
                log.info("No servers is alive yet. Backoff 200ms and retry.");
                TimeUnit.MILLISECONDS.sleep(200);
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
        long highestTxIdWritten = maxTxId.get();
        if (txId < highestTxIdWritten) {
            if (highestTxIdWritten == DistributedLogConstants.MAX_TXID) {
                LOG.error("We've already marked the stream as ended and attempting to start a new log segment");
                FutureUtils.completeExceptionally(promise,
```

## RuleId[id=SlowListContainsAll]
### SlowListContainsAll
Call to 'list.containsAll(collection)' may have poor performance
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileSystemUpgrade.java`
#### Snippet
```java
        final File[] indexDirs = conf.getIndexDirs();
        if (indexDirs != null && indexDirs.length == ledgerDirs.length
                && !Arrays.asList(indexDirs).containsAll(Arrays.asList(ledgerDirs))) {
            dirs.addAll(Lists.newArrayList(indexDirs));
        }
```

### SlowListContainsAll
Call to 'list.containsAll(collection)' may have poor performance
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
                        availableBookies, knownBookies);
                knownBookies.addAll(newBookies);
                if (!bookiesToBeAudited.isEmpty() && knownBookies.containsAll(bookiesToBeAudited)) {
                    // the bookie, which went down earlier and had an audit scheduled for,
                    // has come up. So let us stop tracking it and cancel the audit. Since
```

## RuleId[id=InfiniteLoopStatement]
### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
                public void run() {
                    try {
                        while (true) {
                            Thread.sleep(1000);
                            LOG.info("ms: {} req: {}", System.currentTimeMillis(), completedRequests.getAndSet(0));
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
                try {
                    lb.start();
                    while (true) {
                        Thread.sleep(1000);
                    }
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieServer.java`
#### Snippet
```java
        @Override
        public void run() {
            while (true) {
                try {
                    Thread.sleep(watchInterval);
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java`
#### Snippet
```java
        @Override
        public void run() {
            while (true) {
                try {
                    Thread.sleep(watchInterval);
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/cluster/ClusterControllerLeaderImpl.java`
#### Snippet
```java

        // the leader is looping here to react to changes
        while (true) {
            try {
                checkSuspension();
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java

            try {
                while (true) {
                    arrayBlockingQueue.drainTo(localList);
                    if (localList.isEmpty()) {
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java

            try {
                while (true) {
                    batchedArrayBlockingQueue.takeAll(localArray);
                }
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/codahale/TimerBenchmark.java`
#### Snippet
```java
        System.out.println("Done.");
        System.out.println("Now run 'jmap -histo:live <pid>' on this JVM to get a heap histogram, then kill this JVM.");
        while (true) {
            try {
                TimeUnit.MILLISECONDS.sleep(1000);
```

### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java
                        lb.start();
                        LOG.info("{} bookies are started.", numBookies);
                        while (true) {
                            Thread.sleep(1000);
                        }
```

## RuleId[id=UNUSED_IMPORT]
### UNUSED_IMPORT
Unused import `import java.nio.ByteBuffer;`
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Java8IntHash.java`
#### Snippet
```java
import com.scurrilous.circe.crc.StandardCrcProvider;
import io.netty.buffer.ByteBuf;
import java.nio.ByteBuffer;
import java.util.zip.Checksum;

```

### UNUSED_IMPORT
Unused import `import java.util.zip.Checksum;`
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Java8IntHash.java`
#### Snippet
```java
import io.netty.buffer.ByteBuf;
import java.nio.ByteBuffer;
import java.util.zip.Checksum;

public class Java8IntHash implements IntHash {
```

### UNUSED_IMPORT
Unused import `import org.apache.bookkeeper.util.ByteBufList;`
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/ProtocolBenchmark.java`
#### Snippet
```java
import org.apache.bookkeeper.proto.BookkeeperProtocol.ProtocolVersion;
import org.apache.bookkeeper.proto.BookkeeperProtocol.Request;
import org.apache.bookkeeper.util.ByteBufList;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
```

### UNUSED_IMPORT
Unused import `import org.apache.bookkeeper.util.ByteBufList;`
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManagerBenchmark.java`
#### Snippet
```java
import java.util.concurrent.TimeUnit;
import org.apache.bookkeeper.proto.DataFormats.LedgerMetadataFormat.DigestType;
import org.apache.bookkeeper.util.ByteBufList;
import org.openjdk.jmh.annotations.Benchmark;
import org.openjdk.jmh.annotations.BenchmarkMode;
```

## RuleId[id=SimplifiableBooleanExpression]
### SimplifiableBooleanExpression
`(null != client && isRecoverableException(e)) || null == client` can be simplified to 'null == client\|\|isRecoverableException(e)'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
                boolean rethrow = true;
                long elapsedTime = MathUtils.elapsedMSec(startTimeNanos);
                if (((null != client && isRecoverableException(e)) || null == client)
                    && retryPolicy.allowRetry(attempts, elapsedTime)) {
                    rethrow = false;
```

## RuleId[id=MismatchedCollectionQueryUpdate]
### MismatchedCollectionQueryUpdate
Contents of collection `ledgerIds` are queried, but never updated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/RegenerateInterleavedStorageIndexFileCommand.java`
#### Snippet
```java
            description = "Ledger(s) whose index needs to be regenerated. Multiple can be specified, comma separated.",
            splitter = CommaParameterSplitter.class)
        private List<Long> ledgerIds;

    }
```

### MismatchedCollectionQueryUpdate
Contents of collection `EMPTY_PAGE_MAP` are queried, but never updated
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
class IndexInMemPageMgr {
    private static final Logger LOG = LoggerFactory.getLogger(IndexInMemPageMgr.class);
    private static final ConcurrentHashMap<Long, LedgerEntryPage> EMPTY_PAGE_MAP =
            new ConcurrentHashMap<Long, LedgerEntryPage>();

```

### MismatchedCollectionQueryUpdate
Contents of collection `batchedArrayBlockingQueue` are updated, but never queried
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
        private ArrayBlockingQueue arrayBlockingQueue = new ArrayBlockingQueue<>(QUEUE_SIZE);

        private BatchedArrayBlockingQueue batchedArrayBlockingQueue = new BatchedArrayBlockingQueue<>(QUEUE_SIZE);

        private final Integer[] batchArray = new Integer[1000];
```

### MismatchedCollectionQueryUpdate
Contents of collection `tmpDirs` are queried, but never updated
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java
    private final String zkEnsemble;
    private final URI uri;
    private final List<File> tmpDirs = new ArrayList<File>();
    private final int zkTimeoutSec;
    private final Thread bkStartupThread;
```

### MismatchedCollectionQueryUpdate
Contents of collection `streams` are queried, but never updated
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogMetadataStore.java`
#### Snippet
```java
                                    promise.complete(results.iterator());
                                } else if (KeeperException.Code.NONODE.intValue() == rc) {
                                    List<String> streams = Lists.newLinkedList();
                                    promise.complete(streams.iterator());
                                } else {
```

### MismatchedCollectionQueryUpdate
Contents of collection `streams` are queried, but never updated
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogMetadataStore.java`
#### Snippet
```java
                        }, null);
                    } else if (KeeperException.Code.NONODE.intValue() == syncRc) {
                        List<String> streams = Lists.newLinkedList();
                        promise.complete(streams.iterator());
                    } else {
```

### MismatchedCollectionQueryUpdate
Contents of collection `subscriptions` are updated, but never queried
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/config/DynamicConfigurationFactory.java`
#### Snippet
```java

    private final Map<String, DynamicDistributedLogConfiguration> dynamicConfigs;
    private final List<ConfigurationSubscription> subscriptions;
    private final ScheduledExecutorService executorService;
    private final int reloadPeriod;
```

## RuleId[id=PointlessBitwiseExpression]
### PointlessBitwiseExpression
`location >> 32 & 0xFFFFFFFF` can be replaced with 'location \>\> 32'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLocation.java`
#### Snippet
```java
            .append("ledger=").append(ledger)
            .append(",entry=").append(entry)
            .append(",locationLog=").append(location >> 32 & 0xFFFFFFFF)
            .append(",locationOffset=").append((int) (location & 0xFFFFFFFF))
            .append("}").toString();
```

### PointlessBitwiseExpression
`location & 0xFFFFFFFF` can be replaced with 'location'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLocation.java`
#### Snippet
```java
            .append(",entry=").append(entry)
            .append(",locationLog=").append(location >> 32 & 0xFFFFFFFF)
            .append(",locationOffset=").append((int) (location & 0xFFFFFFFF))
            .append("}").toString();
    }
```

### PointlessBitwiseExpression
`~(64 - 1)` can be replaced with '-64'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/WriteCache.java`
#### Snippet
```java
    }

    private static final int ALIGN_64_MASK = ~(64 - 1);

    static int align64(int size) {
```

### PointlessBitwiseExpression
`~(ALIGNMENT - 1)` can be replaced with '-ALIGNMENT'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/Buffer.java`
#### Snippet
```java
                       pos, MAX_ALIGNMENT);
        checkArgument(pos >= 0, "position (0x%x) must be positive", pos);
        return (pos + (ALIGNMENT - 1)) & ~(ALIGNMENT - 1);
    }
}
```

### PointlessBitwiseExpression
`~(ALIGNMENT - 1)` can be replaced with '-ALIGNMENT'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/Buffer.java`
#### Snippet
```java
     * alignment */
    public static final int ALIGNMENT = 4096;
    private static final int MAX_ALIGNMENT = Integer.MAX_VALUE & ~(ALIGNMENT - 1);
    static final byte[] PADDING = generatePadding();

```

### PointlessBitwiseExpression
`~(blockSize - 1)` can be replaced with '-blockSize'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java
        final int blockSize = nativeBuffer.size();
        assertValidBlockSize(blockSize);
        final long blockStart = offset & ~(blockSize - 1);

        if (blockStart + blockSize > maxOffset) {
```

### PointlessBitwiseExpression
`location & 0xFFFFFFFF` can be replaced with 'location'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java
            throws IOException, NoEntryException {
        int logId = (int) (location >> 32);
        int pos = (int) (location & 0xFFFFFFFF);

        long start = System.nanoTime();
```

### PointlessBitwiseExpression
`0x1 << 0` can be replaced with '0x1'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/WriteFlag.java`
#### Snippet
```java
     * @see ForceableHandle#force()
     */
    DEFERRED_SYNC(0x1 << 0);

    /**
```

## RuleId[id=RedundantStringFormatCall]
### RedundantStringFormatCall
Redundant call to `format()`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java
            localDlm.start();

            System.out.println(String.format(
                "DistributedLog Sandbox is running now. You could access distributedlog://%s:%s",
                zkHost,
```

### RedundantStringFormatCall
Redundant call to `format()`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
                }
                try {
                    System.out.println(String.format("Dump records for %s (from = %s, dump"
                            + " count = %d, total records = %d)", getStreamName(), startOffset, count, totalCount));

```

### RedundantStringFormatCall
Redundant call to `format()`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
            }
            for (Map.Entry<BookieId, Integer> entry : entries) {
                System.out.println(String.format("%" + width + "s\t%6.2f%%\t\t%d",
                        entry.getKey(), entry.getValue() * 1.0 / totalEntries, entry.getValue()));
            }
```

## RuleId[id=DuplicateThrows]
### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslServerState.java`
#### Snippet
```java
    public SaslServerState(
        ServerConfiguration serverConfiguration, Subject subject, Pattern allowedIdsPattern)
        throws IOException, SaslException, LoginException {
        this.allowedIdsPattern = allowedIdsPattern;
        saslServer = createSaslServer(subject, serverConfiguration);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslServerState.java`
#### Snippet
```java

    private SaslServer createSaslServer(final Subject subject, ServerConfiguration serverConfiguration)
        throws SaslException, IOException {

        SaslServerCallbackHandler callbackHandler = new SaslServerCallbackHandler(Configuration.getConfiguration(),
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java`
#### Snippet
```java
    void setExplicitLac(ByteBuf entry, WriteCallback writeCallback, Object ctx, byte[] masterKey)
            throws IOException, InterruptedException, BookieException;
    ByteBuf getExplicitLac(long ledgerId) throws IOException, NoLedgerException, BookieException;

    // these can probably be moved out and called directly on ledgerdirmanager
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java`
#### Snippet
```java
            throws IOException, NoLedgerException, BookieException;
    long readLastAddConfirmed(long ledgerId) throws IOException, BookieException;
    PrimitiveIterator.OfLong getListOfEntriesOfLedger(long ledgerId) throws IOException, NoLedgerException;

    /**
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java`
#### Snippet
```java
    // TODO: Shouldn't this be async?
    ByteBuf readEntry(long ledgerId, long entryId)
            throws IOException, NoLedgerException, BookieException;
    long readLastAddConfirmed(long ledgerId) throws IOException, BookieException;
    PrimitiveIterator.OfLong getListOfEntriesOfLedger(long ledgerId) throws IOException, NoLedgerException;
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDescriptor.java`
#### Snippet
```java
    static LedgerDescriptor createReadOnly(long ledgerId,
                                           LedgerStorage ledgerStorage)
            throws IOException, Bookie.NoLedgerException {
        if (!ledgerStorage.ledgerExists(ledgerId)) {
            throw new Bookie.NoLedgerException(ledgerId);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieFileChannel.java`
#### Snippet
```java
     * @return
     */
    FileChannel getFileChannel() throws FileNotFoundException, IOException;

    /**
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/HandleFactoryImpl.java`
#### Snippet
```java

    @Override
    public LedgerDescriptor getReadOnlyHandle(final long ledgerId) throws IOException, Bookie.NoLedgerException {
        LedgerDescriptor handle = readOnlyLedgers.get(ledgerId);

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
     * @throws IOException
     */
    public static Cookie readFromDirectory(File directory) throws IOException, FileNotFoundException {
        File versionFile = new File(directory, BookKeeperConstants.VERSION_FILENAME);
        try (BufferedReader reader = new BufferedReader(
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/HandleFactory.java`
#### Snippet
```java

    LedgerDescriptor getReadOnlyHandle(long ledgerId)
            throws IOException, Bookie.NoLedgerException;
}

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/EntryLogger.java`
#### Snippet
```java
     */
    ByteBuf readEntry(long entryLocation)
            throws IOException, NoEntryException;
    /**
     * Read an entry from an entrylog location, and verify that is matches the
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/EntryLogger.java`
#### Snippet
```java
     */
    ByteBuf readEntry(long ledgerId, long entryId, long entryLocation)
            throws IOException, NoEntryException;

    /**
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
    }

    private void moveLedgerIndexFile(Long l, FileInfo fi) throws NoWritableLedgerDirException, IOException {
        File newLedgerIndexFile = getNewLedgerIndexFile(l, getLedgerDirForLedger(fi));
        try {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
    private void writeBuffers(Long ledger,
                              List<LedgerEntryPage> entries, FileInfo fi,
                              int start, int count) throws IOException, Bookie.NoLedgerException {
        if (LOG.isTraceEnabled()) {
            LOG.trace("Writing {} buffers of {}", count, Long.toHexString(ledger));
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java

    @Override
    public ByteBuf readEntry(long location) throws IOException, Bookie.NoEntryException {
        return internalReadEntry(location, -1L, -1L, false /* validateEntry */);
    }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java

    private ByteBuf internalReadEntry(long ledgerId, long entryId, long location, boolean validateEntry)
            throws IOException, Bookie.NoEntryException {
        long entryLogId = logIdForOffset(location);
        long pos = posForOffset(location);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
    @Override
    public ByteBuf readEntry(long ledgerId, long entryId, long entryLocation)
            throws IOException, Bookie.NoEntryException {
        return internalReadEntry(ledgerId, entryId, entryLocation, true /* validateEntry */);
    }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
    }

    public OfLong getListOfEntriesOfLedger(long ledgerId) throws IOException, NoLedgerException {
        long requestNanos = MathUtils.nowInNano();
        boolean success = false;
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
    }

    public ByteBuf getExplicitLac(long ledgerId) throws IOException, Bookie.NoLedgerException, BookieException {
        ByteBuf lac;
        LedgerDescriptor handle = handles.getReadOnlyHandle(ledgerId);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java

    public ByteBuf readEntry(long ledgerId, long entryId)
            throws IOException, NoLedgerException, BookieException {
        long requestNanos = MathUtils.nowInNano();
        boolean success = false;
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/LogReader.java`
#### Snippet
```java
    ByteBuf readBufferAt(long offset, int size) throws IOException, EOFException;

    void readIntoBufferAt(ByteBuf buffer, long offset, int size) throws IOException, EOFException;

    /**
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/LogReader.java`
#### Snippet
```java
     * @return the long at that offset.
     */
    long readLongAt(long offset) throws IOException, EOFException;

    /**
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/LogReader.java`
#### Snippet
```java
     * @return a bytebuf. The caller must release.
     */
    ByteBuf readEntryAt(int offset) throws IOException, EOFException;

    @Override
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/LogReader.java`
#### Snippet
```java
     * @return the integer at that offset.
     */
    int readIntAt(long offset) throws IOException, EOFException;

    /**
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/LogReader.java`
#### Snippet
```java
     * @return a bytebuf. The caller must release.
     */
    ByteBuf readBufferAt(long offset, int size) throws IOException, EOFException;

    void readIntoBufferAt(ByteBuf buffer, long offset, int size) throws IOException, EOFException;
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java

    @Override
    public ByteBuf readEntryAt(int offset) throws IOException, EOFException {
        assertValidEntryOffset(offset);
        int sizeOffset = offset - Integer.BYTES;
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java

    @Override
    public void readIntoBufferAt(ByteBuf buffer, long offset, int size) throws IOException, EOFException {
        assertValidOffset(offset);
        synchronized (nativeBuffer) {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java

    @Override
    public long readLongAt(long offset) throws IOException, EOFException {
        assertValidOffset(offset);
        synchronized (nativeBuffer) {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java
    }

    private int readBytesIntoBuf(ByteBuf buf, long offset, int size) throws IOException, EOFException {
        synchronized (nativeBuffer) {
            if (offset < currentBlock || offset >= currentBlockEnd) {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java

    @Override
    public ByteBuf readBufferAt(long offset, int size) throws IOException, EOFException {
        ByteBuf buf = allocator.buffer(size);
        try {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java

    @Override
    public int readIntAt(long offset) throws IOException, EOFException {
        assertValidOffset(offset);
        synchronized (nativeBuffer) {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java
    @Override
    public ByteBuf readEntry(long ledgerId, long entryId, long entryLocation)
            throws IOException, NoEntryException {
        return internalReadEntry(ledgerId, entryId, entryLocation, true);
    }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java

    private ByteBuf internalReadEntry(long ledgerId, long entryId, long location, boolean validateEntry)
            throws IOException, NoEntryException {
        int logId = (int) (location >> 32);
        int pos = (int) (location & 0xFFFFFFFF);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java
    @Override
    public ByteBuf readEntry(long entryLocation)
            throws IOException, NoEntryException {
        return internalReadEntry(-1L, -1L, entryLocation, false);
    }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLFileSystem.java`
#### Snippet
```java

    @Override
    public FileStatus[] listStatus(Path path) throws FileNotFoundException, IOException {
        String logName = getStreamName(path);
        try {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/EnvelopedEntryWriter.java`
#### Snippet
```java

    @Override
    public synchronized ByteBuf getBuffer() throws InvalidEnvelopedEntryException, IOException {
        if (null == finalizedBuffer) {
            finalizedBuffer = finalizeBuffer();
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
    @Override
    public DistributedLogManager openLog(String logName)
            throws InvalidStreamNameException, IOException {
        return openLog(logName,
                Optional.empty(),
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
    @Override
    public void createLog(String logName)
            throws InvalidStreamNameException, IOException {
        checkState();
        logName = validateAndNormalizeName(logName);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
    @Override
    public void deleteLog(String logName)
            throws InvalidStreamNameException, LogNotFoundException, IOException {
        checkState();
        logName = validateAndNormalizeName(logName);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
    @Override
    public void deleteLog(String logName)
            throws InvalidStreamNameException, LogNotFoundException, IOException {
        checkState();
        logName = validateAndNormalizeName(logName);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
                                         Optional<DynamicDistributedLogConfiguration> dynamicLogConf,
                                         Optional<StatsLogger> perStreamStatsLogger)
            throws InvalidStreamNameException, IOException {
        checkState();
        logName = validateAndNormalizeName(logName);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java

        @Override
        public ByteBuf getBuffer() throws InvalidEnvelopedEntryException, IOException {
            throw new IOException("GetBuffer is not supported.");
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
    @Override
    public org.apache.distributedlog.api.MetadataAccessor getMetadataAccessor(String streamName)
            throws InvalidStreamNameException, IOException {
        if (getBkdlConfig().isFederatedNamespace()) {
            throw new UnsupportedOperationException();
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/namespace/NamespaceDriver.java`
#### Snippet
```java
    @SuppressWarnings("deprecation")
    org.apache.distributedlog.api.MetadataAccessor getMetadataAccessor(String streamName)
            throws InvalidStreamNameException, IOException;

    /**
```

## RuleId[id=PointlessNullCheck]
### PointlessNullCheck
Unnecessary 'null' check before 'isContainerNotFound()' call
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/internal/RootRangeClientImpl.java`
#### Snippet
```java
        CompletableFuture<T> result = FutureUtils.<T>createFuture()
            .whenComplete((v, cause) -> {
                if (null != cause && isContainerNotFound(cause)) {
                    // if the rpc fails with `NOT_FOUND`, it means the storage container is not owned by any servers
                    // yet. in this case, reset the storage server channel, this allows subsequent retries will be
```

## RuleId[id=InfiniteRecursion]
### InfiniteRecursion
Method `of()` recurses infinitely, and can only end by throwing an exception
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/container/StorageContainerInfo.java`
#### Snippet
```java
public class StorageContainerInfo implements IRevisioned {

    public static StorageContainerInfo of(long groupId, long revision, Endpoint endpoint) {
        return of(groupId, revision, endpoint, Lists.newArrayList(endpoint));
    }
```

### InfiniteRecursion
Method `of()` recurses infinitely, and can only end by throwing an exception
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
         * @return jittered backoff policy.
         */
        public static Jitter of(Type type, long startMs, long maxMs) {
            return of(type, startMs, maxMs, -1);
        }
```

### InfiniteRecursion
Method `of()` recurses infinitely, and can only end by throwing an exception
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
         * @return constant backoff policy.
         */
        public static Constant of(long ms) {
            return of(ms, -1);
        }
```

### InfiniteRecursion
Method `of()` recurses infinitely, and can only end by throwing an exception
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
         * @return the exponential backoff policy.
         */
        public static Exponential of(long startMs, long maxMs, int multiplier) {
            return of(startMs, maxMs, multiplier, -1);
        }
```

## RuleId[id=UnusedAssignment]
### UnusedAssignment
The value `null` assigned to `this.code` is never used
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/ResultImpl.java`
#### Snippet
```java

    protected void reset() {
        this.code = null;
        this.revision = -1L;
        this.code = Code.UNEXPECTED;
```

### UnusedAssignment
Variable `id` initializer `0` is redundant
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchBookie.java`
#### Snippet
```java
        BookKeeper bkc = null;
        LedgerHandle lh = null;
        long id = 0;
        try {
            bkc = new BookKeeper(zkServers);
```

### UnusedAssignment
Variable `numberOfLedgers` initializer `1` is redundant
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java

    Semaphore sem;
    int numberOfLedgers = 1;
    final int sendLimit;
    final long[] latencies;
```

### UnusedAssignment
Variable `ledgerIdGenPath` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerIdGenerator.java`
#### Snippet
```java

    public static String createLedgerPrefix(String ledgersPath, String idGenZnodeName) {
        String ledgerIdGenPath = null;
        if (StringUtils.isBlank(idGenZnodeName)) {
            ledgerIdGenPath = ledgersPath;
```

### UnusedAssignment
Variable `zkActiveLedgers` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java`
#### Snippet
```java
                    return;
                }
                Set<Long> zkActiveLedgers = null;

                try {
```

### UnusedAssignment
Variable `kmf` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/TLSContextFactory.java`
#### Snippet
```java
            String keyStorePasswordPath) throws SecurityException, KeyStoreException, NoSuchAlgorithmException,
            CertificateException, IOException, UnrecoverableKeyException, InvalidKeySpecException {
        KeyManagerFactory kmf = null;

        if (Strings.isNullOrEmpty(keyStoreLocation)) {
```

### UnusedAssignment
Variable `hasMoreElements` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.java`
#### Snippet
```java
        private synchronized void preload() throws IOException {
            while (nextRange == null && !iteratorDone) {
                boolean hasMoreElements = false;
                try {
                    if (l1NodesIter == null) {
```

### UnusedAssignment
Variable `ledgerNodes` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.java`
#### Snippet
```java
                       .append(level1).append("/").append(level2);
            String nodePath = nodeBuilder.toString();
            List<String> ledgerNodes = null;
            try {
                ledgerNodes = ZkUtils.getChildrenInSingleNode(zk, nodePath, zkOpTimeoutMs);
```

### UnusedAssignment
Variable `password` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslClientState.java`
#### Snippet
```java
    static class ClientCallbackHandler implements CallbackHandler {

        private String password = null;

        public ClientCallbackHandler(String password) {
```

### UnusedAssignment
Variable `password` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory.java`
#### Snippet
```java
    private static class ClientCallbackHandler implements CallbackHandler {

        private String password = null;

        public ClientCallbackHandler(String password) {
```

### UnusedAssignment
Variable `data` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java`
#### Snippet
```java
            String znode = getUrLedgerZnode(ledgerId);
            UnderreplicatedLedgerFormat.Builder builder = UnderreplicatedLedgerFormat.newBuilder();
            byte[] data = null;
            try {
                data = zkc.getData(znode, false, null);
```

### UnusedAssignment
Variable `lastSequenceStart` initializer `INVALID_ENTRYID` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
        private final long firstSequenceStart;
        private final int sequenceSize;
        private long lastSequenceStart = INVALID_ENTRYID;
        private int sequencePeriod;
        private boolean isSequenceGroupClosed = false;
```

### UnusedAssignment
Variable `returnEntryId` initializer `INVALID_ELEMENT` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IteratorUtility.java`
#### Snippet
```java
                }

                long returnEntryId = INVALID_ELEMENT;
                if (curIter1Element != INVALID_ELEMENT && curIter2Element != INVALID_ELEMENT) {
                    if (curIter1Element == curIter2Element) {
```

### UnusedAssignment
Variable `returnEntry` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IteratorUtility.java`
#### Snippet
```java
                }

                T returnEntry = null;
                if (curIter1Entry != null && curIter2Entry != null) {
                    int compareValue = comparator.compare(curIter1Entry, curIter2Entry);
```

### UnusedAssignment
Variable `timeoutTimerTask` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Shell.java`
#### Snippet
```java
        ProcessBuilder builder = new ProcessBuilder(getExecString());
        Timer timeOutTimer = null;
        ShellTimeoutTimerTask timeoutTimerTask = null;
        timedOut = new AtomicBoolean(false);
        completed = new AtomicBoolean(false);
```

### UnusedAssignment
Variable `canonDir` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
            return true;
        }
        File canonDir = null;
        try {
            canonDir = dir.getCanonicalFile();
```

### UnusedAssignment
Variable `availabilityOfEntriesOfLedger` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/GetListOfEntriesOfLedgerProcessorV3.java`
#### Snippet
```java
        }
        StatusCode status = StatusCode.EOK;
        AvailabilityOfEntriesOfLedger availabilityOfEntriesOfLedger = null;
        try {
            availabilityOfEntriesOfLedger = new AvailabilityOfEntriesOfLedger(
```

### UnusedAssignment
Variable `status` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/WriteLacProcessorV3.java`
#### Snippet
```java
        };

        StatusCode status = null;
        ByteBuffer lacToAdd = writeLacRequest.getBody().asReadOnlyByteBuffer();
        byte[] masterKey = writeLacRequest.getMasterKey().toByteArray();
```

### UnusedAssignment
Variable `status` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ForceLedgerProcessorV3.java`
#### Snippet
```java
            sendResponse(status, resp, requestProcessor.getRequestStats().getForceLedgerRequestStats());
        };
        StatusCode status = null;
        try {
            requestProcessor.getBookie().forceLedger(ledgerId, wcb, requestHandler);
```

### UnusedAssignment
Variable `status` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/WriteEntryProcessorV3.java`
#### Snippet
```java
        }
        final boolean ackBeforeSync = writeFlags.contains(WriteFlag.DEFERRED_SYNC);
        StatusCode status = null;
        byte[] masterKey = addRequest.getMasterKey().toByteArray();
        ByteBuf entryToAdd = Unpooled.wrappedBuffer(addRequest.getBody().asReadOnlyByteBuffer());
```

### UnusedAssignment
Variable `updateByteBufferMethod` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DirectMemoryCRC32Digest.java`
#### Snippet
```java
        // Access CRC32 class private native methods to compute the crc on the ByteBuf direct memory,
        // without necessity to convert to a nio ByteBuffer.
        Method updateByteBufferMethod = null;
        Method updateBytesMethod = null;
        try {
```

### UnusedAssignment
Variable `updateBytesMethod` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DirectMemoryCRC32Digest.java`
#### Snippet
```java
        // without necessity to convert to a nio ByteBuffer.
        Method updateByteBufferMethod = null;
        Method updateBytesMethod = null;
        try {
            updateByteBufferMethod = CRC32.class.getDeclaredMethod("updateByteBuffer", int.class, long.class, int.class,
```

### UnusedAssignment
Variable `masterKey` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java

        private static byte[] readMasterKey(ByteBuf packet) {
            byte[] masterKey = null;

            // check if the master key is an empty master key
```

### UnusedAssignment
Variable `ledgerId` initializer `-1` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java

            // packet format is different between ADDENTRY and READENTRY
            long ledgerId = -1;
            long entryId = BookieProtocol.INVALID_ENTRY_ID;

```

### UnusedAssignment
Variable `entryId` initializer `BookieProtocol.INVALID_ENTRY_ID` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java
            // packet format is different between ADDENTRY and READENTRY
            long ledgerId = -1;
            long entryId = BookieProtocol.INVALID_ENTRY_ID;

            switch (opCode) {
```

### UnusedAssignment
Variable `result` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/InitCommand.java`
#### Snippet
```java
    public boolean apply(ServerConfiguration conf, CliFlags cmdFlags) {

        boolean result = false;
        try {
            result = BookKeeperAdmin.initBookie(conf);
```

### UnusedAssignment
Variable `readInstanceId` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookies/InstanceIdCommand.java`
#### Snippet
```java
        try {
            runFunctionWithRegistrationManager(conf, rm -> {
                String readInstanceId = null;
                try {
                    readInstanceId = rm.getClusterInstanceId();
```

### UnusedAssignment
Variable `oldCookie` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/AdminCommand.java`
#### Snippet
```java
                String newBookieId = BookieImpl.getBookieId(conf).toString();
                // read oldcookie
                Versioned<Cookie> oldCookie = null;
                try {
                    conf.setUseHostNameAsBookieID(!useHostname);
```

### UnusedAssignment
Variable `cookie` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/AdminCommand.java`
#### Snippet
```java
        return runFunctionWithRegistrationManager(bkConf, rm -> {
            try {
                Versioned<Cookie> cookie = null;
                try {
                    cookie = Cookie.readFromRegistrationManager(rm, bookieAddress);
```

### UnusedAssignment
Variable `request` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
    void addEntry(final long ledgerId, byte[] masterKey, final long entryId, ReferenceCounted toSend, WriteCallback cb,
                  Object ctx, final int options, boolean allowFastFail, final EnumSet<WriteFlag> writeFlags) {
        Object request = null;
        CompletionKey completionKey = null;
        if (useV2WireProtocol) {
```

### UnusedAssignment
Variable `completionKey` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
                  Object ctx, final int options, boolean allowFastFail, final EnumSet<WriteFlag> writeFlags) {
        Object request = null;
        CompletionKey completionKey = null;
        if (useV2WireProtocol) {
            if (writeFlags.contains(WriteFlag.DEFERRED_SYNC)) {
```

### UnusedAssignment
Variable `toClose` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java

    private void closeInternal(boolean permanent, boolean wait) {
        Channel toClose = null;
        synchronized (this) {
            if (permanent) {
```

### UnusedAssignment
Variable `request` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java

    public void readLac(final long ledgerId, ReadLacCallback cb, Object ctx) {
        Object request = null;
        CompletionKey completionKey = null;
        if (useV2WireProtocol) {
```

### UnusedAssignment
Variable `completionKey` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
    public void readLac(final long ledgerId, ReadLacCallback cb, Object ctx) {
        Object request = null;
        CompletionKey completionKey = null;
        if (useV2WireProtocol) {
            request = BookieProtocol.ReadRequest.create(BookieProtocol.CURRENT_PROTOCOL_VERSION,
```

### UnusedAssignment
Variable `request` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
                                   byte[] masterKey,
                                   boolean allowFastFail) {
        Object request = null;
        CompletionKey completionKey = null;
        if (useV2WireProtocol) {
```

### UnusedAssignment
Variable `completionKey` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
                                   boolean allowFastFail) {
        Object request = null;
        CompletionKey completionKey = null;
        if (useV2WireProtocol) {
            request = BookieProtocol.ReadRequest.create(BookieProtocol.CURRENT_PROTOCOL_VERSION,
```

### UnusedAssignment
Variable `channels` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForSingleEntryLog.java`
#### Snippet
```java
    @Override
    void flushRotatedLogs() throws IOException {
        List<BufferedLogChannel> channels = null;
        synchronized (this) {
            channels = rotatedLogChannels;
```

### UnusedAssignment
Variable `entry` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
                    Iterator<Map.Entry<EntryKey, LedgerEntryPage>> iterator = lruCleanPageMap.entrySet().iterator();

                    Map.Entry<EntryKey, LedgerEntryPage> entry = null;
                    while (iterator.hasNext()) {
                        entry = iterator.next();
```

### UnusedAssignment
Variable `readBytes` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedReadChannel.java`
#### Snippet
```java
                // We don't have it in the buffer, so put necessary data in the buffer
                readBufferStartPosition = currentPosition;
                int readBytes = 0;
                if ((readBytes = validateAndGetFileChannel().read(readBuffer.internalNioBuffer(0, readCapacity),
                        currentPosition)) <= 0) {
```

### UnusedAssignment
Variable `address` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
    public void writeToRegistrationManager(RegistrationManager rm, ServerConfiguration conf, Version version)
            throws BookieException {
        BookieId address = null;
        try {
            address = BookieImpl.getBookieId(conf);
```

### UnusedAssignment
Variable `address` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
                                              ServerConfiguration conf,
                                              Version version) throws BookieException {
        BookieId address = null;
        try {
            address = BookieImpl.getBookieId(conf);
```

### UnusedAssignment
Variable `layoutVersion` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
    private static Builder parse(BufferedReader reader) throws IOException {
        Builder cBuilder = Cookie.newBuilder();
        int layoutVersion = 0;
        String line = reader.readLine();
        if (null == line) {
```

### UnusedAssignment
Variable `phaseName` initializer `""` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/TransactionalEntryLogCompactor.java`
#### Snippet
```java
     */
    abstract static class CompactionPhase {
        private String phaseName = "";

        CompactionPhase(String phaseName) {
```

### UnusedAssignment
Variable `ledgersInMetadata` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector.java`
#### Snippet
```java
            LedgerRangeIterator ledgerRangeIterator = ledgerManager
                    .getLedgerRanges(zkOpTimeoutMs);
            Set<Long> ledgersInMetadata = null;
            long start;
            long end = -1;
```

### UnusedAssignment
Variable `metadata` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector.java`
#### Snippet
```java
            boolean done = false;
            AtomicBoolean isBookieInEnsembles = new AtomicBoolean(false);
            Versioned<LedgerMetadata> metadata = null;
            while (!done) {
                start = end + 1;
```

### UnusedAssignment
Variable `length` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryKeyValue.java`
#### Snippet
```java
    private final byte [] bytes;
    private int offset = 0; // start offset of entry blob
    private int length = 0; // length of entry blob

    /**
```

### UnusedAssignment
Variable `offset` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryKeyValue.java`
#### Snippet
```java
public class EntryKeyValue extends EntryKey {
    private final byte [] bytes;
    private int offset = 0; // start offset of entry blob
    private int length = 0; // length of entry blob

```

### UnusedAssignment
Variable `pageEntriesIteratorNonFinal` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java`
#### Snippet
```java
    @Override
    public OfLong getEntriesIterator(long ledgerId) throws IOException {
        Iterator<LedgerCache.PageEntries> pageEntriesIteratorNonFinal = null;
        try {
            pageEntriesIteratorNonFinal = listEntries(ledgerId).iterator();
```

### UnusedAssignment
Variable `changed` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
     */
    public void close(boolean force) throws IOException {
        boolean changed = false;
        synchronized (this) {
            if (isClosed) {
```

### UnusedAssignment
Variable `rc` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
        }
        int total = 0;
        int rc = 0;
        while (bb.remaining() > 0) {
            synchronized (this) {
```

### UnusedAssignment
Variable `phaserTerminatedAbruptly` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTableWithParallelFlusher.java`
#### Snippet
```java
                    }

                    boolean phaserTerminatedAbruptly = false;
                    try {
                        /*
```

### UnusedAssignment
Variable `size` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
    public long addEntry(long ledgerId, long entryId, final ByteBuffer entry, final CacheCallback cb)
            throws IOException {
        long size = 0;
        long startTimeNanos = MathUtils.nowInNano();
        boolean success = false;
```

### UnusedAssignment
Variable `value` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
    public EntryKeyValue getEntry(long ledgerId, long entryId) throws IOException {
        EntryKey key = new EntryKey(ledgerId, entryId);
        EntryKeyValue value = null;
        long startTimeNanos = MathUtils.nowInNano();
        boolean success = false;
```

### UnusedAssignment
Variable `result` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
     */
    public EntryKeyValue getLastEntry(long ledgerId) throws IOException {
        EntryKey result = null;
        EntryKey key = new EntryKey(ledgerId, Long.MAX_VALUE);
        long startTimeNanos = MathUtils.nowInNano();
```

### UnusedAssignment
Variable `rc` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
        long totalWritten = 0;
        while (buffs[buffs.length - 1].remaining() > 0) {
            long rc = 0;
            try {
                rc = fi.write(buffs, entries.get(start + 0).getFirstEntryPosition());
```

### UnusedAssignment
Variable `fc` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java


        BufferedReadChannel fc = null;
        int entrySize = -1;
        try {
```

### UnusedAssignment
Variable `entrySize` initializer `-1` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java

        BufferedReadChannel fc = null;
        int entrySize = -1;
        try {
            fc = getFCForEntryInternal(ledgerId, entryId, entryLogId, pos);
```

### UnusedAssignment
Variable `dbFilePath` initializer `""` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorageRocksDB.java`
#### Snippet
```java
        this.emptyBatch = new WriteBatch();

        String dbFilePath = "";
        if (dbConfigType == DbConfigType.EntryLocation) {
            dbFilePath = conf.getEntryLocationRocksdbConf();
```

### UnusedAssignment
Variable `hostAddress` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
                    + hostName + " for interface: " + iface);
        }
        String hostAddress = null;
        InetAddress iAddress = inetAddr.getAddress();
        if (conf.getUseHostNameAsBookieID()) {
```

### UnusedAssignment
Variable `confirm` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
            if (journalDirFiles != null && journalDirFiles.length != 0) {
                try {
                    boolean confirm = false;
                    if (!isInteractive) {
                        // If non interactive and force is set, then delete old
```

### UnusedAssignment
Variable `errors` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
        if (conf.isLocalConsistencyCheckOnStartup()) {
            LOG.info("Running local consistency check on startup prior to accepting IO.");
            List<LedgerStorage.DetectedInconsistency> errors = null;
            try {
                errors = ledgerStorage.localConsistencyCheck(Optional.empty());
```

### UnusedAssignment
Variable `bytesRead` initializer `-1` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java
        long bytesToRead = Math.min(blockSize, bytesAvailable);
        long bytesOutstanding = bytesToRead;
        long bytesRead = -1;
        try {
            while (true) {
```

### UnusedAssignment
Variable `median` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/WeightedRandomSelectionImpl.java`
#### Snippet
```java
        }

        double median = 0;
        if (totalWeight == 0) {
            // all the values are zeros; assign a value of 1 to all and the totalWeight equal
```

### UnusedAssignment
Variable `inserted` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java
        // rest of the time, we can have multiple thread using the optimistic lock here without interfering.
        long stamp = writeCacheRotationLock.tryOptimisticRead();
        boolean inserted = false;

        inserted = writeCache.put(ledgerId, entryId, entry);
```

### UnusedAssignment
Variable `startTime` initializer `-1` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java
        // Only a single flush operation can happen at a time
        flushMutex.lock();
        long startTime = -1;
        try {
            startTime = MathUtils.nowInNano();
```

### UnusedAssignment
Variable `allowFailFast` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingReadOp.java`
#### Snippet
```java
    boolean parallelRead = false;
    final AtomicBoolean complete = new AtomicBoolean(false);
    boolean allowFailFast = false;

    abstract class LedgerEntryRequest implements SpeculativeRequestExecutor, AutoCloseable {
```

### UnusedAssignment
Variable `zonesToExclude` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                    throws BKNotEnoughBookiesException {
        BookieId bookieToReplace = currentEnsemble.get(bookieToReplaceIndex);
        Set<String> zonesToExclude = null;
        Set<BookieNode> bookiesToConsiderAfterExcludingZonesAndUDs = null;
        for (int numberOfNeighborsToConsider = (desiredNumZonesPerWriteQuorumForThisEnsemble
```

### UnusedAssignment
Variable `areAckedBookiesAdheringToPlacementPolicy` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
        HashSet<String> zonesOfAckedBookies = new HashSet<>();
        int minNumZonesPerWriteQuorumForThisEnsemble = Math.min(writeQuorumSize, minNumZonesPerWriteQuorum);
        boolean areAckedBookiesAdheringToPlacementPolicy = false;
        ReentrantReadWriteLock.ReadLock readLock = rwLock.readLock();
        readLock.lock();
```

### UnusedAssignment
Variable `enforceDurability` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
    protected BookieNode localNode;
    protected boolean reorderReadsRandom = false;
    protected boolean enforceDurability = false;
    protected int stabilizePeriodSeconds = 0;
    protected int reorderThresholdPendingRequests = 0;
```

### UnusedAssignment
Variable `fragmentSplitLastEntry` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
        }

        long fragmentSplitLastEntry = 0;
        for (int i = 0; i < splitsWithFullEntries; i++) {
            fragmentSplitLastEntry = (firstEntryId + rereplicationEntryBatchSize) - 1;
```

### UnusedAssignment
Variable `isEnsembleAdheringToPlacementPolicy` initializer `PlacementPolicyAdherence.FAIL` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
        EnsemblePlacementPolicy.PlacementResult<BookieId> replaceBookieResponse;
        BookieId socketAddress;
        PlacementPolicyAdherence isEnsembleAdheringToPlacementPolicy = PlacementPolicyAdherence.FAIL;
        try {
            // we exclude the quarantined bookies also first
```

### UnusedAssignment
Variable `hasURLedgers` initializer `false` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListUnderReplicatedLedgerService.java`
#### Snippet
```java

            try {
                boolean hasURLedgers = false;
                List<Long> outputLedgers = null;
                Map<Long, List<String>> outputLedgersWithMissingReplica = null;
```

### UnusedAssignment
Variable `storage` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/EmbeddedServer.java`
#### Snippet
```java

            // bookie takes ownership of storage, so shuts it down
            LedgerStorage storage = null;
            DataIntegrityCheck integCheck = null;

```

### UnusedAssignment
Variable `ledgerSeq` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerInputStream.java`
#### Snippet
```java
    int increment = 50;
    int defaultSize = 1024 * 1024; // 1MB default size
    Enumeration<LedgerEntry> ledgerSeq = null;

    /**
```

### UnusedAssignment
Variable `lastEntry` initializer `0` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerInputStream.java`
#### Snippet
```java
    private ByteBuffer bytebuff;
    byte[] bbytes;
    long lastEntry = 0;
    int increment = 50;
    int defaultSize = 1024 * 1024; // 1MB default size
```

### UnusedAssignment
Variable `watcherMap` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
    private String name;
    private TreeMap<String, Versioned<Value>> map = null;
    private TreeMap<String, MetastoreWatcher> watcherMap = null;
    private ScheduledExecutorService scheduler;

```

### UnusedAssignment
Variable `map` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java

    private String name;
    private TreeMap<String, Versioned<Value>> map = null;
    private TreeMap<String, MetastoreWatcher> watcherMap = null;
    private ScheduledExecutorService scheduler;
```

### UnusedAssignment
Variable `instanceId` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationManager.java`
#### Snippet
```java
    @Override
    public String getClusterInstanceId() throws BookieException {
        String instanceId = null;
        try {
            if (zk.exists(ledgersRootPath, null) == null) {
```

### UnusedAssignment
The value `true` assigned to `isRecoveryOpen` is never used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
                                        fragment.getEnsemble(), ledgerId);
                                lh = admin.openLedger(ledgerId);
                                isRecoveryOpen = true;
                                break;
                            }
```

### UnusedAssignment
Variable `ledgerRange` initializer `null` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorReplicasCheckTask.java`
#### Snippet
```java
        final Semaphore maxConcurrentSemaphore = new Semaphore(MAX_CONCURRENT_REPLICAS_CHECK_LEDGER_REQUESTS);
        while (true) {
            LedgerManager.LedgerRange ledgerRange = null;
            try {
                if (ledgerRangeIterator.hasNext()) {
```

### UnusedAssignment
Variable `writePos` initializer `0L` is redundant
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLOutputStream.java`
#### Snippet
```java
    // positions
    private final long[] syncPos = new long[1];
    private long writePos = 0L;

    // state
```

### UnusedAssignment
Variable `response` initializer `null` is redundant
in `bookkeeper-http/vertx-http-server/src/main/java/org/apache/bookkeeper/http/vertx/VertxAbstractHandler.java`
#### Snippet
```java
            .setParams(convertParams(httpRequest))
            .setBody(context.body().asString());
        HttpServiceResponse response = null;
        try {
            response = httpEndpointService.handle(request);
```

### UnusedAssignment
Variable `writePos` initializer `0L` is redundant
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLOutputStream.java`
#### Snippet
```java
    // positions
    private final long[] syncPos = new long[1];
    private long writePos = 0L;

    // state
```

### UnusedAssignment
Variable `rawEndKey` initializer `NULL_END_KEY` is redundant
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
        // raw key
        byte[] rawKey = (null != key) ? keyCoder.encode(key) : NULL_START_KEY;
        byte[] rawEndKey = NULL_END_KEY;
        if (null == endKey) {
            // point lookup
```

### UnusedAssignment
Variable `cTime` initializer `0L` is redundant
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    private LifecycleState lifecycleState = LifecycleState.UNINIT;
    private ServingState servingState = ServingState.WRITABLE;
    private long cTime = 0L;
    private long mTime = 0L;

```

### UnusedAssignment
Variable `mTime` initializer `0L` is redundant
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    private ServingState servingState = ServingState.WRITABLE;
    private long cTime = 0L;
    private long mTime = 0L;

    private long nextRangeId = MIN_DATA_RANGE_ID;
```

### UnusedAssignment
Variable `nextRangeId` initializer `MIN_DATA_RANGE_ID` is redundant
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    private long mTime = 0L;

    private long nextRangeId = MIN_DATA_RANGE_ID;
    /**
     * All the ranges in the stream.
```

### UnusedAssignment
Variable `servingState` initializer `ServingState.WRITABLE` is redundant
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    private StreamProperties streamProps;
    private LifecycleState lifecycleState = LifecycleState.UNINIT;
    private ServingState servingState = ServingState.WRITABLE;
    private long cTime = 0L;
    private long mTime = 0L;
```

### UnusedAssignment
Variable `lifecycleState` initializer `LifecycleState.UNINIT` is redundant
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/metadata/stream/MetaRangeImpl.java`
#### Snippet
```java
    @GuardedBy("this")
    private StreamProperties streamProps;
    private LifecycleState lifecycleState = LifecycleState.UNINIT;
    private ServingState servingState = ServingState.WRITABLE;
    private long cTime = 0L;
```

### UnusedAssignment
Variable `updateBytes` initializer `null` is redundant
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Java9IntHash.java`
#### Snippet
```java
    static {
        boolean hasJava9CRC32C = false;
        Method updateBytes = null;
        Method updateDirectByteBuffer = null;

```

### UnusedAssignment
Variable `updateDirectByteBuffer` initializer `null` is redundant
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Java9IntHash.java`
#### Snippet
```java
        boolean hasJava9CRC32C = false;
        Method updateBytes = null;
        Method updateDirectByteBuffer = null;

        try {
```

### UnusedAssignment
Variable `logger` initializer `null` is redundant
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/codahale/TimerBenchmark.java`
#### Snippet
```java
            System.exit(1);
        }
        StatsLogger logger = null;
        if (args[0].equalsIgnoreCase("codahale")) {
            logger = new CodahaleMetricsProvider().getStatsLogger("test");
```

### UnusedAssignment
The value `null` assigned to `times` is never used
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/codahale/TimerBenchmark.java`
#### Snippet
```java
            timers[i % timers.length].registerFailedEvent(times[i % times.length], TimeUnit.MILLISECONDS);
        }
        times = null; // let it become garbage
        System.out.println("Done.");
        System.out.println("Now run 'jmap -histo:live <pid>' on this JVM to get a heap histogram, then kill this JVM.");
```

### UnusedAssignment
Variable `logRecord` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/AppendOnlyStreamReader.java`
#### Snippet
```java

        LogReader skipReader = dlm.getInputStream(position);
        LogRecordWithInputStream logRecord = null;
        try {
            logRecord = nextLogRecord(skipReader);
```

### UnusedAssignment
Variable `result` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogWriter.java`
#### Snippet
```java
        // The passed in writer may be stale since we acquire the writer outside of sync
        // lock. If we recently rolled and the new writer is cached, use that instead.
        CompletableFuture<DLSN> result = null;
        BKLogSegmentWriter w;
        try {
```

### UnusedAssignment
Variable `lockStream` initializer `false` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogReader.java`
#### Snippet
```java
    protected CompletableFuture<Void> closeFuture = null;

    private boolean lockStream = false;

    private final boolean returnEndOfStreamRecord;
```

### UnusedAssignment
Variable `nextRequest` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogReader.java`
#### Snippet
```java
                }

                PendingReadRequest nextRequest = null;
                synchronized (this) {
                    nextRequest = pendingRequests.peek();
```

### UnusedAssignment
Variable `requestPos` initializer `0` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/AppendOnlyStreamWriter.java`
#### Snippet
```java
    final long[] syncPos = new long[1];
    BKAsyncLogWriter logWriter;
    long requestPos = 0;

    public AppendOnlyStreamWriter(BKAsyncLogWriter logWriter, long pos) {
```

### UnusedAssignment
Variable `pos` initializer `0` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/AppendOnlyStreamWriter.java`
#### Snippet
```java

    public void force(boolean metadata) throws IOException {
        long pos = 0;
        try {
            pos = FutureUtils.result(logWriter.flushAndCommit());
```

### UnusedAssignment
Variable `conf` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java

        public LocalDLMEmulator build() throws Exception {
            ServerConfiguration conf = null;
            if (serverConf.isPresent()) {
                conf = serverConf.get();
```

### UnusedAssignment
Variable `zkPort` initializer `DEFAULT_ZK_PORT` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java

            String zkHost = DEFAULT_ZK_HOST;
            int zkPort = DEFAULT_ZK_PORT;
            if (args.length == 1) {
                zkPort = Integer.parseInt(args[0]);
```

### UnusedAssignment
Variable `dynConf` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
        mergedConfiguration.loadStreamConf(logConfiguration);
        // If dynamic config was not provided, default to a static view of the global configuration.
        DynamicDistributedLogConfiguration dynConf = null;
        if (dynamicLogConfiguration.isPresent()) {
            dynConf = dynamicLogConfiguration.get();
```

### UnusedAssignment
Variable `immediateFlushEnabled` initializer `false` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
    // add confirmed
    private volatile boolean controlFlushNeeded = false;
    private boolean immediateFlushEnabled = false;
    private int minDelayBetweenImmediateFlushMs = 0;
    private Stopwatch lastTransmit;
```

### UnusedAssignment
Variable `future` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
        // writeInternal will always set a count regardless of whether it was
        // incremented or not.
        CompletableFuture<DLSN> future = null;
        try {
            // increment the position for the record to write
```

### UnusedAssignment
Variable `streamWriteLimiter` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java

        // set up a write limiter
        PermitLimiter streamWriteLimiter = null;
        if (conf.getPerWriterOutstandingWriteLimit() < 0) {
            streamWriteLimiter = PermitLimiter.NULL_PERMIT_LIMITER;
```

### UnusedAssignment
Variable `lastTxId` initializer `INVALID_TXID` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
    private DLSN lastDLSN = DLSN.InvalidDLSN;
    private final long startTxId;
    private long lastTxId = INVALID_TXID;
    private long lastTxIdAcknowledged = INVALID_TXID;
    private long outstandingBytes = 0;
```

### UnusedAssignment
Variable `lastTxIdAcknowledged` initializer `INVALID_TXID` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
    private final long startTxId;
    private long lastTxId = INVALID_TXID;
    private long lastTxIdAcknowledged = INVALID_TXID;
    private long outstandingBytes = 0;
    private long numFlushesSinceRestart = 0;
```

### UnusedAssignment
Variable `statsLogger` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/LimitedPermitManager.java`
#### Snippet
```java
        AtomicIntegerFieldUpdater.newUpdater(LimitedPermitManager.class, "epoch");
    volatile int epoch = 0;
    private StatsLogger statsLogger = null;
    private Gauge<Number> outstandingGauge = null;

```

### UnusedAssignment
Variable `outstandingGauge` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/LimitedPermitManager.java`
#### Snippet
```java
    volatile int epoch = 0;
    private StatsLogger statsLogger = null;
    private Gauge<Number> outstandingGauge = null;

    public LimitedPermitManager(int concurrency, int period, TimeUnit timeUnit,
```

### UnusedAssignment
Variable `longPollRead` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
        }
        // switch to new ledger handle if the log segment is moved to completed.
        CacheEntry longPollRead = null;
        synchronized (this) {
            if (isClosed()) {
```

### UnusedAssignment
Variable `nextRequest` initializer `null` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
        long scheduleCountLocal = scheduleCountUpdater.get(this);
        while (true) {
            PendingReadRequest nextRequest = null;
            synchronized (readQueue) {
                nextRequest = readQueue.peek();
```

### UnusedAssignment
Variable `metadataFormatVersion` initializer `0` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/DLMetadata.java`
#### Snippet
```java

    // metadata format version
    private int metadataFormatVersion = 0;
    // underlying dl type
    private String dlType;
```

### UnusedAssignment
Variable `count` initializer `0` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
            DistributedLogManager dlm = getNamespace().openLog(getStreamName());
            try {
                long count = 0;
                if (null == endDLSN) {
                    count = countToLastRecord(dlm);
```

## RuleId[id=OptionalGetWithoutIsPresent]
### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
        Optional<Entry<File, MutableInt>> ledgerDirWithLeastNumofCurrentLogs = writableLedgerDirFrequency.entrySet()
                .stream().min(Map.Entry.comparingByValue());
        return ledgerDirWithLeastNumofCurrentLogs.get().getKey();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKSyncLogReader.java`
#### Snippet
```java
            }
            if (!positioned) {
                if (record.getTransactionId() < startTransactionId.get()) {
                    record = null;
                    continue;
```

## RuleId[id=ConstantValue]
### ConstantValue
Condition `ret < 0` is always `false`
in `stream/distributedlog/protocol/src/main/java/org/apache/distributedlog/LogRecord.java`
#### Snippet
```java
    public int getPositionWithinLogSegment() {
        long ret = (metadata & LOGRECORD_METADATA_POSITION_MASK) >> LOGRECORD_METADATA_POSITION_SHIFT;
        if (ret < 0 || ret > Integer.MAX_VALUE) {
            throw new IllegalArgumentException
                (ret + " position should never exceed max integer value");
```

### ConstantValue
Condition `!(node instanceof InnerNode)` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
                    numOfRacks++;
                }
                if (!(node instanceof InnerNode)) {
                    if (depthOfAllLeaves == -1) {
                        depthOfAllLeaves = node.getLevel();
```

### ConstantValue
Condition `exception instanceof KeeperException.NoNodeException` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
                                    promise.completeExceptionally(new BKException.BKLedgerExistException());
                                }
                            } else if (exception instanceof KeeperException.NoNodeException) {
                                // This is a pretty strange case.  We tried to create the node, found that it
                                // already exists, but failed to find it when we reread it.  It's possible that
```

### ConstantValue
Condition `retry >= 0` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java
                String kinitArgs = "-R";
                int retry = 1;
                while (retry >= 0) {
                    try {
                        if (LOG.isDebugEnabled()) {
```

### ConstantValue
Condition `retry >= 0` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java
            try {
                int retry = 1;
                while (retry >= 0) {
                    try {
                        reLogin();
```

### ConstantValue
Value `inpMsg` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
    } catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw createIOException(fileName, inpMsg, errMsg, exitValue, e);
    } finally {
      process.destroy();
```

### ConstantValue
Value `errMsg` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
    } catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw createIOException(fileName, inpMsg, errMsg, exitValue, e);
    } finally {
      process.destroy();
```

### ConstantValue
Condition `msg instanceof BookieProtocol.Request` is always `false` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestHandler.java`
#### Snippet
```java
    @Override
    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
        if (!(msg instanceof BookkeeperProtocol.Request || msg instanceof BookieProtocol.Request)) {
            ctx.fireChannelRead(msg);
            return;
```

### ConstantValue
Condition `msg instanceof BookkeeperProtocol.Request` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                    ctx.channel().close();
                }
            } else if (msg instanceof BookkeeperProtocol.Request) { // post-PB-client
                BookkeeperProtocol.Request req = (BookkeeperProtocol.Request) msg;
                if (req.getHeader().getOperation() == BookkeeperProtocol.OperationType.AUTH
```

### ConstantValue
Condition `msg instanceof BookieProtocol.Request` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                        waitingForAuth.add(msg);
                    }
                } else if (msg instanceof BookieProtocol.Request) {
                    // let auth messages through, queue the rest
                    BookieProtocol.Request req = (BookieProtocol.Request) msg;
```

### ConstantValue
Condition `msg instanceof ByteBuf` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                        waitingForAuth.add(msg);
                    }
                } else if (msg instanceof ByteBuf || msg instanceof ByteBufList) {
                    waitingForAuth.add(msg);
                } else {
```

### ConstantValue
Condition `msg instanceof ByteBuf || msg instanceof ByteBufList` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                        waitingForAuth.add(msg);
                    }
                } else if (msg instanceof ByteBuf || msg instanceof ByteBufList) {
                    waitingForAuth.add(msg);
                } else {
```

### ConstantValue
Condition `msg instanceof ByteBufList` is always `false` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                        waitingForAuth.add(msg);
                    }
                } else if (msg instanceof ByteBuf || msg instanceof ByteBufList) {
                    waitingForAuth.add(msg);
                } else {
```

### ConstantValue
Condition `msg instanceof BookieProtocol.Response` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                    }
                }
            } else if (msg instanceof BookieProtocol.Response) {
                BookieProtocol.Response resp = (BookieProtocol.Response) msg;
                switch (resp.opCode) {
```

### ConstantValue
Condition `msg instanceof BookkeeperProtocol.Request` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java
            if (msg instanceof ByteBuf || msg instanceof ByteBufList) {
                ctx.write(msg, promise);
            } else if (msg instanceof BookkeeperProtocol.Request) {
                ctx.write(reqV3.encode(msg, ctx.alloc()), promise);
            } else if (msg instanceof BookieProtocol.Request) {
```

### ConstantValue
Condition `msg instanceof BookkeeperProtocol.Response` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java
            if (msg instanceof ByteBuf) {
                ctx.write(msg, promise);
            } else if (msg instanceof BookkeeperProtocol.Response) {
                ctx.write(repV3.encode(msg, ctx.alloc()), promise);
            } else if (msg instanceof BookieProtocol.Response) {
```

### ConstantValue
Condition `result instanceof Response && OperationType.START_TLS == ((Response)...` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java
                        try {
                            result = repV3.decode(buffer);
                            if (result instanceof Response
                                && OperationType.START_TLS == ((Response) result).getHeader().getOperation()) {
                                usingV3Protocol = false;
                                if (LOG.isDebugEnabled()) {
```

### ConstantValue
Condition `flags.ledgerIdFormatter.equals(DEFAULT)` is always `true` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/DeleteLedgerCommand.java`
#### Snippet
```java
        if (null == ledgerIdFormatter && !flags.ledgerIdFormatter.equals(DEFAULT)) {
            this.ledgerIdFormatter = LedgerIdFormatter.newLedgerIdFormatter(flags.ledgerIdFormatter, conf);
        } else if (null == ledgerIdFormatter && flags.ledgerIdFormatter.equals(DEFAULT)) {
            this.ledgerIdFormatter = LedgerIdFormatter.newLedgerIdFormatter(conf);
        }
```

### ConstantValue
Condition `(rangeEndPos == -1) || (entryStartPos <= rangeEndPos)` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java
                         */
                        long entryEndPos = entryStartPos + entrySize + 4 - 1;
                        if (((rangeEndPos == -1) || (entryStartPos <= rangeEndPos)) && (rangeStartPos <= entryEndPos)) {
                            FormatUtil.formatEntry(entryStartPos, entry, printMsg, ledgerIdFormatter, entryFormatter);
                            entryFound.setValue(true);
```

### ConstantValue
Condition `entryStartPos <= rangeEndPos` is always `true` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java
                         */
                        long entryEndPos = entryStartPos + entrySize + 4 - 1;
                        if (((rangeEndPos == -1) || (entryStartPos <= rangeEndPos)) && (rangeStartPos <= entryEndPos)) {
                            FormatUtil.formatEntry(entryStartPos, entry, printMsg, ledgerIdFormatter, entryFormatter);
                            entryFound.setValue(true);
```

### ConstantValue
Condition `admin != null` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookies/DecommissionCommand.java`
#### Snippet
```java
            return false;
        } finally {
            if (admin != null) {
                admin.close();
            }
```

### ConstantValue
Condition `admin != null` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookies/EndpointInfoCommand.java`
#### Snippet
```java
            return false;
        } finally {
            if (admin != null) {
                admin.close();
            }
```

### ConstantValue
Condition `admin != null` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/TriggerAuditCommand.java`
#### Snippet
```java
            admin.triggerAudit();
        } finally {
            if (admin != null) {
                admin.close();
            }
```

### ConstantValue
Condition `admin != null` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/LostBookieRecoveryDelayCommand.java`
#### Snippet
```java
            }
        } finally {
            if (admin != null) {
                admin.close();
            }
```

### ConstantValue
Condition `msg instanceof Response` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
            BookieProtocol.Response response = (BookieProtocol.Response) msg;
            readV2Response(response);
        } else if (msg instanceof Response) {
            Response response = (Response) msg;
            readV3Response(response);
```

### ConstantValue
Value `suspendMajor` is always 'false'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
                    && (!suspendMajor)) {
                // enter major compaction
                LOG.info("Enter major compaction, suspendMajor {}", suspendMajor);
                majorCompacting.set(true);
                try {
```

### ConstantValue
Value `suspendMinor` is always 'false'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
                    && (!suspendMinor)) {
                // enter minor compaction
                LOG.info("Enter minor compaction, suspendMinor {}", suspendMinor);
                minorCompacting.set(true);
                try {
```

### ConstantValue
Value `lep` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
                }
            }
            return lep;
        }

```

### ConstantValue
Condition `removedEntryFromCounterMap != null` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
                        @Override
                        public void onRemoval(RemovalNotification<Long, MutableInt> removedEntryFromCounterMap) {
                            if ((removedEntryFromCounterMap != null)
                                    && (removedEntryFromCounterMap.getValue() != null)) {
                                synchronized (EntryLogsPerLedgerCounter.this) {
```

### ConstantValue
Condition `changed` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
            fc = null;
        }
        if (changed) {
            notifyWatchers(LastAddConfirmedUpdateNotification.FUNC, Long.MAX_VALUE);
        }
```

### ConstantValue
Condition `written <= 0 && size > 0` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
                written += count;
            }
            if (written <= 0 && size > 0) {
                throw new IOException("Copying to new location " + rlocFile + " failed");
            }
```

### ConstantValue
Condition `size > 0` is always `false` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
                written += count;
            }
            if (written <= 0 && size > 0) {
                throw new IOException("Copying to new location " + rlocFile + " failed");
            }
```

### ConstantValue
Value `retLac` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
            }
        }
        return retLac;
    }

```

### ConstantValue
Value `retLac` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/TransientLedgerInfo.java`
#### Snippet
```java
            }
        }
        return retLac;
    }

```

### ConstantValue
Condition `BKException.Code.OK != rc` is always `true` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingReadLacOp.java`
#### Snippet
```java
        }

        if (!heardValidResponse && BKException.Code.OK != rc) {
            lastSeenError = rc;
        }
```

### ConstantValue
Value `dryrun` is always 'false'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
                            bkc.mainWorkerPool.submit(() -> {
                                // do recovery
                                recoverLedger(bookiesSrc, lId, dryrun, skipOpenLedgers,
                                    skipUnrecoverableLedgers, finalLedgerIterCb);
                            });
```

### ConstantValue
Condition `this == o` is always `false`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingAddOp.java`
#### Snippet
```java
           return (this.entryId == ((PendingAddOp) o).entryId);
       }
       return (this == o);
    }

```

### ConstantValue
Condition `!completed` is always `true` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingAddOp.java`
#### Snippet
```java
        }

        if (ackQuorum && !completed) {
            if (clientCtx.getConf().enforceMinNumFaultDomainsForWrite
                && !(clientCtx.getPlacementPolicy()
```

### ConstantValue
Condition `!all` is always `true`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListDiskFilesService.java`
#### Snippet
```java
            boolean all = false;

            if (!journal && !entrylog && !index && !all) {
                all = true;
            }
```

### ConstantValue
Condition `null == myMap` is always `false` when reached
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
        }

        if (!isLegalCursor || null == myMap) {
            return new Result<MetastoreCursor>(Code.IllegalOp, null);
        }
```

### ConstantValue
Value `ke` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationException.java`
#### Snippet
```java
    public static UnavailableException fromKeeperException(String message, KeeperException ke) {
        if (ke instanceof KeeperException.ConnectionLossException
                || ke instanceof KeeperException.SessionExpiredException) {
            return new NonRecoverableReplicationException(message, ke);
        }
```

### ConstantValue
Value `ke` is always 'null'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationException.java`
#### Snippet
```java
            return new NonRecoverableReplicationException(message, ke);
        }
        return new UnavailableException(message, ke);
    }

```

### ConstantValue
Value `recursive` is always 'true'
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLFileSystem.java`
#### Snippet
```java
                    String child = logs.next();
                    Path childPath = new Path(path, child);
                    delete(childPath, recursive);
                }
            }
```

### ConstantValue
Condition `e instanceof KeeperException.NodeExistsException` is always `true`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/cluster/ZkClusterMetadataStore.java`
#### Snippet
```java
            return true;
        } catch (Exception e) {
            if (e instanceof KeeperException.NodeExistsException) {
                // the cluster already exists.
                log.info("Stream storage cluster is already initialized.");
```

### ConstantValue
Condition `c > '\u0000'` is always `true`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java
                || c == '<'
                || c == '>'
                || c > '\u0000' && c < '\u001f'
                || c > '\u007f' && c < '\u009f'
                || c > '\ud800' && c < '\uf8ff'
```

### ConstantValue
Condition `t instanceof InterruptedException` is always `false`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SingleThreadExecutor.java`
#### Snippet
```java
            tasksCompleted.increment();
        } catch (Throwable t) {
            if (t instanceof InterruptedException) {
                Thread.currentThread().interrupt();
                return false;
```

### ConstantValue
Condition `size() == 0` is always `true`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/GrowableMpScArrayConsumerBlockingQueue.java`
#### Snippet
```java

            // Double check that size has not changed after we have registered ourselves for notification
            if (size() == 0) {
                LockSupport.park();
                if (Thread.interrupted()) {
```

### ConstantValue
Condition `version >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (2 == version);

```

### ConstantValue
Condition `version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (2 == version);

```

### ConstantValue
Condition `version <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (2 == version);

```

### ConstantValue
Condition `regionId >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `regionId >= 0 && regionId <= 0xf` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `regionId <= 0xf` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `status >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 4) {
```

### ConstantValue
Condition `status >= 0 && status <= METADATA_STATUS_BIT_MAX` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 4) {
```

### ConstantValue
Condition `status <= METADATA_STATUS_BIT_MAX` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 4) {
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 8) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 8) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 8) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `version >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (1 == version);

```

### ConstantValue
Condition `version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (1 == version);

```

### ConstantValue
Condition `version <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (1 == version);

```

### ConstantValue
Condition `regionId <= 0xf` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) (versionStatusCount & REGION_MASK) >> REGION_SHIFT;
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `status >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 3) {
```

### ConstantValue
Condition `status >= 0 && status <= METADATA_STATUS_BIT_MAX` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 3) {
```

### ConstantValue
Condition `status <= METADATA_STATUS_BIT_MAX` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 3) {
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 5) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 5) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 5) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `version >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (LogSegmentMetadataVersion.VERSION_V3_MIN_ACTIVE_DLSN.value <= version
                && LogSegmentMetadataVersion.VERSION_V4_ENVELOPED_ENTRIES.value >= version);
```

### ConstantValue
Condition `version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (LogSegmentMetadataVersion.VERSION_V3_MIN_ACTIVE_DLSN.value <= version
                && LogSegmentMetadataVersion.VERSION_V4_ENVELOPED_ENTRIES.value >= version);
```

### ConstantValue
Condition `version <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (LogSegmentMetadataVersion.VERSION_V3_MIN_ACTIVE_DLSN.value <= version
                && LogSegmentMetadataVersion.VERSION_V4_ENVELOPED_ENTRIES.value >= version);
```

### ConstantValue
Condition `regionId >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `regionId >= 0 && regionId <= 0xf` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `regionId <= 0xf` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `status >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 6) {
```

### ConstantValue
Condition `status >= 0 && status <= METADATA_STATUS_BIT_MAX` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 6) {
```

### ConstantValue
Condition `status <= METADATA_STATUS_BIT_MAX` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 6) {
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 10) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 10) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 10) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `version >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (LogSegmentMetadataVersion.VERSION_V5_SEQUENCE_ID.value <= version
                && LogSegmentMetadata.LEDGER_METADATA_CURRENT_LAYOUT_VERSION >= version);
```

### ConstantValue
Condition `version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (LogSegmentMetadataVersion.VERSION_V5_SEQUENCE_ID.value <= version
                && LogSegmentMetadata.LEDGER_METADATA_CURRENT_LAYOUT_VERSION >= version);
```

### ConstantValue
Condition `version <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long version = versionStatusCount & METADATA_VERSION_MASK;
        assert (version >= Integer.MIN_VALUE && version <= Integer.MAX_VALUE);
        assert (LogSegmentMetadataVersion.VERSION_V5_SEQUENCE_ID.value <= version
                && LogSegmentMetadata.LEDGER_METADATA_CURRENT_LAYOUT_VERSION >= version);
```

### ConstantValue
Condition `regionId >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `regionId >= 0 && regionId <= 0xf` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `regionId <= 0xf` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
```

### ConstantValue
Condition `status >= 0` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 7) {
```

### ConstantValue
Condition `status >= 0 && status <= METADATA_STATUS_BIT_MAX` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 7) {
```

### ConstantValue
Condition `status <= METADATA_STATUS_BIT_MAX` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);

        if (parts.length == 7) {
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 11) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 11) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Condition `recordCount <= Integer.MAX_VALUE` is always `true` when reached
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        } else if (parts.length == 11) {
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
```

### ConstantValue
Value `this.enablePermits` is always 'false'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/LimitedPermitManager.java`
#### Snippet
```java
        if (epoch == ((EpochPermit) permit).getEpoch()) {
            this.enablePermits = false;
            LOG.info("EnablePermits = {}, Epoch = {}.", this.enablePermits, epoch);
            return true;
        } else {
```

### ConstantValue
Value `abort` is always 'false'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
                @Override
                public void onSuccess(Long value) {
                    abortTransmitPacketOnClose(abort, throwExc, closePromise);
                }

```

### ConstantValue
Value `abort` is always 'false'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
                public void onFailure(Throwable cause) {
                    throwExc.setValue(cause);
                    abortTransmitPacketOnClose(abort, throwExc, closePromise);
                }
            });
```

### ConstantValue
Condition `null != allocator` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
                    writerBKC,
                    scheduler);
            if (null != allocator) {
                allocator.start();
            }
```

### ConstantValue
Condition `t instanceof ZKException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
                if (t instanceof KeeperException) {
                    kc = ((KeeperException) t).code();
                } else if (t instanceof ZKException) {
                    kc = ((ZKException) t).getKeeperExceptionCode();
                } else {
```

### ConstantValue
Value `t` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
                if (t instanceof KeeperException) {
                    kc = ((KeeperException) t).code();
                } else if (t instanceof ZKException) {
                    kc = ((ZKException) t).getKeeperExceptionCode();
                } else {
```

### ConstantValue
Value `t` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
                    kc = ((ZKException) t).getKeeperExceptionCode();
                } else {
                    abortListener(t);
                    return;
                }
```

### ConstantValue
Condition `cause instanceof ZKAccessControl.CorruptedAccessControlException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                                        if (cause instanceof KeeperException.NoNodeException) {
                                            streamEntries.remove(streamName);
                                        } else if (cause instanceof ZKAccessControl.CorruptedAccessControlException) {
                                            logger.warn("Access control is corrupted for stream {} @ {},skipped it ...",
                                                streamName, zkRootPath, cause);
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                                        if (cause instanceof KeeperException.NoNodeException) {
                                            streamEntries.remove(streamName);
                                        } else if (cause instanceof ZKAccessControl.CorruptedAccessControlException) {
                                            logger.warn("Access control is corrupted for stream {} @ {},skipped it ...",
                                                streamName, zkRootPath, cause);
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                                        } else {
                                            if (1 == numFailures.incrementAndGet()) {
                                                promise.completeExceptionally(cause);
                                            }
                                        }
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                        createDefaultAccessControlEntryIfNeeded(promise);
                    } else {
                        promise.completeExceptionally(cause);
                    }
                }
```

### ConstantValue
Condition `t instanceof KeeperException` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                throw new DLInterruptedException("Interrupted on getting default access control entry for "
                        + zkRootPath, t);
            } else if (t instanceof KeeperException) {
                throw new IOException("Encountered zookeeper exception on getting default access control entry for "
                        + zkRootPath, t);
```

### ConstantValue
Condition `t instanceof KeeperException` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
            if (t instanceof InterruptedException) {
                throw new DLInterruptedException("Interrupted on getting access control entries for " + zkRootPath, t);
            } else if (t instanceof KeeperException) {
                throw new IOException("Encountered zookeeper exception on getting access control entries for "
                        + zkRootPath, t);
```

### ConstantValue
Value `op` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/metadata/ZKLogStreamMetadataStore.java`
#### Snippet
```java
                    Create create = (Create) op;
                    LOG.debug("op : create {}", create.getPath());
                } else if (op instanceof Delete) {
                    Delete delete = (Delete) op;
                    LOG.debug("op : delete {}, record = {}", delete.getPath(), op.toRequestRecord());
```

### ConstantValue
Value `op` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/metadata/ZKLogStreamMetadataStore.java`
#### Snippet
```java
                    LOG.debug("op : delete {}, record = {}", delete.getPath(), op.toRequestRecord());
                } else {
                    LOG.debug("op : {}", op);
                }
            }
```

### ConstantValue
Value `createIfNull` is always 'true'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/metadata/ZKLogStreamMetadataStore.java`
#### Snippet
```java
                    zooKeeperClient,
                    clientId,
                    getLockStateExecutor(createIfNull),
                    conf.getZKNumRetries(),
                    conf.getLockTimeoutMilliSeconds(),
```

### ConstantValue
Condition `c > '\u0000'` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/DLUtils.java`
#### Snippet
```java
                            break;
                        }
                    } else if (c > '\u0000' && c < '\u001f'
                        || c > '\u007f' && c < '\u009F'
                        || c > '\ud800' && c < '\uf8ff'
```

### ConstantValue
Condition `cause instanceof BKException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
                } else if (cause instanceof BKException) {
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
                } else if (cause instanceof BKException) {
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
```

### ConstantValue
Condition `cause instanceof InterruptedException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
                } else if (cause instanceof InterruptedException) {
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
                } else if (cause instanceof InterruptedException) {
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
                    return new IOException("Encountered exception on waiting result", cause);
                }
            });
```

### ConstantValue
Condition `throwable instanceof ZooKeeperClient.ZooKeeperConnectionException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        if (throwable instanceof KeeperException) {
            return new ZKException("Encountered zookeeper exception on " + path, (KeeperException) throwable);
        } else if (throwable instanceof ZooKeeperClient.ZooKeeperConnectionException) {
            return new ZKException("Encountered zookeeper connection loss on " + path,
                    KeeperException.Code.CONNECTIONLOSS);
```

### ConstantValue
Value `throwable` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        if (throwable instanceof KeeperException) {
            return new ZKException("Encountered zookeeper exception on " + path, (KeeperException) throwable);
        } else if (throwable instanceof ZooKeeperClient.ZooKeeperConnectionException) {
            return new ZKException("Encountered zookeeper connection loss on " + path,
                    KeeperException.Code.CONNECTIONLOSS);
```

### ConstantValue
Condition `throwable instanceof InterruptedException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
            return new ZKException("Encountered zookeeper connection loss on " + path,
                    KeeperException.Code.CONNECTIONLOSS);
        } else if (throwable instanceof InterruptedException) {
            return new DLInterruptedException("Interrupted on operating " + path, throwable);
        } else {
```

### ConstantValue
Value `throwable` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
            return new ZKException("Encountered zookeeper connection loss on " + path,
                    KeeperException.Code.CONNECTIONLOSS);
        } else if (throwable instanceof InterruptedException) {
            return new DLInterruptedException("Interrupted on operating " + path, throwable);
        } else {
```

### ConstantValue
Value `throwable` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
            return new DLInterruptedException("Interrupted on operating " + path, throwable);
        } else {
            return new UnexpectedException("Encountered unexpected exception on operatiing " + path, throwable);
        }
    }
```

### ConstantValue
Condition `cause instanceof BKException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
                } else if (cause instanceof BKException) {
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
                } else if (cause instanceof BKException) {
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
```

### ConstantValue
Condition `cause instanceof InterruptedException` is always `false`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
                } else if (cause instanceof InterruptedException) {
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
                } else if (cause instanceof InterruptedException) {
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
```

### ConstantValue
Value `cause` is always 'null'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
                    return new IOException("Encountered exception on waiting result", cause);
                }
            },
```

### ConstantValue
Value `wait` is always 'true'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
        final boolean wait = DistributedLogConstants.LOCK_IMMEDIATE != timeout;
        if (wait) {
            asyncTryLock(wait, result);
        } else {
            // try to check locks first
```

### ConstantValue
Value `wait` is always 'false'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
                                    }, lockStateExecutor.chooseThread(lockPath));
                        } else {
                            asyncTryLock(wait, result);
                        }
                    });
```

### ConstantValue
Condition `args.length >= 1` is always `true`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
                throw new ParseException("Must specify at least start dlsn.");
            }
            if (args.length >= 1) {
                startDLSN = parseDLSN(args[0]);
            }
```

## RuleId[id=NonAtomicOperationOnVolatileField]
### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
                        if (filter.test(storedKey, storedValue)) {
                            // Removing item
                            --size;
                            ++removedCount;

```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
                        if (storedValue == EmptyValue) {
                            values[bucket] = value != null ? value : valueProvider.apply(key);
                            ++size;
                            ++usedBuckets;
                            return valueProvider != null ? values[bucket] : null;
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
                        } else if (storedValue == DeletedValue) {
                            values[bucket] = value != null ? value : valueProvider.apply(key);
                            ++size;
                            return valueProvider != null ? values[bucket] : null;
                        } else if (!onlyIfAbsent) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
                        keys[bucket] = key;
                        values[bucket] = value != null ? value : valueProvider.apply(key);
                        ++size;
                        return valueProvider != null ? values[bucket] : null;
                    } else if (storedValue == DeletedValue) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
                            }

                            --size;
                            V nextValueInArray = values[signSafeMod(bucket + 1, capacity)];
                            if (nextValueInArray == EmptyValue) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashSet.java`
#### Snippet
```java

                        values[bucket] = value;
                        ++size;
                        return true;
                    } else if (storedValue == DeletedValue) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashSet.java`
#### Snippet
```java
                    V storedValue = values[bucket];
                    if (value.equals(storedValue)) {
                        --size;

                        int nextInArray = signSafeMod(bucket + 1, capacity);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java
                        if (filter.test(storedKey, storedValue)) {
                            // Removing item
                            --size;
                            ++removedCount;
                            cleanBucket(bucket);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java
                        table[bucket] = key;
                        table[bucket + 1] = value;
                        ++size;
                        return valueProvider != null ? value : null;
                    } else if (storedKey == DeletedKey) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java
                    if (key.equals(storedKey)) {
                        if (value == null || value.equals(storedValue)) {
                            --size;
                            cleanBucket(bucket);
                            return storedValue;
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
                    if (key == storedKey) {
                        if (value == ValueNotFound || value == storedValue) {
                            --size;

                            cleanBucket(bucket);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
                        table[bucket] = key;
                        table[bucket + 1] = value;
                        ++size;
                        return valueProvider != null ? value : ValueNotFound;
                    } else if (storedKey == DeletedKey) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
                        if (filter.test(storedKey, storedValue)) {
                            // Removing item
                            --size;
                            ++removedCount;
                            cleanBucket(bucket);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
                        if (filter.test(storedKey)) {
                            // Removing item
                            --size;
                            ++removedCount;
                            cleanBucket(bucket);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
                            table[bucket] = key;
                            table[bucket + 1] = newValue;
                            ++size;
                            return true;
                        } else {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
                        table[bucket] = key;
                        table[bucket + 1] = delta;
                        ++size;
                        return delta;
                    } else if (storedKey == DeletedKey) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java

                        table[bucket] = item;
                        ++size;
                        return true;
                    } else if (storedItem == DeletedItem) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
                    long storedItem = table[bucket];
                    if (item == storedItem) {
                        --size;

                        cleanBucket(bucket);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
                        table[bucket + 2] = value1;
                        table[bucket + 3] = value2;
                        ++size;
                        return true;
                    } else if (storedKey1 == DeletedKey) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `size`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
                    if (key1 == storedKey1 && key2 == storedKey2) {
                        if (value1 == ValueNotFound || (value1 == storedValue1 && value2 == storedValue2)) {
                            --size;

                            cleanBucket(bucket);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `endEntryToRead`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerRecoveryOp.java`
#### Snippet
```java
        if (!promise.isDone()) {
            startEntryToRead = endEntryToRead + 1;
            endEntryToRead = endEntryToRead + clientCtx.getConf().recoveryReadBatchSize;
            new RecoveryReadOp(lh, clientCtx, startEntryToRead, endEntryToRead, this, null)
                .initiate();
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `auditTask`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
                    LOG.info("lostBookieRecoveryDelay has been set to {}, so rescheduling AuditTask accordingly",
                            lostBookieRecoveryDelay);
                    auditTask = executor.schedule(() -> {
                        auditorBookieCheckTask.startAudit(false);
                        auditTask = null;
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `auditTask`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
                if (auditTask == null) {
                    // if there is no scheduled audit, schedule one
                    auditTask = executor.schedule(() -> {
                        auditorBookieCheckTask.startAudit(false);
                        auditTask = null;
```

## RuleId[id=StringConcatenationInsideStringBufferAppend]
### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorReplicasCheckTask.java`
#### Snippet
```java
            List<MissingEntriesInfo> missingBookiesInfoList = ledgerWithUnavailableBookiesInfo.getValue()
                    .getMissingEntriesInfoList();
            errMessage.append("Ledger : " + ledgerWithUnavailableBookies + " has following unavailable bookies : ");
            for (int listInd = 0; listInd < missingBookiesInfoList.size(); listInd++) {
                MissingEntriesInfo missingBookieInfo = missingBookiesInfoList.get(listInd);
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorReplicasCheckTask.java`
#### Snippet
```java
                Entry<Long, ? extends List<BookieId>> segmentEnsemble =
                        missingBookieInfo.getSegmentEnsemble();
                errMessage.append("In segment starting at " + segmentEnsemble.getKey() + " with ensemble "
                        + segmentEnsemble.getValue() + ", following bookie has not responded "
                        + missingBookieInfo.getBookieMissingEntries());
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorReplicasCheckTask.java`
#### Snippet
```java
            writeQuorumSize = missingEntriesInfoOfLedger.getWriteQuorumSize();
            ackQuorumSize = missingEntriesInfoOfLedger.getAckQuorumSize();
            errMessage.append("Ledger : " + ledgerWithMissingEntries + " has following missing entries : ");
            for (int listInd = 0; listInd < missingEntriesInfoList.size(); listInd++) {
                MissingEntriesInfo missingEntriesInfo = missingEntriesInfoList.get(listInd);
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorReplicasCheckTask.java`
#### Snippet
```java
                        missingEntriesInfo.getSegmentEnsemble();
                missingEntries.addAll(unavailableEntriesList);
                errMessage.append("In segment starting at " + segmentEnsemble.getKey() + " with ensemble "
                        + segmentEnsemble.getValue() + ", following entries " + unavailableEntriesList
                        + " are missing in bookie: " + missingEntriesInfo.getBookieMissingEntries());
```

## RuleId[id=RedundantOperationOnEmptyContainer]
### RedundantOperationOnEmptyContainer
Array `tmpArray` is always empty
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
    static {
        long[] tmpArray = {};
        EMPTY_AVAILABILITYOFENTRIESOFLEDGER = new AvailabilityOfEntriesOfLedger(Arrays.stream(tmpArray).iterator());
    }

```

### RedundantOperationOnEmptyContainer
Collection `streams` is always empty
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogMetadataStore.java`
#### Snippet
```java
                                } else if (KeeperException.Code.NONODE.intValue() == rc) {
                                    List<String> streams = Lists.newLinkedList();
                                    promise.complete(streams.iterator());
                                } else {
                                    promise.completeExceptionally(new ZKException("Error reading namespace "
```

### RedundantOperationOnEmptyContainer
Collection `streams` is always empty
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogMetadataStore.java`
#### Snippet
```java
                    } else if (KeeperException.Code.NONODE.intValue() == syncRc) {
                        List<String> streams = Lists.newLinkedList();
                        promise.complete(streams.iterator());
                    } else {
                        promise.completeExceptionally(new ZKException("Error reading namespace " + nsRootPath,
```

## RuleId[id=OptionalIsPresent]
### OptionalIsPresent
Can be replaced with single expression in functional style
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
        if (data.hasCtime()) {
            builder.storingCreationTime(true);
        } else if (metadataStoreCtime.isPresent()) {
            builder.withCreationTime(metadataStoreCtime.get()).storingCreationTime(false);
        }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
            // 'storingCreationTime' is only ever taken into account for serializing version 2
            builder.storingCreationTime(true);
        } else if (metadataStoreCtime.isPresent()) {
            builder.withCreationTime(metadataStoreCtime.get()).storingCreationTime(false);
        }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/LongPollReadEntryProcessorV3.java`
#### Snippet
```java
                    entryId = previousLAC + 1;
                    readResponseBuilder.setMaxLAC(knownLAC);
                    if (lastAddConfirmedUpdateTime.isPresent()) {
                        readResponseBuilder.setLacUpdateTimestamp(lastAddConfirmedUpdateTime.get());
                    }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
     */
    default int getStickyReadBookieIndex(LedgerMetadata metadata, Optional<Integer> currentStickyBookieIndex) {
        if (!currentStickyBookieIndex.isPresent()) {
            // Pick one bookie randomly from the current ensemble as the initial
            // "sticky bookie"
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
        // bookies to exclude for ensemble allocation
        Set<BookieId> bookiesToExclude = Sets.newHashSet();
        if (excludedBookies.isPresent()) {
            bookiesToExclude.addAll(excludedBookies.get());
        }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
        // If dynamic config was not provided, default to a static view of the global configuration.
        DynamicDistributedLogConfiguration dynConf = null;
        if (dynamicLogConfiguration.isPresent()) {
            dynConf = dynamicLogConfiguration.get();
        } else {
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
                BKDistributedLogManager.this,
                scheduler,
                fromDLSN.isPresent() ? fromDLSN.get() : DLSN.InitialDLSN,
                subscriberId,
                false,
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
        }
        return postStateCheck(fetchLogLocation(logName).thenApply((uriOptional) -> {
            if (uriOptional.isPresent()) {
                log2Locations.putIfAbsent(logName, uriOptional.get());
            }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/LogMetadataForReader.java`
#### Snippet
```java
     */
    public String getReadLockPath(Optional<String> subscriberId) {
        if (subscriberId.isPresent()) {
            return logRootPath + SUBSCRIBERS_PATH + "/" + subscriberId.get() + READ_LOCK_PATH;
        } else {
```

## RuleId[id=RedundantLengthCheck]
### RedundantLengthCheck
Redundant array length check
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
                if (dir.exists() && dir.isDirectory()) {
                    File[] files = dir.listFiles(file -> file.getName().endsWith(".log"));
                    if (files != null && files.length > 0) {
                        for (File f : files) {
                            long logId = fileName2LogId(f.getName());
```

### RedundantLengthCheck
Redundant array length check
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/EntryLogIdsImpl.java`
#### Snippet
```java
        if (directory.exists() && directory.isDirectory()) {
            File[] files = directory.listFiles();
            if (files != null && files.length > 0) {
                for (File f : files) {
                    Matcher m = FILE_PATTERN.matcher(f.getName());
```

### RedundantLengthCheck
Redundant array length check
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/EntryLogIdsImpl.java`
#### Snippet
```java
        if (directory.exists() && directory.isDirectory()) {
            File[] files = directory.listFiles();
            if (files != null && files.length > 0) {
                for (File f : files) {
                    Matcher m = COMPACTED_FILE_PATTERN.matcher(f.getName());
```

### RedundantLengthCheck
Redundant array length check
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java
        if (ledgerDir.exists() && ledgerDir.isDirectory()) {
            File[] files = ledgerDir.listFiles();
            if (files != null && files.length > 0) {
                for (File f : files) {
                    if (f.getName().endsWith(COMPACTING_SUFFIX)) {
```

## RuleId[id=UNCHECKED_WARNING]
### UNCHECKED_WARNING
Unchecked method 'build(CacheLoader)' invocation
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
            this.entryLogsPerLedger = statsLogger.getOpStatsLogger(ENTRYLOGS_PER_LEDGER);

            ledgerIdEntryLogCounterCacheMap = CacheBuilder.newBuilder()
                    .expireAfterAccess(entrylogMapAccessExpiryTimeInSeconds * entryLogPerLedgerCounterLimitsMultFactor,
                            TimeUnit.SECONDS)
                    .maximumSize(maximumNumberOfActiveEntryLogs * entryLogPerLedgerCounterLimitsMultFactor)
                    .removalListener(new RemovalListener<Long, MutableInt>() {
                        @Override
                        public void onRemoval(RemovalNotification<Long, MutableInt> removedEntryFromCounterMap) {
                            if ((removedEntryFromCounterMap != null)
                                    && (removedEntryFromCounterMap.getValue() != null)) {
                                synchronized (EntryLogsPerLedgerCounter.this) {
                                    entryLogsPerLedger
                                            .registerSuccessfulValue(removedEntryFromCounterMap.getValue().intValue());
                                }
                            }
                        }
                    }).build(new CacheLoader<Long, MutableInt>() {
                        @Override
                        public MutableInt load(Long key) throws Exception {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.TreeSet' to 'java.util.TreeSet\>\>'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/DefaultStorageContainerController.java`
#### Snippet
```java
        // 5. use an ordered set as priority deque to sort the servers by the number of assigned containers
        TreeSet<Pair<BookieId, LinkedList<Long>>> assignmentQueue =
            new TreeSet<>(new ServerAssignmentDataComparator());
        for (Map.Entry<BookieId, Set<Long>> entry : currentServerAssignments.entrySet()) {
            BookieId host = entry.getKey();
```

### UNCHECKED_WARNING
Unchecked call to 'TreeSet(Comparator)' as a member of raw type 'java.util.TreeSet'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/DefaultStorageContainerController.java`
#### Snippet
```java
        // 5. use an ordered set as priority deque to sort the servers by the number of assigned containers
        TreeSet<Pair<BookieId, LinkedList<Long>>> assignmentQueue =
            new TreeSet<>(new ServerAssignmentDataComparator());
        for (Map.Entry<BookieId, Set<Long>> entry : currentServerAssignments.entrySet()) {
            BookieId host = entry.getKey();
```

### UNCHECKED_WARNING
Unchecked call to 'put(T)' as a member of raw type 'org.apache.bookkeeper.common.collections.BatchedArrayBlockingQueue'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
    @Benchmark
    public void batchAwareArrayBlockingQueueSingleEnqueue(TestState s) throws Exception {
        s.batchedArrayBlockingQueue.put(1);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'put(E)' as a member of raw type 'java.util.concurrent.ArrayBlockingQueue'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
    @Benchmark
    public void arrayBlockingQueue(TestState s) throws Exception {
        s.arrayBlockingQueue.put(1);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'drainTo(Collection)' as a member of raw type 'java.util.concurrent.ArrayBlockingQueue'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
            try {
                while (true) {
                    arrayBlockingQueue.drainTo(localList);
                    if (localList.isEmpty()) {
                        arrayBlockingQueue.take();
```

### UNCHECKED_WARNING
Unchecked call to 'takeAll(T\[\])' as a member of raw type 'org.apache.bookkeeper.common.collections.BatchedArrayBlockingQueue'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
            try {
                while (true) {
                    batchedArrayBlockingQueue.takeAll(localArray);
                }
            } catch (InterruptedException ie) {
```

### UNCHECKED_WARNING
Unchecked call to 'putAll(T\[\], int, int)' as a member of raw type 'org.apache.bookkeeper.common.collections.BatchedArrayBlockingQueue'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
    @OperationsPerInvocation(1000)
    public void batchAwareArrayBlockingQueueBatch(TestState s) throws Exception {
        s.batchedArrayBlockingQueue.putAll(s.batchArray, 0, 1000);
    }
}
```

## RuleId[id=DoubleNegation]
### DoubleNegation
Double negation in `response.isSucceeded() != (Version.NEW != cookieData.getVersion())`
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdRegistrationManager.java`
#### Snippet
```java
        }
        TxnResponse response = msResult(txn.commit());
        if (response.isSucceeded() != (Version.NEW != cookieData.getVersion())) {
            throw new MetadataStoreException(
                "Conflict on writing cookie for bookie " + bookieId);
```

## RuleId[id=JavadocReference]
### JavadocReference
Cannot resolve symbol `https`
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/DLNamespaceProviderService.java`
#### Snippet
```java
 * A service to provide distributedlog namespace.
 *
 * <p>TODO: eliminate the direct usage of zookeeper here {@link https://github.com/apache/bookkeeper/issues/1331}
 */
@Slf4j
```

### JavadocReference
Cannot resolve symbol `https`
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
     * The benchmark is assuming zookeeper based metadata service.
     *
     * <p>TODO: update benchmark to use metadata service uri {@link https://github.com/apache/bookkeeper/issues/1331}
     */
    private static long warmUp(byte[] data, int ledgers, int ensemble, int qSize,
```

### JavadocReference
Cannot resolve symbol `BKException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerIdGenerator.java`
#### Snippet
```java
     * @param cb
     *            Callback when a new ledger id is generated, return code:<ul>
     *            <li>{@link BKException.Code.OK} if success</li>
     *            <li>{@link BKException.Code.ZKException} when can't generate new ledger id</li>
     *            </ul>
```

### JavadocReference
Cannot resolve symbol `BKException.Code.ZKException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerIdGenerator.java`
#### Snippet
```java
     *            Callback when a new ledger id is generated, return code:<ul>
     *            <li>{@link BKException.Code.OK} if success</li>
     *            <li>{@link BKException.Code.ZKException} when can't generate new ledger id</li>
     *            </ul>
     */
```

### JavadocReference
Cannot resolve symbol `createLongLedgerIdPathAndGenerateLongLedgerId`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
     * find out. If it previously checked in zk, it returns that value. This value changes when we run out
     * of ids < Integer.MAX_VALUE, and try to create the long ledger id gen path.
     * @see createLongLedgerIdPathAndGenerateLongLedgerId
     * @param zk
     * @return Does the long ledger id gen path exist?
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
     * @param zk
     * @return Does the long ledger id gen path exist?
     * @throws KeeperException
     * @throws InterruptedException
     */
```

### JavadocReference
Cannot resolve symbol `Auditor`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
    /**
     * Resuming ledger replication. This will allow ledger replication
     * {@link #Auditor} and {@link #getLedgerToRereplicate()} tasks to continue.
     */
    void enableLedgerReplication()
```

### JavadocReference
Cannot resolve symbol `Auditor`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Stop ledger replication. Currently running ledger rereplication tasks
     * will be continued and will be stopped from next task. This will block
     * ledger replication {@link #Auditor} and {@link #getLedgerToRereplicate()}
     * tasks.
     */
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java`
#### Snippet
```java
     *          Layout manager
     * @throws IOException
     * @throws KeeperException
     * @throws InterruptedException
     */
```

### JavadocReference
Cannot resolve symbol `login(String)`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java

    /**
     * Re-login a principal. This method assumes that {@link #login(String)} has happened already.
     *
     * @throws javax.security.auth.login.LoginException on a failure
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZkUtils.java`
#### Snippet
```java
     * @param createMode
     *            - Create mode of zk path
     * @throws KeeperException
     *             if the server returns a non-zero error code, or invalid ACL
     * @throws InterruptedException
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZkUtils.java`
#### Snippet
```java
     * Asynchronously create zookeeper path recursively and optimistically.
     *
     * @see #createFullPathOptimistic(ZooKeeper, String, byte[], List, CreateMode)
     *
     * @param zk
```

### JavadocReference
Cannot resolve symbol `CreateMode`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZkUtils.java`
#### Snippet
```java
     * Asynchronously create zookeeper path recursively and optimistically.
     *
     * @see #createFullPathOptimistic(ZooKeeper, String, byte[], List, CreateMode)
     *
     * @param zk
```

### JavadocReference
Cannot resolve symbol `longHierarchicalLedgerPaths`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     * Parse the long hierarchical ledger path to its ledger id.
     *
     * @param longHierarchicalLedgerPaths
     * @return the ledger id
     * @throws IOException
```

### JavadocReference
Cannot resolve symbol `org.apache.bookkeeper.proto.BookkeeperProtocol.GetBookieInfoRequest`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClient.java`
#### Snippet
```java
     * @param address the address of the bookie to request information from
     * @param requested a bitset specifying which pieces of information to request
     *                  {@link org.apache.bookkeeper.proto.BookkeeperProtocol.GetBookieInfoRequest}
     * @param cb the callback notified when the request completes
     * @param ctx a context object passed to the callback on completion
```

### JavadocReference
Cannot resolve symbol `BKException.Code.UNINITIALIZED`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
    /**
     * @param status
     * @return {@link BKException.Code.UNINITIALIZED} if the statuscode is unknown.
     */
    private int statusCodeToExceptionCode(StatusCode status) {
```

### JavadocReference
Symbol `org.apache.bookkeeper.bookie.IndexInMemPageMgr` is inaccessible from here
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/stats/IndexInMemPageMgrStats.java`
#### Snippet
```java

/**
 * A umbrella class for {@link org.apache.bookkeeper.bookie.IndexInMemPageMgr} stats.
 */
@StatsDoc(
```

### JavadocReference
Cannot resolve symbol `LedgerData`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex.java`
#### Snippet
```java
 * Maintains an index for the ledgers metadata.
 *
 * <p>The key is the ledgerId and the value is the {@link LedgerData} content.
 */
public class LedgerMetadataIndex implements Closeable {
```

### JavadocReference
Cannot resolve symbol `LedgerIndexPage`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/EntryLocationIndex.java`
#### Snippet
```java
 *
 * <p>For each ledger multiple entries are stored in the same "record", represented
 * by the {@link LedgerIndexPage} class.
 */
public class EntryLocationIndex implements Closeable {
```

### JavadocReference
Cannot resolve symbol `key`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
     * Remove an existing entry if found.
     *
     * @param key
     * @return the value associated with the key or -1 if key was not present
     */
```

### JavadocReference
Cannot resolve symbol `key`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
    /**
     *
     * @param key
     * @return the value or -1 if the key was not present
     */
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws CompatibilityException
     * @throws UnavailableException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws IOException
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *          current lostBookieRecoveryDelay value (in seconds)
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *                              lostBookieRecoveryDelay value (in seconds) to set
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
```

### JavadocReference
Cannot resolve symbol `Version.ANY`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     *
     * <p>The key is removed only when the version matches its current version.
     * If <code>version</code> is {@link Version.ANY}, the key would be removed directly.
     *
     * <p>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <p>
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.NoKey}: if the key doesn't exist.</li>
     * <li>{@link MSException.Code.BadVersion}: failed to delete the key due to bad version</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.NoKey`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.NoKey}: if the key doesn't exist.</li>
     * <li>{@link MSException.Code.BadVersion}: failed to delete the key due to bad version</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.BadVersion`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.NoKey}: if the key doesn't exist.</li>
     * <li>{@link MSException.Code.BadVersion}: failed to delete the key due to bad version</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.NoKey}: if the key doesn't exist.</li>
     * <li>{@link MSException.Code.BadVersion}: failed to delete the key due to bad version</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.NoKey}: if the key doesn't exist.</li>
     * <li>{@link MSException.Code.BadVersion}: failed to delete the key due to bad version</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <p>
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.NoKey`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <p>
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.NoKey`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <p>
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.BadVersion}: failed to update the key due to bad version</li>
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.BadVersion`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.BadVersion}: failed to update the key due to bad version</li>
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.NoKey`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.BadVersion}: failed to update the key due to bad version</li>
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
```

### JavadocReference
Cannot resolve symbol `Version.NEW`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success updating the key</li>
     * <li>{@link MSException.Code.BadVersion}: failed to update the key due to bad version</li>
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.KeyExists`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.BadVersion}: failed to update the key due to bad version</li>
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
```

### JavadocReference
Cannot resolve symbol `Version.NEW`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.BadVersion}: failed to update the key due to bad version</li>
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.NoKey}: no key found to update data, if not provided {@link Version.NEW}</li>
     * <li>{@link MSException.Code.KeyExists}: entry exists providing {@link Version.NEW}</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `Version.ANY`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <p>The key is updated only when the version matches its current version.
     * In particular, if the provided version is:<ul>
     * <li>{@link Version.ANY}: update the data without comparing its version.
     *      <b>Note this usage is not encouraged since it may mess up data consistency.</b></li>
     * <li>{@link Version.NEW}: create the entry if it doesn't exist before;
```

### JavadocReference
Cannot resolve symbol `Version.NEW`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link Version.ANY}: update the data without comparing its version.
     *      <b>Note this usage is not encouraged since it may mess up data consistency.</b></li>
     * <li>{@link Version.NEW}: create the entry if it doesn't exist before;
     *      Otherwise return {@link MSException.Code.KeyExists}.</li>
     * </ul>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.KeyExists`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     *      <b>Note this usage is not encouraged since it may mess up data consistency.</b></li>
     * <li>{@link Version.NEW}: create the entry if it doesn't exist before;
     *      Otherwise return {@link MSException.Code.KeyExists}.</li>
     * </ul>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <p>
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.NoKey`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * Return Code:<ul>
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreTable.java`
#### Snippet
```java
     * <li>{@link MSException.Code.OK}: success returning the key</li>
     * <li>{@link MSException.Code.NoKey}: no key found</li>
     * <li>{@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}: other issues</li>
     * </ul></p>
     *
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java

        /**
         * Configure the bookkeeper client with a provided {@link ZooKeeper} client.
         *
         * @param zk an external {@link ZooKeeper} client to use by the bookkeeper client.
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         * Configure the bookkeeper client with a provided {@link ZooKeeper} client.
         *
         * @param zk an external {@link ZooKeeper} client to use by the bookkeeper client.
         * @return client builder.
         * @since 4.5
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java

        /**
         * Configure the bookkeeper client with a provided {@link ZooKeeper} client.
         *
         * @param zk an external {@link ZooKeeper} client to use by the bookkeeper client.
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         * Configure the bookkeeper client with a provided {@link ZooKeeper} client.
         *
         * @param zk an external {@link ZooKeeper} client to use by the bookkeeper client.
         * @return client builder.
         * @deprecated since 4.5, use {@link #zk(ZooKeeper)}
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         * @param zk an external {@link ZooKeeper} client to use by the bookkeeper client.
         * @return client builder.
         * @deprecated since 4.5, use {@link #zk(ZooKeeper)}
         * @see #zk(ZooKeeper)
         */
```

### JavadocReference
Cannot resolve symbol `ZooKeeper`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         * @return client builder.
         * @deprecated since 4.5, use {@link #zk(ZooKeeper)}
         * @see #zk(ZooKeeper)
         */
        @Deprecated
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     *
     * <p>Return Code:<br/>
     * {@link MSException.Code.OK}: an opened cursor<br/>
     * {@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}:
     * other issues
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     * <p>Return Code:<br/>
     * {@link MSException.Code.OK}: an opened cursor<br/>
     * {@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}:
     * other issues
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     * <p>Return Code:<br/>
     * {@link MSException.Code.OK}: an opened cursor<br/>
     * {@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}:
     * other issues
     *
```

### JavadocReference
Cannot resolve symbol `EMPTY_START_KEY`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     *
     * @param firstKey
     *            Key to start scanning. If it is {@link EMPTY_START_KEY}, it starts
     *            from first key (inclusive).
     * @param firstInclusive
```

### JavadocReference
Cannot resolve symbol `EMPTY_END_KEY`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     *            true if firstKey is to be included in the returned view.
     * @param lastKey
     *            Key to stop scanning. If it is {@link EMPTY_END_KEY}, scan ends at
     *            the lastKey of the table (inclusive).
     * @param lastInclusive
```

### JavadocReference
Cannot resolve symbol `MSException.Code.OK`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     *
     * <p>Return Code:<br/>
     * {@link MSException.Code.OK}: an opened cursor<br/>
     * {@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}:
     * other issues
```

### JavadocReference
Cannot resolve symbol `MSException.Code.IllegalOp`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     * <p>Return Code:<br/>
     * {@link MSException.Code.OK}: an opened cursor<br/>
     * {@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}:
     * other issues
     *
```

### JavadocReference
Cannot resolve symbol `MSException.Code.ServiceDown`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     * <p>Return Code:<br/>
     * {@link MSException.Code.OK}: an opened cursor<br/>
     * {@link MSException.Code.IllegalOp}/{@link MSException.Code.ServiceDown}:
     * other issues
     *
```

### JavadocReference
Cannot resolve symbol `EMPTY_START_KEY`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     *
     * @param firstKey
     *            Key to start scanning. If it is {@link EMPTY_START_KEY}, it starts
     *            from first key (inclusive).
     * @param firstInclusive
```

### JavadocReference
Cannot resolve symbol `EMPTY_END_KEY`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreScannableTable.java`
#### Snippet
```java
     *            true if firstKey is to be included in the returned view.
     * @param lastKey
     *            Key to stop scanning. If it is {@link EMPTY_END_KEY}, scan ends at
     *            the lastKey of the table (inclusive).
     * @param lastInclusive
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
         * @return value
         * @throws InterruptedException
         * @throws KeeperException
         */
        T call() throws InterruptedException, KeeperException;
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
     *          Stats Logger for zookeeper client.
     * @return result of the zookeeper operation
     * @throws KeeperException any non-recoverable exception or recoverable exception exhausted all retires.
     * @throws InterruptedException the operation is interrupted.
     */
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperWatcherBase.java`
#### Snippet
```java
     * Waiting for the SyncConnected event from the ZooKeeper server.
     *
     * @throws KeeperException
     *             when there is no connection
     * @throws InterruptedException
```

### JavadocReference
Cannot resolve symbol `https`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java`
#### Snippet
```java
 * Class to start/stop the AutoRecovery daemons Auditor and ReplicationWorker.
 *
 * <p>TODO: eliminate the direct usage of zookeeper here {@link https://github.com/apache/bookkeeper/issues/1332}
 */
public class AutoRecoveryMain {
```

### JavadocReference
Cannot resolve symbol `getCheckpointStore()`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStore.java`
#### Snippet
```java
    /**
     * Provides a mechanism to checkpoint the local state store to a remote checkpoint store specified
     * at {@link StateStoreSpec#getCheckpointStore()}.
     */
    default void checkpoint() {
```

### JavadocReference
Cannot resolve symbol `https`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
 * failed bookie as underreplicated znode in zk.
 *
 * <p>TODO: eliminate the direct usage of zookeeper here {@link https://github.com/apache/bookkeeper/issues/1332}
 */
public class Auditor implements AutoCloseable {
```

### JavadocReference
Cannot resolve symbol `http`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java

/**
 * A key/value store implemented using {@link http://rocksdb.org/}.
 *
 * @param <K> key type
```

### JavadocReference
Cannot resolve symbol `WriteBatch`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
    /**
     * Delete blind should be call as the last op in the delete operations.
     * Since we need to modify endKey to make {@link WriteBatch#deleteRange(byte[], byte[])}
     * delete the end key.
     */
```

### JavadocReference
Cannot resolve symbol `deleteRange(byte[], byte[])`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
    /**
     * Delete blind should be call as the last op in the delete operations.
     * Since we need to modify endKey to make {@link WriteBatch#deleteRange(byte[], byte[])}
     * delete the end key.
     */
```

### JavadocReference
Cannot resolve symbol `DeleteStreamRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link DeleteStreamRequest}.
     *
     * @param nsName     namespace name
```

### JavadocReference
Cannot resolve symbol `GetStreamRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link GetStreamRequest}.
     *
     * @param nsName     namespace name
```

### JavadocReference
Cannot resolve symbol `GetStorageContainerEndpointResponse`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link GetStorageContainerEndpointResponse}.
     *
     * @param endpoints list of storage container endpoints
```

### JavadocReference
Cannot resolve symbol `GetNamespaceRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link GetNamespaceRequest}.
     *
     * @param colName namespace name
```

### JavadocReference
Cannot resolve symbol `DeleteNamespaceRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link DeleteNamespaceRequest}.
     *
     * @param colName namespace name
```

### JavadocReference
Cannot resolve symbol `CreateNamespaceRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link CreateNamespaceRequest}.
     *
     * @param nsName namespace name
```

### JavadocReference
Cannot resolve symbol `GetStreamRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link GetStreamRequest}.
     *
     * @param streamId stream id
```

### JavadocReference
Cannot resolve symbol `CreateStreamRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link CreateStreamRequest}.
     *
     * @param nsName     namespace name
```

### JavadocReference
Cannot resolve symbol `GetStorageContainerEndpointRequest`
in `stream/proto/src/main/java/org/apache/bookkeeper/stream/protocol/util/ProtoUtils.java`
#### Snippet
```java

    /**
     * Create a {@link GetStorageContainerEndpointRequest}.
     *
     * @param storageContainers list of storage containers
```

### JavadocReference
Cannot resolve symbol `of(Type, long, long, long)`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
         * Create infinite jittered backoff stream.
         *
         * <p>It is the infinite version of {@link #of(Type, long, long, long)}.
         *
         * @param type    jittered backoff type
```

### JavadocReference
Cannot resolve symbol `of(long, long)`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
         * Create infinite constant backoff stream.
         *
         * <p>It is the infinite version of {@link #of(long, long)}.
         *
         * @param ms constant backoff time in milliseconds.
```

### JavadocReference
Cannot resolve symbol `of(long, long, int, int)`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
         * Create an infinite exponential backoff policy.
         *
         * <p>It is the infinite version of {@link #of(long, long, int, int)}.
         *
         * @param startMs    start backoff time in milliseconds.
```

### JavadocReference
Cannot resolve symbol `http`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/Backoff.java`
#### Snippet
```java
     * A Jittered backoff policy.
     *
     * <p>It is an implementation of {@link http://www.awsarchitectureblog.com/2015/03/backoff.html}
     */
    @Data(staticConstructor = "of")
```

### JavadocReference
Cannot resolve symbol `onSpinWait`
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BusyWait.java`
#### Snippet
```java

    /**
     * If available (Java 9+), use intrinsic {@link Thread#onSpinWait} which will
     * reduce CPU consumption during the wait, otherwise fallback to regular
     * spinning.
```

### JavadocReference
Cannot resolve symbol `https`
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/package-info.java`
#### Snippet
```java
 */
/**
 * A stats provider implementation based on {@link https://prometheus.io/}.
 */
package org.apache.bookkeeper.stats.prometheus;
```

### JavadocReference
Cannot resolve symbol `Watcher`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ZooKeeperClient.java`
#### Snippet
```java
     *
     * @param onExpired the {@code Command} to register
     * @return the new {@link Watcher} which can later be passed to {@link #unregister} for
     *         removal.
     */
```

### JavadocReference
Cannot resolve symbol `org.jboss.netty.util.HashedWheelTimer`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     *
     * @return tick duration in milliseconds
     * @see org.jboss.netty.util.HashedWheelTimer
     */
    public long getTimeoutTimerTickDurationMs() {
```

### JavadocReference
Cannot resolve symbol `org.jboss.netty.util.HashedWheelTimer`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     *
     * @return number of ticks that used for timeout timer.
     * @see org.jboss.netty.util.HashedWheelTimer
     */
    public int getTimeoutTimerNumTicks() {
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
     * @throws InterruptedException
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     */
    public static void createFederatedNamespace(URI namespace, ZooKeeperClient zkc)
```

### JavadocReference
Cannot resolve symbol `CreateMode`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     * Synchronously create zookeeper path recursively and optimistically.
     *
     * @see #zkAsyncCreateFullPathOptimistic(ZooKeeperClient, String, byte[], List, CreateMode)
     * @param zkc Zookeeper client
     * @param path Zookeeper full path
```

### JavadocReference
Cannot resolve symbol `KeeperException`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     * @param createMode Create mode of zk path
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     * @throws InterruptedException
     */
```

### JavadocReference
Symbol `org.apache.distributedlog.BKLogReadHandler` is inaccessible from here
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/callback/LogSegmentListener.java`
#### Snippet
```java

/**
 * Listener on log segments changes for a given stream used by {@link org.apache.distributedlog.BKLogReadHandler}.
 */
public interface LogSegmentListener {
```

## RuleId[id=ManualArrayToCollectionCopy]
### ManualArrayToCollectionCopy
Manual array to collection copy
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/TxnOpBuilderImpl.java`
#### Snippet
```java
            failureOps = Lists.newArrayList();
        }
        for (Op<K, V> op : ops) {
            failureOps.add(op);
        }
```

### ManualArrayToCollectionCopy
Manual array to collection copy
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/TxnOpBuilderImpl.java`
#### Snippet
```java
            successOps = Lists.newArrayList();
        }
        for (Op<K, V> op : ops) {
            successOps.add(op);
        }
```

### ManualArrayToCollectionCopy
Manual array to collection copy
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/TxnOpBuilderImpl.java`
#### Snippet
```java
            compareOps = Lists.newArrayList();
        }
        for (CompareOp<K, V> cmp : cmps) {
            compareOps.add(cmp);
        }
```

### ManualArrayToCollectionCopy
Manual array to collection copy
in `stream/common/src/main/java/org/apache/bookkeeper/common/resolver/ServiceNameResolverProvider.java`
#### Snippet
```java
                // create a static resolver taking the list of servers.
                List<String> hostList = new ArrayList<>();
                for (String host : hosts) {
                    hostList.add(host);
                }
```

## RuleId[id=DataFlowIssue]
### DataFlowIssue
Method invocation `length` may produce `NullPointerException`
in `stream/common/src/main/java/org/apache/bookkeeper/common/grpc/stats/ServerStats.java`
#### Snippet
```java
            String fullMethodName = methodDescriptor.getFullMethodName();
            String serviceName = MethodDescriptor.extractFullServiceName(fullMethodName);
            String methodName = fullMethodName.substring(serviceName.length() + 1);

            MethodType type = methodDescriptor.getType();
```

### DataFlowIssue
Method invocation `length` may produce `NullPointerException`
in `stream/common/src/main/java/org/apache/bookkeeper/common/grpc/stats/ClientStats.java`
#### Snippet
```java
            String fullMethodName = methodDescriptor.getFullMethodName();
            String serviceName = MethodDescriptor.extractFullServiceName(fullMethodName);
            String methodName = fullMethodName.substring(serviceName.length() + 1);

            MethodType type = methodDescriptor.getType();
```

### DataFlowIssue
@Nullable method 'apply' always returns a non-null value
in `stream/common/src/main/java/org/apache/bookkeeper/common/resolver/ServiceNameResolverProvider.java`
#### Snippet
```java
                    hostList,
                    new Function<String, URI>() {
                        @Nullable
                        @Override
                        public URI apply(@Nullable String host) {
```

### DataFlowIssue
The call to 'checkArgument' always fails, according to its method contracts
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
                    break;
                default:
                    checkArgument(false,
                                  String.format("Unknown state %s for protobuf serialization", metadata.getState()));
                    break;
```

### DataFlowIssue
The call to 'checkArgument' always fails, according to its method contracts
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
                break;
            default:
                checkArgument(false,
                              String.format("Unknown state %s for protobuf serialization", metadata.getState()));
                break;
```

### DataFlowIssue
Method invocation `getSubject` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLClientProviderFactory.java`
#### Snippet
```java

            this.login = loginClient();
            this.subject = login.getSubject();
            this.isKrbTicket = !subject.getPrivateCredentials(KerberosTicket.class).isEmpty();
            boolean systemRole = CLIENT_ROLE_SYSTEM.equals(clientConfiguration.getClientRole());
```

### DataFlowIssue
Method invocation `getSubject` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory.java`
#### Snippet
```java

            this.login = loginServer();
            this.subject = login.getSubject();
            this.isKrbTicket = !subject.getPrivateCredentials(KerberosTicket.class).isEmpty();
            if (isKrbTicket) {
```

### DataFlowIssue
Casting `msg` to `BookieProtocol.Request` will produce `ClassCastException` for any non-null value
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestProcessor.java`
#### Snippet
```java
            }
        } else {
            BookieProtocol.Request r = (BookieProtocol.Request) msg;
            // process packet
            switch (r.getOpCode()) {
```

### DataFlowIssue
Method invocation `getOpCode` will produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestProcessor.java`
#### Snippet
```java
            BookieProtocol.Request r = (BookieProtocol.Request) msg;
            // process packet
            switch (r.getOpCode()) {
                case BookieProtocol.ADDENTRY:
                    checkArgument(r instanceof BookieProtocol.ParsedAddRequest);
```

### DataFlowIssue
Variable is already assigned to this value
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
                if (channel != null && state == ConnectionState.CONNECTED) {
                    completeOpNow = true;
                    opRc = BKException.Code.OK;
                } else if (state == ConnectionState.CLOSED) {
                    completeOpNow = true;
```

### DataFlowIssue
Variable is already assigned to this value
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
            }
            while (lruCleanPageMap.size() > 0) {
                lep = null;
                synchronized (lruCleanPageMap) {
                    Iterator<Map.Entry<EntryKey, LedgerEntryPage>> iterator = lruCleanPageMap.entrySet().iterator();
```

### DataFlowIssue
Argument `fileName` might be null
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
        }
        try {
            return Long.parseLong(fileName, 16);
        } catch (Exception nfe) {
            LOG.error("Invalid log file name {} found when trying to convert to logId.", fileName, nfe);
```

### DataFlowIssue
Method invocation `getName` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java

        File compactingLogFile = getCurCompactionLogFile();
        long compactionLogId = fileName2LogId(compactingLogFile.getName());
        File compactedLogFile = compactedLogFileFromCompacting(compactingLogFile, logToCompact);
        File finalLogFile = new File(compactingLogFile.getParentFile(),
```

### DataFlowIssue
Method invocation `close` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectEntryLogger.java`
#### Snippet
```java
            RemovalListener<Integer, LogReader> rl = (notification) -> {
                try {
                    notification.getValue().close();
                    this.stats.getCloseReaderCounter().inc();
                } catch (IOException ioe) {
```

### DataFlowIssue
Method invocation `isEmpty` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            }
        }
        if (bookiesToConsiderAfterExcludingZonesAndUDs.isEmpty()) {
            zonesToExclude = getZonesToExcludeToMaintainMinZones(currentEnsemble, bookieToReplaceIndex,
                    writeQuorumSize);
```

### DataFlowIssue
Method invocation `getBookies` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieInfoReader.java`
#### Snippet
```java

        Collection<BookieId> bookies;
        bookies = bk.bookieWatcher.getBookies();
        bookies.addAll(bk.bookieWatcher.getReadOnlyBookies());
        if (bookies.isEmpty()) {
```

### DataFlowIssue
Method invocation `getBookies` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieInfoReader.java`
#### Snippet
```java
                    }
                    try {
                        Collection<BookieId> updatedBookies = bk.bookieWatcher.getBookies();
                        bookieInfoMap.updateBookies(updatedBookies);
                    } catch (BKException e) {
```

### DataFlowIssue
Method invocation `updateBookieInfo` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieInfoReader.java`
#### Snippet
```java

    void onExit() {
        bk.placementPolicy.updateBookieInfo(bookieInfoMap.getBookieMap());
        if (errorCnt > 0) {
            if (LOG.isInfoEnabled()) {
```

### DataFlowIssue
Method invocation `nextElement` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
                        new SyncReadCallback(result), null, false);

                    currentEntry = SyncCallbackUtils.waitForResult(result).nextElement();

                    return true;
```

### DataFlowIssue
Method invocation `submit` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
                                return;
                            }
                            bkc.mainWorkerPool.submit(() -> {
                                // do recovery
                                recoverLedger(bookiesSrc, lId, dryrun, skipOpenLedgers,
```

### DataFlowIssue
Method invocation `getNextRandom` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                        break;
                    }
                    n = wRSelection.getNextRandom();
                    bookiesSeenSoFar.add(n);
                } else {
```

### DataFlowIssue
Method invocation `getNextRandom` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                    break;
                }
                n = wRSelection.getNextRandom();
                bookiesSeenSoFar.add(n);
            } else {
```

### DataFlowIssue
Method invocation `getNextRandom` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                    break;
                }
                bookie = wRSelection.getNextRandom();
                bookiesSeenSoFar.add(bookie);
            } else {
```

### DataFlowIssue
Argument `ensemble` might be null
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerCreateOp.java`
#### Snippet
```java
            .withEnsembleSize(actualEnsembleSize).withWriteQuorumSize(writeQuorumSize).withAckQuorumSize(ackQuorumSize)
            .withDigestType(digestType.toApiDigestType()).withPassword(passwd);
        metadataBuilder.newEnsembleEntry(0L, ensemble);
        if (customMetadata != null) {
            metadataBuilder.withCustomMetadata(customMetadata);
```

### DataFlowIssue
Unboxing of `FutureUtils.`result(appendAsync(data), BKException.HANDLER) may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/WriteHandle.java`
#### Snippet
```java
     */
    default long append(ByteBuf data) throws BKException, InterruptedException {
        return FutureUtils.<Long, BKException>result(appendAsync(data), BKException.HANDLER);
    }

```

### DataFlowIssue
Method invocation `nextElement` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
            asyncReadEntries(lastEntryId, lastEntryId, new SyncReadCallback(result), null);

            return SyncCallbackUtils.waitForResult(result).nextElement();
        }
    }
```

### DataFlowIssue
Argument `le` might be null
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
                            IteratorUtils.asEnumeration(
                                Iterators.transform(entries.iterator(), le -> {
                                    LedgerEntry entry = new LedgerEntry((LedgerEntryImpl) le);
                                    le.close();
                                    return entry;
```

### DataFlowIssue
Variable is already assigned to this value
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
                    }
                } else {
                    writableResult = false;
                    break;
                }
```

### DataFlowIssue
Unboxing of `SyncCallbackUtils.waitForResult(callback)` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        asyncAddEntry(data, offset, length, callback, null);

        return SyncCallbackUtils.waitForResult(callback);
    }

```

### DataFlowIssue
Unboxing of `FutureUtils.`result(writeAsync(entryId, data), BKException.HANDLER) may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/WriteAdvHandle.java`
#### Snippet
```java
     */
    default long write(long entryId, ByteBuf data) throws BKException, InterruptedException {
        return FutureUtils.<Long, BKException>result(writeAsync(entryId, data), BKException.HANDLER);
    }
}
```

### DataFlowIssue
Unboxing of `FutureUtils.`result(readLastAddConfirmedAsync(), ... may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/ReadHandle.java`
#### Snippet
```java
     */
    default long readLastAddConfirmed() throws BKException, InterruptedException {
        return FutureUtils.<Long, BKException>result(readLastAddConfirmedAsync(),
                                                     BKException.HANDLER);
    }

```

### DataFlowIssue
Unboxing of `FutureUtils.`result(tryReadLastAddConfirmedAsync(), ... may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/ReadHandle.java`
#### Snippet
```java
     */
    default long tryReadLastAddConfirmed() throws BKException, InterruptedException {
        return FutureUtils.<Long, BKException>result(tryReadLastAddConfirmedAsync(),
                                                     BKException.HANDLER);
    }

```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
            throws BKException {
        try {
            return FutureUtils.result(registrationClient.getReadOnlyBookies(), EXCEPTION_FUNC).getValue();
        } catch (BKInterruptedException ie) {
            Thread.currentThread().interrupt();
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
    public Set<BookieId> getBookies() throws BKException {
        try {
            return FutureUtils.result(registrationClient.getWritableBookies(), EXCEPTION_FUNC).getValue();
        } catch (BKInterruptedException ie) {
            Thread.currentThread().interrupt();
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
    public Set<BookieId> getAllBookies() throws BKException {
        try {
            return FutureUtils.result(registrationClient.getAllBookies(), EXCEPTION_FUNC).getValue();
        } catch (BKInterruptedException ie) {
            Thread.currentThread().interrupt();
```

### DataFlowIssue
Method invocation `hasOption` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifierMain.java`
#### Snippet
```java
        }

        if (cmd.hasOption("help")) {
            printHelpAndExit(options, "Help:", 0);
        }
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationManager.java`
#### Snippet
```java
            if (availableNodeExists) {
                Collection<BookieId> rwBookies = FutureUtils
                        .result(regClient.getWritableBookies(), EXCEPTION_FUNC).getValue();
                if (rwBookies != null && !rwBookies.isEmpty()) {
                    log.error("Bookies are still up and connected to this cluster, "
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationManager.java`
#### Snippet
```java
                if (readonlyNodeExists) {
                    Collection<BookieId> roBookies = FutureUtils
                            .result(regClient.getReadOnlyBookies(), EXCEPTION_FUNC).getValue();
                    if (roBookies != null && !roBookies.isEmpty()) {
                        log.error("Readonly Bookies are still up and connected to this cluster, "
```

### DataFlowIssue
Dereference of `errors.poll()` may produce `NullPointerException`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifier.java`
#### Snippet
```java
                e.printStackTrace();
            }
            throw errors.poll();
        }
    }
```

### DataFlowIssue
Dereference of `checkpoints` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksCheckpointer.java`
#### Snippet
```java
        File checkpointsDir = new File(dbPath, "checkpoints");
        String[] checkpoints = checkpointsDir.list();
        for (String checkpoint : checkpoints) {
            if (checkpoint.equals(checkpointToExclude)) {
                continue;
```

### DataFlowIssue
Argument `checkpointedDir.listFiles()` might be null
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
    public static List<CheckpointFile> list(File checkpointedDir) {
        // List for files from checkpoint folder
        return Arrays.stream(checkpointedDir.listFiles())
            .map(f -> CheckpointFile.builder()
                .file(f)
```

### DataFlowIssue
Method invocation `compareModRev` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
        switch (op.target()) {
            case MOD:
                cmp = record.compareModRev(op.revision());
                break;
            case CREATE:
```

### DataFlowIssue
Method invocation `compareCreateRev` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
                break;
            case CREATE:
                cmp = record.compareCreateRev(op.revision());
                break;
            case VERSION:
```

### DataFlowIssue
Method invocation `compareVersion` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
                break;
            case VERSION:
                cmp = record.compareVersion(op.revision());
                break;
            case VALUE:
```

### DataFlowIssue
Method invocation `getRight` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
            } else {
                Pair<byte[], byte[]> realRange = getRealRange(key, endKey);
                endKey = realRange.getRight();
                ++endKey[endKey.length - 1];
                batch.deleteRange(realRange.getLeft(), endKey);
```

### DataFlowIssue
Method invocation `getLeft` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
        }
        Pair<byte[], byte[]> realRange = getRealRange(rawKey, rawEndKey);
        rawKey = realRange.getLeft();
        rawEndKey = realRange.getRight();

```

### DataFlowIssue
Method invocation `getLeft` may produce `NullPointerException`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
        } else {
            Pair<byte[], byte[]> realRange = getRealRange(rawKey, rawEndKey);
            rawKey = realRange.getLeft();
            rawEndKey = realRange.getRight();

```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/DefaultStorageContainerController.java`
#### Snippet
```java
        for (Long containerId : containersToReassign) {
            Pair<BookieId, LinkedList<Long>> leastLoadedServer = assignmentQueue.pollFirst();
            leastLoadedServer.getValue().add(containerId);
            assignmentQueue.add(leastLoadedServer);
        }
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/DefaultStorageContainerController.java`
#### Snippet
```java

            // move container from mostLoaded to leastLoaded
            Long containerId = mostLoaded.getValue().removeFirst();
            // add the container to the end to avoid balancing this container again.
            leastLoaded.getValue().addLast(containerId);
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/DefaultStorageContainerController.java`
#### Snippet
```java
            Long containerId = mostLoaded.getValue().removeFirst();
            // add the container to the end to avoid balancing this container again.
            leastLoaded.getValue().addLast(containerId);

            assignmentQueue.add(leastLoaded);
```

### DataFlowIssue
Condition `sre.getCause() instanceof KeeperException.NoNodeException` is redundant and can be replaced with a null check
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/cluster/ZkClusterInitializer.java`
#### Snippet
```java
                return false;
            } catch (StorageRuntimeException sre) {
                if (sre.getCause() instanceof KeeperException.NoNodeException) {

                    String ledgersPath = metadataServiceUri.getPath();
```

### DataFlowIssue
Method invocation `getResponseCase` may produce `NullPointerException`
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/KvUtils.java`
#### Snippet
```java
        result.isSuccess(txnResponse.getSucceeded());
        result.results(Lists.transform(txnResponse.getResponsesList(), op -> {
            switch (op.getResponseCase()) {
                case RESPONSE_PUT:
                    return newPutResult(
```

### DataFlowIssue
Argument `kv` might be null
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/KvUtils.java`
#### Snippet
```java
    public static List<org.apache.bookkeeper.api.kv.result.KeyValue<ByteBuf, ByteBuf>> fromProtoKeyValues(
        List<KeyValue> kvs, KeyValueFactory<ByteBuf, ByteBuf> kvFactory) {
        return Lists.transform(kvs, kv -> fromProtoKeyValue(kv, kvFactory));
    }

```

### DataFlowIssue
Argument `filename` might be null
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java
        }
        dir.deleteOnExit();
        File temp = new File(dir, filename);
        temp.deleteOnExit();

```

### DataFlowIssue
Variable is already assigned to this value
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java

            if (null == nextLogSegmentSeqNo) {
                logSegmentsFound = false;
                // we don't find last assigned log segment sequence number
                // then we start the log segment with configured FirstLogSegmentSequenceNumber.
```

### DataFlowIssue
Method invocation `asyncWrite` may produce `NullPointerException`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogWriter.java`
#### Snippet
```java
            }
        } else {
            result = w.asyncWrite(record, flush);
        }
        // use map here rather than onSuccess because we want lastTxId to be updated before
```

### DataFlowIssue
Method invocation `checkReadLock` may produce `NullPointerException`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogReader.java`
#### Snippet
```java
        if (lockStream) {
            try {
                readHandler.checkReadLock();
            } catch (IOException ex) {
                setLastException(ex);
```

### DataFlowIssue
Condition `t instanceof KeeperException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/bk/SimpleLedgerAllocator.java`
#### Snippet
```java
        synchronized (this) {
            listenerToNotify = tryObtainListener;
            if (t instanceof KeeperException
                    && ((KeeperException) t).code() == KeeperException.Code.BADVERSION) {
                LOG.info("Set ledger allocator {} to ERROR state after hit bad version : version = {}",
```

### DataFlowIssue
Condition `t instanceof KeeperException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
                logger.info("Aborted transaction on deleting segment {}", segment);
                KeeperException.Code kc;
                if (t instanceof KeeperException) {
                    kc = ((KeeperException) t).code();
                } else if (t instanceof ZKException) {
```

### DataFlowIssue
Condition `cause instanceof KeeperException.NoNodeException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                                    @Override
                                    public void onFailure(Throwable cause) {
                                        if (cause instanceof KeeperException.NoNodeException) {
                                            streamEntries.remove(streamName);
                                        } else if (cause instanceof ZKAccessControl.CorruptedAccessControlException) {
```

### DataFlowIssue
Condition `cause instanceof KeeperException.NoNodeException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                @Override
                public void onFailure(Throwable cause) {
                    if (cause instanceof KeeperException.NoNodeException) {
                        logger.info("Default Access Control is missing, creating one for {} ...", zkRootPath);
                        createDefaultAccessControlEntryIfNeeded(promise);
```

### DataFlowIssue
Method invocation `release` may produce `NullPointerException`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
                skippedBrokenEntriesCounter.inc();
                CacheEntry removedEntry = readAheadEntries.poll();
                removedEntry.release();
                continue;
            } else {
```

### DataFlowIssue
Condition `cause instanceof KeeperException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                if (cause instanceof IOException) {
                    return (IOException) cause;
                } else if (cause instanceof KeeperException) {
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
```

### DataFlowIssue
Condition `throwable instanceof KeeperException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     */
    public static Throwable zkException(Throwable throwable, String path) {
        if (throwable instanceof KeeperException) {
            return new ZKException("Encountered zookeeper exception on " + path, (KeeperException) throwable);
        } else if (throwable instanceof ZooKeeperClient.ZooKeeperConnectionException) {
```

### DataFlowIssue
Condition `cause instanceof KeeperException` is redundant and can be replaced with a null check
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
                if (cause instanceof IOException) {
                    return (IOException) cause;
                } else if (cause instanceof KeeperException) {
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
```

### DataFlowIssue
Argument `filename` might be null
in `cpu-affinity/src/main/java/org/apache/bookkeeper/common/util/affinity/impl/NativeUtils.java`
#### Snippet
```java
        }
        dir.deleteOnExit();
        File temp = new File(dir, filename);
        temp.deleteOnExit();

```

### DataFlowIssue
Method invocation `toString` may produce `NullPointerException`
in `bookkeeper-slogger/slf4j/src/main/java/org/apache/bookkeeper/slogger/slf4j/Slf4jSlogger.java`
#### Snippet
```java
            }

            String msg = message == null ? event.toString() : message;
            switch (level) {
            case INFO:
```

## RuleId[id=UnnecessarySemicolon]
### UnnecessarySemicolon
Unnecessary semicolon `;`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/Header.java`
#### Snippet
```java
        buf.setInt(LOGFILE_LEGACY_HEADER_SIZE, (buf.capacity() - LOGFILE_LEGACY_HEADER_SIZE) - Integer.BYTES);
        buf.setLong(LOGFILE_LEGACY_HEADER_SIZE + Integer.BYTES, LogMetadata.INVALID_LID);
    };
    static int extractVersion(ByteBuf header) throws IOException {
        assertFingerPrint(header);
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/datainteg/DataIntegrityCheckImpl.java`
#### Snippet
```java
        enum State {
            MISSING, ERROR, OK
        };

        static LedgerResult missing(long ledgerId) {
```

## RuleId[id=SimplifyStreamApiCallChains]
### SimplifyStreamApiCallChains
Can be replaced with 'java.util.HashSet' constructor
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/RegenerateInterleavedStorageIndexFileCommand.java`
#### Snippet
```java
        }

        Set<Long> ledgerIds = flags.ledgerIds.stream().collect(Collectors.toSet());

        LOG.info("=== Rebuilding index file for {} ===", ledgerIds);
```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
        Map<File, MutableInt> writableLedgerDirFrequency = new HashMap<File, MutableInt>();
        writableLedgerDirs.stream()
                .forEach((ledgerDir) -> writableLedgerDirFrequency.put(ledgerDir, new MutableInt()));
        for (BufferedLogChannelWithDirInfo logChannelWithDirInfo : replicaOfCurrentLogChannels.values()) {
            File parentDirOfCurrentLogChannel = logChannelWithDirInfo.getLogChannel().getLogFile().getParentFile();
```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
    @Override
    public void resumeMinorGC() {
        ledgerStorageList.stream().forEach(SingleDirectoryDbLedgerStorage::resumeMinorGC);
    }

```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
    @Override
    public void suspendMinorGC() {
        ledgerStorageList.stream().forEach(SingleDirectoryDbLedgerStorage::suspendMinorGC);
    }

```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
    @Override
    public void resumeMajorGC() {
        ledgerStorageList.stream().forEach(SingleDirectoryDbLedgerStorage::resumeMajorGC);
    }

```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
    @Override
    public void forceGC() {
        ledgerStorageList.stream().forEach(SingleDirectoryDbLedgerStorage::forceGC);
    }

```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
    @Override
    public void suspendMajorGC() {
        ledgerStorageList.stream().forEach(SingleDirectoryDbLedgerStorage::suspendMajorGC);
    }

```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
    @Override
    public void forceGC(Boolean forceMajor, Boolean forceMinor) {
        ledgerStorageList.stream().forEach(s -> s.forceGC(forceMajor, forceMinor));
    }

```

### SimplifyStreamApiCallChains
Can be replaced with 'collection.toArray()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/UpdateLedgerOp.java`
#### Snippet
```java
        }

        CompletableFuture.allOf(outstanding.stream().toArray(CompletableFuture[]::new))
            .whenComplete((res, ex) -> {
                    if (ex != null) {
```

### SimplifyStreamApiCallChains
'!Stream.anyMatch(...)' can be replaced with 'noneMatch()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/Main.java`
#### Snippet
```java
            for (File j : journalDirs) {
                File cur = BookieImpl.getCurrentDirectory(j);
                if (!dirs.stream().anyMatch(f -> f.equals(cur))) {
                    BookieImpl.checkDirectoryStructure(cur);
                    dirs.add(cur);
```

### SimplifyStreamApiCallChains
'!Stream.anyMatch(...)' can be replaced with 'noneMatch()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/Main.java`
#### Snippet
```java
            for (File l : ledgerDirs) {
                File cur = BookieImpl.getCurrentDirectory(l);
                if (!dirs.stream().anyMatch(f -> f.equals(cur))) {
                    BookieImpl.checkDirectoryStructure(cur);
                    dirs.add(cur);
```

### SimplifyStreamApiCallChains
'!Stream.anyMatch(...)' can be replaced with 'noneMatch()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/Main.java`
#### Snippet
```java
            for (File i : indexDirs) {
                File cur = BookieImpl.getCurrentDirectory(i);
                if (!dirs.stream().anyMatch(f -> f.equals(cur))) {
                    BookieImpl.checkDirectoryStructure(cur);
                    dirs.add(cur);
```

### SimplifyStreamApiCallChains
Can be replaced with 'java.util.HashSet' constructor
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksdbCheckpointTask.java`
#### Snippet
```java
        }
        Set<String> allSsts = checkpointStore.listFiles(RocksUtils.getDestSstsPath(dbPrefix))
            .stream()
            .collect(Collectors.toSet());

        Set<String> toDelete = Sets.difference(allSsts, sstsToKeep);
```

## RuleId[id=StringOperationCanBeSimplified]
### StringOperationCanBeSimplified
`toLowerCase()` call can be replaced with 'equalsIgnoreCase()'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/net/ServiceURI.java`
#### Snippet
```java
            }
            return hostname;
        } else if (parts.length == 1 && serviceName.toLowerCase().equals(SERVICE_BK)) {
            return hostname + ":" + SERVICE_BK_PORT;
        } else {
```

## RuleId[id=DeprecatedIsStillUsed]
### DeprecatedIsStillUsed
Deprecated member 'setNumJournalCallbackThreads' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public ServerConfiguration setNumJournalCallbackThreads(int numThreads) {
        setProperty(NUM_JOURNAL_CALLBACK_THREADS, numThreads);
        return this;
```

### DeprecatedIsStillUsed
Deprecated member 'getCompactionRate' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public int getCompactionRate() {
        return getInt(COMPACTION_RATE, 1000);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'getJournalDirName' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public String getJournalDirName() {
        return this.getString(JOURNAL_DIR, "/tmp/bk-txn");
    }
```

### DeprecatedIsStillUsed
Deprecated member 'MSLedgerManagerFactory' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java
 */
@Slf4j
public class MSLedgerManagerFactory extends AbstractZkLedgerManagerFactory {

    private static final Logger LOG = LoggerFactory.getLogger(MSLedgerManagerFactory.class);
```

### DeprecatedIsStillUsed
Deprecated member 'getLedgerManagerType' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public String getLedgerManagerType() {
        return getString(LEDGER_MANAGER_TYPE);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'setZkLedgersRootPath' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public void setZkLedgersRootPath(String zkLedgersPath) {
        setProperty(ZK_LEDGERS_ROOT_PATH, zkLedgersPath);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'getZkLedgersRootPath' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public String getZkLedgersRootPath() {
        return getString(ZK_LEDGERS_ROOT_PATH, "/ledgers");
    }
```

### DeprecatedIsStillUsed
Deprecated member 'setZkServers' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public T setZkServers(String zkServers) {
        setProperty(ZK_SERVERS, zkServers);
        return getThis();
```

### DeprecatedIsStillUsed
Deprecated member 'setLedgerManagerType' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public void setLedgerManagerType(String lmType) {
        setProperty(LEDGER_MANAGER_TYPE, lmType);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'getZkServers' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public String getZkServers() {
        List servers = getList(ZK_SERVERS, null);
        if (null == servers || 0 == servers.size()) {
```

### DeprecatedIsStillUsed
Deprecated member 'ConcurrentLongLongHashMap' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java

    @Deprecated
    public ConcurrentLongLongHashMap(int expectedItems, int concurrencyLevel) {
        this(expectedItems, concurrencyLevel, DefaultMapFillFactor, DefaultMapIdleFactor,
                DefaultAutoShrink, DefaultExpandFactor, DefaultShrinkFactor);
```

### DeprecatedIsStillUsed
Deprecated member 'CLIENT_TLS_TRUSTSTORE_PASSWORD_PATH' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    protected static final String CLIENT_TLS_TRUSTSTORE_PASSWORD_PATH = "clientTrustStorePasswordPath";

    // NIO Parameters
```

### DeprecatedIsStillUsed
Deprecated member 'setReadTimeout' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public ClientConfiguration setReadTimeout(int timeout) {
        setProperty(READ_TIMEOUT, Integer.toString(timeout));
        return this;
```

### DeprecatedIsStillUsed
Deprecated member 'getReadTimeout' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    public int getReadTimeout() {
        return getInt(READ_TIMEOUT, 5);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'setNettyUsePooledBuffers' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * @see LedgerHandle#readEntries(long, long)
     */
    public ClientConfiguration setNettyUsePooledBuffers(boolean enabled) {
        setProperty(NETTY_USE_POOLED_BUFFERS, enabled);
        return this;
```

### DeprecatedIsStillUsed
Deprecated member 'CLIENT_TLS_KEYSTORE' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    protected static final String CLIENT_TLS_KEYSTORE = "clientKeyStore";

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'CLIENT_TLS_TRUSTSTORE' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    protected static final String CLIENT_TLS_TRUSTSTORE = "clientTrustStore";

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'CLIENT_TLS_TRUSTSTORE_TYPE' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    protected static final String CLIENT_TLS_TRUSTSTORE_TYPE = "clientTrustStoreType";

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'CLIENT_TLS_KEYSTORE_PASSWORD_PATH' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    protected static final String CLIENT_TLS_KEYSTORE_PASSWORD_PATH = "clientKeyStorePasswordPath";

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'CLIENT_TLS_KEYSTORE_TYPE' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     */
    @Deprecated
    protected static final String CLIENT_TLS_KEYSTORE_TYPE = "clientKeyStoreType";

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'ConcurrentLongHashSet' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java

    @Deprecated
    public ConcurrentLongHashSet(int expectedItems, int concurrencyLevel) {
        this(expectedItems, concurrencyLevel, DefaultMapFillFactor, DefaultMapIdleFactor,
                DefaultAutoShrink, DefaultExpandFactor, DefaultShrinkFactor);
```

### DeprecatedIsStillUsed
Deprecated member 'THROTTLED_WRITE_REQUESTS' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageStats.java`
#### Snippet
```java

    @Deprecated
    private static final String THROTTLED_WRITE_REQUESTS = "throttled-write-requests";
    // throttled-write-requests is deprecated, use new metric: throttled-write
    private static final String THROTTLED_WRITE = "throttled-write";
```

### DeprecatedIsStillUsed
Deprecated member 'ConcurrentLongLongPairHashMap' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java

    @Deprecated
    public ConcurrentLongLongPairHashMap(int expectedItems, int concurrencyLevel) {
        this(expectedItems, concurrencyLevel, DefaultMapFillFactor, DefaultMapIdleFactor,
                DefaultAutoShrink, DefaultExpandFactor, DefaultShrinkFactor);
```

### DeprecatedIsStillUsed
Deprecated member 'setStatsLogger' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         */
        @Deprecated
        public Builder setStatsLogger(StatsLogger statsLogger) {
            this.statsLogger = statsLogger;
            return this;
```

### DeprecatedIsStillUsed
Deprecated member 'setEventLoopGroup' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         */
        @Deprecated
        public Builder setEventLoopGroup(EventLoopGroup f) {
            eventLoopGroup = f;
            return this;
```

### DeprecatedIsStillUsed
Deprecated member 'setZookeeper' is still used
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         */
        @Deprecated
        public Builder setZookeeper(ZooKeeper zk) {
            this.zk = zk;
            return this;
```

### DeprecatedIsStillUsed
Deprecated member 'setBKClientWriteTimeout' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @see #getBKClientWriteTimeout()
     */
    public DistributedLogConfiguration setBKClientWriteTimeout(int writeTimeout) {
        setProperty(BKDL_BKCLIENT_WRITE_TIMEOUT, writeTimeout);
        return this;
```

### DeprecatedIsStillUsed
Deprecated member 'getBKClientWriteTimeout' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @see ClientConfiguration#getAddEntryTimeout()
     */
    public int getBKClientWriteTimeout() {
        return this.getInt(BKDL_BKCLIENT_WRITE_TIMEOUT, BKDL_BKCLIENT_WRITE_TIMEOUT_DEFAULT);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'getBKClientReadTimeout' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @see ClientConfiguration#getReadEntryTimeout()
     */
    public int getBKClientReadTimeout() {
        return this.getInt(BKDL_BKCLIENT_READ_TIMEOUT,
                BKDL_BKCLIENT_READ_TIMEOUT_DEFAULT);
```

### DeprecatedIsStillUsed
Deprecated member 'getBKClientNumberWorkerThreads' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @see ClientConfiguration#getNumWorkerThreads()
     */
    public int getBKClientNumberWorkerThreads() {
        return this.getInt(BKDL_BKCLIENT_NUM_WORKER_THREADS, BKDL_BKCLEINT_NUM_WORKER_THREADS_DEFAULT);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'getEnablePerStreamStat' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @return flag to enable per stream stat.
     */
    public boolean getEnablePerStreamStat() {
        return getBoolean(BKDL_ENABLE_PERSTREAM_STAT, BKDL_ENABLE_PERSTREAM_STAT_DEFAULT);
    }
```

### DeprecatedIsStillUsed
Deprecated member 'setBKClientReadTimeout' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @see #getBKClientReadTimeout()
     */
    public DistributedLogConfiguration setBKClientReadTimeout(int readTimeout) {
        setProperty(BKDL_BKCLIENT_READ_TIMEOUT, readTimeout);
        return this;
```

### DeprecatedIsStillUsed
Deprecated member 'MetadataAccessor' is still used
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/MetadataAccessor.java`
#### Snippet
```java
@LimitedPrivate
@Evolving
public interface MetadataAccessor extends Closeable, AsyncCloseable {
    /**
     * Get the name of the stream managed by this log manager.
```

## RuleId[id=SwitchStatementWithTooFewBranches]
### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
            } else if (msg instanceof BookieProtocol.Response) {
                BookieProtocol.Response resp = (BookieProtocol.Response) msg;
                switch (resp.opCode) {
                case BookieProtocol.AUTH:
                    if (resp.errorCode != BookieProtocol.EOK) {
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BKException.java`
#### Snippet
```java

        private int poolIndex(int code) {
            switch (code) {
            case Code.UnexpectedConditionException:
                return -minCode + 1;
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ZooKeeperClient.java`
#### Snippet
```java
            @Override
            public void process(WatchedEvent event) {
                switch (event.getType()) {
                    case None:
                        switch (event.getState()) {
```

## RuleId[id=DuplicatedCode]
### DuplicatedCode
Duplicated code
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchBookie.java`
#### Snippet
```java
        for (long entry = 0; entry < warmUpCount; entry++) {
            ByteBuf toSend = Unpooled.buffer(size);
            toSend.resetReaderIndex();
            toSend.resetWriterIndex();
            toSend.writeLong(ledger);
            toSend.writeLong(entry);
            toSend.writerIndex(toSend.capacity());
            bc.addEntry(new BookieSocketAddress(addr, port).toBookieId(), ledger, new byte[20],
                    entry, ByteBufList.get(toSend), tc, null, BookieProtocol.FLAG_NONE,
                    false, WriteFlag.NONE);
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
        Timer timeouter = new Timer();
        if (cmd.hasOption("timeout")) {
            final long timeout = Long.parseLong(cmd.getOptionValue("timeout", "360")) * 1000;

            timeouter.schedule(new TimerTask() {
                    @Override
                    public void run() {
                        System.err.println("Timing out benchmark after " + timeout + "ms");
                        System.exit(-1);
                    }
                }, timeout);
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ComponentConfiguration.java`
#### Snippet
```java
        Map<String, Object> configMap = new HashMap<>();
        Iterator<String> iterator = this.getKeys();
        while (iterator.hasNext()) {
            String key = iterator.next();
            Object property = this.getProperty(key);
            if (property != null) {
                configMap.put(key, property.toString());
            }
        }
        return configMap;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/stats/BroadCastStatsLogger.java`
#### Snippet
```java
            final OpStatsLogger firstLogger = first.getOpStatsLogger(statName);
            final OpStatsLogger secondLogger = second.getOpStatsLogger(statName);
            return new OpStatsLogger() {

                @Override
                public void registerFailedEvent(long l, TimeUnit timeUnit) {
                    firstLogger.registerFailedEvent(l, timeUnit);
                    secondLogger.registerFailedEvent(l, timeUnit);
                }

                @Override
                public void registerSuccessfulEvent(long l, TimeUnit timeUnit) {
                    firstLogger.registerSuccessfulEvent(l, timeUnit);
                    secondLogger.registerSuccessfulEvent(l, timeUnit);
                }

                @Override
                public void registerSuccessfulValue(long l) {
                    firstLogger.registerSuccessfulValue(l);
                    secondLogger.registerSuccessfulValue(l);
                }

                @Override
                public void registerFailedValue(long l) {
                    firstLogger.registerFailedValue(l);
                    secondLogger.registerFailedValue(l);
                }

                @Override
                public OpStatsData toOpStatsData() {
                    // Eventually consistent.
                    return firstLogger.toOpStatsData();
                }

                @Override
                public void clear() {
                    firstLogger.clear();
                    secondLogger.clear();
                }
            };
```

### DuplicatedCode
Duplicated code
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/stats/BroadCastStatsLogger.java`
#### Snippet
```java
            final Counter firstCounter = first.getCounter(statName);
            final Counter secondCounter = second.getCounter(statName);
            return new Counter() {
                @Override
                public void clear() {
                    firstCounter.clear();
                    secondCounter.clear();
                }

                @Override
                public void inc() {
                    firstCounter.inc();
                    secondCounter.inc();
                }

                @Override
                public void dec() {
                    firstCounter.dec();
                    secondCounter.dec();
                }

                @Override
                public void addCount(long l) {
                    firstCounter.addCount(l);
                    secondCounter.addCount(l);
                }

                @Override
                public void addLatency(long eventLatency, TimeUnit unit) {
                    long valueMillis = unit.toMillis(eventLatency);
                    firstCounter.addCount(valueMillis);
                    secondCounter.addCount(valueMillis);
                }

                @Override
                public Long get() {
                    // Eventually consistent.
                    return firstCounter.get();
                }
            };
```

### DuplicatedCode
Duplicated code
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/ReflectionUtils.java`
#### Snippet
```java
        Class<?> theCls;
        try {
            theCls = Class.forName(className);
        } catch (ClassNotFoundException cnfe) {
            throw new RuntimeException(cnfe);
        }
        if (!xface.isAssignableFrom(theCls)) {
            throw new RuntimeException(className + " not " + xface.getName());
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
            opts.addOption("s", "updatespersec", true, "Number of ledgers updating per second (default: 5 per sec)");
            opts.addOption("r", "maxOutstandingReads", true, "Max outstanding reads (default: 5 * updatespersec)");
            opts.addOption("l", "limit", true, "Maximum number of ledgers to update (default: no limit)");
            opts.addOption("v", "verbose", true, "Print status of the ledger updation (default: false)");
            opts.addOption("p", "printprogress", true,
                    "Print messages on every configured seconds if verbose turned on (default: 10 secs)");
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
            final int rate = getOptionIntValue(cmdLine, "updatespersec", 5);
            final int maxOutstandingReads = getOptionIntValue(cmdLine, "maxOutstandingReads", (rate * 5));
            final int limit = getOptionIntValue(cmdLine, "limit", Integer.MIN_VALUE);
            final boolean verbose = getOptionBooleanValue(cmdLine, "verbose", false);
            final long printprogress;
            if (!verbose) {
                if (cmdLine.hasOption("printprogress")) {
                    LOG.warn("Ignoring option 'printprogress', this is applicable when 'verbose' is true");
                }
                printprogress = Integer.MIN_VALUE;
            } else {
                // defaulting to 10 seconds
                printprogress = getOptionLongValue(cmdLine, "printprogress", 10);
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
            flags.printProgress(printprogress);
            flags.limit(limit);
            flags.updatePerSec(rate);
            flags.maxOutstandingReads(maxOutstandingReads);
            flags.verbose(verbose);

            boolean result = cmd.apply(bkConf, flags);
            return (result) ? 0 : -1;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
            sizeBuffer.clear();
            sizeBuffer.writeInt(entry.readableBytes());
            compactionLogChannel.write(sizeBuffer);

            long pos = compactionLogChannel.position();
            compactionLogChannel.write(entry);
            compactionLogChannel.registerWrittenEntry(ledgerId, entrySize);
            return (compactionLogChannel.getLogId() << 32L) | pos;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
            List<File> updatedFilledDirs = new ArrayList<File>(filledDirs);
            updatedFilledDirs.add(dir);
            filledDirs = updatedFilledDirs;
            // Update the writable ledgers list
            List<File> newDirs = new ArrayList<File>(writableLedgerDirectories);
            newDirs.removeAll(filledDirs);
            writableLedgerDirectories = newDirs;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/TransactionalEntryLogCompactor.java`
#### Snippet
```java
                        long lid = entry.getLong(entry.readerIndex());
                        long entryId = entry.getLong(entry.readerIndex() + 8);
                        if (lid != ledgerId || entryId < -1) {
                            LOG.warn("Scanning expected ledgerId {}, but found invalid entry "
                                    + "with ledgerId {} entryId {} at offset {}",
                                    ledgerId, lid, entryId, offset);
                            throw new IOException("Invalid entry found @ offset " + offset);
                        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/ArrayUtil.java`
#### Snippet
```java
        return ((long) array[index] & 0xff) << 56
                | ((long) array[index + 1] & 0xff) << 48
                | ((long) array[index + 2] & 0xff) << 40
                | ((long) array[index + 3] & 0xff) << 32
                | ((long) array[index + 4] & 0xff) << 24
                | ((long) array[index + 5] & 0xff) << 16
                | ((long) array[index + 6] & 0xff) << 8
                | (long) array[index + 7] & 0xff;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/ArrayUtil.java`
#### Snippet
```java
            array[index] = (byte) (value >>> 56);
            array[index + 1] = (byte) (value >>> 48);
            array[index + 2] = (byte) (value >>> 40);
            array[index + 3] = (byte) (value >>> 32);
            array[index + 4] = (byte) (value >>> 24);
            array[index + 5] = (byte) (value >>> 16);
            array[index + 6] = (byte) (value >>> 8);
            array[index + 7] = (byte) value;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorageRocksDB.java`
#### Snippet
```java
            String logPath = conf.getString(ROCKSDB_LOG_PATH, "");
            if (!logPath.isEmpty()) {
                Path logPathSetting = FileSystems.getDefault().getPath(logPath, subPath);
                Files.createDirectories(logPathSetting);
                log.info("RocksDB<{}> log path: {}", subPath, logPathSetting);
                dbOptions.setDbLogDir(logPathSetting.toString());
            }
            this.dbPath = FileSystems.getDefault().getPath(basePath, subPath).toFile().toString();
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex.java`
#### Snippet
```java
            if (ledgers.put(ledgerId, newLedgerData) == null) {
                // Ledger had been deleted
                if (log.isDebugEnabled()) {
                    log.debug("Re-inserted limbo ledger {}", ledgerId);
                }
                ledgersCount.incrementAndGet();
            } else if (log.isDebugEnabled()) {
                log.debug("Set limbo ledger {}", ledgerId);
            }

            pendingLedgersUpdates.add(new SimpleEntry<Long, LedgerData>(ledgerId, newLedgerData));
            pendingDeletedLedgers.remove(ledgerId);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java
        long stamp = writeCacheRotationLock.tryOptimisticRead();
        WriteCache localWriteCache = writeCache;
        WriteCache localWriteCacheBeingFlushed = writeCacheBeingFlushed;
        if (!writeCacheRotationLock.validate(stamp)) {
            // Fallback to regular read lock approach
            stamp = writeCacheRotationLock.readLock();
            try {
                localWriteCache = writeCache;
                localWriteCacheBeingFlushed = writeCacheBeingFlushed;
            } finally {
                writeCacheRotationLock.unlockRead(stamp);
            }
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
            switch (digestType) {
                case MAC:
                    return DigestType.MAC;
                case CRC32:
                    return DigestType.CRC32;
                case CRC32C:
                    return DigestType.CRC32C;
                case DUMMY:
                    return DigestType.DUMMY;
                default:
                    throw new IllegalArgumentException("Unable to convert digest type " + digestType);
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        if (clientCtx.getConf().waitForWriteSetMs >= 0) {
            DistributionSchedule.WriteSet ws = distributionSchedule.getWriteSet(op.getEntryId());
            try {
                if (!waitForWritable(ws, 0, clientCtx.getConf().waitForWriteSetMs)) {
                    op.allowFailFastOnUnwritableChannel();
                }
            } finally {
                ws.recycle();
            }
        }

        op.initiate();
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        boolean isClosed;
        long lastEntryId;
        synchronized (this) {
            LedgerMetadata metadata = getLedgerMetadata();
            isClosed = metadata.isClosed();
            lastEntryId = metadata.getLastEntryId();
        }
        if (isClosed) {
            cb.readLastConfirmedComplete(BKException.Code.OK, lastEntryId, ctx);
            return;
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingReadOp.java`
#### Snippet
```java
            if (BKException.Code.OK == firstError
                || BKException.Code.NoSuchEntryException == firstError
                || BKException.Code.NoSuchLedgerExistsException == firstError) {
                firstError = rc;
            } else if (BKException.Code.BookieHandleNotAvailableException == firstError
                       && BKException.Code.NoSuchEntryException != rc
                       && BKException.Code.NoSuchLedgerExistsException != rc) {
                // if other exception rather than NoSuchEntryException or NoSuchLedgerExistsException is
                // returned we need to update firstError to indicate that it might be a valid read but just
                // failed.
                firstError = rc;
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingReadOp.java`
#### Snippet
```java
            for (int i = 0; i < writeSet.size(); i++) {
                BookieId to = ensemble.get(writeSet.get(i));
                try {
                    sendReadTo(writeSet.get(i), to, this);
                } catch (InterruptedException ie) {
                    LOG.error("Interrupted reading entry {} : ", this, ie);
                    Thread.currentThread().interrupt();
                    fail(BKException.Code.InterruptedException);
                    return;
                }
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicy.java`
#### Snippet
```java
       try {
            return super.replaceBookie(ensembleSize, writeQuorumSize, ackQuorumSize, customMetadata,
                    currentEnsemble, bookieToReplace, excludeBookies);
        } catch (BKException.BKNotEnoughBookiesException bnebe) {
            if (slave == null) {
                throw bnebe;
            } else {
                return slave.replaceBookie(ensembleSize, writeQuorumSize, ackQuorumSize, customMetadata,
                        currentEnsemble, bookieToReplace, excludeBookies);
            }
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            if (LOG.isDebugEnabled()) {
                LOG.debug("Bookie {} is chosen to replace bookie {}.", candidate, bn);
            }
            BookieId candidateAddr = candidate.getAddr();
            List<BookieId> newEnsemble = new ArrayList<BookieId>(currentEnsemble);
            if (currentEnsemble.isEmpty()) {
                /*
                 * in testing code there are test cases which would pass empty
                 * currentEnsemble
                 */
                newEnsemble.add(candidateAddr);
            } else {
                newEnsemble.set(currentEnsemble.indexOf(bookieToReplace), candidateAddr);
            }
            return PlacementResult.of(candidateAddr,
                    isEnsembleAdheringToPlacementPolicy(newEnsemble, writeQuorumSize, ackQuorumSize));
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            Node n;
            if (isWeighted) {
                if (bookiesSeenSoFar.size() == leaves.size()) {
                    // Don't loop infinitely.
                    break;
                }
                n = wRSelection.getNextRandom();
                bookiesSeenSoFar.add(n);
            } else {
                if (it.hasNext()) {
                    n = it.next();
                } else {
                    break;
                }
            }
            if (excludeBookies.contains(n)) {
                continue;
            }
            if (!(n instanceof BookieNode) || !predicate.apply((BookieNode) n, ensemble)) {
                continue;
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            if (isWeighted) {
                if (bookiesSeenSoFar.size() == bookiesToSelectFrom.size()) {
                    // If we have gone through the whole available list of bookies,
                    // and yet haven't been able to satisfy the ensemble request, bail out.
                    // We don't want to loop infinitely.
                    break;
                }
                bookie = wRSelection.getNextRandom();
                bookiesSeenSoFar.add(bookie);
            } else {
                if (it.hasNext()) {
                    bookie = it.next();
                } else {
                    break;
                }
            }
            if (excludeBookies.contains(bookie)) {
                continue;
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ZoneawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                int indexInEnsemble = (i + j + indexOfNode + ensSize) % ensSize;
                if (indexInEnsemble == indexOfNode) {
                    continue;
                }
                BookieId bookieAddr = currentEnsemble.get(indexInEnsemble);
                if (bookieAddr == null) {
                    continue;
                }
                ZoneAwareNodeLocation nodeLocation = getZoneAwareNodeLocation(bookieAddr);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
            Set<LedgerMetadataListener> listenerSet = listeners.get(ledgerId);
            if (listenerSet == null) {
                Set<LedgerMetadataListener> newListenerSet = new HashSet<LedgerMetadataListener>();
                Set<LedgerMetadataListener> oldListenerSet = listeners.putIfAbsent(ledgerId, newListenerSet);
                if (null != oldListenerSet) {
                    listenerSet = oldListenerSet;
                } else {
                    listenerSet = newListenerSet;
                }
            }
            synchronized (listenerSet) {
                listenerSet.add(listener);
            }
            new ReadLedgerMetadataTask(ledgerId).run();
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
LedgerMetadataFormat.Builder builder = LedgerMetadataFormat.newBuilder();
            builder.setQuorumSize(metadata.getWriteQuorumSize())
                .setAckQuorumSize(metadata.getAckQuorumSize())
                .setEnsembleSize(metadata.getEnsembleSize())
                .setLength(metadata.getLength())
                .setLastEntryId(metadata.getLastEntryId());

            switch (metadata.getState()) {
            case CLOSED:
                builder.setState(LedgerMetadataFormat.State.CLOSED);
                break;
            case IN_RECOVERY:
                builder.setState(LedgerMetadataFormat.State.IN_RECOVERY);
                break;
            case OPEN:
                builder.setState(LedgerMetadataFormat.State.OPEN);
                break;
            default:
                checkArgument(false,
                              String.format("Unknown state %s for protobuf serialization", metadata.getState()));
                break;
            }

            /** Hack to get around fact that ctime was never versioned correctly */
            if (LedgerMetadataUtils.shouldStoreCtime(metadata)) {
                builder.setCtime(metadata.getCtime());
            }


            builder.setDigestType(apiToProtoDigestType(metadata.getDigestType()));

            serializePassword(metadata.getPassword(), builder);

            Map<String, byte[]> customMetadata = metadata.getCustomMetadata();
            if (customMetadata.size() > 0) {
                LedgerMetadataFormat.cMetadataMapEntry.Builder cMetadataBuilder =
                    LedgerMetadataFormat.cMetadataMapEntry.newBuilder();
                for (Map.Entry<String, byte[]> entry : customMetadata.entrySet()) {
                    cMetadataBuilder.setKey(entry.getKey()).setValue(ByteString.copyFrom(entry.getValue()));
                    builder.addCustomMetadata(cMetadataBuilder.build());
                }
            }

            for (Map.Entry<Long, ? extends List<BookieId>> entry : metadata.getAllEnsembles().entrySet()) {
                LedgerMetadataFormat.Segment.Builder segmentBuilder = LedgerMetadataFormat.Segment.newBuilder();
                segmentBuilder.setFirstEntryId(entry.getKey());
                for (BookieId addr : entry.getValue()) {
                    segmentBuilder.addEnsembleMember(addr.toString());
                }
                builder.addSegment(segmentBuilder.build());
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java
        SortedSet<Long> ledgers = new TreeSet<Long>();
        while (entries.hasNext()) {
            MetastoreTableItem item = entries.next();
            try {
                ledgers.add(key2LedgerId(item.getKey()));
            } catch (NumberFormatException nfe) {
                LOG.warn("Found invalid ledger key {}", item.getKey());
            }
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataDrivers.java`
#### Snippet
```java
        Set<String> driverList = Sets.newHashSet();

        // add default zookeeper based driver
        driverList.add(ZK_CLIENT_DRIVER_CLASS);

        // load drivers from system property
        String driversStr = System.getProperty(BK_METADATA_CLIENT_DRIVERS_PROPERTY);
        if (null != driversStr) {
            String[] driversArray = StringUtils.split(driversStr, ':');
            Collections.addAll(driverList, driversArray);
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataDrivers.java`
#### Snippet
```java
        checkNotNull(uri, "Metadata service uri is null");
        String scheme = uri.getScheme();
        checkNotNull(scheme, "Invalid metadata service uri : " + uri);
        scheme = scheme.toLowerCase();
        String[] schemeParts = StringUtils.split(scheme, '+');
        checkArgument(schemeParts.length > 0,
                "Invalid metadata service scheme found : " + uri);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/AuthHandler.java`
#### Snippet
```java
                            if (AUTHENTICATION_DISABLED_PLUGIN_NAME.equals(am.getAuthPluginName())){
                                SocketAddress remote = ctx.channel().remoteAddress();
                                LOG.info("Authentication is not enabled."
                                    + "Considering this client {} authenticated", remote);
                                AuthHandshakeCompleteCallback cb = new AuthHandshakeCompleteCallback(ctx);
                                cb.operationComplete(BKException.Code.OK, null);
                                return;
                            }
                            byte[] payload = am.getPayload().toByteArray();
                            authProvider.process(AuthToken.wrap(payload), new AuthRequestCallback(ctx,
                                authProviderFactory.getPluginName()));
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieNettyServer.java`
#### Snippet
```java
                    pipeline.addLast("lengthbaseddecoder", new LengthFieldBasedFrameDecoder(maxFrameSize, 0, 4, 0, 4));

                    pipeline.addLast("bookieProtoDecoder", new BookieProtoEncoding.RequestDecoder(registry));
                    pipeline.addLast("bookieProtoEncoder", new BookieProtoEncoding.ResponseEncoder(registry));
                    pipeline.addLast("bookieAuthHandler", new AuthHandler.ServerSideHandler(
                                contextHandler.getConnectionPeer(), authProviderFactory));

                    ChannelInboundHandler requestHandler = isRunning.get()
                            ? new BookieRequestHandler(conf, requestProcessor, allChannels)
                            : new RejectRequestHandler();
                    pipeline.addLast("bookieRequestHandler", requestHandler);

                    pipeline.addLast("contextHandler", contextHandler);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ForceLedgerProcessorV3.java`
#### Snippet
```java
            StatusCode status;
            switch (rc) {
                case BookieProtocol.EOK:
                    status = StatusCode.EOK;
                    break;
                case BookieProtocol.EIO:
                    status = StatusCode.EIO;
                    break;
                default:
                    status = StatusCode.EUA;
                    break;
            }
            forceLedgerResponse.setStatus(status);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PacketProcessorBase.java`
#### Snippet
```java
            if (!requestProcessor.isBlacklisted(channel)) {
                synchronized (channel) {
                    if (!channel.isWritable() && !requestProcessor.isBlacklisted(channel)) {
                        final long waitUntilNanos = writeNanos + TimeUnit.MILLISECONDS.toNanos(timeOut);
                        while (!channel.isWritable() && MathUtils.nowInNano() < waitUntilNanos) {
                            try {
                                TimeUnit.MILLISECONDS.sleep(1);
                            } catch (InterruptedException e) {
                                break;
                            }
                        }
                        if (!channel.isWritable()) {
                            requestProcessor.blacklistChannel(channel);
                            requestProcessor.handleNonWritableChannel(channel);
                        }
                    }
                }
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
            if (checkAllLedgersLastExecutedCTime == -1) {
                durationSinceLastExecutionInSecs = -1;
                initialDelay = 0;
            } else {
                durationSinceLastExecutionInSecs = (System.currentTimeMillis() - checkAllLedgersLastExecutedCTime)
                        / 1000;
                if (durationSinceLastExecutionInSecs < 0) {
                    // this can happen if there is no strict time ordering
                    durationSinceLastExecutionInSecs = 0;
                }
                initialDelay = durationSinceLastExecutionInSecs > interval ? 0
                        : (interval - durationSinceLastExecutionInSecs);
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/Auditor.java`
#### Snippet
```java
        Collection<BookieId> availableBkAddresses = admin.getAvailableBookies();
        Collection<BookieId> readOnlyBkAddresses = admin.getReadOnlyBookies();
        availableBkAddresses.addAll(readOnlyBkAddresses);

        List<String> availableBookies = new ArrayList<String>();
        for (BookieId addr : availableBkAddresses) {
            availableBookies.add(addr.toString());
        }
        return availableBookies;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorPlacementPolicyCheckTask.java`
#### Snippet
```java
        final List<Integer> resultCode = new ArrayList<Integer>(1);
        ledgerManager.asyncProcessLedgers(ledgerProcessor, new AsyncCallback.VoidCallback() {

            @Override
            public void processResult(int rc, String s, Object obj) {
                resultCode.add(rc);
                placementPolicyCheckLatch.countDown();
            }
        }, null, BKException.Code.OK, BKException.Code.ReadException);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory.java`
#### Snippet
```java
            for (Callback callback : callbacks) {
                if (callback instanceof NameCallback) {
                    NameCallback nc = (NameCallback) callback;
                    nc.setName(nc.getDefaultName());
                } else {
                    if (callback instanceof PasswordCallback) {
                        PasswordCallback pc = (PasswordCallback) callback;
                        if (password != null) {
                            pc.setPassword(this.password.toCharArray());
                        }
                    } else {
                        if (callback instanceof RealmCallback) {
                            RealmCallback rc = (RealmCallback) callback;
                            rc.setText(rc.getDefaultText());
                        } else {
                            if (callback instanceof AuthorizeCallback) {
                                AuthorizeCallback ac = (AuthorizeCallback) callback;
                                String authid = ac.getAuthenticationID();
                                String authzid = ac.getAuthorizationID();
                                if (authid.equals(authzid)) {
                                    ac.setAuthorized(true);
                                } else {
                                    ac.setAuthorized(false);
                                }
                                if (ac.isAuthorized()) {
                                    ac.setAuthorizedID(authzid);
                                }
                            } else {
                                throw new UnsupportedCallbackException(callback, "Unrecognized SASL ClientCallback");
                            }
                        }
                    }
                }
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/EmbeddedServer.java`
#### Snippet
```java
            List<BookieServiceInfo.Endpoint> endpoints = componentInfoPublisher.getEndpoints().values()
                    .stream().map(e -> {
                        return new BookieServiceInfo.Endpoint(
                                e.getId(),
                                e.getPort(),
                                e.getHost(),
                                e.getProtocol(),
                                e.getAuth(),
                                e.getExtensions()
                        );
                    }).collect(Collectors.toList());
            return new BookieServiceInfo(componentInfoPublisher.getProperties(), endpoints);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/Main.java`
#### Snippet
```java
        if (journalDirs != null) {
            for (File j : journalDirs) {
                File cur = BookieImpl.getCurrentDirectory(j);
                if (!dirs.stream().anyMatch(f -> f.equals(cur))) {
                    BookieImpl.checkDirectoryStructure(cur);
                    dirs.add(cur);
                }
            }
        }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/GetLedgerMetaService.java`
#### Snippet
```java
            manager.close();

            String jsonResponse = JsonUtil.toJson(output);
            if (LOG.isDebugEnabled()) {
                LOG.debug("output body:" + jsonResponse);
            }
            response.setBody(jsonResponse);
            response.setCode(HttpServer.StatusCode.OK);
            return response;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListBookieInfoService.java`
#### Snippet
```java
        String[] unit = {"", "KB", "MB", "GB", "TB" };
        int cnt = 0;
        double d = val;
        while (d >= 1000 && cnt < unit.length - 1) {
            d = d / 1000;
            cnt++;
        }
        DecimalFormat df = new DecimalFormat("#.###");
        df.setRoundingMode(RoundingMode.DOWN);
        return cnt > 0 ? "(" + df.format(d) + unit[cnt] + ")" : unit[cnt];
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FlipBookieIdCommand.java`
#### Snippet
```java
        final int rate = flags.updatePerSec;
        if (rate <= 0) {
            LOG.error("Invalid updatespersec {}, should be > 0", rate);
            return false;
        }

        final int maxOutstandingReads = flags.maxOutstandingReads;
        if (maxOutstandingReads <= 0) {
            LOG.error("Invalid maxOutstandingReads {}, should be > 0", maxOutstandingReads);
            return false;
        }

        final int limit = flags.limit;
        if (limit <= 0 && limit != Integer.MIN_VALUE) {
            LOG.error("Invalid limit {}, should be > 0", limit);
            return false;
        }

        final long printProgress;
        if (flags.verbose) {
            printProgress = 10;
        } else {
            printProgress = flags.printProgress;
        }

        final ClientConfiguration clientConfiguration = new ClientConfiguration();
        clientConfiguration.addConfiguration(conf);
        final BookKeeper bk = new BookKeeper(clientConfiguration);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FlipBookieIdCommand.java`
#### Snippet
```java
        BookieShell.UpdateLedgerNotifier progressable = new BookieShell.UpdateLedgerNotifier() {
            long lastReport = System.nanoTime();

            @Override
            public void progress(long updated, long issued) {
                if (printProgress <= 0) {
                    return; // disabled
                }
                if (TimeUnit.MILLISECONDS.toSeconds(MathUtils.elapsedMSec(lastReport)) >= printProgress) {
                    LOG.info("Number of ledgers issued={}, updated={}", issued, updated);
                    lastReport = MathUtils.nowInNano();
                }
            }
        };

        try {
            updateLedgerOp.updateBookieIdInLedgers(oldBookieId, newBookieId, rate, maxOutstandingReads, limit,
                    progressable);
        } catch (IOException e) {
            LOG.error("Failed to update ledger metadata", e);
            return false;
        }

        return true;
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
    try {
      if (process.waitFor() != 0) {
        String errMsg = new BufferedReader(new InputStreamReader(
                                                   process.getInputStream(), UTF_8)).readLine();
        if (errMsg == null) {
            errMsg = "";
        }
        String inpMsg = new BufferedReader(new InputStreamReader(
                                                   process.getErrorStream(), UTF_8)).readLine();
        if (inpMsg == null) {
            inpMsg = "";
        }
        throw new IOException(errMsg + inpMsg);
      }
    } catch (InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new IOException(e);
    } finally {
      process.destroy();
    }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
            this.values = (V[]) new Object[this.capacity];
            this.size = 0;
            this.usedBuckets = 0;
            this.autoShrink = autoShrink;
            this.mapFillFactor = mapFillFactor;
            this.mapIdleFactor = mapIdleFactor;
            this.expandFactor = expandFactor;
            this.shrinkFactor = shrinkFactor;
            this.resizeThresholdUp = (int) (this.capacity * mapFillFactor);
            this.resizeThresholdBelow = (int) (this.capacity * mapIdleFactor);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
            this.size = 0;
            this.usedBuckets = 0;
            this.autoShrink = autoShrink;
            this.mapFillFactor = mapFillFactor;
            this.mapIdleFactor = mapIdleFactor;
            this.expandFactor = expandFactor;
            this.shrinkFactor = shrinkFactor;
            this.resizeThresholdUp = (int) (this.capacity * mapFillFactor);
            this.resizeThresholdBelow = (int) (this.capacity * mapIdleFactor);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
                if (autoShrink && size < resizeThresholdBelow) {
                    try {
                        // Shrinking must at least ensure initCapacity,
                        // so as to avoid frequent shrinking and expansion near initCapacity,
                        // frequent shrinking and expansion,
                        // additionally opened arrays will consume more memory and affect GC
                        int newCapacity = Math.max(alignToPowerOfTwo((int) (capacity / shrinkFactor)), initCapacity);
                        int newResizeThresholdUp = (int) (newCapacity * mapFillFactor);
                        if (newCapacity < capacity && newResizeThresholdUp > size) {
                            // shrink the hashmap
                            rehash(newCapacity);
                        }
                    } finally {
                        unlockWrite(stamp);
                    }
                } else {
                    unlockWrite(stamp);
                }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
                    } else if (storedItem == EmptyItem) {
                        // Found an empty bucket. This means the key is not in the map. If we've already seen a deleted
                        // key, we should write at that position
                        if (firstDeletedItem != -1) {
                            bucket = firstDeletedItem;
                        } else {
                            ++usedBuckets;
                        }

                        table[bucket] = item;
                        ++size;
                        return true;
                    } else if (storedItem == DeletedItem) {
                        // The bucket contained a different deleted key
                        if (firstDeletedItem == -1) {
                            firstDeletedItem = bucket;
                        }
                    }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
            long stamp = writeLock();

            try {
                if (autoShrink && capacity > initCapacity) {
                    shrinkToInitCapacity();
                } else {
                    Arrays.fill(table, EmptyItem);
                    this.size = 0;
                    this.usedBuckets = 0;
                }
            } finally {
                unlockWrite(stamp);
            }
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
            final StatCallback stCb = new StatCallback() {

                @Override
                public void processResult(int rc, String path, Object ctx, Stat stat) {
                    ZooWorker worker = (ZooWorker) ctx;
                    if (allowRetry(worker, rc)) {
                        backOffAndRetry(that, worker.nextRetryWaitTime());
                    } else {
                        cb.processResult(rc, path, context, stat);
                    }
                }

            };
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
            final VoidCallback vCb = new VoidCallback() {

                @Override
                public void processResult(int rc, String path, Object ctx) {
                    ZooWorker worker = (ZooWorker) ctx;
                    if (allowRetry(worker, rc)) {
                        backOffAndRetry(that, worker.nextRetryWaitTime());
                    } else {
                        cb.processResult(rc, path, context);
                    }
                }

            };
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        return ZooWorker.syncCallWithRetries(this, new ZooCallable<Stat>() {

            @Override
            public Stat call() throws KeeperException, InterruptedException {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    return ZooKeeperClient.super.exists(path, watcher);
                }
                return zkHandle.exists(path, watcher);
            }

            @Override
            public String toString() {
                return String.format("exists (%s, watcher = %s)", path, watcher);
            }

        }, operationRetryPolicy, rateLimiter, existsStats);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        final Runnable proc = new ZkRetryRunnable(operationRetryPolicy, rateLimiter, existsStats) {

            final StatCallback stCb = new StatCallback() {

                @Override
                public void processResult(int rc, String path, Object ctx, Stat stat) {
                    ZooWorker worker = (ZooWorker) ctx;
                    if (allowRetry(worker, rc)) {
                        backOffAndRetry(that, worker.nextRetryWaitTime());
                    } else {
                        cb.processResult(rc, path, context, stat);
                    }
                }

            };

            @Override
            void zkRun() {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    ZooKeeperClient.super.exists(path, watcher, stCb, worker);
                } else {
                    zkHandle.exists(path, watcher, stCb, worker);
                }
            }

            @Override
            public String toString() {
                return String.format("exists (%s, watcher = %s)", path, watcher);
            }
        };
        // execute it immediately
        proc.run();
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        return ZooWorker.syncCallWithRetries(this, new ZooCallable<byte[]>() {

            @Override
            public byte[] call() throws KeeperException, InterruptedException {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    return ZooKeeperClient.super.getData(path, watcher, stat);
                }
                return zkHandle.getData(path, watcher, stat);
            }

            @Override
            public String toString() {
                return String.format("getData (%s, watcher = %s)", path, watcher);
            }

        }, operationRetryPolicy, rateLimiter, getStats);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        final Runnable proc = new ZkRetryRunnable(operationRetryPolicy, rateLimiter, getStats) {

            final DataCallback dataCb = new DataCallback() {

                @Override
                public void processResult(int rc, String path, Object ctx, byte[] data, Stat stat) {
                    ZooWorker worker = (ZooWorker) ctx;
                    if (allowRetry(worker, rc)) {
                        backOffAndRetry(that, worker.nextRetryWaitTime());
                    } else {
                        cb.processResult(rc, path, context, data, stat);
                    }
                }

            };

            @Override
            void zkRun() {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    ZooKeeperClient.super.getData(path, watcher, dataCb, worker);
                } else {
                    zkHandle.getData(path, watcher, dataCb, worker);
                }
            }

            @Override
            public String toString() {
                return String.format("getData (%s, watcher = %s)", path, watcher);
            }
        };
        // execute it immediately
        proc.run();
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        return ZooWorker.syncCallWithRetries(this, new ZooCallable<List<String>>() {

            @Override
            public List<String> call() throws KeeperException, InterruptedException {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    return ZooKeeperClient.super.getChildren(path, watcher, stat);
                }
                return zkHandle.getChildren(path, watcher, stat);
            }

            @Override
            public String toString() {
                return String.format("getChildren (%s, watcher = %s)", path, watcher);
            }

        }, operationRetryPolicy, rateLimiter, getChildrenStats);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        final Runnable proc = new ZkRetryRunnable(operationRetryPolicy, rateLimiter, getChildrenStats) {

            final Children2Callback childCb = new Children2Callback() {

                @Override
                public void processResult(int rc, String path, Object ctx,
                        List<String> children, Stat stat) {
                    ZooWorker worker = (ZooWorker) ctx;
                    if (allowRetry(worker, rc)) {
                        backOffAndRetry(that, worker.nextRetryWaitTime());
                    } else {
                        cb.processResult(rc, path, context, children, stat);
                    }
                }

            };

            @Override
            void zkRun() {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    ZooKeeperClient.super.getChildren(path, watcher, childCb, worker);
                } else {
                    zkHandle.getChildren(path, watcher, childCb, worker);
                }
            }

            @Override
            public String toString() {
                return String.format("getChildren (%s, watcher = %s)", path, watcher);
            }
        };
        // execute it immediately
        proc.run();
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        return ZooWorker.syncCallWithRetries(this, new ZooCallable<List<String>>() {

            @Override
            public List<String> call() throws KeeperException, InterruptedException {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    return ZooKeeperClient.super.getChildren(path, watcher);
                }
                return zkHandle.getChildren(path, watcher);
            }

            @Override
            public String toString() {
                return String.format("getChildren (%s, watcher = %s)", path, watcher);
            }

        }, operationRetryPolicy, rateLimiter, getChildrenStats);
```

### DuplicatedCode
Duplicated code
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        final Runnable proc = new ZkRetryRunnable(operationRetryPolicy, rateLimiter, getChildrenStats) {

            final ChildrenCallback childCb = new ChildrenCallback() {

                @Override
                public void processResult(int rc, String path, Object ctx,
                        List<String> children) {
                    ZooWorker worker = (ZooWorker) ctx;
                    if (allowRetry(worker, rc)) {
                        backOffAndRetry(that, worker.nextRetryWaitTime());
                    } else {
                        cb.processResult(rc, path, context, children);
                    }
                }

            };

            @Override
            void zkRun() {
                ZooKeeper zkHandle = zk.get();
                if (null == zkHandle) {
                    ZooKeeperClient.super.getChildren(path, watcher, childCb, worker);
                } else {
                    zkHandle.getChildren(path, watcher, childCb, worker);
                }
            }

            @Override
            public String toString() {
                return String.format("getChildren (%s, watcher = %s)", path, watcher);
            }
        };
        // execute it immediately
        proc.run();
```

### DuplicatedCode
Duplicated code
in `circe-checksum/src/main/java/com/scurrilous/circe/impl/AbstractIncrementalIntHash.java`
#### Snippet
```java
        final byte[] array;
        final int index;
        final int length = input.remaining();
        if (input.hasArray()) {
            array = input.array();
            index = input.arrayOffset() + input.position();
            input.position(input.limit());
        } else {
            array = new byte[length];
            index = 0;
            input.get(array);
        }
        return resumeUnchecked(current, array, index, length);
```

### DuplicatedCode
Duplicated code
in `circe-checksum/src/main/java/com/scurrilous/circe/impl/AbstractStatelessIntHash.java`
#### Snippet
```java
        final byte[] array;
        final int index;
        final int length = input.remaining();
        if (input.hasArray()) {
            array = input.array();
            index = input.arrayOffset() + input.position();
            input.position(input.limit());
        } else {
            array = new byte[length];
            index = 0;
            input.get(array);
        }
        return calculateUnchecked(array, index, length);
```

### DuplicatedCode
Duplicated code
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java
        if (!(dir.mkdir())) {
            throw new IOException("Failed to create temp directory " + dir.getAbsolutePath());
        }
        dir.deleteOnExit();
        File temp = new File(dir, filename);
        temp.deleteOnExit();

        byte[] buffer = new byte[1024];
        int read;
```

### DuplicatedCode
Duplicated code
in `native-io/src/main/java/org/apache/bookkeeper/common/util/nativeio/NativeUtils.java`
#### Snippet
```java
        dir.deleteOnExit();
        File temp = new File(dir, filename);
        temp.deleteOnExit();

        byte[] buffer = new byte[1024];
        int read;

        try (InputStream input = NativeUtils.class.getResourceAsStream(path);
             OutputStream out = new FileOutputStream(temp)) {
            if (input == null) {
                throw new FileNotFoundException("Couldn't find file into jar " + path);
            }

            while ((read = input.read(buffer)) != -1) {
                out.write(buffer, 0, read);
            }
        }

        if (!temp.exists()) {
            throw new FileNotFoundException("Failed to copy file from jar at " + temp.getAbsolutePath());
        }

        System.load(temp.getAbsolutePath());
```

### DuplicatedCode
Duplicated code
in `cpu-affinity/src/main/java/org/apache/bookkeeper/common/util/affinity/impl/NativeUtils.java`
#### Snippet
```java
        try (InputStream input = NativeUtils.class.getResourceAsStream(path);
                OutputStream out = new FileOutputStream(temp)) {
            if (input == null) {
                throw new FileNotFoundException("Couldn't find file into jar " + path);
            }

            while ((read = input.read(buffer)) != -1) {
                out.write(buffer, 0, read);
            }
        }

        if (!temp.exists()) {
            throw new FileNotFoundException("Failed to copy file from jar at " + temp.getAbsolutePath());
        }

        System.load(temp.getAbsolutePath());
```

### DuplicatedCode
Duplicated code
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLedgerManager.java`
#### Snippet
```java
        ByteSequence ledgerKeyBs = ByteSequence.from(ledgerKey, StandardCharsets.UTF_8);
        final ByteSequence valueBs;
        try {
            valueBs = ByteSequence.from(serDe.serialize(metadata));
        } catch (IOException ioe) {
            promise.completeExceptionally(new BKException.BKMetadataSerializationException(ioe));
            return promise;
        }
```

### DuplicatedCode
Duplicated code
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLedgerManager.java`
#### Snippet
```java
        KeyStream<Long> ks = new KeyStream<>(
            kvClient,
            ByteSequence.from(EtcdUtils.getLedgerKey(scope, 0L), StandardCharsets.UTF_8),
            ByteSequence.from(EtcdUtils.getLedgerKey(scope, Long.MAX_VALUE), StandardCharsets.UTF_8),
            bs -> {
                UUID uuid = EtcdUtils.parseLedgerKey(bs.toString(StandardCharsets.UTF_8));
                return uuid.getLeastSignificantBits();
            }
        );
```

### DuplicatedCode
Duplicated code
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/helpers/KeySetReader.java`
#### Snippet
```java
        if (null != closeFuture) {
            return null;
        }
        if (log.isDebugEnabled()) {
            log.debug("Received watch response : revision = {}, {} events = {}",
                response.getHeader().getRevision(), response.getEvents().size(), response.getEvents());
        }

        if (response.getHeader().getRevision() <= revision) {
            return null;
        }
        revision = response.getHeader().getRevision();
```

### DuplicatedCode
Duplicated code
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/helpers/KeySetReader.java`
#### Snippet
```java
        CompletableFuture<EtcdWatcher> oldWatcherFuture;
        synchronized (this) {
            oldWatcherFuture = watchFuture;
            if (rewatch && null == closeFuture) {
                watchFuture = watch(revision);
            } else {
                watchFuture = null;
            }
        }
        if (null != oldWatcherFuture) {
            return oldWatcherFuture.thenCompose(EtcdWatcher::closeAsync);
        } else {
            return FutureUtils.Void();
        }
```

### DuplicatedCode
Duplicated code
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/helpers/KeySetReader.java`
#### Snippet
```java
        CompletableFuture<Void> future;
        synchronized (this) {
            if (null == closeFuture) {
                closeFuture = closeOrRewatch(false).thenCompose(ignored -> {
                    if (ownWatchClient) {
                        return watchClient.closeAsync();
                    } else {
                        return FutureUtils.Void();
                    }
                });
            }
            future = closeFuture;
        }
        return future;
```

### DuplicatedCode
Duplicated code
in `microbenchmarks/src/main/java/org/apache/bookkeeper/proto/ProtocolBenchmark.java`
#### Snippet
```java
        BKPacketHeader.Builder headerBuilder = BKPacketHeader.newBuilder()
                .setVersion(ProtocolVersion.VERSION_THREE)
                .setOperation(OperationType.ADD_ENTRY)
                .setTxnId(0L);

        ByteBuf toSend = entry.slice();
        byte[] toSendArray = new byte[toSend.readableBytes()];
        toSend.getBytes(toSend.readerIndex(), toSendArray);
        AddRequest.Builder addBuilder = AddRequest.newBuilder()
                .setLedgerId(ledgerId)
                .setEntryId(entryId)
                .setMasterKey(ByteString.copyFrom(masterKey))
                .setBody(ByteString.copyFrom(toSendArray))
                .setFlag(AddRequest.Flag.RECOVERY_ADD);
```

### DuplicatedCode
Duplicated code
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
        Txn<K, V> txn = txn(pKey);
        txn
            .If(
                opFactory().compareValue(CompareResult.EQUAL, lKey, null))
            .Then(
                opFactory().newPut(
                    lKey,
                    value,
                    opFactory().optionFactory().newPutOption().build()))
            .Else(
                newGet(lKey));
        return txn.commit()
            .thenCompose(result -> {
                try {
                    if (result.isSuccess()) {
                        return FutureUtils.value(null);
                    } else {
                        RangeResult<K, V> rangeResult = (RangeResult<K, V>) result.results().get(0);
                        if (rangeResult.kvs().isEmpty()) {
                            return FutureUtils.exception(
                                new KvApiException(
                                    Code.UNEXPECTED,
                                    "Key " + lKey + " not found when putIfAbsent failed"));
                        } else {
                            return FutureUtils.value(retain(rangeResult.kvs().get(0).value()));
                        }
                    }
                } finally {
                    result.close();
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
        Txn<K, V> txn = txn(pKey);
        txn
            .If(
                opFactory().compareVersion(CompareResult.EQUAL, lKey, expectedVersion))
            .Then(
                opFactory().newPut(
                    lKey,
                    value,
                    opFactory().optionFactory().newPutOption().build()));
        return txn.commit()
            .thenCompose(result -> {
                try {
                    if (result.isSuccess()) {
                        return FutureUtils.value(expectedVersion + 1);
                    } else {
                        return FutureUtils.exception(
                            new KvApiException(
                                Code.BAD_REVISION,
                                "Failed to vPut(" + lKey + ", " + value + ")@version=" + expectedVersion));
                    }
                } finally {
                    result.close();
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
            .thenApply(result -> {
                try {
                    List<KeyValue<K, V>> prevKvs = result.prevKvs();
                    if (prevKvs.isEmpty()) {
                        return null;
                    } else {
                        return retain(prevKvs.get(0).value());
                    }
                } finally {
                    result.close();
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
        Txn<K, V> txn = txn(pKey);
        txn
            .If(
                opFactory().compareValue(CompareResult.EQUAL, lKey, value))
            .Then(
                opFactory().newDelete(
                    lKey,
                    Options.deleteAndGet()));
        return txn.commit()
            .thenApply(result -> {
                try {
                    return result.isSuccess() && !result.results().isEmpty();
                } finally {
                    result.close();
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
        Txn<K, V> txn = txn(pKey);
        txn
            .If(
                opFactory().compareVersion(CompareResult.EQUAL, lKey, expectedVersion))
            .Then(
                opFactory().newDelete(
                    lKey,
                    Options.deleteAndGet()));
        return txn.commit()
            .thenCompose(result -> {
                try {
                    if (result.isSuccess()) {
                        DeleteResult<K, V> deleteResult = (DeleteResult<K, V>) result.results().get(0);
                        if (deleteResult.prevKvs().isEmpty()) {
                            return FutureUtils.value(null);
                        } else {
                            List<KeyValue<K, V>> prevKvs = deleteResult.getPrevKvsAndClear();
                            return FutureUtils.value(prevKvs.get(0));
                        }
                    } else {
                        return FutureUtils.exception(
                            new KvApiException(Code.BAD_REVISION,
                                "Failed to vDelete key " + lKey + " (version = " + expectedVersion + ")"));
                    }
                } finally {
                    result.close();
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
        Txn<K, V> txn = txn(pKey);
        txn
            .If(
                opFactory().compareModRevision(CompareResult.EQUAL, lKey, expectedRevision))
            .Then(
                opFactory().newDelete(
                    lKey,
                    Options.deleteAndGet()));
        return txn.commit()
            .thenCompose(result -> {
                try {
                    if (result.isSuccess()) {
                        DeleteResult<K, V> deleteResult = (DeleteResult<K, V>) result.results().get(0);
                        if (deleteResult.prevKvs().isEmpty()) {
                            return FutureUtils.value(null);
                        } else {
                            List<KeyValue<K, V>> prevKvs = deleteResult.getPrevKvsAndClear();
                            return FutureUtils.value(prevKvs.get(0));
                        }
                    } else {
                        return FutureUtils.exception(
                            new KvApiException(Code.BAD_REVISION,
                                "Failed to rDelete key " + lKey + " (mod_rev = " + expectedRevision + ")"));
                    }
                } finally {
                    result.close();
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannelManager.java`
#### Snippet
```java
        lock.writeLock().lock();
        try {
            if (closed) {
                return;
            }
            closed = true;
        } finally {
            lock.writeLock().unlock();
        }
        // close the channels
        channels.values().forEach(StorageServerChannel::close);
        channels.clear();
```

### DuplicatedCode
Duplicated code
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/internal/LocationClientImpl.java`
#### Snippet
```java
            Status status;
            if (cause instanceof StatusException) {
                status = ((StatusException) cause).getStatus();
            } else {
                status = ((StatusRuntimeException) cause).getStatus();
            }
            switch (status.getCode()) {
                case INVALID_ARGUMENT:
                case ALREADY_EXISTS:
                case PERMISSION_DENIED:
                case UNAUTHENTICATED:
                    return false;
                default:
                    return true;
            }
```

### DuplicatedCode
Duplicated code
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/internal/RootRangeClientImplWithRetries.java`
#### Snippet
```java
        if (cause instanceof StatusRuntimeException || cause instanceof StatusException) {
            Status status;
            if (cause instanceof StatusException) {
                status = ((StatusException) cause).getStatus();
            } else {
                status = ((StatusRuntimeException) cause).getStatus();
            }
            switch (status.getCode()) {
                case INVALID_ARGUMENT:
                case ALREADY_EXISTS:
                case PERMISSION_DENIED:
                case UNAUTHENTICATED:
                    return false;
                default:
                    return true;
            }
        } else if (cause instanceof RuntimeException) {
            return false;
        } else {
            // storage level exceptions
            return false;
        }
```

### DuplicatedCode
Duplicated code
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/routing/RangeRouter.java`
#### Snippet
```java
        HashStreamRanges rs;
        long stamp = lock.tryOptimisticRead();
        rs = ranges;
        if (!lock.validate(stamp)) {
            stamp = lock.readLock();
            try {
                rs = ranges;
            } finally {
                lock.unlockRead(stamp);
            }
        }
```

### DuplicatedCode
Duplicated code
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
        hash ^= length;
        hash ^= (hash >>> 16);
        hash *= 0x85ebca6b;
        hash ^= (hash >>> 13);
        hash *= 0xc2b2ae35;
        hash ^= (hash >>> 16);

        return hash;
```

### DuplicatedCode
Duplicated code
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
            k1 *= C1;
            k1 = Long.rotateLeft(k1, R1);
            k1 *= C2;
            h1 ^= k1;
            h1 = Long.rotateLeft(h1, R2);
            h1 += h2;
            h1 = h1 * M + N1;

            // mix functions for k2
            k2 *= C2;
            k2 = Long.rotateLeft(k2, R3);
            k2 *= C1;
            h2 ^= k2;
            h2 = Long.rotateLeft(h2, R1);
            h2 += h1;
            h2 = h2 * M + N2;
```

### DuplicatedCode
Duplicated code
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
        h1 ^= length;
        h2 ^= length;

        h1 += h2;
        h2 += h1;

        h1 = fmix64(h1);
        h2 = fmix64(h2);

        h1 += h2;
        h2 += h1;

        return new long[]{h1, h2};
```

### DuplicatedCode
Duplicated code
in `stream/common/src/main/java/org/apache/bookkeeper/common/util/ListenableFutures.java`
#### Snippet
```java
        CompletableFuture<R> completableFuture = createFuture();
        Futures.addCallback(listenableFuture, new FutureCallback<T>() {
            @Override
            public void onSuccess(T result) {
                try {
                    R uResult = mapFn.apply(result);
                    completableFuture.complete(uResult);
                } catch (Exception e) {
                    completableFuture.completeExceptionally(e);
                }
            }

            @Override
            public void onFailure(Throwable t) {
                completableFuture.completeExceptionally(t);
            }
        }, directExecutor());
        return completableFuture;
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
            if ((o1.getLogSegmentSequenceNumber() == DistributedLogConstants.UNASSIGNED_LOGSEGMENT_SEQNO)
                    || (o2.getLogSegmentSequenceNumber() == DistributedLogConstants.UNASSIGNED_LOGSEGMENT_SEQNO)) {
                if (o1.firstTxId < o2.firstTxId) {
                    return -1;
                } else if (o1.firstTxId == o2.firstTxId) {
                    return 0;
                } else {
                    return 1;
                }
            } else {
                if (o1.getLogSegmentSequenceNumber() < o2.getLogSegmentSequenceNumber()) {
                    return -1;
                } else if (o1.getLogSegmentSequenceNumber() == o2.getLogSegmentSequenceNumber()) {
                    // make sure we won't move over inprogress log segment if it still presents in the list
                    if (o1.isInProgress() && !o2.isInProgress()) {
                        return -1;
                    } else if (!o1.isInProgress() && o2.isInProgress()) {
                        return 1;
                    } else {
                        return 0;
                    }
                } else {
                    return 1;
                }
            }
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
            long recordCount = (versionStatusCount & LOGRECORD_COUNT_MASK) >> LOGRECORD_COUNT_SHIFT;
            assert (recordCount >= Integer.MIN_VALUE && recordCount <= Integer.MAX_VALUE);

            long logSegmentId = Long.parseLong(parts[1]);
            long firstTxId = Long.parseLong(parts[2]);
            long lastTxId = Long.parseLong(parts[3]);
            long completionTime = Long.parseLong(parts[4]);
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
            long logSegmentId = Long.parseLong(parts[1]);
            long txId = Long.parseLong(parts[2]);
            long logSegmentSequenceNumber = Long.parseLong(parts[3]);
            long minActiveEntryId = Long.parseLong(parts[4]);
            long minActiveSlotId = Long.parseLong(parts[5]);
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
        LogSegmentMetadataVersion llmv = LogSegmentMetadataVersion.of((int) version);

        int regionId = (int) ((versionStatusCount & REGION_MASK) >> REGION_SHIFT);
        assert (regionId >= 0 && regionId <= 0xf);

        long status = (versionStatusCount & STATUS_BITS_MASK) >> STATUS_BITS_SHIFT;
        assert (status >= 0 && status <= METADATA_STATUS_BIT_MAX);
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/auditor/DLAuditor.java`
#### Snippet
```java
        String zkServers = validateAndGetZKServers(uris);
        RetryPolicy retryPolicy = new BoundExponentialBackoffRetryPolicy(
                conf.getZKRetryBackoffStartMillis(),
                conf.getZKRetryBackoffMaxMillis(),
                Integer.MAX_VALUE);
        ZooKeeperClient zkc = ZooKeeperClientBuilder.newBuilder()
                .name("DLAuditor-ZK")
                .zkServers(zkServers)
                .sessionTimeoutMs(conf.getZKSessionTimeoutMilliseconds())
                .retryPolicy(retryPolicy)
                .zkAclId(conf.getZkAclId())
                .build();
        ExecutorService executorService = Executors.newCachedThreadPool();
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/auditor/DLAuditor.java`
#### Snippet
```java
        AsyncCallback.VoidCallback finalCb = new AsyncCallback.VoidCallback() {
            @Override
            public void processResult(int rc, String path, Object ctx) {
                if (BKException.Code.OK == rc) {
                    doneFuture.complete(null);
                } else {
                    doneFuture.completeExceptionally(BKException.create(rc));
                }
            }
        };
        lm.asyncProcessLedgers(collector, finalCb, null, BKException.Code.OK,
                BKException.Code.ZKException);
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/net/DNSResolverForRacks.java`
#### Snippet
```java
        String[] parts = domainName.split("\\.");
        if (parts.length <= 0) {
            return DEFAULT_RACK;
        }

        String hostName = parts[0];
        String[] labels = hostName.split("-");
        if (labels.length != 4) {
            return DEFAULT_RACK;
        }

        String region = hostNameToRegion.get(hostName);
        if (null == region) {
            region = labels[0];
        }
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        ZooKeeper zk;
        try {
            zk = zkc.get();
        } catch (ZooKeeperClient.ZooKeeperConnectionException e) {
            return FutureUtils.exception(zkException(e, path));
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
            return FutureUtils.exception(zkException(e, path));
        }
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
            (cause) -> {
                if (cause instanceof IOException) {
                    return (IOException) cause;
                } else if (cause instanceof KeeperException) {
                    return new ZKException("Encountered zookeeper exception on waiting result",
                        (KeeperException) cause);
                } else if (cause instanceof BKException) {
                    return new BKTransmitException("Encountered bookkeeper exception on waiting result",
                        ((BKException) cause).getCode());
                } else if (cause instanceof InterruptedException) {
                    return new DLInterruptedException("Interrupted on waiting result", cause);
                } else {
                    return new IOException("Encountered exception on waiting result", cause);
                }
            });
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
        if (this.pos == pos) {
            return;
        }

        if (this.pos > pos || (pos - this.pos) >= REOPEN_READER_SKIP_BYTES) {
            // close the previous reader
            this.reader.close();
            this.reader = dlm.openLogReader(pos);
            this.currentRecord = null;
        }

        skipTo(pos);
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
        while (true) {
            if (null == currentRecord) {
                currentRecord = nextRecordStream(reader);
            }

            if (null == currentRecord) { // the stream is empty now
                return false;
            }

            long endPos = currentRecord.record.getTransactionId();
            if (endPos < position) {
                currentRecord = nextRecordStream(reader);
                this.pos = endPos;
                continue;
            } else if (endPos == position){
                // find the record, but we defer read next record when actual read happens
                this.pos = position;
                this.currentRecord = null;
                return true;
            } else {
                this.currentRecord.payloadStream.skip(
                    this.currentRecord.payloadStream.available() - (endPos - position));
                this.pos = position;
                return true;
            }
        }
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
        int remaining = len;
        int numBytesRead = 0;
        while (remaining > 0) {
            if (null == currentRecord) {
                currentRecord = nextRecordStream(reader);
            }

            if (null == currentRecord) {
                if (numBytesRead == 0) {
                    return -1;
                }
                break;
            }

            int bytesLeft = currentRecord.payloadStream.available();
            if (bytesLeft <= 0) {
                currentRecord.payloadStream.close();
                currentRecord = null;
                continue;
            }

            int numBytesToRead = Math.min(bytesLeft, remaining);
            int numBytes = currentRecord.payloadStream.read(b, off + numBytesRead, numBytesToRead);
            if (numBytes < 0) {
                continue;
            }
            numBytesRead += numBytes;
            remaining -= numBytes;
        }
        return numBytesRead;
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
        if (n <= 0L) {
            return 0L;
        }

        long remaining = n;
        while (true) {
            if (null == currentRecord) {
                currentRecord = nextRecordStream(reader);
            }

            if (null == currentRecord) { // end of stream
                return n - remaining;
            }

            int bytesLeft = currentRecord.payloadStream.available();
            long endPos = currentRecord.record.getTransactionId();
            if (remaining > bytesLeft) {
                // skip the whole record
                remaining -= bytesLeft;
                this.pos = endPos;
                this.currentRecord = nextRecordStream(reader);
                continue;
            } else if (remaining == bytesLeft) {
                this.pos = endPos;
                this.currentRecord = null;
                return n;
            } else {
                currentRecord.payloadStream.skip(remaining);
                this.pos = endPos - currentRecord.payloadStream.available();
                return n;
            }
        }
```

### DuplicatedCode
Duplicated code
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLOutputStream.java`
#### Snippet
```java
        writer.write(record).whenComplete(new FutureEventListener<DLSN>() {
            @Override
            public void onSuccess(DLSN value) {
                synchronized (syncPos) {
                    syncPos[0] = record.getTransactionId();
                }
            }

            @Override
            public void onFailure(Throwable cause) {
                exceptionUpdater.compareAndSet(DLOutputStream.this, null, cause);
            }
        });
```

### DuplicatedCode
Duplicated code
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/mvcc/MVCCAsyncStore.java`
#### Snippet
```java
                    List<Result<K, V>> subResults = result.results();
                    DeleteResult<K, V> deleteResult = (DeleteResult<K, V>) subResults.get(0);
                    List<KeyValue<K, V>> prevKvs = deleteResult.getPrevKvsAndClear();
                    if (prevKvs.isEmpty()) {
                        return FutureUtils.value(null);
                    } else {
                        return FutureUtils.value(prevKvs.get(0));
                    }
```

### DuplicatedCode
Duplicated code
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/op/proto/ProtoDeleteOpImpl.java`
#### Snippet
```java
        if (null != endKey) {
            return endKey;
        }
        if (null == req.getRangeEnd()
            || 0 == req.getRangeEnd().size()
            || (1 == req.getRangeEnd().size() && req.getRangeEnd().byteAt(0) == 0)) {
            endKey = null;
        } else {
            endKey = req.getRangeEnd().toByteArray();
        }
        return endKey;
```

### DuplicatedCode
Duplicated code
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/kv/TableStoreImpl.java`
#### Snippet
```java
        ByteString rKey = header.getRKey();
        ByteString lKey = request.getKey();
        ByteString lEndKey = request.getRangeEnd();
        byte[] storeKey = newStoreKey(rKey, lKey);
        byte[] storeEndKey = null;
        if (null != lEndKey && lEndKey.size() > 0) {
            storeEndKey = newStoreKey(rKey, lEndKey);
        }
```

## RuleId[id=CatchMayIgnoreException]
### CatchMayIgnoreException
Empty `catch` block
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Shell.java`
#### Snippet
```java
        try {
            errThread.start();
        } catch (IllegalStateException ise) {
        }
        try {
```

### CatchMayIgnoreException
Empty `catch` block
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
                    localList.clear();
                }
            } catch (InterruptedException ie) {
            }
        }
```

### CatchMayIgnoreException
Empty `catch` block
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
                    batchedArrayBlockingQueue.takeAll(localArray);
                }
            } catch (InterruptedException ie) {
            }
        }
```

## RuleId[id=MismatchedJavadocCode]
### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataClientDriver.java`
#### Snippet
```java
     * Return health check is enable or disable.
     *
     * @return true if health check is enable, otherwise false.
     */
    default CompletableFuture<Boolean> isHealthCheckEnabled() {
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataBookieDriver.java`
#### Snippet
```java
     * Return health check is enable or disable.
     *
     * @return true if health check is enable, otherwise false.
     */
    default CompletableFuture<Boolean>  isHealthCheckEnabled() {
```

### MismatchedJavadocCode
Method is specified to return list but the return type is map
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java`
#### Snippet
```java
         * Return the list of bookies that already failed.
         *
         * @return the list of bookies that already failed.
         */
        Map<Integer, BookieId> getFailedBookies();
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * Whether log segment sequence number validation is enabled?
     *
     * @return true if the log segment sequence number validation is enabled, otherwise false.
     */
    public DistributedLogConfiguration setLogSegmentSequenceNumberValidationEnabled(boolean enabled) {
```

## RuleId[id=IOStreamConstructor]
### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `stats/utils/src/main/java/org/apache/bookkeeper/stats/utils/StatsDocGenerator.java`
#### Snippet
```java
            writer = new OutputStreamWriter(System.out, UTF_8);
        } else {
            writer = new OutputStreamWriter(new FileOutputStream(file), UTF_8);
        }
        try {
```

### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java

        // dump the latencies for later debugging (it will be sorted by entryid)
        OutputStream fos = new BufferedOutputStream(new FileOutputStream(latencyFile));

        for (Long l: latency) {
```

### IOStreamConstructor
'InputStream' can be constructed using 'Files.newInputStream()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java

        try (BufferedReader reader = new BufferedReader(
            new InputStreamReader(new FileInputStream(file), UTF_8))) {
            return parse(reader);
        }
```

### IOStreamConstructor
'InputStream' can be constructed using 'Files.newInputStream()'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
        File versionFile = new File(directory, BookKeeperConstants.VERSION_FILENAME);
        try (BufferedReader reader = new BufferedReader(
                new InputStreamReader(new FileInputStream(versionFile), UTF_8))) {
            return parse(reader).build();
        }
```

### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/fs/FSCheckpointManager.java`
#### Snippet
```java
    @Override
    public OutputStream openOutputStream(String filePath) throws IOException {
        return new FileOutputStream(getFullyQualifiedPath(filePath));
    }

```

### IOStreamConstructor
'InputStream' can be constructed using 'Files.newInputStream()'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/fs/FSCheckpointManager.java`
#### Snippet
```java
    @Override
    public InputStream openInputStream(String filePath) throws IOException {
        return new FileInputStream(getFullyQualifiedPath(filePath));
    }

```

### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java

        try {
            OutputStream out = new FileOutputStream(temp);
            try {
                while ((read = input.read(buffer)) != -1) {
```

### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `native-io/src/main/java/org/apache/bookkeeper/common/util/nativeio/NativeUtils.java`
#### Snippet
```java

        try (InputStream input = NativeUtils.class.getResourceAsStream(path);
             OutputStream out = new FileOutputStream(temp)) {
            if (input == null) {
                throw new FileNotFoundException("Couldn't find file into jar " + path);
```

### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `cpu-affinity/src/main/java/org/apache/bookkeeper/common/util/affinity/impl/NativeUtils.java`
#### Snippet
```java

        try (InputStream input = NativeUtils.class.getResourceAsStream(path);
                OutputStream out = new FileOutputStream(temp)) {
            if (input == null) {
                throw new FileNotFoundException("Couldn't find file into jar " + path);
```

### IOStreamConstructor
'OutputStream' can be constructed using 'Files.newOutputStream()'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java

        void dumpLedgers(Set<Long> ledgers, File targetFile) throws Exception {
            PrintWriter pw = new PrintWriter(new OutputStreamWriter(new FileOutputStream(targetFile), UTF_8.name()));
            try {
                for (Long ledger : ledgers) {
```

## RuleId[id=CollectionAddAllCanBeReplacedWithConstructor]
### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/DNS.java`
#### Snippet
```java
        // For example, getDefaultIP always returns the first element.
        LinkedHashSet<InetAddress> allAddrs = new LinkedHashSet<InetAddress>();
        allAddrs.addAll(Collections.list(netIf.getInetAddresses()));
        if (!returnSubinterfaces) {
            allAddrs.removeAll(getSubinterfaceInetAddrs(netIf));
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieNettyServer.java`
#### Snippet
```java
                            }
                            List<Object> result = new ArrayList<>();
                            result.addAll(Arrays.asList(certificates));
                            return result;
                        } catch (SSLPeerUnverifiedException err) {
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
                    }
                    List<Object> result = new ArrayList<>();
                    result.addAll(Arrays.asList(certificates));
                    return result;
                } catch (SSLPeerUnverifiedException err) {
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileSystemUpgrade.java`
#### Snippet
```java
    public static List<File> getAllDirectories(ServerConfiguration conf) {
        List<File> dirs = new ArrayList<>();
        dirs.addAll(Lists.newArrayList(conf.getJournalDirs()));
        final File[] ledgerDirs = conf.getLedgerDirs();
        final File[] indexDirs = conf.getIndexDirs();
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java

        Set<LedgerFragment> dataLossFragments = getDataLossFragments(lh, ledgerVerificationPercentage);
        underreplicatedFragments.addAll(dataLossFragments);

        Set<LedgerFragment> notAdheringFragments = getNeedRepairedPlacementNotAdheringFragments(lh);
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogHandler.java`
#### Snippet
```java
                                            final CompletableFuture<Versioned<List<LogSegmentMetadata>>> readResult) {
        Set<String> segmentsReceived = new HashSet<String>();
        segmentsReceived.addAll(segmentFilter.filter(logSegmentNames.getValue()));
        Set<String> segmentsAdded;
        final Set<String> removedSegments = Collections.synchronizedSet(new HashSet<String>());
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/acl/ZKAccessControlManager.java`
#### Snippet
```java
                    }
                    Set<String> streamsReceived = new HashSet<String>();
                    streamsReceived.addAll(children);
                    Set<String> streamsCached = streamEntries.keySet();
                    Set<String> streamsRemoved = Sets.difference(streamsCached, streamsReceived).immutableCopy();
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/admin/DistributedLogAdmin.java`
#### Snippet
```java
        final LinkedBlockingQueue<String> streamQueue =
                new LinkedBlockingQueue<String>();
        streamQueue.addAll(streams);
        final Map<String, StreamCandidate> candidateMap =
                new ConcurrentSkipListMap<String, StreamCandidate>();
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
                final LinkedBlockingQueue<Long> ledgerQueue =
                        new LinkedBlockingQueue<Long>();
                ledgerQueue.addAll(ledgers);
                for (int i = 0; i < numThreads; i++) {
                    final int tid = i;
```

## RuleId[id=InnerClassMayBeStatic]
### InnerClassMayBeStatic
Inner class `BookieSideConnectionPeerContextHandler` may be 'static'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieNettyServer.java`
#### Snippet
```java
    }

    class BookieSideConnectionPeerContextHandler extends ChannelInboundHandlerAdapter {

        final BookieConnectionPeer connectionPeer;
```

### InnerClassMayBeStatic
Inner class `CompletionKey` may be 'static'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
    }

    abstract class CompletionKey {
        final long txnId;
        OperationType operationType;
```

### InnerClassMayBeStatic
Inner class `MyCommand` may be 'static'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
    }

    abstract class MyCommand implements Command {
        abstract Options getOptions();

```

### InnerClassMayBeStatic
Inner class `BindCommand` may be 'static'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/admin/DistributedLogAdmin.java`
#### Snippet
```java
     * TODO: move bind to namespace driver
     */
    class BindCommand extends OptsCommand {

        Options options = new Options();
```

### InnerClassMayBeStatic
Inner class `UnbindCommand` may be 'static'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/admin/DistributedLogAdmin.java`
#### Snippet
```java
     * TODO: move unbind operation to namespace driver
     */
    class UnbindCommand extends OptsCommand {

        Options options = new Options();
```

## RuleId[id=DanglingJavadoc]
### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
            writeHeader(os, METADATA_FORMAT_VERSION_2);
            try (PrintWriter writer = new PrintWriter(new OutputStreamWriter(os, UTF_8.name()))) {
                /***********************************************************************
                 * WARNING: Do not modify to add fields.
                 * This code is purposefully duplicated, as version 2 does not support adding
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
                }

                /** Hack to get around fact that ctime was never versioned correctly */
                if (LedgerMetadataUtils.shouldStoreCtime(metadata)) {
                    builder.setCtime(metadata.getCtime());
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
            }

            /** Hack to get around fact that ctime was never versioned correctly */
            if (LedgerMetadataUtils.shouldStoreCtime(metadata)) {
                builder.setCtime(metadata.getCtime());
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookkeeperInternalCallbacks.java`
#### Snippet
```java
    static final Logger LOG = LoggerFactory.getLogger(BookkeeperInternalCallbacks.class);

    /**
     * Callback for calls from BookieClient objects. Such calls are for replies
     * of write operations (operations to add an entry to a ledger).
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java
                    } else {
                        int entrySize = entry.readableBytes();
                        /**
                         * entrySize of an entry (inclusive of payload and
                         * header) value is stored as int value in log file, but
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java
    }

    /**
     * Note : Helper functions follow
     */
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForSingleEntryLog.java`
#### Snippet
```java
        BufferedLogChannel currentActiveLogChannel = activeLogChannel;
        if (currentActiveLogChannel != null) {
            /**
             * flushCurrentLogs method is called during checkpoint, so
             * metadata of the file also should be force written.
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
        Set<BufferedLogChannelWithDirInfo> copyOfCurrentLogsWithDirInfo = getCopyOfCurrentLogs();
        for (BufferedLogChannelWithDirInfo logChannelWithDirInfo : copyOfCurrentLogsWithDirInfo) {
            /**
             * flushCurrentLogs method is called during checkpoint, so metadata
             * of the file also should be force written.
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogManagerForEntryLogPerLedger.java`
#### Snippet
```java
            boolean allDisksFull = !ledgerDirsManager.hasWritableLedgerDirs();

            /**
             * if disk of the logChannel is full or if the entrylog limit is
             * reached of if the logchannel is not initialized, then
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/EntryLocationIndex.java`
#### Snippet
```java
                log.debug("Ledger {} already deleted in db", ledgerId);
            }
            /**
             * when Ledger already deleted,
             * throw Bookie.NoEntryException same like  the method
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataBuilder.java`
#### Snippet
```java
        builder.ctime = other.getCtime();

        /** Hack to get around fact that ctime was never versioned correctly */
        builder.storeCtime = LedgerMetadataUtils.shouldStoreCtime(other);

```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java`
#### Snippet
```java
        startTime = MathUtils.nowInNano();

        /**
         * Asynchronously read the ledger metadata node.
         */
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RegionAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
    public PlacementPolicyAdherence isEnsembleAdheringToPlacementPolicy(List<BookieId> ensembleList,
            int writeQuorumSize, int ackQuorumSize) {
        /**
         * TODO: have to implement actual logic for this method for
         * RegionAwareEnsemblePlacementPolicy. For now return true value.
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerRecoveryOp.java`
#### Snippet
```java
                        if (rc == BKException.Code.OK) {
                            synchronized (lh) {
                                /**
                                 The lowest an LAC can be for use in recovery is the first entry id
                                 of the current ensemble - 1.
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerRecoveryOp.java`
#### Snippet
```java
                });

        /**
         * Enable fencing on this op. When the read request reaches the bookies
         * server it will fence off the ledger, stopping any subsequent operation
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingAddOp.java`
#### Snippet
```java

    private synchronized void maybeRecycle() {
        /**
         * We have opportunity to recycle two objects here.
         * PendingAddOp#toSend and LedgerHandle#pendingAddOp
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListDiskFilesService.java`
#### Snippet
```java

        if (HttpServer.Method.GET == request.getMethod()) {
            /**
             * output:
             *  {
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/ListBookieInfoService.java`
#### Snippet
```java
            }

            /**
             * output:
             *  {
```

### DanglingJavadoc
Dangling Javadoc comment
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/GetLastLogMarkService.java`
#### Snippet
```java
        if (HttpServer.Method.GET == request.getMethod()) {
            try {
                /**
                 * output:
                 *  {
```

### DanglingJavadoc
Dangling Javadoc comment
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAbstractLogWriter.java`
#### Snippet
```java
        FutureUtils.proxyTo(
            Utils.closeSequence(bkDistributedLogManager.getScheduler(),
                    true, /** ignore close errors **/
                    getCachedLogWriter(),
                    getAllocatedLogWriter(),
```

### DanglingJavadoc
Dangling Javadoc comment
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
                      FeatureProvider featureProvider,
                      DynamicDistributedLogConfiguration dynConf,
                      DistributedLock lock /** owned by handler **/) {
        super(logMetadata,
                conf,
```

### DanglingJavadoc
Dangling Javadoc comment
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogWriter.java`
#### Snippet
```java
                     DynamicDistributedLogConfiguration dynConf,
                     BKDistributedLogManager bkdlm,
                     BKLogWriteHandler writeHandler, /** log writer owns the handler **/
                     FeatureProvider featureProvider,
                     StatsLogger dlmStatsLogger) {
```

### DanglingJavadoc
Dangling Javadoc comment
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
                                 int logSegmentMetadataVersion,
                                 LogSegmentEntryWriter entryWriter,
                                 DistributedLock lock, /** the lock needs to be acquired **/
                                 long startTxId,
                                 long logSegmentSequenceNumber,
```

### DanglingJavadoc
Dangling Javadoc comment
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
        CompletableFuture<Versioned<List<String>>> result = ((CompletableFuture<Versioned<List<String>>>) ctx);
        if (KeeperException.Code.OK.intValue() == rc) {
            /** cversion: the number of changes to the children of this znode **/
            LongVersion zkVersion = new LongVersion(stat.getCversion());
            result.complete(new Versioned(children, zkVersion));
```

## RuleId[id=UnnecessaryInitCause]
### UnnecessaryInitCause
Unnecessary `Throwable.initCause()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookies/RecoverCommand.java`
#### Snippet
```java
            } else {
                BKException bke = new BKException.MetaStoreException();
                bke.initCause(bke);
                throw bke;
            }
```

### UnnecessaryInitCause
Unnecessary `Throwable.initCause()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BKException.java`
#### Snippet
```java
        } else {
            BKException ex = new BKException(Code.UnexpectedConditionException);
            ex.initCause(cause);
            return ex;
        }
```

### UnnecessaryInitCause
Unnecessary `Throwable.initCause()` call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerInputStream.java`
#### Snippet
```java
            } catch (BKException bk) {
                IOException ie = new IOException(bk.getMessage());
                ie.initCause(bk);
                throw ie;
            } catch (InterruptedException ie) {
```

## RuleId[id=TrivialIf]
### TrivialIf
`if` statement can be simplified
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/internal/LocationClientImpl.java`
#### Snippet
```java
                    return true;
            }
        } else if (cause instanceof RuntimeException) {
            return false;
        } else {
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieId.java`
#### Snippet
```java
        }
        final BookieId other = (BookieId) obj;
        if (!Objects.equals(this.id, other.id)) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslClientState.java`
#### Snippet
```java
                                String authid = ac.getAuthenticationID();
                                String authzid = ac.getAuthorizationID();
                                if (authid.equals(authzid)) {
                                    ac.setAuthorized(true);
                                } else {
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory.java`
#### Snippet
```java
                                String authid = ac.getAuthenticationID();
                                String authzid = ac.getAuthorizationID();
                                if (authid.equals(authzid)) {
                                    ac.setAuthorized(true);
                                } else {
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/LostBookieRecoveryDelayCommand.java`
#### Snippet
```java
        boolean getter = flags.get;
        boolean setter = false;
        if (flags.set != DEFAULT) {
            setter = true;
        }
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java

            boolean printMsg = false;
            if (cmdLine.hasOption("m")) {
                printMsg = true;
            }
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java

            boolean printMsg = false;
            if (cmdLine.hasOption("m")) {
                printMsg = true;
            }
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/TopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
                        numRacks++;
                    }
                    if (numRacks >= minNumRacksPerWriteQuorum
                            || ((writeQuorumSize - seenBookies - 1) >= (minNumRacksPerWriteQuorum - numRacks))) {
                        /*
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
            parent.checkClosed();
            if (currentRange != null) {
                if (currentRange.hasNext()) {
                    return true;
                }
```

### TrivialIf
`if` statement can be simplified
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
                    return true;
                }
            } else if (iterator.hasNext()) {
                return true;
            }
```

## RuleId[id=SynchronizeOnNonFinalField]
### SynchronizeOnNonFinalField
Synchronization on a non-final field `metadataLock`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadOnlyLedgerHandle.java`
#### Snippet
```java
    @Override
    List<BookieId> getCurrentEnsemble() {
        synchronized (metadataLock) {
            if (!newEnsemblesFromRecovery.isEmpty()) {
                return newEnsemblesFromRecovery.lastEntry().getValue();
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `metadataLock`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadOnlyLedgerHandle.java`
#### Snippet
```java
                    LedgerMetadataBuilder builder = LedgerMetadataBuilder.from(metadata);
                    Long lastEnsembleKey = LedgerMetadataUtils.getLastEnsembleKey(metadata);
                    synchronized (metadataLock) {
                        newEnsemblesFromRecovery.entrySet().forEach(
                                (e) -> {
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `metadataLock`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadOnlyLedgerHandle.java`
#### Snippet
```java
                this::setLedgerMetadata).run();
        f.whenComplete((result, exception) -> {
            synchronized (metadataLock) {
                newEnsemblesFromRecovery.clear();
            }
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `metadataLock`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadOnlyLedgerHandle.java`
#### Snippet
```java
        // ledger, so this synchronized should be unnecessary, but putting it here now
        // just in case (can be removed when we validate threads)
        synchronized (metadataLock) {
            String logContext = String.format("[RecoveryEnsembleChange(ledger:%d)]", ledgerId);

```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `watcherMap`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java

    private void triggerWatch(String key, MSWatchedEvent.EventType type) {
        synchronized (watcherMap){
            if (watcherMap.containsKey(key)) {
                MSWatchedEvent event = new MSWatchedEvent(key, type);
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `watcherMap`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
            public void run() {
                scheduleGet(key, ALL_FIELDS, cb, ctx);
                synchronized (watcherMap) {
                    watcherMap.put(key, watcher);
                }
```

## RuleId[id=NonStrictComparisonCanBeEquality]
### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/Etcd64bitIdGenerator.java`
#### Snippet
```java
        txn.commit()
            .thenAccept(txnResponse -> {
                if (txnResponse.getGetResponses().size() <= 0) {
                    cb.operationComplete(Code.UnexpectedConditionException, null);
                } else {
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerAuditorManager.java`
#### Snippet
```java

                List<String> children = zkc.getChildren(getVotePath(""), false);
                if (0 >= children.size()) {
                    throw new IllegalArgumentException(
                            "At least one bookie server should present to elect the Auditor!");
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
        public int runCmd(CommandLine cmdLine) throws Exception {
            String[] leftArgs = cmdLine.getArgs();
            if (leftArgs.length <= 0) {
                System.err.println("ERROR: missing entry log id or entry log file name");
                printUsage();
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
    @Override
    public int run(String[] args) throws Exception {
        if (args.length <= 0) {
            printShellUsage();
            return -1;
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
        public int runCmd(CommandLine cmdLine) throws Exception {
            String[] leftArgs = cmdLine.getArgs();
            if (leftArgs.length <= 0) {
                System.err.println("ERROR: missing journal id or journal file name");
                printUsage();
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieShell.java`
#### Snippet
```java
            ReadLogMetadataCommand.ReadLogMetadataFlags flags = new ReadLogMetadataCommand.ReadLogMetadataFlags();
            String[] leftArgs = cmdLine.getArgs();
            if (leftArgs.length <= 0) {
                LOG.error("ERROR: missing entry log id or entry log file name");
                printUsage();
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DefaultEnsemblePlacementPolicy.java`
#### Snippet
```java
            throws BKNotEnoughBookiesException {
        ArrayList<BookieId> newBookies = new ArrayList<BookieId>(ensembleSize);
        if (ensembleSize <= 0) {
            return PlacementResult.of(newBookies, PlacementPolicyAdherence.FAIL);
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
    private static boolean containBookiesInLastEnsemble(LedgerMetadata lm,
                                                        Set<BookieId> bookies) {
        if (lm.getAllEnsembles().size() <= 0) {
            return false;
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksCheckpointer.java`
#### Snippet
```java
        String dbPrefix, CheckpointStore checkpointStore) {
        List<CheckpointInfo> checkpoints = getCheckpoints(dbPrefix, checkpointStore);
        if (checkpoints.size() <= 0) {
            // Even if there are not checkpoints available, there should be a
            // nullCheckpoint in the list
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
    String getSegmentName() {
        String[] parts = this.zkPath.split("/");
        if (parts.length <= 0) {
            throw new IllegalStateException("ZK Path is not valid");
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/net/DNSResolverForRacks.java`
#### Snippet
```java
    protected String resolveToNetworkLocation(String domainName) {
        String[] parts = domainName.split("\\.");
        if (parts.length <= 0) {
            return DEFAULT_RACK;
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/net/DNSResolverForRows.java`
#### Snippet
```java
    protected String resolveToNetworkLocation(String domainName) {
        String[] parts = domainName.split("\\.");
        if (parts.length <= 0) {
            return DEFAULT_ROW;
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
    private String getNamespaceFromZkPath(String zkPath) throws UnexpectedException {
        String[] parts = zkPath.split(SUB_NAMESPACE_PREFIX);
        if (parts.length <= 0) {
            throw new UnexpectedException("Invalid namespace @ " + zkPath);
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/DLUtils.java`
#### Snippet
```java
            }
        }
        if (found <= -1) {
            return -1;
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/Tool.java`
#### Snippet
```java

    public int run(String[] args) throws Exception {
        if (args.length <= 0) {
            printToolUsage();
            return -1;
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/Tool.java`
#### Snippet
```java
    public static void main(String[] args) {
        int rc = -1;
        if (args.length <= 0) {
            System.err.println("No tool to run.");
            System.err.println();
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/admin/DistributedLogAdmin.java`
#### Snippet
```java
        protected int runCmd(CommandLine cmdline) throws Exception {
            String[] args = cmdline.getArgs();
            if (args.length <= 0) {
                System.err.println("No distributedlog uri specified.");
                printUsage();
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/admin/DistributedLogAdmin.java`
#### Snippet
```java
            }
            String[] args = cmdline.getArgs();
            if (args.length <= 0) {
                System.err.println("No distributedlog uri specified.");
                printUsage();
```

## RuleId[id=OptionalUsedAsFieldOrParameterType]
### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'interceptor'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannel.java`
#### Snippet
```java
        return new Function<Endpoint, StorageServerChannel>() {

            private final Optional<MonitoringClientInterceptor> interceptor =
                settings.statsLogger().map(statsLogger ->
                    MonitoringClientInterceptor.create(statsLogger, true));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'token'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannel.java`
#### Snippet
```java

    private StorageServerChannel(Channel channel,
                                 Optional<String> token,
                                 StorageServerChannel interceptedServerChannel) {
        this.token = token;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'token'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannel.java`
#### Snippet
```java
    }

    private final Optional<String> token;
    private final Channel channel;
    private final StorageServerChannel interceptedServerChannel;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'token'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannel.java`
#### Snippet
```java
    @SuppressWarnings("deprecation")
    public StorageServerChannel(Endpoint endpoint,
                                Optional<String> token,
                                boolean usePlainText,
                                EndpointResolver endpointResolver) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'token'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannel.java`
#### Snippet
```java

    protected StorageServerChannel(Channel channel,
                                   Optional<String> token) {
        this(channel, token, null);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'token'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/impl/channel/StorageServerChannel.java`
#### Snippet
```java
    @VisibleForTesting
    public StorageServerChannel(ManagedChannel channel,
                                Optional<String> token) {
        this((Channel) channel, token);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'clazz'
in `bookkeeper-slogger/api/src/main/java/org/apache/bookkeeper/slogger/AbstractSlogger.java`
#### Snippet
```java
    }

    protected abstract Slogger newSlogger(Optional<Class<?>> clazz, Iterable<Object> parent);
    protected abstract void doLog(Level level, Enum<?> event, String message,
                                  Throwable throwable, List<Object> keyValues);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'token'
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/utils/GrpcUtils.java`
#### Snippet
```java
     * @return a configured grpc stub.
     */
    public static <T extends AbstractStub<T>> T configureGrpcStub(T stub, Optional<String> token) {
        return token.map(t -> {
            Metadata metadata = new Metadata();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'poolMxBeanOp'
in `stats/bookkeeper-stats-providers/otel-metrics-provider/src/main/java/org/apache/bookkeeper/stats/otel/OtelMetricsProvider.java`
#### Snippet
```java
     */
    private static final AtomicLong directMemoryUsage;
    private static final Optional<BufferPoolMXBean> poolMxBeanOp;
    private static final Supplier<Double> getDirectMemoryUsage;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'completedLatencyMicros'
in `stream/common/src/main/java/org/apache/bookkeeper/common/grpc/stats/ServerStats.java`
#### Snippet
```java
    private final Counter streamMessagesReceived;
    private final Counter streamMessagesSent;
    private final Optional<OpStatsLogger> completedLatencyMicros;

    private ServerStats(StatsLogger rootStatsLogger,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'completedLatencyMicros'
in `stream/common/src/main/java/org/apache/bookkeeper/common/grpc/stats/ClientStats.java`
#### Snippet
```java
    private final Counter streamMessagesReceived;
    private final Counter streamMessagesSent;
    private final Optional<OpStatsLogger> completedLatencyMicros;

    private ClientStats(StatsLogger rootStatsLogger,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'socketAddress'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieSocketAddress.java`
#### Snippet
```java
    private final String hostname;
    private final int port;
    private final Optional<InetSocketAddress> socketAddress;

    // Constructor that takes in both a port.
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ctx'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataClientDriver.java`
#### Snippet
```java
                                    ScheduledExecutorService scheduler,
                                    StatsLogger statsLogger,
                                    Optional<Object> ctx)
        throws MetadataException;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'metadataStoreCtime'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
    }

    private static LedgerMetadata parseVersion3Config(long ledgerId, InputStream is, Optional<Long> metadataStoreCtime)
            throws IOException {
        LedgerMetadataBuilder builder = LedgerMetadataBuilder.create()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'metadataStoreCtime'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
    }

    private static LedgerMetadata parseVersion2Config(long ledgerId, InputStream is, Optional<Long> metadataStoreCtime)
            throws IOException {
        LedgerMetadataBuilder builder = LedgerMetadataBuilder.create()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'metadataStoreCtime'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
    public LedgerMetadata parseConfig(byte[] bytes,
                                      long ledgerId,
                                      Optional<Long> metadataStoreCtime) throws IOException {
        if (log.isDebugEnabled()) {
            log.debug("Deserializing {}", Base64.getEncoder().encodeToString(bytes));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalCtx'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/zk/ZKMetadataDriverBase.java`
#### Snippet
```java
                              StatsLogger statsLogger,
                              RetryPolicy zkRetryPolicy,
                              Optional<Object> optionalCtx) throws MetadataException {
        this.conf = conf;
        this.acls = ZkUtils.getACLs(conf);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ledgerZNodeVersion'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java`
#### Snippet
```java
    private static class Lock {
        private final String lockZNode;
        private final Optional<Integer> ledgerZNodeVersion;

        Lock(String lockZNode, Optional<Integer> ledgerZNodeVersion) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ledgerZNodeVersion'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java`
#### Snippet
```java
        private final Optional<Integer> ledgerZNodeVersion;

        Lock(String lockZNode, Optional<Integer> ledgerZNodeVersion) {
            this.lockZNode = lockZNode;
            this.ledgerZNodeVersion = ledgerZNodeVersion;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lacUpdateTimestamp'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ReadLastConfirmedAndEntryContext.java`
#### Snippet
```java
    final BookieId bookie;
    long lac = LedgerHandle.INVALID_ENTRY_ID;
    Optional<Long> lacUpdateTimestamp = Optional.empty();

    public ReadLastConfirmedAndEntryContext(int bookieIndex, BookieId bookie) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastAddConfirmedUpdateTime'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/LongPollReadEntryProcessorV3.java`
#### Snippet
```java

    private final Long previousLAC;
    private Optional<Long> lastAddConfirmedUpdateTime = Optional.empty();

    // long poll execution state
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'blacklistedChannels'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestProcessor.java`
#### Snippet
```java

    // to temporary blacklist channels
    final Optional<Cache<Channel, Boolean>> blacklistedChannels;
    final Consumer<Channel> onResponseTimeout;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'rateLimiter'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @throws IOException
     */
    default List<DetectedInconsistency> localConsistencyCheck(Optional<RateLimiter> rateLimiter) throws IOException {
        return new ArrayList<>();
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'password'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataBuilder.java`
#### Snippet
```java

    private Optional<DigestType> digestType = Optional.empty();
    private Optional<byte[]> password = Optional.empty();

    private long ctime = -1;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'length'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataBuilder.java`
#### Snippet
```java
    private State state = State.OPEN;
    private Optional<Long> lastEntryId = Optional.empty();
    private Optional<Long> length = Optional.empty();

    private TreeMap<Long, List<BookieId>> ensembles = new TreeMap<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastEntryId'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataBuilder.java`
#### Snippet
```java

    private State state = State.OPEN;
    private Optional<Long> lastEntryId = Optional.empty();
    private Optional<Long> length = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'digestType'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataBuilder.java`
#### Snippet
```java
    private TreeMap<Long, List<BookieId>> ensembles = new TreeMap<>();

    private Optional<DigestType> digestType = Optional.empty();
    private Optional<byte[]> password = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'readSpeculativeRequestPolicy'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ClientInternalConf.java`
#### Snippet
```java
    final boolean delayEnsembleChange;

    final Optional<SpeculativeRequestExecutionPolicy> readSpeculativeRequestPolicy;
    final Optional<SpeculativeRequestExecutionPolicy> readLACSpeculativeRequestPolicy;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'readLACSpeculativeRequestPolicy'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ClientInternalConf.java`
#### Snippet
```java

    final Optional<SpeculativeRequestExecutionPolicy> readSpeculativeRequestPolicy;
    final Optional<SpeculativeRequestExecutionPolicy> readLACSpeculativeRequestPolicy;

    final int explicitLacInterval;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lastEntryId'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataImpl.java`
#### Snippet
```java
                       int ackQuorumSize,
                       State state,
                       Optional<Long> lastEntryId,
                       Optional<Long> length,
                       Map<Long, List<BookieId>> ensembles,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'length'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataImpl.java`
#### Snippet
```java
                       State state,
                       Optional<Long> lastEntryId,
                       Optional<Long> length,
                       Map<Long, List<BookieId>> ensembles,
                       Optional<DigestType> digestType,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'digestType'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataImpl.java`
#### Snippet
```java
                       Optional<Long> length,
                       Map<Long, List<BookieId>> ensembles,
                       Optional<DigestType> digestType,
                       Optional<byte[]> password,
                       long ctime,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'password'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataImpl.java`
#### Snippet
```java
                       Map<Long, List<BookieId>> ensembles,
                       Optional<DigestType> digestType,
                       Optional<byte[]> password,
                       long ctime,
                       boolean storeCtime,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'firstException'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/datainteg/EntryCopierImpl.java`
#### Snippet
```java
                                    ImmutableList<Integer> writeSet,
                                    CompletableFuture<ByteBuf> promise,
                                    Optional<Throwable> firstException) {
            if (attempt >= writeSet.size()) {
                promise.completeExceptionally(
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'currentStickyBookieIndex'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
     * @since 4.9
     */
    default int getStickyReadBookieIndex(LedgerMetadata metadata, Optional<Integer> currentStickyBookieIndex) {
        if (!currentStickyBookieIndex.isPresent()) {
            // Pick one bookie randomly from the current ensemble as the initial
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalDnsResolver'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
     */
    EnsemblePlacementPolicy initialize(ClientConfiguration conf,
                                       Optional<DNSToSwitchMapping> optionalDnsResolver,
                                       HashedWheelTimer hashedWheelTimer,
                                       FeatureProvider featureProvider,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'excludedBookies'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
                List<BookieId> ensemble,
                Set<Integer> bookieIndexesToRereplicate,
                Optional<Set<BookieId>> excludedBookies)
            throws BKException.BKNotEnoughBookiesException {
        // target bookies to replicate
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'scrubRateLimiter'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/service/ScrubberService.java`
#### Snippet
```java
    private final Random rng = new Random();
    private final long scrubPeriod;
    private final Optional<RateLimiter> scrubRateLimiter;
    private final AtomicBoolean stop = new AtomicBoolean(false);
    private final LedgerStorage ledgerStorage;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'confLocal'
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLFileSystem.java`
#### Snippet
```java
    private FSDataOutputStream append(Path path,
                                      int bufferSize,
                                      Optional<DistributedLogConfiguration> confLocal)
            throws IOException {
        try {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'rangeRouterOverride'
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/PByteBufTableImpl.java`
#### Snippet
```java
                             ScheduledExecutorService executor,
                             TableRangeFactory<ByteBuf, ByteBuf> factory,
                             Optional<RangeRouter<ByteBuf>> rangeRouterOverride) {
        this.streamName = streamName;
        this.props = props;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxWaiters'
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/concurrent/AsyncSemaphore.java`
#### Snippet
```java

    public AsyncSemaphore(int initialPermits,
                          Optional<Integer> maxWaiters) {
        this.availablePermits = initialPermits;
        this.waitq = new LinkedList<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxWaiters'
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/concurrent/AsyncSemaphore.java`
#### Snippet
```java
public class AsyncSemaphore {

    private final Optional<Integer> maxWaiters;

    private final Permit semaphorePermit = new Permit() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'closed'
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/concurrent/AsyncSemaphore.java`
#### Snippet
```java

    @GuardedBy("this")
    private Optional<Throwable> closed = Optional.empty();
    @GuardedBy("this")
    private final LinkedList<CompletableFuture<Permit>> waitq;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'poolMxBeanOp'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/PrometheusMetricsProvider.java`
#### Snippet
```java
     */
    private static final AtomicLong directMemoryUsage;
    private static final Optional<BufferPoolMXBean> poolMxBeanOp;
    private static final Supplier<Double> getDirectMemoryUsage;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'featureProvider'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BookKeeperClientBuilder.java`
#### Snippet
```java
    private HashedWheelTimer requestTimer = null;
    // feature provider
    private Optional<FeatureProvider> featureProvider = Optional.empty();

    // Cached BookKeeper Client
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'featureProvider'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BookKeeperClientBuilder.java`
#### Snippet
```java
    }

    public synchronized BookKeeperClientBuilder featureProvider(Optional<FeatureProvider> featureProvider) {
        this.featureProvider = featureProvider;
        return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'featureProvider'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BookKeeperClient.java`
#### Snippet
```java
    private final boolean ownZK;
    // feature provider
    private final Optional<FeatureProvider> featureProvider;

    @SuppressWarnings("deprecation")
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'featureProvider'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BookKeeperClient.java`
#### Snippet
```java
                     HashedWheelTimer requestTimer,
                     StatsLogger statsLogger,
                     Optional<FeatureProvider> featureProvider) {
        this.conf = conf;
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'startTransactionId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKSyncLogReader.java`
#### Snippet
```java
                    BKDistributedLogManager bkdlm,
                    DLSN startDLSN,
                    Optional<Long> startTransactionId,
                    StatsLogger statsLogger) throws IOException {
        this.bkdlm = bkdlm;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'startTransactionId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKSyncLogReader.java`
#### Snippet
```java
    private final int maxReadAheadWaitTime;
    private CompletableFuture<Void> closeFuture;
    private final Optional<Long> startTransactionId;
    private boolean positioned = false;
    private Entry.Reader currentEntry = null;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'prevFoundRecord'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadUtils.java`
#### Snippet
```java
            final List<LogRecordWithDLSN> searchResults,
            final int nWays,
            final Optional<LogRecordWithDLSN> prevFoundRecord,
            final CompletableFuture<Optional<LogRecordWithDLSN>> promise) {
        int found = -1;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'prevFoundRecord'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadUtils.java`
#### Snippet
```java
            final List<Long> entriesToSearch,
            final int nWays,
            final Optional<LogRecordWithDLSN> prevFoundRecord,
            final CompletableFuture<Optional<LogRecordWithDLSN>> promise) {
        final List<CompletableFuture<LogRecordWithDLSN>> searchResults =
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKAsyncLogReader.java`
#### Snippet
```java
                     OrderedScheduler scheduler,
                     DLSN startDLSN,
                     Optional<String> subscriberId,
                     boolean returnEndOfStreamRecord,
                     StatsLogger statsLogger) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogReadHandler.java`
#### Snippet
```java
     */
    BKLogReadHandler(LogMetadataForReader logMetadata,
                     Optional<String> subscriberId,
                     DistributedLogConfiguration conf,
                     DynamicDistributedLogConfiguration dynConf,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogReadHandler.java`
#### Snippet
```java
    protected final DynamicDistributedLogConfiguration dynConf;

    private final Optional<String> subscriberId;
    private DistributedLock readLock;
    private CompletableFuture<Void> lockAcquireFuture;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'serverConf'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java
        private int zkPort = DEFAULT_ZK_PORT;
        private boolean shouldStartZK = true;
        private Optional<ServerConfiguration> serverConf = Optional.empty();

        public Builder numBookies(int numBookies) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'logConfiguration'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
            URI uri,
            String nameOfLogStream,
            Optional<DistributedLogConfiguration> logConfiguration,
            Optional<DynamicDistributedLogConfiguration> dynamicLogConfiguration)
        throws InvalidStreamNameException, IOException {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'dynamicLogConfiguration'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
            String nameOfLogStream,
            Optional<DistributedLogConfiguration> logConfiguration,
            Optional<DynamicDistributedLogConfiguration> dynamicLogConfiguration)
        throws InvalidStreamNameException, IOException {
        // Make sure the name is well formed
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'logConf'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
     */
    DistributedLogManager openLog(String logName,
                                  Optional<DistributedLogConfiguration> logConf,
                                  Optional<DynamicDistributedLogConfiguration> dynamicLogConf,
                                  Optional<StatsLogger> perStreamStatsLogger)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'dynamicLogConf'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
    DistributedLogManager openLog(String logName,
                                  Optional<DistributedLogConfiguration> logConf,
                                  Optional<DynamicDistributedLogConfiguration> dynamicLogConf,
                                  Optional<StatsLogger> perStreamStatsLogger)
            throws InvalidStreamNameException, LogNotFoundException, IOException;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'perStreamStatsLogger'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
                                  Optional<DistributedLogConfiguration> logConf,
                                  Optional<DynamicDistributedLogConfiguration> dynamicLogConf,
                                  Optional<StatsLogger> perStreamStatsLogger)
            throws InvalidStreamNameException, LogNotFoundException, IOException;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'streamConfiguration'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * @param streamConfiguration stream configuration overrides
     */
    public void loadStreamConf(Optional<DistributedLogConfiguration> streamConfiguration) {
        if (!streamConfiguration.isPresent()) {
            return;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nsOptional'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogMetadataStore.java`
#### Snippet
```java

    final URI namespace;
    final Optional<URI> nsOptional;
    final ZooKeeperClient zkc;
    final ZKNamespaceWatcher nsWatcher;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'featureProviderOptional'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
                                                     EventLoopGroup eventLoopGroup,
                                                     HashedWheelTimer requestTimer,
                                                     Optional<FeatureProvider> featureProviderOptional,
                                                     StatsLogger statsLogger) {
        BookKeeperClientBuilder builder = BookKeeperClientBuilder.newBuilder()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
    }

    synchronized BKLogReadHandler createReadHandler(Optional<String> subscriberId) {
        return createReadHandler(subscriberId, false);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromTxnId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
    }

    LogReader getInputStreamInternal(DLSN fromDLSN, Optional<Long> fromTxnId)
            throws IOException {
        LOG.info("Create sync reader starting from {}", fromDLSN);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
    }

    synchronized BKLogReadHandler createReadHandler(Optional<String> subscriberId,
                                                    AsyncNotification notification,
                                                    boolean isHandleForReading) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
    }

    synchronized BKLogReadHandler createReadHandler(Optional<String> subscriberId,
                                                    boolean isHandleForReading) {
        return createReadHandler(
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'resourcesCloseable'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
                            StatsLogger statsLogger,
                            StatsLogger perLogStatsLogger,
                            Optional<AsyncCloseable> resourcesCloseable) {
        this.name = name;
        this.conf = conf;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromDLSN'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
    }

    protected CompletableFuture<AsyncLogReader> getAsyncLogReaderWithLock(final Optional<DLSN> fromDLSN,
                                                               final Optional<String> subscriberId) {
        if (!fromDLSN.isPresent() && !subscriberId.isPresent()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java

    protected CompletableFuture<AsyncLogReader> getAsyncLogReaderWithLock(final Optional<DLSN> fromDLSN,
                                                               final Optional<String> subscriberId) {
        if (!fromDLSN.isPresent() && !subscriberId.isPresent()) {
            return FutureUtils.exception(new UnexpectedException("Neither from dlsn nor subscriber id is provided."));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'resourcesCloseable'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java

    // resource to close
    private final Optional<AsyncCloseable> resourcesCloseable;

    /**
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'parentPathShouldNotCreate'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        final ZooKeeperClient zkc,
        final String pathToCreate,
        final Optional<String> parentPathShouldNotCreate,
        final byte[] data,
        final List<ACL> acl,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'parentPathShouldNotCreate'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        final ZooKeeperClient zkc,
        final String pathToCreate,
        final Optional<String> parentPathShouldNotCreate,
        final byte[] data,
        final List<ACL> acl,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'readerId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/LogStreamMetadataStore.java`
#### Snippet
```java
     */
    CompletableFuture<DistributedLock> createReadLock(LogMetadataForReader metadata,
                                           Optional<String> readerId);

    /**
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subscriberId'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/LogMetadataForReader.java`
#### Snippet
```java
     * @return read lock path
     */
    public String getReadLockPath(Optional<String> subscriberId) {
        if (subscriberId.isPresent()) {
            return logRootPath + SUBSCRIBERS_PATH + "/" + subscriberId.get() + READ_LOCK_PATH;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'segmentStorePath'
in `stream/storage/api/src/main/java/org/apache/bookkeeper/stream/storage/api/cluster/ClusterMetadataStore.java`
#### Snippet
```java
     * @return true if successfully initialized cluster, otherwise false.
     */
    boolean initializeCluster(int numStorageContainers, Optional<String> segmentStorePath);

    /**
```

## RuleId[id=CharsetObjectCanBeUsed]
### CharsetObjectCanBeUsed
UTF_8 can be used instead
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java

    private static LedgerMetadata parseVersion1Config(long ledgerId, InputStream is) throws IOException {
        try (BufferedReader reader = new BufferedReader(new InputStreamReader(is, UTF_8.name()))) {
            LedgerMetadataBuilder builder = LedgerMetadataBuilder.create()
                    .withId(ledgerId)
```

### CharsetObjectCanBeUsed
UTF_8 can be used instead
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
            writeHeader(os, METADATA_FORMAT_VERSION_1);

            try (PrintWriter writer = new PrintWriter(new OutputStreamWriter(os, UTF_8.name()))) {
                writer.append(String.valueOf(metadata.getWriteQuorumSize())).append(LINE_SPLITTER);
                writer.append(String.valueOf(metadata.getEnsembleSize())).append(LINE_SPLITTER);
```

### CharsetObjectCanBeUsed
UTF_8 can be used instead
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java
        try (ByteArrayOutputStream os = new ByteArrayOutputStream()) {
            writeHeader(os, METADATA_FORMAT_VERSION_2);
            try (PrintWriter writer = new PrintWriter(new OutputStreamWriter(os, UTF_8.name()))) {
                /***********************************************************************
                 * WARNING: Do not modify to add fields.
```

### CharsetObjectCanBeUsed
UTF_8 can be used instead
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerMetadataSerDe.java`
#### Snippet
```java

        LedgerMetadataFormat.Builder formatBuilder = LedgerMetadataFormat.newBuilder();
        try (InputStreamReader reader = new InputStreamReader(is, UTF_8.name())) {
            TextFormat.merge(reader, formatBuilder);
        }
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `bookkeeper-http/servlet-http-server/src/main/java/org/apache/bookkeeper/http/servlet/BookieHttpServiceServlet.java`
#### Snippet
```java
                                .setMethod(httpServerMethod(httpRequest))
                                .setParams(httpServletParams(httpRequest))
                                .setBody(IOUtils.toString(httpRequest.getInputStream(), "UTF-8"));
    String uri = httpRequest.getRequestURI();
    HttpServiceResponse response;
```

### CharsetObjectCanBeUsed
UTF_8 can be used instead
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java

                    br = new BufferedReader(new InputStreamReader(
                            new FileInputStream(new File(cmdline.getOptionValue("lf"))), UTF_8.name()));
                    String line;
                    while ((line = br.readLine()) != null) {
```

### CharsetObjectCanBeUsed
UTF_8 can be used instead
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java

        void dumpLedgers(Set<Long> ledgers, File targetFile) throws Exception {
            PrintWriter pw = new PrintWriter(new OutputStreamWriter(new FileOutputStream(targetFile), UTF_8.name()));
            try {
                for (Long ledger : ledgers) {
```

## RuleId[id=ImplicitArrayToString]
### ImplicitArrayToString
Implicit call to 'toString()' on array `wanted`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
                    if (!cfNames.contains(wanted) && cfNames.contains(other)) {
                        throw new StateStoreException(String.format("{}: expected {} column family, found {}",
                                dbDir.getAbsolutePath(), wanted, other));
                    }
                }
```

### ImplicitArrayToString
Implicit call to 'toString()' on array `other`
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
                    if (!cfNames.contains(wanted) && cfNames.contains(other)) {
                        throw new StateStoreException(String.format("{}: expected {} column family, found {}",
                                dbDir.getAbsolutePath(), wanted, other));
                    }
                }
```

## RuleId[id=AutoCloseableResource]
### AutoCloseableResource
'IncrementOpImpl' used without 'try'-with-resources statement
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/OpFactoryImpl.java`
#### Snippet
```java
    public IncrementOp<K, V> newIncrement(K key, long amount, IncrementOption<K> option) {
        return incrementOpRecycler.get()
            .key(key)
            .amount(amount)
            .option(option);
```

### AutoCloseableResource
'PutOpImpl' used without 'try'-with-resources statement
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/OpFactoryImpl.java`
#### Snippet
```java
    public PutOp<K, V> newPut(K key, V value, PutOption<K> option) {
        return putOpRecycler.get()
            .key(key)
            .value(value)
            .option(option);
```

### AutoCloseableResource
'RangeOpImpl' used without 'try'-with-resources statement
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/OpFactoryImpl.java`
#### Snippet
```java
    public RangeOp<K, V> newRange(K key, RangeOption<K> option) {
        return rangeOpRecycler.get()
            .key(key)
            .option(option);
    }
```

### AutoCloseableResource
'DeleteOpImpl' used without 'try'-with-resources statement
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/op/OpFactoryImpl.java`
#### Snippet
```java
    public DeleteOp<K, V> newDelete(K key, DeleteOption<K> option) {
        return deleteOpRecycler.get()
            .key(key)
            .option(option);
    }
```

### AutoCloseableResource
'ObservableDoubleGauge' used without 'try'-with-resources statement
in `stats/bookkeeper-stats-providers/otel-metrics-provider/src/main/java/org/apache/bookkeeper/stats/otel/OtelStatsLogger.java`
#### Snippet
```java
    public <T extends Number> void registerGauge(String name, Gauge<T> gauge) {
        provider.meter.gaugeBuilder(completeName(name))
                .buildWithCallback(observableDoubleMeasurement -> {
                    double v = gauge.getSample().doubleValue();
                    observableDoubleMeasurement.record(v, attributes);
```

### AutoCloseableResource
'ObservableDoubleGauge' used without 'try'-with-resources statement
in `stats/bookkeeper-stats-providers/otel-metrics-provider/src/main/java/org/apache/bookkeeper/stats/otel/OtelMetricsProvider.java`
#### Snippet
```java

            meter.gaugeBuilder("process.runtime.jvm.memory.direct_bytes_used")
                    .buildWithCallback(odm -> odm.record(getDirectMemoryUsage.get()));

            meter.gaugeBuilder("process.runtime.jvm.memory.direct_bytes_max")
```

### AutoCloseableResource
'ObservableDoubleGauge' used without 'try'-with-resources statement
in `stats/bookkeeper-stats-providers/otel-metrics-provider/src/main/java/org/apache/bookkeeper/stats/otel/OtelMetricsProvider.java`
#### Snippet
```java

            meter.gaugeBuilder("process.runtime.jvm.memory.direct_bytes_max")
                    .buildWithCallback(odm -> odm.record(PlatformDependent.estimateMaxDirectMemory()));
        }
    }
```

### AutoCloseableResource
'StreamCluster' used without 'try'-with-resources statement
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StandaloneStarter.java`
#### Snippet
```java
        CountDownLatch liveLatch = new CountDownLatch(1);

        StreamCluster cluster = StreamCluster.build(spec);
        Runtime.getRuntime().addShutdownHook(new Thread(() -> {
            cluster.stop();
```

### AutoCloseableResource
'ValueStream' used without 'try'-with-resources statement
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdLedgerManager.java`
#### Snippet
```java
        }

        ValueStream<LedgerMetadata> lmStream = watchers.computeIfAbsent(
            ledgerId, (lid) -> new ValueStream<>(
                client,
```

### AutoCloseableResource
'EtcdWatcher' used without 'try'-with-resources statement
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdWatchClient.java`
#### Snippet
```java
        }

        watchers.remove(watchID);
        cancelSet.add(watchID);

```

### AutoCloseableResource
'FlatLedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java
        // if layoutManager is null, return the default ledger manager
        if (layoutManager == null) {
            return new FlatLedgerManagerFactory()
                   .initialize(conf, null, FlatLedgerManagerFactory.CUR_VERSION);
        }
```

### AutoCloseableResource
'LedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java

        if (layout == null) { // no existing layout
            lmFactory = createNewLMFactory(conf, layoutManager, factoryClass);
            return lmFactory
                    .initialize(conf, layoutManager, lmFactory.getCurrentVersion());
```

### AutoCloseableResource
'FlatLedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java
            // create the ledger manager
            if (FlatLedgerManagerFactory.NAME.equals(layout.getManagerFactoryClass())) {
                lmFactory = new FlatLedgerManagerFactory();
            } else if (HierarchicalLedgerManagerFactory.NAME.equals(layout.getManagerFactoryClass())) {
                lmFactory = new HierarchicalLedgerManagerFactory();
```

### AutoCloseableResource
'HierarchicalLedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java
                lmFactory = new FlatLedgerManagerFactory();
            } else if (HierarchicalLedgerManagerFactory.NAME.equals(layout.getManagerFactoryClass())) {
                lmFactory = new HierarchicalLedgerManagerFactory();
            } else {
                throw new IOException("Unknown ledger manager type: " + lmType);
```

### AutoCloseableResource
'LedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java
        layoutManager.deleteLedgerLayout();
        // Create new layout information again.
        createNewLMFactory(conf, layoutManager, factoryClass);
    }

```

### AutoCloseableResource
'LedgerManager' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java
        String zkLedgersRootPath = ZKMetadataDriverBase.resolveZkLedgersRootPath(conf);
        String zkServers = ZKMetadataDriverBase.resolveZkServers(conf);
        AbstractZkLedgerManager zkLedgerManager = (AbstractZkLedgerManager) newLedgerManager();

        /*
```

### AutoCloseableResource
'MetadataBookieDriver' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataDrivers.java`
#### Snippet
```java
            try {
                MetadataBookieDriver driver =
                    ReflectionUtils.newInstance(driverClsName, MetadataBookieDriver.class);
                MetadataBookieDriverInfo driverInfo =
                    new MetadataBookieDriverInfo(driver.getClass());
```

### AutoCloseableResource
'MetadataClientDriver' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MetadataDrivers.java`
#### Snippet
```java
            try {
                MetadataClientDriver driver =
                    ReflectionUtils.newInstance(driverClsName, MetadataClientDriver.class);
                MetadataClientDriverInfo driverInfo =
                    new MetadataClientDriverInfo(driver.getClass());
```

### AutoCloseableResource
'LedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java
        layoutManager.deleteLedgerLayout();
        // Create new layout information again.
        createNewLMFactory(conf, layoutManager, factoryClass);
    }

```

### AutoCloseableResource
'BookKeeper' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/SanityTestCommand.java`
#### Snippet
```java
        BookKeeper bk;
        try {
            bk = new BookKeeper(clientConf);
        } catch (BKException | IOException | InterruptedException e) {
            LOG.warn("Failed to initialize bookkeeper client", e);
```

### AutoCloseableResource
'ReadOnlyDefaultEntryLogger' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ListActiveLedgersCommand.java`
#### Snippet
```java
          if (done.await(cmdFlags.timeout, TimeUnit.MILLISECONDS)){
            if  (resultCode.get() == BKException.Code.OK) {
              DefaultEntryLogger entryLogger = new ReadOnlyDefaultEntryLogger(bkConf);
              EntryLogMetadata entryLogMetadata = entryLogger.getEntryLogMetadata(cmdFlags.logId);
              List<Long> ledgersOnEntryLog = entryLogMetadata.getLedgersMap().keys();
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/CreateCookieCommand.java`
#### Snippet
```java
            rm.writeCookie(bookieId, cookie);
        } catch (CookieExistException cee) {
            spec.console()
                .println("Cookie already exist for bookie '" + bookieId + "'");
            throw cee;
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/CreateCookieCommand.java`
#### Snippet
```java
            throw cee;
        } catch (BookieException be) {
            spec.console()
                .println("Exception on creating cookie for bookie '" + bookieId + "'");
            be.printStackTrace(spec.console());
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GetCookieCommand.java`
#### Snippet
```java
        try {
            Versioned<Cookie> cookie = Cookie.readFromRegistrationManager(rm, bookieId);
            spec.console().println("Cookie for bookie '" + bookieId + "' is:");
            spec.console().println("---");
            spec.console().println(
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GetCookieCommand.java`
#### Snippet
```java
            Versioned<Cookie> cookie = Cookie.readFromRegistrationManager(rm, bookieId);
            spec.console().println("Cookie for bookie '" + bookieId + "' is:");
            spec.console().println("---");
            spec.console().println(
                cookie.getValue()
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GetCookieCommand.java`
#### Snippet
```java
            spec.console().println("Cookie for bookie '" + bookieId + "' is:");
            spec.console().println("---");
            spec.console().println(
                cookie.getValue()
            );
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GetCookieCommand.java`
#### Snippet
```java
                cookie.getValue()
            );
            spec.console().println("---");
        } catch (CookieNotFoundException cee) {
            spec.console()
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GetCookieCommand.java`
#### Snippet
```java
            spec.console().println("---");
        } catch (CookieNotFoundException cee) {
            spec.console()
                .println("Cookie not found for bookie '" + bookieId + "'");
            throw cee;
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GetCookieCommand.java`
#### Snippet
```java
            throw cee;
        } catch (BookieException be) {
            spec.console()
                .println("Exception on getting cookie for bookie '" + bookieId + "'");
            be.printStackTrace(spec.console());
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/UpdateCookieCommand.java`
#### Snippet
```java
            rm.writeCookie(bookieId, cookie);
        } catch (CookieNotFoundException cnfe) {
            spec.console()
                .println("Cookie not found for bookie '" + bookieId + "' to update");
            throw cnfe;
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/UpdateCookieCommand.java`
#### Snippet
```java
            throw cnfe;
        } catch (BookieException be) {
            spec.console()
                .println("Exception on updating cookie for bookie '" + bookieId + "'");
            be.printStackTrace(spec.console());
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/CookieCommand.java`
#### Snippet
```java
                cause = e.getCause();
            }
            spec.console().println("Failed to process cookie command '" + name() + "'");
            cause.printStackTrace(spec.console());
            return false;
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/CookieCommand.java`
#### Snippet
```java
            new BookieSocketAddress(bookieId);
        } catch (UnknownHostException nhe) {
            spec.console()
                .println("Invalid bookie id '"
                    + bookieId + "'is used to create cookie."
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/CookieCommand.java`
#### Snippet
```java
            return Files.readAllBytes(Paths.get(cookieFile));
        } catch (NoSuchFileException nfe) {
            spec.console()
                .println("Cookie file '" + cookieFile + "' doesn't exist.");
            throw nfe;
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/DeleteCookieCommand.java`
#### Snippet
```java
            rm.removeCookie(bookieId, new LongVersion(-1));
        } catch (CookieNotFoundException cee) {
            spec.console()
                .println("Cookie not found for bookie '" + bookieId + "'");
            throw cee;
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/DeleteCookieCommand.java`
#### Snippet
```java
            throw cee;
        } catch (BookieException be) {
            spec.console()
                .println("Exception on deleting cookie for bookie '" + bookieId + "'");
            be.printStackTrace(spec.console());
```

### AutoCloseableResource
'PrintStream' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GenerateCookieCommand.java`
#### Snippet
```java
        Cookie cookie = builder.build();
        cookie.writeToFile(new File(cmdFlags.outputFile));
        spec.console().println("Successfully saved the generated cookie to " + cmdFlags.outputFile);
    }

```

### AutoCloseableResource
'BookKeeperAdmin' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/WhoIsAuditorCommand.java`
#### Snippet
```java
        } else {
            @Cleanup
            BookKeeperAdmin bka = new BookKeeperAdmin(clientConfiguration);
            bookieId = bka.getCurrentAuditor();
        }
```

### AutoCloseableResource
'LedgerEntryPage' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
            synchronized (lruCleanPageMap) {
                if (!lep.isClean() || lep.inUse()) {
                    lruCleanPageMap.remove(lep.getEntryKey());
                }
            }
```

### AutoCloseableResource
'FileChannel' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedReadChannel.java`
#### Snippet
```java
        invocationCount++;
        long currentPosition = pos;
        long eof = validateAndGetFileChannel().size();
        // return -1 if the given position is greater than or equal to the file's current size.
        if (pos >= eof) {
```

### AutoCloseableResource
'FileChannel' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedReadChannel.java`
#### Snippet
```java
                readBufferStartPosition = currentPosition;
                int readBytes = 0;
                if ((readBytes = validateAndGetFileChannel().read(readBuffer.internalNioBuffer(0, readCapacity),
                        currentPosition)) <= 0) {
                    throw new IOException("Reading from filechannel returned a non-positive value. Short read.");
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLoggerAllocator.java`
#### Snippet
```java

        File newLogFile = new File(dirForNextEntryLog, logFileName);
        FileChannel channel = new RandomAccessFile(newLogFile, "rw").getChannel();

        BufferedLogChannel logChannel = new BufferedLogChannel(byteBufAllocator, channel, conf.getWriteBufferBytes(),
```

### AutoCloseableResource
'DefaultEntryLogger' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedStorageRegenerateIndexOp.java`
#### Snippet
```java
        LedgerDirsManager indexDirsManager = BookieResources.createIndexDirsManager(
                conf, diskChecker,  NullStatsLogger.INSTANCE, ledgerDirsManager);
        DefaultEntryLogger entryLogger = new DefaultEntryLogger(conf, ledgerDirsManager);
        final LedgerCache ledgerCache;
        if (dryRun) {
```

### AutoCloseableResource
'DryRunLedgerCache' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedStorageRegenerateIndexOp.java`
#### Snippet
```java
        final LedgerCache ledgerCache;
        if (dryRun) {
            ledgerCache = new DryRunLedgerCache();
        } else {
            ledgerCache = new LedgerCacheImpl(conf, new SnapshotMap<Long, Boolean>(),
```

### AutoCloseableResource
'LedgerCacheImpl' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedStorageRegenerateIndexOp.java`
#### Snippet
```java
            ledgerCache = new DryRunLedgerCache();
        } else {
            ledgerCache = new LedgerCacheImpl(conf, new SnapshotMap<Long, Boolean>(),
                                              indexDirsManager, NullStatsLogger.INSTANCE);
        }
```

### AutoCloseableResource
'MetadataBookieDriver' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector.java`
#### Snippet
```java

        @Cleanup
        MetadataBookieDriver metadataDriver = instantiateMetadataDriver(conf, statsLogger);

        @Cleanup
```

### AutoCloseableResource
'FileChannel' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannelBase.java`
#### Snippet
```java
     */
    public long size() throws IOException {
        return validateAndGetFileChannel().size();
    }

```

### AutoCloseableResource
'PageEntriesIterable' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java`
#### Snippet
```java
        Iterator<LedgerCache.PageEntries> pageEntriesIteratorNonFinal = null;
        try {
            pageEntriesIteratorNonFinal = listEntries(ledgerId).iterator();
        } catch (Bookie.NoLedgerException noLedgerException) {
            pageEntriesIteratorNonFinal = Collections.emptyIterator();
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
                // delayed the creation of parents directories
                checkParents(lf);
                fc = new RandomAccessFile(lf, mode).getChannel();
                size = fc.size();
                if (size == 0) {
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
        }
        // copy contents from old.idx to new.idx.rloc
        FileChannel newFc = new RandomAccessFile(rlocFile, "rw").getChannel();
        try {
            long written = 0;
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
            throw new IOException("Failed to rename " + rlocFile + " to " + newFile);
        }
        fc = new RandomAccessFile(newFile, mode).getChannel();
        lf = newFile;
        deleted = false;
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
            }

            fc = new RandomAccessFile(lf, mode).getChannel();
            size = fc.size();
            sizeSinceLastWrite = size;
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
        // get channel is used to open an existing entry log file
        // it would be better to open using read mode
        FileChannel newFc = new RandomAccessFile(file, "r").getChannel();
        FileChannel oldFc = logid2FileChannel.putIfAbsent(entryLogId, newFc);
        if (null != oldFc) {
```

### AutoCloseableResource
'DefaultEntryLogger' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/LedgersIndexRebuildOp.java`
#### Snippet
```java

    private void scanEntryLogFiles(Set<Long> ledgers, File[] lDirs) throws IOException {
        DefaultEntryLogger entryLogger = new DefaultEntryLogger(conf, new LedgerDirsManager(conf, lDirs,
                new DiskChecker(conf.getDiskUsageThreshold(), conf.getDiskUsageWarnThreshold())));
        Set<Long> entryLogs = entryLogger.getEntryLogsSet();
```

### AutoCloseableResource
'LedgerEntryRequest' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ListenerBasedPendingReadOp.java`
#### Snippet
```java
                return;
            }
            seq.removeFirst();
            long latencyNanos = MathUtils.elapsedNanos(requestTimeNanos);
            LedgerEntry entry;
```

### AutoCloseableResource
'BookKeeper' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/DeleteLedgerService.java`
#### Snippet
```java
                ClientConfiguration clientConf = new ClientConfiguration();
                clientConf.addConfiguration(conf);
                BookKeeper bk = new BookKeeper(clientConf);
                Long ledgerId = Long.parseLong(params.get("ledger_id"));

```

### AutoCloseableResource
'LedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationManager.java`
#### Snippet
```java

        LedgerManagerFactory ledgerManagerFactory =
            AbstractZkLedgerManagerFactory.newLedgerManagerFactory(conf, layoutManager);
        return ledgerManagerFactory.validateAndNukeExistingCluster(conf, layoutManager);
    }
```

### AutoCloseableResource
'LedgerManagerFactory' used without 'try'-with-resources statement
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationManager.java`
#### Snippet
```java

        // creates the new layout and stores in zookeeper
        AbstractZkLedgerManagerFactory.newLedgerManagerFactory(conf, layoutManager);

        log.info("Successfully initiated cluster. ZKServers: {} ledger root path: {} instanceId: {}", zkServers,
```

### AutoCloseableResource
'KeyValueImpl' used without 'try'-with-resources statement
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCRecord.java`
#### Snippet
```java
                                         K key,
                                         Coder<V> valCoder) {
        return recordFactory.newKv()
            .key(key)
            .value(valCoder.decode(value))
```

### AutoCloseableResource
'KeyValue' used without 'try'-with-resources statement
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
                throw new NoSuchElementException();
            }
            KeyValue<K, V> kv = this.resultIter.next();
            next = kv.key();
            if (next.equals(to)) {
```

### AutoCloseableResource
'KeyValue' used without 'try'-with-resources statement
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
        private void skipFirstKey() {
            while (this.resultIter.hasNext()) {
                KeyValue<K, V> kv = this.resultIter.peek();
                if (!kv.key().equals(next)) {
                    break;
```

### AutoCloseableResource
'KeyValue' used without 'try'-with-resources statement
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
                    break;
                }
                this.resultIter.next();
            }
        }
```

### AutoCloseableResource
'StorageContainer' used without 'try'-with-resources statement
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/StorageContainerRegistryImpl.java`
#### Snippet
```java

        if (null == container) {
            StorageContainer existingContainer = containers.remove(scId);
            if (null != existingContainer) {
                log.info("Unregistered StorageContainer ('{}').", scId);
```

### AutoCloseableResource
'ZkClusterMetadataStore' used without 'try'-with-resources statement
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/cluster/ZkClusterInitializer.java`
#### Snippet
```java

            ZkClusterMetadataStore store =
                new ZkClusterMetadataStore(client, zkInternalConnectString, ZK_METADATA_ROOT_PATH);

            ClusterMetadata metadata;
```

### AutoCloseableResource
'StorageServerChannel' used without 'try'-with-resources statement
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/routing/StorageContainerProxyChannelManagerImpl.java`
#### Snippet
```java
        CompletableFuture<StorageServerChannel> serverChannelFuture = channel.getStorageContainerChannelFuture();
        if (null != serverChannelFuture && serverChannelFuture.isDone()) {
            StorageServerChannel serverChannel = serverChannelFuture.join();
            if (serverChannel != null) {
                return serverChannel.getGrpcChannel();
```

### AutoCloseableResource
'RangeResultImpl' used without 'try'-with-resources statement
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/KvUtils.java`
#### Snippet
```java
        ResultFactory<ByteBuf, ByteBuf> resultFactory,
        KeyValueFactory<ByteBuf, ByteBuf> kvFactory) {
        return resultFactory.newRangeResult(-1L)
            .count(response.getCount())
            .more(response.getMore())
```

### AutoCloseableResource
'DeleteResultImpl' used without 'try'-with-resources statement
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/KvUtils.java`
#### Snippet
```java
        ResultFactory<ByteBuf, ByteBuf> resultFactory,
        KeyValueFactory<ByteBuf, ByteBuf> kvFactory) {
        return resultFactory.newDeleteResult(-1L)
            .numDeleted(response.getDeleted())
            .prevKvs(fromProtoKeyValues(response.getPrevKvsList(), kvFactory));
```

### AutoCloseableResource
'KeyValueImpl' used without 'try'-with-resources statement
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/KvUtils.java`
#### Snippet
```java
        KeyValue kv,
        KeyValueFactory<ByteBuf, ByteBuf> kvFactory) {
        return kvFactory.newKv()
            .key(Unpooled.wrappedBuffer(kv.getKey().asReadOnlyByteBuffer()))
            .value(Unpooled.wrappedBuffer(kv.getValue().asReadOnlyByteBuffer()))
```

### AutoCloseableResource
'DistributedLogManager' used without 'try'-with-resources statement
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
            throw new LogNotFoundException("Log " + logName + " isn't found.");
        }
        DistributedLogManager dlm = openLogInternal(
                uri.get(),
                logName,
```

### AutoCloseableResource
'ZKSubscriptionStateStore' used without 'try'-with-resources statement
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/subscription/ZKSubscriptionsStore.java`
#### Snippet
```java
    @Override
    public CompletableFuture<Boolean> deleteSubscriber(String subscriberId) {
        subscribers.remove(subscriberId);
        String path = getSubscriberZKPath(subscriberId);
        return Utils.zkDeleteIfNotExist(zkc, path, new LongVersion(-1L));
```

### AutoCloseableResource
'NamespaceDriver' used without 'try'-with-resources statement
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/namespace/NamespaceDriverManager.java`
#### Snippet
```java
            try {
                NamespaceDriver driver =
                        ReflectionUtils.newInstance(driverClsName, NamespaceDriver.class);
                NamespaceDriverInfo driverInfo = new NamespaceDriverInfo(driver.getClass());
                drivers.put(driver.getScheme().toLowerCase(), driverInfo);
```

## RuleId[id=ConditionCoveredByFurtherCondition]
### ConditionCoveredByFurtherCondition
Condition 'mapping != null' covered by subsequent condition 'mapping instanceof AbstractDNSToSwitchMapping'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/AbstractDNSToSwitchMapping.java`
#### Snippet
```java
     */
    public static boolean isMappingSingleSwitch(DNSToSwitchMapping mapping) {
        return mapping != null && mapping instanceof AbstractDNSToSwitchMapping
                && ((AbstractDNSToSwitchMapping) mapping).isSingleSwitch();
    }
```

### ConditionCoveredByFurtherCondition
Condition 'excludedNode == null' covered by subsequent condition '!(excludedNode instanceof InnerNode)'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
            int count = 0;
            // check if the excluded node a leaf
            boolean isLeaf = excludedNode == null || !(excludedNode instanceof InnerNode);
            // calculate the total number of excluded leaf nodes
            int numOfExcludedLeaves = isLeaf ? 1 : ((InnerNode) excludedNode).getNumOfLeaves();
```

### ConditionCoveredByFurtherCondition
Condition 'msg instanceof BookkeeperProtocol.Request' covered by subsequent condition 'msg instanceof BookieProtocol.Request'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieRequestHandler.java`
#### Snippet
```java
    @Override
    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
        if (!(msg instanceof BookkeeperProtocol.Request || msg instanceof BookieProtocol.Request)) {
            ctx.fireChannelRead(msg);
            return;
```

### ConditionCoveredByFurtherCondition
Condition 'null == obj' covered by subsequent condition '!(obj instanceof MetadataVersion)'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
        @Override
        public boolean equals(Object obj) {
            if (null == obj || !(obj instanceof MetadataVersion)) {
                return false;
            }
```

### ConditionCoveredByFurtherCondition
Condition 'ke instanceof KeeperException.ConnectionLossException' covered by subsequent condition 'ke instanceof KeeperException.SessionExpiredException'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationException.java`
#### Snippet
```java

    public static UnavailableException fromKeeperException(String message, KeeperException ke) {
        if (ke instanceof KeeperException.ConnectionLossException
                || ke instanceof KeeperException.SessionExpiredException) {
            return new NonRecoverableReplicationException(message, ke);
```

### ConditionCoveredByFurtherCondition
Condition 'null != cause' covered by subsequent condition 'cause instanceof CancellationException'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLockFactory.java`
#### Snippet
```java
        CompletableFuture<SessionLock> createPromise = FutureUtils.createFuture();
        createPromise.whenComplete((value, cause) -> {
            if (null != cause && cause instanceof CancellationException) {
                interruptedException.set(cause);
            }
```

### ConditionCoveredByFurtherCondition
Condition 'null == throwable' covered by subsequent condition '!(throwable instanceof CancellationException)'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKDistributedLock.java`
#### Snippet
```java
        final CompletableFuture<ZKDistributedLock> promise = FutureUtils.createFuture();
        promise.whenComplete((zkDistributedLock, throwable) -> {
            if (null == throwable || !(throwable instanceof CancellationException)) {
                return;
            }
```

## RuleId[id=ComparatorMethodParameterNotUsed]
### ComparatorMethodParameterNotUsed
Comparator never returns negative values
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSource.java`
#### Snippet
```java

            @Override
            public int compareTo(Checkpoint o) {
                if (o == MAX) {
                    return 0;
```

### ComparatorMethodParameterNotUsed
Comparator never returns positive values
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CheckpointSource.java`
#### Snippet
```java
        Checkpoint MIN = new Checkpoint() {
            @Override
            public int compareTo(Checkpoint o) {
                if (o == MIN) {
                    return 0;
```

## RuleId[id=SuspiciousToArrayCall]
### SuspiciousToArrayCall
Array of type 'org.apache.distributedlog.io.AsyncCloseable\[\]' expected, 'org.apache.distributedlog.api.AsyncLogReader\[\]' found
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
        @Override
        public CompletableFuture<Void> asyncClose() {
            return Utils.closeSequence(executorService, true, readers.toArray(new AsyncLogReader[readers.size()]))
                    .thenApply(value -> {
                        readers.clear();
```

## RuleId[id=RedundantCast]
### RedundantCast
Casting `null` to `Void` is redundant
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/TableWriteView.java`
#### Snippet
```java
            .thenApply(result -> {
                try {
                    return (Void) null;
                } finally {
                    result.close();
```

### RedundantCast
Casting `null` to `Void` is redundant
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/TableWriteView.java`
#### Snippet
```java
            .thenApply(result -> {
                try {
                    return (Void) null;
                } finally {
                    result.close();
```

### RedundantCast
Casting `null` to `Void` is redundant
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
            .thenApply(result -> {
                try {
                    return (Void) null;
                } finally {
                    result.close();
```

### RedundantCast
Casting `null` to `Void` is redundant
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/PTableWriteView.java`
#### Snippet
```java
            .thenApply(result -> {
                try {
                    return (Void) null;
                } finally {
                    result.close();
```

### RedundantCast
Casting `key.getByte(...)` to `long` is redundant
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/MurmurHash.java`
#### Snippet
```java
                h64 ^= (long) key.getByte(offset + length - rem + 1) << 8;
            case 1:
                h64 ^= (long) key.getByte(offset + length - rem);
                h64 *= m64;
        }
```

### RedundantCast
Casting `data.getByte(...)` to `int` is redundant
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/MurmurHash.java`
#### Snippet
```java
            }
            if (left >= 1) {
                h ^= (int) data.getByte(offset + length - 1);
            }

```

### RedundantCast
Casting `(data[offset + tailStart + 8] & 0xff)` to `long` is redundant
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
                k2 ^= (long) (data[offset + tailStart + 9] & 0xff) << 8;
            case 9:
                k2 ^= (long) (data[offset + tailStart + 8] & 0xff);
                k2 *= C2;
                k2 = Long.rotateLeft(k2, R3);
```

### RedundantCast
Casting `(data[offset + tailStart] & 0xff)` to `long` is redundant
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
                k1 ^= (long) (data[offset + tailStart + 1] & 0xff) << 8;
            case 1:
                k1 ^= (long) (data[offset + tailStart] & 0xff);
                k1 *= C1;
                k1 = Long.rotateLeft(k1, R1);
```

### RedundantCast
Casting `(data.getByte(...) & 0xff)` to `long` is redundant
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
                k2 ^= (long) (data.getByte(offset + tailStart + 9) & 0xff) << 8;
            case 9:
                k2 ^= (long) (data.getByte(offset + tailStart + 8) & 0xff);
                k2 *= C2;
                k2 = Long.rotateLeft(k2, R3);
```

### RedundantCast
Casting `(data.getByte(...) & 0xff)` to `long` is redundant
in `stream/common/src/main/java/org/apache/bookkeeper/common/hash/Murmur3.java`
#### Snippet
```java
                k1 ^= (long) (data.getByte(offset + tailStart + 1) & 0xff) << 8;
            case 1:
                k1 ^= (long) (data.getByte(offset + tailStart) & 0xff);
                k1 *= C1;
                k1 = Long.rotateLeft(k1, R1);
```

### RedundantCast
Casting `null` to `Void` is redundant
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdBookieRegister.java`
#### Snippet
```java
        CompletableFuture<Void> closeFuture = new CompletableFuture<>();
        executor.submit(() -> {
            FutureUtils.complete(closeFuture, (Void) null);
        });
        closeFuture.join();
```

### RedundantCast
Casting `(numcompletions * 1000.0)` to `double` is redundant
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
        Arrays.sort(latency);

        long tp = (long) ((double) (numcompletions * 1000.0) / (double) bench.getDuration());

        LOG.info(numcompletions + " completions in " + bench.getDuration() + " milliseconds: " + tp + " ops/sec");
```

### RedundantCast
Casting `opCode` to `int` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtocol.java`
#### Snippet
```java
        public static int toInt(byte version, byte opCode, short flags) {
            if (version == 0) {
                return (int) opCode;
            } else {
                return ((version & 0xFF) << 24)
```

### RedundantCast
Casting `maxSegmentSize` to `int` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/WriteCache.java`
#### Snippet
```java
        this.allocator = allocator;
        this.maxCacheSize = maxCacheSize;
        this.maxSegmentSize = (int) maxSegmentSize;
        this.segmentOffsetMask = maxSegmentSize - 1;
        this.segmentOffsetBits = 63 - Long.numberOfLeadingZeros(maxSegmentSize);
```

### RedundantCast
Casting `PADDING_BYTE` to `byte` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/Buffer.java`
#### Snippet
```java
    private static byte[] generatePadding() {
        byte[] padding = new byte[ALIGNMENT];
        Arrays.fill(padding, (byte) PADDING_BYTE);
        return padding;
    }
```

### RedundantCast
Casting `bkc` to `org.apache.bookkeeper.client.BookKeeper` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/EmbeddedServer.java`
#### Snippet
```java

                EntryCopier copier = new EntryCopierImpl(bookieId,
                        ((org.apache.bookkeeper.client.BookKeeper) bkc).getClientCtx().getBookieClient(),
                        storage, Ticker.systemTicker());

```

### RedundantCast
Casting `version.value` to `long` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
            }
        } else {
            long versionStatusCount = ((long) version.value);
            versionStatusCount |= ((status & METADATA_STATUS_BIT_MAX) << STATUS_BITS_SHIFT);
            versionStatusCount |= (((long) regionId & MAX_REGION_ID) << REGION_SHIFT);
```

### RedundantCast
Casting `l.getLogSegmentSequenceNumber()` to `Long` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
                        (result) -> {
                            synchronized (inprogressLSSNs) {
                                inprogressLSSNs.remove((Long) l.getLogSegmentSequenceNumber());
                            }
                            return null;
```

## RuleId[id=JavadocDeclaration]
### JavadocDeclaration
`@param ` tag description is missing
in `stream/clients/java/base/src/main/java/org/apache/bookkeeper/clients/utils/GrpcUtils.java`
#### Snippet
```java
     * @param stub  grpc stub
     * @param token credential token
     * @param <T>
     * @return a configured grpc stub.
     */
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServerSpec.java`
#### Snippet
```java
     * Get the store supplier for building grpc server.
     *
     * @return store supplier for building grpc server.
     */
    Supplier<StorageContainerStore> storeSupplier;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServerSpec.java`
#### Snippet
```java
     * Get the local handler registry.
     *
     * @return local handler registry.
     */
    HandlerRegistry localHandlerRegistry;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServerSpec.java`
#### Snippet
```java
     * Get the stats logger.
     *
     * @return stats logger.
     */
    StatsLogger statsLogger;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServerSpec.java`
#### Snippet
```java
     * Get the grpc endpoint.
     *
     * @return grpc endpoint.
     */
    Endpoint endpoint;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServerSpec.java`
#### Snippet
```java
     * Get the storage server configuration.
     *
     * @return storage server configuration.
     */
    StorageServerConfiguration storeServerConf;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/grpc/GrpcServerSpec.java`
#### Snippet
```java
     * Get the local server name.
     *
     * @return local server name.
     */
    String localServerName;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns if should start zookeeper.
     *
     * @return true if should start zookeeper, otherwise false.
     */
    @Default
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns the gRPC server port used in this cluster.
     *
     * @return the gRPC server port used in this cluster.
     */
    @Default
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns the configuration used by the servers across the cluster.
     *
     * @return the configuration used by the servers across the cluster.
     */
    CompositeConfiguration baseConf;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns the zookeeper server port used in this cluster.
     *
     * @return the zookeeper server port used in this cluster.
     */
    @Default
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns the metadata service uri that the servers will connect to.
     *
     * @return the metadata service uri that the servers will connect to.
     */
    @Default
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns the bookie server port used in this cluster.
     *
     * @return the bookie server port used in this cluster.
     */
    @Default
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * The root dir used by the stream storage to store data.
     *
     * @return the root dir used by the stream storage to store data.
     */
    @Default
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamClusterSpec.java`
#### Snippet
```java
     * Returns the number of servers to run in this cluster.
     *
     * @return the number of servers to run in this cluster.
     */
    @Default
```

### JavadocDeclaration
`@param args` tag description is missing
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchBookie.java`
#### Snippet
```java
    }
    /**
     * @param args
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchBookie.java`
#### Snippet
```java
    /**
     * @param args
     * @throws InterruptedException
     */
    public static void main(String[] args)
```

### JavadocDeclaration
`@throws` tag description is missing
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdMetadataDriverBase.java`
#### Snippet
```java
     * @param conf configuration to initialize metadata driver
     * @param statsLogger stats logger
     * @throws MetadataException
     */
    protected void initialize(AbstractConfiguration<?> conf, StatsLogger statsLogger)
```

### JavadocDeclaration
`@param args` tag description is missing
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/TestClient.java`
#### Snippet
```java
     * Third parameter is the number of writes.
     *
     * @param args
     */
    public static void main(String[] args) throws ParseException {
```

### JavadocDeclaration
`@param bookieId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieSocketAddress.java`
#### Snippet
```java
    /**
     * Tells whether a BookieId may be a dummy id.
     * @param bookieId
     * @return true if the BookieId looks like it has been generated by
     * {@link #createDummyBookieIdForHostname(java.lang.String)}
```

### JavadocDeclaration
`@param serialized` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieId.java`
#### Snippet
```java
    /**
     * Parses the given serialized representation of a BookieId.
     * @param serialized
     * @return the parsed BookieId
     */
```

### JavadocDeclaration
`@param loc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopology.java`
#### Snippet
```java
    /**
     * Retrieve a node from the network topology.
     * @param loc
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopology.java`
#### Snippet
```java
     * Retrieve a node from the network topology.
     * @param loc
     * @return
     */
    Node getNode(String loc);
```

### JavadocDeclaration
`@param bookieAddressResolver` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/DNSToSwitchMapping.java`
#### Snippet
```java
    /**
     * Receives the current BookieAddressResolver.
     * @param bookieAddressResolver
     */
    default void setBookieAddressResolver(BookieAddressResolver bookieAddressResolver) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerAuditorManager.java`
#### Snippet
```java
    /**
     * Return the information regarding the current auditor.
     * @return
     */
    BookieId getCurrentAuditor() throws IOException, InterruptedException;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerAuditorManager.java`
#### Snippet
```java
     * @param bookieId the identifier for current bookie
     * @param listener listener that will receive AuditorEvent notifications
     * @return
     */
    void tryToBecomeAuditor(String bookieId, Consumer<AuditorEvent> listener) throws IOException, InterruptedException;
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
         * @param leafIndex an indexed leaf of the node
         * @param excludedNode an excluded node (can be null)
         * @return
         */
        Node getLeaf(int leafIndex, Node excludedNode) {
```

### JavadocDeclaration
`@param networkLocation` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
     * the second part here.
     *
     * @param networkLocation
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
     *
     * @param networkLocation
     * @return
     */
    public static String getLastHalf(String networkLocation) {
```

### JavadocDeclaration
`@param networkLocation` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
     * the first part here.
     *
     * @param networkLocation
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
     *
     * @param networkLocation
     * @return
     */
    public static String getFirstHalf(String networkLocation) {
```

### JavadocDeclaration
Javadoc pointing to itself
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/NetworkTopologyImpl.java`
#### Snippet
```java
     * <p>To be overridden in subclasses for specific NetworkTopology
     * implementations, as alternative to overriding the full
     * {@link #getRack(String)} method.
     * @param loc
     *          a path-like string representation of a network location
```

### JavadocDeclaration
Wrong tag `ledgerRootPath`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractHierarchicalLedgerManager.java`
#### Snippet
```java
     *          example:- {L1652, L1653, L1650}
     * @param path
     *          The zookeeper path of the ledger ids. The path should start with {@ledgerRootPath}
     *          example (with ledgerRootPath = /ledgers):- /ledgers/00/0053
     */
```

### JavadocDeclaration
`@param zk` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
     * of ids < Integer.MAX_VALUE, and try to create the long ledger id gen path.
     * @see createLongLedgerIdPathAndGenerateLongLedgerId
     * @param zk
     * @return Does the long ledger id gen path exist?
     * @throws KeeperException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
     * @param zk
     * @return Does the long ledger id gen path exist?
     * @throws KeeperException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
     * @return Does the long ledger id gen path exist?
     * @throws KeeperException
     * @throws InterruptedException
     */
    public synchronized boolean ledgerIdGenPathPresent(ZooKeeper zk) throws KeeperException, InterruptedException {
```

### JavadocDeclaration
IOException is not declared to be thrown by method FlatLedgerManager
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/FlatLedgerManager.java`
#### Snippet
```java
     * @param zk
     *          ZooKeeper Client Handle
     * @throws IOException when version is not compatible
     */
    public FlatLedgerManager(AbstractConfiguration conf, ZooKeeper zk) {
```

### JavadocDeclaration
`@param replicasCheckCTime` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Setter for the ReplicasCheck last executed ctime.
     *
     * @param replicasCheckCTime
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param replicasCheckCTime
     * @throws ReplicationException.UnavailableException
     */
    void setReplicasCheckCTime(long replicasCheckCTime) throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@param checkAllLedgersCTime` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Setter for the CheckAllLedgers last executed ctime.
     *
     * @param checkAllLedgersCTime
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param checkAllLedgersCTime
     * @throws ReplicationException.UnavailableException
     */
    void setCheckAllLedgersCTime(long checkAllLedgersCTime) throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * is released then it is supposed to return null.
     *
     * @param ledgerId
     * @return
     * @throws ReplicationException.UnavailableException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param ledgerId
     * @return
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * @param ledgerId
     * @return
     * @throws ReplicationException.UnavailableException
     */
    String getReplicationWorkerIdRereplicatingLedger(long ledgerId) throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@param lostBookieRecoveryDelay` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Setter for the lostBookieRecoveryDelay znode.
     *
     * @param lostBookieRecoveryDelay
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param lostBookieRecoveryDelay
     * @throws ReplicationException.UnavailableException
     */
    void setLostBookieRecoveryDelay(int lostBookieRecoveryDelay) throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @return the long value of checkAllLedgersCTime
     * @throws ReplicationException.UnavailableException
     */
    long getCheckAllLedgersCTime() throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @return the long value of replicasCheckCTime
     * @throws ReplicationException.UnavailableException
     */
    long getReplicasCheckCTime() throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@param placementPolicyCheckCTime` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Setter for the PlacementPolicyCheck last executed ctime.
     *
     * @param placementPolicyCheckCTime
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param placementPolicyCheckCTime
     * @throws ReplicationException.UnavailableException
     */
    void setPlacementPolicyCheckCTime(long placementPolicyCheckCTime) throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @return the int value of lostBookieRecoveryDelay
     * @throws ReplicationException.UnavailableException
     */
    int getLostBookieRecoveryDelay() throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@param cb` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Receive notification asynchronously when the num of under-replicated ledgers  Changed.
     *
     * @param cb
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param cb
     * @throws ReplicationException.UnavailableException
     */
    void notifyUnderReplicationLedgerChanged(GenericCallback<Void> cb)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * @return the UnderreplicatedLedger info instance if this ledger is marked
     *         underreplicated otherwise it returns null.
     * @throws ReplicationException.UnavailableException
     */
    UnderreplicatedLedger getLedgerUnreplicationInfo(long ledgerId) throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @return the long value of placementPolicyCheckCTime
     * @throws ReplicationException.UnavailableException
     */
    long getPlacementPolicyCheckCTime() throws ReplicationException.UnavailableException;
```

### JavadocDeclaration
`@param cb` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * Receive notification asynchronously when the lostBookieRecoveryDelay value is Changed.
     *
     * @param cb
     * @throws ReplicationException.UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     *
     * @param cb
     * @throws ReplicationException.UnavailableException
     */
    void notifyLostBookieRecoveryDelayChanged(GenericCallback<Void> cb)
```

### JavadocDeclaration
`@param lostBookieRecoveryDelay` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * If the node is already existing, then it returns false.
     *
     * @param lostBookieRecoveryDelay
     * @return
     *      true if it succeeds in creating zNode for lostBookieRecoveryDelay, false if it is already existing
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerUnderreplicationManager.java`
#### Snippet
```java
     * @return
     *      true if it succeeds in creating zNode for lostBookieRecoveryDelay, false if it is already existing
     * @throws ReplicationException.UnavailableException
     */
    boolean initializeLostBookieRecoveryDelay(int lostBookieRecoveryDelay)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LayoutManager.java`
#### Snippet
```java
     * Delete ledger layout.
     *
     * @throws IOException
     */
    void deleteLedgerLayout() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.java`
#### Snippet
```java
         * @param level2
         *          2nd level node name
         * @throws IOException
         */
        LedgerRange getLedgerRangeByLevel(final String level1, final String level2)
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
     * @param znode
     *            Znode Name
     * @return
     */
    public boolean isLedgerParentNode(String znode) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
     * HierarchicalLedgerManager) or znode of a ledger (in FlatLedgerManager).
     *
     * @return
     */
    protected abstract String getLedgerParentNodeRegex();
```

### JavadocDeclaration
`@param path` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongHierarchicalLedgerManager.java`
#### Snippet
```java
         * LedgerRangeIterator.
         *
         * @param path
         * @return Iterator into set of all children with path as a parent
         * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongHierarchicalLedgerManager.java`
#### Snippet
```java
         * @param path
         * @return Iterator into set of all children with path as a parent
         * @throws IOException
         */
        List<String> getChildrenAt(String path) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongHierarchicalLedgerManager.java`
#### Snippet
```java
             * @param path Subpath for thisLevelIterator
             * @param level Level of thisLevelIterator (must be <= 3)
             * @throws IOException
             */
            InnerIterator(String path, int level) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManagerFactory.java`
#### Snippet
```java
     *          layout manager
     * @return new ledger manager factory
     * @throws IOException
     */
    @SuppressWarnings("deprecation")
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java`
#### Snippet
```java
     * @param lm
     *          Layout manager
     * @throws IOException
     * @throws KeeperException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java`
#### Snippet
```java
     *          Layout manager
     * @throws IOException
     * @throws KeeperException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LedgerManagerFactory.java`
#### Snippet
```java
     * @throws IOException
     * @throws KeeperException
     * @throws InterruptedException
     */
    boolean validateAndNukeExistingCluster(AbstractConfiguration<?> conf, LayoutManager lm)
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the truststore type for client. Default is JKS.
     *
     * @return
     */
    public String getTLSTrustStoreType() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Get the number of ticks per wheel for the request timer.
     * @return
     */
    public int getRequestTimerNumTicks() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the truststore type for client.
     *
     * @return
     */
    public ServerConfiguration setTLSTrustStoreType(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the truststore path for the client.
     *
     * @return
     */
    public String getTLSTrustStore() {
```

### JavadocDeclaration
`@param gcEntryLogMetadataCacheEnabled` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set whether the bookie is configured to use persistent
     * entrylogMetadataMap.
     * @param gcEntryLogMetadataCacheEnabled
     * @return server configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the keystore path for the client.
     *
     * @return
     */
    public String getTLSKeyStore() {
```

### JavadocDeclaration
`@param gcEntrylogMetadataCachePath` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * configured, keep the default value is the best practice.
     *
     * @param gcEntrylogMetadataCachePath
     * @return server configuration.
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Directories in the same filesystem diskpartition.
     *
     * @return
     */
    public boolean isAllowMultipleDirsUnderSameDiskPartition() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the path to file containing TLS Certificate.
     *
     * @return
     */
    public ServerConfiguration setTLSCertificatePath(String arg) {
```

### JavadocDeclaration
`@param journalReuseFiles` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Set reuse journal files.
     * @param journalReuseFiles
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set reuse journal files.
     * @param journalReuseFiles
     * @return
     */
    public ServerConfiguration setJournalReuseFiles(boolean journalReuseFiles) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the keystore type for client.
     *
     * @return
     */
    public ServerConfiguration setTLSKeyStoreType(String arg) {
```

### JavadocDeclaration
`@param gcOverreplicatedLedgerMaxConcurrentRequests` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Max number of concurrent requests in garbage collection of overreplicated ledgers. Default: 1000
     *
     * @param gcOverreplicatedLedgerMaxConcurrentRequests
     * @return server configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * <p>Default is true
     *
     * @return
     */
    public boolean getJournalWriteData() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Get reuse journal files.
     * @return
     */
    public boolean getJournalReuseFiles() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Get the auto-throttling status of the read-worker threads.
     * @return
     */
    public boolean isReadWorkerThreadsThrottlingEnabled() {
```

### JavadocDeclaration
`@param enabled` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     *
     * @deprecated Use {@link #setLedgerStorageClass(String)} to configure the implementation class
     * @param enabled
     */
    public ServerConfiguration setSortedLedgerStorageEnabled(boolean enabled) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     *
     * @return
     */
    public String getJournalChannelProvider() {
```

### JavadocDeclaration
`@param waitTime` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * grace period and then it will release the lock.
     *
     * @param waitTime
     */
    public void setLockReleaseOfFailedLedgerGracePeriod(String waitTime) {
```

### JavadocDeclaration
`@param timeoutMs` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Set the acquire concurrent open ledger operations timeout.
     * @param timeoutMs
     */
    public void setAuditorAcquireConcurrentOpenLedgerOperationsTimeoutMSec(int timeoutMs) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * <p>Default is true
     *
     * @return
     */
    public ServerConfiguration setJournalWriteData(boolean journalWriteData) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Get the tick duration in milliseconds.
     * @return
     */
    public int getRequestTimerTickDurationMs() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Get if Http Server Tls enable.
     * @return
     */
    public boolean isHttpServerTlsEnable() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the path to file containing keystore password, if the client keystore is password protected.
     *
     * @return
     */
    public ServerConfiguration setTLSKeyStorePasswordPath(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * LOCK_RELEASE_OF_FAILED_LEDGER_GRACE_PERIOD.
     *
     * @return
     */
    public long getLockReleaseOfFailedLedgerGracePeriod() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the path to file containing TLS Certificate.
     *
     * @return
     */
    public String getTLSCertificatePath() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     *
     * @return stats provider class
     * @throws ConfigurationException
     */
    public Class<? extends StatsProvider> getStatsProviderClass()
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the path to file containing truststore password, if the client truststore is password protected.
     *
     * @return
     */
    public ServerConfiguration setTLSTrustStorePasswordPath(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the truststore path for the client.
     *
     * @return
     */
    public ServerConfiguration setTLSTrustStore(String arg) {
```

### JavadocDeclaration
`@param maxPendingReadRequestsPerThread` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * new requests will be failed immediately.
     *
     * @param maxPendingReadRequestsPerThread
     * @return server configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the keystore type for client. Default is JKS.
     *
     * @return
     */
    public String getTLSKeyStoreType() {
```

### JavadocDeclaration
`@param semaphore` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Set the semaphore limit value for getting ledger from zookeeper in auto recovery.
     * @param semaphore
     */
    public void setAuditorMaxNumberOfConcurrentOpenLedgerOperations(int semaphore) {
```

### JavadocDeclaration
`@param tlsEnable` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Set if Http Server Tls enable.
     * @param tlsEnable
     * @return server configuration
     */
```

### JavadocDeclaration
Wrong tag `Param`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set PageCache flush interval in second.
     *
     * @Param journalPageCacheFlushInterval
     *          journal pageCache flush interval when journalSyncData closed
     * @return server configuration.
```

### JavadocDeclaration
`@param useTransactionalCompaction` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Set whether to use transactional compaction and using a separate log for compaction or not.
     * @param useTransactionalCompaction
     * @return server configuration
     */
```

### JavadocDeclaration
`@param verifyMetadataOnGC` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Set whether the bookie is configured to double check prior to gc.
     * @param verifyMetadataOnGC
     * @return server configuration
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
    /**
     * Validate the configuration.
     * @throws ConfigurationException
     */
    public void validate() throws ConfigurationException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * <p>Default is true
     *
     * @return
     */
    public boolean getJournalSyncData() {
```

### JavadocDeclaration
`@param gcWaitTime` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * 5. Now there are 3 copies of the ledger.
     *
     * @param gcWaitTime
     * @return server configuration
     */
```

### JavadocDeclaration
`@param allow` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * directories in the same filesystem diskpartition.
     *
     * @param allow
     *
     * @return server configuration object.
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Set the keystore path for the client.
     *
     * @return
     */
    public ServerConfiguration setTLSKeyStore(String arg) {
```

### JavadocDeclaration
`@param value` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Requires waitTimeoutOnBackpressureMs >= 0 otherwise ignored.
     *
     * @param value
     * @return server configuration.
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     *          The JournalChannelProvider classname. The class must implements {@link FileChannelProvider} and
     *          no args constructor is needed.
     * @return
     */
    public ServerConfiguration setJournalChannelProvider(String journalChannelProvider) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * null.
     *
     * @return
     */
    public String getTLSTrustStorePasswordPath() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the number of threads that should be used for high priority requests
     * (i.e. recovery reads and adds, and fencing)
     * @return
     */
    public int getNumHighPriorityWorkerThreads() {
```

### JavadocDeclaration
`@param maxPendingAddRequestsPerThread` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * will be failed immediately.
     *
     * @param maxPendingAddRequestsPerThread
     * @return server configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     *
     * @param enabled whether to enable read-only mode when any disk is full.
     * @return
     */
    public ServerConfiguration setReadOnlyModeOnAnyDiskFullEnabled(boolean enabled) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ServerConfiguration.java`
#### Snippet
```java
     * Get the path to file containing keystore password if the client keystore is password protected. Default is null.
     *
     * @return
     */
    public String getTLSKeyStorePasswordPath() {
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LedgerIdFormatter.java`
#### Snippet
```java
     * in String format.
     *
     * @param ledgerId
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LedgerIdFormatter.java`
#### Snippet
```java
     *
     * @param ledgerId
     * @return
     */
    public abstract String formatLedgerId(long ledgerId);
```

### JavadocDeclaration
`@param ledgerIdString` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LedgerIdFormatter.java`
#### Snippet
```java
     * to the long value.
     *
     * @param ledgerIdString
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LedgerIdFormatter.java`
#### Snippet
```java
     *
     * @param ledgerIdString
     * @return
     */
    public abstract long readLedgerId(String ledgerIdString);
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IOUtils.java`
#### Snippet
```java
     *          suffix of the directory name
     * @return directory created
     * @throws IOException
     */
    public static File createTempDir(String prefix, String suffix)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZkUtils.java`
#### Snippet
```java
     *          node path
     * @return direct children
     * @throws InterruptedException
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IOUtils.java`
#### Snippet
```java
     *          or null if the default temporary-file directory is to be used
     * @return directory created
     * @throws IOException
     */
    public static File createTempDir(String prefix, String suffix, File dir)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IOUtils.java`
#### Snippet
```java
     * @return Returns true if confirmed as 'Y', returns false if confirmed as
     *         'N'
     * @throws IOException
     */
    public static boolean confirmPrompt(String prompt) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZkUtils.java`
#### Snippet
```java
     * @return direct children
     * @throws InterruptedException
     * @throws IOException
     */
    public static List<String> getChildrenInSingleNode(final ZooKeeper zk, final String node, long zkOpTimeoutMs)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IOUtils.java`
#### Snippet
```java
     *          suffix of the directory name
     * @return directory created
     * @throws IOException
     */
    public static File createTempFileAndDeleteOnExit(String prefix, String suffix)
```

### JavadocDeclaration
`@param comparator` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IteratorUtility.java`
#### Snippet
```java
     * @param iter2
     *          second iterator of type T
     * @param comparator
     * @param function
     * @return
```

### JavadocDeclaration
`@param function` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IteratorUtility.java`
#### Snippet
```java
     *          second iterator of type T
     * @param comparator
     * @param function
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/IteratorUtility.java`
#### Snippet
```java
     * @param comparator
     * @param function
     * @return
     */
    public static <T> OfLong mergeIteratorsForPrimitiveLongIterator(Iterator<T> iter1, Iterator<T> iter2,
```

### JavadocDeclaration
`@param runnable` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/SafeRunnable.java`
#### Snippet
```java
     * </pre>
     *
     * @param runnable
     * @param exceptionHandler
     *            handler that will be called when there are any exception
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/SafeRunnable.java`
#### Snippet
```java
     * @param exceptionHandler
     *            handler that will be called when there are any exception
     * @return
     */
    public static SafeRunnable safeRun(Runnable runnable, Consumer<Throwable> exceptionHandler) {
```

### JavadocDeclaration
`@param length` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZeroBuffer.java`
#### Snippet
```java
    /**
     * Returns read-only zero-filled buffer.
     * @param length
     * @return ByteBuffer
     */
```

### JavadocDeclaration
`@param dst` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZeroBuffer.java`
#### Snippet
```java
    /**
     * Fill zeros into given buffer.
     * @param dst
     */
    public static void put(ByteBuffer dst) {
```

### JavadocDeclaration
`@param dst` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZeroBuffer.java`
#### Snippet
```java
    /**
     * Fill zeros into given buffer up to given length.
     * @param dst
     * @param length
     */
```

### JavadocDeclaration
`@param length` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/ZeroBuffer.java`
#### Snippet
```java
     * Fill zeros into given buffer up to given length.
     * @param dst
     * @param length
     */
    public static void put(ByteBuffer dst, int length) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Tool.java`
#### Snippet
```java
     * @param args command specific arguments
     * @return exit code.
     * @throws Exception
     */
    int run(String[] args) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Tool.java`
#### Snippet
```java
     *
     * @param conf configuration object
     * @throws Exception
     */
    void setConf(CompositeConfiguration conf) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
     * @param linkDir - target directory where the hardlinks will be put
     * @return - total data length (must not exceed maxAllowedCmdArgLength)
     * @throws IOException
     */
    abstract int getLinkMultArgLength(
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
   * @param linkDir - target directory where the hardlinks will be put
   * @return - total data length (must not exceed maxAllowedCmdArgLength)
   * @throws IOException
   */
  protected static int getLinkMultArgLength(
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     *          level of the ledger path
     * @return ledger id
     * @throws IOException
     */
    public static long stringToHierarchicalLedgerId(String...levelNodes) throws IOException {
```

### JavadocDeclaration
`@param longHierarchicalLedgerPaths` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     * Parse the long hierarchical ledger path to its ledger id.
     *
     * @param longHierarchicalLedgerPaths
     * @return the ledger id
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     * @param longHierarchicalLedgerPaths
     * @return the ledger id
     * @throws IOException
     */
    public static long stringToLongHierarchicalLedgerId(String longHierarchicalLedgerPath)
```

### JavadocDeclaration
`@param hierarchicalLedgerPath` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     * Parse the hierarchical ledger path to its ledger id.
     *
     * @param hierarchicalLedgerPath
     * @return the ledger id
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     * @param hierarchicalLedgerPath
     * @return the ledger id
     * @throws IOException
     */
    public static long stringToHierarchicalLedgerId(String hierarchicalLedgerPath)
```

### JavadocDeclaration
`@param request` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/StringUtils.java`
#### Snippet
```java
     * Builds string representation of teh request without extra (i.e. binary) data
     *
     * @param request
     * @return string representation of request
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
     *
     * @return freeDiskSpace in bytes
     * @throws IOException
     */
    public long getTotalFreeSpace(List<File> dirs) throws IOException {
```

### JavadocDeclaration
`@param dir` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
     * exists or the mkdir fails.
     *
     * @param dir
     * @return true on success, false on failure
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
     *            list of directories
     * @return disk usage factor in the provided list of dirs
     * @throws IOException
     */
    public float getTotalDiskUsage(List<File> dirs) throws IOException {
```

### JavadocDeclaration
`@param diskSpaceThreshold` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
     * Set the disk space threshold.
     *
     * @param diskSpaceThreshold
     */
    void setDiskSpaceThreshold(float diskSpaceThreshold, float diskUsageWarnThreshold) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
     *
     * @return totalDiskSpace in bytes
     * @throws IOException
     */
    public long getTotalDiskSpace(List<File> dirs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
     * @param fileName
     *         name of the file
     * @throws IOException
     */
    private void serializeLocalBookieConfig(ServerConfiguration localBookieConfig, String fileName) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClientFactory.java`
#### Snippet
```java
     *
     * @return the client connected to address.
     * @throws SecurityException
     */
    PerChannelBookieClient create(BookieId address, PerChannelBookieClientPool pcbcPool,
```

### JavadocDeclaration
`@param bookieId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieAddressResolver.java`
#### Snippet
```java
    /**
     * Maps a logical address to a network address.
     * @param bookieId
     * @return a mapped address.
     * @throws BookieIdNotResolvedException if it is not possible to resolve the address of the BookieId
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     * returns the string representation of json format of this config.
     *
     * @return
     * @throws ParseJsonException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     *
     * @return
     * @throws ParseJsonException
     */
    public String asJson() throws ParseJsonException {
```

### JavadocDeclaration
`@param zkEnableSecurity` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/AbstractConfiguration.java`
#### Snippet
```java
     * Set the usage of ACLs of new z-nodes.
     *
     * @param zkEnableSecurity
     */
    public void setZkEnableSecurity(boolean zkEnableSecurity) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ConnectionPeer.java`
#### Snippet
```java
    /**
     * Additional principals bound to the connection, like TLS certificates.
     * @return
     */
    Collection<Object> getProtocolPrincipals();
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ConnectionPeer.java`
#### Snippet
```java
    /**
     * Address from which originated the connection.
     * @return
     */
    SocketAddress getRemoteAddr();
```

### JavadocDeclaration
`@param ` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookkeeperInternalCallbacks.java`
#### Snippet
```java
     * Handle the Response Code and transform it to a BKException.
     *
     * @param <T>
     * @param rc
     * @param result
```

### JavadocDeclaration
`@param rc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookkeeperInternalCallbacks.java`
#### Snippet
```java
     *
     * @param <T>
     * @param rc
     * @param result
     * @param future
```

### JavadocDeclaration
`@param result` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookkeeperInternalCallbacks.java`
#### Snippet
```java
     * @param <T>
     * @param rc
     * @param result
     * @param future
     */
```

### JavadocDeclaration
`@param future` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookkeeperInternalCallbacks.java`
#### Snippet
```java
     * @param rc
     * @param result
     * @param future
     */
    public static <T> void finish(int rc, T result, CompletableFuture<? super T> future) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PacketProcessorBaseV3.java`
#### Snippet
```java
     * Build a header with protocol version 3 and the operation type same as what was in the
     * request.
     * @return
     */
    protected BKPacketHeader getHeader() {
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
    /**
     *
     * @param key
     * @return the value or -1 if the key was not present
     */
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
     * Remove an existing entry if found.
     *
     * @param key
     * @return the value associated with the key or -1 if key was not present
     */
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
     * Change the value for a specific key only if it matches the current value.
     *
     * @param key
     * @param currentValue
     * @param newValue
```

### JavadocDeclaration
`@param currentValue` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
     *
     * @param key
     * @param currentValue
     * @param newValue
     * @return
```

### JavadocDeclaration
`@param newValue` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
     * @param key
     * @param currentValue
     * @param newValue
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
     * @param currentValue
     * @param newValue
     * @return
     */
    public boolean compareAndSet(long key, long currentValue, long newValue) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ReadEntryProcessorV3.java`
#### Snippet
```java
     *          stop watch to measure the read operation.
     * @return read response or null if it is a fence read operation.
     * @throws IOException
     */
    protected ReadResponse readEntry(ReadResponse.Builder readResponseBuilder,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/ReadEntryProcessorV3.java`
#### Snippet
```java
     *          stop watch to measure the read operation.
     * @return read response or null if it is a fence read operation.
     * @throws IOException
     */
    protected ReadResponse readEntry(ReadResponse.Builder readResponseBuilder,
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClientPool.java`
#### Snippet
```java
     * It is suggested to delay/throttle requests to this channel if isWritable is false.
     *
     * @param key
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClientPool.java`
#### Snippet
```java
     *
     * @param key
     * @return
     */
    default boolean isWritable(long key) {
```

### JavadocDeclaration
`@param args` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClientImpl.java`
#### Snippet
```java

    /**
     * @param args
     * @throws IOException
     * @throws NumberFormatException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClientImpl.java`
#### Snippet
```java
    /**
     * @param args
     * @throws IOException
     * @throws NumberFormatException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClientImpl.java`
#### Snippet
```java
     * @param args
     * @throws IOException
     * @throws NumberFormatException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieClientImpl.java`
#### Snippet
```java
     * @throws IOException
     * @throws NumberFormatException
     * @throws InterruptedException
     */
    public static void main(String[] args) throws NumberFormatException, IOException, InterruptedException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * null.
     *
     * @return
     */
    public String getTLSTrustStorePasswordPath() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the keystore path for the client.
     *
     * @return
     */
    public String getTLSKeyStore() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
    /**
     * Return the timeout value for startTLS request.
     * @return
     */
    public int getStartTLSTimeout() {
```

### JavadocDeclaration
`@param timeoutSecs` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the timeout value in secs for the GET_BOOKIE_INFO request.
     *
     * @param timeoutSecs
     * @return client configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the bookie quarantine ratio.
     *
     * @return
     */
    public double getBookieQuarantineRatio() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * 60s.
     *
     * @return
     */
    public int getGetBookieInfoRetryIntervalSeconds() {
```

### JavadocDeclaration
`@param multiple` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the max multiple to use for nodes with very high weight.
     *
     * @param multiple
     * @return client configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
    /**
     * Return the timeout value for getBookieInfo request.
     * @return
     */
    public int getBookieInfoTimeout() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the error threshold for a bookie to be quarantined.
     *
     * @return
     */
    public long getBookieErrorThresholdPerInterval() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the keystore path for the client.
     *
     * @return
     */
    public ClientConfiguration setTLSKeyStore(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Check if bookie health check is enabled.
     *
     * @return
     */
    public boolean isBookieHealthCheckEnabled() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the path to file containing truststore password, if the client truststore is password protected.
     *
     * @return
     */
    public ClientConfiguration setTLSTrustStorePasswordPath(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the path to file containing keystore password, if the client keystore is password protected. Default is null.
     *
     * @return
     */
    public String getTLSKeyStorePasswordPath() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the keystore type for client.
     *
     * @return
     */
    public ClientConfiguration setTLSKeyStoreType(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the truststore type for client. Default is JKS.
     *
     * @return
     */
    public String getTLSTrustStoreType() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the keystore type for client. Default is JKS.
     *
     * @return
     */
    public String getTLSKeyStoreType() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the path to file containing TLS Certificate.
     *
     * @return
     */
    public String getTLSCertificatePath() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the path to file containing keystore password, if the client keystore is password protected.
     *
     * @return
     */
    public ClientConfiguration setTLSKeyStorePasswordPath(String arg) {
```

### JavadocDeclaration
`@param ratio` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * set the bookie quarantine ratio. default is 1.0.
     *
     * @param ratio
     * @return client configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the truststore type for client.
     *
     * @return
     */
    public ClientConfiguration setTLSTrustStoreType(String arg) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
    /**
     * Return whether disk weight based placement policy is enabled.
     * @return
     */
    public boolean getDiskWeightBasedPlacementEnabled() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the bookie health check interval in seconds.
     *
     * @return
     */
    public int getBookieHealthCheckIntervalSeconds() {
```

### JavadocDeclaration
`@param timeoutSecs` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
    /**
     * Set the timeout value in secs for the START_TLS request.
     * @param timeoutSecs
     * @return client configuration
     */
```

### JavadocDeclaration
`@param pollInterval` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the time interval between successive polls for bookie get info.
     *
     * @param pollInterval
     * @param unit
     * @return client configuration
```

### JavadocDeclaration
`@param unit` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     *
     * @param pollInterval
     * @param unit
     * @return client configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the time interval between successive calls for bookie get info. Default is 24 hours.
     *
     * @return
     */
    public int getGetBookieInfoIntervalSeconds() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the time for which a bookie will be quarantined.
     *
     * @return
     */
    public int getBookieQuarantineTimeSeconds() {
```

### JavadocDeclaration
`@param thresholdPerInterval` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * </p>
     *
     * @param thresholdPerInterval
     *
     * @return client configuration
```

### JavadocDeclaration
`@param quarantineTime` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * </p>
     *
     * @param quarantineTime
     * @param unit
     * @return client configuration
```

### JavadocDeclaration
`@param unit` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     *
     * @param quarantineTime
     * @param unit
     * @return client configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Get the truststore path for the client.
     *
     * @return
     */
    public String getTLSTrustStore() {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the truststore path for the client.
     *
     * @return
     */
    public ClientConfiguration setTLSTrustStore(String arg) {
```

### JavadocDeclaration
`@param interval` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the time interval between retries on unsuccessful GetInfo requests.
     *
     * @param interval
     * @param unit
     * @return client configuration
```

### JavadocDeclaration
`@param unit` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     *
     * @param interval
     * @param unit
     * @return client configuration
     */
```

### JavadocDeclaration
`@param interval` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * </p>
     *
     * @param interval
     * @param unit
     * @return client configuration
```

### JavadocDeclaration
`@param unit` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     *
     * @param interval
     * @param unit
     * @return client configuration
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the path to file containing TLS Certificate.
     *
     * @return
     */
    public ClientConfiguration setTLSCertificatePath(String arg) {
```

### JavadocDeclaration
`@param throttleValue` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     * Set the log frequency when a bookie is unavailable, in order to limit log filesize.
     *
     * @param throttleValue
     * @param unit
     * @return client configuration.
```

### JavadocDeclaration
`@param unit` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/conf/ClientConfiguration.java`
#### Snippet
```java
     *
     * @param throttleValue
     * @param unit
     * @return client configuration.
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java
         *          object.
         * @return encode buffer.
         * @throws Exception
         */
        Object encode(Object object, ByteBufAllocator allocator) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieProtoEncoding.java`
#### Snippet
```java
         *          received packet.
         * @return parsed object.
         * @throws Exception
         */
        Object decode(ByteBuf packet) throws Exception;
```

### JavadocDeclaration
`@param entryId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * Computes the digest for an entry and put bytes together for sending.
     *
     * @param entryId
     * @param lastAddConfirmed
     * @param length
```

### JavadocDeclaration
`@param lastAddConfirmed` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     *
     * @param entryId
     * @param lastAddConfirmed
     * @param length
     * @param data
```

### JavadocDeclaration
`@param length` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * @param entryId
     * @param lastAddConfirmed
     * @param length
     * @param data
     * @return
```

### JavadocDeclaration
`@param data` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * @param lastAddConfirmed
     * @param length
     * @param data
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * @param length
     * @param data
     * @return
     */
    public ReferenceCounted computeDigestAndPackageForSending(long entryId, long lastAddConfirmed, long length,
```

### JavadocDeclaration
`@param entryId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * Verify that the digest matches and returns the data in the entry.
     *
     * @param entryId
     * @param dataReceived
     * @return
```

### JavadocDeclaration
`@param dataReceived` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     *
     * @param entryId
     * @param dataReceived
     * @return
     * @throws BKDigestMatchException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * @param entryId
     * @param dataReceived
     * @return
     * @throws BKDigestMatchException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * @param dataReceived
     * @return
     * @throws BKDigestMatchException
     */
    public ByteBuf verifyDigestAndReturnData(long entryId, ByteBuf dataReceived)
```

### JavadocDeclaration
`@param lac` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     * Computes the digest for writeLac for sending.
     *
     * @param lac
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/checksum/DigestManager.java`
#### Snippet
```java
     *
     * @param lac
     * @return
     */

```

### JavadocDeclaration
`@param ledgerIdFormatter` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FormatUtil.java`
#### Snippet
```java
     * @param printMsg
     *          Whether printing the message body
     * @param ledgerIdFormatter
     * @param entryFormatter
     */
```

### JavadocDeclaration
`@param entryFormatter` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FormatUtil.java`
#### Snippet
```java
     *          Whether printing the message body
     * @param ledgerIdFormatter
     * @param entryFormatter
     */
    public static void formatEntry(long pos, ByteBuf recBuff, boolean printMsg, LedgerIdFormatter ledgerIdFormatter,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java
     * @param rangeEndPos End position of the entry we are looking for (-1 for till the end of the entrylog)
     * @param printMsg Whether printing the entry data.
     * @throws Exception
     */
    private void scanEntryLogForPositionRange(ServerConfiguration conf, long logId, final long rangeStartPos,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java
     * @param entryId entryId of the ledger we are looking for (-1 for all of the entries of the ledger)
     * @param printMsg Whether printing the entry data.
     * @throws Exception
     */
    private void scanEntryLogForSpecificEntry(ServerConfiguration conf, long logId, final long ledgerId,
```

### JavadocDeclaration
`@param status` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PerChannelBookieClient.java`
#### Snippet
```java

    /**
     * @param status
     * @return {@link BKException.Code.UNINITIALIZED} if the statuscode is unknown.
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Bookie.java`
#### Snippet
```java
     * This method is idempotent. Once a ledger is fenced, it can
     * never be unfenced. Fencing a fenced ledger has no effect.
     * @return
     */
    CompletableFuture<Boolean> fenceLedger(long ledgerId, byte[] masterKey)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/JournalChannel.java`
#### Snippet
```java
     * @param formatVersionToWrite
     *          format version to write
     * @throws IOException
     */
    private JournalChannel(File journalDirectory, long logId,
```

### JavadocDeclaration
Wrong tag `params`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/StateManager.java`
#### Snippet
```java
    /**
     * Register the bookie to RegistrationManager.
     * @params throwException, whether throwException or not
     */
    Future<Void> registerBookie(boolean throwException);
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
     * @param conf
     *          Server Configuration Object.
     * @throws IOException
     */
    public GarbageCollectorThread(ServerConfiguration conf, LedgerManager ledgerManager,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
     * and find the set of ledger ID's that make up each entry log file.
     *
     * @throws EntryLogMetadataMapException
     */
    protected void extractMetaFromEntryLogs() throws EntryLogMetadataMapException {
```

### JavadocDeclaration
`@param entryLogMeta` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
     * Compact an entry log.
     *
     * @param entryLogMeta
     */
    protected void compactEntryLog(EntryLogMetadata entryLogMeta) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
     * @param conf
     *          Server Configuration Object.
     * @throws IOException
     */
    public GarbageCollectorThread(ServerConfiguration conf,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
     * @param entryLogId
     *          Entry Log File Id
     * @throws EntryLogMetadataMapException
     */
    protected void removeEntryLog(long entryLogId) throws EntryLogMetadataMapException {
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java`
#### Snippet
```java
    /**
     * Read implementation metadata for index file.
     * @param ledgerId
     * @return Implementation metadata
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java`
#### Snippet
```java
     * @param ledgerId
     * @return Implementation metadata
     * @throws IOException
     */
    public LedgerCache.LedgerIndexMetadata readLedgerIndexMetadata(long ledgerId) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDescriptor.java`
#### Snippet
```java
     *
     * <p>We should satisfy the future only after we complete logging fence entry in Journal
     * @return
     */
    abstract CompletableFuture<Boolean> fenceAndLogInJournal(Journal journal) throws IOException;
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieFileChannel.java`
#### Snippet
```java
     * Get the file descriptor of the opened file.
     *
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieFileChannel.java`
#### Snippet
```java
     *
     * @return
     * @throws IOException
     */
    FileDescriptor getFD() throws IOException;
```

### JavadocDeclaration
`@param file` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieFileChannel.java`
#### Snippet
```java
     * Check the given file if exists.
     *
     * @param file
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieFileChannel.java`
#### Snippet
```java
     *
     * @param file
     * @return
     */
    boolean fileExists(File file);
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieFileChannel.java`
#### Snippet
```java
    /**
     * An interface for get the FileChannel from the provider.
     * @return
     */
    FileChannel getFileChannel() throws FileNotFoundException, IOException;
```

### JavadocDeclaration
`@param source` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileChannelProvider.java`
#### Snippet
```java
    /**
     * Notify the rename source file name to the target file name operation.
     * @param source
     * @param target
     */
```

### JavadocDeclaration
`@param target` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileChannelProvider.java`
#### Snippet
```java
     * Notify the rename source file name to the target file name operation.
     * @param source
     * @param target
     */
    default void notifyRename(File source, File target) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileChannelProvider.java`
#### Snippet
```java
     * Whether support reuse file. Default is false.
     *
     * @return
     */
    default boolean supportReuseFile() {
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
    /**
     * Return iterator over pages for mapping entries to entry loggers.
     * @param ledgerId
     * @return Iterator over pages
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
     * @param ledgerId
     * @return Iterator over pages
     * @throws IOException
     */
    public LedgerCache.PageEntriesIterable listEntries(long ledgerId) throws IOException {
```

### JavadocDeclaration
Wrong tag `returns`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
         *
         * @param ledgerId Ledger id
         * @returns number of pages removed
         */
        private void removeEntriesForALedger(long ledgerId) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
     *          first entry id of a given page
     * @return ledger entry page
     * @throws IOException
     */
    LedgerEntryPage getLedgerEntryPage(long ledger,
```

### JavadocDeclaration
Wrong tag `returns`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
         *
         * @param ledgerId Ledger id
         * @returns last entry in the in memory pages
         */
        private long getLastEntryInMem(long ledgerId) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
     *
     * @param ledger Ledger Id
     * @throws IOException
     */
    private void flushSpecificLedger(long ledger) throws IOException {
```

### JavadocDeclaration
Wrong tag `returns`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
         * @param ledgerId Ledger id
         * @param firstEntry Id of the first entry in the page
         * @returns LedgerEntryPage if present
         */
        LedgerEntryPage grabCleanPage(long ledgerId, long firstEntry) {
```

### JavadocDeclaration
Wrong tag `returns`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
         * @param ledgerId Ledger id
         * @param firstEntry Id of the first entry in the page
         * @returns LedgerEntryPage if present
         */
        private LedgerEntryPage getPage(long ledgerId, long firstEntry) {
```

### JavadocDeclaration
Wrong tag `returns`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexInMemPageMgr.java`
#### Snippet
```java
         *
         * @param ledgerId Ledger id
         * @returns last entry in the in memory pages.
         */
        private LinkedList<Long> getFirstEntryListToBeFlushed(long ledgerId) {
```

### JavadocDeclaration
`@param dest` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedReadChannel.java`
#### Snippet
```java
     * FileChannel. This function can read from the buffer or the file channel
     * depending on the implementation..
     * @param dest
     * @param pos
     * @return The total number of bytes read.
```

### JavadocDeclaration
`@param pos` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedReadChannel.java`
#### Snippet
```java
     * depending on the implementation..
     * @param dest
     * @param pos
     * @return The total number of bytes read.
     *         -1 if the given position is greater than or equal to the file's current size.
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SkipListFlusher.java`
#### Snippet
```java
     * @param entryId The entry id this entry.
     * @param entry Entry ByteBuffer
     * @throws IOException
     */
    void process(long ledgerId, long entryId, ByteBuf entry) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * For unit tests.
     *
     * @throws EntryLogMetadataMapException
     */
    void clear() throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@param action` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * have been processed or the action throws an exception.
     *
     * @param action
     * @throws EntryLogMetadataMapException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     *
     * @param action
     * @throws EntryLogMetadataMapException
     */
    void forEach(BiConsumer<Long, EntryLogMetadata> action) throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * Returns number of entryLogMetadata records presents into the map.
     *
     * @return
     * @throws EntryLogMetadataMapException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     *
     * @return
     * @throws EntryLogMetadataMapException
     */
    int size() throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@param entryLogId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * Checks if record with entryLogId exists into the map.
     *
     * @param entryLogId
     * @return
     * @throws EntryLogMetadataMapException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     *
     * @param entryLogId
     * @return
     * @throws EntryLogMetadataMapException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * @param entryLogId
     * @return
     * @throws EntryLogMetadataMapException
     */
    boolean containsKey(long entryLogId) throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * Returns true if there are no elements in the map.
     *
     * @return
     */
    default boolean isEmpty() throws EntryLogMetadataMapException {
```

### JavadocDeclaration
`@param entryLogId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * Removes entryLogMetadata record from the map.
     *
     * @param entryLogId
     * @throws EntryLogMetadataMapException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     *
     * @param entryLogId
     * @throws EntryLogMetadataMapException
     */
    void remove(long entryLogId) throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@param entryLogId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * Adds entryLogMetadata record into the map.
     *
     * @param entryLogId
     * @param entryLogMeta
     * @throws EntryLogMetadataMapException
```

### JavadocDeclaration
`@param entryLogMeta` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     *
     * @param entryLogId
     * @param entryLogMeta
     * @throws EntryLogMetadataMapException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * @param entryLogId
     * @param entryLogMeta
     * @throws EntryLogMetadataMapException
     */
    void put(long entryLogId, EntryLogMetadata entryLogMeta) throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@param action` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     * Performs the given action for the key.
     *
     * @param action
     * @throws EntryLogMetadataMapException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadataMap.java`
#### Snippet
```java
     *
     * @param action
     * @throws EntryLogMetadataMapException
     */
    void forKey(long entryLogId, BiConsumer<Long, EntryLogMetadata> action) throws EntryLogMetadataMapException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
     * @param file file to read from
     * @return BookieStatus if not error, null if file not exist or any exception happens
     * @throws IOException
     */
    private BookieStatus readFromFile(File file)
```

### JavadocDeclaration
`@param reader` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
     * Parse the bookie status object using appropriate layout version.
     *
     * @param reader
     * @return BookieStatus if parse succeed, otherwise return null
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
     * @param reader
     * @return BookieStatus if parse succeed, otherwise return null
     * @throws IOException
     */
    public BookieStatus parse(BufferedReader reader)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
     * @param file file that you want to write to
     * @param body content to write
     * @throws IOException
     */
    private static void writeToFile(File file, String body) throws IOException {
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SortedLedgerStorage.java`
#### Snippet
```java
    /**
     * Get the last entry id for a particular ledger.
     * @param ledgerId
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SortedLedgerStorage.java`
#### Snippet
```java
     * Get the last entry id for a particular ledger.
     * @param ledgerId
     * @return
     */
    private ByteBuf getLastEntryId(long ledgerId) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
     * @param directory directory
     * @return cookie object
     * @throws IOException
     */
    public static Cookie readFromDirectory(File directory) throws IOException, FileNotFoundException {
```

### JavadocDeclaration
`@param superS` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
     * and checks if first is a super set of the second.
     *
     * @param superS
     * @param subS
     * @return true if superS is a superSet of subS; false otherwise
```

### JavadocDeclaration
`@param subS` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
     *
     * @param superS
     * @param subS
     * @return true if superS is a superSet of subS; false otherwise
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Cookie.java`
#### Snippet
```java
     * @param conf configuration
     * @return cookie builder object
     * @throws UnknownHostException
     */
    public static Builder generateCookie(ServerConfiguration conf)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
     *
     * @return freeDiskSpace in bytes
     * @throws IOException
     */
    public long getTotalDiskSpace(List<File> dirs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
     *
     * @return totalDiskSpace in bytes
     * @throws IOException
     */
    public long getTotalFreeSpace(List<File> dirs) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
     *
     * @param excludedDir The directory to exclude during pickup.
     * @return
     * @throws NoWritableLedgerDirException if there is no dir available.
     */
```

### JavadocDeclaration
`@param disk` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
        /**
         * Notified when the disk usage warn threshold is exceeded on the drive.
         * @param disk
         */
        default void diskAlmostFull(File disk) {}
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CompactableLedgerStorage.java`
#### Snippet
```java
     *
     * @param locations the list of locations to update
     * @throws IOException
     */
    void updateEntriesLocations(Iterable<EntryLocation> locations) throws IOException;
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CompactableLedgerStorage.java`
#### Snippet
```java
     * @param firstLedgerId first ledger id in the sequence (included)
     * @param lastLedgerId last ledger id in the sequence (not included)
     * @return
     */
    Iterable<Long> getActiveLedgersInRange(long firstLedgerId, long lastLedgerId)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/CompactableLedgerStorage.java`
#### Snippet
```java
     * Flush the entries locations index for the compacted entries.
     *
     * @throws IOException
     */
    void flushEntriesLocationsIndex() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
     *            both the file's content and metadata to be written to storage;
     *            otherwise, it need only force content changes to be written
     * @throws IOException
     */
    public void flushAndForceWrite(boolean forceMetadata) throws IOException {
```

### JavadocDeclaration
`@param forceMetadata` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
    /**
     * force a sync operation so that data is persisted to the disk.
     * @param forceMetadata
     * @return
     * @throws IOException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
     * force a sync operation so that data is persisted to the disk.
     * @param forceMetadata
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
     * @param forceMetadata
     * @return
     * @throws IOException
     */
    public long forceWrite(boolean forceMetadata) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
    /**
     * Get the position of the file channel's write pointer.
     * @return
     */
    public long getFileChannelPosition() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
     *            both the file's content and metadata to be written to storage;
     *            otherwise, it need only force content changes to be written
     * @throws IOException
     */
    public void flushAndForceWriteIfRegularFlush(boolean forceMetadata) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannel.java`
#### Snippet
```java
    /**
     * Get the position where the next write operation will begin writing from.
     * @return
     */
    public long position() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerEntryPage.java`
#### Snippet
```java
     *
     * @param vis Consumer for entry position pairs.
     * @throws Exception
     */
    public void getEntries(EntryVisitor vis) throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @param rateLimiter Provide to rate of entry checking.  null for unlimited.
     * @return List of inconsistencies detected
     * @throws IOException
     */
    default List<DetectedInconsistency> localConsistencyCheck(Optional<RateLimiter> rateLimiter) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @param previousLAC - The threshold beyond which we would wait for the update
     * @param watcher  - Watcher to notify on update
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @param watcher  - Watcher to notify on update
     * @return
     * @throws IOException
     */
    boolean waitForLastAddConfirmedUpdate(long ledgerId,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     *
     * @param ledgerId Ledger ID.
     * @throws IOException
     */
    boolean isFenced(long ledgerId) throws IOException, BookieException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @param ledgerId The ledger being watched.
     * @param watcher The watcher to cancel.
     * @throws IOException
     */
    void cancelWaitForLastAddConfirmedUpdate(long ledgerId,
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java

    /**
     * @param ledgerId
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
    /**
     * @param ledgerId
     * @throws IOException
     */
    void deleteLedger(long ledgerId) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @param ledgerId ledger id.
     * @return last add confirmed.
     * @throws IOException
     */
    long getLastAddConfirmed(long ledgerId) throws IOException, BookieException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     *
     * @param checkpoint Check Point that {@link Checkpoint} proposed.
     * @throws IOException
     */
    void checkpoint(Checkpoint checkpoint) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @return the list of entries of the ledger available in this
     *         ledgerstorage.
     * @throws Exception
     */
    PrimitiveIterator.OfLong getListOfEntriesOfLedger(long ledgerId) throws IOException;
```

### JavadocDeclaration
Exception is not declared to be thrown by method getListOfEntriesOfLedger
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @return the list of entries of the ledger available in this
     *         ledgerstorage.
     * @throws Exception
     */
    PrimitiveIterator.OfLong getListOfEntriesOfLedger(long ledgerId) throws IOException;
```

### JavadocDeclaration
`@param conf` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * Initialize the LedgerStorage implementation.
     *
     * @param conf
     * @param ledgerManager
     * @param ledgerDirsManager
```

### JavadocDeclaration
`@param ledgerManager` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     *
     * @param conf
     * @param ledgerManager
     * @param ledgerDirsManager
     */
```

### JavadocDeclaration
`@param ledgerDirsManager` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @param conf
     * @param ledgerManager
     * @param ledgerDirsManager
     */
    void initialize(ServerConfiguration conf,
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BufferedChannelBase.java`
#### Snippet
```java
    /**
     * Get the current size of the underlying FileChannel.
     * @return
     */
    public long size() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
         * @param offset File offset of the journal entry
         * @param entry Journal Entry
         * @throws IOException
         */
        void process(int journalVersion, long offset, ByteBuffer entry) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
     * This is method is needed in order to mock the journal, we can't mock final method of java.lang.Thread class
     *
     * @throws InterruptedException
     */
    @VisibleForTesting
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
     * Telling journal a checkpoint is finished.
     *
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@param id` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
     * Update lastLogMark of the journal
     * Indicates that the file has been processed.
     * @param id
     * @param scanOffset
     */
```

### JavadocDeclaration
`@param scanOffset` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
     * Indicates that the file has been processed.
     * @param id
     * @param scanOffset
     */
    void setLastLogMark(Long id, long scanOffset) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/Journal.java`
#### Snippet
```java
     * @param scanner Scanner to handle entries
     * @return scanOffset - represents the byte till which journal was read
     * @throws IOException
     */
    public long scanJournal(long journalId, long journalPos, JournalScanner scanner)
```

### JavadocDeclaration
`@param item` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
     * Remove an existing entry if found.
     *
     * @param item
     * @return true if removed or false if item was not present
     */
```

### JavadocDeclaration
`@param in` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadata.java`
#### Snippet
```java
     * Deserializes {@link EntryLogMetadataRecyclable} from given {@link DataInputStream}.
     * Caller has to recycle returned {@link EntryLogMetadataRecyclable}.
     * @param in
     * @return
     * @throws IOException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadata.java`
#### Snippet
```java
     * Caller has to recycle returned {@link EntryLogMetadataRecyclable}.
     * @param in
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadata.java`
#### Snippet
```java
     * @param in
     * @return
     * @throws IOException
     */
    public static EntryLogMetadataRecyclable deserialize(DataInputStream in) throws IOException {
```

### JavadocDeclaration
`@param out` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadata.java`
#### Snippet
```java
     * [repeat]: (8-bytes::ledgerId, 8-bytes::size-of-ledger)
     * </pre>
     * @param out
     * @throws IOException
     *             throws if it couldn't serialize metadata-fields
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/FileInfo.java`
#### Snippet
```java
     *          flag indicates if it is a best-effort read
     * @return number of bytes read
     * @throws IOException
     */
    private int readAbsolute(ByteBuffer bb, long start, boolean bestEffort)
```

### JavadocDeclaration
`@param entry` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
     * Write an update.
     *
     * @param entry
     * @return approximate size of the passed key and value.
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
     * @param entry
     * @return approximate size of the passed key and value.
     * @throws IOException
     */
    public long addEntry(long ledgerId, long entryId, final ByteBuffer entry, final CacheCallback cb)
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
    /**
     * Find the entry with given key.
     * @param ledgerId
     * @param entryId
     * @return the entry kv or null if none found.
```

### JavadocDeclaration
`@param entryId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
     * Find the entry with given key.
     * @param ledgerId
     * @param entryId
     * @return the entry kv or null if none found.
     */
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
    /**
     * Find the last entry with the given ledger key.
     * @param ledgerId
     * @return the entry kv or null if none found.
     */
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
     * The passed snapshot was successfully persisted; it can be let go.
     * @param keyValues The snapshot to clean out.
     * @see {@link #snapshot()}
     */
    void clearSnapshot(final EntrySkipList keyValues) {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
    /**
     * Check if there is data in the mem-table.
     * @return
     */
    boolean isEmpty() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
     *          checkpoint
     * @return checkpoint of the snapshot, null means no snapshot
     * @throws IOException
     */
    Checkpoint snapshot(Checkpoint oldCp) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/EntryLogScanner.java`
#### Snippet
```java
     * @param entry
     *          Entry ByteBuf
     * @throws IOException
     */
    void process(long ledgerId, long offset, ByteBuf entry) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/IndexPersistenceMgr.java`
#### Snippet
```java
     *          ledger entry page
     * @return true if it is a new page, otherwise false.
     * @throws IOException
     */
    boolean updatePage(LedgerEntryPage lep) throws IOException {
```

### JavadocDeclaration
`@param entryLogId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
     * buffered channel, route this read to the current logChannel. Else,
     * read from the BufferedReadChannel that is provided.
     * @param entryLogId
     * @param channel
     * @param buff remaining() on this bytebuffer tells us the last position that we
```

### JavadocDeclaration
`@param channel` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
     * read from the BufferedReadChannel that is provided.
     * @param entryLogId
     * @param channel
     * @param buff remaining() on this bytebuffer tells us the last position that we
     *             expect to read.
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
     *             expect to read.
     * @param pos The starting position from where we want to read.
     * @return
     */
    private int readFromLogChannel(long entryLogId, BufferedReadChannel channel, ByteBuf buff, long pos)
```

### JavadocDeclaration
`@param logId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
    /**
     * Remove all entries for this log file in each thread's cache.
     * @param logId
     */
    public void removeFromChannelsAndClose(long logId) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
     * @param entryLogId Entry Log Id
     * @param scanner Entry Log Scanner
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@param logId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
    /**
     * Put the logId, bc pair in the map responsible for the current thread.
     * @param logId
     * @param bc
     */
```

### JavadocDeclaration
`@param bc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
     * Put the logId, bc pair in the map responsible for the current thread.
     * @param logId
     * @param bc
     */
    public BufferedReadChannel putInReadChannels(long logId, BufferedReadChannel bc) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
     * Returns a set with the ids of all the entry log files.
     *
     * @throws IOException
     */
    public Set<Long> getEntryLogsSet() throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
     * database.
     *
     * @return
     */
    CloseableIterator<byte[]> keys();
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
    /**
     *
     * @param key
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
     * @param journal Journal object corresponding to a journalDir
     * @param scanner Scanner to process replayed entries.
     * @throws IOException
     */
    private void replay(Journal journal, JournalScanner scanner) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
     * @param ledgerStorage Instance to initialize.
     * @return Passed ledgerStorage instance
     * @throws IOException
     */
    public static LedgerStorage mountLedgerStorageOffline(ServerConfiguration conf, LedgerStorage ledgerStorage)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
     * @param dirs dirs to validate
     *
     * @throws IOException
     */
    private void checkIfDirsOnSameDiskPartition(List<File> dirs) throws DiskPartitionDuplicationException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
     *
     * @param key
     * @throws IOException
     */
    void delete(byte[] key) throws IOException;
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
     * Get the entry whose key is bigger or equal the supplied key.
     *
     * @param key
     * @return
     * @throws IOException
```

### JavadocDeclaration
IOException is not declared to be thrown by method checkIfDirsOnSameDiskPartition
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
     * @param dirs dirs to validate
     *
     * @throws IOException
     */
    private void checkIfDirsOnSameDiskPartition(List<File> dirs) throws DiskPartitionDuplicationException {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
     *
     * @param key
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
     * This method is idempotent. Once a ledger is fenced, it can
     * never be unfenced. Fencing a fenced ledger has no effect.
     * @return
     */
    public CompletableFuture<Boolean> fenceLedger(long ledgerId, byte[] masterKey)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.java`
#### Snippet
```java
     * @param key
     * @return
     * @throws IOException
     */
    Entry<byte[], byte[]> getCeil(byte[] key) throws IOException;
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
     * Reads ledger index entries to get list of entry-logger that contains given ledgerId.
     *
     * @param ledgerId
     * @param serverConf
     * @param processor
```

### JavadocDeclaration
`@param serverConf` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
     *
     * @param ledgerId
     * @param serverConf
     * @param processor
     * @throws IOException
```

### JavadocDeclaration
`@param processor` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
     * @param ledgerId
     * @param serverConf
     * @param processor
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorage.java`
#### Snippet
```java
     * @param serverConf
     * @param processor
     * @throws IOException
     */
    public static void readLedgerIndexEntries(long ledgerId, ServerConfiguration serverConf,
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
     * Remove an existing entry if found.
     *
     * @param key
     * @return the value associated with the key or -1 if key was not present
     */
```

### JavadocDeclaration
`@param key` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
    /**
     *
     * @param key
     * @return the value or -1 if the key was not present
     */
```

### JavadocDeclaration
`@param rc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
         * Close callback method.
         *
         * @param rc
         * @param lh
         * @param ctx
```

### JavadocDeclaration
`@param lh` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
         *
         * @param rc
         * @param lh
         * @param ctx
         */
```

### JavadocDeclaration
`@param ctx` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
         * @param rc
         * @param lh
         * @param ctx
         */
        @Override
```

### JavadocDeclaration
`@param ` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * Handle the Response Code and transform it to a BKException.
     *
     * @param <T>
     * @param rc
     * @param result
```

### JavadocDeclaration
`@param rc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     *
     * @param <T>
     * @param rc
     * @param result
     * @param future
```

### JavadocDeclaration
`@param result` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * @param <T>
     * @param rc
     * @param result
     * @param future
     */
```

### JavadocDeclaration
`@param future` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * @param rc
     * @param result
     * @param future
     */
    public static <T> void finish(int rc, T result, CompletableFuture<? super T> future) {
```

### JavadocDeclaration
`@param ` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * Wait for a result. This is convenience method to implement callbacks
     *
     * @param <T>
     * @param future
     * @return
```

### JavadocDeclaration
`@param future` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     *
     * @param <T>
     * @param future
     * @return
     * @throws InterruptedException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * @param <T>
     * @param future
     * @return
     * @throws InterruptedException
     * @throws BKException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * @param future
     * @return
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
     * @return
     * @throws InterruptedException
     * @throws BKException
     */
    public static <T> T waitForResult(CompletableFuture<T> future) throws InterruptedException, BKException {
```

### JavadocDeclaration
`@param bk` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java`
#### Snippet
```java
     * Constructor.
     *
     * @param bk
     * @param ledgerId
     * @param digestType Ignored if conf.getEnableDigestTypeAutodetection() is true
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java`
#### Snippet
```java
     *
     * @param bk
     * @param ledgerId
     * @param digestType Ignored if conf.getEnableDigestTypeAutodetection() is true
     * @param passwd
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java`
#### Snippet
```java
     * @param ledgerId
     * @param digestType Ignored if conf.getEnableDigestTypeAutodetection() is true
     * @param passwd
     * @param cb
     * @param ctx
```

### JavadocDeclaration
`@param cb` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java`
#### Snippet
```java
     * @param digestType Ignored if conf.getEnableDigestTypeAutodetection() is true
     * @param passwd
     * @param cb
     * @param ctx
     */
```

### JavadocDeclaration
`@param ctx` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerOpenOp.java`
#### Snippet
```java
     * @param passwd
     * @param cb
     * @param ctx
     */
    public LedgerOpenOp(BookKeeper bk, BookKeeperClientStats clientStats,
```

### JavadocDeclaration
`@param bookieSocketAddress` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookiesHealthInfo.java`
#### Snippet
```java
     * Returns pending requests to a bookie.
     *
     * @param bookieSocketAddress
     * @return number of pending requests
     */
```

### JavadocDeclaration
`@param bookieSocketAddress` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookiesHealthInfo.java`
#### Snippet
```java
     * Return the failure history for a bookie.
     *
     * @param bookieSocketAddress
     * @return failed entries on a bookie, -1 if there have been no failures
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcher.java`
#### Snippet
```java
     *          index of the bookie in the list to be replaced.
     * @return the bookie to replace.
     * @throws BKNotEnoughBookiesException
     */
    BookieId replaceBookie(int ensembleSize, int writeQuorumSize, int ackQuorumSize,
```

### JavadocDeclaration
`@param bookie` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcher.java`
#### Snippet
```java
    /**
     * Quarantine <i>bookie</i> so it will not be preferred to be chosen for new ensembles.
     * @param bookie
     */
    void quarantineBookie(BookieId bookie);
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcher.java`
#### Snippet
```java
     *          Write Quorum Size
     * @return list of bookies for new ensemble.
     * @throws BKNotEnoughBookiesException
     */
    List<BookieId> newEnsemble(int ensembleSize, int writeQuorumSize,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerChecker.java`
#### Snippet
```java
     * @param cb
     *          callback
     * @throws InvalidFragmentException
     */
    private void verifyLedgerFragment(LedgerFragment fragment,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerChecker.java`
#### Snippet
```java
     * @param cb
     *          callback
     * @throws InvalidFragmentException
     */
    private void verifyLedgerFragment(LedgerFragment fragment,
```

### JavadocDeclaration
`@param entryId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java`
#### Snippet
```java
     * in the WriteSet.
     *
     * @param entryId
     * @param writeSetIndex
     * @return
```

### JavadocDeclaration
`@param writeSetIndex` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java`
#### Snippet
```java
     *
     * @param entryId
     * @param writeSetIndex
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DistributionSchedule.java`
#### Snippet
```java
     * @param entryId
     * @param writeSetIndex
     * @return
     */
    int getWriteSetBookieIndex(long entryId, int writeSetIndex);
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param bookieToReplace bookie to replace
     * @param excludeBookies bookies that should not be considered as candidate.
     * @throws BKNotEnoughBookiesException
     * @return a placement result containing the new bookie address.
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param ackQuorumSize
     *            ackQuorumSize of the ensemble
     * @return
     */
    default boolean areAckedBookiesAdheringToPlacementPolicy(Set<BookieId> ackedBookies,
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param ackQuorumSize
     *            ackQuorumSize of the ensemble
     * @return
     */
    default PlacementPolicyAdherence isEnsembleAdheringToPlacementPolicy(List<BookieId> ensembleList,
```

### JavadocDeclaration
`@param entryId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataUtils.java`
#### Snippet
```java
     * place.
     *
     * @param entryId
     * @return the entry id of the next ensemble change (-1 if no further ensemble changes)
     */
```

### JavadocDeclaration
`@param excludeRacks` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * from cluster just excluding excludeBookies.
     *
     * @param excludeRacks
     * @param excludeBookies
     * @param predicate
```

### JavadocDeclaration
`@param excludeBookies` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     *
     * @param excludeRacks
     * @param excludeBookies
     * @param predicate
     * @param ensemble
```

### JavadocDeclaration
`@param predicate` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param excludeRacks
     * @param excludeBookies
     * @param predicate
     * @param ensemble
     * @param fallbackToRandom
```

### JavadocDeclaration
`@param ensemble` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param excludeBookies
     * @param predicate
     * @param ensemble
     * @param fallbackToRandom
     * @return
```

### JavadocDeclaration
`@param fallbackToRandom` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param predicate
     * @param ensemble
     * @param fallbackToRandom
     * @return
     * @throws BKException.BKNotEnoughBookiesException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param ensemble
     * @param fallbackToRandom
     * @return
     * @throws BKException.BKNotEnoughBookiesException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param fallbackToRandom
     * @return
     * @throws BKException.BKNotEnoughBookiesException
     */
    T selectFromNetworkLocation(Set<String> excludeRacks,
```

### JavadocDeclaration
`@param bookieAddressList` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * Handle rack change for the bookies.
     *
     * @param bookieAddressList
     */
    void onBookieRackChange(List<BookieId> bookieAddressList);
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     *          parent ensemble
     * @return list of bookies forming the ensemble
     * @throws BKException.BKNotEnoughBookiesException
     */
    PlacementResult<List<BookieId>> newEnsemble(
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     *          fallbackToRandom
     * @return the selected bookie.
     * @throws BKException.BKNotEnoughBookiesException
     */
    T selectFromNetworkLocation(String networkLoc,
```

### JavadocDeclaration
`@param networkLoc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * excludeBookies if it couldn't find a bookie
     *
     * @param networkLoc
     * @param excludeRacks
     * @param excludeBookies
```

### JavadocDeclaration
`@param excludeRacks` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     *
     * @param networkLoc
     * @param excludeRacks
     * @param excludeBookies
     * @param predicate
```

### JavadocDeclaration
`@param excludeBookies` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param networkLoc
     * @param excludeRacks
     * @param excludeBookies
     * @param predicate
     * @param ensemble
```

### JavadocDeclaration
`@param predicate` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param excludeRacks
     * @param excludeBookies
     * @param predicate
     * @param ensemble
     * @param fallbackToRandom
```

### JavadocDeclaration
`@param ensemble` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param excludeBookies
     * @param predicate
     * @param ensemble
     * @param fallbackToRandom
     * @return
```

### JavadocDeclaration
`@param fallbackToRandom` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param predicate
     * @param ensemble
     * @param fallbackToRandom
     * @return
     * @throws BKNotEnoughBookiesException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param ensemble
     * @param fallbackToRandom
     * @return
     * @throws BKNotEnoughBookiesException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ITopologyAwareEnsemblePlacementPolicy.java`
#### Snippet
```java
     * @param fallbackToRandom
     * @return
     * @throws BKNotEnoughBookiesException
     */
    T selectFromNetworkLocation(String networkLoc,
```

### JavadocDeclaration
`@param rackawarePolicy` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackChangeNotifier.java`
#### Snippet
```java
     * Register a listener for the rack-aware placement policy.
     *
     * @param rackawarePolicy
     */
    void registerRackChangeListener(
```

### JavadocDeclaration
`@param conf` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * mentioned then instanceid will not be validated.
     *
     * @param conf
     * @param ledgersRootPath
     * @param instanceId
```

### JavadocDeclaration
`@param ledgersRootPath` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *
     * @param conf
     * @param ledgersRootPath
     * @param instanceId
     * @param force
```

### JavadocDeclaration
`@param instanceId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param conf
     * @param ledgersRootPath
     * @param instanceId
     * @param force
     * @return
```

### JavadocDeclaration
`@param force` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param ledgersRootPath
     * @param instanceId
     * @param force
     * @return
     * @throws Exception
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param instanceId
     * @param force
     * @return
     * @throws Exception
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param force
     * @return
     * @throws Exception
     */
    public static boolean nukeExistingCluster(ServerConfiguration conf, String ledgersRootPath, String instanceId,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param bookieAddress
     *            address of the decommissioning bookie
     * @throws CompatibilityException
     * @throws UnavailableException
     * @throws KeeperException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *            address of the decommissioning bookie
     * @throws CompatibilityException
     * @throws UnavailableException
     * @throws KeeperException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws CompatibilityException
     * @throws UnavailableException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws UnavailableException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws IOException
     * @throws BKAuditException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws KeeperException
     * @throws InterruptedException
     * @throws IOException
     * @throws BKAuditException
     * @throws TimeoutException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws InterruptedException
     * @throws IOException
     * @throws BKAuditException
     * @throws TimeoutException
     * @throws BKException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws IOException
     * @throws BKAuditException
     * @throws TimeoutException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws BKAuditException
     * @throws TimeoutException
     * @throws BKException
     */
    public void decommissionBookie(BookieId bookieAddress)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @return
     *          current lostBookieRecoveryDelay value (in seconds)
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *          current lostBookieRecoveryDelay value (in seconds)
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
     */
    public int getLostBookieRecoveryDelay()
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * method will throw UnavailableException.
     *
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws InterruptedException
     * @throws UnavailableException
     * @throws IOException
     */
    public void triggerAudit()
```

### JavadocDeclaration
`@param conf` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * indexDirs are empty and there is no registered Bookie with this BookieId.
     *
     * @param conf
     * @return
     * @throws Exception
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *
     * @param conf
     * @return
     * @throws Exception
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param conf
     * @return
     * @throws Exception
     */
    public static boolean initBookie(ServerConfiguration conf) throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param lostBookieRecoveryDelay
     *                              lostBookieRecoveryDelay value (in seconds) to set
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *                              lostBookieRecoveryDelay value (in seconds) to set
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws CompatibilityException
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @throws KeeperException
     * @throws InterruptedException
     * @throws UnavailableException
     */
    public void setLostBookieRecoveryDelay(int lostBookieRecoveryDelay)
```

### JavadocDeclaration
`@param conf` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * ledgersrootpath is already existing then it will error out.
     *
     * @param conf
     * @return
     * @throws Exception
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *
     * @param conf
     * @return
     * @throws Exception
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param conf
     * @return
     * @throws Exception
     */
    public static boolean initNewCluster(ServerConfiguration conf) throws Exception {
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * the firstEntry.
     *
     * @param ledgerId
     * @param firstEntry
     * @param lastEntry
```

### JavadocDeclaration
`@param firstEntry` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     *
     * @param ledgerId
     * @param firstEntry
     * @param lastEntry
     * @return
```

### JavadocDeclaration
`@param lastEntry` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param ledgerId
     * @param firstEntry
     * @param lastEntry
     * @return
     * @throws InterruptedException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param firstEntry
     * @param lastEntry
     * @return
     * @throws InterruptedException
     * @throws BKException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @param lastEntry
     * @return
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
     * @return
     * @throws InterruptedException
     * @throws BKException
     */
    public Iterable<LedgerEntry> readEntries(long ledgerId, long firstEntry, long lastEntry)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
     *          ensemble to hold the bookie chosen.
     * @return the bookie node chosen.
     * @throws BKNotEnoughBookiesException
     */
    protected List<BookieNode> selectRandom(int numBookies,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BookKeeperBuilder.java`
#### Snippet
```java
     * @return the client
     *
     * @throws BKException
     * @throws InterruptedException
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BookKeeperBuilder.java`
#### Snippet
```java
     *
     * @throws BKException
     * @throws InterruptedException
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BookKeeperBuilder.java`
#### Snippet
```java
     * @throws BKException
     * @throws InterruptedException
     * @throws IOException
     */
    BookKeeper build() throws BKException, InterruptedException, IOException;
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/DeleteBuilder.java`
#### Snippet
```java
     * Set the id of the ledger to be deleted.
     *
     * @param ledgerId
     *
     * @return the builder itself
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/OpenBuilder.java`
#### Snippet
```java
     * Set the id of the ledger to be opened.
     *
     * @param ledgerId
     *
     * @return the builder itself
```

### JavadocDeclaration
`@param runnable` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
    /**
     * Execute the callback in the thread pinned to the ledger.
     * @param runnable
     * @throws RejectedExecutionException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     * Execute the callback in the thread pinned to the ledger.
     * @param runnable
     * @throws RejectedExecutionException
     */
    void executeOrdered(Runnable runnable) throws RejectedExecutionException {
```

### JavadocDeclaration
`@param cb` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     * add ops.
     *
     * @param cb
     * @param ctx
     * @param rc
```

### JavadocDeclaration
`@param ctx` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     *
     * @param cb
     * @param ctx
     * @param rc
     */
```

### JavadocDeclaration
`@param rc` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     * @param cb
     * @param ctx
     * @param rc
     */
    void doAsyncCloseInternal(final CloseCallback cb, final Object ctx, final int rc) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     * @return The entry id of the last confirmed write or {@link #INVALID_ENTRY_ID INVALID_ENTRY_ID}
     *         if no entry has been confirmed
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     *         if no entry has been confirmed
     * @throws InterruptedException
     * @throws BKException
     */
    public long readLastConfirmed()
```

### JavadocDeclaration
`@param delta` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     *  Add to the length of the ledger in bytes.
     *
     * @param delta
     * @return the length of the ledger after the addition
     */
```

### JavadocDeclaration
`@param cb` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     * @see #getLastAddConfirmed()
     *
     * @param cb
     * @param ctx
     */
```

### JavadocDeclaration
`@param ctx` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     *
     * @param cb
     * @param ctx
     */

```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     * @return The entry id of the last confirmed write or {@link #INVALID_ENTRY_ID INVALID_ENTRY_ID}
     *         if no entry has been confirmed
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
     *         if no entry has been confirmed
     * @throws InterruptedException
     * @throws BKException
     */
    public long tryReadLastConfirmed() throws InterruptedException, BKException {
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/CreateAdvBuilder.java`
#### Snippet
```java
     * assigned automatically.
     *
     * @param ledgerId
     *
     * @return the builder itself
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BookKeeper.java`
#### Snippet
```java
     * Close the client and release every resource.
     *
     * @throws BKException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/BookKeeper.java`
#### Snippet
```java
     *
     * @throws BKException
     * @throws InterruptedException
     */
    @Override
```

### JavadocDeclaration
Javadoc pointing to itself
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/LedgerEntries.java`
#### Snippet
```java
     *
     * <p>Calling this method does not modify the reference count of the ByteBuf in the returned LedgerEntry objects.
     * The caller who calls {@link #iterator()} should make sure that they do not call ByteBuf.release() on the
     * LedgerEntry objects to avoid a double free.
     * All reference counts will be decremented when the containing LedgerEntries object is closed via {@link #close()}.
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/Handle.java`
#### Snippet
```java
     * Close this handle synchronously.
     *
     * @throws org.apache.bookkeeper.client.api.BKException
     * @throws java.lang.InterruptedException
     * @see #closeAsync
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/api/Handle.java`
#### Snippet
```java
     *
     * @throws org.apache.bookkeeper.client.api.BKException
     * @throws java.lang.InterruptedException
     * @see #closeAsync
     */
```

### JavadocDeclaration
`@param bookie` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
    /**
     * Quarantine <i>bookie</i> so it will not be preferred to be chosen for new ensembles.
     * @param bookie
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/EmbeddedServer.java`
#### Snippet
```java
         *
         * @return lifecycle stack
         * @throws java.lang.Exception
         */
        public EmbeddedServer build() throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/RegistrationManager.java`
#### Snippet
```java
     * @return returns true if cluster metadata is successfully nuked
     *          or false if it failed to nuke the cluster metadata.
     * @throws Exception
     */
    boolean nukeExistingCluster() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/RegistrationManager.java`
#### Snippet
```java
     * @return returns true if a bookie with bookieid is currently registered as
     *          readwrite or readonly bookie.
     * @throws BookieException
     */
    boolean isBookieRegistered(BookieId bookieId) throws BookieException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/RegistrationManager.java`
#### Snippet
```java
     *
     * @return returns true if new cluster is successfully created or false if it failed to initialize.
     * @throws Exception
     */
    boolean initNewCluster() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreUtils.java`
#### Snippet
```java
     * @param numEntriesPerScan
     *          Num entries per scan.
     * @throws MSException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/MetastoreUtils.java`
#### Snippet
```java
     *          Num entries per scan.
     * @throws MSException
     * @throws InterruptedException
     */
    public static void cleanTable(MetastoreTable table, int numEntriesPerScan)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          password
     * @return a handle to the open ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the open ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle openLedger(long lId, DigestType digestType, byte[] passwd)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          Zookeeper client instance connected to the zookeeper with which
     *          the bookies have registered
     * @throws IOException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          the bookies have registered
     * @throws IOException
     * @throws InterruptedException
     */
    public BookKeeper(ClientConfiguration conf, ZooKeeper zk)
```

### JavadocDeclaration
`@param featureProvider` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         * Feature Provider.
         *
         * @param featureProvider
         * @return
         */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
         *
         * @param featureProvider
         * @return
         */
        public Builder featureProvider(FeatureProvider featureProvider) {
```

### JavadocDeclaration
`@param ensSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *                           AsyncCallback.CreateCallback, Object)}
     *
     * @param ensSize
     * @param qSize
     * @param digestType
```

### JavadocDeclaration
`@param qSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *
     * @param ensSize
     * @param qSize
     * @param digestType
     * @param passwd
```

### JavadocDeclaration
`@param digestType` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ensSize
     * @param qSize
     * @param digestType
     * @param passwd
     * @return a handle to the newly created ledger
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param qSize
     * @param digestType
     * @param passwd
     * @return a handle to the newly created ledger
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param passwd
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedger(int ensSize, int qSize,
```

### JavadocDeclaration
`@param ensSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * Parameters must match those of asyncCreateLedgerAdv
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
```

### JavadocDeclaration
`@param writeQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
```

### JavadocDeclaration
`@param ackQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
```

### JavadocDeclaration
`@param digestType` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @param customMetadata
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @param customMetadata
     * @return a handle to the newly created ledger
```

### JavadocDeclaration
`@param customMetadata` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param digestType
     * @param passwd
     * @param customMetadata
     * @return a handle to the newly created ledger
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param customMetadata
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedgerAdv(int ensSize, int writeQuorumSize, int ackQuorumSize,
```

### JavadocDeclaration
`@param ensSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * Parameters must match those of asyncCreateLedgerAdv
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
```

### JavadocDeclaration
`@param writeQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
```

### JavadocDeclaration
`@param ackQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
```

### JavadocDeclaration
`@param digestType` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     *
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     *
     * @return a handle to the newly created ledger
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedgerAdv(int ensSize, int writeQuorumSize, int ackQuorumSize,
```

### JavadocDeclaration
`@param ensSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *                           AsyncCallback.CreateCallback, Object)}
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
```

### JavadocDeclaration
`@param writeQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
```

### JavadocDeclaration
`@param ackQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
```

### JavadocDeclaration
`@param digestType` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @return a handle to the newly created ledger
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @return a handle to the newly created ledger
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param passwd
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedger(int ensSize, int writeQuorumSize, int ackQuorumSize,
```

### JavadocDeclaration
`@param lId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * has been closed.
     *
     * @param lId
     * @return boolean true if ledger has been closed
     * @throws BKException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param lId
     * @return boolean true if ledger has been closed
     * @throws BKException
     */
    public boolean isClosed(long lId)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return map
     *             A map of bookieSocketAddress to its BookiInfo
     * @throws BKException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *             A map of bookieSocketAddress to its BookiInfo
     * @throws BKException
     * @throws InterruptedException
     */
    public Map<BookieId, BookieInfo> getBookieInfo() throws BKException, InterruptedException {
```

### JavadocDeclaration
`@param ensSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * Synchronous call to create ledger. Parameters match those of asyncCreateLedger
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
```

### JavadocDeclaration
`@param writeQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
```

### JavadocDeclaration
`@param ackQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
```

### JavadocDeclaration
`@param digestType` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @param customMetadata
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @param customMetadata
     * @return a handle to the newly created ledger
```

### JavadocDeclaration
`@param customMetadata` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param digestType
     * @param passwd
     * @param customMetadata
     * @return a handle to the newly created ledger
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param customMetadata
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedger(int ensSize, int writeQuorumSize, int ackQuorumSize,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          password
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedger(DigestType digestType, byte[] passwd)
```

### JavadocDeclaration
`@param ledgerId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * This method returns {@link LedgerHandleAdv} which can accept entryId.
     * Parameters must match those of asyncCreateLedgerAdvWithLedgerId
     * @param ledgerId
     * @param ensSize
     * @param writeQuorumSize
```

### JavadocDeclaration
`@param ensSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * Parameters must match those of asyncCreateLedgerAdvWithLedgerId
     * @param ledgerId
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
```

### JavadocDeclaration
`@param writeQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ledgerId
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
```

### JavadocDeclaration
`@param ackQuorumSize` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ensSize
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
```

### JavadocDeclaration
`@param digestType` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param writeQuorumSize
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @param customMetadata
```

### JavadocDeclaration
`@param passwd` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param ackQuorumSize
     * @param digestType
     * @param passwd
     * @param customMetadata
     * @return a handle to the newly created ledger
```

### JavadocDeclaration
`@param customMetadata` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param digestType
     * @param passwd
     * @param customMetadata
     * @return a handle to the newly created ledger
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param customMetadata
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the newly created ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle createLedgerAdv(final long ledgerId,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param eventLoopGroup
     *          An event loop group that will be used to create connections to the bookies
     * @throws IOException
     * @throws InterruptedException
     * @throws BKException in the event of a bookkeeper connection error
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          An event loop group that will be used to create connections to the bookies
     * @throws IOException
     * @throws InterruptedException
     * @throws BKException in the event of a bookkeeper connection error
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param conf
     *          Client Configuration object
     * @throws IOException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          Client Configuration object
     * @throws IOException
     * @throws InterruptedException
     */
    public BookKeeper(final ClientConfiguration conf)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @param lId
     *            ledgerId
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *            ledgerId
     * @throws InterruptedException
     * @throws BKException
     */
    public void deleteLedger(long lId) throws InterruptedException, BKException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          password
     * @return a handle to the open ledger
     * @throws InterruptedException
     * @throws BKException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     * @return a handle to the open ledger
     * @throws InterruptedException
     * @throws BKException
     */
    public LedgerHandle openLedgerNoRecovery(long lId, DigestType digestType, byte[] passwd)
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          zookeeper under the path
     *          {@link AbstractConfiguration#getZkAvailableBookiesPath()}
     * @throws IOException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeper.java`
#### Snippet
```java
     *          {@link AbstractConfiguration#getZkAvailableBookiesPath()}
     * @throws IOException
     * @throws InterruptedException
     */
    public BookKeeper(String servers) throws IOException, InterruptedException,
```

### JavadocDeclaration
`@param len` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerOutputStream.java`
#### Snippet
```java
     * make space for len bytes to be written to the buffer.
     *
     * @param len
     * @return if true then we can make space for len if false we cannot
     */
```

### JavadocDeclaration
`@param bookieId` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationClient.java`
#### Snippet
```java
     * Read BookieServiceInfo from ZooKeeper and updates the local cache.
     *
     * @param bookieId
     * @return an handle to the result of the operation.
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
         *
         * @return value
         * @throws InterruptedException
         * @throws KeeperException
         */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
         * @return value
         * @throws InterruptedException
         * @throws KeeperException
         */
        T call() throws InterruptedException, KeeperException;
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/ZKRegistrationManager.java`
#### Snippet
```java
     *
     * @param bookieId bookie id
     * @return
     */
    public String getCookiePath(BookieId bookieId) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/BookkeeperVerifier.java`
#### Snippet
```java
     * false (see those comments).
     *
     * @throws Exception
     */
    public synchronized void run() throws Exception {
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorElector.java`
#### Snippet
```java
     * auditor. Otherwise return the status of elector.
     *
     * @return
     */
    public boolean isRunning() {
```

### JavadocDeclaration
`@param bookKeeper` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorTask.java`
#### Snippet
```java
    /**
     * Get BookKeeper admin according to bookKeeper client.
     * @param bookKeeper
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorTask.java`
#### Snippet
```java
     * Get BookKeeper admin according to bookKeeper client.
     * @param bookKeeper
     * @return
     */
    BookKeeperAdmin getBookKeeperAdmin(final BookKeeper bookKeeper) {
```

### JavadocDeclaration
`@param conf` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorTask.java`
#### Snippet
```java
    /**
     * Get BookKeeper client according to configuration.
     * @param conf
     * @return
     * @throws IOException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorTask.java`
#### Snippet
```java
     * Get BookKeeper client according to configuration.
     * @param conf
     * @return
     * @throws IOException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorTask.java`
#### Snippet
```java
     * @param conf
     * @return
     * @throws IOException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorTask.java`
#### Snippet
```java
     * @return
     * @throws IOException
     * @throws InterruptedException
     */
    BookKeeper getBookKeeper(ServerConfiguration conf) throws IOException, InterruptedException {
```

### JavadocDeclaration
`@param writer` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/StatsProvider.java`
#### Snippet
```java
    /**
     *
     * @param writer
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/StatsProvider.java`
#### Snippet
```java
     *
     * @param writer
     * @throws IOException
     */
    default void writeAllMetrics(Writer writer) throws IOException {
```

### JavadocDeclaration
`@param delta` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/Counter.java`
#### Snippet
```java
    /**
     * Add delta to the value associated with this stat.
     * @param delta
     */
    void addCount(long delta);
```

### JavadocDeclaration
`@param unit` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/Counter.java`
#### Snippet
```java
     * stats to reflect the same
     * @param eventLatency The event latency
     * @param unit
     */
    void addLatency(long eventLatency, TimeUnit unit);
```

### JavadocDeclaration
`@param unit` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/OpStatsLogger.java`
#### Snippet
```java
     * stats to reflect the same
     * @param eventLatency The event latency
     * @param unit
     */
    void registerSuccessfulEvent(long eventLatency, TimeUnit unit);
```

### JavadocDeclaration
`@param value` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/OpStatsLogger.java`
#### Snippet
```java
    /**
     * An operation with the given value succeeded.
     * @param value
     */
    void registerSuccessfulValue(long value);
```

### JavadocDeclaration
`@param unit` tag description is missing
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/OpStatsLogger.java`
#### Snippet
```java
     * Increment the failed op counter with the given eventLatency.
     * @param eventLatency The event latency
     * @param unit
     */
    void registerFailedEvent(long eventLatency, TimeUnit unit);
```

### JavadocDeclaration
`@return` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java
     * http://mark.donszelmann.org/maven-nar-plugin/aol.html (jni.extension)
     *
     * @return
     */
    public static String libType() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/utils/NativeUtils.java`
#### Snippet
```java
     *            : absolute path of the library in the jar <br/>
     *            if this jar contains: /lib/pulsar-checksum.jnilib then provide the same absolute path as input
     * @throws Exception
     */
    public static void loadLibraryFromJar(String path) throws Exception {
```

### JavadocDeclaration
`@param payload` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     * which is faster as it computes using hardware machine instruction else it computes using crc32c algo.
     *
     * @param payload
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     *
     * @param payload
     * @return
     */
    public static int computeChecksum(ByteBuf payload) {
```

### JavadocDeclaration
`@param payload` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     * which is faster as it computes using hardware machine instruction else it computes using crc32c algo.
     *
     * @param payload
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     *
     * @param payload
     * @return
     */
    public static int computeChecksum(ByteBuf payload, int offset, int len) {
```

### JavadocDeclaration
`@param payload` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     *
     * @param previousChecksum : previously computed checksum
     * @param payload
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     * @param previousChecksum : previously computed checksum
     * @param payload
     * @return
     */
    public static int resumeChecksum(int previousChecksum, ByteBuf payload) {
```

### JavadocDeclaration
`@param payload` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     *
     * @param previousChecksum : previously computed checksum
     * @param payload
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `circe-checksum/src/main/java/com/scurrilous/circe/checksum/Crc32cIntChecksum.java`
#### Snippet
```java
     * @param previousChecksum : previously computed checksum
     * @param payload
     * @return
     */
    public static int resumeChecksum(int previousChecksum, ByteBuf payload, int offset, int len) {
```

### JavadocDeclaration
Wrong tag `note`
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/concurrent/AsyncSemaphore.java`
#### Snippet
```java
     * if the future has already been satisfied.
     *
     * @note This method always return the same instance of [[Permit]].
     * @return a `Future[Permit]` when the `Future` is satisfied, computation can proceed,
     *         or a Future.Exception[RejectedExecutionException]` if the configured maximum
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ComponentConfiguration.java`
#### Snippet
```java
     * returns the string representation of json format of this config.
     *
     * @return
     * @throws ParseJsonException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ComponentConfiguration.java`
#### Snippet
```java
     *
     * @return
     * @throws ParseJsonException
     */
    public String asJson() {
```

### JavadocDeclaration
ParseJsonException is not declared to be thrown by method asJson
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ComponentConfiguration.java`
#### Snippet
```java
     *
     * @return
     * @throws ParseJsonException
     */
    public String asJson() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/ReflectionUtils.java`
#### Snippet
```java
     *          Class Loader to load class.
     * @return property value as a <code>Class</code>, or <code>defaultCls</code>.
     * @throws ConfigurationException
     */
    public static Class<?> getClass(Configuration conf, String name,
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/ReflectionUtils.java`
#### Snippet
```java
     *          Class Loader to load class.
     * @return property value as a <code>Class</code>, or <code>defaultValue</code>.
     * @throws ConfigurationException
     */
    public static <T> Class<? extends T> getClass(Configuration conf,
```

### JavadocDeclaration
`@param runnable` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SafeRunnable.java`
#### Snippet
```java
     * </pre>
     *
     * @param runnable
     * @param exceptionHandler
     *            handler that will be called when there are any exception
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/SafeRunnable.java`
#### Snippet
```java
     * @param exceptionHandler
     *            handler that will be called when there are any exception
     * @return
     */
    static SafeRunnable safeRun(Runnable runnable, Consumer<Throwable> exceptionHandler) {
```

### JavadocDeclaration
`@param orderingKey` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     * schedules a one time action to execute with an ordering guarantee on the key.
     *
     * @param orderingKey
     * @param callable
     */
```

### JavadocDeclaration
`@param callable` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     *
     * @param orderingKey
     * @param callable
     */
    public <T> ListenableFuture<T> submitOrdered(Object orderingKey,
```

### JavadocDeclaration
`@param orderingKey` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
    /**
     * Schedules a one time action to execute with an ordering guarantee on the key.
     * @param orderingKey
     * @param r
     */
```

### JavadocDeclaration
`@param r` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     * Schedules a one time action to execute with an ordering guarantee on the key.
     * @param orderingKey
     * @param r
     */
    public void executeOrdered(Object orderingKey, Runnable r) {
```

### JavadocDeclaration
`@param orderingKey` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
    /**
     * Schedules a one time action to execute with an ordering guarantee on the key.
     * @param orderingKey
     * @param r
     */
```

### JavadocDeclaration
`@param r` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     * Schedules a one time action to execute with an ordering guarantee on the key.
     * @param orderingKey
     * @param r
     */
    public void executeOrdered(long orderingKey, Runnable r) {
```

### JavadocDeclaration
`@param orderingKey` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
    /**
     * Schedules a one time action to execute with an ordering guarantee on the key.
     * @param orderingKey
     * @param r
     */
```

### JavadocDeclaration
`@param r` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedExecutor.java`
#### Snippet
```java
     * Schedules a one time action to execute with an ordering guarantee on the key.
     * @param orderingKey
     * @param r
     */
    public void executeOrdered(int orderingKey, Runnable r) {
```

### JavadocDeclaration
`@param array` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     *
     *
     * @param array
     * @param timeout
     * @param unit
```

### JavadocDeclaration
`@param timeout` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     *
     * @param array
     * @param timeout
     * @param unit
     * @return
```

### JavadocDeclaration
`@param unit` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     * @param array
     * @param timeout
     * @param unit
     * @return
     * @throws InterruptedException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     * @param timeout
     * @param unit
     * @return
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     * @param unit
     * @return
     * @throws InterruptedException
     */
    int pollAll(T[] array, long timeout, TimeUnit unit) throws InterruptedException;
```

### JavadocDeclaration
`@param array` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     * Wait if there are no items in the queue.
     *
     * @param array
     * @return
     * @throws InterruptedException
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     *
     * @param array
     * @return
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/collections/BatchedBlockingQueue.java`
#### Snippet
```java
     * @param array
     * @return
     * @throws InterruptedException
     */
    int takeAll(T[] array) throws InterruptedException;
```

### JavadocDeclaration
`@param ` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/concurrent/FutureUtils.java`
#### Snippet
```java
     * @param scheduler   scheduler to execute the action.
     * @param scheduleKey key to choose the thread to execute the action
     * @param <T>
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/concurrent/FutureUtils.java`
#### Snippet
```java
     * @param scheduleKey key to choose the thread to execute the action
     * @param <T>
     * @return
     */
    public static <T> CompletableFuture<T> whenCompleteAsync(
```

### JavadocDeclaration
`@param ` tag description is missing
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/concurrent/FutureUtils.java`
#### Snippet
```java
      * @param opStatsLogger stats logger to record operations stats
      * @param stopwatch stop watch to time operation
      * @param <T>
      * @return result after registered the event listener
      */
```

### JavadocDeclaration
`@param args` tag description is missing
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/codahale/TimerBenchmark.java`
#### Snippet
```java
     *     org.apache.bookkeeper.stats.codahale.TimerBenchmark &lt;codahale|fast&gt;
     * </code>
     * @param args
     */
    public static void main(String[] args) {
```

### JavadocDeclaration
`@param state` tag description is missing
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/codahale/TimerBenchmark.java`
#### Snippet
```java
     * per second). Here we're testing the creation of snapshots at
     * a rate much higher than we would expect in real life.
     * @param state
     */
    @Benchmark
```

### JavadocDeclaration
`@param state` tag description is missing
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/codahale/TimerBenchmark.java`
#### Snippet
```java
     * for longer running tests (since housekeeping is infrequent and cheap), so
     * we keep the test duration low to not have tests run for too long.
     * @param state
     */
    @Benchmark
```

### JavadocDeclaration
`@throws` tag description is missing
in `native-io/src/main/java/org/apache/bookkeeper/common/util/nativeio/NativeUtils.java`
#### Snippet
```java
     *            : absolute path of the library in the jar <br/>
     *            if this jar contains: /lib/pulsar-checksum.jnilib then provide the same absolute path as input
     * @throws Exception
     */
    @SuppressFBWarnings(
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/Entry.java`
#### Snippet
```java
         *          DLSN to skip to.
         * @return true if skip succeeds, otherwise false.
         * @throws IOException
         */
        boolean skipTo(DLSN dlsn) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/Entry.java`
#### Snippet
```java
         *          transaction id to skip to.
         * @return true if skip succeeds, otherwise false.
         * @throws IOException
         */
        boolean skipTo(long txId) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/EnvelopedEntry.java`
#### Snippet
```java
     * @return
     *      New Input stream with the underlying payload.
     * @throws Exception
     */
    public static ByteBuf fromEnvelopedBuf(ByteBuf src, StatsLogger statsLogger)
```

### JavadocDeclaration
Exception is not declared to be thrown by method fromEnvelopedBuf
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/EnvelopedEntry.java`
#### Snippet
```java
     * @return
     *      New Input stream with the underlying payload.
     * @throws Exception
     */
    public static ByteBuf fromEnvelopedBuf(ByteBuf src, StatsLogger statsLogger)
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadUtils.java`
#### Snippet
```java
     * @param context
     *          scan context
     * @return log record with dlsn inside the ledger entry
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadUtils.java`
#### Snippet
```java
     *          scan context
     * @return log record with dlsn inside the ledger entry
     * @throws IOException
     */
    private static void visitEntryRecords(
```

### JavadocDeclaration
`@param comparator` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogHandler.java`
#### Snippet
```java
    /**
     * Read the log segments from the store and register a listener.
     * @param comparator
     * @param segmentFilter
     * @param logSegmentNamesListener
```

### JavadocDeclaration
`@param segmentFilter` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogHandler.java`
#### Snippet
```java
     * Read the log segments from the store and register a listener.
     * @param comparator
     * @param segmentFilter
     * @param logSegmentNamesListener
     * @return future represents the result of log segments
```

### JavadocDeclaration
`@param logSegmentNamesListener` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogHandler.java`
#### Snippet
```java
     * @param comparator
     * @param segmentFilter
     * @param logSegmentNamesListener
     * @return future represents the result of log segments
     */
```

### JavadocDeclaration
`@param inprogressZnodeName` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * Close log segment.
     *
     * @param inprogressZnodeName
     * @param logSegmentSeqNo
     * @param logSegmentId
```

### JavadocDeclaration
`@param logSegmentSeqNo` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     *
     * @param inprogressZnodeName
     * @param logSegmentSeqNo
     * @param logSegmentId
     * @param firstTxId
```

### JavadocDeclaration
`@param logSegmentId` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param inprogressZnodeName
     * @param logSegmentSeqNo
     * @param logSegmentId
     * @param firstTxId
     * @param lastTxId
```

### JavadocDeclaration
`@param firstTxId` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param logSegmentSeqNo
     * @param logSegmentId
     * @param firstTxId
     * @param lastTxId
     * @param recordCount
```

### JavadocDeclaration
`@param lastTxId` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param logSegmentId
     * @param firstTxId
     * @param lastTxId
     * @param recordCount
     * @param lastEntryId
```

### JavadocDeclaration
`@param recordCount` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param firstTxId
     * @param lastTxId
     * @param recordCount
     * @param lastEntryId
     * @param lastSlotId
```

### JavadocDeclaration
`@param lastEntryId` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param lastTxId
     * @param recordCount
     * @param lastEntryId
     * @param lastSlotId
     * @throws IOException
```

### JavadocDeclaration
`@param lastSlotId` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param recordCount
     * @param lastEntryId
     * @param lastSlotId
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param lastEntryId
     * @param lastSlotId
     * @throws IOException
     */
    protected LogSegmentMetadata doCompleteAndCloseLogSegment(
```

### JavadocDeclaration
`@param bestEffort` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     *
     * @param txId First transaction id to be written to the stream
     * @param bestEffort
     * @param allowMaxTxID
     *          allow using max tx id to start log segment
```

### JavadocDeclaration
`@return` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param allowMaxTxID
     *          allow using max tx id to start log segment
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     *          allow using max tx id to start log segment
     * @return
     * @throws IOException
     */
    public BKLogSegmentWriter startLogSegment(long txId, boolean bestEffort, boolean allowMaxTxID)
```

### JavadocDeclaration
`@return` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     *
     * @param txId First transaction id to be written to the stream
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
     * @param txId First transaction id to be written to the stream
     * @return
     * @throws IOException
     */
    public BKLogSegmentWriter startLogSegment(long txId) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/bk/LedgerAllocatorUtils.java`
#### Snippet
```java
     *          bookkeeper client
     * @return ledger allocator
     * @throws IOException
     */
    public static LedgerAllocator createLedgerAllocatorPool(
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
     * @return distributedlog manager instance.
     * @throws InvalidStreamNameException if the stream name is invalid
     * @throws IOException
     */
    protected DistributedLogManager openLogInternal(
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogNamespace.java`
#### Snippet
```java
     * Check the namespace state.
     *
     * @throws IOException
     */
    private void checkState() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/LogWriter.java`
#### Snippet
```java
     *
     * @param records list of log records
     * @throws IOException
     */
    @Deprecated
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/LogWriter.java`
#### Snippet
```java
     *
     * @param record single log record
     * @throws IOException
     */
    void write(LogRecord record) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/LogWriter.java`
#### Snippet
```java
     * Flush and sync all data that is ready to be flush
     * {@link #flush()} into underlying persistent store.
     * @throws IOException
     */
    long commit() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/LogWriter.java`
#### Snippet
```java
     * stream will be allowed after this point
     *
     * @throws IOException
     */
    void markEndOfStream() throws IOException;
```

### JavadocDeclaration
Tag `return` is not allowed here
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
     * Transmit the output buffer data to the backend.
     *
     * @return last txn id that already acknowledged
     * @throws BKTransmitException if the segment writer is already in error state
     * @throws LockingException if the segment writer lost lock before transmit
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
     * side-effect of disallowing future startLogSegment calls through the MaxTxID check
     *
     * @throws IOException
     */
    private synchronized void writeEndOfStreamMarker() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return latest transaction id
     * @throws IOException
     */
    long getLastTxId() throws IOException;
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * @return the stream starting with transaction fromTxnId
     * @throws IOException if a stream cannot be found.
     * @Deprecated since 0.5.0, in favor of using {@link #openLogReader(long)}
     */
    LogReader getInputStream(long fromTxnId)
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return true if the marker was added to the stream, false otherwise
     * @throws IOException
     */
    boolean isEndOfStreamMarked() throws IOException;
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @throws IOException if the deletion fails
     * @Deprecated since 0.5.0, in favor of using
     *             {@link org.apache.distributedlog.api.namespace.Namespace#deleteLog(String)}
     */
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return the writer interface to generate log records
     * @Deprecated since 0.5.0, in favor of using {@link #openAsyncLogWriter()}
     */
    AsyncLogWriter startAsyncLogSegmentNonPartitioned() throws IOException;
```

### JavadocDeclaration
`@param ledgerMetadata` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * Provided metadata will be attached to the underlying BookKeeper ledgers.
     *
     * @param ledgerMetadata
     * @return sync log writer
     * @throws IOException when fails to open a sync log writer.
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return future number of log records
     * @throws IOException
     */
    CompletableFuture<Long> getLogRecordCountAsync(DLSN beginDLSN);
```

### JavadocDeclaration
IOException is not declared to be thrown by method getLogRecordCountAsync
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return future number of log records
     * @throws IOException
     */
    CompletableFuture<Long> getLogRecordCountAsync(DLSN beginDLSN);
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return last dlsn
     * @throws IOException
     */
    DLSN getLastDLSN() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return log segments
     * @throws IOException
     */
    List<LogSegmentMetadata> getLogSegments() throws IOException;
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * @return the stream starting with DLSN
     * @throws IOException if a stream cannot be found.
     * @Deprecated since 0.5.0, in favor of using {@link #openLogReader(DLSN)}
     */
    LogReader getInputStream(DLSN fromDLSN) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return number of log records
     * @throws IOException
     */
    long getLogRecordCount() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return earliest transaction id
     * @throws IOException
     */
    long getFirstTxId() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * Run recovery on the log.
     *
     * @throws IOException
     */
    void recover() throws IOException;
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * @throws IOException when fails to open an async log reader.
     * @see #openAsyncLogReader(DLSN)
     * @Deprecated it is deprecated since 0.5.0, in favor of using {@link #openAsyncLogReader(DLSN)}
     */
    AsyncLogReader getAsyncLogReader(DLSN fromDLSN) throws IOException;
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     *
     * @return the writer interface to generate log records
     * @Deprecated since 0.5.0, in favor of using {@link #openLogWriter()}
     */
    LogWriter startLogSegmentNonPartitioned() throws IOException;
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * @throws IOException when fails to open an async log reader.
     * @see #openAsyncLogReader(long)
     * @Deprecated it is deprecated since 0.5.0, in favor of using {@link #openAsyncLogReader(long)}
     */
    AsyncLogReader getAsyncLogReader(long fromTxnId) throws IOException;
```

### JavadocDeclaration
`@param ledgerMetadata` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/DistributedLogManager.java`
#### Snippet
```java
     * Provided metadata will be attached to the underlying BookKeeper ledgers.
     *
     * @param ledgerMetadata
     * @return result represents the open result
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
     *
     * @return access control manager for logs under the namespace.
     * @throws IOException
     */
    AccessControlManager createAccessControlManager()
```

### JavadocDeclaration
InvalidStreamNameException is not declared to be thrown by method renameLog
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
     * @param newName new log name
     * @return a future represents the rename result.
     * @throws InvalidStreamNameException if log name is invalid
     * @throws LogNotFoundException if old log doesn't exist
     * @throws org.apache.distributedlog.exceptions.LogExistsException if the new log exists
```

### JavadocDeclaration
LogNotFoundException is not declared to be thrown by method renameLog
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
     * @return a future represents the rename result.
     * @throws InvalidStreamNameException if log name is invalid
     * @throws LogNotFoundException if old log doesn't exist
     * @throws org.apache.distributedlog.exceptions.LogExistsException if the new log exists
     * @throws IOException when encountered issues with backend.
```

### JavadocDeclaration
LogExistsException is not declared to be thrown by method renameLog
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
     * @throws InvalidStreamNameException if log name is invalid
     * @throws LogNotFoundException if old log doesn't exist
     * @throws org.apache.distributedlog.exceptions.LogExistsException if the new log exists
     * @throws IOException when encountered issues with backend.
     */
```

### JavadocDeclaration
IOException is not declared to be thrown by method renameLog
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/api/namespace/Namespace.java`
#### Snippet
```java
     * @throws LogNotFoundException if old log doesn't exist
     * @throws org.apache.distributedlog.exceptions.LogExistsException if the new log exists
     * @throws IOException when encountered issues with backend.
     */
    CompletableFuture<Void> renameLog(String oldName, String newName);
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     *
     * @return feature provider class.
     * @throws ConfigurationException
     */
    public Class<? extends FeatureProvider> getFeatureProviderClass()
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     *
     * @return dns resolver class for bookkeeper ensemble placement.
     * @throws ConfigurationException
     * @see #getRowAwareEnsemblePlacementEnabled()
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKMetadataAccessor.java`
#### Snippet
```java
     * name and URI.
     * @param metadata opaque metadata to be stored for the node
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKMetadataAccessor.java`
#### Snippet
```java
     * Delete the metadata stored at the associated node. This only deletes the metadata
     * and not the node itself
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKMetadataAccessor.java`
#### Snippet
```java
     * Retrieve the metadata stored at the node.
     * @return byte array containing the metadata.
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
     * @param statsLogger stats logger to receive stats
     * @param perLogStatsLogger stats logger to receive per log stats
     * @throws IOException
     */
    BKDistributedLogManager(String name,
```

### JavadocDeclaration
IOException is not declared to be thrown by method BKDistributedLogManager
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
     * @param statsLogger stats logger to receive stats
     * @param perLogStatsLogger stats logger to receive per log stats
     * @throws IOException
     */
    BKDistributedLogManager(String name,
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
     *
     * @return future number of log records
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
IOException is not declared to be thrown by method getLogRecordCountAsync
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
     *
     * @return future number of log records
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
     *
     * @return number of log records
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKDistributedLogManager.java`
#### Snippet
```java
     *          transaction id to start reading from
     * @return log reader
     * @throws IOException
     */
    LogReader getInputStreamInternal(long fromTxnId)
```

### JavadocDeclaration
Javadoc pointing to itself
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Transaction.java`
#### Snippet
```java
     * Abort current transaction. If this is called and the transaction haven't been executed by
     * {@link #execute()}, it would abort all operations. If the transaction has been executed,
     * the behavior is left up to implementation - if transaction is cancellable, the {@link #abort(Throwable)}
     * could attempt to cancel it.
     *
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/DLUtils.java`
#### Snippet
```java
     * @param logName
     *          name of log
     * @throws InvalidStreamNameException
     */
    public static String validateAndNormalizeName(String logName)
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
     * @param zkc
     *          zookeeper client
     * @throws InterruptedException
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
```

### JavadocDeclaration
InterruptedException is not declared to be thrown by method createFederatedNamespace
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
     * @param zkc
     *          zookeeper client
     * @throws InterruptedException
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
     *          zookeeper client
     * @throws InterruptedException
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
     * @throws InterruptedException
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     */
    public static void createFederatedNamespace(URI namespace, ZooKeeperClient zkc)
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/Tool.java`
#### Snippet
```java
         *          command line to run.
         * @return return code of this command.
         * @throws Exception
         */
        protected abstract int runCmd(CommandLine commandLine) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     *          path to sync
     * @return zookeeper client after sync
     * @throws IOException
     */
    public static ZooKeeper sync(ZooKeeperClient zkc, String path) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     * @param acl Acl of the zk path
     * @param createMode Create mode of zk path
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     * @throws InterruptedException
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     * @param createMode Create mode of zk path
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     * @throws InterruptedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     * @throws InterruptedException
     */
    public static void zkCreateFullPathOptimistic(
```

### JavadocDeclaration
InterruptedException is not declared to be thrown by method zkCreateFullPathOptimistic
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
     * @throws ZooKeeperClient.ZooKeeperConnectionException
     * @throws KeeperException
     * @throws InterruptedException
     */
    public static void zkCreateFullPathOptimistic(
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/MetadataResolver.java`
#### Snippet
```java
     *          dl uri
     * @return dl metadata.
     * @throws IOException
     */
    DLMetadata resolve(URI uri) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/admin/DistributedLogAdmin.java`
#### Snippet
```java
     * @param interactive
     *          is confirmation needed before executing actual action.
     * @throws IOException
     */
    public static void fixInprogressSegmentWithLowerSequenceNumber(final Namespace namespace,
```

### JavadocDeclaration
IOException is not declared to be thrown by method getLogSegmentEntryStore
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/namespace/NamespaceDriver.java`
#### Snippet
```java
     * @param role the role to retrieve the log segment entry store.
     * @return the log segment entry store.
     * @throws IOException when failed to open log segment entry store.
     */
    LogSegmentEntryStore getLogSegmentEntryStore(Role role);
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/namespace/NamespaceDriver.java`
#### Snippet
```java
     *
     * @return access control manager for logs under the namespace.
     * @throws IOException
     */
    AccessControlManager getAccessControlManager()
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/auditor/DLAuditor.java`
#### Snippet
```java
     *
     * @param uri dl uri
     * @throws IOException
     */
    public Map<String, Long> calculateStreamSpaceUsage(final URI uri) throws IOException {
```

### JavadocDeclaration
LogRecordTooLongException is not declared to be thrown by method asyncWrite
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/logsegment/LogSegmentWriter.java`
#### Snippet
```java
     * @return a future representing write result. A {@link DLSN} is returned if write succeeds,
     *         otherwise, exceptions are returned.
     * @throws org.apache.distributedlog.exceptions.LogRecordTooLongException if log record is too long
     * @throws org.apache.distributedlog.exceptions.InvalidEnvelopedEntryException on invalid enveloped entry
     * @throws LockingException if failed to acquire lock for the writer
```

### JavadocDeclaration
InvalidEnvelopedEntryException is not declared to be thrown by method asyncWrite
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/logsegment/LogSegmentWriter.java`
#### Snippet
```java
     *         otherwise, exceptions are returned.
     * @throws org.apache.distributedlog.exceptions.LogRecordTooLongException if log record is too long
     * @throws org.apache.distributedlog.exceptions.InvalidEnvelopedEntryException on invalid enveloped entry
     * @throws LockingException if failed to acquire lock for the writer
     * @throws BKTransmitException if failed to transmit data to bk
```

### JavadocDeclaration
LockingException is not declared to be thrown by method asyncWrite
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/logsegment/LogSegmentWriter.java`
#### Snippet
```java
     * @throws org.apache.distributedlog.exceptions.LogRecordTooLongException if log record is too long
     * @throws org.apache.distributedlog.exceptions.InvalidEnvelopedEntryException on invalid enveloped entry
     * @throws LockingException if failed to acquire lock for the writer
     * @throws BKTransmitException if failed to transmit data to bk
     * @throws org.apache.distributedlog.exceptions.WriteException if failed to write to bk
```

### JavadocDeclaration
BKTransmitException is not declared to be thrown by method asyncWrite
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/logsegment/LogSegmentWriter.java`
#### Snippet
```java
     * @throws org.apache.distributedlog.exceptions.InvalidEnvelopedEntryException on invalid enveloped entry
     * @throws LockingException if failed to acquire lock for the writer
     * @throws BKTransmitException if failed to transmit data to bk
     * @throws org.apache.distributedlog.exceptions.WriteException if failed to write to bk
     */
```

### JavadocDeclaration
WriteException is not declared to be thrown by method asyncWrite
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/logsegment/LogSegmentWriter.java`
#### Snippet
```java
     * @throws LockingException if failed to acquire lock for the writer
     * @throws BKTransmitException if failed to transmit data to bk
     * @throws org.apache.distributedlog.exceptions.WriteException if failed to write to bk
     */
    CompletableFuture<DLSN> asyncWrite(LogRecord record);
```

### JavadocDeclaration
Wrong tag `throw`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/logsegment/LogSegmentEntryReader.java`
#### Snippet
```java
     * @param numEntries num entries to read from current log segment
     * @return A promise that when satisified will contain a non-empty list of entries with their content.
     * @throw {@link org.apache.distributedlog.exceptions.EndOfLogSegmentException} when
     *          read entries beyond the end of a <i>closed</i> log segment.
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `cpu-affinity/src/main/java/org/apache/bookkeeper/common/util/affinity/impl/NativeUtils.java`
#### Snippet
```java
     *            : absolute path of the library in the jar <br/>
     *            if this jar contains: /lib/pulsar-checksum.jnilib then provide the same absolute path as input
     * @throws Exception
     */
    @SuppressFBWarnings(
```

### JavadocDeclaration
Duplicate @return tag
in `cpu-affinity/src/main/java/org/apache/bookkeeper/common/util/affinity/impl/CpuAffinityImpl.java`
#### Snippet
```java
     *
     * @return null if the lock was not available
     * @return a {@link Closeable} lock object if the lock was acquired
     */
    private static Closeable tryAcquireFileLock(int cpu) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `stream/storage/api/src/main/java/org/apache/bookkeeper/stream/storage/api/sc/StorageContainerService.java`
#### Snippet
```java
     * <p>The framework registers the grpc services in the container runtime. So the framework will know how to route
     * the grpc requests to the actual grpc services.
     * @return
     */
    Collection<ServerServiceDefinition> getRegisteredServices();
```

### JavadocDeclaration
`@throws` tag description is missing
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
         *          metadata of the log segment to
         * @return true if it is a good stream, false if the stream has inconsistent metadata.
         * @throws Exception
         */
        protected boolean inspectLogSegment(BookKeeperClient bkc,
```

## RuleId[id=FieldMayBeFinal]
### FieldMayBeFinal
Field `flattenedTls` may be 'final'
in `bookkeeper-slogger/api/src/main/java/org/apache/bookkeeper/slogger/AbstractSlogger.java`
#### Snippet
```java
            }
        };
    private ThreadLocal<List<Object>> flattenedTls = ThreadLocal.withInitial(ArrayList::new);

    protected AbstractSlogger(Iterable<Object> parentCtx) {
```

### FieldMayBeFinal
Field `parentCtx` may be 'final'
in `bookkeeper-slogger/api/src/main/java/org/apache/bookkeeper/slogger/AbstractSlogger.java`
#### Snippet
```java

    private static final int MAX_DEPTH = 3;
    private List<String> parentCtx;

    private ThreadLocal<List<Object>> kvs = new ThreadLocal<List<Object>>() {
```

### FieldMayBeFinal
Field `kvs` may be 'final'
in `bookkeeper-slogger/api/src/main/java/org/apache/bookkeeper/slogger/AbstractSlogger.java`
#### Snippet
```java
    private List<String> parentCtx;

    private ThreadLocal<List<Object>> kvs = new ThreadLocal<List<Object>>() {
            @Override
            protected List<Object> initialValue() {
```

### FieldMayBeFinal
Field `isSuccess` may be 'final'
in `stream/api/src/main/java/org/apache/bookkeeper/api/kv/impl/result/TxnResultImpl.java`
#### Snippet
```java
public class TxnResultImpl<K, V> extends ResultImpl<K, V, TxnResultImpl<K, V>> implements TxnResult<K, V> {

    private boolean isSuccess = false;
    private List<Result<K, V>> results = Collections.emptyList();

```

### FieldMayBeFinal
Field `lmFactory` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    private MetadataBookieDriver metadataDriver;
    private RegistrationManager rm;
    private LedgerManagerFactory lmFactory;
    private LedgerManager ledgerManager;
    private Supplier<BookieServiceInfo> bookieServiceInfoProvider;
```

### FieldMayBeFinal
Field `metadataDriver` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    private final ServerConfiguration serverConf;
    private BookieServer bs;
    private MetadataBookieDriver metadataDriver;
    private RegistrationManager rm;
    private LedgerManagerFactory lmFactory;
```

### FieldMayBeFinal
Field `bookieServiceInfoProvider` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    private LedgerManagerFactory lmFactory;
    private LedgerManager ledgerManager;
    private Supplier<BookieServiceInfo> bookieServiceInfoProvider;

    public BookieService(BookieConfiguration conf, StatsLogger statsLogger,
```

### FieldMayBeFinal
Field `ledgerManager` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    private RegistrationManager rm;
    private LedgerManagerFactory lmFactory;
    private LedgerManager ledgerManager;
    private Supplier<BookieServiceInfo> bookieServiceInfoProvider;

```

### FieldMayBeFinal
Field `rm` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    private BookieServer bs;
    private MetadataBookieDriver metadataDriver;
    private RegistrationManager rm;
    private LedgerManagerFactory lmFactory;
    private LedgerManager ledgerManager;
```

### FieldMayBeFinal
Field `bs` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/service/BookieService.java`
#### Snippet
```java
    @Getter
    private final ServerConfiguration serverConf;
    private BookieServer bs;
    private MetadataBookieDriver metadataDriver;
    private RegistrationManager rm;
```

### FieldMayBeFinal
Field `connMgr` may be 'final'
in `metadata-drivers/etcd/src/main/java/io/etcd/jetcd/EtcdConnectionManager.java`
#### Snippet
```java

    private final ClientImpl client;
    private ClientConnectionManager connMgr;

    public EtcdConnectionManager(Client client) {
```

### FieldMayBeFinal
Field `useHostname` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/StorageServer.java`
#### Snippet
```java

        @Parameter(names = {"-u", "--useHostname"}, description = "Use hostname instead of IP for server ID")
        private boolean useHostname = false;

        @Parameter(names = {"-h", "--help"}, description = "Show this help message")
```

### FieldMayBeFinal
Field `help` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/StorageServer.java`
#### Snippet
```java

        @Parameter(names = {"-h", "--help"}, description = "Show this help message")
        private boolean help = false;

    }
```

### FieldMayBeFinal
Field `port` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/server/StorageServer.java`
#### Snippet
```java

        @Parameter(names = {"-p", "--port"}, description = "Port to listen on for gPRC server")
        private int port = 4181;

        @Parameter(names = {"-u", "--useHostname"}, description = "Use hostname instead of IP for server ID")
```

### FieldMayBeFinal
Field `servers` may be 'final'
in `stream/server/src/main/java/org/apache/bookkeeper/stream/cluster/StreamCluster.java`
#### Snippet
```java
    private int zkPort;
    private ZooKeeperServerShim zks;
    private List<LifecycleComponent> servers;
    private int nextBookiePort;
    private int nextGrpcPort;
```

### FieldMayBeFinal
Field `readonlyListeners` may be 'final'
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdRegistrationClient.java`
#### Snippet
```java
    private Map<RegistrationListener, Consumer<Versioned<Set<BookieId>>>> writableListeners =
        Maps.newHashMap();
    private Map<RegistrationListener, Consumer<Versioned<Set<BookieId>>>> readonlyListeners =
        Maps.newHashMap();

```

### FieldMayBeFinal
Field `writableListeners` may be 'final'
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdRegistrationClient.java`
#### Snippet
```java
    private final KeySetReader<BookieId> writableBookiesReader;
    private final KeySetReader<BookieId> readonlyBookiesReader;
    private Map<RegistrationListener, Consumer<Versioned<Set<BookieId>>>> writableListeners =
        Maps.newHashMap();
    private Map<RegistrationListener, Consumer<Versioned<Set<BookieId>>>> readonlyListeners =
```

### FieldMayBeFinal
Field `cache` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/CachedDNSToSwitchMapping.java`
#### Snippet
```java
 */
public class CachedDNSToSwitchMapping extends AbstractDNSToSwitchMapping {
  private Map<String, String> cache = new ConcurrentHashMap<String, String>();

  /**
```

### FieldMayBeFinal
Field `completeCallback` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/BookieAuthZFactory.java`
#### Snippet
```java
        return new BookieAuthProvider() {

            AuthCallbacks.GenericCallback<Void> completeCallback = completeCb;

            @Override
```

### FieldMayBeFinal
Field `ledgerIdGenPath` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(LongZkLedgerIdGenerator.class);
    private ZooKeeper zk;
    private String ledgerIdGenPath;
    private ZkLedgerIdGenerator shortIdGen;
    private List<String> highOrderDirectories;
```

### FieldMayBeFinal
Field `shortIdGen` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
    private ZooKeeper zk;
    private String ledgerIdGenPath;
    private ZkLedgerIdGenerator shortIdGen;
    private List<String> highOrderDirectories;
    private HighOrderLedgerIdGenPathStatus ledgerIdGenPathStatus;
```

### FieldMayBeFinal
Field `zk` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LongZkLedgerIdGenerator.java`
#### Snippet
```java
public class LongZkLedgerIdGenerator implements LedgerIdGenerator {
    private static final Logger LOG = LoggerFactory.getLogger(LongZkLedgerIdGenerator.class);
    private ZooKeeper zk;
    private String ledgerIdGenPath;
    private ZkLedgerIdGenerator shortIdGen;
```

### FieldMayBeFinal
Field `str` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tls/TLSContextFactory.java`
#### Snippet
```java
        PEM("PEM");

        private String str;

        KeyStoreType(String str) {
```

### FieldMayBeFinal
Field `curSequenceSize` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
    private MutableObject<SequenceGroup> curSequenceGroup = new MutableObject<SequenceGroup>(null);
    private MutableLong curSequenceStartEntryId = new MutableLong(INVALID_ENTRYID);
    private MutableInt curSequenceSize = new MutableInt(0);
    private boolean availabilityOfEntriesOfLedgerClosed = false;
    private long totalNumOfAvailableEntries = 0;
```

### FieldMayBeFinal
Field `curSequenceStartEntryId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
    private final TreeMap<Long, SequenceGroup> sortedSequenceGroups = new TreeMap<Long, SequenceGroup>();
    private MutableObject<SequenceGroup> curSequenceGroup = new MutableObject<SequenceGroup>(null);
    private MutableLong curSequenceStartEntryId = new MutableLong(INVALID_ENTRYID);
    private MutableInt curSequenceSize = new MutableInt(0);
    private boolean availabilityOfEntriesOfLedgerClosed = false;
```

### FieldMayBeFinal
Field `curSequenceGroup` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/AvailabilityOfEntriesOfLedger.java`
#### Snippet
```java
    public static final int CURRENT_HEADER_VERSION = V0;
    private final TreeMap<Long, SequenceGroup> sortedSequenceGroups = new TreeMap<Long, SequenceGroup>();
    private MutableObject<SequenceGroup> curSequenceGroup = new MutableObject<SequenceGroup>(null);
    private MutableLong curSequenceStartEntryId = new MutableLong(INVALID_ENTRYID);
    private MutableInt curSequenceSize = new MutableInt(0);
```

### FieldMayBeFinal
Field `defaultThreadFactory` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DaemonThreadFactory.java`
#### Snippet
```java
 */
public class DaemonThreadFactory implements ThreadFactory {
    private ThreadFactory defaultThreadFactory = Executors.defaultThreadFactory();
    private int priority = Thread.NORM_PRIORITY;
    public DaemonThreadFactory() {
```

### FieldMayBeFinal
Field `command` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Shell.java`
#### Snippet
```java
    public static class ShellCommandExecutor extends Shell {

        private String[] command;
        private StringBuffer output;

```

### FieldMayBeFinal
Field `shell` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Shell.java`
#### Snippet
```java
    private static class ShellTimeoutTimerTask extends TimerTask {

        private Shell shell;

        public ShellTimeoutTimerTask(Shell shell) {
```

### FieldMayBeFinal
Field `interval` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/Shell.java`
#### Snippet
```java
            System.getProperty("os.name").startsWith("Windows");

    private long interval; // refresh interval in msec
    private long lastTime; // last time the command was performed
    private Map<String, String> environment; // env for the command execution
```

### FieldMayBeFinal
Field `hardLinkMultSuffix` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
    private static String[] hardLinkCommand = {"ln", null, null};
    private static String[] hardLinkMultPrefix = {"ln"};
    private static String[] hardLinkMultSuffix = {null};
    private static String[] getLinkCountCommand = {"stat", "-c%h", null};
    //Unix guarantees at least 32K bytes cmd length.
```

### FieldMayBeFinal
Field `hardLinkCommand` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
   */
  static class HardLinkCGUnix extends HardLinkCommandGetter {
    private static String[] hardLinkCommand = {"ln", null, null};
    private static String[] hardLinkMultPrefix = {"ln"};
    private static String[] hardLinkMultSuffix = {null};
```

### FieldMayBeFinal
Field `getHardLinkCommand` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java

  public static final OSType OS_TYPE;
  private static HardLinkCommandGetter getHardLinkCommand;

  public final LinkStats linkStats; //not static
```

### FieldMayBeFinal
Field `hardLinkMultPrefix` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/HardLink.java`
#### Snippet
```java
  static class HardLinkCGUnix extends HardLinkCommandGetter {
    private static String[] hardLinkCommand = {"ln", null, null};
    private static String[] hardLinkMultPrefix = {"ln"};
    private static String[] hardLinkMultSuffix = {null};
    private static String[] getLinkCountCommand = {"stat", "-c%h", null};
```

### FieldMayBeFinal
Field `defaultLocalBookiesConfigDir` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
    private static int zooKeeperDefaultPort = 2181;
    private static int zkSessionTimeOut = 5000;
    private static String defaultLocalBookiesConfigDir = "/tmp/localbookies-config";

    //BookKeeper variables
```

### FieldMayBeFinal
Field `zooKeeperDefaultPort` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java

    private static String zooKeeperDefaultHost = "127.0.0.1";
    private static int zooKeeperDefaultPort = 2181;
    private static int zkSessionTimeOut = 5000;
    private static String defaultLocalBookiesConfigDir = "/tmp/localbookies-config";
```

### FieldMayBeFinal
Field `zooKeeperDefaultHost` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
    }

    private static String zooKeeperDefaultHost = "127.0.0.1";
    private static int zooKeeperDefaultPort = 2181;
    private static int zkSessionTimeOut = 5000;
```

### FieldMayBeFinal
Field `zkSessionTimeOut` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
    private static String zooKeeperDefaultHost = "127.0.0.1";
    private static int zooKeeperDefaultPort = 2181;
    private static int zkSessionTimeOut = 5000;
    private static String defaultLocalBookiesConfigDir = "/tmp/localbookies-config";

```

### FieldMayBeFinal
Field `baseConf` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
    String dirSuffix;
    ByteBufAllocatorWithOomHandler allocator;
    private ServerConfiguration baseConf;
    File localBookiesConfigDir;
    List<File> dirsToCleanUp;
```

### FieldMayBeFinal
Field `instance` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BKStats.java`
#### Snippet
```java
public class BKStats {
    private static final Logger LOG = LoggerFactory.getLogger(BKStats.class);
    private static BKStats instance = new BKStats();

    public static BKStats getInstance() {
```

### FieldMayBeFinal
Field `closed` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieNettyServer.java`
#### Snippet
```java
    private static class CleanupChannelGroup extends DefaultChannelGroup {

        private AtomicBoolean closed = new AtomicBoolean(false);

        public CleanupChannelGroup(EventLoopGroup eventLoopGroup) {
```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogMetadataCommand.java`
#### Snippet
```java

        @Parameter(names = { "-lf", "--ledgeridformatter" }, description = "Set ledger id formatter")
        private String ledgerIdFormatter = DEFAULT;

    }
```

### FieldMayBeFinal
Field `limit` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FlipBookieIdCommand.java`
#### Snippet
```java
        @Parameter(names = {"-l", "--limit"},
            description = "Maximum number of ledgers of ledgers to update (default: no limit)")
        private int limit = Integer.MIN_VALUE;

        @Parameter(names = { "-v", "--verbose" }, description = "Print status of the ledger updation (default: false)")
```

### FieldMayBeFinal
Field `updatePerSec` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FlipBookieIdCommand.java`
#### Snippet
```java
        @Parameter(names = { "-s", "--updatepersec" },
            description = "Number of ledgers updating per second (default: 5 per sec)")
        private int updatePerSec = 5;

        @Parameter(names = { "-r",
```

### FieldMayBeFinal
Field `printProgress` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FlipBookieIdCommand.java`
#### Snippet
```java
        @Parameter(names = { "-p", "--printprogress" },
            description = "Print messages on every configured seconds if verbose turned on (default: 10 secs)")
        private long printProgress = 10;
    }

```

### FieldMayBeFinal
Field `maxOutstandingReads` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/FlipBookieIdCommand.java`
#### Snippet
```java
        @Parameter(names = { "-r",
                "--maxOutstandingReads" }, description = "Max outstanding reads (default: 5 * updatespersec)")
        private int maxOutstandingReads = updatePerSec * 5;

        @Parameter(names = {"-l", "--limit"},
```

### FieldMayBeFinal
Field `firstEntryId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLedgerCommand.java`
#### Snippet
```java

        @Parameter(names = { "-fe", "--firstentryid" }, description = "First Entry ID")
        private long firstEntryId = -1;

        @Parameter(names = { "-le", "--lastentryid" }, description = "Last Entry ID")
```

### FieldMayBeFinal
Field `lastEntryId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLedgerCommand.java`
#### Snippet
```java

        @Parameter(names = { "-le", "--lastentryid" }, description = "Last Entry ID")
        private long lastEntryId = -1;

        @Parameter(names = { "-r", "--force-recovery" },
```

### FieldMayBeFinal
Field `ledgerId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLedgerCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledgerid" }, description = "Ledger ID")
        private long ledgerId = -1;

        @Parameter(names = { "-fe", "--firstentryid" }, description = "First Entry ID")
```

### FieldMayBeFinal
Field `maxOutstandingReads` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/UpdateBookieInLedgerCommand.java`
#### Snippet
```java
        @Parameter(names = { "-r",
                "--maxOutstandingReads" }, description = "Max outstanding reads (default: 5 * updatespersec)")
        private int maxOutstandingReads = updatePerSec * 5;

        @Parameter(names = {"-l", "--limit"},
```

### FieldMayBeFinal
Field `limit` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/UpdateBookieInLedgerCommand.java`
#### Snippet
```java
        @Parameter(names = {"-l", "--limit"},
            description = "Maximum number of ledgers of ledgers to update (default: no limit)")
        private int limit = Integer.MIN_VALUE;

        @Parameter(names = { "-v", "--verbose" }, description = "Print status of the ledger updation (default: false)")
```

### FieldMayBeFinal
Field `updatePerSec` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/UpdateBookieInLedgerCommand.java`
#### Snippet
```java
        @Parameter(names = { "-s", "--updatepersec" },
            description = "Number of ledgers updating per second (default: 5 per sec)")
        private int updatePerSec = 5;

        @Parameter(names = { "-r",
```

### FieldMayBeFinal
Field `printProgress` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/UpdateBookieInLedgerCommand.java`
#### Snippet
```java
        @Parameter(names = { "-p", "--printprogress" },
            description = "Print messages on every configured seconds if verbose turned on (default: 10 secs)")
        private long printProgress = 10;
    }

```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/LedgerCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledgeridformatter" }, description = "Set ledger id formatter")
        private String ledgerIdFormatter = "";
    }

```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadJournalCommand.java`
#### Snippet
```java

        @Parameter(names = {"-l", "--ledgerIdFormatter"}, description = "Set ledger id formatter")
        private String ledgerIdFormatter = DEFAULT;

        @Parameter(names = {"-e", "--entryformatter"}, description = "set entry formatter")
```

### FieldMayBeFinal
Field `fileName` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadJournalCommand.java`
#### Snippet
```java

        @Parameter(names = {"-f", "--filename"}, description = "Journal file name")
        private String fileName = DEFAULT;

        @Parameter(names = {"-l", "--ledgerIdFormatter"}, description = "Set ledger id formatter")
```

### FieldMayBeFinal
Field `entryFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadJournalCommand.java`
#### Snippet
```java

        @Parameter(names = {"-e", "--entryformatter"}, description = "set entry formatter")
        private String entryFormatter = DEFAULT;

    }
```

### FieldMayBeFinal
Field `journalId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadJournalCommand.java`
#### Snippet
```java

        @Parameter(names = {"-id", "--journalid"}, description = "Journal Id")
        private long journalId = DEFAULT_JOURNALID;

        @Parameter(names = {"-f", "--filename"}, description = "Journal file name")
```

### FieldMayBeFinal
Field `dir` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadJournalCommand.java`
#### Snippet
```java
        @Parameter(names = { "-d", "--dir" }, description = "Journal directory (needed if more than one journal "
                                                                + "configured)")
        private String dir = DEFAULT;

        @Parameter(names = {"-id", "--journalid"}, description = "Journal Id")
```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ListLedgersCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledgerIdFormatter" }, description = "Set ledger id formatter")
        private String ledgerIdFormatter = DEFAULT;
    }

```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ConvertToInterleavedStorageCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledgeridformatter" }, description = "Set ledger id formatter")
        private String ledgerIdFormatter = NOT_INIT;

    }
```

### FieldMayBeFinal
Field `entries` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/SanityTestCommand.java`
#### Snippet
```java

        @Parameter(names = {"-e", "--entries"}, description = "Total entries to be added for the test (default 10)")
        private int entries = 10;

        @Parameter(names = { "-t",
```

### FieldMayBeFinal
Field `timeout` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/SanityTestCommand.java`
#### Snippet
```java
        @Parameter(names = { "-t",
            "--timeout" }, description = "Timeout for write/read operations in seconds (default 1)")
        private int timeout = 1;

    }
```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ConvertToDBStorageCommand.java`
#### Snippet
```java
    public static class CTDBFlags extends CliFlags {
        @Parameter(names = { "-l", "--ledgeridformatter" }, description = "Set ledger id formatter")
        private String ledgerIdFormatter = NOT_INIT;
    }

```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ListActiveLedgersCommand.java`
#### Snippet
```java
        private long timeout = DEFAULT_TIME_OUT;
        @Parameter(names = { "-f", "--ledgerIdFormatter" }, description = "Ledger id formatter")
        private String ledgerIdFormatter = DEFAULT_LEDGER_ID_FORMATTER;
    }
    @Override
```

### FieldMayBeFinal
Field `logId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ListActiveLedgersCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--logid" }, description = "Entry log file id")
        private long logId = DEFAULT_LOG_ID;
        @Parameter(names = { "-t", "--timeout" }, description = "Read timeout(ms)")
        private long timeout = DEFAULT_TIME_OUT;
```

### FieldMayBeFinal
Field `timeout` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ListActiveLedgersCommand.java`
#### Snippet
```java
        private long logId = DEFAULT_LOG_ID;
        @Parameter(names = { "-t", "--timeout" }, description = "Read timeout(ms)")
        private long timeout = DEFAULT_TIME_OUT;
        @Parameter(names = { "-f", "--ledgerIdFormatter" }, description = "Ledger id formatter")
        private String ledgerIdFormatter = DEFAULT_LEDGER_ID_FORMATTER;
```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/DeleteLedgerCommand.java`
#### Snippet
```java

        @Parameter(names = { "-lf", "--ledgeridformatter" }, description = "Set ledger id formatter")
        private String ledgerIdFormatter = DEFAULT;

    }
```

### FieldMayBeFinal
Field `stopScanning` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java
        final MutableBoolean entryFound = new MutableBoolean(false);
        scanEntryLog(conf, logId, new EntryLogScanner() {
            private MutableBoolean stopScanning = new MutableBoolean(false);

            @Override
```

### FieldMayBeFinal
Field `ledgerId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledgerid" }, description = "Ledger ID")
        private long ledgerId = -1;

        @Parameter(names = { "-e", "--entryid" }, description = "Entry ID")
```

### FieldMayBeFinal
Field `endPos` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java

        @Parameter(names = { "-ep", "--endpos" }, description = "End Position")
        private long endPos = -1;

        @Parameter(names = { "-f", "--filename" }, description = "Entry log filename")
```

### FieldMayBeFinal
Field `startPos` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java

        @Parameter(names = { "-sp", "--startpos" }, description = "Start Position")
        private long startPos = -1;

        @Parameter(names = { "-ep", "--endpos" }, description = "End Position")
```

### FieldMayBeFinal
Field `entryLogId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java

        @Parameter(names = { "-li", "--entrylogid" }, description = "Entry log id")
        private long entryLogId = -1;

        @Parameter(names = {"-lf", "--ledgerIdFormatter"}, description = "Set ledger id formatter")
```

### FieldMayBeFinal
Field `entryId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookie/ReadLogCommand.java`
#### Snippet
```java

        @Parameter(names = { "-e", "--entryid" }, description = "Entry ID")
        private long entryId = -1;

        @Parameter(names = { "-sp", "--startpos" }, description = "Start Position")
```

### FieldMayBeFinal
Field `serDe` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/LedgerMetaDataCommand.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(LedgerMetaDataCommand.class);

    private LedgerMetadataSerDe serDe = new LedgerMetadataSerDe();
    private LedgerIdFormatter ledgerIdFormatter;

```

### FieldMayBeFinal
Field `restoreFromFile` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/LedgerMetaDataCommand.java`
#### Snippet
```java

        @Parameter(names = { "-r", "--restorefromfile" }, description = "Restore metadata for ledger, from a file")
        private String restoreFromFile = DEFAULT;

        @Parameter(names =  {"-lf", "--ledgeridformatter"}, description = "Set ledger id formatter")
```

### FieldMayBeFinal
Field `dumpToFile` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/LedgerMetaDataCommand.java`
#### Snippet
```java

        @Parameter(names = { "-d", "--dumptofile" }, description = "Dump metadata for ledger, to a file")
        private String dumpToFile = DEFAULT;

        @Parameter(names = { "-r", "--restorefromfile" }, description = "Restore metadata for ledger, from a file")
```

### FieldMayBeFinal
Field `ledgerId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/LedgerMetaDataCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledgerid" }, description = "Ledger ID", required = true)
        private long ledgerId = DEFAULT_ID;

        @Parameter(names = { "-d", "--dumptofile" }, description = "Dump metadata for ledger, to a file")
```

### FieldMayBeFinal
Field `update` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/LedgerMetaDataCommand.java`
#### Snippet
```java
        @Parameter(names = { "-u",
                "--update" }, description = "Update metadata if already exist while restoring metadata")
        private boolean update = false;
    }

```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/LedgerMetaDataCommand.java`
#### Snippet
```java

        @Parameter(names =  {"-lf", "--ledgeridformatter"}, description = "Set ledger id formatter")
        private String ledgerIdFormatter = DEFAULT;

        @Parameter(names = { "-u",
```

### FieldMayBeFinal
Field `writeQuorumSize` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/SimpleTestCommand.java`
#### Snippet
```java
        private int ensembleSize = 3;
        @Parameter(names = { "-w", "--write-quorum-size" }, description = "Write quorum size (default 2)")
        private int writeQuorumSize = 2;
        @Parameter(names = { "-a", "--ack-quorum-size" }, description = "Ack quorum size (default 2)")
        private int ackQuorumSize = 2;
```

### FieldMayBeFinal
Field `numEntries` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/SimpleTestCommand.java`
#### Snippet
```java
        private int ackQuorumSize = 2;
        @Parameter(names = { "-n", "--num-entries" }, description = "Entries to write (default 100)")
        private int numEntries = 100;

    }
```

### FieldMayBeFinal
Field `ensembleSize` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/SimpleTestCommand.java`
#### Snippet
```java

        @Parameter(names = { "-e", "--ensemble-size" }, description = "Ensemble size (default 3)")
        private int ensembleSize = 3;
        @Parameter(names = { "-w", "--write-quorum-size" }, description = "Write quorum size (default 2)")
        private int writeQuorumSize = 2;
```

### FieldMayBeFinal
Field `ackQuorumSize` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/client/SimpleTestCommand.java`
#### Snippet
```java
        private int writeQuorumSize = 2;
        @Parameter(names = { "-a", "--ack-quorum-size" }, description = "Ack quorum size (default 2)")
        private int ackQuorumSize = 2;
        @Parameter(names = { "-n", "--num-entries" }, description = "Entries to write (default 100)")
        private int numEntries = 100;
```

### FieldMayBeFinal
Field `instanceId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GenerateCookieCommand.java`
#### Snippet
```java
            description = "The instance id of the cluster that this bookie belongs to."
                + " If omitted, it will used the instance id of the cluster that this cli connects to.")
        private String instanceId = null;

        @Parameter(
```

### FieldMayBeFinal
Field `indexDirs` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/cookie/GenerateCookieCommand.java`
#### Snippet
```java
                names = { "-ix", "--index-dirs" },
                description = "The index directories used by this bookie")
        private String indexDirs = null;

        @Parameter(
```

### FieldMayBeFinal
Field `ledger` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/bookies/RecoverCommand.java`
#### Snippet
```java

        @Parameter(names = { "-l", "--ledger" }, description = "Recover a specific ledger")
        private long ledger = DEFAULT_ID;

        @Parameter(names = { "-f", "--force" }, description = "Force recovery without confirmation")
```

### FieldMayBeFinal
Field `bka` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/WhoIsAuditorCommand.java`
#### Snippet
```java
    private static final String DESC = "Print the node which holds the auditor lock.";

    private BookKeeperAdmin bka;

    public WhoIsAuditorCommand() {
```

### FieldMayBeFinal
Field `set` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/LostBookieRecoveryDelayCommand.java`
#### Snippet
```java

        @Parameter(names = { "-s", "--set" }, description = "Set LostBookieRecoveryDelay value (in seconds)")
        private int set = DEFAULT;

    }
```

### FieldMayBeFinal
Field `excludingMissingReplica` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/ListUnderReplicatedCommand.java`
#### Snippet
```java
        @Parameter(names = { "-emr", "--excludingmissingreplica" }, description = "Bookie Id of missing replica to "
                                                                                  + "ignore")
        private String excludingMissingReplica = DEFAULT;

        @Parameter(names =  {"-l", "--ledgeridformatter"}, description = "Set ledger id formatter")
```

### FieldMayBeFinal
Field `ledgerIdFormatter` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/ListUnderReplicatedCommand.java`
#### Snippet
```java

        @Parameter(names =  {"-l", "--ledgeridformatter"}, description = "Set ledger id formatter")
        private String ledgerIdFormatter = DEFAULT;

        @Parameter(names = {"-c", "--onlydisplayledgercount"},
```

### FieldMayBeFinal
Field `missingReplica` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/ListUnderReplicatedCommand.java`
#### Snippet
```java

        @Parameter(names = { "-mr", "--missingreplica" }, description = "Bookie Id of missing replica")
        private String missingReplica = DEFAULT;

        @Parameter(names = { "-emr", "--excludingmissingreplica" }, description = "Bookie Id of missing replica to "
```

### FieldMayBeFinal
Field `verbose` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/commands/autorecovery/QueryAutoRecoveryStatusCommand.java`
#### Snippet
```java
    public static class QFlags extends CliFlags{
        @Parameter(names =  {"-v", "--verbose"}, description = "list recovering detailed ledger info")
        private Boolean verbose = false;
    }

```

### FieldMayBeFinal
Field `executorName` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SyncThread.java`
#### Snippet
```java
    private boolean disableCheckpoint = false;
    private final Counter syncExecutorTime;
    private static String executorName = "SyncThread";

    public SyncThread(ServerConfiguration conf,
```

### FieldMayBeFinal
Field `entryLogMetaMap` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java

    // Maps entry log files to the set of ledgers that comprise the file and the size usage per ledger
    private EntryLogMetadataMap entryLogMetaMap;

    private final ScheduledExecutorService gcExecutor;
```

### FieldMayBeFinal
Field `curChunk` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SkipListArena.java`
#### Snippet
```java
 */
public class SkipListArena {
    private AtomicReference<Chunk> curChunk = new AtomicReference<Chunk>();

    final int chunkSize;
```

### FieldMayBeFinal
Field `allocCount` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SkipListArena.java`
#### Snippet
```java

        /** Total number of allocations satisfied from this buffer. */
        private AtomicInteger allocCount = new AtomicInteger();

        /** Size of chunk in bytes. */
```

### FieldMayBeFinal
Field `nextFreeOffset` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SkipListArena.java`
#### Snippet
```java
         * which implies that the chunk is still uninitialized.
         */
        private AtomicInteger nextFreeOffset = new AtomicInteger(UNINITIALIZED);

        /** Total number of allocations satisfied from this buffer. */
```

### FieldMayBeFinal
Field `ledgerId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDescriptorImpl.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(LedgerDescriptorImpl.class);
    final LedgerStorage ledgerStorage;
    private long ledgerId;
    final byte[] masterKey;

```

### FieldMayBeFinal
Field `fenceEntryPersisted` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDescriptorImpl.java`
#### Snippet
```java
    final byte[] masterKey;

    private AtomicBoolean fenceEntryPersisted = new AtomicBoolean();
    private CompletableFuture<Boolean> logFenceResult = null;

```

### FieldMayBeFinal
Field `minUsableSizeForEntryLogCreation` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
            new ConcurrentHashMap<File, Float>();
    private final long entryLogSize;
    private long minUsableSizeForEntryLogCreation;
    private long minUsableSizeForIndexFileCreation;

```

### FieldMayBeFinal
Field `minUsableSizeForIndexFileCreation` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
    private final long entryLogSize;
    private long minUsableSizeForEntryLogCreation;
    private long minUsableSizeForIndexFileCreation;

    private final DiskChecker diskChecker;
```

### FieldMayBeFinal
Field `statsLogger` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector.java`
#### Snippet
```java
    private final boolean verifyMetadataOnGc;
    private int activeLedgerCounter;
    private StatsLogger statsLogger;
    private final int maxConcurrentRequests;

```

### FieldMayBeFinal
Field `firstEntry` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerEntryPage.java`
#### Snippet
```java
    public OfLong getEntriesIterator() {
        return new OfLong() {
            long firstEntry = getFirstEntry();
            int curDiffEntry = 0;

```

### FieldMayBeFinal
Field `ledgerId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     */
    class DetectedInconsistency {
        private long ledgerId;
        private long entryId;
        private Exception detail;
```

### FieldMayBeFinal
Field `entryId` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
    class DetectedInconsistency {
        private long ledgerId;
        private long entryId;
        private Exception detail;

```

### FieldMayBeFinal
Field `detail` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
        private long ledgerId;
        private long entryId;
        private Exception detail;

        DetectedInconsistency(long ledgerId, long entryId, Exception detail) {
```

### FieldMayBeFinal
Field `logger` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryMemTable.java`
#### Snippet
```java
 */
public class EntryMemTable implements AutoCloseable{
    private static Logger logger = LoggerFactory.getLogger(EntryMemTable.class);
    /**
     * Entry skip list.
```

### FieldMayBeFinal
Field `isClosed` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/PersistentEntryLogMetadataMap.java`
#### Snippet
```java
    // persistent Rocksdb to store metadata-map
    private final KeyValueStorage metadataMapDB;
    private AtomicBoolean isClosed = new AtomicBoolean(false);

    private static final FastThreadLocal<ByteArrayOutputStream> baos = new FastThreadLocal<ByteArrayOutputStream>() {
```

### FieldMayBeFinal
Field `allocator` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/ReadCache.java`
#### Snippet
```java
    private final int segmentSize;

    private ByteBufAllocator allocator;
    private final ReentrantReadWriteLock lock = new ReentrantReadWriteLock();

```

### FieldMayBeFinal
Field `ensembles` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataBuilder.java`
#### Snippet
```java
    private Optional<Long> length = Optional.empty();

    private TreeMap<Long, List<BookieId>> ensembles = new TreeMap<>();

    private Optional<DigestType> digestType = Optional.empty();
```

### FieldMayBeFinal
Field `dbStoragerExecutorName` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java
    private final AtomicBoolean isFlushOngoing = new AtomicBoolean(false);

    private static String dbStoragerExecutorName = "db-storage";
    private final ExecutorService executor = Executors.newSingleThreadExecutor(
            new DefaultThreadFactory(dbStoragerExecutorName));
```

### FieldMayBeFinal
Field `bookieInfoMap` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DefaultEnsemblePlacementPolicy.java`
#### Snippet
```java
    private int maxWeightMultiple;
    private Set<BookieId> knownBookies = new HashSet<BookieId>();
    private Map<BookieId, WeightedObject> bookieInfoMap;
    private WeightedRandomSelection<BookieId> weightedSelection;
    private final ReentrantReadWriteLock rwLock;
```

### FieldMayBeFinal
Field `cToken` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerMetadataImpl.java`
#### Snippet
```java
    private final Map<String, byte[]> customMetadata;

    private long cToken;

    LedgerMetadataImpl(long ledgerId,
```

### FieldMayBeFinal
Field `timeOutInMillis` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadLastConfirmedAndEntryOp.java`
#### Snippet
```java
    private final long prevEntryId;
    private long lastAddConfirmed;
    private long timeOutInMillis;
    private final List<BookieId> currentEnsemble;
    private ScheduledFuture<?> speculativeTask = null;
```

### FieldMayBeFinal
Field `numVal` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/EnsemblePlacementPolicy.java`
#### Snippet
```java
    enum PlacementPolicyAdherence {
        FAIL(1), MEETS_SOFT(3), MEETS_STRICT(5);
        private int numVal;

        private PlacementPolicyAdherence(int numVal) {
```

### FieldMayBeFinal
Field `metadataLock` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/ReadOnlyLedgerHandle.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(ReadOnlyLedgerHandle.class);

    private Object metadataLock = new Object();
    private final NavigableMap<Long, List<BookieId>> newEnsemblesFromRecovery = new TreeMap<>();

```

### FieldMayBeFinal
Field `mFactory` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
    private LedgerFragmentReplicator lfr;

    private LedgerManagerFactory mFactory;

    /*
```

### FieldMayBeFinal
Field `bkc` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java

    // BookKeeper client instance
    private BookKeeper bkc;
    private final boolean ownsBK;

```

### FieldMayBeFinal
Field `completed` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        }
        ReadLastConfirmedOp.LastConfirmedDataCallback innercb = new ReadLastConfirmedOp.LastConfirmedDataCallback() {
            AtomicBoolean completed = new AtomicBoolean(false);

            @Override
```

### FieldMayBeFinal
Field `completed` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        ReadLastConfirmedAndEntryOp.LastConfirmedAndEntryCallback innercb =
            new ReadLastConfirmedAndEntryOp.LastConfirmedAndEntryCallback() {
            AtomicBoolean completed = new AtomicBoolean(false);
            @Override
            public void readLastConfirmedAndEntryComplete(int rc, long lastAddConfirmed, LedgerEntry entry) {
```

### FieldMayBeFinal
Field `bkc` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java

    // BookKeeper instance
    private BookKeeper bkc;
    private StatsLogger statsLogger;
    @StatsDoc(
```

### FieldMayBeFinal
Field `conf` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
    private static final int INITIAL_AVERAGE_ENTRY_SIZE = 1024;
    private static final double AVERAGE_ENTRY_SIZE_RATIO = 0.8;
    private ClientConfiguration conf;

    public LedgerFragmentReplicator(BookKeeper bkc, StatsLogger statsLogger, ClientConfiguration conf) {
```

### FieldMayBeFinal
Field `averageEntrySize` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
    protected Throttler replicationThrottle = null;

    private AtomicInteger averageEntrySize;

    private static final int INITIAL_AVERAGE_ENTRY_SIZE = 1024;
```

### FieldMayBeFinal
Field `statsLogger` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
    // BookKeeper instance
    private BookKeeper bkc;
    private StatsLogger statsLogger;
    @StatsDoc(
        name = NUM_ENTRIES_READ,
```

### FieldMayBeFinal
Field `lock` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/http/service/BookieSanityService.java`
#### Snippet
```java
    static final Logger LOG = LoggerFactory.getLogger(BookieSanityService.class);
    private final ServerConfiguration config;
    private Semaphore lock = new Semaphore(1);
    private static final int TIMEOUT_MS = 5000;
    private static final int MAX_CONCURRENT_REQUESTS = 1;
```

### FieldMayBeFinal
Field `conf` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/EmbeddedServer.java`
#### Snippet
```java
    public static class Builder {

        private BookieConfiguration conf;

        private StatsProvider statsProvider;
```

### FieldMayBeFinal
Field `server` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/service/HttpService.java`
#### Snippet
```java
    public static final String NAME = "http-service";

    private HttpServer server;

    public HttpService(BKHttpServiceProvider provider,
```

### FieldMayBeFinal
Field `client` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/verifier/DirectBookkeeperDriver.java`
#### Snippet
```java
class DirectBookkeeperDriver implements BookkeeperVerifier.BookkeeperDriver {
    private final ConcurrentHashMap<Long, LedgerHandle> openHandles = new ConcurrentHashMap<>();
    private BookKeeper client;

    DirectBookkeeperDriver(BookKeeper client) {
```

### FieldMayBeFinal
Field `scheduler` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
    private TreeMap<String, Versioned<Value>> map = null;
    private TreeMap<String, MetastoreWatcher> watcherMap = null;
    private ScheduledExecutorService scheduler;

    public InMemoryMetastoreTable(InMemoryMetaStore metastore, String name) {
```

### FieldMayBeFinal
Field `name` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/InMemoryMetastoreTable.java`
#### Snippet
```java
    }

    private String name;
    private TreeMap<String, Versioned<Value>> map = null;
    private TreeMap<String, MetastoreWatcher> watcherMap = null;
```

### FieldMayBeFinal
Field `running` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AuditorElector.java`
#### Snippet
```java

    Auditor auditor;
    private AtomicBoolean running = new AtomicBoolean(false);


```

### FieldMayBeFinal
Field `checkpointDuration` may be 'final'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStoreSpec.java`
#### Snippet
```java
    private CheckpointStore checkpointStore;
    @Default
    private Duration checkpointDuration = Duration.ofMinutes(1);
    @Singular
    private Map<String, Object> configs;
```

### FieldMayBeFinal
Field `watchInterval` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java`
#### Snippet
```java
     */
    private class AutoRecoveryDeathWatcher extends BookieCriticalThread {
        private int watchInterval;
        private AutoRecoveryMain autoRecoveryMain;

```

### FieldMayBeFinal
Field `autoRecoveryMain` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java`
#### Snippet
```java
    private class AutoRecoveryDeathWatcher extends BookieCriticalThread {
        private int watchInterval;
        private AutoRecoveryMain autoRecoveryMain;

        public AutoRecoveryDeathWatcher(AutoRecoveryMain autoRecoveryMain) {
```

### FieldMayBeFinal
Field `checkpointRestoreIdleLimit` may be 'final'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStoreSpec.java`
#### Snippet
```java
    @Default
    // Max idle time while waiting to restore from a checkpoint.
    private Duration checkpointRestoreIdleLimit = Duration.ofMinutes(5);

    @Default
```

### FieldMayBeFinal
Field `localStorageCleanupEnable` may be 'final'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStoreSpec.java`
#### Snippet
```java

    @Default
    private boolean localStorageCleanupEnable = false;

    @Default
```

### FieldMayBeFinal
Field `checkpointChecksumEnable` may be 'final'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStoreSpec.java`
#### Snippet
```java

    @Default
    private boolean checkpointChecksumEnable = true;
    @Default
    private boolean checkpointChecksumCompatible = true;
```

### FieldMayBeFinal
Field `ttlSeconds` may be 'final'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStoreSpec.java`
#### Snippet
```java

    @Default
    private int ttlSeconds = 0;
}

```

### FieldMayBeFinal
Field `checkpointChecksumCompatible` may be 'final'
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/api/StateStoreSpec.java`
#### Snippet
```java
    private boolean checkpointChecksumEnable = true;
    @Default
    private boolean checkpointChecksumCompatible = true;

    @Default
```

### FieldMayBeFinal
Field `latch` may be 'final'
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
            GenericCallback<Set<LedgerFragment>> {
        private Set<LedgerFragment> result = null;
        private CountDownLatch latch = new CountDownLatch(1);

        @Override
```

### FieldMayBeFinal
Field `numIOWriteThreads` may be 'final'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResourcesSpec.java`
#### Snippet
```java
    private int numSchedulerThreads = Runtime.getRuntime().availableProcessors() * 2;
    @Default
    private int numIOWriteThreads = Runtime.getRuntime().availableProcessors() * 2;
    @Default
    private int numIOReadThreads = Runtime.getRuntime().availableProcessors() * 2;
```

### FieldMayBeFinal
Field `numCheckpointThreads` may be 'final'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResourcesSpec.java`
#### Snippet
```java
    private int numIOReadThreads = Runtime.getRuntime().availableProcessors() * 2;
    @Default
    private int numCheckpointThreads = Runtime.getRuntime().availableProcessors() * 2;

}
```

### FieldMayBeFinal
Field `numIOReadThreads` may be 'final'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResourcesSpec.java`
#### Snippet
```java
    private int numIOWriteThreads = Runtime.getRuntime().availableProcessors() * 2;
    @Default
    private int numIOReadThreads = Runtime.getRuntime().availableProcessors() * 2;
    @Default
    private int numCheckpointThreads = Runtime.getRuntime().availableProcessors() * 2;
```

### FieldMayBeFinal
Field `numSchedulerThreads` may be 'final'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/StorageResourcesSpec.java`
#### Snippet
```java

    @Default
    private int numSchedulerThreads = Runtime.getRuntime().availableProcessors() * 2;
    @Default
    private int numIOWriteThreads = Runtime.getRuntime().availableProcessors() * 2;
```

### FieldMayBeFinal
Field `containerAssignmentMap` may be 'final'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/ZkStorageContainerManager.java`
#### Snippet
```java
    private volatile Map<Endpoint, ServerAssignmentData> clusterAssignmentMap;
    private volatile ServerAssignmentData myAssignmentData;
    private volatile ConcurrentLongHashMap<Endpoint> containerAssignmentMap;

    // a probe task to probe containers and make sure this manager running containers as assigned
```

### FieldMayBeFinal
Field `kvRpcMethods` may be 'final'
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/routing/RoutingHeaderProxyInterceptor.java`
#### Snippet
```java
    }

    private static Map<String, InterceptorDescriptor<?>> kvRpcMethods = new HashMap<>();
    static {
        kvRpcMethods.put(
```

### FieldMayBeFinal
Field `threadPoolMap` may be 'final'
in `stats/bookkeeper-stats-api/src/main/java/org/apache/bookkeeper/stats/ThreadRegistry.java`
#### Snippet
```java
 */
public class ThreadRegistry {
    private static ConcurrentMap<Long, ThreadPoolThread> threadPoolMap = new ConcurrentHashMap<>();

    /*
```

### FieldMayBeFinal
Field `code` may be 'final'
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/io/CompressionCodec.java`
#### Snippet
```java
        LZ4(0x1);

        private int code;

        Type(int code) {
```

### FieldMayBeFinal
Field `url` may be 'final'
in `stream/distributedlog/common/src/main/java/org/apache/distributedlog/common/config/PropertiesConfigurationBuilder.java`
#### Snippet
```java
 */
public class PropertiesConfigurationBuilder implements FileConfigurationBuilder {
    private URL url;

    public PropertiesConfigurationBuilder(URL url) {
```

### FieldMayBeFinal
Field `children` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKeyGroup.java`
#### Snippet
```java
     */
    @Default
    private List<String> children = Collections.emptyList();

    /**
```

### FieldMayBeFinal
Field `order` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKeyGroup.java`
#### Snippet
```java
     */
    @Default
    private int order = Integer.MIN_VALUE;

    /**
```

### FieldMayBeFinal
Field `description` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKeyGroup.java`
#### Snippet
```java
     */
    @Default
    private String description = "";

    /**
```

### FieldMayBeFinal
Field `validator` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/Type.java`
#### Snippet
```java
    CLASS((name, value) -> value instanceof Class || value instanceof String);

    private Validator validator;

    Type(Validator validator) {
```

### FieldMayBeFinal
Field `required` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private boolean required = false;

    /**
```

### FieldMayBeFinal
Field `deprecatedSince` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private String deprecatedSince = "";

    /**
```

### FieldMayBeFinal
Field `validator` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private Validator validator = NullValidator.of();

    /**
```

### FieldMayBeFinal
Field `description` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private String description = "";

    /**
```

### FieldMayBeFinal
Field `since` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private String since = "";

    /**
```

### FieldMayBeFinal
Field `optionValues` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private List<String> optionValues = Collections.emptyList();

    /**
```

### FieldMayBeFinal
Field `defaultValue` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private Object defaultValue = null;

    private String defaultValueAsString() {
```

### FieldMayBeFinal
Field `group` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private ConfigKeyGroup group = ConfigKeyGroup.DEFAULT;

    /**
```

### FieldMayBeFinal
Field `orderInGroup` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private int orderInGroup = Integer.MIN_VALUE;

    /**
```

### FieldMayBeFinal
Field `dependents` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private List<String> dependents = Collections.emptyList();

    /**
```

### FieldMayBeFinal
Field `type` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private Type type = Type.STRING;

    /**
```

### FieldMayBeFinal
Field `documentation` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private String documentation = "";

    /**
```

### FieldMayBeFinal
Field `deprecatedByConfigKey` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private String deprecatedByConfigKey = "";

    /**
```

### FieldMayBeFinal
Field `deprecated` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/conf/ConfigKey.java`
#### Snippet
```java
     */
    @Default
    private boolean deprecated = false;

    /**
```

### FieldMayBeFinal
Field `mapper` may be 'final'
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/JsonUtil.java`
#### Snippet
```java
public class JsonUtil {

    private static ObjectMapper mapper = new ObjectMapper();

    public static String toJson(Object object) throws ParseJsonException {
```

### FieldMayBeFinal
Field `providers` may be 'final'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/StatsLoggerBenchmark.java`
#### Snippet
```java
public class StatsLoggerBenchmark {

    private static Map<String, Supplier<StatsProvider>> providers = new HashMap<>();

    static {
```

### FieldMayBeFinal
Field `startTime` may be 'final'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/stats/StatsLoggerBenchmark.java`
#### Snippet
```java
        private OpStatsLogger opStats;

        private long startTime = System.nanoTime();

        @Setup(Level.Trial)
```

### FieldMayBeFinal
Field `providers` may be 'final'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/OrderedExecutorBenchmark.java`
#### Snippet
```java
public class OrderedExecutorBenchmark {

    private static Map<String, Supplier<ExecutorService>> providers = ImmutableMap.of(
            "JDK-ThreadPool", () -> Executors.newFixedThreadPool(1),
            "OrderedExecutor", () -> OrderedExecutor.newBuilder().numThreads(1).build(),
```

### FieldMayBeFinal
Field `arrayBlockingQueue` may be 'final'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
    public static class TestState {

        private ArrayBlockingQueue arrayBlockingQueue = new ArrayBlockingQueue<>(QUEUE_SIZE);

        private BatchedArrayBlockingQueue batchedArrayBlockingQueue = new BatchedArrayBlockingQueue<>(QUEUE_SIZE);
```

### FieldMayBeFinal
Field `batchedArrayBlockingQueue` may be 'final'
in `microbenchmarks/src/main/java/org/apache/bookkeeper/common/MpScQueueBenchmark.java`
#### Snippet
```java
        private ArrayBlockingQueue arrayBlockingQueue = new ArrayBlockingQueue<>(QUEUE_SIZE);

        private BatchedArrayBlockingQueue batchedArrayBlockingQueue = new BatchedArrayBlockingQueue<>(QUEUE_SIZE);

        private final Integer[] batchArray = new Integer[1000];
```

### FieldMayBeFinal
Field `provider` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedDataSketchesStatsLogger.java`
#### Snippet
```java
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
    private PrometheusMetricsProvider provider;

    public ThreadScopedDataSketchesStatsLogger(PrometheusMetricsProvider provider,
```

### FieldMayBeFinal
Field `defaultStatsLogger` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedDataSketchesStatsLogger.java`
#### Snippet
```java

    private ThreadLocal<DataSketchesOpStatsLogger> statsLoggers;
    private DataSketchesOpStatsLogger defaultStatsLogger;
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
```

### FieldMayBeFinal
Field `scopeContext` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedDataSketchesStatsLogger.java`
#### Snippet
```java
    private DataSketchesOpStatsLogger defaultStatsLogger;
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
    private PrometheusMetricsProvider provider;

```

### FieldMayBeFinal
Field `statsLoggers` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedDataSketchesStatsLogger.java`
#### Snippet
```java
public class ThreadScopedDataSketchesStatsLogger implements OpStatsLogger {

    private ThreadLocal<DataSketchesOpStatsLogger> statsLoggers;
    private DataSketchesOpStatsLogger defaultStatsLogger;
    private Map<String, String> originalLabels;
```

### FieldMayBeFinal
Field `originalLabels` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedDataSketchesStatsLogger.java`
#### Snippet
```java
    private ThreadLocal<DataSketchesOpStatsLogger> statsLoggers;
    private DataSketchesOpStatsLogger defaultStatsLogger;
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
    private PrometheusMetricsProvider provider;
```

### FieldMayBeFinal
Field `provider` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedLongAdderCounter.java`
#### Snippet
```java
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
    private PrometheusMetricsProvider provider;

    public ThreadScopedLongAdderCounter(PrometheusMetricsProvider provider,
```

### FieldMayBeFinal
Field `originalLabels` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedLongAdderCounter.java`
#### Snippet
```java
    private ThreadLocal<LongAdderCounter> counters;
    private LongAdderCounter defaultCounter;
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
    private PrometheusMetricsProvider provider;
```

### FieldMayBeFinal
Field `counters` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedLongAdderCounter.java`
#### Snippet
```java
 */
public class ThreadScopedLongAdderCounter implements Counter {
    private ThreadLocal<LongAdderCounter> counters;
    private LongAdderCounter defaultCounter;
    private Map<String, String> originalLabels;
```

### FieldMayBeFinal
Field `defaultCounter` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedLongAdderCounter.java`
#### Snippet
```java
public class ThreadScopedLongAdderCounter implements Counter {
    private ThreadLocal<LongAdderCounter> counters;
    private LongAdderCounter defaultCounter;
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
```

### FieldMayBeFinal
Field `scopeContext` may be 'final'
in `stats/bookkeeper-stats-providers/prometheus-metrics-provider/src/main/java/org/apache/bookkeeper/stats/prometheus/ThreadScopedLongAdderCounter.java`
#### Snippet
```java
    private LongAdderCounter defaultCounter;
    private Map<String, String> originalLabels;
    private ScopeContext scopeContext;
    private PrometheusMetricsProvider provider;

```

### FieldMayBeFinal
Field `value` may be 'final'
in `bookkeeper-http/http-server/src/main/java/org/apache/bookkeeper/http/HttpServer.java`
#### Snippet
```java
        SERVICE_UNAVAILABLE(503);

        private int value;

        StatusCode(int value) {
```

### FieldMayBeFinal
Field `httpServiceProvider` may be 'final'
in `bookkeeper-http/http-server/src/main/java/org/apache/bookkeeper/http/AbstractHttpHandlerFactory.java`
#### Snippet
```java
 */
public abstract class AbstractHttpHandlerFactory<Handler> {
    private HttpServiceProvider httpServiceProvider;

    /**
```

### FieldMayBeFinal
Field `NULL_OP_LISTENER` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogWriteHandler.java`
#### Snippet
```java
    static final Logger LOG = LoggerFactory.getLogger(BKLogWriteHandler.class);

    private static Transaction.OpListener<LogSegmentEntryWriter> NULL_OP_LISTENER =
            new Transaction.OpListener<LogSegmentEntryWriter>() {
        @Override
```

### FieldMayBeFinal
Field `lastDLSN` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadAheadEntryReader.java`
#### Snippet
```java
    private SegmentReader currentSegmentReader;
    private SegmentReader nextSegmentReader;
    private DLSN lastDLSN;
    private final EntryPosition nextEntryPosition;
    private volatile boolean isCatchingUp = true;
```

### FieldMayBeFinal
Field `START_READER_FUNC` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadAheadEntryReader.java`
#### Snippet
```java
    //

    private static Function<LogSegmentEntryReader, Void> START_READER_FUNC = reader -> {
        reader.start();
        return null;
```

### FieldMayBeFinal
Field `readAheadPaused` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/ReadAheadEntryReader.java`
#### Snippet
```java
    private final AtomicBoolean started = new AtomicBoolean(false);
    private boolean isInitialized = false;
    private boolean readAheadPaused = false;
    private CompletableFuture<Void> closePromise = null;
    // segment readers
```

### FieldMayBeFinal
Field `lastTransmit` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
    private boolean immediateFlushEnabled = false;
    private int minDelayBetweenImmediateFlushMs = 0;
    private Stopwatch lastTransmit;
    private boolean streamEnded = false;
    private final ScheduledFuture<?> periodicFlushSchedule;
```

### FieldMayBeFinal
Field `immFlushSchedFutureRef` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
            ScheduledFuture.class,
            "immFlushSchedFutureRef");
    private volatile ScheduledFuture immFlushSchedFutureRef = null;
    private static final AtomicReferenceFieldUpdater<BKLogSegmentWriter, Exception> scheduledFlushExceptionUpdater =
        AtomicReferenceFieldUpdater.newUpdater(
```

### FieldMayBeFinal
Field `transmitSchedFutureRef` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
            ScheduledFuture.class,
            "transmitSchedFutureRef");
    private volatile ScheduledFuture transmitSchedFutureRef = null;
    private static final AtomicReferenceFieldUpdater<BKLogSegmentWriter, ScheduledFuture>
        immFlushSchedFutureRefUpdater = AtomicReferenceFieldUpdater.newUpdater(
```

### FieldMayBeFinal
Field `LOG` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/BKNamespaceDriver.java`
#### Snippet
```java
public class BKNamespaceDriver implements NamespaceDriver {

    private static Logger LOG = LoggerFactory.getLogger(BKNamespaceDriver.class);

    // register itself
```

### FieldMayBeFinal
Field `readAheadWaitTime` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
            new CopyOnWriteArraySet<StateChangeListener>();
    // read retries
    private int readAheadWaitTime;
    private final int maxReadBackoffTime;
    private static final AtomicIntegerFieldUpdater<BKLogSegmentEntryReader> numReadErrorsUpdater =
```

### FieldMayBeFinal
Field `simulateCorruption` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/injector/AsyncRandomFailureInjector.java`
#### Snippet
```java
    private boolean simulateErrors;
    private boolean simulateStops;
    private boolean simulateCorruption;
    private final int injectedDelayPercent;
    private final int injectedErrorPercent;
```

### FieldMayBeFinal
Field `lockState` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/lock/ZKSessionLock.java`
#### Snippet
```java
    // Identify a unique lock
    private final Pair<String, Long> lockId;
    private StateManagement lockState;
    private final DistributedLockContext lockContext;

```

### FieldMayBeFinal
Field `dlType` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/DLMetadata.java`
#### Snippet
```java
    private int metadataFormatVersion = 0;
    // underlying dl type
    private String dlType;
    // underlying dl config
    private DLConfig dlConfig;
```

### FieldMayBeFinal
Field `dlConfig` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/metadata/DLMetadata.java`
#### Snippet
```java
    private String dlType;
    // underlying dl config
    private DLConfig dlConfig;

    public DLMetadata(String dlType, DLConfig dlConfig) {
```

### FieldMayBeFinal
Field `mdcKeysTls` may be 'final'
in `bookkeeper-slogger/slf4j/src/main/java/org/apache/bookkeeper/slogger/slf4j/Slf4jSlogger.java`
#### Snippet
```java
 */
public class Slf4jSlogger extends AbstractSlogger {
    private ThreadLocal<List<String>> mdcKeysTls = new ThreadLocal<List<String>>() {
            @Override
            protected List<String> initialValue() {
```

### FieldMayBeFinal
Field `doneLatch` may be 'final'
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
    public static class WatchNamespaceCommand extends PerDLCommand implements NamespaceListener {
        private Set<String> currentSet = Sets.<String>newHashSet();
        private CountDownLatch doneLatch = new CountDownLatch(1);

        WatchNamespaceCommand() {
```

## RuleId[id=CaughtExceptionImmediatelyRethrown]
### CaughtExceptionImmediatelyRethrown
Caught exception `e` is immediately rethrown
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/mvcc/MVCCStoreImpl.java`
#### Snippet
```java
        try {
            record = getKeyRecord(key, rawKey);
        } catch (StateStoreRuntimeException e) {
            throw e;
        }
```

### CaughtExceptionImmediatelyRethrown
Caught exception `nee` is immediately rethrown
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LogSegmentMetadata.java`
#### Snippet
```java
            zkc.get().create(zkPath, finalisedData.getBytes(UTF_8),
                zkc.getDefaultACL(), CreateMode.PERSISTENT);
        } catch (KeeperException.NodeExistsException nee) {
            throw nee;
        } catch (InterruptedException ie) {
```

### CaughtExceptionImmediatelyRethrown
Caught exception `ke` is immediately rethrown
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        } catch (ZooKeeperClient.ZooKeeperConnectionException zkce) {
            throw zkce;
        } catch (KeeperException ke) {
            throw ke;
        } catch (InterruptedException ie) {
```

## RuleId[id=UnnecessaryContinue]
### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdBookieRegister.java`
#### Snippet
```java
                throw new IllegalArgumentException("Should never reach here");
            } catch (TimeoutException e) {
                continue;
            }

```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdBookieRegister.java`
#### Snippet
```java
                log.info("Keeping Alive at lease = {}", get());
                keepAliveFuture.get();
                continue;
            } catch (InterruptedException ie) {
                Thread.currentThread().interrupt();
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdBookieRegister.java`
#### Snippet
```java
                    log.warn("Interrupted at backing off granting a new lease for leaseId {}", leaseId);
                }
                continue;
            }
        }
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdRegistrationManager.java`
#### Snippet
```java
                || keyStr.equals(writableBookiesPath)
                || keyStr.equals(readonlyBookiesPath)) {
                continue;
            } else {
                hasBookiesAlive = true;
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.java`
#### Snippet
```java
                if (!l2NodesIter.hasNext()) {
                    l2NodesIter = null;
                    continue;
                }
            }
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
                // has an incorrect format. For now just continue and consider
                // this as a non-existent ledger.
                continue;
            }
        }
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerUnderreplicationManager.java`
#### Snippet
```java
                for (String missingReplica : missingReplicas) {
                    if (existingUrLedgerFormat.getReplicaList().contains(missingReplica)) {
                        continue;
                    } else {
                        builder.addReplica(missingReplica);
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SyncThread.java`
#### Snippet
```java
                        } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
                            continue;
                        }
                    }
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LegacyCookieValidation.java`
#### Snippet
```java
                }
            } catch (BookieException.CookieNotFoundException e) {
                continue;
            }
        }
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/WriteCache.java`
#### Snippet
```java
                // If an entry is at the end of a segment, we need to get a new offset and try
                // again in next segment
                continue;
            } else {
                // Found a good offset
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLInputStream.java`
#### Snippet
```java
                currentRecord = nextRecordStream(reader);
                this.pos = endPos;
                continue;
            } else if (endPos == position){
                // find the record, but we defer read next record when actual read happens
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/dlog/DLInputStream.java`
#### Snippet
```java
                this.pos = endPos;
                this.currentRecord = nextRecordStream(reader);
                continue;
            } else if (remaining == bytesLeft) {
                this.pos = endPos;
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
                this.pos = endPos;
                this.currentRecord = nextRecordStream(reader);
                continue;
            } else if (remaining == bytesLeft) {
                this.pos = endPos;
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/distributedlog/io/dlfs/src/main/java/org/apache/distributedlog/fs/DLInputStream.java`
#### Snippet
```java
                currentRecord = nextRecordStream(reader);
                this.pos = endPos;
                continue;
            } else if (endPos == position){
                // find the record, but we defer read next record when actual read happens
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/sc/DefaultStorageContainerController.java`
#### Snippet
```java
                    log.trace("Host {} is not in current cluster anymore", host);
                }
                continue;
            } else {
                if (log.isTraceEnabled()) {
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKSyncLogReader.java`
#### Snippet
```java
                if (record.getTransactionId() < startTransactionId.get()) {
                    record = null;
                    continue;
                } else {
                    positioned = true;
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/logsegment/BKLogSegmentEntryReader.java`
#### Snippet
```java
                CacheEntry removedEntry = readAheadEntries.poll();
                removedEntry.release();
                continue;
            } else {
                completeExceptionally(new BKTransmitException("Encountered issue on reading entry " + entry.getEntryId()
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/federated/FederatedZKLogMetadataStore.java`
#### Snippet
```java
            if (oldVersion < zkVersion) {
                done = zkSubnamespacesVersion.compareAndSet(oldVersion, zkVersion);
                continue;
            } else {
                done = true;
```

## RuleId[id=SynchronizationOnLocalVariableOrMethodParameter]
### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on method parameter `listeners`
in `metadata-drivers/etcd/src/main/java/org/apache/bookkeeper/metadata/etcd/EtcdRegistrationClient.java`
#### Snippet
```java
    ) {
        Consumer<Versioned<Set<BookieId>>> consumer;
        synchronized (listeners) {
            consumer = listeners.get(listener);
            if (null != consumer) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `stream`
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/TestClient.java`
#### Snippet
```java
                while (System.currentTimeMillis() < stopat) {
                    FileOutputStream stream = streams.get(r.nextInt(streams.size()));
                    synchronized (stream) {
                        stream.write(data);
                        stream.flush();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
        Set<LedgerMetadataListener> listenerSet = listeners.get(ledgerId);
        if (listenerSet != null) {
            synchronized (listenerSet) {
                if (listenerSet.remove(listener)) {
                    if (LOG.isDebugEnabled()) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
            Set<LedgerMetadataListener> listenerSet = listeners.get(ledgerId);
            if (null != listenerSet) {
                synchronized (listenerSet){
                    if (LOG.isDebugEnabled()) {
                        LOG.debug("Removed ledger metadata listeners on ledger {} : {}",
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
                    // notify `null` as indicator that a ledger is deleted
                    // make this behavior consistent with `NodeDeleted` watched event.
                    synchronized (listenerSet) {
                        for (LedgerMetadataListener listener : listenerSet) {
                            listener.onChanged(ledgerId, null);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/AbstractZkLedgerManager.java`
#### Snippet
```java
                }
            }
            synchronized (listenerSet) {
                listenerSet.add(listener);
            }
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java
                    }
                }
                synchronized (listenerSet) {
                    listenerSet.add(listener);
                }
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java
            Set<LedgerMetadataListener> listenerSet = listeners.get(ledgerId);
            if (listenerSet != null) {
                synchronized (listenerSet) {
                    if (listenerSet.remove(listener)) {
                        LOG.info("Unregistered ledger metadata listener {} on ledger {}.", listener, ledgerId);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/MSLedgerManagerFactory.java`
#### Snippet
```java
                Set<LedgerMetadataListener> listenerSet = listeners.get(ledgerId);
                if (listenerSet != null) {
                    synchronized (listenerSet) {
                        for (LedgerMetadataListener l : listenerSet){
                            unregisterLedgerMetadataListener(ledgerId, l);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `channel`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PacketProcessorBaseV3.java`
#### Snippet
```java
        if (timeOut >= 0 && !channel.isWritable()) {
            if (!requestProcessor.isBlacklisted(channel)) {
                synchronized (channel) {
                    if (!channel.isWritable() && !requestProcessor.isBlacklisted(channel)) {
                        final long waitUntilNanos = writeNanos + TimeUnit.MILLISECONDS.toNanos(timeOut);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `channel`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/PacketProcessorBase.java`
#### Snippet
```java
        if (timeOut >= 0 && !channel.isWritable()) {
            if (!requestProcessor.isBlacklisted(channel)) {
                synchronized (channel) {
                    if (!channel.isWritable() && !requestProcessor.isBlacklisted(channel)) {
                        final long waitUntilNanos = writeNanos + TimeUnit.MILLISECONDS.toNanos(timeOut);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `status`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
                BookieStatus status = readFromFile(statusFile);
                if (null != status) {
                    synchronized (status) {
                        if (status.lastUpdateTime > this.lastUpdateTime) {
                            this.lastUpdateTime = status.lastUpdateTime;
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `status`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieStatus.java`
#### Snippet
```java
            return null;
        }
        synchronized (status) {
            status.layoutVersion = Integer.parseInt(parts[0].trim());
            if (status.layoutVersion == 1 && parts.length == 3) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `bc`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/DefaultEntryLogger.java`
#### Snippet
```java
        BufferedLogChannel bc = entryLogManager.getCurrentLogIfPresent(entryLogId);
        if (null != bc) {
            synchronized (bc) {
                if (pos + buff.writableBytes() >= bc.getFileChannelPosition()) {
                    return bc.read(buff, pos);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `handle`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
        try {
            LedgerDescriptor handle = getLedgerForEntry(entry, masterKey);
            synchronized (handle) {
                entrySize = entry.readableBytes();
                addEntryInternal(handle, entry, false /* ackBeforeSync */, cb, ctx, masterKey);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `handle`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
            long ledgerId = entry.getLong(entry.readerIndex());
            LedgerDescriptor handle = handles.getHandle(ledgerId, masterKey);
            synchronized (handle) {
                entry.markReaderIndex();
                handle.setExplicitLac(entry);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `handle`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
        try {
            LedgerDescriptor handle = getLedgerForEntry(entry, masterKey);
            synchronized (handle) {
                if (handle.isFenced()) {
                    throw BookieException
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `handle`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/BookieImpl.java`
#### Snippet
```java
        ByteBuf lac;
        LedgerDescriptor handle = handles.getReadOnlyHandle(ledgerId);
        synchronized (handle) {
            lac = handle.getExplicitLac();
        }
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `lcCtx`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/SyncCallbackUtils.java`
#### Snippet
```java
            LedgerHandle.LastConfirmedCtx lcCtx = (LedgerHandle.LastConfirmedCtx) ctx;

            synchronized (lcCtx) {
                lcCtx.setRC(rc);
                lcCtx.setLastConfirmed(lastConfirmed);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on method parameter `lh`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerRecoveryOp.java`
#### Snippet
```java
             * be added again when processing the call to add it.
             */
            synchronized (lh) {
                lh.length = entry.getLength() - (long) data.length;
                // check whether entry id is expected, so we won't overwritten any entries by mistake
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `syncObject`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
            LOG.info("Recover bookie for {} completed with rc : {}", lid, BKException.codeLogger(rc));
            SyncObject syncObject = (SyncObject) ctx;
            synchronized (syncObject) {
                syncObject.rc = rc;
                syncObject.value = true;
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `sync`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java

        // Wait for the async method to complete.
        synchronized (sync) {
            while (!sync.value) {
                sync.wait();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `syncObj`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
                LOG.info("Recover bookie operation completed with rc: {}", BKException.codeLogger(rc));
                SyncObject syncObj = (SyncObject) ctx;
                synchronized (syncObj) {
                    syncObj.rc = rc;
                    syncObj.value = true;
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `sync`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java

        // Wait for the async method to complete.
        synchronized (sync) {
            while (!sync.value) {
                sync.wait();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `ctx`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        LastConfirmedCtx ctx = new LastConfirmedCtx();
        asyncReadLastConfirmed(new SyncReadLastConfirmedCallback(), ctx);
        synchronized (ctx) {
            while (!ctx.ready()) {
                ctx.wait();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `ctx`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        LastConfirmedCtx ctx = new LastConfirmedCtx();
        asyncTryReadLastConfirmed(new SyncReadLastConfirmedCallback(), ctx);
        synchronized (ctx) {
            while (!ctx.ready()) {
                ctx.wait();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `ctx`
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
        LastConfirmedCtx ctx = new LastConfirmedCtx();
        asyncReadExplicitLastConfirmed(new SyncReadLastConfirmedCallback(), ctx);
        synchronized (ctx) {
            while (!ctx.ready()) {
                ctx.wait();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `watchers`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/ZKWatcherManager.java`
#### Snippet
```java
            return;
        }
        synchronized (watchers) {
            if (watchers.remove(watcher)) {
                allWatchesGauge.decrement();
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `watcherSet`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/ZKWatcherManager.java`
#### Snippet
```java
        Set<Watcher> savedAllWatches = new HashSet<Watcher>((int) allWatchesGauge.sum());
        for (Set<Watcher> watcherSet : childWatches.values()) {
            synchronized (watcherSet) {
                savedAllWatches.addAll(watcherSet);
            }
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `watchers`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/ZKWatcherManager.java`
#### Snippet
```java
        }
        Set<Watcher> watchersToFire;
        synchronized (watchers) {
            watchersToFire = new HashSet<Watcher>(watchers.size());
            watchersToFire.addAll(watchers);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `watchers`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/zk/ZKWatcherManager.java`
#### Snippet
```java
            watchers = (null == oldWatchers) ? newWatchers : oldWatchers;
        }
        synchronized (watchers) {
            if (childWatches.get(path) == watchers) {
                if (watchers.add(watcher)) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
                        }
                    }
                    synchronized (listenerSet) {
                        listenerSet.put(listener, new VersionedLogSegmentNamesListener(listener));
                        if (!listeners.containsKey(logSegmentsPath)) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `listenerSet`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/ZKLogSegmentMetadataStore.java`
#### Snippet
```java
                return;
            }
            synchronized (listenerSet) {
                listenerSet.remove(listener);
                if (listenerSet.isEmpty()) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on method parameter `ledgers`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/auditor/DLAuditor.java`
#### Snippet
```java
            List<Long> sLedgers = new ArrayList<Long>();
            for (LogSegmentMetadata segment : segments) {
                synchronized (ledgers) {
                    ledgers.add(segment.getLogSegmentId());
                }
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on method parameter `corruptedCandidates`
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java
                            }
                        }
                        synchronized (corruptedCandidates) {
                            corruptedCandidates.put(s, ledgers);
                        }
```

## RuleId[id=UnnecessaryLocalVariable]
### UnnecessaryLocalVariable
Local variable `dataOffset` is redundant
in `stream/distributedlog/protocol/src/main/java/org/apache/distributedlog/EnvelopedRecordSetWriter.java`
#### Snippet
```java

    ByteBuf createBuffer() {
        int dataOffset = HEADER_LEN;
        int dataLen = buffer.readableBytes() - HEADER_LEN;

```

### UnnecessaryLocalVariable
Local variable `metricName` is redundant
in `stats/bookkeeper-stats-providers/otel-metrics-provider/src/main/java/org/apache/bookkeeper/stats/otel/OtelStatsLogger.java`
#### Snippet
```java

    private String completeName(String name) {
        String metricName = scope.isEmpty()
                ? name
                : new StringJoiner(".").add(scope).add(name).toString();
```

### UnnecessaryLocalVariable
Local variable `switchMap` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/CachedDNSToSwitchMapping.java`
#### Snippet
```java
  @Override
  public Map<String, String> getSwitchMap() {
    Map<String, String> switchMap = new HashMap<String, String>(cache);
    return switchMap;
  }
```

### UnnecessaryLocalVariable
Local variable `result` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/meta/ZkLedgerAuditorManager.java`
#### Snippet
```java
            long voteSeqId1 = getVoteSequenceId(vote1);
            long voteSeqId2 = getVoteSequenceId(vote2);
            int result = voteSeqId1 < voteSeqId2 ? -1
                    : (voteSeqId1 > voteSeqId2 ? 1 : 0);
            return result;
```

### UnnecessaryLocalVariable
Local variable `retval` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslClientState.java`
#### Snippet
```java
    public byte[] saslResponse(byte[] saslTokenMessage) {
        try {
            byte[] retval = saslClient.evaluateChallenge(saslTokenMessage);
            return retval;
        } catch (SaslException e) {
```

### UnnecessaryLocalVariable
Local variable `retval` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslClientState.java`
#### Snippet
```java
        if (clientSubject != null) {
            try {
                final byte[] retval = Subject.doAs(clientSubject, new PrivilegedExceptionAction<byte[]>() {
                        @Override
                        public byte[] run() throws SaslException {
```

### UnnecessaryLocalVariable
Local variable `retval` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/SaslServerState.java`
#### Snippet
```java
    public byte[] response(byte[] token) throws SaslException {
        try {
            byte[] retval = saslServer.evaluateResponse(token);
            return retval;
        } catch (SaslException e) {
```

### UnnecessaryLocalVariable
Local variable `used` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/DiskChecker.java`
#### Snippet
```java
        }
        float free = (float) getTotalFreeSpace(dirs) / (float) getTotalDiskSpace(dirs);
        float used = 1f - free;
        return used;
    }
```

### UnnecessaryLocalVariable
Local variable `numSections` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.java`
#### Snippet
```java
        checkArgument(shrinkFactor > 1);

        int numSections = concurrencyLevel;
        int perSectionExpectedItems = expectedItems / numSections;
        int perSectionCapacity = (int) (perSectionExpectedItems / mapFillFactor);
```

### UnnecessaryLocalVariable
Local variable `newValues` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashSet.java`
#### Snippet
```java

        private void shrinkToInitCapacity() {
            V[] newValues = (V[]) new Object[initCapacity];

            values = newValues;
```

### UnnecessaryLocalVariable
Local variable `numSections` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashSet.java`
#### Snippet
```java
        checkArgument(shrinkFactor > 1);

        int numSections = concurrencyLevel;
        int perSectionExpectedItems = expectedItems / numSections;
        int perSectionCapacity = (int) (perSectionExpectedItems / mapFillFactor);
```

### UnnecessaryLocalVariable
Local variable `numSections` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java
        checkArgument(shrinkFactor > 1);

        int numSections = concurrencyLevel;
        int perSectionExpectedItems = expectedItems / numSections;
        int perSectionCapacity = (int) (perSectionExpectedItems / mapFillFactor);
```

### UnnecessaryLocalVariable
Local variable `newTable` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentOpenHashMap.java`
#### Snippet
```java

        private void shrinkToInitCapacity() {
            Object[] newTable = new Object[2 * initCapacity];

            table = newTable;
```

### UnnecessaryLocalVariable
Local variable `numSections` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongHashMap.java`
#### Snippet
```java
        checkArgument(shrinkFactor > 1);

        int numSections = concurrencyLevel;
        int perSectionExpectedItems = expectedItems / numSections;
        int perSectionCapacity = (int) (perSectionExpectedItems / mapFillFactor);
```

### UnnecessaryLocalVariable
Local variable `e` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerDirsManager.java`
#### Snippet
```java
        if (writableLedgerDirectories.isEmpty()) {
            String errMsg = "All ledger directories are non writable";
            NoWritableLedgerDirException e = new NoWritableLedgerDirException(
                    errMsg);
            throw e;
```

### UnnecessaryLocalVariable
Local variable `numSections` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongHashSet.java`
#### Snippet
```java
        checkArgument(shrinkFactor > 1);

        int numSections = concurrencyLevel;
        int perSectionExpectedItems = expectedItems / numSections;
        int perSectionCapacity = (int) (perSectionExpectedItems / SetFillFactor);
```

### UnnecessaryLocalVariable
Local variable `metadata` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/EntryLogMetadata.java`
#### Snippet
```java

        public static EntryLogMetadataRecyclable get() {
            EntryLogMetadataRecyclable metadata = RECYCLER.get();
            return metadata;
        }
```

### UnnecessaryLocalVariable
Local variable `lastEntry` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerCacheImpl.java`
#### Snippet
```java
        // last in mem entry and only then attempt to get the last persisted entry from the file
        // The latter is just an optimization
        long lastEntry = indexPersistenceManager.getPersistEntryBeyondInMem(ledgerId, lastEntryInMem);
        return lastEntry;
    }
```

### UnnecessaryLocalVariable
Local variable `metadata` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/PersistentEntryLogMetadataMap.java`
#### Snippet
```java
        localBais.reset();
        localDatais.reset();
        EntryLogMetadataRecyclable metadata = EntryLogMetadata.deserialize(datais.get());
        return metadata;
    }
```

### UnnecessaryLocalVariable
Local variable `numSections` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/collections/ConcurrentLongLongPairHashMap.java`
#### Snippet
```java
        checkArgument(shrinkFactor > 1);

        int numSections = concurrencyLevel;
        int perSectionExpectedItems = expectedItems / numSections;
        int perSectionCapacity = (int) (perSectionExpectedItems / mapFillFactor);
```

### UnnecessaryLocalVariable
Local variable `bytesToRead` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/directentrylogger/DirectReader.java`
#### Snippet
```java

        long bufferOffset = 0;
        long bytesToRead = Math.min(blockSize, bytesAvailable);
        long bytesOutstanding = bytesToRead;
        long bytesRead = -1;
```

### UnnecessaryLocalVariable
Local variable `firstIndex` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/datainteg/WriteSets.java`
#### Snippet
```java
        ImmutableList.Builder<Integer> builder =
            new ImmutableList.Builder<Integer> ();
        int firstIndex = offset;
        int lastIndex = (offset + writeQuorumSize - 1) % ensembleSize;
        for (Integer i : preferredOrder) {
```

### UnnecessaryLocalVariable
Local variable `bn` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
                    continue;
                }
                BookieNode bn = (BookieNode) n;
                return bn;
            }
```

### UnnecessaryLocalVariable
Local variable `newEnsembleResult` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/RackawareEnsemblePlacementPolicyImpl.java`
#### Snippet
```java
            Set<BookieId> comprehensiveExclusionBookiesSet = addDefaultRackBookiesIfMinNumRacksIsEnforced(
                    excludeBookies);
            PlacementResult<List<BookieId>> newEnsembleResult = newEnsembleInternal(ensembleSize,
                    writeQuorumSize, ackQuorumSize, comprehensiveExclusionBookiesSet, null, null);
            return newEnsembleResult;
```

### UnnecessaryLocalVariable
Local variable `mse` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookieWatcherImpl.java`
#### Snippet
```java
            return new BKInterruptedException();
        } else {
            MetaStoreException mse = new MetaStoreException(cause);
            return mse;
        }
```

### UnnecessaryLocalVariable
Local variable `ret` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/streaming/LedgerInputStream.java`
#### Snippet
```java
        }
        if (toread) {
            int ret = 0xFF & bytebuff.get();
            return ret;
        }
```

### UnnecessaryLocalVariable
Local variable `gracePeriod` is redundant
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/ReplicationWorker.java`
#### Snippet
```java
     */
    private void deferLedgerLockRelease(final long ledgerId) {
        long gracePeriod = this.openLedgerRereplicationGracePeriod;
        TimerTask timerTask = new TimerTask() {
            @Override
```

### UnnecessaryLocalVariable
Local variable `rangeResp` is redundant
in `stream/storage/impl/src/main/java/org/apache/bookkeeper/stream/storage/impl/kv/TableStoreImpl.java`
#### Snippet
```java
            .thenApply(result -> {
                try {
                    RangeResponse rangeResp = processRangeResult(
                        rangeReq.getHeader(),
                        result);
```

### UnnecessaryLocalVariable
Local variable `result` is redundant
in `stream/clients/java/kv/src/main/java/org/apache/bookkeeper/clients/impl/kv/KvUtils.java`
#### Snippet
```java
        ResultFactory<ByteBuf, ByteBuf> resultFactory,
        KeyValueFactory<ByteBuf, ByteBuf> kvFactory) {
        IncrementResultImpl<ByteBuf, ByteBuf> result = resultFactory.newIncrementResult(-1L)
            .totalAmount(response.getTotalAmount());
        return result;
```

### UnnecessaryLocalVariable
Local variable `res` is redundant
in `native-io/src/main/java/org/apache/bookkeeper/common/util/nativeio/NativeIOImpl.java`
#### Snippet
```java
    @Override
    public int open(String pathname, int flags, int mode) throws NativeIOException {
        int res = NativeIOJni.open(pathname, flags, mode);
        return res;
    }
```

### UnnecessaryLocalVariable
Local variable `dataOffset` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/EnvelopedEntryWriter.java`
#### Snippet
```java
        }

        int dataOffset = HEADER_LENGTH;
        int dataLen = buffer.readableBytes() - HEADER_LENGTH;

```

### UnnecessaryLocalVariable
Local variable `periodicFlushFrequency` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/BKLogSegmentWriter.java`
#### Snippet
```java
        final int configuredPeriodicFlushFrequency = dynConf.getPeriodicFlushFrequencyMilliSeconds();
        if (!immediateFlushEnabled || (0 != this.transmissionThreshold)) {
            int periodicFlushFrequency = configuredPeriodicFlushFrequency;
            if (periodicFlushFrequency > 0 && scheduler != null) {
                periodicFlushSchedule = scheduler.scheduleAtFixedRate(this,
```

### UnnecessaryLocalVariable
Local variable `lock` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/impl/metadata/ZKLogStreamMetadataStore.java`
#### Snippet
```java
        return ensureReadLockPathExist(metadata, readLockPath)
            .thenApplyAsync((value) -> {
                DistributedLock lock = new ZKDistributedLock(
                    getLockStateExecutor(true),
                    getLockFactory(true),
```

### UnnecessaryLocalVariable
Local variable `dlNamespace` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/auditor/DLAuditor.java`
#### Snippet
```java
                int i = 0;
                for (final Namespace namespace : namespaces) {
                    final Namespace dlNamespace = namespace;
                    final URI uri = uris.get(i);
                    final List<String> aps = allocationPaths.get(i);
```

## RuleId[id=BusyWait]
### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
            int i = 0;
            while (this.counter.get() > 0) {
                Thread.sleep(1000);
                i++;
                if (i > 30) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchThroughputLatency.java`
#### Snippet
```java
                    try {
                        while (true) {
                            Thread.sleep(1000);
                            LOG.info("ms: {} req: {}", System.currentTimeMillis(), completedRequests.getAndSet(0));
                        }
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchReadThroughputLatency.java`
#### Snippet
```java
                        break;
                    } else {
                        Thread.sleep(1000);
                        continue;
                    }
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-benchmark/src/main/java/org/apache/bookkeeper/benchmark/BenchReadThroughputLatency.java`
#### Snippet
```java
                lh.close();
                lh = null;
                Thread.sleep(1000);
            }
        } catch (InterruptedException ie) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java
                LOG.info("TGT refresh sleeping until: {}", until);
                try {
                    Thread.sleep(nextRefresh - now);
                } catch (InterruptedException ie) {
                    Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java
                            // sleep for 10 seconds
                            try {
                                Thread.sleep(10 * 1000);
                            } catch (InterruptedException ie) {
                                Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/sasl/TGTRefreshThread.java`
#### Snippet
```java
                            // sleep for 10 seconds.
                            try {
                                Thread.sleep(10 * 1000);
                            } catch (InterruptedException e) {
                                Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
            }
            try {
                Thread.sleep(250);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/LocalBookKeeper.java`
#### Snippet
```java
                    lb.start();
                    while (true) {
                        Thread.sleep(1000);
                    }
                } catch (InterruptedException ie) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieServer.java`
#### Snippet
```java
            while (true) {
                try {
                    Thread.sleep(watchInterval);
                } catch (InterruptedException ie) {
                    // do nothing
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/proto/BookieNettyServer.java`
#### Snippet
```java
                    while (suspended && isRunning()) {
                        try {
                            Thread.sleep(10);
                        } catch (InterruptedException e) {
                            Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/GarbageCollectorThread.java`
#### Snippet
```java
        while (!compacting.compareAndSet(false, true)) {
            // Wait till the thread stops compacting
            Thread.sleep(100);
        }

```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/storage/ldb/SingleDirectoryDbLedgerStorage.java`
#### Snippet
```java
            // Wait some time and try again
            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/BookKeeperAdmin.java`
#### Snippet
```java
            int sleepTimeForThisCheck = (long) ledgers.size() * sleepTimePerLedger > maxSleepTimeInBetweenChecks
                    ? maxSleepTimeInBetweenChecks : ledgers.size() * sleepTimePerLedger;
            Thread.sleep(sleepTimeForThisCheck);
            if (LOG.isDebugEnabled()) {
                LOG.debug("Making sure following ledgers replication to be completed: {}", ledgers);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/replication/AutoRecoveryMain.java`
#### Snippet
```java
            while (true) {
                try {
                    Thread.sleep(watchInterval);
                } catch (InterruptedException ie) {
                    Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/LocalDLMEmulator.java`
#### Snippet
```java
                        LOG.info("{} bookies are started.", numBookies);
                        while (true) {
                            Thread.sleep(1000);
                        }
                    } finally {
```

## RuleId[id=RedundantFileCreation]
### RedundantFileCreation
`new File` is redundant
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/tools/DistributedLogTool.java`
#### Snippet
```java

                    br = new BufferedReader(new InputStreamReader(
                            new FileInputStream(new File(cmdline.getOptionValue("lf"))), UTF_8.name()));
                    String line;
                    while ((line = br.readLine()) != null) {
```

## RuleId[id=ArraysAsListWithZeroOrOneArgument]
### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/discover/BookieServiceInfoUtils.java`
#### Snippet
```java
        endpoint.setAuth(Collections.emptyList());
        endpoint.setExtensions(Collections.emptyList());
        return new BookieServiceInfo(Collections.emptyMap(), Arrays.asList(endpoint));
    }

```

## RuleId[id=UseBulkOperation]
### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `stream/common/src/main/java/org/apache/bookkeeper/common/resolver/ServiceNameResolverProvider.java`
#### Snippet
```java
                List<String> hostList = new ArrayList<>();
                for (String host : hosts) {
                    hostList.add(host);
                }
                List<URI> hostUris = Lists.transform(
```

### UseBulkOperation
Iteration can be replaced with bulk 'Map.putAll()' call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/util/SnapshotMap.java`
#### Snippet
```java
        // merging the updates to snapshot
        for (Map.Entry<K, V> entry : updatesToMerge.entrySet()) {
            snapshot.put(entry.getKey(), entry.getValue());
        }
        // clear updatesToMerge
```

### UseBulkOperation
Iteration can be replaced with bulk 'Map.putAll()' call
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DefaultEnsemblePlacementPolicy.java`
#### Snippet
```java
        try {
            for (Map.Entry<BookieId, BookieInfo> e : bookieInfoMap.entrySet()) {
                this.bookieInfoMap.put(e.getKey(), e.getValue());
            }
            this.weightedSelection.updateMap(this.bookieInfoMap);
```

## RuleId[id=UnstableApiUsage]
### UnstableApiUsage
'com.google.common.net.HostAndPort' is marked unstable with @Beta
in `stats/bookkeeper-stats-providers/codahale-metrics-provider/src/main/java/org/apache/bookkeeper/stats/codahale/CodahaleMetricsProvider.java`
#### Snippet
```java
        if (!Strings.isNullOrEmpty(graphiteHost)) {
            LOG.info("Configuring stats with graphite");
            HostAndPort addr = HostAndPort.fromString(graphiteHost);
            final Graphite graphite = new Graphite(
                    new InetSocketAddress(addr.getHost(), addr.getPort()));
```

### UnstableApiUsage
'com.google.common.net.HostAndPort' is marked unstable with @Beta
in `stats/bookkeeper-stats-providers/codahale-metrics-provider/src/main/java/org/apache/bookkeeper/stats/codahale/CodahaleMetricsProvider.java`
#### Snippet
```java
        if (!Strings.isNullOrEmpty(graphiteHost)) {
            LOG.info("Configuring stats with graphite");
            HostAndPort addr = HostAndPort.fromString(graphiteHost);
            final Graphite graphite = new Graphite(
                    new InetSocketAddress(addr.getHost(), addr.getPort()));
```

### UnstableApiUsage
'fromString(java.lang.String)' is declared in unstable class 'com.google.common.net.HostAndPort' marked with @Beta
in `stats/bookkeeper-stats-providers/codahale-metrics-provider/src/main/java/org/apache/bookkeeper/stats/codahale/CodahaleMetricsProvider.java`
#### Snippet
```java
        if (!Strings.isNullOrEmpty(graphiteHost)) {
            LOG.info("Configuring stats with graphite");
            HostAndPort addr = HostAndPort.fromString(graphiteHost);
            final Graphite graphite = new Graphite(
                    new InetSocketAddress(addr.getHost(), addr.getPort()));
```

### UnstableApiUsage
'getHost()' is declared in unstable class 'com.google.common.net.HostAndPort' marked with @Beta
in `stats/bookkeeper-stats-providers/codahale-metrics-provider/src/main/java/org/apache/bookkeeper/stats/codahale/CodahaleMetricsProvider.java`
#### Snippet
```java
            HostAndPort addr = HostAndPort.fromString(graphiteHost);
            final Graphite graphite = new Graphite(
                    new InetSocketAddress(addr.getHost(), addr.getPort()));
            reporters.add(GraphiteReporter.forRegistry(getMetrics())
                          .prefixedWith(prefix)
```

### UnstableApiUsage
'getPort()' is declared in unstable class 'com.google.common.net.HostAndPort' marked with @Beta
in `stats/bookkeeper-stats-providers/codahale-metrics-provider/src/main/java/org/apache/bookkeeper/stats/codahale/CodahaleMetricsProvider.java`
#### Snippet
```java
            HostAndPort addr = HostAndPort.fromString(graphiteHost);
            final Graphite graphite = new Graphite(
                    new InetSocketAddress(addr.getHost(), addr.getPort()));
            reporters.add(GraphiteReporter.forRegistry(getMetrics())
                          .prefixedWith(prefix)
```

### UnstableApiUsage
'com.google.common.base.Utf8' is marked unstable with @Beta
in `stream/common/src/main/java/org/apache/bookkeeper/common/coder/StringUtf8Coder.java`
#### Snippet
```java
    @Override
    public int getSerializedSize(String value) {
        return Utf8.encodedLength(value);
    }

```

### UnstableApiUsage
'encodedLength(java.lang.CharSequence)' is declared in unstable class 'com.google.common.base.Utf8' marked with @Beta
in `stream/common/src/main/java/org/apache/bookkeeper/common/coder/StringUtf8Coder.java`
#### Snippet
```java
    @Override
    public int getSerializedSize(String value) {
        return Utf8.encodedLength(value);
    }

```

### UnstableApiUsage
'com.google.common.net.InetAddresses' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieSocketAddress.java`
#### Snippet
```java
            throw new UnknownHostException(addr);
        }
        if (InetAddresses.isInetAddress(hostname)) {
            socketAddress = Optional.of(new InetSocketAddress(hostname, port));
        } else {
```

### UnstableApiUsage
'isInetAddress(java.lang.String)' is declared in unstable class 'com.google.common.net.InetAddresses' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieSocketAddress.java`
#### Snippet
```java
            throw new UnknownHostException(addr);
        }
        if (InetAddresses.isInetAddress(hostname)) {
            socketAddress = Optional.of(new InetSocketAddress(hostname, port));
        } else {
```

### UnstableApiUsage
'com.google.common.net.InetAddresses' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieSocketAddress.java`
#### Snippet
```java
         * nodes HostName is considered static.
         */
        if (InetAddresses.isInetAddress(hostname)) {
            socketAddress = Optional.of(new InetSocketAddress(hostname, port));
        } else {
```

### UnstableApiUsage
'isInetAddress(java.lang.String)' is declared in unstable class 'com.google.common.net.InetAddresses' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/net/BookieSocketAddress.java`
#### Snippet
```java
         * nodes HostName is considered static.
         */
        if (InetAddresses.isInetAddress(hostname)) {
            socketAddress = Optional.of(new InetSocketAddress(hostname, port));
        } else {
```

### UnstableApiUsage
'com.google.common.net.InetAddresses' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/helpers/CommandHelpers.java`
#### Snippet
```java
            String realHostname;
            String ip;
            if (InetAddresses.isInetAddress(hostname)){
                ip = hostname;
                realHostname = networkAddress.getSocketAddress().getAddress().getCanonicalHostName();
```

### UnstableApiUsage
'isInetAddress(java.lang.String)' is declared in unstable class 'com.google.common.net.InetAddresses' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/tools/cli/helpers/CommandHelpers.java`
#### Snippet
```java
            String realHostname;
            String ip;
            if (InetAddresses.isInetAddress(hostname)){
                ip = hostname;
                realHostname = networkAddress.getSocketAddress().getAddress().getCanonicalHostName();
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java`
#### Snippet
```java
    @Override
    @SuppressFBWarnings("RCN_REDUNDANT_NULLCHECK_WOULD_HAVE_BEEN_A_NPE")
    public List<DetectedInconsistency> localConsistencyCheck(Optional<RateLimiter> rateLimiter) throws IOException {
        long checkStart = MathUtils.nowInNano();
        LOG.info("Starting localConsistencyCheck");
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java`
#### Snippet
```java
                        long start = MathUtils.nowInNano();
                        lep.getEntries((entry, offset) -> {
                            rateLimiter.ifPresent(RateLimiter::acquire);

                            try {
```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/InterleavedLedgerStorage.java`
#### Snippet
```java
                        long start = MathUtils.nowInNano();
                        lep.getEntries((entry, offset) -> {
                            rateLimiter.ifPresent(RateLimiter::acquire);

                            try {
```

### UnstableApiUsage
'tryAcquire(int, long, java.util.concurrent.TimeUnit)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/AbstractLogCompactor.java`
#### Snippet
```java
        // acquire. if bybytes: bytes of this entry; if byentries: 1.
        boolean tryAcquire(int permits, long timeout, TimeUnit unit) {
            return rateLimiter.tryAcquire(this.isThrottleByBytes ? permits : 1, timeout, unit);
        }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/AbstractLogCompactor.java`
#### Snippet
```java
        Throttler(ServerConfiguration conf) {
            this.isThrottleByBytes  = conf.getIsThrottleByBytes();
            this.rateLimiter = RateLimiter.create(this.isThrottleByBytes
                ? conf.getCompactionRateByBytes() : conf.getCompactionRateByEntries());
        }
```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/AbstractLogCompactor.java`
#### Snippet
```java
        Throttler(ServerConfiguration conf) {
            this.isThrottleByBytes  = conf.getIsThrottleByBytes();
            this.rateLimiter = RateLimiter.create(this.isThrottleByBytes
                ? conf.getCompactionRateByBytes() : conf.getCompactionRateByEntries());
        }
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/AbstractLogCompactor.java`
#### Snippet
```java
     */
    public static class Throttler {
        private final RateLimiter rateLimiter;
        private final boolean isThrottleByBytes;
        private final AtomicBoolean cancelled = new AtomicBoolean(false);
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/SortedLedgerStorage.java`
#### Snippet
```java

    @Override
    public List<DetectedInconsistency> localConsistencyCheck(Optional<RateLimiter> rateLimiter) throws IOException {
        return interleavedLedgerStorage.localConsistencyCheck(rateLimiter);
    }
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/bookie/LedgerStorage.java`
#### Snippet
```java
     * @throws IOException
     */
    default List<DetectedInconsistency> localConsistencyCheck(Optional<RateLimiter> rateLimiter) throws IOException {
        return new ArrayList<>();
    }
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/UpdateLedgerOp.java`
#### Snippet
```java
        final Set<CompletableFuture<?>> outstanding =
            Collections.newSetFromMap(new ConcurrentHashMap<CompletableFuture<?>, Boolean>());
        final RateLimiter throttler = RateLimiter.create(rate);
        final Semaphore outstandingReads = new Semaphore(maxOutstandingReads);
        final Iterator<Long> ledgerItr = admin.listLedgers().iterator();
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/UpdateLedgerOp.java`
#### Snippet
```java
        final Set<CompletableFuture<?>> outstanding =
            Collections.newSetFromMap(new ConcurrentHashMap<CompletableFuture<?>, Boolean>());
        final RateLimiter throttler = RateLimiter.create(rate);
        final Semaphore outstandingReads = new Semaphore(maxOutstandingReads);
        final Iterator<Long> ledgerItr = admin.listLedgers().iterator();
```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/UpdateLedgerOp.java`
#### Snippet
```java
        final Set<CompletableFuture<?>> outstanding =
            Collections.newSetFromMap(new ConcurrentHashMap<CompletableFuture<?>, Boolean>());
        final RateLimiter throttler = RateLimiter.create(rate);
        final Semaphore outstandingReads = new Semaphore(maxOutstandingReads);
        final Iterator<Long> ledgerItr = admin.listLedgers().iterator();
```

### UnstableApiUsage
'com.google.common.math.Quantiles.ScaleAndIndex' is declared in unstable class 'com.google.common.math.Quantiles' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DynamicWeightedRandomSelectionImpl.java`
#### Snippet
```java
                ArrayList<Long> weightList = selectedNodes.stream().map(weightFunc)
                        .collect(Collectors.toCollection(ArrayList::new));
                ScaleAndIndex median = Quantiles.median();
                medianWeight = (long) median.compute(weightList);
            }
```

### UnstableApiUsage
'com.google.common.math.Quantiles' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DynamicWeightedRandomSelectionImpl.java`
#### Snippet
```java
                ArrayList<Long> weightList = selectedNodes.stream().map(weightFunc)
                        .collect(Collectors.toCollection(ArrayList::new));
                ScaleAndIndex median = Quantiles.median();
                medianWeight = (long) median.compute(weightList);
            }
```

### UnstableApiUsage
'median()' is declared in unstable class 'com.google.common.math.Quantiles' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DynamicWeightedRandomSelectionImpl.java`
#### Snippet
```java
                ArrayList<Long> weightList = selectedNodes.stream().map(weightFunc)
                        .collect(Collectors.toCollection(ArrayList::new));
                ScaleAndIndex median = Quantiles.median();
                medianWeight = (long) median.compute(weightList);
            }
```

### UnstableApiUsage
'compute(java.util.Collection)' is declared in unstable class 'com.google.common.math.Quantiles' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/DynamicWeightedRandomSelectionImpl.java`
#### Snippet
```java
                        .collect(Collectors.toCollection(ArrayList::new));
                ScaleAndIndex median = Quantiles.median();
                medianWeight = (long) median.compute(weightList);
            }

```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandleAdv.java`
#### Snippet
```java
    protected void doAsyncAddEntry(final PendingAddOp op) {
        if (throttler != null) {
            throttler.acquire();
        }

```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/PendingReadOp.java`
#### Snippet
```java
    void sendReadTo(int bookieIndex, BookieId to, LedgerEntryRequest entry) throws InterruptedException {
        if (lh.throttler != null) {
            lh.throttler.acquire();
        }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MetadataUpdateLoop.java`
#### Snippet
```java
    private final MetadataTransform transform;
    private final LocalValueUpdater updateLocalValue;
    private final RateLimiter throttler;

    private final String logContext;
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MetadataUpdateLoop.java`
#### Snippet
```java
            MetadataTransform transform,
            LocalValueUpdater updateLocalValue,
            RateLimiter throttler) {
        this.lm = lm;
        this.ledgerId = ledgerId;
```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/MetadataUpdateLoop.java`
#### Snippet
```java
                if (throttler != null) {
                    // throttler to control updates per second
                    throttler.acquire();
                }
                lm.writeLedgerMetadata(ledgerId, transformed, currentLocal.getVersion())
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java

        if (clientCtx.getConf().throttleValue > 0) {
            this.throttler = RateLimiter.create(clientCtx.getConf().throttleValue);
        } else {
            this.throttler = null;
```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java

        if (clientCtx.getConf().throttleValue > 0) {
            this.throttler = RateLimiter.create(clientCtx.getConf().throttleValue);
        } else {
            this.throttler = null;
```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
    protected void doAsyncAddEntry(final PendingAddOp op) {
        if (throttler != null) {
            throttler.acquire();
        }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerHandle.java`
#### Snippet
```java
    final DigestManager macManager;
    final DistributionSchedule distributionSchedule;
    final RateLimiter throttler;
    final LoadingCache<BookieId, Long> bookieFailureHistory;
    final BookiesHealthInfo bookiesHealthInfo;
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java

    static class Throttler {
        private final RateLimiter rateLimiter;

        Throttler(int throttleBytes) {
```

### UnstableApiUsage
'acquire(int)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
        // acquire. if bybytes: bytes of this entry; if byentries: 1.
        void acquire(int permits) {
            rateLimiter.acquire(permits);
        }
    }
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java

        Throttler(int throttleBytes) {
            this.rateLimiter = RateLimiter.create(throttleBytes);
        }

```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java

        Throttler(int throttleBytes) {
            this.rateLimiter = RateLimiter.create(throttleBytes);
        }

```

### UnstableApiUsage
'getRate()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
        // get rate of limiter for unit test
        double getRate() {
            return this.rateLimiter.getRate();
        }

```

### UnstableApiUsage
'setRate(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/client/LedgerFragmentReplicator.java`
#### Snippet
```java
        // reset rate of limiter before compact one entry log file
        void resetRate(int throttleBytes) {
            this.rateLimiter.setRate(throttleBytes);
        }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/service/ScrubberService.java`
#### Snippet
```java
    private final Random rng = new Random();
    private final long scrubPeriod;
    private final Optional<RateLimiter> scrubRateLimiter;
    private final AtomicBoolean stop = new AtomicBoolean(false);
    private final LedgerStorage ledgerStorage;
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/service/ScrubberService.java`
#### Snippet
```java

        double rateLimit = conf.getServerConf().getLocalScrubRateLimit();
        this.scrubRateLimiter = rateLimit == 0 ? Optional.empty() : Optional.of(RateLimiter.create(rateLimit));

        this.ledgerStorage = ledgerStorage;
```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/server/service/ScrubberService.java`
#### Snippet
```java

        double rateLimit = conf.getServerConf().getLocalScrubRateLimit();
        this.scrubRateLimiter = rateLimit == 0 ? Optional.empty() : Optional.of(RateLimiter.create(rateLimit));

        this.ledgerStorage = ledgerStorage;
```

### UnstableApiUsage
'com.google.common.hash.Hashing' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/Value.java`
#### Snippet
```java
    @Override
    public int hashCode() {
        HashFunction hf = Hashing.murmur3_32_fixed();
        Hasher hc = hf.newHasher();
        for (String key : fields.keySet()) {
```

### UnstableApiUsage
'murmur3_32_fixed()' is declared in unstable class 'com.google.common.hash.Hashing' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/Value.java`
#### Snippet
```java
    @Override
    public int hashCode() {
        HashFunction hf = Hashing.murmur3_32_fixed();
        Hasher hc = hf.newHasher();
        for (String key : fields.keySet()) {
```

### UnstableApiUsage
'com.google.common.hash.Hasher' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/Value.java`
#### Snippet
```java
    public int hashCode() {
        HashFunction hf = Hashing.murmur3_32_fixed();
        Hasher hc = hf.newHasher();
        for (String key : fields.keySet()) {
            hc.putString(key, Charset.defaultCharset());
```

### UnstableApiUsage
'newHasher()' is unstable because its signature references unstable interface 'com.google.common.hash.Hasher' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/Value.java`
#### Snippet
```java
    public int hashCode() {
        HashFunction hf = Hashing.murmur3_32_fixed();
        Hasher hc = hf.newHasher();
        for (String key : fields.keySet()) {
            hc.putString(key, Charset.defaultCharset());
```

### UnstableApiUsage
'putString(java.lang.CharSequence, java.nio.charset.Charset)' is declared in unstable interface 'com.google.common.hash.Hasher' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/Value.java`
#### Snippet
```java
        Hasher hc = hf.newHasher();
        for (String key : fields.keySet()) {
            hc.putString(key, Charset.defaultCharset());
        }
        return hc.hash().asInt();
```

### UnstableApiUsage
'hash()' is declared in unstable interface 'com.google.common.hash.Hasher' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/metastore/Value.java`
#### Snippet
```java
            hc.putString(key, Charset.defaultCharset());
        }
        return hc.hash().asInt();
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
                                           ZooCallable<T> proc,
                                           RetryPolicy retryPolicy,
                                           RateLimiter rateLimiter,
                                           OpStatsLogger statsLogger)
    throws KeeperException, InterruptedException {
```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooWorker.java`
#### Snippet
```java
                logger.debug("Execute {} at {} retry attempt.", proc, attempts);
                if (null != rateLimiter) {
                    rateLimiter.acquire();
                }
                result = proc.call();
```

### UnstableApiUsage
'com.google.common.io.MoreFiles' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
            if (dbDir.exists()) {
                try {
                    MoreFiles.deleteRecursively(dbDir.toPath(), RecursiveDeleteOption.ALLOW_INSECURE);
                } catch (IOException e) {
                    log.error("Failed to cleanup localStoreDir", e);
```

### UnstableApiUsage
'deleteRecursively(java.nio.file.Path, com.google.common.io.RecursiveDeleteOption...)' is declared in unstable class 'com.google.common.io.MoreFiles' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
            if (dbDir.exists()) {
                try {
                    MoreFiles.deleteRecursively(dbDir.toPath(), RecursiveDeleteOption.ALLOW_INSECURE);
                } catch (IOException e) {
                    log.error("Failed to cleanup localStoreDir", e);
```

### UnstableApiUsage
'com.google.common.io.RecursiveDeleteOption' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
            if (dbDir.exists()) {
                try {
                    MoreFiles.deleteRecursively(dbDir.toPath(), RecursiveDeleteOption.ALLOW_INSECURE);
                } catch (IOException e) {
                    log.error("Failed to cleanup localStoreDir", e);
```

### UnstableApiUsage
'ALLOW_INSECURE' is declared in unstable enum 'com.google.common.io.RecursiveDeleteOption' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/kv/RocksdbKVStore.java`
#### Snippet
```java
            if (dbDir.exists()) {
                try {
                    MoreFiles.deleteRecursively(dbDir.toPath(), RecursiveDeleteOption.ALLOW_INSECURE);
                } catch (IOException e) {
                    log.error("Failed to cleanup localStoreDir", e);
```

### UnstableApiUsage
'com.google.common.io.MoreFiles' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointInfo.java`
#### Snippet
```java
            Path checkpointPath = getCheckpointPath(dbPath);
            if (checkpointPath.toFile().exists()) {
                MoreFiles.deleteRecursively(checkpointPath, RecursiveDeleteOption.ALLOW_INSECURE);
            }
        } catch (IOException ioe) {
```

### UnstableApiUsage
'deleteRecursively(java.nio.file.Path, com.google.common.io.RecursiveDeleteOption...)' is declared in unstable class 'com.google.common.io.MoreFiles' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointInfo.java`
#### Snippet
```java
            Path checkpointPath = getCheckpointPath(dbPath);
            if (checkpointPath.toFile().exists()) {
                MoreFiles.deleteRecursively(checkpointPath, RecursiveDeleteOption.ALLOW_INSECURE);
            }
        } catch (IOException ioe) {
```

### UnstableApiUsage
'com.google.common.io.RecursiveDeleteOption' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointInfo.java`
#### Snippet
```java
            Path checkpointPath = getCheckpointPath(dbPath);
            if (checkpointPath.toFile().exists()) {
                MoreFiles.deleteRecursively(checkpointPath, RecursiveDeleteOption.ALLOW_INSECURE);
            }
        } catch (IOException ioe) {
```

### UnstableApiUsage
'ALLOW_INSECURE' is declared in unstable enum 'com.google.common.io.RecursiveDeleteOption' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointInfo.java`
#### Snippet
```java
            Path checkpointPath = getCheckpointPath(dbPath);
            if (checkpointPath.toFile().exists()) {
                MoreFiles.deleteRecursively(checkpointPath, RecursiveDeleteOption.ALLOW_INSECURE);
            }
        } catch (IOException ioe) {
```

### UnstableApiUsage
'com.google.common.io.MoreFiles' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksCheckpointer.java`
#### Snippet
```java
            }
            try {
                MoreFiles.deleteRecursively(
                    Paths.get(checkpointsDir.getAbsolutePath(), checkpoint),
                    RecursiveDeleteOption.ALLOW_INSECURE);
```

### UnstableApiUsage
'deleteRecursively(java.nio.file.Path, com.google.common.io.RecursiveDeleteOption...)' is declared in unstable class 'com.google.common.io.MoreFiles' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksCheckpointer.java`
#### Snippet
```java
            }
            try {
                MoreFiles.deleteRecursively(
                    Paths.get(checkpointsDir.getAbsolutePath(), checkpoint),
                    RecursiveDeleteOption.ALLOW_INSECURE);
```

### UnstableApiUsage
'com.google.common.io.RecursiveDeleteOption' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksCheckpointer.java`
#### Snippet
```java
                MoreFiles.deleteRecursively(
                    Paths.get(checkpointsDir.getAbsolutePath(), checkpoint),
                    RecursiveDeleteOption.ALLOW_INSECURE);
            } catch (IOException ioe) {
                log.warn("Failed to remove unused checkpoint {} from {}",
```

### UnstableApiUsage
'ALLOW_INSECURE' is declared in unstable enum 'com.google.common.io.RecursiveDeleteOption' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksCheckpointer.java`
#### Snippet
```java
                MoreFiles.deleteRecursively(
                    Paths.get(checkpointsDir.getAbsolutePath(), checkpoint),
                    RecursiveDeleteOption.ALLOW_INSECURE);
            } catch (IOException ioe) {
                log.warn("Failed to remove unused checkpoint {} from {}",
```

### UnstableApiUsage
'com.google.common.io.MoreFiles' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/fs/FSCheckpointManager.java`
#### Snippet
```java
    @Override
    public void deleteRecursively(String srcPath) throws IOException {
        MoreFiles.deleteRecursively(
            Paths.get(getFullyQualifiedPath(srcPath).getAbsolutePath()),
            RecursiveDeleteOption.ALLOW_INSECURE);
```

### UnstableApiUsage
'deleteRecursively(java.nio.file.Path, com.google.common.io.RecursiveDeleteOption...)' is declared in unstable class 'com.google.common.io.MoreFiles' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/fs/FSCheckpointManager.java`
#### Snippet
```java
    @Override
    public void deleteRecursively(String srcPath) throws IOException {
        MoreFiles.deleteRecursively(
            Paths.get(getFullyQualifiedPath(srcPath).getAbsolutePath()),
            RecursiveDeleteOption.ALLOW_INSECURE);
```

### UnstableApiUsage
'com.google.common.io.RecursiveDeleteOption' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/fs/FSCheckpointManager.java`
#### Snippet
```java
        MoreFiles.deleteRecursively(
            Paths.get(getFullyQualifiedPath(srcPath).getAbsolutePath()),
            RecursiveDeleteOption.ALLOW_INSECURE);
    }

```

### UnstableApiUsage
'ALLOW_INSECURE' is declared in unstable enum 'com.google.common.io.RecursiveDeleteOption' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/fs/FSCheckpointManager.java`
#### Snippet
```java
        MoreFiles.deleteRecursively(
            Paths.get(getFullyQualifiedPath(srcPath).getAbsolutePath()),
            RecursiveDeleteOption.ALLOW_INSECURE);
    }

```

### UnstableApiUsage
'copy(java.io.File, java.io.OutputStream)' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java

        try (OutputStream os = checkpointStore.openOutputStream(destPath)) {
            Files.copy(file, os);
        }
    }
```

### UnstableApiUsage
'copy(java.io.File, java.io.OutputStream)' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
        String destPath = RocksUtils.getDestPath(dbPrefix, checkpointId, getName());
        try (OutputStream os = checkpointStore.openOutputStream(destPath)) {
            Files.copy(file, os);
        }
    }
```

### UnstableApiUsage
'com.google.common.hash.Hashing' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
            String ckSum = "invalid-" + System.currentTimeMillis();
            try {
                ckSum = Files.asByteSource(file).hash(Hashing.sha256()).toString();
                return ckSum;
            } catch (IOException e) {
```

### UnstableApiUsage
'sha256()' is declared in unstable class 'com.google.common.hash.Hashing' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
            String ckSum = "invalid-" + System.currentTimeMillis();
            try {
                ckSum = Files.asByteSource(file).hash(Hashing.sha256()).toString();
                return ckSum;
            } catch (IOException e) {
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
                               Duration idleWait) throws IOException, TimeoutException {
        String remoteFilePath = getRemotePath(dbPrefix, checkpointId, true);
        CountingInputStream cis = new CountingInputStream(
            checkpointStore.openInputStream(remoteFilePath)
        );
```

### UnstableApiUsage
'CountingInputStream(java.io.InputStream)' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
                               Duration idleWait) throws IOException, TimeoutException {
        String remoteFilePath = getRemotePath(dbPrefix, checkpointId, true);
        CountingInputStream cis = new CountingInputStream(
            checkpointStore.openInputStream(remoteFilePath)
        );
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
                               Duration idleWait) throws IOException, TimeoutException {
        String remoteFilePath = getRemotePath(dbPrefix, checkpointId, true);
        CountingInputStream cis = new CountingInputStream(
            checkpointStore.openInputStream(remoteFilePath)
        );
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java

        while (!copyFuture.isDone()) {
            long lastCount = cis.getCount();
            try {
                // Wait of at most `idleWait` time for this to finish. If it is not done, we will get a
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/CheckpointFile.java`
#### Snippet
```java
                // Check if we made any progress
                long endMs = System.currentTimeMillis();
                long newCount = cis.getCount();
                log.info("Timeout waiting for copy: {} last-read {} current-read {} runtime(ms) {} ",
                    remoteFilePath, lastCount, newCount, endMs - startMs);
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java

        ZkRetryRunnable(RetryPolicy retryPolicy,
                        RateLimiter rateLimiter,
                        OpStatsLogger statsLogger) {
            this.worker = new ZooWorker(retryPolicy, statsLogger);
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java

        final ZooWorker worker;
        final RateLimiter rateLimiter;
        final Runnable that;

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        this.connectRetryPolicy = connectRetryPolicy;
        this.operationRetryPolicy = operationRetryPolicy;
        this.rateLimiter = rate > 0 ? RateLimiter.create(rate) : null;
        this.retryExecutor =
                Executors.newScheduledThreadPool(retryExecThreadCount,
```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        this.connectRetryPolicy = connectRetryPolicy;
        this.operationRetryPolicy = operationRetryPolicy;
        this.rateLimiter = rate > 0 ? RateLimiter.create(rate) : null;
        this.retryExecutor =
                Executors.newScheduledThreadPool(retryExecThreadCount,
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java

    // rate limiter
    private final RateLimiter rateLimiter;

    // retry polices
```

### UnstableApiUsage
'acquire()' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `bookkeeper-server/src/main/java/org/apache/bookkeeper/zookeeper/ZooKeeperClient.java`
#### Snippet
```java
        public void run() {
            if (null != rateLimiter) {
                rateLimiter.acquire();
            }
            zkRun();
```

### UnstableApiUsage
'com.google.common.io.MoreFiles' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksdbCheckpointTask.java`
#### Snippet
```java
            if (removeLocalCheckpointAfterSuccessfulCheckpoint && tempDir.exists()) {
                try {
                    MoreFiles.deleteRecursively(
                        Paths.get(tempDir.getAbsolutePath()),
                        RecursiveDeleteOption.ALLOW_INSECURE);
```

### UnstableApiUsage
'deleteRecursively(java.nio.file.Path, com.google.common.io.RecursiveDeleteOption...)' is declared in unstable class 'com.google.common.io.MoreFiles' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksdbCheckpointTask.java`
#### Snippet
```java
            if (removeLocalCheckpointAfterSuccessfulCheckpoint && tempDir.exists()) {
                try {
                    MoreFiles.deleteRecursively(
                        Paths.get(tempDir.getAbsolutePath()),
                        RecursiveDeleteOption.ALLOW_INSECURE);
```

### UnstableApiUsage
'com.google.common.io.RecursiveDeleteOption' is marked unstable with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksdbCheckpointTask.java`
#### Snippet
```java
                    MoreFiles.deleteRecursively(
                        Paths.get(tempDir.getAbsolutePath()),
                        RecursiveDeleteOption.ALLOW_INSECURE);
                } catch (IOException ioe) {
                    log.warn("Failed to remove temporary checkpoint dir {}", tempDir, ioe);
```

### UnstableApiUsage
'ALLOW_INSECURE' is declared in unstable enum 'com.google.common.io.RecursiveDeleteOption' marked with @Beta
in `stream/statelib/src/main/java/org/apache/bookkeeper/statelib/impl/rocksdb/checkpoint/RocksdbCheckpointTask.java`
#### Snippet
```java
                    MoreFiles.deleteRecursively(
                        Paths.get(tempDir.getAbsolutePath()),
                        RecursiveDeleteOption.ALLOW_INSECURE);
                } catch (IOException ioe) {
                    log.warn("Failed to remove temporary checkpoint dir {}", tempDir, ioe);
```

### UnstableApiUsage
'platformThreadFactory()' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/ExecutorUtils.java`
#### Snippet
```java
     */
    public static ThreadFactory getThreadFactory(String nameFormat, boolean daemon) {
        ThreadFactory threadFactory = MoreExecutors.platformThreadFactory();
        return new ThreadFactoryBuilder()
            .setThreadFactory(threadFactory)
```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                            long initialDelay, long period, TimeUnit unit) {
        this.checkQueue(1);
```

### UnstableApiUsage
'scheduleAtFixedRate(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
                                                            long initialDelay, long period, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.scheduleAtFixedRate(command, initialDelay, period, unit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(command, delay, unit);
```

### UnstableApiUsage
'schedule(java.lang.Runnable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
    public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(command, delay, unit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(callable, delay, unit);
```

### UnstableApiUsage
'schedule(java.util.concurrent.Callable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
    public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.schedule(callable, delay, unit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java

    @Override
    public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                               long initialDelay, long delay, TimeUnit unit) {
        this.checkQueue(1);
```

### UnstableApiUsage
'scheduleAtFixedRate(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/BoundedScheduledExecutorService.java`
#### Snippet
```java
                                                               long initialDelay, long delay, TimeUnit unit) {
        this.checkQueue(1);
        return this.thread.scheduleAtFixedRate(command, initialDelay, delay, unit);
    }

```

### UnstableApiUsage
'scheduleAtFixedRate(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    public ScheduledFuture<?> scheduleAtFixedRateOrdered(Object orderingKey, Runnable command, long initialDelay,
            long period, TimeUnit unit) {
        return chooseThread(orderingKey).scheduleAtFixedRate(command, initialDelay, period, unit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                                       long initialDelay, long delay, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, delay, unit);
```

### UnstableApiUsage
'scheduleAtFixedRate(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            public ListenableScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                                       long initialDelay, long delay, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, delay, unit);
            }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
                return delegate.schedule(timedCallable(callable), delay, unit);
            }
```

### UnstableApiUsage
'schedule(java.util.concurrent.Callable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            @Override
            public <V> ListenableScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
                return delegate.schedule(timedCallable(callable), delay, unit);
            }

```

### UnstableApiUsage
'scheduleWithFixedDelay(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    public ScheduledFuture<?> scheduleWithFixedDelayOrdered(Object orderingKey, Runnable command, long initialDelay,
            long delay, TimeUnit unit) {
        return chooseThread(orderingKey).scheduleWithFixedDelay(command, initialDelay, delay, unit);
    }

```

### UnstableApiUsage
'schedule(java.lang.Runnable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
     */
    public ScheduledFuture<?> scheduleOrdered(Object orderingKey, Runnable command, long delay, TimeUnit unit) {
        return chooseThread(orderingKey).schedule(command, delay, unit);
    }

```

### UnstableApiUsage
'scheduleAtFixedRate(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    public ScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                  long initialDelay, long period, TimeUnit unit) {
        return chooseThread().scheduleAtFixedRate(command, initialDelay, period, unit);
    }

```

### UnstableApiUsage
'scheduleWithFixedDelay(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command,
                                                     long initialDelay, long delay, TimeUnit unit) {
        return chooseThread().scheduleWithFixedDelay(command, initialDelay, delay, unit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                                    long initialDelay, long period, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, period, unit);
```

### UnstableApiUsage
'scheduleAtFixedRate(java.lang.Runnable, long, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            public ListenableScheduledFuture<?> scheduleAtFixedRate(Runnable command,
                                                                    long initialDelay, long period, TimeUnit unit) {
                return delegate.scheduleAtFixedRate(timedRunnable(command), initialDelay, period, unit);
            }

```

### UnstableApiUsage
'com.google.common.util.concurrent.ListenableScheduledFuture' is marked unstable with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java

            @Override
            public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
                return delegate.schedule(timedRunnable(command), delay, unit);
            }
```

### UnstableApiUsage
'schedule(java.lang.Runnable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
            @Override
            public ListenableScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
                return delegate.schedule(timedRunnable(command), delay, unit);
            }

```

### UnstableApiUsage
'schedule(java.lang.Runnable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    @Override
    public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
        return chooseThread().schedule(command, delay, unit);
    }

```

### UnstableApiUsage
'schedule(java.util.concurrent.Callable, long, java.util.concurrent.TimeUnit)' is unstable because its signature references unstable interface 'com.google.common.util.concurrent.ListenableScheduledFuture' marked with @Beta
in `bookkeeper-common/src/main/java/org/apache/bookkeeper/common/util/OrderedScheduler.java`
#### Snippet
```java
    @Override
    public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
        return chooseThread().schedule(callable, delay, unit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * Get zookeeper access rate limit for zookeeper client used in bookkeeper client.
     *
     * <p>The rate limiter is basically a guava {@link com.google.common.util.concurrent.RateLimiter}.
     * It is rate limiting the requests that sent by zookeeper client. If the value is non-positive,
     * the rate limiting is disable. By default it is disable (value = 0).
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/DistributedLogConfiguration.java`
#### Snippet
```java
     * Get zookeeper access rate limit.
     *
     * <p>The rate limiter is basically a guava {@link com.google.common.util.concurrent.RateLimiter}.
     * It is rate limiting the requests that sent by zookeeper client. If the value is non-positive,
     * the rate limiting is disable. By default it is disable (value = 0).
```

### UnstableApiUsage
'com.google.common.io.Closeables' is marked unstable with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        }
        try {
            Closeables.close(closeable, true);
        } catch (IOException e) {
            // no-op. the exception is swallowed.
```

### UnstableApiUsage
'close(java.io.Closeable, boolean)' is declared in unstable class 'com.google.common.io.Closeables' marked with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/util/Utils.java`
#### Snippet
```java
        }
        try {
            Closeables.close(closeable, true);
        } catch (IOException e) {
            // no-op. the exception is swallowed.
```

### UnstableApiUsage
'tryAcquire(int)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/limiter/GuavaRateLimiter.java`
#### Snippet
```java
        checkState(permits >= 0);
        if (permits > 0) {
            return limiter.tryAcquire(permits);
        } else {
            return true;
```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/limiter/GuavaRateLimiter.java`
#### Snippet
```java
            effectiveLimit = Double.POSITIVE_INFINITY;
        }
        this.limiter = com.google.common.util.concurrent.RateLimiter.create(effectiveLimit);
    }

```

### UnstableApiUsage
'create(double)' is declared in unstable class 'com.google.common.util.concurrent.RateLimiter' marked with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/limiter/GuavaRateLimiter.java`
#### Snippet
```java
            effectiveLimit = Double.POSITIVE_INFINITY;
        }
        this.limiter = com.google.common.util.concurrent.RateLimiter.create(effectiveLimit);
    }

```

### UnstableApiUsage
'com.google.common.util.concurrent.RateLimiter' is marked unstable with @Beta
in `stream/distributedlog/core/src/main/java/org/apache/distributedlog/limiter/GuavaRateLimiter.java`
#### Snippet
```java
 */
public class GuavaRateLimiter implements RateLimiter {
    com.google.common.util.concurrent.RateLimiter limiter;

    public static RateLimiter of(int limit) {
```

