# james-project 
 
# Bad smells
I found 4517 bad smells with 68 repairable:
| ruleID | number | fixable |
| --- | --- | --- |
| OptionalUsedAsFieldOrParameterType | 1887 | false |
| JavadocDeclaration | 338 | false |
| SpringXmlModelInspection | 269 | false |
| FieldMayBeFinal | 159 | false |
| JavadocReference | 147 | false |
| DataFlowIssue | 144 | false |
| JavadocLinkAsPlainText | 119 | false |
| UNCHECKED_WARNING | 113 | false |
| UnstableApiUsage | 103 | false |
| OptionalGetWithoutIsPresent | 99 | false |
| DuplicatedCode | 97 | false |
| ConstantValue | 76 | false |
| SimplifyOptionalCallChains | 70 | false |
| UnusedAssignment | 68 | false |
| NullableProblems | 67 | false |
| IgnoreResultOfCall | 65 | false |
| FieldCanBeLocal | 57 | false |
| DuplicateThrows | 38 | false |
| MarkedForRemoval | 31 | false |
| StringBufferReplaceableByString | 27 | false |
| FinalMethodInFinalClass | 25 | false |
| RegExpRedundantEscape | 24 | false |
| DanglingJavadoc | 23 | false |
| RegExpUnnecessaryNonCapturingGroup | 20 | false |
| TrivialIf | 19 | false |
| DuplicateBranchesInSwitch | 16 | false |
| RegExpSimplifiable | 16 | false |
| UnnecessaryToStringCall | 16 | true |
| SpringPlaceholdersInspection | 15 | false |
| SpringBeanConstructorArgInspection | 14 | false |
| RedundantTypeArguments | 14 | false |
| RedundantCast | 14 | false |
| PointlessBooleanExpression | 14 | true |
| StringConcatenationInsideStringBufferAppend | 13 | false |
| EmptyStatementBody | 11 | false |
| UnnecessaryModifier | 10 | true |
| Deprecation | 10 | false |
| RedundantMethodOverride | 10 | false |
| ProtectedMemberInFinalClass | 10 | true |
| CharsetObjectCanBeUsed | 10 | false |
| AutoCloseableResource | 10 | false |
| SwitchStatementWithTooFewBranches | 10 | false |
| MismatchedJavadocCode | 10 | false |
| StringOperationCanBeSimplified | 9 | false |
| SimplifiableConditionalExpression | 9 | false |
| DeprecatedIsStillUsed | 9 | false |
| CommentedOutCode | 8 | false |
| SpringInjectionValueStyleInspection | 8 | false |
| ArraysAsListWithZeroOrOneArgument | 8 | false |
| MagicConstant | 7 | false |
| OptionalAssignedToNull | 7 | false |
| UnnecessarySemicolon | 7 | false |
| SpringXmlAutowireExplicitlyInspection | 7 | false |
| UnnecessaryLocalVariable | 7 | true |
| SpringJavaInjectionPointsAutowiringInspection | 6 | false |
| EqualsBetweenInconvertibleTypes | 6 | false |
| CatchMayIgnoreException | 6 | false |
| SimplifyStreamApiCallChains | 5 | false |
| IfStatementWithIdenticalBranches | 5 | false |
| OptionalIsPresent | 5 | false |
| SuspiciousMethodCalls | 5 | false |
| DuplicatedBeanNamesInspection | 5 | false |
| CastCanBeRemovedNarrowingVariableType | 5 | false |
| WebProperties | 4 | false |
| NonStrictComparisonCanBeEquality | 4 | true |
| UnnecessaryStringEscape | 4 | true |
| WrapperTypeMayBePrimitive | 3 | false |
| FinalStaticMethod | 3 | false |
| MismatchedCollectionQueryUpdate | 3 | false |
| BusyWait | 3 | false |
| UnnecessaryReturn | 3 | true |
| ReactorTransformationOnMonoVoid | 3 | false |
| MismatchedArrayReadWrite | 2 | false |
| TrivialStringConcatenation | 2 | false |
| DuplicateCondition | 2 | false |
| UnaryPlus | 2 | false |
| UnnecessaryCallToStringValueOf | 2 | false |
| CaughtExceptionImmediatelyRethrown | 2 | false |
| SynchronizationOnLocalVariableOrMethodParameter | 2 | false |
| IntegerDivisionInFloatingPointContext | 2 | false |
| LoopStatementsThatDontLoop | 2 | false |
| ManualMinMaxCalculation | 2 | false |
| ThrowFromFinallyBlock | 2 | false |
| RedundantStringFormatCall | 2 | false |
| ParameterCanBeLocal | 2 | false |
| ThrowableNotThrown | 2 | false |
| CloneableImplementsClone | 1 | false |
| StringEqualsCharSequence | 1 | false |
| RedundantEscapeInRegexReplacement | 1 | false |
| ArrayHashCode | 1 | false |
| InjectionValueTypeInspection | 1 | false |
| UseBulkOperation | 1 | false |
| NonFinalFieldInEnum | 1 | false |
| OctalLiteral | 1 | false |
| MalformedFormatString | 1 | false |
| SlowListContainsAll | 1 | false |
| SlowAbstractSetRemoveAll | 1 | false |
| ConfusingMainMethod | 1 | false |
| PointlessNullCheck | 1 | false |
| RedundantOperationOnEmptyContainer | 1 | false |
| RedundantLengthCheck | 1 | false |
| RedundantComparatorComparing | 1 | false |
| CopyConstructorMissesField | 1 | false |
## RuleId[id=WrapperTypeMayBePrimitive]
### WrapperTypeMayBePrimitive
Type may be primitive
in `mailet/ai/src/main/java/org/apache/james/ai/classic/TokenCounter.java`
#### Snippet
```java
    @Override
    protected void next(String token) {
        Integer value;

        if (countsByToken.containsKey(token)) {
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
                // This token has never been seen before,
                // we'll give it initially the default probability.
                Double corpusProbability = DEFAULT_TOKEN_PROBABILITY;
                tps.strength = Math.abs(0.5 - DEFAULT_TOKEN_PROBABILITY);
                boolean isTokenDegeneratedFound = false;
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/ConnectionPerIpLimitUpstreamHandler.java`
#### Snippet
```java
            }
        } else {
            Integer count = atomicCount.incrementAndGet();
            if (count > maxConnectionsPerIp) {
                ctx.channel().close();
```

## RuleId[id=UnnecessaryModifier]
### UnnecessaryModifier
Modifier `static` is redundant for inner enums
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/DefaultStager.java`
#### Snippet
```java
     * specifies ordering for a {@link DefaultStager}
     */
    public static enum Order {
        /**
         * FIFO
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `server/container/util/src/main/java/org/apache/james/util/LoggingLevel.java`
#### Snippet
```java
    private final  Function<Logger, BiConsumer<String, Object[]>> formatter;

    private LoggingLevel(Function<Logger, BiConsumer<String, Object[]>> formatter) {
        this.formatter = formatter;
    }
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ActionContext.java`
#### Snippet
```java
     * @return not nul
     */
    public String getServerInfo();
}

```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ActionContext.java`
#### Snippet
```java
     * @param mail not null
     */
    public void post(String uri, Mail mail) throws MessagingException;

    /**
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ActionContext.java`
#### Snippet
```java
     * @throws MessagingException when mail cannot be posted
     */
    public void post(Mail mail) throws MessagingException;

    /**
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/MailAction.java`
#### Snippet
```java
     * @throws MessagingException when action cannot be executed
     */
    public void execute(final Action action, final Mail mail, final ActionContext context) throws MessagingException;
}

```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/SpecialAddressKind.java`
#### Snippet
```java
    private String value;

    private SpecialAddressKind(String value) {
        this.value = value;
    }
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `server/apps/cli/src/main/java/org/apache/james/cli/probe/impl/JmxProbe.java`
#### Snippet
```java
public interface JmxProbe {

    public JmxProbe connect(JmxConnection jmxc) throws IOException;

}
```

### UnnecessaryModifier
Modifier `static` is redundant for inner enums
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Quotas.java`
#### Snippet
```java
    }

    public static enum Type {
        STORAGE,
        MESSAGE;
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Condition.java`
#### Snippet
```java
    Condition MATCH_ALL = new MatchAllCondition();

    public boolean matches(String line);
}

```

## RuleId[id=MismatchedArrayReadWrite]
### MismatchedArrayReadWrite
Contents of array `addresses` are written to, but never read
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/ProcessorUtil.java`
#### Snippet
```java
    public static void verifyMailAddresses(Collection<MailAddress> col) throws MessagingException {
        try {
            MailAddress[] addresses = col.toArray(MailAddress[]::new);

            // Why is this here? According to the javadoc for
```

### MismatchedArrayReadWrite
Contents of array `mailProtocolTests` are read, but never written to
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTestMojo.java`
#### Snippet
```java
     * @since 0.1
     */
    private MailProtocolTest[] mailProtocolTests;

    @Override
```

## RuleId[id=MagicConstant]
### MagicConstant
Should be one of: Calendar.JANUARY, Calendar.FEBRUARY, Calendar.MARCH, Calendar.APRIL, Calendar.MAY, ...
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearches.java`
#### Snippet
```java
        DateTime dateTime = new DateTimeParser(reader).parseAll();
        Calendar cal = getGMT(dateTime.getTimeZone());
        cal.set(dateTime.getYear(), dateTime.getMonth() - 1, dateTime.getDay(), dateTime.getHour(),
                dateTime.getMinute(), dateTime.getSecond());
        cal.set(Calendar.MILLISECOND, 0);
```

### MagicConstant
Should be one of: Calendar.JANUARY, Calendar.FEBRUARY, Calendar.MARCH, Calendar.APRIL, Calendar.MAY, ...
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/request/DayMonthYear.java`
#### Snippet
```java
    public final Date toDate() {
        Calendar cal = getGMT();
        cal.set(getYear(), getMonth() - 1,  getDay());
        return cal.getTime();
    }
```

### MagicConstant
Should be one of: Calendar.JANUARY, Calendar.FEBRUARY, Calendar.MARCH, Calendar.APRIL, Calendar.MAY, ...
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
            GregorianCalendar calendar = new GregorianCalendar(TimeZone.getTimeZone("GMT"), Locale.US);
            calendar.clear();
            calendar.set(year, month, day, hour, minute, second);
            return LocalDateTime.ofInstant(calendar.getTime().toInstant(), ZoneId.systemDefault());
        } else {
```

### MagicConstant
Should be one of: Pattern.UNIX_LINES, Pattern.CASE_INSENSITIVE, Pattern.COMMENTS, Pattern.MULTILINE, ... or their combination
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/PatternExtractor.java`
#### Snippet
```java
            throw new MailetException("Invalid expression: " + line);
        }
        return new ReplacingPattern(Pattern.compile(parts[PATTERN], extractOptions(parts[OPTIONS])), 
                extractRepeat(parts[OPTIONS]), 
                unescapeSubstitutions(parts[SUBSTITUTION]));
```

### MagicConstant
Should be one of: Calendar.JANUARY, Calendar.FEBRUARY, Calendar.MARCH, Calendar.APRIL, Calendar.MAY, ...
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    static {
        Calendar cal = Calendar.getInstance();
        cal.set(9999, 11, 31);
        MAX_DATE = cal.getTime();
        
```

### MagicConstant
Should be one of: Calendar.JANUARY, Calendar.FEBRUARY, Calendar.MARCH, Calendar.APRIL, Calendar.MAY, ...
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
        MAX_DATE = cal.getTime();
        
        cal.set(0000, 0, 1);
        MIN_DATE = cal.getTime();
    }
```

### MagicConstant
Should be one of: Calendar.JANUARY, Calendar.FEBRUARY, Calendar.MARCH, Calendar.APRIL, Calendar.MAY, ...
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
                            DateTime dateTime = new DateTimeParser(reader).parseAll();
                            Calendar cal = getGMT();
                            cal.set(dateTime.getYear(), dateTime.getMonth() - 1, dateTime.getDay(), dateTime.getHour(), dateTime.getMinute(), dateTime.getSecond());
                            sentDate = cal.getTime();

```

## RuleId[id=MarkedForRemoval]
### MarkedForRemoval
'org.apache.james.BlobStoreModulesChooser' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraBlobStoreModule.java`
#### Snippet
```java
    protected void configure() {
        bind(CassandraBlobStoreDAO.class).in(Scopes.SINGLETON);
        bind(BlobStoreDAO.class).annotatedWith(Names.named(UNENCRYPTED)).to(CassandraBlobStoreDAO.class);
    }
}
```

### MarkedForRemoval
'org.apache.james.BlobStoreModulesChooser' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraBlobStoreModule.java`
#### Snippet
```java
package org.apache.james;

import static org.apache.james.BlobStoreModulesChooser.UNENCRYPTED;

import org.apache.james.blob.api.BlobStoreDAO;
```

### MarkedForRemoval
'org.apache.james.BlobStoreModulesChooser' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraBlobStoreModule.java`
#### Snippet
```java
package org.apache.james;

import static org.apache.james.BlobStoreModulesChooser.UNENCRYPTED;

import org.apache.james.blob.api.BlobStoreDAO;
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java
    }

    public static List<Module> chooseModules(BlobStoreConfiguration choosingConfiguration) {
        return ImmutableList.<Module>builder()
            .add(chooseEncryptionModule(choosingConfiguration.getCryptoConfig()))
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java
    public static List<Module> chooseModules(BlobStoreConfiguration choosingConfiguration) {
        return ImmutableList.<Module>builder()
            .add(chooseEncryptionModule(choosingConfiguration.getCryptoConfig()))
            .addAll(chooseStoragePolicyModule(choosingConfiguration.storageStrategy()))
            .add(binder -> binder.bind(BlobStoreConfiguration.class).toInstance(choosingConfiguration))
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java
        return ImmutableList.<Module>builder()
            .add(chooseEncryptionModule(choosingConfiguration.getCryptoConfig()))
            .addAll(chooseStoragePolicyModule(choosingConfiguration.storageStrategy()))
            .add(binder -> binder.bind(BlobStoreConfiguration.class).toInstance(choosingConfiguration))
            .add(binder -> binder.bind(BlobStoreConfigurationValidationStartUpCheck.StorageStrategySupplier.class).toInstance(choosingConfiguration::storageStrategy))
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java
            .add(chooseEncryptionModule(choosingConfiguration.getCryptoConfig()))
            .addAll(chooseStoragePolicyModule(choosingConfiguration.storageStrategy()))
            .add(binder -> binder.bind(BlobStoreConfiguration.class).toInstance(choosingConfiguration))
            .add(binder -> binder.bind(BlobStoreConfigurationValidationStartUpCheck.StorageStrategySupplier.class).toInstance(choosingConfiguration::storageStrategy))
            .build();
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java
            .addAll(chooseStoragePolicyModule(choosingConfiguration.storageStrategy()))
            .add(binder -> binder.bind(BlobStoreConfiguration.class).toInstance(choosingConfiguration))
            .add(binder -> binder.bind(BlobStoreConfigurationValidationStartUpCheck.StorageStrategySupplier.class).toInstance(choosingConfiguration::storageStrategy))
            .build();
    }
```

### MarkedForRemoval
'org.apache.james.CassandraBlobStoreModule' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        new MailetProcessingModule(),
        new CassandraBucketModule(),
        new CassandraBlobStoreModule(),
        REQUIRE_TASK_MANAGER_MODULE,
        new TaskManagerModule(),
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        ExtraProperties.initialize();

        CassandraJamesServerConfiguration configuration = CassandraJamesServerConfiguration.builder()
            .useWorkingDirectoryEnvProperty()
            .build();
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        ExtraProperties.initialize();

        CassandraJamesServerConfiguration configuration = CassandraJamesServerConfiguration.builder()
            .useWorkingDirectoryEnvProperty()
            .build();
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        ExtraProperties.initialize();

        CassandraJamesServerConfiguration configuration = CassandraJamesServerConfiguration.builder()
            .useWorkingDirectoryEnvProperty()
            .build();
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java

        CassandraJamesServerConfiguration configuration = CassandraJamesServerConfiguration.builder()
            .useWorkingDirectoryEnvProperty()
            .build();

```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        CassandraJamesServerConfiguration configuration = CassandraJamesServerConfiguration.builder()
            .useWorkingDirectoryEnvProperty()
            .build();

        LOGGER.info("Loading configuration {}", configuration.toString());
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
    }

    public static GuiceJamesServer createServer(CassandraJamesServerConfiguration configuration) {
        return GuiceJamesServer.forConfiguration(configuration)
            .combineWith(ALL_BUT_JMX_CASSANDRA_MODULE)
```

### MarkedForRemoval
'org.apache.james.BlobStoreModulesChooser' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        return GuiceJamesServer.forConfiguration(configuration)
            .combineWith(ALL_BUT_JMX_CASSANDRA_MODULE)
            .combineWith(BlobStoreModulesChooser.chooseModules(configuration.getBlobStoreConfiguration()))
            .combineWith(SearchModuleChooser.chooseModules(configuration.searchConfiguration()))
            .combineWith(new UsersRepositoryModuleChooser(new CassandraUsersRepositoryModule())
```

### MarkedForRemoval
'org.apache.james.BlobStoreModulesChooser' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        return GuiceJamesServer.forConfiguration(configuration)
            .combineWith(ALL_BUT_JMX_CASSANDRA_MODULE)
            .combineWith(BlobStoreModulesChooser.chooseModules(configuration.getBlobStoreConfiguration()))
            .combineWith(SearchModuleChooser.chooseModules(configuration.searchConfiguration()))
            .combineWith(new UsersRepositoryModuleChooser(new CassandraUsersRepositoryModule())
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
        return GuiceJamesServer.forConfiguration(configuration)
            .combineWith(ALL_BUT_JMX_CASSANDRA_MODULE)
            .combineWith(BlobStoreModulesChooser.chooseModules(configuration.getBlobStoreConfiguration()))
            .combineWith(SearchModuleChooser.chooseModules(configuration.searchConfiguration()))
            .combineWith(new UsersRepositoryModuleChooser(new CassandraUsersRepositoryModule())
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
            .combineWith(ALL_BUT_JMX_CASSANDRA_MODULE)
            .combineWith(BlobStoreModulesChooser.chooseModules(configuration.getBlobStoreConfiguration()))
            .combineWith(SearchModuleChooser.chooseModules(configuration.searchConfiguration()))
            .combineWith(new UsersRepositoryModuleChooser(new CassandraUsersRepositoryModule())
                .chooseModules(configuration.getUsersRepositoryImplementation()))
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
            .combineWith(SearchModuleChooser.chooseModules(configuration.searchConfiguration()))
            .combineWith(new UsersRepositoryModuleChooser(new CassandraUsersRepositoryModule())
                .chooseModules(configuration.getUsersRepositoryImplementation()))
            .combineWith(chooseDeletedMessageVault(configuration.getVaultConfiguration()))
            .combineWith(chooseJmapModule(configuration));
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
            .combineWith(new UsersRepositoryModuleChooser(new CassandraUsersRepositoryModule())
                .chooseModules(configuration.getUsersRepositoryImplementation()))
            .combineWith(chooseDeletedMessageVault(configuration.getVaultConfiguration()))
            .combineWith(chooseJmapModule(configuration));
    }
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java
    }

    private static Module chooseJmapModule(CassandraJamesServerConfiguration configuration) {
        if (configuration.isJmapEnabled()) {
            return new JMAPListenerModule();
```

### MarkedForRemoval
'org.apache.james.CassandraJamesServerConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java

    private static Module chooseJmapModule(CassandraJamesServerConfiguration configuration) {
        if (configuration.isJmapEnabled()) {
            return new JMAPListenerModule();
        }
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
                () -> SearchConfiguration.parse(propertiesProvider)));

            BlobStoreConfiguration blobStoreConfiguration = this.blobStoreConfiguration.orElseGet(Throwing.supplier(
                () -> BlobStoreConfiguration.parse(propertiesProvider)));

```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java

            BlobStoreConfiguration blobStoreConfiguration = this.blobStoreConfiguration.orElseGet(Throwing.supplier(
                () -> BlobStoreConfiguration.parse(propertiesProvider)));

            FileConfigurationProvider configurationProvider = new FileConfigurationProvider(fileSystem, Basic.builder()
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java

            BlobStoreConfiguration blobStoreConfiguration = this.blobStoreConfiguration.orElseGet(Throwing.supplier(
                () -> BlobStoreConfiguration.parse(propertiesProvider)));

            FileConfigurationProvider configurationProvider = new FileConfigurationProvider(fileSystem, Basic.builder()
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        }

        public Builder blobStore(BlobStoreConfiguration blobStoreConfiguration) {
            this.blobStoreConfiguration = Optional.of(blobStoreConfiguration);
            return this;
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
    }

    public BlobStoreConfiguration getBlobStoreConfiguration() {
        return blobStoreConfiguration;
    }
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
    private final JamesDirectoriesProvider directories;
    private final SearchConfiguration searchConfiguration;
    private final BlobStoreConfiguration blobStoreConfiguration;
    private final UsersRepositoryModuleChooser.Implementation usersRepositoryImplementation;
    private final VaultConfiguration vaultConfiguration;
```

### MarkedForRemoval
'org.apache.james.BlobStoreConfiguration' is deprecated and marked for removal
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java

    private CassandraJamesServerConfiguration(ConfigurationPath configurationPath, JamesDirectoriesProvider directories,
                                              SearchConfiguration searchConfiguration, BlobStoreConfiguration blobStoreConfiguration,
                                              UsersRepositoryModuleChooser.Implementation usersRepositoryImplementation,
                                              VaultConfiguration vaultConfiguration, boolean jmapEnabled) {
```

## RuleId[id=EmptyStatementBody]
### EmptyStatementBody
`while` statement has empty body
in `mpt/core/src/main/java/org/apache/james/mpt/session/ExternalSession.java`
#### Snippet
```java
        monitor.debug("[Reading line]");
        readBuffer.flip();
        while (oneFromLine(buffer)) {
            ;
        }
```

### EmptyStatementBody
`if` statement has empty body
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSessionBuilder.java`
#### Snippet
```java
                session.sub(sessionNumber, unorderedLines, location,
                        lastClientMsg);
            } else if (line.startsWith(COMMENT_TAG)
                    || line.trim().length() == 0) {
                // ignore these lines.
```

### EmptyStatementBody
`if` statement has empty body
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/FileProtocolSessionBuilder.java`
#### Snippet
```java

                    session.sub(sessionNumber, unorderedLines, location, lastClientMsg);
                } else if (next.startsWith(COMMENT_TAG) || next.trim().length() == 0) {
                    // ignore these lines.
                } else if (next.startsWith(SESSION_TAG)) {
```

### EmptyStatementBody
`if` statement has empty body
in `mailet/ai/src/main/java/org/apache/james/ai/classic/Tokenizer.java`
#### Snippet
```java
                    break;
                }
            } else if (ch == '\r') { //NOPMD
                // cr found, ignore
            } else if (ch == '\n') {
```

### EmptyStatementBody
`while` statement has empty body
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
                inBuffer.compact();
                int i = 0;
                while ((i = source.read(inBuffer)) == 0) {
                    ;
                }
```

### EmptyStatementBody
`while` statement has empty body
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/AbstractMailboxSessionIdGenerator.java`
#### Snippet
```java
    public long nextId() {
        long id;
        while ((id = generateNextId()) == MailboxSession.SYSTEM_SESSION_ID) {
            // loop till the id is not 0L
            //
```

### EmptyStatementBody
`if` statement has empty body
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageManager.java`
#### Snippet
```java
            // delete the temporary file if one was specified
            if (file != null) {
                if (!file.delete()) {
                    // Don't throw an IOException. The message could be appended
                    // and the temporary file
```

### EmptyStatementBody
`while` statement has empty body
in `server/container/util/src/main/java/org/apache/james/util/io/InputStreamConsummer.java`
#### Snippet
```java
    public static void consume(InputStream inputStream) throws IOException {
        byte[] discard = new byte[4096];
        while (inputStream.read(discard) != -1) {
            // consume the rest of the stream
        }
```

### EmptyStatementBody
`if` statement has empty body
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     */
    protected void loadHeaders() throws MessagingException {
        if (headers != null) {
            // Another thread has already loaded these headers
        } else if (source != null) {
```

### EmptyStatementBody
`if` statement has empty body
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     */
    public void loadMessage() throws MessagingException {
        if (messageParsed) {
            // Another thread has already loaded this message
        } else if (source != null) {
```

### EmptyStatementBody
`while` statement has empty body
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
            char[] block = new char[4096];
            try (LineNumberReader counter = new LineNumberReader(isr)) {
                while (counter.read(block) > UNKNOWN) {
                    // Just keep reading
                }
```

## RuleId[id=CommentedOutCode]
### CommentedOutCode
Commented out code (2 lines)
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
            p *= theDoubleValue;
            np *= (1.0 - theDoubleValue);
            // System.out.println("Token " + tps + ", p=" + theDoubleValue +
            // ", overall p=" + p / (p + np));
        }
```

### CommentedOutCode
Commented out code (2 lines)
in `server/data/data-library/src/main/java/org/apache/james/repository/file/NumberedRepositoryFileFilter.java`
#### Snippet
```java
    @Override
    public boolean accept(File file, String name) {
        // System.out.println("check: " + name);
        // System.out.println("post: " + postfix);
        if (!name.endsWith(postfix)) {
```

### CommentedOutCode
Commented out code (2 lines)
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
    private SearchKey recent(ImapRequestLineReader request) throws DecodingException {
        final SearchKey result;
        //nextIsE(request);
        //nextIsC(request);
        nextIsE(request);
```

### CommentedOutCode
Commented out code (2 lines)
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
            }

            // MimeMessageUtil.writeToInternal(this, headerOs, bodyOs,
            // ignoreList);
            if (headers == null) {
```

### CommentedOutCode
Commented out code (2 lines)
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/HeadersToHTTP.java`
#### Snippet
```java
        } else {
            try {
                // targetUrl = targetUrl + ( targetUrl.contains("?") ? "&" :
                // "?") + parameterKey + "=" + parameterValue;
                url = new URL(targetUrl).toExternalForm();
```

### CommentedOutCode
Commented out code (2 lines)
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/SerialiseToHTTP.java`
#### Snippet
```java
        } else {
            try {
                // targetUrl = targetUrl + ( targetUrl.contains("?") ? "&" :
                // "?") + parameterKey + "=" + parameterValue;
                url = new URL(targetUrl).toExternalForm();
```

### CommentedOutCode
Commented out code (3 lines)
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/JsonpDeserializerBase.java`
#### Snippet
```java
            // Disabled for now. Only happens with the experimental Union2 and is caused by string and number
            // parsers leniency. Need to be replaced with a check on a preferred event type.
            //if (!Collections.disjoint(result, set)) {
            //    throw new IllegalArgumentException("Deserializer accepted events are not disjoint");
            //}
```

### CommentedOutCode
Commented out code (2 lines)
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java

            if (exists) {
                // MessageInputStream is = new
                // MessageInputStream(mc,sr,inMemorySizeLimit, true);
                updateMessage(mc, conn);
```

## RuleId[id=CloneableImplementsClone]
### CloneableImplementsClone
`MailHeaders` is 'Cloneable' but does not define 'clone()' method
in `server/container/core/src/main/java/org/apache/james/server/core/MailHeaders.java`
#### Snippet
```java
 * </pre>
 */
public class MailHeaders extends InternetHeaders implements Serializable, Cloneable {

    private static final long serialVersionUID = 238748126601L;
```

## RuleId[id=RegExpRedundantEscape]
### RegExpRedundantEscape
Redundant character escape `\\]` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Pre-compiled pattern used to cleanup a found URI string */
    private static final Pattern uriCleanup2 = Pattern.compile("[\\]\\)>#]$");

    /** Pre-compile pattern for identifying "mailto" patterns */
```

### RegExpRedundantEscape
Redundant character escape `\\)` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Pre-compiled pattern used to cleanup a found URI string */
    private static final Pattern uriCleanup2 = Pattern.compile("[\\]\\)>#]$");

    /** Pre-compile pattern for identifying "mailto" patterns */
```

### RegExpRedundantEscape
Redundant character escape `\]` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String domain_ref = label + "(?:" + period + label + ")*";

    private static final String domain_lit = open_br + "(?:" + dtext + "|" + quoted_pair + ")*" + close_br;

    private static final String domain = "(?:" + domain_ref + "|" + domain_lit + ")";
```

### RegExpRedundantEscape
Redundant character escape `\\/` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Pre-compile pattern for identifying "mailto" patterns */
    private static final Pattern uriCleanup3 = Pattern.compile("^(?i)mailto:([^\\/]{2})(.*)$");

    // These regular expressions also "inspired" by Spamassassin
```

### RegExpRedundantEscape
Redundant character escape `\\]` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String open_br = "\\[";

    private static final String close_br = "\\]";

    private static final String nonASCII = "\\x80-\\xff";
```

### RegExpRedundantEscape
Redundant character escape `\]` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String domain_lit = open_br + "(?:" + dtext + "|" + quoted_pair + ")*" + close_br;

    private static final String domain = "(?:" + domain_ref + "|" + domain_lit + ")";

    private static final String Addr_spec_re = "(?-xism:" + local_part + "\\s*\\@\\s*" + domain + ")";
```

### RegExpRedundantEscape
Redundant character escape `\\@` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String domain = "(?:" + domain_ref + "|" + domain_lit + ")";

    private static final String Addr_spec_re = "(?-xism:" + local_part + "\\s*\\@\\s*" + domain + ")";

    /** Pre-compiled pattern for matching "schemeless" mailto strings */
```

### RegExpRedundantEscape
Redundant character escape `\]` in RegExp
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String domain = "(?:" + domain_ref + "|" + domain_lit + ")";

    private static final String Addr_spec_re = "(?-xism:" + local_part + "\\s*\\@\\s*" + domain + ")";

    /** Pre-compiled pattern for matching "schemeless" mailto strings */
```

### RegExpRedundantEscape
Redundant character escape `\\<` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
    public String html2Text(String html) {
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
```

### RegExpRedundantEscape
Redundant character escape `\\>` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
    public String html2Text(String html) {
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
```

### RegExpRedundantEscape
Redundant character escape `\\<` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
```

### RegExpRedundantEscape
Redundant character escape `\\>` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
```

### RegExpRedundantEscape
Redundant character escape `\\<` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
```

### RegExpRedundantEscape
Redundant character escape `\\>` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
```

### RegExpRedundantEscape
Redundant character escape `\\<` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }
```

### RegExpRedundantEscape
Redundant character escape `\\>` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }
```

### RegExpRedundantEscape
Redundant character escape `\\<` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }

```

### RegExpRedundantEscape
Redundant character escape `\\>` in RegExp
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }

```

### RegExpRedundantEscape
Redundant character escape `\\*` in RegExp
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern FULL_SPLAT_PATTERN =
            Pattern.compile("[\\*][\\*]");
        private static final String FULL_SPLAT_REPLACEMENT = ".*";

```

### RegExpRedundantEscape
Redundant character escape `\\*` in RegExp
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern FULL_SPLAT_PATTERN =
            Pattern.compile("[\\*][\\*]");
        private static final String FULL_SPLAT_REPLACEMENT = ".*";

```

### RegExpRedundantEscape
Redundant character escape `\\}` in RegExp
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern NAME_SPLAT_PATTERN =
            Pattern.compile("\\{([^/]+?)\\}[\\*][\\*]");

        private static final Pattern NAME_PATTERN = Pattern.compile("\\{([^/]+?)\\}");
```

### RegExpRedundantEscape
Redundant character escape `\\*` in RegExp
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern NAME_SPLAT_PATTERN =
            Pattern.compile("\\{([^/]+?)\\}[\\*][\\*]");

        private static final Pattern NAME_PATTERN = Pattern.compile("\\{([^/]+?)\\}");
```

### RegExpRedundantEscape
Redundant character escape `\\*` in RegExp
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern NAME_SPLAT_PATTERN =
            Pattern.compile("\\{([^/]+?)\\}[\\*][\\*]");

        private static final Pattern NAME_PATTERN = Pattern.compile("\\{([^/]+?)\\}");
```

### RegExpRedundantEscape
Redundant character escape `\\}` in RegExp
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java
            Pattern.compile("\\{([^/]+?)\\}[\\*][\\*]");

        private static final Pattern NAME_PATTERN = Pattern.compile("\\{([^/]+?)\\}");
        // JDK 6 doesn't support named capture groups

```

## RuleId[id=SpringBeanConstructorArgInspection]
### SpringBeanConstructorArgInspection
No matching constructor found in class 'DNSJavaService'#treeend

*** ** * ** ***

|-----------------------------|---|-----------|
| **DNSJavaService(...):**    |   | **Bean:** |
| MetricFactory metricFactory |   | **???**   |
in `server/dns-service/dnsservice-dnsjava/src/main/resources/META-INF/spring/dns-context.xml`
#### Snippet
```java
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="dnsservice" class="org.apache.james.dnsservice.dnsjava.DNSJavaService"/>

</beans>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'RecipientRewriteTableManagement'#treeend

*** ** * ** ***

|-------------------------------------------|---|-----------|
| **RecipientRewriteTableManagement(...):** |   | **Bean:** |
| RecipientRewriteTable rrt                 |   | **???**   |
in `server/data/data-library/src/main/resources/META-INF/spring/data-context.xml`
#### Snippet
```java
   
    <bean id="domainlistmanagement" class="org.apache.james.domainlist.lib.DomainListManagement" />
    <bean id="recipientrewritetablemanagement" class="org.apache.james.rrt.lib.RecipientRewriteTableManagement" />
    <bean id="usersrepositorymanagement" class="org.apache.james.user.lib.UsersRepositoryManagement" />

```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'UserRepositoryAuthorizator'#treeend

*** ** * ** ***

|--------------------------------------|---|-----------|
| **UserRepositoryAuthorizator(...):** |   | **Bean:** |
| UsersRepository repos                |   | **???**   |
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-mailbox-authorizator.xml`
#### Snippet
```java
     -->

    <bean id="authorizator" class="org.apache.james.adapter.mailbox.UserRepositoryAuthorizator"/>

</beans>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'UserRepositoryAuthenticator'#treeend

*** ** * ** ***

|---------------------------------------|---|-----------|
| **UserRepositoryAuthenticator(...):** |   | **Bean:** |
| UsersRepository repos                 |   | **???**   |
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-mailbox-authenticator.xml`
#### Snippet
```java
     -->

    <bean id="authenticator" class="org.apache.james.adapter.mailbox.UserRepositoryAuthenticator"/>

    <bean id="user-entity-validator" class="org.apache.james.container.spring.resource.SpringUserEntityValidator"/>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'RecipientRewriteTableManagement'#treeend

*** ** * ** ***

|-------------------------------------------|---|-----------|
| **RecipientRewriteTableManagement(...):** |   | **Bean:** |
| RecipientRewriteTable rrt                 |   | **???**   |
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="usersrepositorymanagement" class="org.apache.james.user.lib.UsersRepositoryManagement"/>
    <bean id="recipientrewritetablemanagement" class="org.apache.james.rrt.lib.RecipientRewriteTableManagement"/>
    <bean id="domainlistmanagement" class="org.apache.james.domainlist.lib.DomainListManagement"/>
    <bean id="mailboxmanagermanagementbean" class="org.apache.james.adapter.mailbox.MailboxManagerManagement"/>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'ReIndexerManagement'#treeend

*** ** * ** ***

|-------------------------------|---|-----------|
| **ReIndexerManagement(...):** |   | **Bean:** |
| TaskManager taskManager       |   | **???**   |
| ReIndexer reIndexer           |   | **???**   |
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="mailboxcopiermanagement" class="org.apache.james.adapter.mailbox.MailboxCopierManagement"/>
    <bean id="quotamanagermanagement" class="org.apache.james.adapter.mailbox.QuotaManagement"/>
    <bean id="reindexermanagement" class="org.apache.james.adapter.mailbox.ReIndexerManagement"/>
    <bean id="sievemanagerbean" class="org.apache.james.sieverepository.lib.SieveRepositoryManagement"/>

```

### SpringBeanConstructorArgInspection
No matching factory method found in class
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java


    <bean id="hostname" class="org.apache.james.task.Hostname" factory-method="fromLocalHostname" />
    <bean id="taskManager" class="org.apache.james.task.MemoryTaskManager">
        <constructor-arg index="0" ref="hostname"/>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'AliasReverseResolverImpl'#treeend

*** ** * ** ***

|---------------------------------------------|---|-----------|
| **AliasReverseResolverImpl(...):**          |   | **Bean:** |
| RecipientRewriteTable recipientRewriteTable |   | **???**   |
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="aliasreverseresolver" class="org.apache.james.rrt.lib.AliasReverseResolverImpl" />
    <bean id="cansendfrom" class="org.apache.james.rrt.lib.CanSendFromImpl" />
</beans>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'CanSendFromImpl'#treeend

*** ** * ** ***

|---------------------------------------------|---|-----------------------------------------------------------|
| **CanSendFromImpl(...):**                   |   | **Bean:**                                                 |
| RecipientRewriteTable recipientRewriteTable |   | **???**                                                   |
| AliasReverseResolver aliasReverseResolver   |   | Autowired: aliasreverseresolver(AliasReverseResolverImpl) |
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="aliasreverseresolver" class="org.apache.james.rrt.lib.AliasReverseResolverImpl" />
    <bean id="cansendfrom" class="org.apache.james.rrt.lib.CanSendFromImpl" />
</beans>

```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'CompositeProcessorImpl'#treeend

*** ** * ** ***

|----------------------------------|---|----------------------------------------------|
| **CompositeProcessorImpl(...):** |   | **Bean:**                                    |
| MetricFactory metricFactory      |   | **???**                                      |
| MailetContext mailetContext      |   | Autowired: mailetcontext(JamesMailetContext) |
| MatcherLoader matcherLoader      |   | **???**                                      |
| MailetLoader mailetLoader        |   | **???**                                      |
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
    <!-- Mailet Container Beans. -->
    <bean id="mailprocessor" name="processorRoute"
          class="org.apache.james.mailetcontainer.impl.CompositeProcessorImpl" autowire="byType"/>

    <!-- 
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'JamesMailetContext'#treeend

*** ** * ** ***

|----------------------------------------|---|-----------------------------------------------|
| **JamesMailetContext(...):**           |   | **Bean:**                                     |
| DNSService dns                         |   | **???**                                       |
| DomainList domains                     |   | **???**                                       |
| LocalResources localResources          |   | Autowired: localResources(LocalResourcesImpl) |
| MailQueueFactory\<?\> mailQueueFactory |   | **???**                                       |
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
      it is used - Seems like a Spring bug.
    -->
    <bean id="mailetcontext" class="org.apache.james.mailetcontainer.impl.JamesMailetContext" autowire="byType"/>
    <bean id="localResources" class="org.apache.james.mailetcontainer.impl.LocalResourcesImpl" autowire="byType"/>
    <bean id="mailspooler" class="org.apache.james.mailetcontainer.impl.JamesMailSpooler" autowire="byType"/>
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'LocalResourcesImpl'#treeend

*** ** * ** ***

|---------------------------------------------|---|-----------|
| **LocalResourcesImpl(...):**                |   | **Bean:** |
| UsersRepository localUsers                  |   | **???**   |
| DomainList domains                          |   | **???**   |
| RecipientRewriteTable recipientRewriteTable |   | **???**   |
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
    -->
    <bean id="mailetcontext" class="org.apache.james.mailetcontainer.impl.JamesMailetContext" autowire="byType"/>
    <bean id="localResources" class="org.apache.james.mailetcontainer.impl.LocalResourcesImpl" autowire="byType"/>
    <bean id="mailspooler" class="org.apache.james.mailetcontainer.impl.JamesMailSpooler" autowire="byType"/>
    
```

### SpringBeanConstructorArgInspection
No matching constructor found in class 'JamesMailSpooler'#treeend

*** ** * ** ***

|-----------------------------------------|---|--------------------------------------------------|
| **JamesMailSpooler(...):**              |   | **Bean:**                                        |
| MetricFactory metricFactory             |   | **???**                                          |
| GaugeRegistry gaugeRegistry             |   | **???**                                          |
| MailProcessor mailProcessor             |   | Autowired: mailprocessor(CompositeProcessorImpl) |
| MailRepositoryStore mailRepositoryStore |   | **???**                                          |
| MailQueueFactory\<?\> queueFactory      |   | **???**                                          |
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
    <bean id="mailetcontext" class="org.apache.james.mailetcontainer.impl.JamesMailetContext" autowire="byType"/>
    <bean id="localResources" class="org.apache.james.mailetcontainer.impl.LocalResourcesImpl" autowire="byType"/>
    <bean id="mailspooler" class="org.apache.james.mailetcontainer.impl.JamesMailSpooler" autowire="byType"/>
    
</beans>
```

### SpringBeanConstructorArgInspection
No matching factory method found in class
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <property name="enableSuffixMatch" value="true"/>
    </bean>
    <bean id="fsDirectory"  class="org.apache.lucene.store.FSDirectory" factory-method="open">
        <constructor-arg index="0" value="../var/store/lucene"/>
    </bean>
```

## RuleId[id=SpringJavaInjectionPointsAutowiringInspection]
### SpringJavaInjectionPointsAutowiringInspection
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Could not autowire. There is more than one bean of 'MessageSearchIndex' type.                                                                                                     |
| |--------|-----------------------------------------------------------------------------| | Beans: | lazyIndex (mailbox-index-lucene.xml) luceneIndex (mailbox-index-lucene.xml) | |
in `mailbox/spring/src/main/java/org/apache/james/mailbox/spring/MailboxInitializer.java`
#### Snippet
```java

    @Inject
    public MailboxInitializer(SessionProvider sessionProvider, EventBus eventBus, MessageSearchIndex messageSearchIndex, QuotaUpdater quotaUpdater, MailboxManager mailboxManager, MailboxSessionMapperFactory mapperFactory) {
        this.sessionProvider = sessionProvider;
        this.eventBus = eventBus;
```

### SpringJavaInjectionPointsAutowiringInspection
|---------------------------------------------------------------------------------------------------------------------------------------------|
| Could not autowire. There is more than one bean of 'QuotaUpdater' type.                                                                     |
| |--------|----------------------------------------------------------| | Beans: | eventQuotaUpdater (quota.xml) noQuotaUpdater (quota.xml) | |
in `mailbox/spring/src/main/java/org/apache/james/mailbox/spring/MailboxInitializer.java`
#### Snippet
```java

    @Inject
    public MailboxInitializer(SessionProvider sessionProvider, EventBus eventBus, MessageSearchIndex messageSearchIndex, QuotaUpdater quotaUpdater, MailboxManager mailboxManager, MailboxSessionMapperFactory mapperFactory) {
        this.sessionProvider = sessionProvider;
        this.eventBus = eventBus;
```

### SpringJavaInjectionPointsAutowiringInspection
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Could not autowire. There is more than one bean of 'MailboxManager' type.                                                                                                                 |
| |--------|---------------------------------------------------------------------------------| | Beans: | jpa-mailboxmanager (mailbox-jpa.xml) memory-mailboxManager (mailbox-memory.xml) | |
in `mailbox/spring/src/main/java/org/apache/james/mailbox/spring/MailboxInitializer.java`
#### Snippet
```java

    @Inject
    public MailboxInitializer(SessionProvider sessionProvider, EventBus eventBus, MessageSearchIndex messageSearchIndex, QuotaUpdater quotaUpdater, MailboxManager mailboxManager, MailboxSessionMapperFactory mapperFactory) {
        this.sessionProvider = sessionProvider;
        this.eventBus = eventBus;
```

### SpringJavaInjectionPointsAutowiringInspection
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Could not autowire. There is more than one bean of 'MailboxSessionMapperFactory' type.                                                                                                                            |
| |--------|---------------------------------------------------------------------------------------------| | Beans: | jpa-sessionMapperFactory (mailbox-jpa.xml) memory-sessionMapperFactory (mailbox-memory.xml) | |
in `mailbox/spring/src/main/java/org/apache/james/mailbox/spring/MailboxInitializer.java`
#### Snippet
```java

    @Inject
    public MailboxInitializer(SessionProvider sessionProvider, EventBus eventBus, MessageSearchIndex messageSearchIndex, QuotaUpdater quotaUpdater, MailboxManager mailboxManager, MailboxSessionMapperFactory mapperFactory) {
        this.sessionProvider = sessionProvider;
        this.eventBus = eventBus;
```

### SpringJavaInjectionPointsAutowiringInspection
Could not autowire. No beans of 'UsersRepository' type found.
in `server/container/spring/src/main/java/org/apache/james/container/spring/resource/SpringUserEntityValidator.java`
#### Snippet
```java

    @Inject
    public void setUsersRepository(UsersRepository usersRepository) {
        this.usersRepository = usersRepository;
        if (rrt != null) {
```

### SpringJavaInjectionPointsAutowiringInspection
Could not autowire. No beans of 'RecipientRewriteTable' type found.
in `server/container/spring/src/main/java/org/apache/james/container/spring/resource/SpringUserEntityValidator.java`
#### Snippet
```java

    @Inject
    public void setRrt(RecipientRewriteTable rrt) {
        this.rrt = rrt;
        if (usersRepository != null) {
```

## RuleId[id=FinalMethodInFinalClass]
### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/hook/HookResult.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(result, smtpRetCode, smtpDescription);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/hook/HookResult.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof HookResult) {
            HookResult that = (HookResult) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/StageableMethod.java`
#### Snippet
```java

    @Override
    public final void stage(StageHandler stageHandler) {
        try {
            AccessController.doPrivileged((PrivilegedAction<Void>) () -> {
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageResultIterator.java`
#### Snippet
```java

        @Override
        public final boolean equals(Object o) {
            if (o instanceof UnloadedMessageResult) {
                UnloadedMessageResult that = (UnloadedMessageResult) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageResultIterator.java`
#### Snippet
```java

        @Override
        public final int hashCode() {
            return Objects.hash(exception, getInternalDate(), getSize(), getUid(), getFlags(), getModSeq(), messageId);
        }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MimePath.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Arrays.hashCode(positions);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MimePath.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof MimePath) {
            MimePath mimePath = (MimePath) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MimePath.java`
#### Snippet
```java

    @Override
    public final String toString() {
        List<Integer> parts = Arrays.stream(positions)
            .boxed()
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/blob/blob-api/src/main/java/org/apache/james/blob/api/BucketName.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof BucketName) {
            BucketName that = (BucketName) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/blob/blob-api/src/main/java/org/apache/james/blob/api/BucketName.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(value);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailQueueName.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(name);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailQueueName.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof MailQueueName) {
            MailQueueName that = (MailQueueName) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/request/SearchKey.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(type, date, keys, size, name, value,
            Arrays.hashCode(sequence), Arrays.hashCode(uids), seconds, modSeq, threadId, messageId);
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/request/SearchKey.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof SearchKey) {
            SearchKey searchKey = (SearchKey) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/MyRightsResponse.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof MyRightsResponse) {
            MyRightsResponse other = (MyRightsResponse) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/MyRightsResponse.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(myRights, mailboxName);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ACLResponse.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(acl, mailboxName);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ACLResponse.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof ACLResponse) {
            ACLResponse other = (ACLResponse) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/NamespaceResponse.java`
#### Snippet
```java

        @Override
        public final int hashCode() {
            return Objects.hash(prefix, delimiter);
        }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/NamespaceResponse.java`
#### Snippet
```java

        @Override
        public final boolean equals(Object o) {
            if (o instanceof Namespace) {
                Namespace namespace = (Namespace) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ListRightsResponse.java`
#### Snippet
```java

    @Override
    public final boolean equals(Object o) {
        if (o instanceof ListRightsResponse) {
            ListRightsResponse other = (ListRightsResponse) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ListRightsResponse.java`
#### Snippet
```java

    @Override
    public final int hashCode() {
        return Objects.hash(mailboxName, identifier, rights);
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/MockSMTPBehavior.java`
#### Snippet
```java

        @Override
        public final boolean equals(Object o) {
            if (o instanceof NumberOfAnswersPolicy) {
                NumberOfAnswersPolicy that = (NumberOfAnswersPolicy) o;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/MockSMTPBehavior.java`
#### Snippet
```java

        @Override
        public final int hashCode() {
            return Objects.hash(numberOfAnswers);
        }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/UpperCaseFilter.java`
#### Snippet
```java

    @Override
    public final boolean incrementToken() throws IOException {
        if (input.incrementToken()) {

```

## RuleId[id=Deprecation]
### Deprecation
'logWhenExceedP99(java.time.Duration)' is deprecated
in `metrics/metrics-tests/src/main/java/org/apache/james/metrics/tests/RecordingMetricFactory.java`
#### Snippet
```java
        return Flux.using(() -> timer(name),
            any -> publisher,
            timer -> timer.stopAndPublish().logWhenExceedP99(DEFAULT_100_MS_THRESHOLD));
    }

```

### Deprecation
Overrides deprecated method in 'org.apache.james.core.MailAddress'
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java

        @Override
        public boolean isNullSender() {
            return true;
        }
```

### Deprecation
'toString(java.io.InputStream)' is deprecated
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/ToPlainText.java`
#### Snippet
```java
        }
        if (bodyPart.getContentType().startsWith("text/html")) {
            bodyPart.setContent(htmlTextExtractor.toPlainText(IOUtils.toString(bodyPart.getInputStream())), "text/plain");
            return true;
        }
```

### Deprecation
'toString(java.io.InputStream)' is deprecated
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/ToPlainText.java`
#### Snippet
```java
    private boolean convertRemainingHtmlToPlainText(MimeMessage mimeMessage) throws IOException, MessagingException {
        if (mimeMessage.getContentType().startsWith("text/html")) {
            mimeMessage.setContent(htmlTextExtractor.toPlainText(IOUtils.toString(mimeMessage.getInputStream())), "text/plain");
            return true;
        }
```

### Deprecation
'logWhenExceedP99(java.time.Duration)' is deprecated
in `metrics/metrics-dropwizard/src/main/java/org/apache/james/metrics/dropwizard/DropWizardMetricFactory.java`
#### Snippet
```java
        return Flux.using(() -> timer(name),
            any -> publisher,
            timer -> timer.stopAndPublish().logWhenExceedP99(DEFAULT_100_MS_THRESHOLD));
    }

```

### Deprecation
'ALLOW_UNQUOTED_CONTROL_CHARS' is deprecated
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/http/JMAPApiRoutes.java`
#### Snippet
```java
        this.userProvisioner = userProvisioner;
        this.objectMapper = new ObjectMapper();
        objectMapper.configure(Feature.ALLOW_UNQUOTED_CONTROL_CHARS, true);
    }

```

### Deprecation
'MAILET_ERROR_ATTRIBUTE_NAME' is deprecated
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasException.java`
#### Snippet
```java
 * If true, all recipients are returned, else null. This matcher presupposes
 * that the exception has been captured as a Mail attribute
 * {@value org.apache.mailet.Mail#MAILET_ERROR_ATTRIBUTE_NAME} in the process.
 * </p>
 * 
```

### Deprecation
'logWhenExceedP99(java.time.Duration)' is deprecated
in `metrics/metrics-logger/src/main/java/org/apache/james/metrics/logger/DefaultMetricFactory.java`
#### Snippet
```java
        return Flux.using(() -> timer(name),
            any -> publisher,
            timer -> timer.stopAndPublish().logWhenExceedP99(DEFAULT_100_MS_THRESHOLD));
    }
}
```

### Deprecation
'createTempDir()' is deprecated
in `third-party/linshare/src/main/java/org/apache/james/linshare/LinshareBlobExportMechanism.java`
#### Snippet
```java
        this.linshareAPI = linshareAPI;
        this.blobStore = blobStore;
        this.tempDir = Files.createTempDir();
    }

```

### Deprecation
'createTempDir()' is deprecated
in `server/testing/src/main/java/org/apache/james/junit/TemporaryFolderExtension.java`
#### Snippet
```java
    @Override
    public void beforeEach(ExtensionContext context) throws Exception {
        temporaryFolder = new TemporaryFolder(Files.createTempDir());
    }

```

## RuleId[id=TrivialStringConcatenation]
### TrivialStringConcatenation
Empty string used in concatenation
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
                    char hex1 = chars[i + 1];
                    char hex2 = chars[i + 2];
                    char hexChar = (char) Integer.parseInt("" + hex1 + hex2, 16);
                    result.append(hexChar);
                    i += 3;
```

### TrivialStringConcatenation
Empty string used in concatenation
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/WrapText.java`
#### Snippet
```java
    public void init() throws MailetException {
        optionFlowedDelsp = getBooleanParameter(getInitParameter(PARAMETER_NAME_FLOWED_DELSP), optionFlowedDelsp);
        optionWidth = Integer.parseInt(getInitParameter(PARAMETER_NAME_WIDTH, "" + optionWidth));
    }

```

## RuleId[id=FinalStaticMethod]
### FinalStaticMethod
'static' method declared `final`
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/blob/BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .withFactory(AdditionalInformationDTOModule::new);

    public static final AdditionalInformationDTOModule<BlobStoreVaultGarbageCollectionTask.AdditionalInformation, BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO> module() {
        return DTOModule.forDomainObject(BlobStoreVaultGarbageCollectionTask.AdditionalInformation.class)
            .convertToDTO(BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO.class)
```

### FinalStaticMethod
'static' method declared `final`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RecomputeMailboxCountersTaskAdditionalInformationDTO.java`
#### Snippet
```java
    }

    public static final AdditionalInformationDTOModule<RecomputeMailboxCountersTask.Details, RecomputeMailboxCountersTaskAdditionalInformationDTO> module() {
        return DTOModule
            .forDomainObject(RecomputeMailboxCountersTask.Details.class)
```

### FinalStaticMethod
'static' method declared `final`
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/DeletedMessagesVaultExportTaskAdditionalInformationDTO.java`
#### Snippet
```java
    }

    public static final AdditionalInformationDTOModule<DeletedMessagesVaultExportTask.AdditionalInformation, DeletedMessagesVaultExportTaskAdditionalInformationDTO> module() {
        return DTOModule.forDomainObject(DeletedMessagesVaultExportTask.AdditionalInformation.class)
            .convertToDTO(DeletedMessagesVaultExportTaskAdditionalInformationDTO.class)
```

## RuleId[id=RedundantTypeArguments]
### RedundantTypeArguments
Explicit type arguments can be inferred
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/fastfail/DNSRBLHandler.java`
#### Snippet
```java
     */
    protected Collection<String> resolveTXTRecords(String ip) {
        return Collections.<String>emptyList();
    }
}
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailbox/api/src/main/java/org/apache/james/mailbox/Role.java`
#### Snippet
```java
    
    private static final List<Role> ROLES = 
            ImmutableList.<Role>of(INBOX, DRAFTS, OUTBOX, SENT, TRASH, ARCHIVE, SPAM, TEMPLATES, RESTORED_MESSAGES);
    
    private final String name;
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxManager.java`
#### Snippet
```java

    default <T> Mono<T> manageProcessing(Mono<T> toBeWrapped, MailboxSession mailboxSession) {
        return Mono.<T, Runnable>using(
            () -> {
                startProcessingRequest(mailboxSession);
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Cid.java`
#### Snippet
```java

        public CidParser strict() {
            validator = Optional.<CidValidator>of(new StrictCidValidator());
            return this;
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Cid.java`
#### Snippet
```java

        public CidParser relaxed() {
            validator = Optional.<CidValidator>of(new RelaxedCidValidator());
            return this;
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Cid.java`
#### Snippet
```java

        public CidParser unwrap() {
            transformation = Optional.<CidTransformation>of(new Unwrap());
            return this;
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java

            public Builder recipients(MailAddress... recipients) {
                this.recipients = Optional.<Collection<MailAddress>>of(ImmutableList.copyOf(recipients));
                return this;
            }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
                    this.attribute(Mail.SENT_BY_MAILET_ATTRIBUTE);
                }
                return new SentMail(sender, recipients.orElse(ImmutableList.<MailAddress>of()), msg,
                    ImmutableMap.copyOf(attributes), state.orElse(Mail.DEFAULT), delay);
            }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailet/api/src/main/java/org/apache/mailet/Serializer.java`
#### Snippet
```java
        static {
            serializers = Stream
                .<Serializer<?>>of(
                    BOOLEAN_SERIALIZER,
                    STRING_SERIALIZER,
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java

        private ResponseCode(String code, long number) {
            this(code, Collections.<String>emptyList(), number, true);
        }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java

        private ResponseCode(String code) {
            this(code, Collections.<String>emptyList(), NO_NUMBER, true);
        }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SetAnnotationCommandParser.java`
#### Snippet
```java
            throws DecodingException {
        String mailboxName = request.mailbox();
        ImmutableList.Builder<MailboxAnnotation> listMailboxAnnotations = ImmutableList.<MailboxAnnotation>builder();

        if (request.nextWordChar() == '(') {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/UpdateMessagePatchConverter.java`
#### Snippet
```java
        }
        try {
            return jsonParser.readerFor(UpdateMessagePatch.class).<UpdateMessagePatch>readValue(updatePatchNode);
        } catch (IOException e) {
            throw new RuntimeException(e);
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `mailet/base/src/main/java/org/apache/mailet/base/MailetUtil.java`
#### Snippet
```java

        return Optional.ofNullable(condition)
            .map(Throwing.<String, Integer>function(MailetUtil::tryParseInteger).sneakyThrow())
            .or(() -> defaultValue)
            .get();
```

## RuleId[id=NullableProblems]
### NullableProblems
The generated code will use '@org.jetbrains.annotations.NotNull' instead of '@javax.annotation.Nonnull'
in `core/src/main/java/org/apache/james/core/Domain.java`
#### Snippet
```java
    @Nonnull
    private final String domainName;
    @Nonnull
    private final String normalizedDomainName;

```

### NullableProblems
The generated code will use '@org.jetbrains.annotations.NotNull' instead of '@javax.annotation.Nonnull'
in `core/src/main/java/org/apache/james/core/Domain.java`
#### Snippet
```java
    }

    @Nonnull
    private final String domainName;
    @Nonnull
```

### NullableProblems
Not annotated method overrides method annotated with @NonNullApi
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/ReactorRabbitMQChannelPool.java`
#### Snippet
```java

    @Override
    public BiConsumer<SignalType, Channel> getChannelCloseHandler() {
        return (signalType, channel) -> metricFactory.runPublishingTimerMetric("rabbit-release",
            () -> {
```

### NullableProblems
Not annotated method overrides method annotated with @NonNullApi
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/ReactorRabbitMQChannelPool.java`
#### Snippet
```java

    @Override
    public Mono<? extends Channel> getChannelMono() {
        return Mono.from(metricFactory.decoratePublisherWithTimerMetric("rabbit-acquire", borrow()));
    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/container/guice/configuration/src/main/java/org/apache/james/utils/PropertiesProvider.java`
#### Snippet
```java
            .build(new CacheLoader<>() {
                @Override
                public Optional<File> load(final String fileName) {
                    return getConfigurationFileFromFileSystem(fileName);
                }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/container/guice/configuration/src/main/java/org/apache/james/utils/PropertiesProvider.java`
#### Snippet
```java
            .build(new CacheLoader<>() {
                @Override
                public Optional<File> load(final String fileName) {
                    return getConfigurationFileFromFileSystem(fileName);
                }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java

        @Override
        public Optional<Long> sizeIfKnown() {
            return Optional.of(size);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java

        @Override
        public InputStream openStream() throws IOException {
            return stream.asByteSource().openStream();
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/CRLFTerminatedInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        if (endOfStream == false) {

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/CRLFTerminatedInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b) throws IOException {
        return read(b, 0, b.length);
    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
                .content(new ByteSource() {
                    @Override
                    public InputStream openStream() throws IOException {
                        Body body = entity.getBody();
                        if (body instanceof SingleBody) {
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/CountingInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int read = in.read(b, off, len);
        if (read > 0) {
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/util/src/main/java/org/apache/james/util/io/CurrentPositionInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int read = wrapped.read(b, off, len);
        return increaseSize(read);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/util/src/main/java/org/apache/james/util/io/CurrentPositionInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b) throws IOException {
        int read = wrapped.read(b);
        return increaseSize(read);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/util/src/main/java/org/apache/james/util/ReactorUtils.java`
#### Snippet
```java

        @Override
        public int read(byte[] b, int off, int len) throws IOException {
            return nextNonEmptyBuffer()
                .map(buffer -> {
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/util/src/main/java/org/apache/james/util/io/BodyOffsetInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        if (bodyStartOctet == -1) {
            return readOneByOneUntilHeaders(b, off, len);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/util/src/main/java/org/apache/james/util/concurrent/NamedThreadFactory.java`
#### Snippet
```java

    @Override
    public Thread newThread(Runnable r) {
        return threadFactory.newThread(r);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxMetaData.java`
#### Snippet
```java

    @Override
    public int compareTo(MailboxMetaData o) {
        return COMPARATOR.compare(this, o);
    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryCurrentQuotaManager.java`
#### Snippet
```java
        this.quotaCache = CacheBuilder.newBuilder().build(new CacheLoader<>() {
            @Override
            public AtomicReference<CurrentQuotas> load(QuotaRoot quotaRoot) {
                return new AtomicReference<>(
                    loadQuotas(quotaRoot, quotaCalculator, sessionProvider));
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryCurrentQuotaManager.java`
#### Snippet
```java
        this.quotaCache = CacheBuilder.newBuilder().build(new CacheLoader<>() {
            @Override
            public AtomicReference<CurrentQuotas> load(QuotaRoot quotaRoot) {
                return new AtomicReference<>(
                    loadQuotas(quotaRoot, quotaCalculator, sessionProvider));
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageDAO.java`
#### Snippet
```java
            ByteSource bodyByteSource = new ByteSource() {
                @Override
                public InputStream openStream() {
                    try {
                        return message.getBodyContent();
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageDAOV3.java`
#### Snippet
```java
                ByteSource bodyByteSource = new ByteSource() {
                    @Override
                    public InputStream openStream() {
                        try {
                            return message.getBodyContent();
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/CRLFOutputStream.java`
#### Snippet
```java
     */
    @Override
    public synchronized void write(byte[] buffer, int offset, int length)
            throws IOException {
        /* optimized */
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/HeaderSkippingOutputStream.java`
#### Snippet
```java

    @Override
    public void write(byte[] b, int off, int len) throws IOException {
        if (inHeaders) {
            for (int i = off; i < off + len; i++) {
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/dlp/DlpRulesLoader.java`
#### Snippet
```java
                .build(new CacheLoader<>() {
                    @Override
                    public DlpDomainRules load(Domain domain) {
                        return wrapped.load(domain);
                    }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/dlp/DlpRulesLoader.java`
#### Snippet
```java
                .build(new CacheLoader<>() {
                    @Override
                    public DlpDomainRules load(Domain domain) {
                        return wrapped.load(domain);
                    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/AbstractDomainList.java`
#### Snippet
```java
            .build(new CacheLoader<>() {
                @Override
                public Boolean load(Domain key) throws DomainListException {
                    return containsDomainInternal(key) || detectedDomainsContains(key);
                }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/AbstractDomainList.java`
#### Snippet
```java
            .build(new CacheLoader<>() {
                @Override
                public Boolean load(Domain key) throws DomainListException {
                    return containsDomainInternal(key) || detectedDomainsContains(key);
                }
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/IdRange.java`
#### Snippet
```java
     */
    @Override
    public Iterator<Long> iterator() {
        long from = getLowVal();
        if (from == Long.MAX_VALUE) {
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/IdRange.java`
#### Snippet
```java

    @Override
    public int compareTo(IdRange range2) {
        // Correctly sort and respect "*" and "*:*" ranges. See IMAP-289
        if (getLowVal() == Long.MAX_VALUE && getHighVal() == Long.MAX_VALUE && range2.getLowVal() == Long.MAX_VALUE && range2.getHighVal() == Long.MAX_VALUE) {
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java

    @Override
    public Iterator<MessageUid> iterator() {
        return range.iterator();
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/imap/src/main/java/org/apache/james/imap/utils/EolInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int i = in.read(b, off, len);
        eol(i);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/imap/src/main/java/org/apache/james/imap/utils/EolInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b) throws IOException {
        int i = in.read(b);
        eol(i);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/imap/src/main/java/org/apache/james/imap/utils/FastByteArrayOutputStream.java`
#### Snippet
```java
     */
    @Override
    public void write(byte[] buffer, int offset, int len) {
        // avoid int overflow
        if (offset < 0 || offset > buffer.length || len < 0
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/PartialFetchBodyElement.java`
#### Snippet
```java

        @Override
        public int read(byte[] b, int off, int len) throws IOException {
            checkOffset();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/PartialFetchBodyElement.java`
#### Snippet
```java

        @Override
        public int read(byte[] b) throws IOException {
            return read(b, 0, b.length);
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        return in.read(b, off, len);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b) throws IOException {
        return in.read(b);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java

        @Override
        public void write(byte[] arg0, int arg1, int arg2) throws IOException {
            size += arg2;
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java

    @Override
    public <T> T[] toArray(T[] a) {
        return handlers.toArray(a);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java

    @Override
    public boolean addAll(Collection<? extends ProtocolHandler> c) {
        checkReadOnly();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java

    @Override
    public boolean removeAll(Collection<?> c) {
        checkReadOnly();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java

    @Override
    public boolean addAll(int index, Collection<? extends ProtocolHandler> c) {
        checkReadOnly();

```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java

    @Override
    public boolean containsAll(Collection<?> c) {
        return handlers.containsAll(c);
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java

    @Override
    public boolean retainAll(Collection<?> c) {
        return handlers.retainAll(c);
    }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public byte[] read() throws IOException {
            return wrapped.read();
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public CharSource asCharSource(Charset charset) {
            return wrapped.asCharSource(charset);
        }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public CharSource asCharSource(Charset charset) {
            return wrapped.asCharSource(charset);
        }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public long copyTo(OutputStream output) throws IOException {
            return wrapped.copyTo(output);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public InputStream openBufferedStream() throws IOException {
            return wrapped.openBufferedStream();
        }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public boolean contentEquals(ByteSource other) throws IOException {
            return wrapped.contentEquals(other);
        }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public long copyTo(ByteSink sink) throws IOException {
            return wrapped.copyTo(sink);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public HashCode hash(HashFunction hashFunction) throws IOException {
            return wrapped.hash(hashFunction);
        }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public HashCode hash(HashFunction hashFunction) throws IOException {
            return wrapped.hash(hashFunction);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public Optional<Long> sizeIfKnown() {
            return Optional.of(size);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public ByteSource slice(long offset, long length) {
            return wrapped.slice(offset, length);
        }
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public InputStream openStream() throws IOException {
            return wrapped.openStream();
        }
```

### NullableProblems
Not annotated parameter overrides @ElementTypesAreNonnullByDefault parameter
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public <T> T read(ByteProcessor<T> processor) throws IOException {
            return wrapped.read(processor);
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/queue/queue-memory/src/main/java/org/apache/james/queue/memory/MemoryMailQueueFactory.java`
#### Snippet
```java

        @Override
        public long getDelay(TimeUnit unit) {
            try {
                return ZonedDateTime.now(clock).until(delivery, Temporals.chronoUnit(unit));
```

### NullableProblems
Not annotated method overrides method annotated with @ElementTypesAreNonnullByDefault
in `server/blob/mail-store/src/main/java/org/apache/james/blob/mail/MimeMessageStore.java`
#### Snippet
```java
                    Mono.from(blobStore.save(bucketName, new ByteSource() {
                        @Override
                        public InputStream openStream() throws IOException {
                            try {
                                MimeMessageInputStream stream = new MimeMessageInputStream(message);
```

### NullableProblems
Not annotated parameter overrides @NonNull parameter
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/utils/LockLessConcurrencyLimitingRequestThrottler.java`
#### Snippet
```java

    @Override
    public void signalTimeout(Throttled request) {
        if (!closed) {
            if (queue.remove(request)) { // The request timed out before it was active
```

### NullableProblems
Not annotated parameter overrides @NonNull parameter
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/utils/LockLessConcurrencyLimitingRequestThrottler.java`
#### Snippet
```java

    @Override
    public void register(Throttled request) {
        int requestNumber = concurrentRequests.incrementAndGet();
        if (closed) {
```

### NullableProblems
Not annotated parameter overrides @NonNull parameter
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/utils/LockLessConcurrencyLimitingRequestThrottler.java`
#### Snippet
```java

    @Override
    public void signalSuccess(Throttled request) {
        onRequestDone();
    }
```

### NullableProblems
Not annotated parameter overrides @NonNull parameter
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/utils/LockLessConcurrencyLimitingRequestThrottler.java`
#### Snippet
```java

    @Override
    public void signalError(Throttled request, Throwable error) {
        signalSuccess(request); // not treated differently
    }
```

### NullableProblems
Not annotated parameter overrides @NonNull parameter
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/utils/LockLessConcurrencyLimitingRequestThrottler.java`
#### Snippet
```java

    @Override
    public void signalError(Throttled request, Throwable error) {
        signalSuccess(request); // not treated differently
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MessageInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b) throws IOException {
        if (caughtException != null || wrapped == null) {
            throwException();
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MessageInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        if (caughtException != null || wrapped == null) {
            throwException();
```

## RuleId[id=EqualsBetweenInconvertibleTypes]
### EqualsBetweenInconvertibleTypes
`equal` between objects of inconvertible types 'long' and 'MessageUid'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/AbstractJPAMailboxMessage.java`
#### Snippet
```java
            AbstractJPAMailboxMessage other = (AbstractJPAMailboxMessage) obj;
            return Objects.equal(getMailboxId(), other.getMailboxId())
                    && Objects.equal(uid, other.getUid());
        }
        return false;
```

### EqualsBetweenInconvertibleTypes
`equals` between objects of inconvertible types 'Mono' and 'CurrentQuotas'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JpaCurrentQuotaManager.java`
#### Snippet
```java
                transactionRunner.run(
                    entityManager -> {
                        if (!storedQuotas.equals(CurrentQuotas.from(quotaOperation))) {
                            entityManager.merge(new JpaCurrentQuota(quotaOperation.quotaRoot().getValue(),
                                quotaOperation.count().asLong(),
```

### EqualsBetweenInconvertibleTypes
No class found which is a subtype of both 'AbstractLineHandlerResultJMXMonitor' and 'LineHandler'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/jmx/AbstractLineHandlerResultJMXMonitor.java`
#### Snippet
```java
            for (Object anExtension : extension) {
                LineHandler<?> c = (LineHandler<?>) anExtension;
                if (!equals(c)) {
                    String cName = c.getClass().getName();
                    try {
```

### EqualsBetweenInconvertibleTypes
No class found which is a subtype of both 'AbstractCommandHandlerResultJMXMonitor' and 'CommandHandler'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/jmx/AbstractCommandHandlerResultJMXMonitor.java`
#### Snippet
```java
            for (Object anExtension : extension) {
                CommandHandler c = (CommandHandler) anExtension;
                if (!equals(c)) {
                    String cName = c.getClass().getName();
                    try {
```

### EqualsBetweenInconvertibleTypes
No class found which is a subtype of both 'AbstractConnectHandlerResultJMXMonitor' and 'ConnectHandler'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/jmx/AbstractConnectHandlerResultJMXMonitor.java`
#### Snippet
```java
            for (Object anExtension : extension) {
                ConnectHandler<?> c = (ConnectHandler<?>) anExtension;
                if (!equals(c)) {
                    String cName = c.getClass().getName();
                    try {
```

### EqualsBetweenInconvertibleTypes
`equals` between objects of inconvertible types 'Username' and 'String'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
            sb.append(mailboxPath.getNamespace());
        }
        if (mailboxPath.getUser() != null && !mailboxPath.getUser().equals("")) {
            if (sb.length() > 0) {
                sb.append(delimiter);
```

## RuleId[id=DuplicateCondition]
### DuplicateCondition
Duplicate condition `condition.getInMailboxes().isPresent()`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java

    private boolean hasMailboxClause(FilterCondition condition) {
        return condition.getInMailboxes().isPresent() || condition.getInMailboxes().isPresent();
    }

```

### DuplicateCondition
Duplicate condition `condition.getInMailboxes().isPresent()`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java

    private boolean hasMailboxClause(FilterCondition condition) {
        return condition.getInMailboxes().isPresent() || condition.getInMailboxes().isPresent();
    }

```

## RuleId[id=SpringInjectionValueStyleInspection]
### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                <entry>
                    <key>
                        <value>usersrepository</value>
                    </key>
                    <!-- no alias needed -->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                    </key>
                    <!-- no alias needed -->
                    <value></value>
                </entry>
                <!-- Sieve Repository-->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                <entry>
                    <key>
                        <value>sieverepository</value>
                    </key>
                    <!-- no alias needed -->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                    </key>
                    <!-- no alias needed -->
                    <value></value>
                </entry>
                <!-- Recipient Rewrite Table-->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                <entry>
                    <key>
                        <value>recipientrewritetable</value>
                    </key>
                    <!-- no alias needed -->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                    </key>
                    <!-- no alias needed -->
                    <value></value>
                </entry>
                <!-- Domain List -->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                <entry>
                    <key>
                        <value>domainlist</value>
                    </key>
                    <!-- no alias needed -->
```

### SpringInjectionValueStyleInspection
Usage of explicit element
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
                    </key>
                    <!-- no alias needed -->
                    <value></value>
                </entry>
                <!--
```

## RuleId[id=IgnoreResultOfCall]
### IgnoreResultOfCall
Result of `InetAddress.getByName()` is ignored
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/fastfail/DNSRBLHandler.java`
#### Snippet
```java
    protected boolean resolve(String ip) {
        try {
            InetAddress.getByName(ip);
            return true;
        } catch (UnknownHostException e) {
```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAStreamingMailboxMessage.java`
#### Snippet
```java
    public InputStream getBodyContent() throws IOException {
        InputStream inputStream = content.getInputStream();
        inputStream.skip(getBodyStartOctet());
        return inputStream;
    }
```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAStreamingMailboxMessage.java`
#### Snippet
```java
            this.header = new BoundedInputStream(content.getInputStream(), getBodyStartOctet());
            InputStream bodyStream = content.getInputStream();
            bodyStream.skip(getBodyStartOctet());
            this.body = bodyStream;

```

### IgnoreResultOfCall
Result of `InputStream.skip()` is ignored
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMessage.java`
#### Snippet
```java
    public InputStream getBodyContent() throws IOException {
        InputStream inputStream = content.getInputStream();
        inputStream.skip(bodyStartOctet);
        return inputStream;
    }
```

### IgnoreResultOfCall
Result of `UnsynchronizedBufferedInputStream.getBufIfOpen()` is ignored
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java

    public void reset() throws IOException {
        this.getBufIfOpen();
        if (this.markpos < 0) {
            throw new IOException("Resetting to invalid mark");
```

### IgnoreResultOfCall
Result of `UnsynchronizedBufferedInputStream.getBufIfOpen()` is ignored
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java

    public long skip(long n) throws IOException {
        this.getBufIfOpen();
        if (n <= 0L) {
            return 0L;
```

### IgnoreResultOfCall
Result of `UnsynchronizedBufferedInputStream.getBufIfOpen()` is ignored
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java

    public int read(byte[] b, int off, int len) throws IOException {
        this.getBufIfOpen();
        if ((off | len | off + len | b.length - (off + len)) < 0) {
            throw new IndexOutOfBoundsException();
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        BoundStatementBuilder statementBuilder = insert.boundStatementBuilder();
        if (flags.getUserFlags().length == 0) {
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
```

### IgnoreResultOfCall
Result of `SettableById.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
        }
        return cassandraAsyncExecutor.executeVoid(statementBuilder
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        BoundStatementBuilder statementBuilder = insert.boundStatementBuilder();
        if (flags.getUserFlags().length == 0) {
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
```

### IgnoreResultOfCall
Result of `SettableById.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
        }
        return cassandraAsyncExecutor.executeVoid(statementBuilder
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java

        if (updatedFlags.isChanged(Flag.ANSWERED)) {
            statementBuilder.setBoolean(ANSWERED, updatedFlags.isModifiedToSet(Flag.ANSWERED));
        } else {
            statementBuilder.unset(ANSWERED);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(ANSWERED, updatedFlags.isModifiedToSet(Flag.ANSWERED));
        } else {
            statementBuilder.unset(ANSWERED);
        }
        if (updatedFlags.isChanged(Flag.DRAFT)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.DRAFT)) {
            statementBuilder.setBoolean(DRAFT, updatedFlags.isModifiedToSet(Flag.DRAFT));
        } else {
            statementBuilder.unset(DRAFT);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(DRAFT, updatedFlags.isModifiedToSet(Flag.DRAFT));
        } else {
            statementBuilder.unset(DRAFT);
        }
        if (updatedFlags.isChanged(Flag.FLAGGED)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.FLAGGED)) {
            statementBuilder.setBoolean(FLAGGED, updatedFlags.isModifiedToSet(Flag.FLAGGED));
        } else {
            statementBuilder.unset(FLAGGED);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(FLAGGED, updatedFlags.isModifiedToSet(Flag.FLAGGED));
        } else {
            statementBuilder.unset(FLAGGED);
        }
        if (updatedFlags.isChanged(Flag.DELETED)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.DELETED)) {
            statementBuilder.setBoolean(DELETED, updatedFlags.isModifiedToSet(Flag.DELETED));
        } else {
            statementBuilder.unset(DELETED);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(DELETED, updatedFlags.isModifiedToSet(Flag.DELETED));
        } else {
            statementBuilder.unset(DELETED);
        }
        if (updatedFlags.isChanged(Flag.RECENT)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.RECENT)) {
            statementBuilder.setBoolean(RECENT, updatedFlags.getNewFlags().contains(Flag.RECENT));
        } else {
            statementBuilder.unset(RECENT);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(RECENT, updatedFlags.getNewFlags().contains(Flag.RECENT));
        } else {
            statementBuilder.unset(RECENT);
        }
        if (updatedFlags.isChanged(Flag.SEEN)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.SEEN)) {
            statementBuilder.setBoolean(SEEN, updatedFlags.isModifiedToSet(Flag.SEEN));
        } else {
            statementBuilder.unset(SEEN);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(SEEN, updatedFlags.isModifiedToSet(Flag.SEEN));
        } else {
            statementBuilder.unset(SEEN);
        }
        if (updatedFlags.isChanged(Flag.USER)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.USER)) {
            statementBuilder.setBoolean(USER, updatedFlags.isModifiedToSet(Flag.USER));
        } else {
            statementBuilder.unset(USER);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(USER, updatedFlags.isModifiedToSet(Flag.USER));
        } else {
            statementBuilder.unset(USER);
        }
        Sets.SetView<String> removedFlags = Sets.difference(
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            ImmutableSet.copyOf(updatedFlags.getOldFlags().getUserFlags()));
        if (addedFlags.isEmpty()) {
            statementBuilder.unset(ADDED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(ADDED_USERS_FLAGS, addedFlags, String.class);
```

### IgnoreResultOfCall
Result of `SettableByName.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.unset(ADDED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(ADDED_USERS_FLAGS, addedFlags, String.class);
        }
        if (removedFlags.isEmpty()) {
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        }
        if (removedFlags.isEmpty()) {
            statementBuilder.unset(REMOVED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(REMOVED_USERS_FLAGS, removedFlags, String.class);
```

### IgnoreResultOfCall
Result of `SettableByName.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            statementBuilder.unset(REMOVED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(REMOVED_USERS_FLAGS, removedFlags, String.class);
        }
        return statementBuilder.build();
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        BoundStatementBuilder statementBuilder = insert.boundStatementBuilder();
        if (metadata.getComposedMessageId().getFlags().getUserFlags().length == 0) {
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
```

### IgnoreResultOfCall
Result of `SettableById.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
        }

```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        BoundStatementBuilder statementBuilder = insert.boundStatementBuilder();
        if (metadata.getComposedMessageId().getFlags().getUserFlags().length == 0) {
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
```

### IgnoreResultOfCall
Result of `SettableById.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
        }

```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java

        if (updatedFlags.isChanged(Flag.ANSWERED)) {
            statementBuilder.setBoolean(ANSWERED, updatedFlags.isModifiedToSet(Flag.ANSWERED));
        } else {
            statementBuilder.unset(ANSWERED);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(ANSWERED, updatedFlags.isModifiedToSet(Flag.ANSWERED));
        } else {
            statementBuilder.unset(ANSWERED);
        }
        if (updatedFlags.isChanged(Flag.DRAFT)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.DRAFT)) {
            statementBuilder.setBoolean(DRAFT, updatedFlags.isModifiedToSet(Flag.DRAFT));
        } else {
            statementBuilder.unset(DRAFT);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(DRAFT, updatedFlags.isModifiedToSet(Flag.DRAFT));
        } else {
            statementBuilder.unset(DRAFT);
        }
        if (updatedFlags.isChanged(Flag.FLAGGED)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.FLAGGED)) {
            statementBuilder.setBoolean(FLAGGED, updatedFlags.isModifiedToSet(Flag.FLAGGED));
        } else {
            statementBuilder.unset(FLAGGED);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(FLAGGED, updatedFlags.isModifiedToSet(Flag.FLAGGED));
        } else {
            statementBuilder.unset(FLAGGED);
        }
        if (updatedFlags.isChanged(Flag.DELETED)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.DELETED)) {
            statementBuilder.setBoolean(DELETED, updatedFlags.isModifiedToSet(Flag.DELETED));
        } else {
            statementBuilder.unset(DELETED);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(DELETED, updatedFlags.isModifiedToSet(Flag.DELETED));
        } else {
            statementBuilder.unset(DELETED);
        }
        if (updatedFlags.isChanged(Flag.RECENT)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.RECENT)) {
            statementBuilder.setBoolean(RECENT, updatedFlags.getNewFlags().contains(Flag.RECENT));
        } else {
            statementBuilder.unset(RECENT);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(RECENT, updatedFlags.getNewFlags().contains(Flag.RECENT));
        } else {
            statementBuilder.unset(RECENT);
        }
        if (updatedFlags.isChanged(Flag.SEEN)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.SEEN)) {
            statementBuilder.setBoolean(SEEN, updatedFlags.isModifiedToSet(Flag.SEEN));
        } else {
            statementBuilder.unset(SEEN);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(SEEN, updatedFlags.isModifiedToSet(Flag.SEEN));
        } else {
            statementBuilder.unset(SEEN);
        }
        if (updatedFlags.isChanged(Flag.USER)) {
```

### IgnoreResultOfCall
Result of `SettableById.setBoolean()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (updatedFlags.isChanged(Flag.USER)) {
            statementBuilder.setBoolean(USER, updatedFlags.isModifiedToSet(Flag.USER));
        } else {
            statementBuilder.unset(USER);
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.setBoolean(USER, updatedFlags.isModifiedToSet(Flag.USER));
        } else {
            statementBuilder.unset(USER);
        }
        Sets.SetView<String> removedFlags = Sets.difference(
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            ImmutableSet.copyOf(updatedFlags.getOldFlags().getUserFlags()));
        if (addedFlags.isEmpty()) {
            statementBuilder.unset(ADDED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(ADDED_USERS_FLAGS, addedFlags, String.class);
```

### IgnoreResultOfCall
Result of `SettableByName.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.unset(ADDED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(ADDED_USERS_FLAGS, addedFlags, String.class);
        }
        if (removedFlags.isEmpty()) {
```

### IgnoreResultOfCall
Result of `Bindable.unset()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (removedFlags.isEmpty()) {
            statementBuilder.unset(REMOVED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(REMOVED_USERS_FLAGS, removedFlags, String.class);
```

### IgnoreResultOfCall
Result of `SettableByName.setSet()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            statementBuilder.unset(REMOVED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(REMOVED_USERS_FLAGS, removedFlags, String.class);
        }
        if (cassandraConfiguration.isMessageWriteStrongConsistency()) {
```

### IgnoreResultOfCall
Result of `SettableByName.setLong()` is ignored
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        }
        if (cassandraConfiguration.isMessageWriteStrongConsistency()) {
            statementBuilder.setLong(MOD_SEQ_CONDITION, previousModeq.asLong());
        }
        return statementBuilder.build();
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `server/container/guice/common/src/main/java/org/apache/james/TemporaryJamesServer.java`
#### Snippet
```java
        configurationFolder = workingDir.toPath().resolve("conf").toFile();
        if (!configurationFolder.exists()) {
            configurationFolder.mkdir();
        }
        copyResources(Paths.get(configurationFolder.getAbsolutePath()));
```

### IgnoreResultOfCall
Result of `SettableByName.setString()` is ignored
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/EnqueuedMailsDAO.java`
#### Snippet
```java

        Optional.ofNullable(mail.getErrorMessage())
            .ifPresent(errorMessage -> statement.setString(ERROR_MESSAGE, mail.getErrorMessage()));

        Optional.ofNullable(mail.getLastUpdated())
```

### IgnoreResultOfCall
Result of `SettableByName.setInstant()` is ignored
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/EnqueuedMailsDAO.java`
#### Snippet
```java
        Optional.ofNullable(mail.getLastUpdated())
            .map(Date::toInstant)
            .ifPresent(lastUpdated -> statement.setInstant(LAST_UPDATED, lastUpdated));

        mail.getMaybeSender()
```

### IgnoreResultOfCall
Result of `SettableByName.setString()` is ignored
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/EnqueuedMailsDAO.java`
#### Snippet
```java
            .asOptional()
            .map(MailAddress::asString)
            .ifPresent(mailAddress -> statement.setString(SENDER, mailAddress));

        return executor.executeVoid(statement.build());
```

### IgnoreResultOfCall
Result of `SettableByName.setString()` is ignored
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryMailDaoV2.java`
#### Snippet
```java

                Optional.ofNullable(mail.getErrorMessage())
                    .ifPresent(errorMessage -> statement.setString(MailRepositoryTable.ERROR_MESSAGE, mail.getErrorMessage()));

                mail.getMaybeSender()
```

### IgnoreResultOfCall
Result of `SettableByName.setString()` is ignored
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryMailDaoV2.java`
#### Snippet
```java
                    .asOptional()
                    .map(MailAddress::asString)
                    .ifPresent(mailAddress -> statement.setString(MailRepositoryTable.SENDER, mailAddress));

                return statement.build();
```

### IgnoreResultOfCall
Result of `InputStream.read()` is ignored
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/PartialFetchBodyElement.java`
#### Snippet
```java
                while (offset > 0) {
                    // consume the stream till we reach the offset
                    in.read();
                    offset--;
                }
```

### IgnoreResultOfCall
Result of `Matcher.matches()` is ignored
in `server/container/core/src/main/java/org/apache/james/server/core/filesystem/SimpleUrl.java`
#### Snippet
```java
    private static void extractComponents(String urlWithUnixSeparators) {
        Matcher m = URL_REGEXP.matcher(urlWithUnixSeparators);
        m.matches();
        protocol = Optional.ofNullable(m.group(1)).orElse("");
        path = Optional.ofNullable(m.group(2)).orElse("");
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java
        File configurationFolder = workingDir.toPath().resolve("conf").toFile();
        if (!configurationFolder.exists()) {
            configurationFolder.mkdir();
        }
        return configurationFolder;
```

### IgnoreResultOfCall
Result of `LinkedBlockingDeque.remove()` is ignored
in `server/queue/queue-memory/src/main/java/org/apache/james/queue/memory/MemoryMailQueueFactory.java`
#### Snippet
```java

        private void markProcessingAsFinished(MemoryMailQueueItem item) {
            inProcessingMailItems.remove(item);
        }

```

### IgnoreResultOfCall
Result of `DelayQueue.remove()` is ignored
in `server/queue/queue-memory/src/main/java/org/apache/james/queue/memory/MemoryMailQueueFactory.java`
#### Snippet
```java
                .filter(item -> shouldRemove(item, type, value))
                .collect(ImmutableList.toImmutableList());
            toBeRemoved.forEach(mailItems::remove);
            return toBeRemoved.size();
        }
```

### IgnoreResultOfCall
Result of `FileInputStream.skip()` is ignored
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
        public InputStream getInputStream() throws IOException {
            FileInputStream fileInputStream = new FileInputStream(file);
            fileInputStream.skip(offset);
            InputStream limitedStream = ByteStreams.limit(fileInputStream, size);
            if (extraCRLF) {
```

### IgnoreResultOfCall
Result of `CountingInputStream.skip()` is ignored
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
        try {
            long offset = in.getCount();
            in.skip(size);
            return new FileLiteral(offset, size, extraCRLF, backingFile, this);
        } catch (IOException e) {
```

## RuleId[id=RedundantMethodOverride]
### RedundantMethodOverride
Method `afterEach()` is identical to its super method
in `mpt/impl/smtp/core/src/main/java/org/apache/james/mpt/smtp/SmtpTestExtension.java`
#### Snippet
```java

    @Override
    public void afterEach(ExtensionContext context) throws Exception {
    }

```

### RedundantMethodOverride
Method `markSupported()` is identical to its super method
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/ExtraDotInputStream.java`
#### Snippet
```java

    @Override
    public boolean markSupported() {
        return false;
    }
```

### RedundantMethodOverride
Method `markSupported()` is identical to its super method
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/TopCmdHandler.java`
#### Snippet
```java

        @Override
        public boolean markSupported() {
            return false;
        }
```

### RedundantMethodOverride
Method `markSupported()` is identical to its super method
in `server/container/util/src/main/java/org/apache/james/util/io/CurrentPositionInputStream.java`
#### Snippet
```java

    @Override
    public boolean markSupported() {
        return false;
    }
```

### RedundantMethodOverride
Method `markSupported()` is identical to its super method
in `server/container/util/src/main/java/org/apache/james/util/io/BodyOffsetInputStream.java`
#### Snippet
```java

    @Override
    public boolean markSupported() {
        return false;
    }
```

### RedundantMethodOverride
Method `toString()` is identical to its super method
in `mailbox/api/src/main/java/org/apache/james/mailbox/exception/InboxAlreadyCreated.java`
#### Snippet
```java

    @Override
    public String toString() {
        return getMessage();
    }
```

### RedundantMethodOverride
Method `details()` is identical to its super method
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/migration/MessageDenormalizationMigration.java`
#### Snippet
```java

        @Override
        public Optional<TaskExecutionDetails.AdditionalInformation> details() {
            return Optional.empty();
        }
```

### RedundantMethodOverride
Method `init()` is identical to its super method
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/RandomStoring.java`
#### Snippet
```java

    @Override
    public void init() throws MessagingException {
    }

```

### RedundantMethodOverride
Method `available()` is identical to its super method
in `protocols/imap/src/main/java/org/apache/james/imap/utils/EolInputStream.java`
#### Snippet
```java

    @Override
    public int available() throws IOException {
        return in.available();
    }
```

### RedundantMethodOverride
Method `initPostmasterSigns()` is identical to its super method
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/SMIMESign.java`
#### Snippet
```java
     */
    @Override
    protected void initPostmasterSigns() {
        setPostmasterSigns((getInitParameter("postmasterSigns") == null) ? true : Boolean.parseBoolean(getInitParameter("postmasterSigns")));
    }
```

## RuleId[id=OptionalAssignedToNull]
### OptionalAssignedToNull
Optional value is compared with null
in `protocols/imap/src/main/java/org/apache/james/imap/encode/MailboxStatusResponseEncoder.java`
#### Snippet
```java
        composer.openParen();

        if (appendLimit != null) {
            composer.message(STATUS_APPENDLIMIT);
            composer.message(appendLimit.map(l -> Long.toString(l)).orElse("NIL"));
```

### OptionalAssignedToNull
Optional value is compared with null
in `protocols/imap/src/main/java/org/apache/james/imap/encode/FetchResponseEncoder.java`
#### Snippet
```java

    private boolean isSaveDateFetched(Optional<Date> saveDate) {
        return saveDate != null;
    }

```

### OptionalAssignedToNull
Null is used for 'Optional' type in return statement
in `protocols/imap/src/main/java/org/apache/james/imap/processor/StatusProcessor.java`
#### Snippet
```java
            return imapConfiguration.getAppendLimit();
        } else {
            return null;
        }
    }
```

### OptionalAssignedToNull
Null is used for 'Optional' type in assignment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
        flags = null;
        internalDate = null;
        saveDate = null;
        size = null;
        body = null;
```

### OptionalAssignedToNull
Null is used for 'Optional' type in assignment
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
        public Builder parentId(MailboxId parentId) {
            if (parentId == null) {
                this.parentId = null;
            } else {
                this.parentId = Optional.of(parentId);
```

### OptionalAssignedToNull
Optional value is compared with null
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
        public void checkState() {
            super.checkState();
            Preconditions.checkState(preview != null, "'preview' is mandatory");
            Preconditions.checkState(hasAttachment.isPresent(), "'hasAttachment' should be present");
        }
```

### OptionalAssignedToNull
Optional value is compared with null
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java
    private MailboxPath computeNewMailboxPath(Mailbox mailbox, MailboxPath originMailboxPath, MailboxUpdateRequest updateRequest, MailboxSession mailboxSession) throws MailboxException {
        Optional<MailboxId> parentId = updateRequest.getParentId();
        if (parentId == null) {
            return MailboxPath.forUser(
                mailboxSession.getUser(),
```

## RuleId[id=MismatchedCollectionQueryUpdate]
### MismatchedCollectionQueryUpdate
Contents of collection `reactorProjects` are queried, but never updated
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/AggregateMailetdocsReport.java`
#### Snippet
```java
    @Parameter(defaultValue = "${reactorProjects}",
            readonly = true)
    private List<MavenProject> reactorProjects;

    /**
```

### MismatchedCollectionQueryUpdate
Contents of collection `javamailProperties` are updated, but never queried
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java

    public static FakeMail fromMime(String text, String javaEncodingCharset, String javamailDefaultEncodingCharset) throws MessagingException, UnsupportedEncodingException {
        Properties javamailProperties = new Properties();
        javamailProperties.setProperty("mail.mime.charset", javamailDefaultEncodingCharset);
        return FakeMail.builder()
```

### MismatchedCollectionQueryUpdate
Contents of collection `fString` are updated, but never queried
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
     */
    private void indexFlags(Document doc, Flags f) {
        List<String> fString = new ArrayList<>();
        Flag[] flags = f.getSystemFlags();
        for (Flag flag : flags) {
```

## RuleId[id=DuplicateThrows]
### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/dto/query/QueryElementDeserializer.java`
#### Snippet
```java

    @Override
    public QueryElement deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {
        ObjectMapper mapper = (ObjectMapper) jsonParser.getCodec();
        ObjectNode queryElement = mapper.readTree(jsonParser);
```

### DuplicateThrows
There is a more general exception, 'org.apache.james.mailbox.exception.MailboxException', in the throws list already.
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreAttachmentManager.java`
#### Snippet
```java

    @Override
    public AttachmentMetadata getAttachment(AttachmentId attachmentId, MailboxSession mailboxSession) throws MailboxException, AttachmentNotFoundException {
        AttachmentMetadata attachment = attachmentMapperFactory.getAttachmentMapper(mailboxSession).getAttachment(attachmentId);
        if (!exists(attachment, mailboxSession)) {
```

### DuplicateThrows
There is a more general exception, 'org.apache.james.mailbox.exception.MailboxException', in the throws list already.
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MessageIdMapper.java`
#### Snippet
```java
    List<MailboxId> findMailboxes(MessageId messageId);

    void save(MailboxMessage mailboxMessage) throws MailboxNotFoundException, MailboxException;

    void copyInMailbox(MailboxMessage mailboxMessage, Mailbox mailbox) throws MailboxException;
```

### DuplicateThrows
There is a more general exception, 'org.apache.james.mailbox.exception.MailboxException', in the throws list already.
in `mailbox/api/src/main/java/org/apache/james/mailbox/AttachmentManager.java`
#### Snippet
```java
    boolean exists(AttachmentId attachmentId, MailboxSession session) throws MailboxException;

    AttachmentMetadata getAttachment(AttachmentId attachmentId, MailboxSession mailboxSession) throws MailboxException, AttachmentNotFoundException;

    List<AttachmentMetadata> getAttachments(List<AttachmentId> attachmentIds, MailboxSession mailboxSession) throws MailboxException;
```

### DuplicateThrows
There is a more general exception, 'org.apache.james.mailbox.exception.MailboxException', in the throws list already.
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxAnnotationManager.java`
#### Snippet
```java
     * @throws MailboxException in case of selected mailbox does not exist
     */
    void updateAnnotations(MailboxPath mailboxPath, MailboxSession session, List<MailboxAnnotation> mailboxAnnotations) throws MailboxException, AnnotationException;

    Publisher<Void> updateAnnotationsReactive(MailboxPath mailboxPath, MailboxSession session, List<MailboxAnnotation> mailboxAnnotations);
```

### DuplicateThrows
There is a more general exception, 'java.lang.Exception', in the throws list already.
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MessageAlteringUtils.java`
#### Snippet
```java
    }

    private MimeBodyPart getAttachmentPart(MimeMessage originalMessage, String head) throws MessagingException, Exception {
        MimeBodyPart attachmentPart = new MimeBodyPart();
        switch (mailet.getInitParameters().getAttachmentType()) {
```

### DuplicateThrows
There is a more general exception, 'java.lang.Exception', in the throws list already.
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MessageAlteringUtils.java`
#### Snippet
```java
    }

    private BodyPart getBodyPart(Mail originalMail, MimeMessage originalMessage, String head) throws MessagingException, Exception {
        MimeBodyPart part = new MimeBodyPart();
        part.setText(getText(originalMail, originalMessage, head));
```

### DuplicateThrows
There is a more general exception, 'org.apache.james.mailbox.exception.MailboxException', in the throws list already.
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    public Mono<FetchResponse> build(FetchData fetch, MessageResult result, MessageManager mailbox, SelectedMailbox selectedMailbox, MailboxSession mailboxSession) throws MessageRangeException, MailboxException {
        final MessageUid resultUid = result.getUid();
        return selectedMailbox.msn(resultUid).fold(() -> {
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/container/core/src/main/java/org/apache/james/server/core/filesystem/FileSystemImpl.java`
#### Snippet
```java

    @Override
    public File getFileWithinBaseDir(String fileURL) throws FileNotFoundException, IOException {
        final File file = getFile(fileURL);
        resourceLoader.validate(file);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/FilterDeserializer.java`
#### Snippet
```java

    @Override
    public Filter deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        ObjectMapper mapper = (ObjectMapper) p.getCodec();
        ObjectNode obj = (ObjectNode) mapper.readTree(p);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/MultipleClassesDeserializer.java`
#### Snippet
```java

    @Override
    public Object deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        ObjectMapper mapper = (ObjectMapper) p.getCodec();
        final JsonNode root = mapper.readTree(p);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public void serialize(MailboxId value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeString(value.serialize());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public void serialize(MessageId value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeFieldName(value.serialize());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public void serialize(MailboxId value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeFieldName(value.serialize());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java
    public static class UsernameSerializer extends JsonSerializer<Username> {
        @Override
        public void serialize(Username value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeString(value.asString());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public DispositionType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {
            String value = jsonParser.getValueAsString();
            return DispositionType.fromString(value)
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java
    public static class UsernameDeserializer extends JsonDeserializer<Username> {
        @Override
        public Username deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            return Username.of(p.getValueAsString());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public DispositionSendingMode deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {
            String value = jsonParser.getValueAsString();
            return DispositionSendingMode.fromString(value)
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public void serialize(MessageId value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeString(value.serialize());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public DispositionActionMode deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {
            String value = jsonParser.getValueAsString();
            return DispositionActionMode.fromString(value)
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java
    public static class UsernameKeySerializer extends JsonSerializer<Username> {
        @Override
        public void serialize(Username value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeFieldName(value.asString());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public MessageId deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            return factory.fromString(p.getValueAsString());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public MailboxId deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            return factory.fromString(p.getValueAsString());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java
    public static class ContentTypeDeserializer extends JsonDeserializer<ContentType> {
        @Override
        public ContentType deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {
            String value = jsonParser.getValueAsString();
            return ContentType.of(value);
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

        @Override
        public Rights.Right deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
            String nodeValue = p.getValueAsString();
            Preconditions.checkArgument(nodeValue.length() == 1, "Rights should be represented as single value characters");
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java
    public static class ContentTypeSerializer extends JsonSerializer<ContentType> {
        @Override
        public void serialize(ContentType value, JsonGenerator gen, SerializerProvider serializers) throws IOException, JsonProcessingException {
            gen.writeString(value.asString());
        }
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapRequestParserImpl.java`
#### Snippet
```java
    @Override
    public <T extends JmapRequest> T extractJmapRequest(InvocationRequest request, Class<T> requestClass)
            throws IOException, JsonParseException, JsonMappingException {
        Preconditions.checkNotNull(requestClass, "requestClass should not be null");

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapRequestParserImpl.java`
#### Snippet
```java
    @Override
    public <T extends JmapRequest> T extractJmapRequest(InvocationRequest request, Class<T> requestClass)
            throws IOException, JsonParseException, JsonMappingException {
        Preconditions.checkNotNull(requestClass, "requestClass should not be null");

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapRequestParser.java`
#### Snippet
```java

    <T extends JmapRequest> T extractJmapRequest(InvocationRequest request, Class<T> requestClass)
            throws IOException, JsonParseException, JsonMappingException;
}

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapRequestParser.java`
#### Snippet
```java

    <T extends JmapRequest> T extractJmapRequest(InvocationRequest request, Class<T> requestClass)
            throws IOException, JsonParseException, JsonMappingException;
}

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java


    private void copyResources(Path resourcesFolder) throws FileNotFoundException, IOException {
        CONFIGURATION_FILE_NAMES
            .forEach(resourceName -> copyResource(resourcesFolder, resourceName));
```

### DuplicateThrows
There is a more general exception, 'javax.mail.MessagingException', in the throws list already.
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private boolean applyBodyReplacingUnits(Mail mail, ReplaceConfig replaceConfig, Optional<Charset> charset) throws IOException, MessagingException, ParseException {
        if (!replaceConfig.getBodyReplacingUnits().isEmpty()) {
            Object bodyObj = mail.getMessage().getContent();
```

### DuplicateThrows
There is a more general exception, 'javax.mail.MessagingException', in the throws list already.
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private void setContent(Mail mail, String body, Optional<Charset> charset) throws MessagingException, ParseException {
        mail.getMessage().setContent(body, getContentType(mail, charset));
    }
```

### DuplicateThrows
There is a more general exception, 'javax.mail.MessagingException', in the throws list already.
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private String getContentType(Mail mail, Optional<Charset> charset) throws MessagingException, ParseException {
        String contentTypeAsString = mail.getMessage().getContentType();
        if (charset.isPresent()) {
```

### DuplicateThrows
There is a more general exception, 'java.lang.Exception', in the throws list already.
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
    }

    private boolean shouldBeRemoved(BodyPart bodyPart, Mail mail) throws MessagingException, Exception {
        String fileName = getFilename(bodyPart);

```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/jackson/MailAddressDeserializer.java`
#### Snippet
```java
public class MailAddressDeserializer extends JsonDeserializer<MailAddress> {
    @Override
    public MailAddress deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException, JsonProcessingException {
        String value = jsonParser.getValueAsString();
        try {
```

### DuplicateThrows
There is a more general exception, 'org.apache.james.mailbox.exception.MailboxException', in the throws list already.
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
     * Return a {@link Query} which is build based on the given {@link SearchQuery.ConjunctionCriterion}
     */
    private Query createConjunctionQuery(SearchQuery.ConjunctionCriterion crit, Query inMailboxes, Collection<MessageUid> recentUids) throws UnsupportedSearchException, MailboxException {
        List<Criterion> crits = crit.getCriteria();
        BooleanQuery conQuery = new BooleanQuery();
```

### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `server/container/filesystem-api/src/main/java/org/apache/james/filesystem/api/FileSystem.java`
#### Snippet
```java
     * Similar to getFile but enforces the file to be within baseDir
     */
    default File getFileWithinBaseDir(String fileURL) throws FileNotFoundException, IOException {
        Path path = getFile(fileURL).toPath().normalize();
        if (path.startsWith(getBasedir().toPath().normalize())) {
```

## RuleId[id=UnusedAssignment]
### UnusedAssignment
Variable `size` initializer `0` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/MailSizeEsmtpExtension.java`
#### Snippet
```java
    private HookResult doMailSize(SMTPSession session,
            String mailOptionValue, MaybeSender tempSender) {
        int size = 0;
        try {
            size = Integer.parseInt(mailOptionValue);
```

### UnusedAssignment
The value `null` assigned to `optionTokenizer` is never used
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/RcptCmdHandler.java`
#### Snippet
```java
                }
            }
            optionTokenizer = null;
        }

```

### UnusedAssignment
Variable `mailboxPathList` initializer `null` is redundant
in `mailbox/tools/copier/src/main/java/org/apache/james/mailbox/tools/copier/MailboxCopierImpl.java`
#### Snippet
```java
        MailboxSession dstMailboxSession;

        List<MailboxPath> mailboxPathList = null;

        srcMailboxSession = srcMailboxManager.createSystemSession(Username.of("manager"));
```

### UnusedAssignment
Variable `mailboxPath` initializer `null` is redundant
in `mailbox/tools/copier/src/main/java/org/apache/james/mailbox/tools/copier/MailboxCopierImpl.java`
#### Snippet
```java
        }

        MailboxPath mailboxPath = null;
        
        for (int i = 0; i < mailboxPathList.size(); i++) {
```

### UnusedAssignment
Variable `res` initializer `null` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/AuthCmdHandler.java`
#### Snippet
```java
        }

        Response res = null;

        List<AuthHook> hooks = getHooks();
```

### UnusedAssignment
Variable `response` initializer `null` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/AuthCmdHandler.java`
#### Snippet
```java
                .orElse(List.of());
            Preconditions.checkArgument(tokens.size() == 1 || tokens.size() == 2 || tokens.size() == 3);
            Response response = null;

            if (tokens.size() == 1) {
```

### UnusedAssignment
Variable `res` initializer `null` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/AuthCmdHandler.java`
#### Snippet
```java

    protected Response doDelegation(SMTPSession session, Username username) {
        Response res = null;

        List<AuthHook> hooks = Optional.ofNullable(getHooks())
```

### UnusedAssignment
The value changed at `i++` is never used
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
            throw new ConfigurationException("Illegal token: <" + accountsChildName + "> in <accounts>");
        }
        i++;
    }

```

### UnusedAssignment
The value `0` assigned to `headerEnd` is never used
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAEncryptedMailboxMessage.java`
#### Snippet
```java
                int headerEnd = bodyStartOctet;
                if (headerEnd < 0) {
                    headerEnd = 0;
                }
                InputStream stream = content.getInputStream();
```

### UnusedAssignment
Variable `verbose` initializer `false` is redundant
in `mpt/core/src/main/java/org/apache/james/mpt/monitor/SystemLoggingMonitor.java`
#### Snippet
```java
public final class SystemLoggingMonitor implements Monitor {

    private boolean verbose = false;

    public SystemLoggingMonitor() {
```

### UnusedAssignment
The value `false` assigned to `previousWasDigit` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/Tokenizer.java`
#### Snippet
```java
            } else if (previousWasDigit && (ch == '.' || ch == ',')) {
                reader.mark(1);
                previousWasDigit = false;
                i = reader.read();
                if (i == -1) {
```

### UnusedAssignment
The value `false` assigned to `previousWasDigit` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/Tokenizer.java`
#### Snippet
```java
                // eol found
                tokenCharFound = true;
                previousWasDigit = false;
                token.append(ch);
                break;
```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalysisFeeder.java`
#### Snippet
```java
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.rollback();
                    dbUpdated = false;
                }
            } catch (Exception e) {
```

### UnusedAssignment
Variable `expectedLines` initializer `new ArrayList<>()` is redundant
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
     */
    private class ServerUnorderedBlockResponse extends ServerResponse {
        private List<String> expectedLines = new ArrayList<>();

        /**
```

### UnusedAssignment
The value `null` assigned to `insert` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                }

                insert = null;
            }

```

### UnusedAssignment
The value `null` assigned to `update` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                }

                update = null;
            }
        }
```

### UnusedAssignment
Variable `dbUpdated` initializer `false` is redundant
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
        // Try UPPER, lower, and MixedCase, to see if the table is there.

        boolean dbUpdated = false;

        dbUpdated = createTable(conn, "hamTableName", "createHamTable");
```

### UnusedAssignment
The value `createTable(conn, "hamTableName", "createHamTable")` assigned to `dbUpdated` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
        boolean dbUpdated = false;

        dbUpdated = createTable(conn, "hamTableName", "createHamTable");

        dbUpdated = createTable(conn, "spamTableName", "createSpamTable");
```

### UnusedAssignment
The value `createTable(conn, "spamTableName", "createSpamTable")` assigned to `dbUpdated` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
        dbUpdated = createTable(conn, "hamTableName", "createHamTable");

        dbUpdated = createTable(conn, "spamTableName", "createSpamTable");

        dbUpdated = createTable(conn, "messageCountsTableName", "createMessageCountsTable");
```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
        if (conn != null && dbUpdated && !conn.getAutoCommit()) {
            conn.commit();
            dbUpdated = false;
        }

```

### UnusedAssignment
The value `null` assigned to `delete` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                }
                
                delete = null;
            }
        }
```

### UnusedAssignment
The value `null` assigned to `rs` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                }

                rs = null;
            }

```

### UnusedAssignment
The value `null` assigned to `pstmt` is never used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                }

                pstmt = null;
            }
        }
```

### UnusedAssignment
Variable `i` initializer `0` is redundant
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
            } else {
                inBuffer.compact();
                int i = 0;
                while ((i = source.read(inBuffer)) == 0) {
                    ;
```

### UnusedAssignment
The value `in.read()` assigned to `next` is never used
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
                    next = in.read();
                    if (next == '\n') {
                        next = in.read();
                    } else if (next != -1) {
                        outBufferNext((byte) next);
```

### UnusedAssignment
Variable `startLine` initializer `true` is redundant
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/ExtraDotInputStream.java`
#### Snippet
```java
public class ExtraDotInputStream extends InputStream {

    boolean startLine = true;
    private int last;
    private final PushbackInputStream in;
```

### UnusedAssignment
Variable `response` initializer `null` is redundant
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/QuitCmdHandler.java`
#### Snippet
```java
    protected Response quit(POP3Session session) {
        LOGGER.trace("QUIT command received");
        Response response = null;
        if (session.getHandlerState() == POP3Session.AUTHENTICATION_READY || session.getHandlerState() == POP3Session.AUTHENTICATION_USERSET) {
            return SIGN_OFF;
```

### UnusedAssignment
Variable `a` initializer `-1` is redundant
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/CRLFTerminatedInputStream.java`
#### Snippet
```java

    private int fillArray(byte[] b, int off, int len) {
        int a = -1;
        int i = 0;
        if (complete) {
```

### UnusedAssignment
Variable `limit` initializer `-1` is redundant
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/TopCmdHandler.java`
#### Snippet
```java

        private int count = 0;
        private int limit = -1;
        private int lastChar;
        private final InputStream in;
```

### UnusedAssignment
The value `decodedSubject.length()` assigned to `decodedSubjectLength` is never used
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
                    if (decodedSubjectLength > decodedSubject.length()) {
                        matchedInner = true;
                        decodedSubjectLength = decodedSubject.length();

                    }
```

### UnusedAssignment
The value `decodedSubject.length()` assigned to `decodedSubjectLength` is never used
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
                        if (decodedSubjectLength > decodedSubject.length()) {
                            matchedInner = true;
                            decodedSubjectLength = decodedSubject.length();

                        }
```

### UnusedAssignment
The value `decodedSubject.length()` assigned to `decodedSubjectLength` is never used
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
                    //    subj-fwd-trl and repeat from step (2).
                    decodedSubject = decodedSubject.substring(SUBJ_FWD_HDR.length(), decodedSubject.length() - SUBJ_FWD_TRL.length());
                    decodedSubjectLength = decodedSubject.length();
                } else {
                    break;
```

### UnusedAssignment
The value `this.buf` assigned to `buffer` is never used
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
        while (true) {
            byte[] buffer;
            if ((buffer = this.buf) != null) {

                InputStream input = this.in;
```

### UnusedAssignment
Variable `sr` initializer `null` is redundant
in `server/data/data-file/src/main/java/org/apache/james/mailrepository/file/MimeMessageStreamRepositorySource.java`
#### Snippet
```java
     * The stream repository used by this data source.
     */
    StreamRepository sr = null;

    /**
```

### UnusedAssignment
Variable `repositoryName` initializer `null` is redundant
in `server/data/data-file/src/main/java/org/apache/james/mailrepository/file/MimeMessageStreamRepositorySource.java`
#### Snippet
```java
     * The name of the repository
     */
    String repositoryName = null;

    /**
```

### UnusedAssignment
Variable `key` initializer `null` is redundant
in `server/data/data-file/src/main/java/org/apache/james/mailrepository/file/MimeMessageStreamRepositorySource.java`
#### Snippet
```java
     * this data source.
     */
    String key = null;

    private long size = -1;
```

### UnusedAssignment
Variable `script` initializer `null` is redundant
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
     */
    protected static String toString(File file, String encoding) throws FileNotFoundException {
        String script = null;
        try (Scanner scanner = new Scanner(file, encoding)) {
            scanner.useDelimiter("\\A");
```

### UnusedAssignment
The value `null` assigned to `mail` is never used
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/DataLineJamesMessageHookHandler.java`
#### Snippet
```java
                // Dispose the mail object and remove it\
                LifecycleUtil.dispose(mail);
                mail = null;
                // do the clean up
                session.resetState();
```

### UnusedAssignment
The value `null` assigned to `sqlFileUrl` is never used
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/JDBCGreylistHandler.java`
#### Snippet
```java
            try {
                sqlFile = fileSystem.getFile(sqlFileUrl);
                sqlFileUrl = null;
            } catch (Exception e) {
                LOGGER.error(e.getMessage(), e);
```

### UnusedAssignment
Variable `reportingUAName` initializer `null` is redundant
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/RejectAction.java`
#### Snippet
```java
        humanText.append(anAction.getMessage());

        String reportingUAName = null;
        try {
            reportingUAName = InetAddress.getLocalHost()
```

### UnusedAssignment
Variable `messageID` initializer `null` is redundant
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/SieveMailAdapter.java`
#### Snippet
```java
    @Override
    public String toString() {
        String messageID = null;
        try {
            messageID = getMail().getMessage().getMessageID();
```

### UnusedAssignment
Variable `actions` initializer `null` is redundant
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/SieveMailAdapter.java`
#### Snippet
```java
    @Override
    public List<Action> getActions() {
        List<Action> actions = null;
        if (null == (actions = getActionsBasic())) {
            updateActions();
```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.rollback();
                    dbUpdated = false;
                }
            } catch (Exception e) {
```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.rollback();
                    dbUpdated = false;
                }
            } catch (Exception e) {
```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
        if (conn != null && dbUpdated && !conn.getAutoCommit()) {
            conn.commit();
            dbUpdated = false;
        }

```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.rollback();
                    dbUpdated = false;
                }
            } catch (Exception e) {
```

### UnusedAssignment
The value `null` assigned to `transport` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/MailDelivrerToHost.java`
#### Snippet
```java
                    mail.getName(), outgoingMailServer.getHostName(), outgoingMailServer.getHost(), mail.getRecipients(), e.getMessage());
            }
            transport = null;
        }
    }
```

### UnusedAssignment
The value `false` assigned to `dbUpdated` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/AbstractSQLWhitelistMatcher.java`
#### Snippet
```java
        if (conn != null && dbUpdated && !conn.getAutoCommit()) {
            conn.commit();
            dbUpdated = false;
        }

```

### UnusedAssignment
The value `senderUser.toLowerCase(Locale.US)` assigned to `senderUser` is never used
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/AbstractSQLWhitelistMatcher.java`
#### Snippet
```java
        String senderUser = senderMailAddress.getLocalPart();

        senderUser = senderUser.toLowerCase(Locale.US);

        Collection<MailAddress> recipients = mail.getRecipients();
```

### UnusedAssignment
Variable `error` initializer `"Unable to list sources by mapping"` is redundant
in `server/data/data-jpa/src/main/java/org/apache/james/rrt/jpa/JPARecipientRewriteTable.java`
#### Snippet
```java
                .map(user -> MappingSource.fromUser(user.getUser(), user.getDomain()));
        } catch (PersistenceException e) {
             String error = "Unable to list sources by mapping";
             LOGGER.debug(error, e);
            throw new RecipientRewriteTableException(error, e);
```

### UnusedAssignment
The value `entityManager.merge(jpaMail)` assigned to `jpaMail` is never used
in `server/data/data-jpa/src/main/java/org/apache/james/mailrepository/jpa/JPAMailRepository.java`
#### Snippet
```java
            EntityTransaction transaction = entityManager.getTransaction();
            transaction.begin();
            jpaMail = entityManager.merge(jpaMail);
            transaction.commit();
            return key;
```

### UnusedAssignment
Variable `next` initializer `-1` is redundant
in `protocols/imap/src/main/java/org/apache/james/imap/decode/ImapRequestStreamLineReader.java`
#### Snippet
```java
    public char nextChar() throws DecodingException {
        if (!nextSeen) {
            int next = -1;

            try {
```

### UnusedAssignment
Variable `next` initializer `nextNonSpaceChar(request)` is redundant
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/FetchCommandParser.java`
#### Snippet
```java
        }

        char next = nextNonSpaceChar(request);
        if (request.nextChar() == '(') {
            request.consumeChar('(');
```

### UnusedAssignment
The value `10` assigned to `result` is never used
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
            return result;
        case '1':
            return result += 10;
        case '2':
            return result += 20;
```

### UnusedAssignment
The value `20` assigned to `result` is never used
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
            return result += 10;
        case '2':
            return result += 20;
        case '3':
            return result += 30;
```

### UnusedAssignment
The value `30` assigned to `result` is never used
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
            return result += 20;
        case '3':
            return result += 30;
        case ' ':
            return result;
```

### UnusedAssignment
Variable `highUid` initializer `Optional.empty()` is redundant
in `protocols/imap/src/main/java/org/apache/james/imap/processor/SearchProcessor.java`
#### Snippet
```java
                    // just to be safe
                    if (lowUid.isPresent()) {
                        Optional<MessageUid> highUid = Optional.empty();
                        if (highVal != Long.MAX_VALUE) {
                            highUid = selected.uid((int) highVal);
```

### UnusedAssignment
The value `null` assigned to `file` is never used
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageInputStreamSource.java`
#### Snippet
```java
                    if (file != null) {
                        FileUtils.deleteQuietly(file);
                        file = null;
                    }
                    out.dispose();
```

### UnusedAssignment
Variable `headersModified` initializer `false` is redundant
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * This is false until we parse the message
     */
    protected boolean headersModified = false;

    /**
```

### UnusedAssignment
Variable `bodyModified` initializer `false` is redundant
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * This is false until we parse the message
     */
    protected boolean bodyModified = false;

    /**
```

### UnusedAssignment
Variable `valid` initializer `false` is redundant
in `mailet/crypto/src/main/java/org/apache/james/transport/SMIMESignerInfo.java`
#### Snippet
```java
    public CertPath certPath;
    
    public boolean valid = false;
    
    public SMIMESignerInfo(X509Certificate signerCertificate, CertPath certPath, boolean valid) {
```

### UnusedAssignment
Variable `line` initializer `null` is redundant
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
                    // Read the content one line after the other and add it to the document
                    try (BufferedReader bodyReader = new BufferedReader(new InputStreamReader(in, charset))) {
                        String line = null;
                        while ((line = bodyReader.readLine()) != null) {
                            doc.add(new Field(BODY_FIELD, line.toUpperCase(Locale.US), Store.NO, Index.ANALYZED));
```

### UnusedAssignment
Variable `size` initializer `-1` is redundant
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MessageInputStream.java`
#### Snippet
```java
     * The size of the current message
     */
    private long size = -1;
    /**
     * The wrapped stream (Piped or Binary)
```

### UnusedAssignment
Variable `key` initializer `null` is redundant
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java
    // Define how to get to the data
    JDBCMailRepository repository = null;
    String key = null;
    StreamRepository sr = null;

```

### UnusedAssignment
Variable `retrieveMessageBodySQL` initializer `null` is redundant
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java
     * SQL used to retrieve the message body
     */
    String retrieveMessageBodySQL = null;

    /**
```

### UnusedAssignment
Variable `retrieveMessageBodySizeSQL` initializer `null` is redundant
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java
     * SQL used to retrieve the size of the message body
     */
    String retrieveMessageBodySizeSQL = null;

    /**
```

### UnusedAssignment
Variable `sr` initializer `null` is redundant
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java
    JDBCMailRepository repository = null;
    String key = null;
    StreamRepository sr = null;

    private long size = -1;
```

### UnusedAssignment
Variable `repository` initializer `null` is redundant
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java

    // Define how to get to the data
    JDBCMailRepository repository = null;
    String key = null;
    StreamRepository sr = null;
```

## RuleId[id=SpringPlaceholdersInspection]
### SpringPlaceholdersInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    </bean>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
        <property name="showSql" value="false"/>
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
        <property name="showSql" value="false"/>
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
                  value="service:jmx:rmi://${jmx.address}/jndi/rmi://${jmx.address}:${jmx.port}/jmxrmi"/>
    </bean>

```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
                  value="service:jmx:rmi://${jmx.address}/jndi/rmi://${jmx.address}:${jmx.port}/jmxrmi"/>
    </bean>

```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
                  value="service:jmx:rmi://${jmx.address}/jndi/rmi://${jmx.address}:${jmx.port}/jmxrmi"/>
    </bean>

```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
        <property name="clientSocketFactory" ref="restrictedRmiSocketFactory"/>
```

### SpringPlaceholdersInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="restrictedRmiSocketFactory" class="org.apache.james.util.RestrictingRMISocketFactory">
        <constructor-arg value="${jmx.address}"/>
    </bean>

```

## RuleId[id=StringEqualsCharSequence]
### StringEqualsCharSequence
`String.equals()` called with 'CharSequence' argument
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/MockPublicKeyRecordRetriever.java`
#### Snippet
```java

    public List<String> getRecords(CharSequence methodAndOptions, CharSequence selector, CharSequence token) throws TempFailException, PermFailException {
        if ("dns/txt".equals(methodAndOptions)) {
            String search = makeKey(selector, token);
            Collection<String> res = this.records.get(search);
```

## RuleId[id=JavadocReference]
### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */

```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
    public DynamicAccount(int sequenceNumber, ParsedConfiguration parsedConfiguration, String userName, String userPrefix, String userSuffix, String password, String recipientPrefix, String recipientSuffix, boolean ignoreRecipientHeader, String customRecipientHeader, Session session)
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
    private DynamicAccount(int sequenceNumber, ParsedConfiguration parsedConfiguration, String user, String password, String recipient, boolean ignoreRecipientHeader, String customRecipientHeader, Session session) throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/ParsedConfiguration.java`
#### Snippet
```java
     * @param localUsers
     * @param dnsServer
     * @throws ConfigurationException
     */
    public ParsedConfiguration(HierarchicalConfiguration<ImmutableNode> configuration, UsersRepository localUsers, DNSService dnsServer, DomainList domainList, MailQueue queue) throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
     * @param parameters
     * @return Map - The current Accounts
     * @throws ConfigurationException
     */
    protected Map<DynamicAccountKey, DynamicAccount> computeDynamicAccounts(Map<DynamicAccountKey, DynamicAccount> oldAccounts, ParsedDynamicAccountParameters parameters) throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
     *
     * @param configuration The configuration containing the parameters
     * @throws ConfigurationException
     */
    protected void setSessionParameters(HierarchicalConfiguration<ImmutableNode> configuration) {
```

### JavadocReference
Cannot resolve symbol `BlobTransferPolicy`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobTransferPolicy.java`
#### Snippet
```java

/**
 * {@link BlobTransferPolicy} which use the {@link FileSystem} to download and
 * upload data. So this implementation is only useful when using a non-clustered
 * ActiveMQ Broker or when using a shared Storage for the files.
```

### JavadocReference
Cannot resolve symbol `BlobMessage`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java

    /**
     * Returns a {@link FileInputStream} for the give {@link BlobMessage}
     */
    @Override
```

### JavadocReference
Cannot resolve symbol `BlobUploadStrategy`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java

/**
 * {@link BlobUploadStrategy} and {@link BlobDownloadStrategy} implementation
 * which use the {@link FileSystem} to lookup the {@link File} for the
 * {@link BlobMessage}
```

### JavadocReference
Cannot resolve symbol `BlobDownloadStrategy`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java

/**
 * {@link BlobUploadStrategy} and {@link BlobDownloadStrategy} implementation
 * which use the {@link FileSystem} to lookup the {@link File} for the
 * {@link BlobMessage}
```

### JavadocReference
Cannot resolve symbol `BlobMessage`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java
 * {@link BlobUploadStrategy} and {@link BlobDownloadStrategy} implementation
 * which use the {@link FileSystem} to lookup the {@link File} for the
 * {@link BlobMessage}
 */
public class FileSystemBlobStrategy implements BlobUploadStrategy, BlobDownloadStrategy, ActiveMQSupport {
```

### JavadocReference
Cannot resolve symbol `ActiveMQBlobMessage`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java

    /**
     * Return the {@link File} for the {@link ActiveMQBlobMessage}. The
     * {@link File} is lookup via the {@link FileSystem} service
     *
```

### JavadocReference
Cannot resolve symbol `BlobMessage`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java

    /**
     * Construct a {@link ActiveMQCacheableMailQueue} which only use {@link BlobMessage}
     * 
     */
```

### JavadocReference
Cannot resolve symbol `BlobMessage`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
 * <p>
 * </p>
 * The implementation use {@link BlobMessage} or {@link ObjectMessage},
 * depending on the constructor which was used
 * <p>
```

### JavadocReference
Cannot resolve symbol `ActiveMQSession`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java

    /**
     * Cast the given {@link Session} to an {@link ActiveMQSession}
     * 
     * @param session
```

### JavadocReference
Cannot resolve symbol `EntityManager`
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/JPATransactionalMapper.java`
#### Snippet
```java

    /**
     * Close open {@link EntityManager}
     */
    @Override
```

### JavadocReference
Cannot resolve symbol `EntityManager`
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/JPATransactionalMapper.java`
#### Snippet
```java

    /**
     * Return the currently used {@link EntityManager} or a new one if none exists.
     * 
     * @return entitymanger
```

### JavadocReference
Cannot resolve symbol `EntityManager`
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/JPAMailboxSessionMapperFactory.java`
#### Snippet
```java

    /**
     * Return a new {@link EntityManager} instance
     * 
     * @return manager
```

### JavadocReference
Cannot resolve symbol `Persistent`
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAStreamingMailboxMessage.java`
#### Snippet
```java

/**
 * JPA implementation of {@link AbstractJPAMailboxMessage} which use openjpas {@link Persistent} type to
 * be able to stream the message content without loading it into the memory at all. 
 * 
```

### JavadocReference
Symbol `save(Mailbox, MailboxMessage)` is inaccessible from here
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/JPAMessageMapper.java`
#### Snippet
```java

    /**
     * @see org.apache.james.mailbox.store.mail.AbstractMessageMapper#save(Mailbox, MailboxMessage)
     */
    protected MessageMetaData save(Mailbox mailbox, MailboxMessage message) throws MailboxException {
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/lib/AbstractStateCompositeProcessor.java`
#### Snippet
```java
    /**
     * Check if all needed Processors are configured and if not throw a
     * {@link ConfigurationException}
     */
    private void checkProcessors() throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `org.apache.james.webadmin.routes.MailRepositoriesRoutes`
in `server/mailrepository/mailrepository-api/src/main/java/org/apache/james/mailrepository/api/package-info.java`
#### Snippet
```java
 *     directive in mailetcontainer.xml).</li>
 *     <li>Dynamically at runtime through webmin (such as the route defined in
 *     {@link org.apache.james.webadmin.routes.MailRepositoriesRoutes#definePutMailRepository() PUT /mailRepositories}).</li>
 * </ul>
 * Since URLs can be created dynamically as well as statically, they are stored
```

### JavadocReference
Cannot resolve symbol `definePutMailRepository()`
in `server/mailrepository/mailrepository-api/src/main/java/org/apache/james/mailrepository/api/package-info.java`
#### Snippet
```java
 *     directive in mailetcontainer.xml).</li>
 *     <li>Dynamically at runtime through webmin (such as the route defined in
 *     {@link org.apache.james.webadmin.routes.MailRepositoriesRoutes#definePutMailRepository() PUT /mailRepositories}).</li>
 * </ul>
 * Since URLs can be created dynamically as well as statically, they are stored
```

### JavadocReference
Cannot resolve symbol `IOException`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     *            The text to be analyzed for Spamminess.
     * @return A 0.0 - 1.0 probability
     * @throws IOException
     *             If any error occurs
     */
```

### JavadocReference
Cannot resolve symbol `IOException`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * @param stream
     *            A reader stream on the spam message to analyze
     * @throws IOException
     *             If any error occurs
     */
```

### JavadocReference
Cannot resolve symbol `IOException`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * @param stream
     *            A reader stream on the ham message to analyze
     * @throws IOException
     *             If any error occurs
     */
```

### JavadocReference
Symbol `ldapHost` is inaccessible from here
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyUsersLDAPRepository.java`
#### Snippet
```java
     * Extracts the parameters required by the repository instance from the
     * James server configuration data. The fields extracted include
     * {@link LdapRepositoryConfiguration#ldapHost}, {@link LdapRepositoryConfiguration#userIdAttribute}, {@link LdapRepositoryConfiguration#userBase},
     * {@link LdapRepositoryConfiguration#principal}, {@link LdapRepositoryConfiguration#credentials} and {@link LdapRepositoryConfiguration#restriction}.
     *
```

### JavadocReference
Symbol `userIdAttribute` is inaccessible from here
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyUsersLDAPRepository.java`
#### Snippet
```java
     * Extracts the parameters required by the repository instance from the
     * James server configuration data. The fields extracted include
     * {@link LdapRepositoryConfiguration#ldapHost}, {@link LdapRepositoryConfiguration#userIdAttribute}, {@link LdapRepositoryConfiguration#userBase},
     * {@link LdapRepositoryConfiguration#principal}, {@link LdapRepositoryConfiguration#credentials} and {@link LdapRepositoryConfiguration#restriction}.
     *
```

### JavadocReference
Symbol `userBase` is inaccessible from here
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyUsersLDAPRepository.java`
#### Snippet
```java
     * Extracts the parameters required by the repository instance from the
     * James server configuration data. The fields extracted include
     * {@link LdapRepositoryConfiguration#ldapHost}, {@link LdapRepositoryConfiguration#userIdAttribute}, {@link LdapRepositoryConfiguration#userBase},
     * {@link LdapRepositoryConfiguration#principal}, {@link LdapRepositoryConfiguration#credentials} and {@link LdapRepositoryConfiguration#restriction}.
     *
```

### JavadocReference
Symbol `principal` is inaccessible from here
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyUsersLDAPRepository.java`
#### Snippet
```java
     * James server configuration data. The fields extracted include
     * {@link LdapRepositoryConfiguration#ldapHost}, {@link LdapRepositoryConfiguration#userIdAttribute}, {@link LdapRepositoryConfiguration#userBase},
     * {@link LdapRepositoryConfiguration#principal}, {@link LdapRepositoryConfiguration#credentials} and {@link LdapRepositoryConfiguration#restriction}.
     *
     * @param configuration
```

### JavadocReference
Symbol `credentials` is inaccessible from here
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyUsersLDAPRepository.java`
#### Snippet
```java
     * James server configuration data. The fields extracted include
     * {@link LdapRepositoryConfiguration#ldapHost}, {@link LdapRepositoryConfiguration#userIdAttribute}, {@link LdapRepositoryConfiguration#userBase},
     * {@link LdapRepositoryConfiguration#principal}, {@link LdapRepositoryConfiguration#credentials} and {@link LdapRepositoryConfiguration#restriction}.
     *
     * @param configuration
```

### JavadocReference
Symbol `restriction` is inaccessible from here
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyUsersLDAPRepository.java`
#### Snippet
```java
     * James server configuration data. The fields extracted include
     * {@link LdapRepositoryConfiguration#ldapHost}, {@link LdapRepositoryConfiguration#userIdAttribute}, {@link LdapRepositoryConfiguration#userBase},
     * {@link LdapRepositoryConfiguration#principal}, {@link LdapRepositoryConfiguration#credentials} and {@link LdapRepositoryConfiguration#restriction}.
     *
     * @param configuration
```

### JavadocReference
Cannot resolve symbol `org.apache.commons.configuration2.ex.ConfigurationException`
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyLDAPGroupRestriction.java`
#### Snippet
```java
     * @param configuration The avalon configuration instance that encapsulates the
     *                      contents of the <code>&lt;restriction&gt;<code> XML element.
     * @throws org.apache.commons.configuration2.ex.ConfigurationException
     *          If an error occurs extracting values from the configuration
     *          element.
```

### JavadocReference
Cannot resolve symbol `org.apache.onami.lifecycle.core.DefaultStager.Order`
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/Stager.java`
#### Snippet
```java
 * <p/>
 * Order of disposal is specified by the concrete implementation of this
 * interface via {@link org.apache.onami.lifecycle.core.DefaultStager.Order}.
 * <p/>
 * Implementations must be thread-safe because registration can be done from
```

### JavadocReference
Cannot resolve symbol `org.apache.onami.lifecycle.core.Stager`
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/DisposingStager.java`
#### Snippet
```java

/**
 * {@link org.apache.onami.lifecycle.core.Stager} that disposes resources.
 */
public interface DisposingStager<A extends Annotation> extends Stager<A> {
```

### JavadocReference
Cannot resolve symbol `org.apache.onami.lifecycle.core.Stager`
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/PreDestroyModule.java`
#### Snippet
```java

/**
 * Guice module to register methods to be invoked when {@link org.apache.onami.lifecycle.core.Stager#stage()} is invoked.
 * <p/>
 * Module instance have state so it must not be used to construct more than one {@link com.google.inject.Injector}.
```

### JavadocReference
Cannot resolve symbol `stage()`
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/PreDestroyModule.java`
#### Snippet
```java

/**
 * Guice module to register methods to be invoked when {@link org.apache.onami.lifecycle.core.Stager#stage()} is invoked.
 * <p/>
 * Module instance have state so it must not be used to construct more than one {@link com.google.inject.Injector}.
```

### JavadocReference
Cannot resolve symbol `Mailbox`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
    
    /**
     * Parse the headerValue and delegate to {@link #getMailboxAddress(Mailbox)}
     * 
     * If no mailbox name is found an empty String is returned
```

### JavadocReference
Cannot resolve symbol `Mailbox`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java

    /**
     * Return the DISPLAY ADDRESS for the given {@link Mailbox}. 
     * 
     * See rfc5957 3. DISPLAY Sort Value for an Address for the details
```

### JavadocReference
Cannot resolve symbol `Mailbox`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
    
    /**
     * Parse the headerValue and delegate to {@link #getDisplayAddress(Mailbox)}
     * 
     * If no display address is found an empty String is returned
```

### JavadocReference
Cannot resolve symbol `MessageSearcher`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SimpleMessageSearchIndex.java`
#### Snippet
```java

/**
 * {@link MessageSearchIndex} which just fetch {@link MailboxMessage}'s from the {@link MessageMapper} and use {@link MessageSearcher}
 * to match them against the {@link SearchQuery}.
 * 
```

### JavadocReference
Cannot resolve symbol `MojoFailureException`
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTest.java`
#### Snippet
```java
     * Validate if the configured parameters are valid
     *
     * @throws MojoFailureException
     */
    private void validate() throws MojoFailureException {
```

### JavadocReference
Cannot resolve symbol `hasRight(String, Right, MailboxACL, String)`
in `mailbox/api/src/main/java/org/apache/james/mailbox/acl/UnionMailboxACLResolver.java`
#### Snippet
```java
     * 
     * (1) Calls from
     * {@link #hasRight(String, Right, MailboxACL, String)}
     * and
     * {@link #resolveRights(Username, MailboxACL, String)}
```

### JavadocReference
Cannot resolve symbol `rightsOf(String, Mailbox)`
in `mailbox/api/src/main/java/org/apache/james/mailbox/acl/UnionMailboxACLResolver.java`
#### Snippet
```java
     * Stores global ACL which is merged with ACL of every mailbox when
     * computing
     * {@link #rightsOf(String, Mailbox)}
     * and
     * {@link #hasRight(String, Mailbox, Right)}
```

### JavadocReference
Cannot resolve symbol `Mailbox`
in `mailbox/api/src/main/java/org/apache/james/mailbox/acl/UnionMailboxACLResolver.java`
#### Snippet
```java
     * Stores global ACL which is merged with ACL of every mailbox when
     * computing
     * {@link #rightsOf(String, Mailbox)}
     * and
     * {@link #hasRight(String, Mailbox, Right)}
```

### JavadocReference
Cannot resolve symbol `hasRight(String, Mailbox, Right)`
in `mailbox/api/src/main/java/org/apache/james/mailbox/acl/UnionMailboxACLResolver.java`
#### Snippet
```java
     * {@link #rightsOf(String, Mailbox)}
     * and
     * {@link #hasRight(String, Mailbox, Right)}
     * .
     */
```

### JavadocReference
Cannot resolve symbol `Mailbox`
in `mailbox/api/src/main/java/org/apache/james/mailbox/acl/UnionMailboxACLResolver.java`
#### Snippet
```java
     * {@link #rightsOf(String, Mailbox)}
     * and
     * {@link #hasRight(String, Mailbox, Right)}
     * .
     */
```

### JavadocReference
Cannot resolve symbol `ofValid(long)`
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UidValidity.java`
#### Snippet
```java
     * compatibility purposes.
     *
     * Strongly favor uses of  {@link #ofValid(long)}
     */
    public static UidValidity of(long uidValidity) {
```

### JavadocReference
Cannot resolve symbol `org.apache.james.transport.mailets.PerSenderRateLimit`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/Requeue.java`
#### Snippet
```java
/**
 * <p><b>Requeue</b> puts back the email in a queue.
 * It can be used for throttling when combined with rate limiting mailet. {@link org.apache.james.transport.mailets.PerSenderRateLimit}</p>
 *
 * <ul>Here are supported configuration parameters:
```

### JavadocReference
Cannot resolve symbol `list`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/DelaysAndMaxRetry.java`
#### Snippet
```java
     * </pre>
     *
     * @param list the list to expand
     * @return the expanded list
     */
```

### JavadocReference
Cannot resolve symbol `allowedSpecials`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/AddressExtractor.java`
#### Snippet
```java
     *
     * @param addressString   the string to check if is a special address
     * @param allowedSpecials a List<String> with the allowed special addresses
     * @return a SpecialAddress if found, absent if not found or addressString is
     *         null
```

### JavadocReference
Cannot resolve symbol `isStatic()`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectNotify.java`
#### Snippet
```java
 * (deprecated since version 2.2, but possibly used by previoulsy written
 * extensions to {@link Redirect}) in which the getX() methods are non static:
 * in this case {@link #isStatic()} must return false.<br>
 * Finally, a "getX()" method may return a "special address" (see
 * {@link SpecialAddress}), that later will be resolved ("late bound") by a
```

### JavadocReference
Cannot resolve symbol `getPassThrough()`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectNotify.java`
#### Snippet
```java
 * Supports by default the <code>passThrough</code> init parameter (false if
 * missing). Subclasses can override this behaviour overriding
 * {@link #getPassThrough()}.
 * </p>
 *
```

### JavadocReference
Cannot resolve symbol `replaceInternetAddresses`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectNotify.java`
#### Snippet
```java
     * {@link Mail#getRecipients}). Is a "getX(Mail)" method.
     *
     * @return {@link #replaceInternetAddresses} on {@link #getRecipients()},
     */
    List<MailAddress> getTo(Mail originalMail) throws MessagingException;
```

### JavadocReference
Cannot resolve symbol `replaceMailAddresses`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectNotify.java`
#### Snippet
```java
     * original Mail object. Is a "getX(Mail)" method.
     *
     * @return {@link #replaceMailAddresses} on {@link #getRecipients()},
     */
    List<MailAddress> getRecipients(Mail originalMail) throws MessagingException; 
```

### JavadocReference
Cannot resolve symbol `getMessage()`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectNotify.java`
#### Snippet
```java
     * original Mail object. Is a "getX(Mail)" method.
     *
     * @return {@link #getMessage()}
     */
    String getMessage(Mail originalMail) throws MessagingException;
```

### JavadocReference
Cannot resolve symbol `setReversePath`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectNotify.java`
#### Snippet
```java
     *         <code>SpecialAddress.REVERSE_PATH</code> if applicable with null,
     *         but not replacing <code>SpecialAddress.NULL</code> that will be
     *         handled by {@link #setReversePath}
     */
    Optional<MailAddress> getReversePath(Mail originalMail) throws MessagingException;
```

### JavadocReference
Cannot resolve symbol `getFakeDomainCheck(Mail)`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/ProcessRedirectNotify.java`
#### Snippet
```java
     * </p>
     * <p>
     * This check can be skipped if {@link #getFakeDomainCheck(Mail)} returns
     * true.
     * </p>
```

### JavadocReference
Cannot resolve symbol `EntityManager`
in `server/data/data-jpa/src/main/java/org/apache/james/user/jpa/JPAUsersDAO.java`
#### Snippet
```java

    /**
     * Return a new {@link EntityManager} instance
     * 
     * @return manager
```

### JavadocReference
Cannot resolve symbol `EntityManager`
in `server/data/data-jpa/src/main/java/org/apache/james/domainlist/jpa/JPADomainList.java`
#### Snippet
```java

    /**
     * Return a new {@link EntityManager} instance
     *
     * @return manager
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/container/lifecycle-api/src/main/java/org/apache/james/lifecycle/api/Configurable.java`
#### Snippet
```java
     * 
     * @param config
     * @throws ConfigurationException
     */
    void configure(HierarchicalConfiguration<ImmutableNode> config) throws ConfigurationException;
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
     * @param destination
     *            the destination under which the repository get stored
     * @throws ConfigurationException
     * @throws ConfigurationException
     *             get thrown on invalid destintion syntax
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
     *            the destination under which the repository get stored
     * @throws ConfigurationException
     * @throws ConfigurationException
     *             get thrown on invalid destintion syntax
     */
```

### JavadocReference
Cannot resolve symbol `MailboxManager`
in `server/container/mailbox-jmx/src/main/java/org/apache/james/adapter/mailbox/MailboxCopierManagementMBean.java`
#### Snippet
```java

/**
 * Allow to copy {@link MailboxManager} contents from one to the other via JMX
 */
public interface MailboxCopierManagementMBean {
```

### JavadocReference
Cannot resolve symbol `MailboxManager`
in `server/container/mailbox-jmx/src/main/java/org/apache/james/adapter/mailbox/MailboxCopierManagementMBean.java`
#### Snippet
```java
    /**
     * Return a {@link Map} which contains the bean name of the registered
     * {@link MailboxManager} instances as keys and the classname of them as
     * values
     * 
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/netty/AbstractConfigurableAsyncServer.java`
#### Snippet
```java
     * 
     * @param handlerConfiguration
     * @throws ConfigurationException
     */
    protected void configureHelloName(Configuration handlerConfiguration) throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `directory`
in `server/container/core/src/main/java/org/apache/james/server/core/BufferedDeferredFileOutputStream.java`
#### Snippet
```java
     * @param prefix Prefix to use for the temporary file.
     * @param suffix Suffix to use for the temporary file.
     * @param directory Temporary file directory.
     */
    private BufferedDeferredFileOutputStream(final int threshold, final File outputFile, final String prefix,
```

### JavadocReference
Cannot resolve symbol `Configuration`
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandler.java`
#### Snippet
```java

    /**
     * Init with the given {@link Configuration}
     */
    default void init(Configuration config) throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `part`
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/AddFooter.java`
#### Snippet
```java
     * Prepends the content of the MimePart as text to the existing footer
     *
     * @param part the MimePart to attach
     */
    private String attachFooterToText(String content) throws MessagingException,
```

### JavadocReference
@value tag must reference a field with a constant initializer
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasException.java`
#### Snippet
```java
 * If true, all recipients are returned, else null. This matcher presupposes
 * that the exception has been captured as a Mail attribute
 * {@value org.apache.mailet.Mail#MAILET_ERROR_ATTRIBUTE_NAME} in the process.
 * </p>
 * 
```

### JavadocReference
Cannot resolve symbol `org.apache.lucene.analysis.Analyzer`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/StrictImapSearchAnalyzer.java`
#### Snippet
```java

   /**
    * @see org.apache.lucene.analysis.Analyzer#tokenStream(java.lang.String, java.io.Reader)
    */
   @Override
```

### JavadocReference
Cannot resolve symbol `tokenStream(java.lang.String, java.io.Reader)`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/StrictImapSearchAnalyzer.java`
#### Snippet
```java

   /**
    * @see org.apache.lucene.analysis.Analyzer#tokenStream(java.lang.String, java.io.Reader)
    */
   @Override
```

### JavadocReference
Cannot resolve symbol `Analyzer`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/StrictImapSearchAnalyzer.java`
#### Snippet
```java
/**
*
* {@link Analyzer} which match substrings. This is needed because of RFC 3501.
* 
* From RFC:
```

### JavadocReference
Cannot resolve symbol `Analyzer`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LenientImapSearchAnalyzer.java`
#### Snippet
```java

/**
 * This {@link Analyzer} is not 100% conform with RFC3501 but does
 * most times exactly what the user would expect. 
 *
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the threadId of the message
     */
    private static final String THREAD_ID_FIELD = "threadId";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with HOUR-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_HOUR_RESOLUTION = "internaldateHourResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with MINUTE-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_MINUTE_RESOLUTION = "internaldateMinuteResolution";
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.HeaderCriterion}
     */
    private Query createHeaderQuery(SearchQuery.HeaderCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.InternalDateCriterion}
     */
    private Query createInternalDateQuery(SearchQuery.InternalDateCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.UidCriterion}
     */
    private Query createModSeqQuery(SearchQuery.ModSeqCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
  
    /**
     * {@link Field} which will contain the size of the {@link MailboxMessage}
     */
    private static final String SIZE_FIELD = "size";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the id of the {@link Mailbox}
     */
    private static final String MAILBOX_ID_FIELD = "mailboxid";
```

### JavadocReference
Cannot resolve symbol `Document`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Add the given {@link Flags} to the {@link Document}
     */
    private void indexFlags(Document doc, Flags f) {
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.TextCriterion}
     */
    private Query createTextQuery(SearchQuery.TextCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.FlagCriterion}. This is kind of a hack
     * as it will do a search for the flags in this method and
     */
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which will contain the whole message header of the {@link MailboxMessage}
     */
    private static final String HEADERS_FIELD = "headers";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with MILLISECOND-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_MILLISECOND_RESOLUTION = "internaldateMillisecondResolution";
```

### JavadocReference
Cannot resolve symbol `Analyzer`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Create a {@link Analyzer} which is used to index the {@link MailboxMessage}'s
     */
    protected Analyzer createAnalyzer(boolean lenient) {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the Date header of the message with SECOND-Resolution
     */
    private static final String SENT_DATE_FIELD_SECOND_RESOLUTION = "sentdateSecondResolution";
```

### JavadocReference
Cannot resolve symbol `Document`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * Index the {@link Flags} and add it to the {@link Document}
     */
    private Document createFlagsDocument(MailboxMessage message) {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the BCC-Address of the message
     */
    private static final String BCC_FIELD = "bcc";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the user of the {@link MailboxSession}
     */
    private static final String USERS = "userSession";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which will contain the unique index of the {@link Document}
     */
    private static final String ID_FIELD = "id";
```

### JavadocReference
Cannot resolve symbol `Document`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which will contain the unique index of the {@link Document}
     */
    private static final String ID_FIELD = "id";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with YEAR-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_YEAR_RESOLUTION = "internaldateYearResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the saveDate of the message with SECOND-Resolution
     */
    private static final String SAVE_DATE_FIELD_SECOND_RESOLUTION = "saveDateSecondResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the mod-sequence of the message
     */
    private static final String MODSEQ_FIELD = "modSeq";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the Date header of the message with MONTH-Resolution
     */
    private static final String SENT_DATE_FIELD_MONTH_RESOLUTION = "sentdateMonthResolution";
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is builded based on the given {@link Criterion}
     */
    private Query createQuery(Criterion criterion, Query inMailboxes, Collection<MessageUid> recentUids) throws MailboxException {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with SECOND-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_SECOND_RESOLUTION = "internaldateSecondResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the {@link Flags} of the {@link MailboxMessage}
     */
    private static final String FLAGS_FIELD = "flags";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the saveDate of the message with MINUTE-Resolution
     */
    private static final String SAVE_DATE_FIELD_MINUTE_RESOLUTION = "saveDateMinuteResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the saveDate of the message with DAY-Resolution
     */
    private static final String SAVE_DATE_FIELD_DAY_RESOLUTION = "saveDateDayResolution";
```

### JavadocReference
Cannot resolve symbol `WildcardQuery`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * If set to true this implementation will use {@link WildcardQuery} to match suffix and prefix. This is what RFC3501 expects but is often not what the user does.
     * It also slow things a lot if you have complex queries which use many "TEXT" arguments. If you want the implementation to behave strict like RFC3501 says, you should
     * set this to true. 
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with DAY-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_DAY_RESOLUTION = "internaldateDayResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the FROM-Address of the message
     */
    private static final String FROM_FIELD = "from";
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.AllCriterion}
     */
    private Query createAllQuery(SearchQuery.AllCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the Date header of the message with DAY-Resolution
     */
    private static final String SENT_DATE_FIELD_DAY_RESOLUTION = "sentdateDayResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    private static final String USERS = "userSession";
    /**
     * {@link Field} which will contain the id of the {@link MessageId}
     */
    private static final String MESSAGE_ID_FIELD = "messageid";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the Date header of the message with MINUTE-Resolution
     */
    private static final String SENT_DATE_FIELD_MINUTE_RESOLUTION = "sentdateMinuteResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the Date header of the message with HOUR-Resolution
     */
    private static final String SENT_DATE_FIELD_HOUR_RESOLUTION = "sentdateHourResolution";
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * This method will return the right {@link Query} depending if {@link #suffixMatch} is enabled
     */
    private Query createTermQuery(String fieldName, String value) {
```

### JavadocReference
Cannot resolve symbol `Document`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * Create a new {@link Document} for the given {@link MailboxMessage}. This Document does not contain any flags data. The {@link Flags} are stored in a seperate Document.
     * 
     * See {@link #createFlagsDocument(MailboxMessage)}
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.SizeCriterion}
     */
    private Query createSizeQuery(SearchQuery.SizeCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the Date header of the message with MILLISECOND-Resolution
     */
    private static final String SENT_DATE_FIELD_MILLISECOND_RESOLUTION = "sentdateMillisecondResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which contain the internalDate of the message with MONTH-Resolution
     */
    private static final String INTERNAL_DATE_FIELD_MONTH_RESOLUTION = "internaldateMonthResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the TO-Address of the message
     */
    private static final String TO_FIELD = "to";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Prefix which will be used for each message header to store it also in a seperate {@link Field}
     */
    private static final String PREFIX_HEADER_FIELD = "header_";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the CC-Address of the message
     */
    private static final String CC_FIELD = "cc";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the saveDate of the message with MONTH-Resolution
     */
    private static final String SAVE_DATE_FIELD_MONTH_RESOLUTION = "saveDateMonthResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the saveDate of the message with HOUR-Resolution
     */
    private static final String SAVE_DATE_FIELD_HOUR_RESOLUTION = "saveDateHourResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the saveDate of the message with YEAR-Resolution
     */
    private static final String SAVE_DATE_FIELD_YEAR_RESOLUTION = "saveDateYearResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which will contain the body of the {@link MailboxMessage}
     */
    private static final String BODY_FIELD = "body";
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.UidCriterion}
     */
    private Query createUidQuery(SearchQuery.UidCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} boolean field that say if the message as an attachment or not
     */
    private static final String HAS_ATTACHMENT_FIELD = "hasAttachment";
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.ConjunctionCriterion}
     */
    private Query createConjunctionQuery(SearchQuery.ConjunctionCriterion crit, Query inMailboxes, Collection<MessageUid> recentUids) throws UnsupportedSearchException, MailboxException {
```

### JavadocReference
Cannot resolve symbol `Query`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * Return a {@link Query} which is build based on the given {@link SearchQuery.SaveDateCriterion}
     */
    private Query createSaveDateQuery(SearchQuery.SaveDateCriterion crit) throws UnsupportedSearchException {
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    /**
     * {@link Field} which contain the Date header of the message with YEAR-Resolution
     */
    private static final String SENT_DATE_FIELD_YEAR_RESOLUTION = "sentdateYearResolution";
```

### JavadocReference
Cannot resolve symbol `Field`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    
    /**
     * {@link Field} which will contain uid of the {@link MailboxMessage}
     */
    private static final String UID_FIELD = "uid";
```

### JavadocReference
Cannot resolve symbol `ConfigurableListableBeanFactory`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factory/mailetcontainer/MailetLoaderBeanFactory.java`
#### Snippet
```java
/**
 * Loads Mailets for use inside James by using the
 * {@link ConfigurableListableBeanFactory} of spring.
 * 
 * The Mailets are not registered in the factory after loading them!
```

### JavadocReference
Cannot resolve symbol `ConfigurableListableBeanFactory`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factory/mailetcontainer/MatcherLoaderBeanFactory.java`
#### Snippet
```java
/**
 * Loads Matchers for use inside James using the
 * {@link ConfigurableListableBeanFactory} of spring.
 * 
 * The Matchers are not registered in the factory after loading them!
```

### JavadocReference
Cannot resolve symbol `BeanFactoryPostProcessor`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factorypostprocessor/FileSystemBeanFactoryPostProcessor.java`
#### Snippet
```java

/**
 * {@link BeanFactoryPostProcessor} implementation which parse the spring
 * configuration and search for property values which are prefixed with
 * {@link #FS_PREFIX}.
```

### JavadocReference
Cannot resolve symbol `BeanFactoryPostProcessor`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factorypostprocessor/ConfigurationBeanFactoryPostProcessor.java`
#### Snippet
```java

/**
 * {@link BeanFactoryPostProcessor} which lookup the configuration file for the
 * configured beans and register the right class with the given beanname for it.
 * The class is lookup-ed via the class="" tag in the configuration file. The
```

### JavadocReference
Cannot resolve symbol `BeanDefinitionRegistry`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factorypostprocessor/IndexerConfigurationBeanFactoryPostProcessor.java`
#### Snippet
```java
/**
 * Read indexer.xml file and register the right bean alias in the
 * {@link BeanDefinitionRegistry} depending on the configured provider. As
 * default jpa is used!
 * 
```

### JavadocReference
Cannot resolve symbol `BeanDefinitionRegistry`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factorypostprocessor/MailboxConfigurationBeanFactoryPostProcessor.java`
#### Snippet
```java
/**
 * Read mailbox.xml file and register the right bean alias in the
 * {@link BeanDefinitionRegistry} depending on the configured provider. As
 * default jpa is used!
 * 
```

### JavadocReference
Cannot resolve symbol `ApplicationContext`
in `server/container/spring/src/main/java/org/apache/james/container/spring/context/JamesServerApplicationContext.java`
#### Snippet
```java

/**
 * {@link ApplicationContext} which loads all needed Spring beans for JAMES
 */
public class JamesServerApplicationContext extends ClassPathXmlApplicationContext implements JamesResourceLoader {
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factory/mailrepositorystore/MailRepositoryStoreBeanFactory.java`
#### Snippet
```java
     *
     * @param repConf the Configuration object used to register the repository
     * @throws ConfigurationException if an error occurs accessing the Configuration object
     */
    public synchronized void registerRepository(HierarchicalConfiguration<ImmutableNode> repConf) throws ConfigurationException {
```

### JavadocReference
Cannot resolve symbol `ResourceLoader`
in `server/container/spring/src/main/java/org/apache/james/container/spring/resource/JamesResourceLoader.java`
#### Snippet
```java

/**
 * {@link ResourceLoader} which offer extra methods to retrieve the Path to all
 * important Directories, which are in use by JAMES.
 */
```

### JavadocReference
Cannot resolve symbol `XmlWebApplicationContext`
in `server/container/spring/src/main/java/org/apache/james/container/spring/context/web/JamesServerWebApplicationContext.java`
#### Snippet
```java

/**
 * {@link XmlWebApplicationContext} which is used to startup james in a servlet
 * container
 */
```

### JavadocReference
Cannot resolve symbol `ApplicationContext`
in `server/container/spring/src/main/java/org/apache/james/container/spring/resource/DefaultJamesResourceLoader.java`
#### Snippet
```java
/**
 * Abstract base class which load JAMES files based on the prefix. This can be
 * used in different {@link ApplicationContext} implementations
 */
public class DefaultJamesResourceLoader extends DefaultResourceLoader implements JamesResourceLoader {
```

### JavadocReference
Cannot resolve symbol `Resource`
in `server/container/spring/src/main/java/org/apache/james/container/spring/resource/DefaultJamesResourceLoader.java`
#### Snippet
```java
    
    /**
     * Return the {@link Resource} for the given url. If the resource can not be
     * found null get returned
     */
```

### JavadocReference
Cannot resolve symbol `HierarchicalConfiguration`
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProvider.java`
#### Snippet
```java

    /**
     * Register a {@link HierarchicalConfiguration} for a bean name.<br>
     * It is not mandatory to use the registerConfiguration to have the
     * configuration available as the {@link #getConfiguration(String)} method may load
```

### JavadocReference
Cannot resolve symbol `HierarchicalConfiguration`
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProvider.java`
#### Snippet
```java
     * configuration may already be loaded from a previous method invocation or
     * from a previous configuration registration via the
     * {@link #registerConfiguration(String, HierarchicalConfiguration)}.<br>
     * This method may implement convention based configuration loading based on
     * naming,...
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProvider.java`
#### Snippet
```java
     * @param beanName
     * @return config
     * @throws ConfigurationException
     */
    HierarchicalConfiguration<ImmutableNode> getConfiguration(String beanName) throws ConfigurationException;
```

### JavadocReference
Cannot resolve symbol `HierarchicalConfiguration`
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProvider.java`
#### Snippet
```java

/**
 * Load {@link HierarchicalConfiguration} for beans
 */
public interface ConfigurationProvider {
```

### JavadocReference
Cannot resolve symbol `ConfigurationException`
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProviderImpl.java`
#### Snippet
```java
     * @param r
     * @return
     * @throws ConfigurationException
     * @throws IOException
     */
```

### JavadocReference
Cannot resolve symbol `JsonpDeserializer`
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/JsonpDeserializerBase.java`
#### Snippet
```java

/**
 * Base class for {@link JsonpDeserializer} implementations that accept a set of JSON events known at instanciation time.
 */
public abstract class JsonpDeserializerBase<V> implements JsonpDeserializer<V> {
```

## RuleId[id=UnaryPlus]
### UnaryPlus
Unary `+` operator
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/CompareNumericHeaderValue.java`
#### Snippet
```java
    private static final int LE = -1;
    private static final int EQ =  0;
    private static final int GE = +1;
    private static final int GT = +2;
    
```

### UnaryPlus
Unary `+` operator
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/CompareNumericHeaderValue.java`
#### Snippet
```java
    private static final int EQ =  0;
    private static final int GE = +1;
    private static final int GT = +2;
    
    private Double headerValue;
```

## RuleId[id=UnnecessarySemicolon]
### UnnecessarySemicolon
Unnecessary semicolon `;`
in `mpt/core/src/main/java/org/apache/james/mpt/session/ExternalSession.java`
#### Snippet
```java
        readBuffer.flip();
        while (oneFromLine(buffer)) {
            ;
        }
        // May have partial read
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
                int i = 0;
                while ((i = source.read(inBuffer)) == 0) {
                    ;
                }
                if (i == -1) {
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/SystemMailboxesProviderImpl.java`
#### Snippet
```java

    private Flux<MessageManager> searchMessageManagerByMailboxRole(Role aRole, Username username) {
        MailboxSession session = mailboxManager.createSystemSession(username);;
        MailboxQuery mailboxQuery = MailboxQuery.privateMailboxesBuilder(session)
            .expression(new PrefixedWildcard(aRole.getDefaultMailbox()))
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MessageMapper.java`
#### Snippet
```java
         * 
         */
        FULL;
    }

```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/FetchGroup.java`
#### Snippet
```java
        BODY_CONTENT,
        MIME_HEADERS,
        MIME_CONTENT;
    }

```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    private FetchResponse.BodyElement content(MessageResult messageResult, String name, Optional<MimePath> path) throws MailboxException {
        Content full =  Optional.ofNullable(getContent(messageResult, path))
            .orElseGet(EmptyContent::new);;
        return new ContentBodyElement(name, full);
    }
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Quotas.java`
#### Snippet
```java
    public static enum Type {
        STORAGE,
        MESSAGE;
    }

```

## RuleId[id=SimplifyStreamApiCallChains]
### SimplifyStreamApiCallChains
Can be replaced with 'peek'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
        }
        return setMessagesInMailboxReactive(mailbox, originals.stream()
            .map(original -> {
                original.setFlags(new FlagsBuilder().add(original.createFlags()).add(Flag.RECENT).build());
                original.setSaveDate(Date.from(clock.instant()));
```

### SimplifyStreamApiCallChains
Can be replaced with 'containsAll'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesUpdateProcessor.java`
#### Snippet
```java

        boolean targetContainsOutbox = messageMoves.addedMailboxIds().stream().anyMatch(outboxMailboxes::contains);
        boolean targetIsOnlyOutbox = targetMailboxes.stream().allMatch(outboxMailboxes::contains);

        assertOutboxMoveTargetsOnlyOutBox(targetContainsOutbox, targetIsOnlyOutbox);
```

### SimplifyStreamApiCallChains
Can be replaced with 'java.util.ArrayList' constructor
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/RemoveMimeHeaderByPrefix.java`
#### Snippet
```java
    protected void removeSpecific(Mail mail) {
        mail.getPerRecipientSpecificHeaders().getRecipientsWithSpecificHeaders()
                .stream()
                .collect(Collectors.toList()) // Streaming for concurrent modifications
                .forEach(recipient -> 
                    mail.getPerRecipientSpecificHeaders()
```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/MailAttributesToMimeHeaders.java`
#### Snippet
```java
            .entrySet()
            .stream()
            .forEach(entry -> addHeader(entry, mail, message));
        message.saveChanges();
    }
```

### SimplifyStreamApiCallChains
Can be replaced with 'collection.toArray()'
in `server/apps/webadmin-cli/src/main/java/org/apache/james/cli/WebAdminCli.java`
#### Snippet
```java

    public static int executeFluent(PrintStream out, PrintStream err, Collection<String> args) {
        return execute(out, err, args.stream().toArray(String[]::new));
    }

```

## RuleId[id=StringOperationCanBeSimplified]
### StringOperationCanBeSimplified
Call to `toString()` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/fastfail/DNSRBLHandler.java`
#### Snippet
```java
                        if (!txt.isEmpty()) {
                            // Set the detail
                            String blocklistedDetail = txt.iterator().next().toString();

                            session.setAttachment(RBL_DETAIL,
```

### StringOperationCanBeSimplified
`new String()` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/fastfail/DNSRBLHandler.java`
#### Snippet
```java
            this.blacklist = new String[blacklist.length];
            for (int i = 0; i < blacklist.length; i++) {
                this.blacklist[i] = new String(blacklist[i]);
            }
        }
```

### StringOperationCanBeSimplified
`new String()` is redundant
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/fastfail/DNSRBLHandler.java`
#### Snippet
```java
            this.whitelist = new String[whitelist.length];
            for (int i = 0; i < whitelist.length; i++) {
                this.whitelist[i] = new String(whitelist[i]);
            }
        }
```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java

            IOUtils.copy(patternStream, byteArrayOutputStream);
            String pattern = new String(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8);
            return new StringReader(pattern);
        }
```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java
            mustache.execute(writer, computeScopes());
            writer.flush();
            return new String(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8);
        }
    }
```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        mustache.execute(writer, scopes);
        writer.flush();
        return new String(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8);
    }

```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        IOUtils.copy(patternStream, byteArrayOutputStream);
        String pattern = new String(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8);
        return new StringReader(pattern);
    }
```

### StringOperationCanBeSimplified
`new String()` is redundant
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java

    public String applyPatterns(List<ReplacingPattern> patterns, String text) {
        String textCopy = new String(text);
        for (ReplacingPattern replacingPattern : patterns) {
            textCopy = applyPattern(replacingPattern, textCopy);
```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `server/testing/src/main/java/org/apache/james/utils/SMTPMessageSender.java`
#### Snippet
```java
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
        message.writeTo(outputStream);
        return new String(outputStream.toByteArray(), StandardCharsets.UTF_8);
    }

```

## RuleId[id=UnnecessaryCallToStringValueOf]
### UnnecessaryCallToStringValueOf
Unnecessary `Long.toString()` call
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    private Document createFlagsDocument(MailboxMessage message) {
        Document doc = new Document();
        doc.add(new Field(ID_FIELD, "flags-" + message.getMailboxId().serialize() + "-" + Long.toString(message.getUid().asLong()), Store.YES, Index.NOT_ANALYZED));
        doc.add(new Field(MAILBOX_ID_FIELD, message.getMailboxId().serialize(), Store.YES, Index.NOT_ANALYZED));
        doc.add(new NumericField(UID_FIELD,Store.YES, true).setLongValue(message.getUid().asLong()));
```

### UnnecessaryCallToStringValueOf
Unnecessary `Long.toString()` call
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

        // create an unqiue key for the document which can be used later on updates to find the document
        doc.add(new Field(ID_FIELD, membership.getMailboxId().serialize().toUpperCase(Locale.US) + "-" + Long.toString(membership.getUid().asLong()), Store.YES, Index.NOT_ANALYZED));

        doc.add(new Field(INTERNAL_DATE_FIELD_YEAR_RESOLUTION, DateTools.dateToString(membership.getInternalDate(), DateTools.Resolution.YEAR), Store.NO, Index.NOT_ANALYZED));
```

## RuleId[id=WebProperties]
### WebProperties
Cannot resolve class or package 'springframework'
in `server/apps/spring-app/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
   </context-param>
   <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

```

### WebProperties
Cannot resolve class or package 'web'
in `server/apps/spring-app/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
   </context-param>
   <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

```

### WebProperties
Cannot resolve class or package 'context'
in `server/apps/spring-app/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
   </context-param>
   <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

```

### WebProperties
Cannot resolve class 'ContextLoaderListener'
in `server/apps/spring-app/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
   </context-param>
   <listener>
      <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
   </listener>

```

## RuleId[id=DuplicatedCode]
### DuplicatedCode
Duplicated code
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/ClusterFactory.java`
#### Snippet
```java
        Preconditions.checkState(configuration.getUsername().isPresent() == configuration.getPassword().isPresent(), "If you specify username, you must specify password");

        CqlSessionBuilder sessionBuilder = CqlSession.builder();

        configuration.getHosts().forEach(server -> sessionBuilder
            .addContactPoint(InetSocketAddress.createUnresolved(server.getHostName(), server.getPort())));


        configuration.getUsername().ifPresent(username ->
            configuration.getPassword().ifPresent(password ->
                sessionBuilder.withAuthCredentials(username, password)));

        sessionBuilder.withLocalDatacenter(configuration.getLocalDC().orElse("datacenter1"));
```

### DuplicatedCode
Duplicated code
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
                Preconditions.checkNotNull(filePath, "%s cannot be null when %s is specified",
                    OPENSEARCH_HTTPS_TRUST_STORE_PATH, OPENSEARCH_HTTPS_TRUST_STORE_PASSWORD);
                Preconditions.checkNotNull(password,
                     "%s cannot be null when %s is specified",
                    OPENSEARCH_HTTPS_TRUST_STORE_PASSWORD, OPENSEARCH_HTTPS_TRUST_STORE_PATH);
                Preconditions.checkArgument(Files.exists(Paths.get(filePath)),
                    "the file '%s' from property '%s' doesn't exist", filePath, OPENSEARCH_HTTPS_TRUST_STORE_PATH);

                this.file = new File(filePath);
                this.password = password.toCharArray();
```

### DuplicatedCode
Duplicated code
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
            minDelay = Optional.empty();
            maxRetries = Optional.empty();
            requestTimeout = Optional.empty();
            hostScheme = Optional.empty();
            credential = Optional.empty();
            sslTrustConfiguration = Optional.empty();
            maxConnectionsPerHost = Optional.empty();
            maxConnections = Optional.empty();
```

### DuplicatedCode
Duplicated code
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
                lpSB.append('\\');
                pos++;
                //<x> ::= any one of the 128 ASCII characters (no exceptions)
                char x = address.charAt(pos);
                if (x < 0 || x > 127) {
                    throw new AddressException("Invalid \\ syntaxed character at position " +
                            (pos + 1) + " in '" + address + "'", address, pos + 1);
                }
                lpSB.append(x);
                pos++;
```

### DuplicatedCode
Duplicated code
in `event-bus/distributed/src/main/java/org/apache/james/events/RabbitMQEventBus.java`
#### Snippet
```java
            LocalListenerRegistry localListenerRegistry = new LocalListenerRegistry();
            keyRegistrationHandler = new KeyRegistrationHandler(namingStrategy, eventBusId, eventSerializer, sender, receiverProvider, routingKeyConverter, localListenerRegistry, listenerExecutor, retryBackoff, configuration, metricFactory);
            groupRegistrationHandler = new GroupRegistrationHandler(namingStrategy, eventSerializer, channelPool, sender, receiverProvider, retryBackoff, eventDeadLetters, listenerExecutor, eventBusId, configuration);
            eventDispatcher = new EventDispatcher(namingStrategy, eventBusId, eventSerializer, sender, localListenerRegistry, listenerExecutor, eventDeadLetters, configuration);
```

### DuplicatedCode
Duplicated code
in `json/src/main/java/org/apache/james/json/JsonGenericSerializer.java`
#### Snippet
```java
        try {
            JsonNode jsonTree = detectDuplicateProperty(value);
            return parseAsPolymorphicDTO(jsonTree);
        } catch (InvalidTypeIdException e) {
            String typeId = e.getTypeId();
            if (typeId == null) {
                throw new InvalidTypeException("Unable to deserialize the json document", e);
            } else {
                throw new UnknownTypeException("unknown type " + typeId);
            }
        } catch (MismatchedInputException e) {
            throw new InvalidTypeException("Unable to deserialize the json document", e);
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/CassandraThreadIdGuessingAlgorithm.java`
#### Snippet
```java
        SearchQuery searchQuery = SearchQuery.builder()
            .andCriteria(SearchQuery.threadId(threadId))
            .sorts(new SearchQuery.Sort(SearchQuery.Sort.SortClause.Arrival, SearchQuery.Sort.Order.NATURAL))
            .build();

        MultimailboxesSearchQuery expression = MultimailboxesSearchQuery
            .from(searchQuery)
            .build();

        return Flux.from(mailboxManager.search(expression, session, Integer.MAX_VALUE))
            .switchIfEmpty(Mono.error(() -> new ThreadNotFoundException(threadId)));
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/DeleteMessageListener.java`
#### Snippet
```java
            .flatMap(id -> readMessage(id)
                .flatMap(message -> Flux.fromIterable(deletionCallbackList).concatMap(callback -> callback.forMessage(message, mailboxId, owner)).then().thenReturn(message))
                .flatMap(message -> deleteUnreferencedAttachments(message).thenReturn(message))
                .flatMap(this::deleteMessageBlobs)
                .flatMap(this::deleteAttachmentMessageIds)
                .then(messageDAO.delete(messageId))
                .then(messageDAOV3.delete(messageId))
                .then(threadLookupDAO.selectOneRow(messageId)
                    .flatMap(key -> threadDAO.deleteSome(key.getUsername(), key.getMimeMessageIds())
                        .collectList()))
                .then(threadLookupDAO.deleteOneRow(messageId)));
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraDeletedMessageDAO.java`
#### Snippet
```java
        if (uids.size() == 1) {
            return cassandraAsyncExecutor.executeVoid(
                addStatement.bind()
                    .setUuid(MAILBOX_ID, cassandraId.asUuid())
                    .setLong(UID, uids.iterator().next().asLong()));
        } else {
            Stream<BatchStatement> batches = Lists.partition(uids, BATCH_STATEMENT_WINDOW)
                .stream()
                .map(uidBatch -> {
                    BatchStatementBuilder batch = new BatchStatementBuilder(BatchType.UNLOGGED);
                    uidBatch.forEach(uid -> batch.addStatement(addStatement.bind()
                        .setUuid(MAILBOX_ID, cassandraId.asUuid())
                        .setLong(UID, uid.asLong())));
                    return batch.build();
                });
            return Flux.fromStream(batches)
                .flatMap(cassandraAsyncExecutor::executeVoid, LOW_CONCURRENCY)
                .then();
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMailboxRecentsDAO.java`
#### Snippet
```java
        if (uids.size() == 1) {
            return cassandraAsyncExecutor.executeVoid(deleteStatement.bind()
                .setUuid(CassandraMailboxRecentsTable.MAILBOX_ID, mailboxId.asUuid())
                .setLong(CassandraMailboxRecentsTable.RECENT_MESSAGE_UID, uids.iterator().next().asLong()));
        } else {
            Stream<BatchStatement> batches = Lists.partition(uids, BATCH_STATEMENT_WINDOW)
                .stream()
                .map(uidBatch -> {
                    BatchStatementBuilder batch = new BatchStatementBuilder(BatchType.UNLOGGED);
                    uidBatch.forEach(uid -> batch.addStatement(deleteStatement.bind()
                        .setUuid(CassandraMailboxRecentsTable.MAILBOX_ID, mailboxId.asUuid())
                        .setLong(CassandraMailboxRecentsTable.RECENT_MESSAGE_UID, uid.asLong())));
                    return batch.build();
                });
            return Flux.fromStream(batches)
                .flatMap(cassandraAsyncExecutor::executeVoid, LOW_CONCURRENCY)
                .then();
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageDAO.java`
#### Snippet
```java
            ByteSource bodyByteSource = new ByteSource() {
                @Override
                public InputStream openStream() {
                    try {
                        return message.getBodyContent();
                    } catch (IOException e) {
                        throw new RuntimeException(e);
                    }
                }

                @Override
                public long size() {
                    return message.getBodyOctets();
                }
            };

            Mono<BlobId> headerFuture = Mono.from(blobStore.save(blobStore.getDefaultBucketName(), headerContent, SIZE_BASED));
            Mono<BlobId> bodyFuture = Mono.from(blobStore.save(blobStore.getDefaultBucketName(), bodyByteSource, LOW_COST));

            return headerFuture.zipWith(bodyFuture);
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageDAO.java`
#### Snippet
```java
        Optional<UdtValue> maybeSetAttachmentsName = messageAttachment.getName()
            .map(name -> result.setString(Attachments.NAME, name));

        Optional<UdtValue> maybeSetAttachmentsCId = maybeSetAttachmentsName
            .map(udtValue -> messageAttachment.getCid()
                .map(cid -> udtValue.setString(Attachments.CID, cid.getValue()))
                .orElse(udtValue));

        return maybeSetAttachmentsCId.orElse(result);
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
        ComposedMessageId composedMessageId = metadata.getComposedMessageId().getComposedMessageId();
        Flags flags = metadata.getComposedMessageId().getFlags();
        ThreadId threadId = metadata.getComposedMessageId().getThreadId();

        BoundStatementBuilder statementBuilder = insert.boundStatementBuilder();
        if (flags.getUserFlags().length == 0) {
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
if (updatedFlags.isChanged(Flag.ANSWERED)) {
            statementBuilder.setBoolean(ANSWERED, updatedFlags.isModifiedToSet(Flag.ANSWERED));
        } else {
            statementBuilder.unset(ANSWERED);
        }
        if (updatedFlags.isChanged(Flag.DRAFT)) {
            statementBuilder.setBoolean(DRAFT, updatedFlags.isModifiedToSet(Flag.DRAFT));
        } else {
            statementBuilder.unset(DRAFT);
        }
        if (updatedFlags.isChanged(Flag.FLAGGED)) {
            statementBuilder.setBoolean(FLAGGED, updatedFlags.isModifiedToSet(Flag.FLAGGED));
        } else {
            statementBuilder.unset(FLAGGED);
        }
        if (updatedFlags.isChanged(Flag.DELETED)) {
            statementBuilder.setBoolean(DELETED, updatedFlags.isModifiedToSet(Flag.DELETED));
        } else {
            statementBuilder.unset(DELETED);
        }
        if (updatedFlags.isChanged(Flag.RECENT)) {
            statementBuilder.setBoolean(RECENT, updatedFlags.getNewFlags().contains(Flag.RECENT));
        } else {
            statementBuilder.unset(RECENT);
        }
        if (updatedFlags.isChanged(Flag.SEEN)) {
            statementBuilder.setBoolean(SEEN, updatedFlags.isModifiedToSet(Flag.SEEN));
        } else {
            statementBuilder.unset(SEEN);
        }
        if (updatedFlags.isChanged(Flag.USER)) {
            statementBuilder.setBoolean(USER, updatedFlags.isModifiedToSet(Flag.USER));
        } else {
            statementBuilder.unset(USER);
        }
        Sets.SetView<String> removedFlags = Sets.difference(
            ImmutableSet.copyOf(updatedFlags.getOldFlags().getUserFlags()),
            ImmutableSet.copyOf(updatedFlags.getNewFlags().getUserFlags()));
        Sets.SetView<String> addedFlags = Sets.difference(
            ImmutableSet.copyOf(updatedFlags.getNewFlags().getUserFlags()),
            ImmutableSet.copyOf(updatedFlags.getOldFlags().getUserFlags()));
        if (addedFlags.isEmpty()) {
            statementBuilder.unset(ADDED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(ADDED_USERS_FLAGS, addedFlags, String.class);
        }
        if (removedFlags.isEmpty()) {
            statementBuilder.unset(REMOVED_USERS_FLAGS);
        } else {
            statementBuilder.setSet(REMOVED_USERS_FLAGS, removedFlags, String.class);
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdMapper.java`
#### Snippet
```java
        if (fetchType == FetchType.METADATA && metadata.isComplete()) {
            return Mono.just(metadata.asMailboxMessage(EMPTY_BYTE_ARRAY));
        }
        if (fetchType == FetchType.HEADERS && metadata.isComplete()) {
            return Mono.from(blobStore.readBytes(blobStore.getDefaultBucketName(), metadata.getHeaderContent().get(), SIZE_BASED))
                .map(metadata::asMailboxMessage);
        }
        return messageDAOV3.retrieveMessage(metadata.getComposedMessageId(), fetchType)
            .switchIfEmpty(Mono.defer(() -> messageDAO.retrieveMessage(metadata.getComposedMessageId(), fetchType)))
            .map(messageRepresentation -> Pair.of(metadata.getComposedMessageId(), messageRepresentation))
            .flatMap(messageRepresentation -> attachmentLoader.addAttachmentToMessage(messageRepresentation, metadata.getSaveDate(), fetchType));
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        Insert insert = insertInto(TABLE_NAME)
            .value(MESSAGE_ID, bindMarker(MESSAGE_ID))
            .value(MAILBOX_ID, bindMarker(MAILBOX_ID))
            .value(IMAP_UID, bindMarker(IMAP_UID))
            .value(THREAD_ID, bindMarker(THREAD_ID))
            .value(MOD_SEQ, bindMarker(MOD_SEQ))
            .value(ANSWERED, bindMarker(ANSWERED))
            .value(DELETED, bindMarker(DELETED))
            .value(DRAFT, bindMarker(DRAFT))
            .value(FLAGGED, bindMarker(FLAGGED))
            .value(RECENT, bindMarker(RECENT))
            .value(SEEN, bindMarker(SEEN))
            .value(USER, bindMarker(USER))
            .value(USER_FLAGS, bindMarker(USER_FLAGS))
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        ComposedMessageId composedMessageId = metadata.getComposedMessageId().getComposedMessageId();
        Flags flags = metadata.getComposedMessageId().getFlags();
        ThreadId threadId = metadata.getComposedMessageId().getThreadId();

        BoundStatementBuilder statementBuilder = insert.boundStatementBuilder();
        if (metadata.getComposedMessageId().getFlags().getUserFlags().length == 0) {
            statementBuilder.unset(USER_FLAGS);
        } else {
            statementBuilder.setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class);
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
        return cassandraAsyncExecutor.executeVoid(statementBuilder
            .set(MESSAGE_ID, ((CassandraMessageId) composedMessageId.getMessageId()).get(), TypeCodecs.TIMEUUID)
            .set(MAILBOX_ID, ((CassandraId) composedMessageId.getMailboxId()).asUuid(), TypeCodecs.TIMEUUID)
            .setLong(IMAP_UID, composedMessageId.getUid().asLong())
            .setLong(MOD_SEQ, metadata.getComposedMessageId().getModSeq().asLong())
            .setUuid(THREAD_ID, ((CassandraMessageId) threadId.getBaseMessageId()).get())
            .setBoolean(ANSWERED, flags.contains(Flag.ANSWERED))
            .setBoolean(DELETED, flags.contains(Flag.DELETED))
            .setBoolean(DRAFT, flags.contains(Flag.DRAFT))
            .setBoolean(FLAGGED, flags.contains(Flag.FLAGGED))
            .setBoolean(RECENT, flags.contains(Flag.RECENT))
            .setBoolean(SEEN, flags.contains(Flag.SEEN))
            .setBoolean(USER, flags.contains(Flag.USER))
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
```

### DuplicatedCode
Duplicated code
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/AbstractJPAMailboxMessage.java`
#### Snippet
```java
        answered = flags.contains(Flags.Flag.ANSWERED);
        deleted = flags.contains(Flags.Flag.DELETED);
        draft = flags.contains(Flags.Flag.DRAFT);
        flagged = flags.contains(Flags.Flag.FLAGGED);
        recent = flags.contains(Flags.Flag.RECENT);
        seen = flags.contains(Flags.Flag.SEEN);
```

### DuplicatedCode
Duplicated code
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
            doc.add(new Field(SAVE_DATE_FIELD_YEAR_RESOLUTION, DateTools.dateToString(saveDate, DateTools.Resolution.YEAR), Store.NO, Index.NOT_ANALYZED));
            doc.add(new Field(SAVE_DATE_FIELD_MONTH_RESOLUTION, DateTools.dateToString(saveDate, DateTools.Resolution.MONTH), Store.NO, Index.NOT_ANALYZED));
            doc.add(new Field(SAVE_DATE_FIELD_DAY_RESOLUTION, DateTools.dateToString(saveDate, DateTools.Resolution.DAY), Store.NO, Index.NOT_ANALYZED));
            doc.add(new Field(SAVE_DATE_FIELD_HOUR_RESOLUTION, DateTools.dateToString(saveDate, DateTools.Resolution.HOUR), Store.NO, Index.NOT_ANALYZED));
            doc.add(new Field(SAVE_DATE_FIELD_MINUTE_RESOLUTION, DateTools.dateToString(saveDate, DateTools.Resolution.MINUTE), Store.NO, Index.NOT_ANALYZED));
            doc.add(new Field(SAVE_DATE_FIELD_SECOND_RESOLUTION, DateTools.dateToString(saveDate, DateTools.Resolution.SECOND), Store.NO, Index.NOT_ANALYZED));
```

### DuplicatedCode
Duplicated code
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
                                    String mailboxAddress = SearchUtil.getMailboxAddress(mailbox);
                                    String mailboxDisplay = SearchUtil.getDisplayAddress(mailbox);

                                    if ("To".equalsIgnoreCase(headerName)) {
                                        firstToMailbox = mailboxAddress;
                                        firstToDisplay = mailboxDisplay;
                                    } else if ("From".equalsIgnoreCase(headerName)) {
                                        firstFromMailbox = mailboxAddress;
                                        firstFromDisplay = mailboxDisplay;

                                    } else if ("Cc".equalsIgnoreCase(headerName)) {
                                        firstCcMailbox = mailboxAddress;
                                    }
```

### DuplicatedCode
Duplicated code
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
        switch (res) {
            case Year:
                return SENT_DATE_FIELD_YEAR_RESOLUTION;
            case Month:
                return SENT_DATE_FIELD_MONTH_RESOLUTION;
            case Day:
                return SENT_DATE_FIELD_DAY_RESOLUTION;
            case Hour:
                return SENT_DATE_FIELD_HOUR_RESOLUTION;
            case Minute:
                return SENT_DATE_FIELD_MINUTE_RESOLUTION;
            case Second:
                return SENT_DATE_FIELD_SECOND_RESOLUTION;
            default:
                return SENT_DATE_FIELD_MILLISECOND_RESOLUTION;
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
        NumericOperator op = crit.getOperator();
        switch (op.getType()) {
        case EQUALS:
            return NumericRangeQuery.newLongRange(SIZE_FIELD, op.getValue(), op.getValue(), true, true);
        case GREATER_THAN:
            return NumericRangeQuery.newLongRange(SIZE_FIELD, op.getValue(), Long.MAX_VALUE, false, true);
        case LESS_THAN:
            return NumericRangeQuery.newLongRange(SIZE_FIELD, Long.MIN_VALUE, op.getValue(), true, false);
        default:
            throw new UnsupportedSearchException();
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryPerUserMaxQuotaManager.java`
#### Snippet
```java
        return Stream.of(
                Pair.of(Quota.Scope.User, Optional.ofNullable(userMaxMessage.get(quotaRoot.getValue()))),
                Pair.of(Quota.Scope.Domain, quotaRoot.getDomain().flatMap(domainQuotaFunction)),
                Pair.of(Quota.Scope.Global, maxMessage))
            .filter(pair -> pair.getValue().isPresent())
            .collect(ImmutableMap.toImmutableMap(Pair::getKey, value -> value.getValue().get()));
```

### DuplicatedCode
Duplicated code
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/MailboxMappingFactory.java`
#### Snippet
```java
            .put(JsonMessageConstants.FROM, new Property.Builder()
                .object(new ObjectProperty.Builder()
                    .properties(ImmutableMap.of(
                        JsonMessageConstants.EMailer.NAME, new Property.Builder()
                            .text(new TextProperty.Builder().analyzer(KEEP_MAIL_AND_URL).build())
                            .build(),
                        JsonMessageConstants.EMailer.DOMAIN, new Property.Builder()
                            .text(new TextProperty.Builder()
                                .analyzer(SIMPLE)
                                .searchAnalyzer(KEYWORD)
                                .build())
                            .build(),
                        JsonMessageConstants.EMailer.ADDRESS, new Property.Builder()
                            .text(new TextProperty.Builder()
                                .analyzer(STANDARD)
                                .searchAnalyzer(KEEP_MAIL_AND_URL)
                                .fields(RAW, new Property.Builder()
                                    .keyword(new KeywordProperty.Builder().normalizer(CASE_INSENSITIVE).build())
                                    .build())
                                .build())
                            .build()
                    ))
                    .build())
                .build())
```

### DuplicatedCode
Duplicated code
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MessageStorer.java`
#### Snippet
```java
            MessageMapper messageMapper = mapperFactory.getMessageMapper(session);
            MessageId messageId = messageIdFactory.generate();
            Optional<MimeMessageId> mimeMessageId = MimeMessageHeadersUtil.parseMimeMessageId(headers);
            Optional<MimeMessageId> inReplyTo = MimeMessageHeadersUtil.parseInReplyTo(headers);
            Optional<List<MimeMessageId>> references = MimeMessageHeadersUtil.parseReferences(headers);
            Optional<Subject> subject = MimeMessageHeadersUtil.parseSubject(headers);
```

### DuplicatedCode
Duplicated code
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMailboxManager.java`
#### Snippet
```java
        return Mono.zip(Mono.from(getMailboxReactive(from, session)), Mono.from(getMailboxReactive(to, session)))
            .flatMapMany(fromTo -> configuration.getMoveBatcher().batchMessagesReactive(set, messageRange -> {
                StoreMessageManager fromMessageManager = (StoreMessageManager) fromTo.getT1();
                StoreMessageManager toMessageManager = (StoreMessageManager) fromTo.getT2();

                return fromMessageManager.copyTo(messageRange, toMessageManager, session).flatMapIterable(Function.identity());
            }));
```

### DuplicatedCode
Duplicated code
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMailboxManager.java`
#### Snippet
```java
        return Mono.zip(Mono.from(getMailboxReactive(from, session)), Mono.from(getMailboxReactive(to, session)))
            .flatMapMany(fromTo -> configuration.getMoveBatcher().batchMessagesReactive(set, messageRange -> {
                StoreMessageManager fromMessageManager = (StoreMessageManager) fromTo.getT1();
                StoreMessageManager toMessageManager = (StoreMessageManager) fromTo.getT2();

                return fromMessageManager.moveTo(messageRange, toMessageManager, session).flatMapIterable(Function.identity());
            }));
```

### DuplicatedCode
Duplicated code
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearches.java`
#### Snippet
```java
        SearchQuery.DateComparator type = operator.getType();
        switch (type) {
        case ON:
            return on(internalDate, date, dateResultion);
        case BEFORE:
            return before(internalDate, date, dateResultion);
        case AFTER:
            return after(internalDate, date, dateResultion);
        default:
            throw new UnsupportedSearchException();
        }
```

### DuplicatedCode
Duplicated code
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/PartContentBuilder.java`
#### Snippet
```java
                for (EntityState state = parser.getState(); state != EntityState.T_BODY
                        && state != EntityState.T_START_MULTIPART; state = parser
                        .next()) {
                    if (state == EntityState.T_END_OF_STREAM) {
                        valid = false;
                        break;
                    }
                }
                if (valid) {
                    content = IOUtils.toByteArray(parser.getInputStream());
                } else {
                    content = EMPTY;
                }
```

### DuplicatedCode
Duplicated code
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCUtil.java`
#### Snippet
```java
        return (columnExistsCaseSensitive(dbMetaData, tableName, columnName) || columnExistsCaseSensitive(dbMetaData, tableName, columnName.toUpperCase(Locale.US)) || columnExistsCaseSensitive(dbMetaData, tableName, columnName.toLowerCase(Locale.US))
                || columnExistsCaseSensitive(dbMetaData, tableName.toUpperCase(Locale.US), columnName) || columnExistsCaseSensitive(dbMetaData, tableName.toUpperCase(Locale.US), columnName.toUpperCase(Locale.US))
                || columnExistsCaseSensitive(dbMetaData, tableName.toUpperCase(Locale.US), columnName.toLowerCase(Locale.US)) || columnExistsCaseSensitive(dbMetaData, tableName.toLowerCase(Locale.US), columnName)
                || columnExistsCaseSensitive(dbMetaData, tableName.toLowerCase(Locale.US), columnName.toUpperCase(Locale.US)) || columnExistsCaseSensitive(dbMetaData, tableName.toLowerCase(Locale.US), columnName.toLowerCase(Locale.US)));
```

### DuplicatedCode
Duplicated code
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
        Element dbMatcherElement = (Element) (sqlDoc.getElementsByTagName("dbMatchers").item(0));
        String dbProduct = null;
        if (dbMatcherElement != null) {
            dbProduct = matchDbConnection(conn, dbMatcherElement);
        }

        // Now get the options valid for the database product used.
        Element dbOptionsElement = (Element) (sqlDoc.getElementsByTagName("dbOptions").item(0));
        if (dbOptionsElement != null) {
            // First populate the map with default values
            populateDbOptions("", dbOptionsElement, dbOptions);
            // Now update the map with specific product values
            if (dbProduct != null) {
                populateDbOptions(dbProduct, dbOptionsElement, dbOptions);
            }
        }

        // Now get the section defining sql for the repository required.
        NodeList sections = sqlDoc.getElementsByTagName("sqlDefs");
        int sectionsCount = sections.getLength();
        Element sectionElement = null;
        boolean found = false;
        for (int i = 0; i < sectionsCount; i++) {
            sectionElement = (Element) (sections.item(i));
            String sectionName = sectionElement.getAttribute("name");
            if (sectionName != null && sectionName.equals(sqlDefsSection)) {
                found = true;
                break;
            }

        }
```

### DuplicatedCode
Duplicated code
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
Map<String, String> parameters = new HashMap<>();
        // First read from the <params> element, if it exists.
        Element parametersElement = (Element) (sectionElement.getElementsByTagName("parameters").item(0));
        if (parametersElement != null) {
            NamedNodeMap params = parametersElement.getAttributes();
            int paramCount = params.getLength();
            for (int i = 0; i < paramCount; i++) {
                Attr param = (Attr) params.item(i);
                String paramName = param.getName();
                String paramValue = param.getValue();
                parameters.put(paramName, paramValue);
            }
        }
        // Then copy in the parameters supplied with the call.
        parameters.putAll(configParameters);

        // 2 maps - one for storing default statements,
        // the other for statements with a "db" attribute matching this
        // connection.
        Map<String, String> defaultSqlStatements = new HashMap<>();
        Map<String, String> dbProductSqlStatements = new HashMap<>();

        // Process each sql statement, replacing string parameters,
        // and adding to the appropriate map..
        NodeList sqlDefs = sectionElement.getElementsByTagName("sql");
        int sqlCount = sqlDefs.getLength();
        for (int i = 0; i < sqlCount; i++) {
            // See if this needs to be processed (is default or product
            // specific)
            Element sqlElement = (Element) (sqlDefs.item(i));
            String sqlDb = sqlElement.getAttribute("db");
            Map<String, String> sqlMap;
            if (sqlDb.equals("")) {
                // default
                sqlMap = defaultSqlStatements;
            } else if (sqlDb.equals(dbProduct)) {
                // Specific to this product
                sqlMap = dbProductSqlStatements;
            } else {
                // for a different product
                continue;
            }

            // Get the key and value for this SQL statement.
            String sqlKey = sqlElement.getAttribute("name");
            if (sqlKey == null) {
                // ignore statements without a "name" attribute.
                continue;
            }
            String sqlString = sqlElement.getFirstChild().getNodeValue();

            // Do parameter replacements for this sql string.
            StringBuilder replaceBuffer = new StringBuilder(64);
            for (Map.Entry<String, String> entry : parameters.entrySet()) {
                replaceBuffer.setLength(0);
                replaceBuffer.append("${").append(entry.getKey()).append("}");
                sqlString = substituteSubString(sqlString, replaceBuffer.toString(), entry.getValue());
            }

            // See if we already have registered a string of this value
            String shared = stringTable.get(sqlString);
            // If not, register it -- we will use it next time
            if (shared == null) {
                stringTable.put(sqlString, sqlString);
            } else {
                sqlString = shared;
            }

            // Add to the sqlMap - either the "default" or the "product" map
            sqlMap.put(sqlKey, sqlString);
        }

        // Copy in default strings, then overwrite product-specific ones.
        sql.putAll(defaultSqlStatements);
        sql.putAll(dbProductSqlStatements);
```

### DuplicatedCode
Duplicated code
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
        String dbProductName = conn.getMetaData().getDatabaseProductName();

        NodeList dbMatchers = dbMatchersElement.getElementsByTagName("dbMatcher");
        for (int i = 0; i < dbMatchers.getLength(); i++) {
            // Get the values for this matcher element.
            Element dbMatcher = (Element) dbMatchers.item(i);
            String dbMatchName = dbMatcher.getAttribute("db");
            Pattern dbProductPattern = Pattern.compile(dbMatcher.getAttribute("databaseProductName"), Pattern.CASE_INSENSITIVE);

            // If the connection databaseProcuctName matches the pattern,
            // use the match name from this matcher.
            if (dbProductPattern.matcher(dbProductName).find()) {
                return dbMatchName;
            }
        }
        return null;
```

### DuplicatedCode
Duplicated code
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
        NodeList dbOptions = dbOptionsElement.getElementsByTagName("dbOption");
        for (int i = 0; i < dbOptions.getLength(); i++) {
            // Get the values for this option element.
            Element dbOption = (Element) dbOptions.item(i);
            // Check is this element is pertinent to the dbProduct
            // Notice that a missing attribute returns "", good for defaults
            if (!dbProduct.equalsIgnoreCase(dbOption.getAttribute("db"))) {
                continue;
            }
            // Put into the map
            dbOptionsMap.put(dbOption.getAttribute("name"), dbOption.getAttribute("value"));
        }
```

### DuplicatedCode
Duplicated code
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
        int findLength = find.length();
        int replaceLength = replace.length();

        StringBuilder output = new StringBuilder(input);
        int index = input.indexOf(find);
        int outputOffset = 0;

        while (index > -1) {
            output.replace(index + outputOffset, index + outputOffset + findLength, replace);
            outputOffset = outputOffset + (replaceLength - findLength);

            index = input.indexOf(find, index + findLength);
        }

        return output.toString();
```

### DuplicatedCode
Duplicated code
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/SMIMESign.java`
#### Snippet
```java
       String explanationText = getExplanationText();
        
        // if there is no explanation text there should be no wrapping
        if (explanationText == null) {
            return null;
        }

            MimeMessage originalMessage = mail.getMessage();

            MimeBodyPart messagePart = new MimeBodyPart();
            MimeBodyPart signatureReason = new MimeBodyPart();
            
            String contentType = originalMessage.getContentType();
            Object content = originalMessage.getContent();
            
            if (contentType != null && content != null) {
            messagePart.setContent(content, contentType);
            } else {
                throw new MessagingException("Either the content type or the content is null");
            }
            
            String headers = getMessageHeaders(originalMessage);
            
            signatureReason.setText(getReplacedExplanationText(getExplanationText(),
                                                               getSignerName(),
                                                               getKeyHolder().getSignerAddress(),
                                                               mail.getMaybeSender().asString(),
                                                               headers));
            
            signatureReason.setFileName("SignatureExplanation.txt");
            
            MimeMultipart wrapperMultiPart = new MimeMultipart();
            
            wrapperMultiPart.addBodyPart(messagePart);
            wrapperMultiPart.addBodyPart(signatureReason);
            
            MimeBodyPart wrapperBodyPart = new MimeBodyPart();
            
            wrapperBodyPart.setContent(wrapperMultiPart);
            
            return wrapperBodyPart;
```

### DuplicatedCode
Duplicated code
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/RecipientIsRegex.java`
#### Snippet
```java
        String patternString = getCondition();
        if (Strings.isNullOrEmpty(patternString)) {
            throw new MessagingException("Pattern is missing");
        }
        
        patternString = patternString.trim();
        try {
            pattern = Pattern.compile(patternString);
        } catch (PatternSyntaxException mpe) {
            throw new MessagingException("Malformed pattern: " + patternString, mpe);
        }
```

### DuplicatedCode
Duplicated code
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
            mimeMessage = Optional.empty();
            recipients = Lists.newArrayList();
            sender = Optional.empty();
            state = Optional.empty();
            errorMessage = Optional.empty();
            lastUpdated = Optional.empty();
            attributes = Maps.newHashMap();
            size = Optional.empty();
            remoteAddr = Optional.empty();
```

### DuplicatedCode
Duplicated code
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
            recipients = Lists.newArrayList();
            sender = Optional.empty();
            state = Optional.empty();
            errorMessage = Optional.empty();
            lastUpdated = Optional.empty();
            attributes = Maps.newHashMap();
            remoteAddr = Optional.empty();
            remoteHost = Optional.empty();
```

### DuplicatedCode
Duplicated code
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        try {
            Object obj = in.readObject();
            if (obj == null) {
                sender = null;
            } else if (obj instanceof String) {
                sender = new MailAddress((String) obj);
            } else if (obj instanceof MailAddress) {
                sender = (MailAddress) obj;
            }
        } catch (ParseException pe) {
            throw new IOException("Error parsing sender address: " + pe.getMessage());
        }
        recipients = (Collection<MailAddress>) in.readObject();
        state = (String) in.readObject();
        errorMessage = (String) in.readObject();
        name = (String) in.readObject();
        remoteHost = (String) in.readObject();
        remoteAddr = (String) in.readObject();
        setLastUpdated((Date) in.readObject());
```

### DuplicatedCode
Duplicated code
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        out.writeObject(sender);
        out.writeObject(recipients);
        out.writeObject(state);
        out.writeObject(errorMessage);
        out.writeObject(name);
        out.writeObject(remoteHost);
        out.writeObject(remoteAddr);
        out.writeObject(lastUpdated);
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/Runner.java`
#### Snippet
```java
        class SessionContinuation implements Continuation {

            public ProtocolSession session;

            @Override
            public void doContinue() {
                if (session != null) {
                    session.doContinue();
                }
            }

        }
        
        SessionContinuation continuation = new SessionContinuation();

        Session[] sessions = new Session[testElements
                .getSessionCount()];

        for (int i = 0; i < sessions.length; i++) {
            sessions[i] = factory.newSession(continuation);
            sessions[i].start();
        }
        try {
            continuation.session = preElements;
            preElements.runSessions(sessions);
            continuation.session = testElements;
            testElements.runSessions(sessions);
            continuation.session = postElements;
            postElements.runSessions(sessions);
        } finally {
            for (Session session : sessions) {
                session.stop();
            }
        }
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
            setup(builder);
            builder.append();
            builder.setFile("wild-example.mail");
            builder.append();
            builder.setFile("multipart-alt.mail");
            builder.append();
            builder.setFile("multipart-mixed-complex.mail");
            builder.append();
            builder.setFile("rfc822-hello-world.mail");
            builder.append();
            builder.setFile("wild-mixed-alt.mail");
            builder.append();
            builder.setFile("wild-mixed.mail");
            builder.append();
            builder.setFile("rfc822-resent.mail");
            builder.append();
            builder.setFile("rfc822-trace.mail");
            builder.append();
            builder.setFile("wild-alt-reply4.mail");
            builder.append();
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
        builder.fetchSection("");
        builder.fetchSection("TEXT");
        builder.fetchSection("HEADER");
        builder.fetchSection("1");
        builder.fetchSection("2");
        builder.fetchSection("3");
        builder.fetchSection("3.HEADER");
        builder.fetchSection("3.TEXT");
        builder.fetchSection("3.1");
        builder.fetchSection("3.2");
        builder.fetchSection("4");
        builder.fetchSection("4.1");
        builder.fetchSection("4.1.MIME");
        builder.fetchSection("4.2");
        builder.fetchSection("4.2.HEADER");
        builder.fetchSection("4.2.TEXT");
        builder.fetchSection("4.2.1");
        builder.fetchSection("4.2.2");
        builder.fetchSection("4.2.2.1");
        builder.fetchSection("4.2.2.2");
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
        builder.append();
        builder.fetchAllMessages();
        builder.fetchSection("");
        builder.fetchSection("TEXT");
        builder.fetchSection("HEADER");
        builder.fetchSection("1");
        builder.fetchSection("2");
        builder.fetchSection("3");
        builder.fetchSection("3.HEADER");
        builder.fetchSection("3.TEXT");
        builder.fetchSection("3.1");
        builder.fetchSection("3.2");
        builder.fetchSection("4");
        builder.fetchSection("4.1");
        builder.fetchSection("4.1.MIME");
        builder.fetchSection("4.2");
        builder.fetchSection("4.2.HEADER");
        builder.fetchSection("4.2.TEXT");
        builder.fetchSection("4.2.1");
        builder.fetchSection("4.2.2");
        builder.fetchSection("4.2.2.1");
        builder.fetchSection("4.2.2.2");
        builder.resetFetch().setBodyFetch(true).setBodyStructureFetch(true);
        builder.fetchAllMessages();
        builder.quit();
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
        builder.setFile("rfc822-hello-world.mail");
        builder.append();
        builder.setFile("rfc822-sender.mail");
        builder.append();
        builder.setFile("rfc822.mail");
        builder.append();
        builder.setFile("rfc822-multiple-addresses.mail");
        builder.append();
        builder.select();
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
        builder.append();
        builder.setFile("wild-example.mail");
        builder.append();
        builder.setFile("multipart-alt.mail");
        builder.append();
        builder.setFile("multipart-mixed.mail");
        builder.append();
        builder.setFile("multipart-mixed-complex.mail");
        builder.append();
        builder.setFile("rfc822-hello-world.mail");
        builder.append();
        builder.setFile("rfc822-sender.mail");
        builder.append();
        builder.setFile("rfc822.mail");
        builder.append();
        builder.setFile("rfc822-multiple-addresses.mail");
        builder.append();
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
        builder.login();
        builder.create();
        builder.select();
        builder.append();
        builder.setFile("wild-example.mail");
        builder.append();
        builder.setFile("multipart-alt.mail");
        builder.append();
        builder.setFile("multipart-mixed.mail");
        builder.append();
        builder.setFile("multipart-mixed-complex.mail");
        builder.append();
        builder.setFile("rfc822-hello-world.mail");
        builder.append();
        builder.setFile("rfc822-sender.mail");
        builder.append();
        builder.setFile("rfc822.mail");
        builder.append();
        builder.setFile("rfc822-multiple-addresses.mail");
        builder.append();
        builder.select();
        builder.getFetch().bodyPeekCompleteMessage();
        builder.fetchAllMessages();
        builder.resetFetch();
```

### DuplicatedCode
Duplicated code
in `mpt/core/src/main/java/org/apache/james/mpt/helper/CreateScript.java`
#### Snippet
```java
        builder.append();
        builder.select();
        builder.fetchSection("");
        builder.fetchSection("TEXT");
        builder.fetchSection("HEADER");
        builder.fetchSection("1");
        builder.fetchSection("2");
        builder.fetchSection("3");
```

### DuplicatedCode
Duplicated code
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java
            if (ranges == null || ranges.length == 0) {
                return "*";
            }
            StringBuilder rangeBuilder = new StringBuilder();
            for (int i = 0; i < ranges.length; i++) {
                rangeBuilder.append(ranges[i].getFormattedString());
                if (i + 1 < ranges.length) {
                    rangeBuilder.append(",");
                }
            }
            return rangeBuilder.toString();
```

### DuplicatedCode
Duplicated code
in `protocols/imap/src/main/java/org/apache/james/imap/decode/ImapRequestStreamLineReader.java`
#### Snippet
```java
            try {
                next = input.read();
            } catch (IOException e) {
                throw new DecodingException(HumanReadableText.SOCKET_IO_FAILURE, "Error reading from stream.", e);
            }
            if (next == -1) {
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unexpected end of stream.");
            }

            nextSeen = true;
            nextChar = (char) next;
```

### DuplicatedCode
Duplicated code
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
        final SearchKey result;
        nextIsE(request);
        nextIsY(request);
        nextIsW(request);
        nextIsO(request);
        nextIsR(request);
        nextIsD(request);
        nextIsSpace(request);
        final String value = request.atom();
```

### DuplicatedCode
Duplicated code
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AppendProcessor.java`
#### Snippet
```java
        final String mailboxName = request.getMailboxName();
        final Content messageIn = request.getMessage().asMailboxContent();
        final Date datetime = request.getDatetime();
        final Flags flags = request.getFlags();
        final MailboxPath mailboxPath = PathConverter.forSession(session).buildFullPath(mailboxName);
        final MailboxManager mailboxManager = getMailboxManager();

        session.stopDetectingCommandInjection();
```

### DuplicatedCode
Duplicated code
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AppendProcessor.java`
#### Snippet
```java
        return Mono.from(mailbox.appendMessageReactive(
            MessageManager.AppendCommand.builder()
                .withInternalDate(datetime)
                .withFlags(flagsToBeSet)
                .isRecent(!isSelectedMailbox)
                .build(message), mailboxSession))
            .map(MessageManager.AppendResult::getId)
            .map(Throwing.<ComposedMessageId, ComposedMessageId>function(messageId -> {
                    if (isSelectedMailbox) {
                        selectedMailbox.addRecent(messageId.getUid());
                    }
                    return messageId;
                }).sneakyThrow())
            .flatMap(messageId -> unsolicitedResponses(session, responder, false).thenReturn(messageId))
```

### DuplicatedCode
Duplicated code
in `protocols/lmtp/src/main/java/org/apache/james/protocols/lmtp/core/DataLineMessageHookHandler.java`
#### Snippet
```java
        for (MailAddress recipient : mail.getRecipients()) {
            Response response = null;
            for (DeliverToRecipientHook handler : handlers) {
                response = AbstractHookableCmdHandler.calcDefaultSMTPResponse(handler.deliver(session, recipient, mail));
                if (response != null) {
                    break;
                }
            }
            if (response == null) {
                // Add some default response for not handled responses
                response = new SMTPResponse(SMTPRetCode.LOCAL_ERROR, DSNStatus.getStatus(DSNStatus.TRANSIENT, DSNStatus.UNDEFINED_STATUS) + "Temporary error deliver message to " + recipient);
            }
            if (mResponse == null) {
                mResponse = new LMTPMultiResponse(response);
            } else {
                mResponse.addResponse(response);
            }
        }
        return mResponse;
```

### DuplicatedCode
Duplicated code
in `protocols/managesieve/src/main/java/org/apache/james/managesieve/transcode/ArgumentParser.java`
#### Snippet
```java
        Iterator<String> argumentIterator = Splitter.on(' ').omitEmptyStrings().split(args).iterator();
        if (!argumentIterator.hasNext()) {
            return "NO \"Missing argument: script name\"";
        }
        String scriptName = ParserUtils.unquote(argumentIterator.next());
        if (argumentIterator.hasNext()) {
            return "NO \"Too many arguments: " + argumentIterator.next() + "\"";
        }
```

### DuplicatedCode
Duplicated code
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
            VaultConfiguration vaultConfiguration = this.vaultConfiguration.orElseGet(() -> {
                try {
                    return VaultConfiguration.from(configurationProvider.getConfiguration("deletedMessageVault"));
                } catch (ConfigurationException e) {
                    return VaultConfiguration.DEFAULT;
                }
            });

            boolean jmapEnabled = this.jmapEnabled.orElseGet(() -> {
                try {
                    return JMAPModule.parseConfiguration(propertiesProvider).isEnabled();
                } catch (FileNotFoundException e) {
                    return false;
                } catch (ConfigurationException e) {
                    throw new RuntimeException(e);
                }
            });
```

### DuplicatedCode
Duplicated code
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
ConfigurationPath configurationPath = this.configurationPath.orElse(new ConfigurationPath(FileSystem.FILE_PROTOCOL_AND_CONF));
            JamesServerResourceLoader directories = new JamesServerResourceLoader(rootDirectory
                .orElseThrow(() -> new MissingArgumentException("Server needs a working.directory env entry")));

            FileSystemImpl fileSystem = new FileSystemImpl(directories);
            PropertiesProvider propertiesProvider = new PropertiesProvider(fileSystem, configurationPath);
            BlobStoreConfiguration blobStoreConfiguration = this.blobStoreConfiguration.orElseGet(Throwing.supplier(
                () -> BlobStoreConfiguration.parse(propertiesProvider)));

            SearchConfiguration searchConfiguration = this.searchConfiguration.orElseGet(Throwing.supplier(
                () -> SearchConfiguration.parse(propertiesProvider)));

            FileConfigurationProvider configurationProvider = new FileConfigurationProvider(fileSystem, Basic.builder()
                .configurationPath(configurationPath)
                .workingDirectory(directories.getRootDirectory())
                .build());
            UsersRepositoryModuleChooser.Implementation usersRepositoryChoice = usersRepositoryImplementation.orElseGet(
                () -> UsersRepositoryModuleChooser.Implementation.parse(configurationProvider));

            MailQueueViewChoice mailQueueViewChoice = this.mailQueueViewChoice.orElseGet(Throwing.supplier(
                () -> MailQueueViewChoice.parse(propertiesProvider)));

            VaultConfiguration vaultConfiguration = this.vaultConfiguration.orElseGet(() -> {
                try {
                    return VaultConfiguration.from(configurationProvider.getConfiguration("deletedMessageVault"));
                } catch (ConfigurationException e) {
                    return VaultConfiguration.DEFAULT;
                }
            });
```

### DuplicatedCode
Duplicated code
in `server/apps/jpa-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
            ConfigurationPath configurationPath = this.configurationPath.orElse(new ConfigurationPath(FileSystem.FILE_PROTOCOL_AND_CONF));
            JamesServerResourceLoader directories = new JamesServerResourceLoader(rootDirectory
                .orElseThrow(() -> new MissingArgumentException("Server needs a working.directory env entry")));

            FileSystemImpl fileSystem = new FileSystemImpl(directories);

            FileConfigurationProvider configurationProvider = new FileConfigurationProvider(fileSystem, Basic.builder()
                .configurationPath(configurationPath)
                .workingDirectory(directories.getRootDirectory())
                .build());
            UsersRepositoryModuleChooser.Implementation usersRepositoryChoice = usersRepositoryImplementation.orElseGet(
                () -> UsersRepositoryModuleChooser.Implementation.parse(configurationProvider));
```

### DuplicatedCode
Duplicated code
in `server/apps/scaling-pulsar-smtp/src/main/java/org/apache/james/MailStoreRepositoryModule.java`
#### Snippet
```java
        HierarchicalConfiguration<ImmutableNode> configuration = configurationProvider.getConfiguration("mailrepositorystore");
        MailRepositoryStoreConfiguration userConfiguration = MailRepositoryStoreConfiguration.parse(configuration);
        if (!userConfiguration.getItems().isEmpty()) {
            return userConfiguration;
        }
        LOGGER.warn("Empty MailRepository store configuration supplied. Defaulting to default configuration for this product");
        return MailRepositoryStoreConfiguration.forItems(defaultConfigurationItem.get());
```

### DuplicatedCode
Duplicated code
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/data/CassandraJmapModule.java`
#### Snippet
```java
        Multibinder.newSetBinder(binder(), UsernameChangeTaskStep.class)
            .addBinding()
            .to(FilterUsernameChangeTaskStep.class);

        Multibinder<DeleteUserDataTaskStep> deleteUserDataTaskSteps = Multibinder.newSetBinder(binder(), DeleteUserDataTaskStep.class);
        deleteUserDataTaskSteps.addBinding().to(FiltersDeleteUserDataTaskStep.class);
        deleteUserDataTaskSteps.addBinding().to(IdentityUserDeletionTaskStep.class);
        deleteUserDataTaskSteps.addBinding().to(PushDeleteUserDataTaskStep.class);
```

### DuplicatedCode
Duplicated code
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/CassandraMailboxModule.java`
#### Snippet
```java
        Multibinder<UsernameChangeTaskStep> usernameChangeTaskStepMultibinder = Multibinder.newSetBinder(binder(), UsernameChangeTaskStep.class);
        usernameChangeTaskStepMultibinder.addBinding().to(MailboxUsernameChangeTaskStep.class);
        usernameChangeTaskStepMultibinder.addBinding().to(ACLUsernameChangeTaskStep.class);
        usernameChangeTaskStepMultibinder.addBinding().to(QuotaUsernameChangeTaskStep.class);

        Multibinder<DeleteUserDataTaskStep> deleteUserDataTaskStepMultibinder = Multibinder.newSetBinder(binder(), DeleteUserDataTaskStep.class);
        deleteUserDataTaskStepMultibinder.addBinding().to(MailboxUserDeletionTaskStep.class);
```

### DuplicatedCode
Duplicated code
in `server/container/guice/mailbox-jpa/src/main/java/org/apache/james/modules/mailbox/JPAMailboxModule.java`
#### Snippet
```java
        Multibinder.newSetBinder(binder(), EventListener.GroupEventListener.class)
            .addBinding()
            .to(MailboxAnnotationListener.class);

        bind(MailboxManager.class).annotatedWith(Names.named(MAILBOXMANAGER_NAME)).to(MailboxManager.class);
        bind(MailboxManagerConfiguration.class).toInstance(MailboxManagerConfiguration.DEFAULT);

        Multibinder<UsernameChangeTaskStep> usernameChangeTaskStepMultibinder = Multibinder.newSetBinder(binder(), UsernameChangeTaskStep.class);
        usernameChangeTaskStepMultibinder.addBinding().to(MailboxUsernameChangeTaskStep.class);
        usernameChangeTaskStepMultibinder.addBinding().to(ACLUsernameChangeTaskStep.class);
        usernameChangeTaskStepMultibinder.addBinding().to(QuotaUsernameChangeTaskStep.class);

        Multibinder<DeleteUserDataTaskStep> deleteUserDataTaskStepMultibinder = Multibinder.newSetBinder(binder(), DeleteUserDataTaskStep.class);
        deleteUserDataTaskStepMultibinder.addBinding().to(MailboxUserDeletionTaskStep.class);
```

### DuplicatedCode
Duplicated code
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        // Disable XXE cf CWE-611 https://cheatsheetseries.owasp.org/cheatsheets/XML_External_Entity_Prevention_Cheat_Sheet.html
        factory.setFeature("http://apache.org/xml/features/disallow-doctype-decl", true);
        factory.setFeature("http://xml.org/sax/features/external-general-entities", false);
        factory.setFeature("http://xml.org/sax/features/external-parameter-entities", false);
        factory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, "");
        factory.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, "");

        DocumentBuilder builder = factory.newDocumentBuilder();
        Document sqlDoc = builder.parse(sqlFile);

        init(sqlDoc, sqlDefsSection, conn, configParameters);
```

### DuplicatedCode
Duplicated code
in `server/data/data-file/src/main/java/org/apache/james/mailrepository/file/FileMailRepository.java`
#### Snippet
```java
            @SuppressWarnings("unchecked")
            Collection<String> strandedStreams = (Collection<String>) streamKeys.clone();
            strandedStreams.removeAll(objectKeys);
            for (Object strandedStream : strandedStreams) {
                MailKey key = new MailKey((String) strandedStream);
                remove(key);
            }
```

### DuplicatedCode
Duplicated code
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
                    if (mc instanceof MailImpl) {
                        oos.writeObject(((MailImpl) mc).getAttributesRaw());
                    } else {
                        Map<String, Serializable> temp = mc.attributes()
                                .collect(ImmutableMap.toImmutableMap(
                                        attribute -> attribute.getName().asString(),
                                        attribute -> (Serializable) attribute.getValue().value()));

                        oos.writeObject(temp);
                    }
                    oos.flush();
                    ByteArrayInputStream attrInputStream = new ByteArrayInputStream(baos.toByteArray());
```

### DuplicatedCode
Duplicated code
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
        Preconditions.checkArgument(!limit.isUnlimited(), "Limit should be defined");

        CassandraId cassandraId = (CassandraId) mailboxId;
        return executor.executeRows(listMailboxContentBySentAt.bind()
                .set(MAILBOX_ID, cassandraId.asUuid(), TypeCodecs.UUID)
                .setInt(LIMIT_MARKER, limit.getLimit().get()))
            .map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)));
```

### DuplicatedCode
Duplicated code
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
        Preconditions.checkArgument(!limit.isUnlimited(), "Limit should be defined");

        CassandraId cassandraId = (CassandraId) mailboxId;

        return executor.executeRows(listMailboxContentSinceReceivedAt.bind()
            .set(MAILBOX_ID, cassandraId.asUuid(), TypeCodecs.UUID)
            .setInstant(RECEIVED_AT, since.toInstant()))
            .<MessageId>map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)))
            .take(limit.getLimit().get());
```

### DuplicatedCode
Duplicated code
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChange.java`
#### Snippet
```java
            MailboxChange ownerChange = MailboxChange.builder()
                .accountId(AccountId.fromUsername(mailboxRenamed.getUsername()))
                .state(stateFactory.generate())
                .date(now)
                .isCountChange(false)
                .updated(ImmutableList.of(mailboxRenamed.getMailboxId()))
                .build();

            Stream<MailboxChange> shareeChanges = sharees.stream()
                .map(shareeId -> MailboxChange.builder()
                    .accountId(shareeId)
                    .state(stateFactory.generate())
                    .date(now)
                    .isCountChange(false)
                    .updated(ImmutableList.of(mailboxRenamed.getMailboxId()))
                    .delegated()
                    .build());
```

### DuplicatedCode
Duplicated code
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/model/Inet4Network.java`
#### Snippet
```java
        try {
            byte[] maskedIp = new byte[ip.length];
            for (int i = 0; i < ip.length; i++) {
                maskedIp[i] = (byte) (ip[i] & mask[i]);
            }
            return getByAddress(maskedIp);
        } catch (UnknownHostException e) {
            return null;
        }
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/jmx/JMXStateCompositeProcessorListener.java`
#### Snippet
```java
        List<ObjectName> unregistered = new ArrayList<>();
        for (ObjectName name : mbeans) {
            try {
                mbeanserver.unregisterMBean(name);
                unregistered.add(name);
            } catch (JMException e) {
                // logger.error("Unable to unregister mbean " + name, e);
            }
        }
        mbeans.removeAll(unregistered);
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/jmx/MailProcessorManagement.java`
#### Snippet
```java
        long fastest = fastestProcessing.get();

        if (fastest > processTime || fastest == -1) {
            fastestProcessing.set(processTime);
        }

        if (slowestProcessing.get() < processTime) {
            slowestProcessing.set(processTime);
        }
        if (success) {
            successCount.incrementAndGet();
        } else {
            errorCount.incrementAndGet();
        }
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
                    String recipientUser = recipient.getLocalPart().toLowerCase(Locale.US);
                    Domain recipientHost = recipient.getDomain();

                    if (getMailetContext().isLocalServer(recipientHost)) {
                        // not a remote recipient, so skip
                        continue;
                    }

                    if (conn == null) {
                        conn = datasource.getConnection();
                    }

                    if (selectStmt == null) {
                        selectStmt = conn.prepareStatement(selectByPK);
                    }
                    selectStmt.setString(1, senderUser);
                    selectStmt.setString(2, senderHost.asString());
                    selectStmt.setString(3, recipientUser);
                    selectStmt.setString(4, recipientHost.asString());
                    selectRS = selectStmt.executeQuery();
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/IsInWhiteList.java`
#### Snippet
```java
                if (selectStmt == null) {
                    selectStmt = conn.prepareStatement(selectByPK);
                }
                selectStmt.setString(1, recipientUser);
                selectStmt.setString(2, recipientHost.asString());
                selectStmt.setString(3, senderUser);
                selectStmt.setString(4, senderHost.asString());
                selectRS = selectStmt.executeQuery();
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
                    if (insertStmt == null) {
                        insertStmt = conn.prepareStatement(insert);
                    }
                    insertStmt.setString(1, senderUser);
                    insertStmt.setString(2, senderHost.asString());
                    insertStmt.setString(3, recipientUser);
                    insertStmt.setString(4, recipientHost.asString());
                    insertStmt.executeUpdate();
                    dbUpdated = true;
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
            theJDBCUtil.closeJDBCStatement(selectStmt);
            theJDBCUtil.closeJDBCStatement(insertStmt);
            // Rollback our changes if necessary.
            try {
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.rollback();
                    dbUpdated = false;
                }
            } catch (Exception e) {
                LOGGER.error("Ignored exception upon rollback", e);
            }
            theJDBCUtil.closeJDBCConnection(conn);
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
        MailAddress senderMailAddress = mail.getMaybeSender().get();
        String senderUser = senderMailAddress.getLocalPart().toLowerCase(Locale.US);
        Domain senderHost = senderMailAddress.getDomain();

        Connection conn = null;
        PreparedStatement selectStmt = null;
        PreparedStatement insertStmt = null;
        boolean dbUpdated = false;

        StringWriter sout = new StringWriter();
        PrintWriter out = new PrintWriter(sout, true);
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
                        MailAddress recipientMailAddress;
                        try {
                            recipientMailAddress = new MailAddress(st.nextToken());
                        } catch (javax.mail.internet.ParseException pe) {
                            continue;
                        }
                        String recipientUser = recipientMailAddress.getLocalPart().toLowerCase(Locale.US);
                        Domain recipientHost = recipientMailAddress.getDomain();

                        if (getMailetContext().isLocalServer(recipientHost)) {
                            // not a remote recipient, so skip
                            continue;
                        }

                        if (conn == null) {
                            conn = datasource.getConnection();
                        }

                        if (selectStmt == null) {
                            selectStmt = conn.prepareStatement(selectByPK);
                        }
                        selectStmt.setString(1, senderUser);
                        selectStmt.setString(2, senderHost.asString());
                        selectStmt.setString(3, recipientUser);
                        selectStmt.setString(4, recipientHost.asString());
                        selectRS = selectStmt.executeQuery();
```

### DuplicatedCode
Duplicated code
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
        String tableName = sqlQueries.getSqlString(tableNameSqlStringName, true);

        DatabaseMetaData dbMetaData = conn.getMetaData();

        // Try UPPER, lower, and MixedCase, to see if the table is there.
        if (theJDBCUtil.tableExists(dbMetaData, tableName)) {
            return false;
        }

        PreparedStatement createStatement = null;

        try {
            createStatement = conn.prepareStatement(sqlQueries.getSqlString(createSqlStringName, true));
            createStatement.execute();

            LOGGER.info("Created table '{}' using sqlResources string '{}'.", tableName, createSqlStringName);

        } finally {
            theJDBCUtil.closeJDBCStatement(createStatement);
        }

        return true;
```

### DuplicatedCode
Duplicated code
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryMailDaoV2.java`
#### Snippet
```java
        List<MailAddress> recipients = row.getList(RECIPIENTS, String.class)
            .stream()
            .map(Throwing.function(MailAddress::new))
            .collect(ImmutableList.toImmutableList());
        String state = row.getString(STATE);
        String remoteAddr = row.getString(REMOTE_ADDR);
        String remoteHost = row.getString(REMOTE_HOST);
        String errorMessage = row.getString(ERROR_MESSAGE);
        String name = row.getString(MAIL_KEY);
        Date lastUpdated = Optional.ofNullable(row.getInstant(LAST_UPDATED))
            .map(Date::from)
            .orElse(null);
```

### DuplicatedCode
Duplicated code
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/DataLineJamesMessageHookHandler.java`
#### Snippet
```java
                    long executionTime = System.currentTimeMillis() - start;

                    if (rHooks != null) {
                        for (HookResultHook rHook : rHooks) {
                            LOGGER.debug("executing hook {}", rHook);
                            hRes = rHook.onHookResult(session, hRes, executionTime, rawHandler);
                        }
                    }

                    SMTPResponse response = AbstractHookableCmdHandler.calcDefaultSMTPResponse(hRes);

                    // if the response is received, stop processing of command
                    // handlers
                    if (response != null) {
                        return response;
                    }
```

### DuplicatedCode
Duplicated code
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/DataLineJamesMessageHookHandler.java`
#### Snippet
```java
                if (rHooks != null) {
                    for (HookResultHook rHook : rHooks) {
                        LOGGER.debug("executing hook {}", rHook);
                        hRes = rHook.onHookResult(session, hRes, executionTime, messageHandler);
                    }
                }

                SMTPResponse response = AbstractHookableCmdHandler.calcDefaultSMTPResponse(hRes);

                // if the response is received, stop processing of command
                // handlers
                if (response != null) {
                    return response;
                }
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/ForwardIntegrationTest.java`
#### Snippet
```java
        AccessToken cedricAccessToken = authenticateJamesUser(baseUri(jmapPort), CEDRIC, CEDRIC_PASSWORD);
        String messageCreationId = "creationId1337";
        String requestBody = "[" +
            "  [" +
            "    \"setMessages\"," +
            "    {" +
            "      \"create\": { \"" + messageCreationId  + "\" : {" +
            "        \"from\": { \"name\": \"Me\", \"email\": \"" + CEDRIC.asString() + "\"}," +
            "        \"to\": [{ \"name\": \"Alice\", \"email\": \"" + ALICE.asString() + "\"}]," +
            "        \"subject\": \"subject\"," +
            "        \"isUnread\": true," +
            "        \"isFlagged\": true," +
            "        \"isAnswered\": true," +
            "        \"isDraft\": true," +
            "        \"isForwarded\": true," +
            "        \"mailboxIds\": [\"" + getOutboxId(cedricAccessToken) + "\"]" +
            "      }}" +
            "    }," +
            "    \"#0\"" +
            "  ]" +
            "]";

        with()
            .header("Authorization", cedricAccessToken.asString())
            .body(requestBody)
        .post("/jmap");

        AccessToken bobAccessToken = authenticateJamesUser(baseUri(jmapPort), BOB, BOB_PASSWORD);
        calmlyAwait
            .pollDelay(Duration.ofMillis(500))
            .atMost(30, TimeUnit.SECONDS).until(() -> isAnyMessageFoundInRecipientsMailboxes(bobAccessToken));
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/ForwardIntegrationTest.java`
#### Snippet
```java
        String messageCreationId = "creationId1337";
        String requestBody = "[" +
            "  [" +
            "    \"setMessages\"," +
            "    {" +
            "      \"create\": { \"" + messageCreationId  + "\" : {" +
            "        \"from\": { \"name\": \"Me\", \"email\": \"" + CEDRIC.asString() + "\"}," +
            "        \"to\": [{ \"name\": \"Alice\", \"email\": \"" + ALICE.asString() + "\"}]," +
            "        \"subject\": \"subject\"," +
            "        \"isUnread\": true," +
            "        \"isFlagged\": true," +
            "        \"isAnswered\": true," +
            "        \"isDraft\": true," +
            "        \"isForwarded\": true," +
            "        \"mailboxIds\": [\"" + getOutboxId(cedricAccessToken) + "\"]" +
            "      }}" +
            "    }," +
            "    \"#0\"" +
            "  ]" +
            "]";

        with()
            .header("Authorization", cedricAccessToken.asString())
            .body(requestBody)
        .post("/jmap");

        AccessToken bobAccessToken = authenticateJamesUser(baseUri(jmapPort), BOB, BOB_PASSWORD);
        calmlyAwait
            .pollDelay(Duration.ofMillis(500))
            .atMost(30, TimeUnit.SECONDS).until(() -> isAnyMessageFoundInRecipientsMailboxes(bobAccessToken));
        given()
            .header("Authorization", bobAccessToken.asString())
            .body("[[\"getMessageList\", {}, \"#0\"]]")
        .when()
            .post("/jmap")
        .then()
            .log().ifValidationFails()
            .statusCode(200)
            .body(NAME, equalTo("messageList"))
            .body(ARGUMENTS + ".messageIds", hasSize(1));
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/ForwardIntegrationTest.java`
#### Snippet
```java
        AccessToken bobAccessToken = authenticateJamesUser(baseUri(jmapPort), BOB, BOB_PASSWORD);
        calmlyAwait
            .pollDelay(Duration.ofMillis(500))
            .atMost(30, TimeUnit.SECONDS).until(() -> isAnyMessageFoundInRecipientsMailboxes(bobAccessToken));
        given()
            .header("Authorization", bobAccessToken.asString())
            .body("[[\"getMessageList\", {}, \"#0\"]]")
        .when()
            .post("/jmap")
        .then()
            .log().ifValidationFails()
            .statusCode(200)
            .body(NAME, equalTo("messageList"))
            .body(ARGUMENTS + ".messageIds", hasSize(1));
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/ForwardIntegrationTest.java`
#### Snippet
```java
        AccessToken cedricAccessToken = authenticateJamesUser(baseUri(jmapPort), CEDRIC, CEDRIC_PASSWORD);
        AccessToken aliceAccessToken = authenticateJamesUser(baseUri(jmapPort), ALICE, ALICE_PASSWORD);
        String messageCreationId = "creationId1337";
        String requestBody = "[" +
            "  [" +
            "    \"setMessages\"," +
            "    {" +
            "      \"create\": { \"" + messageCreationId  + "\" : {" +
            "        \"from\": { \"name\": \"Me\", \"email\": \"" + CEDRIC.asString() + "\"}," +
            "        \"to\": [{ \"name\": \"Alice\", \"email\": \"" + ALICE.asString() + "\"}]," +
            "        \"subject\": \"subject\"," +
            "        \"isUnread\": true," +
            "        \"isFlagged\": true," +
            "        \"isAnswered\": true," +
            "        \"isDraft\": true," +
            "        \"isForwarded\": true," +
            "        \"mailboxIds\": [\"" + getOutboxId(cedricAccessToken) + "\"]" +
            "      }}" +
            "    }," +
            "    \"#0\"" +
            "  ]" +
            "]";

        with()
            .header("Authorization", cedricAccessToken.asString())
            .body(requestBody)
        .post("/jmap");
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/WebAdminServerIntegrationImmutableTest.java`
#### Snippet
```java
        given().get(HealthCheckRoutes.HEALTHCHECK);
        given().get(HealthCheckRoutes.HEALTHCHECK);
        given().get(HealthCheckRoutes.HEALTHCHECK);
        given().get(HealthCheckRoutes.HEALTHCHECK);
        given().get(HealthCheckRoutes.HEALTHCHECK);

        when()
            .get(HealthCheckRoutes.HEALTHCHECK)
        .then()
            .statusCode(HttpStatus.OK_200);
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/vault/DeletedMessageVaultIntegrationTest.java`
#### Snippet
```java
        bartSendMessageToHomer();
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(1));

        homerDeletesMessages(listMessageIdsForAccount(homerAccessToken));
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(0));

        restoreAllMessagesOfHomer();
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(1));
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/vault/DeletedMessageVaultIntegrationTest.java`
#### Snippet
```java
        restoreAllMessagesOfHomer();
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(1));

        String messageId = listMessageIdsForAccount(homerAccessToken).get(0);
        given()
            .header("Authorization", homerAccessToken.asString())
            .body("[[\"getMessages\", {\"ids\": [\"" + messageId + "\"]}, \"#0\"]]")
        .when()
            .post("/jmap")
        .then()
            .statusCode(200)
            .log().ifValidationFails()
            .body(ARGUMENTS + ".list.subject", hasItem(SUBJECT));
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/vault/DeletedMessageVaultIntegrationTest.java`
#### Snippet
```java
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(bartAccessToken)).hasSize(1));

        String messageId = listMessageIdsForAccount(homerAccessToken).get(0);
        homerMovesTheMailInAnotherMailbox(messageId);

        homerSharesHisMailboxWithBart();

        bartDeletesMessages(ImmutableList.of(messageId));
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(0));
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/vault/DeletedMessageVaultIntegrationTest.java`
#### Snippet
```java
        bartSendMessageToHomer();
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(1));

        String messageIdOfHomer = listMessageIdsForAccount(homerAccessToken).get(0);

        homerDeletesMessages(listMessageIdsForAccount(homerAccessToken));
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(0));

        deleteFromVault(webAdminApi, HOMER, messageIdOfHomer);
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/vault/DeletedMessageVaultIntegrationTest.java`
#### Snippet
```java
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(bartAccessToken)).hasSize(1));
        String messageIdOfBart = listMessageIdsForAccount(bartAccessToken).get(0);

        homerDeletesMessages(listMessageIdsForAccount(homerAccessToken));
        WAIT_TWO_MINUTES.untilAsserted(() -> assertThat(listMessageIdsForAccount(homerAccessToken)).hasSize(0));

        deleteFromVault(webAdminApi, HOMER, messageIdOfBart);

        String fileLocation = exportAndGetFileLocationFromLastMail(EXPORT_ALL_HOMER_MESSAGES_TO_BART, bartAccessToken);
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/vault/LinshareBlobExportMechanismIntegrationTest.java`
#### Snippet
```java
        bartSendMessageToHomer();

        WAIT_TEN_SECONDS.until(() -> listMessageIdsForAccount(homerAccessToken).size() == 1);

        testIMAPClient.connect(LOCALHOST_IP, jmapServer.getProbe(ImapGuiceProbe.class).getImapPort())
            .login(HOMER, HOMER_PASSWORD)
            .select(TestIMAPClient.INBOX)
            .setFlagsForAllMessagesInMailbox("\\Deleted");
        testIMAPClient.expunge();

        WAIT_TEN_SECONDS.until(() -> listMessageIdsForAccount(homerAccessToken).isEmpty());

        exportVaultContent(webAdminApi, EXPORT_ALL_HOMER_MESSAGES_TO_USER_1);
```

### DuplicatedCode
Duplicated code
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliverAllTask.java`
#### Snippet
```java
        switch (result) {
            case COMPLETED:
                successfulRedeliveriesCount.incrementAndGet();
                break;
            case PARTIAL:
                failedRedeliveriesCount.incrementAndGet();
                break;
            default:
                throw new RuntimeException("Result case: " + result.toString() + " not recognized");
        }
        return result;
```

### DuplicatedCode
Duplicated code
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/metric/ActiveMQMetrics.java`
#### Snippet
```java
        if (msg.itemExists(MEMORY_LIMIT)) {
            setGaugeAndRegisterIfAbsent(MEMORY_LIMIT, msg.getLong(MEMORY_LIMIT));
        }
        if (msg.itemExists(STORE_LIMIT)) {
            setGaugeAndRegisterIfAbsent(STORE_LIMIT, msg.getLong(STORE_LIMIT));
        }
        if (msg.itemExists(TEMP_LIMIT)) {
            setGaugeAndRegisterIfAbsent(TEMP_LIMIT, msg.getLong(TEMP_LIMIT));
        }

        if (msg.itemExists(MEMORY_USAGE)) {
            setGaugeAndRegisterIfAbsent(MEMORY_USAGE, msg.getLong(MEMORY_USAGE));
        }
        if (msg.itemExists(STORE_USAGE)) {
            setGaugeAndRegisterIfAbsent(STORE_USAGE, msg.getLong(STORE_USAGE));
        }
        if (msg.itemExists(TEMP_USAGE)) {
            setGaugeAndRegisterIfAbsent(TEMP_USAGE, msg.getLong(TEMP_USAGE));
        }

        if (msg.itemExists(SIZE)) {
            setGaugeAndRegisterIfAbsent(SIZE, msg.getLong(SIZE));
        }
```

### DuplicatedCode
Duplicated code
in `server/task/task-distributed/src/main/java/org/apache/james/task/eventsourcing/distributed/RabbitMQWorkQueueReconnectionHandler.java`
#### Snippet
```java
        try (Channel channel = connection.createChannel()) {
            QueueArguments.Builder builder = QueueArguments.builder();
            configuration.getQueueTTL().ifPresent(builder::queueTTL);
            channel.queueDeclare(cancelRequestQueueName.asString(), !DURABLE, !EXCLUSIVE, !AUTO_DELETE, builder.build());
        } catch (Exception e) {
            LOGGER.error("Error recovering connection", e);
        }
```

## RuleId[id=ProtectedMemberInFinalClass]
### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param sequenceNumber The sequenceNumber to set
         */
        protected void setSequenceNumber(int sequenceNumber) {
            fieldSequenceNumber = sequenceNumber;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param userName The userName to set
         */
        protected void setUserName(String userName) {
            fieldUserName = userName;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param password The password to set
         */
        protected void setPassword(String password) {
            fieldPassword = password;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param userSuffix The userSuffix to set
         */
        protected void setUserSuffix(String userSuffix) {
            fieldUserSuffix = userSuffix;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param ignoreRecipientHeader The ignoreRecipientHeader to set
         */
        protected void setIgnoreRecipientHeader(boolean ignoreRecipientHeader) {
            fieldIgnoreRecipientHeader = ignoreRecipientHeader;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param userprefix The userprefix to set
         */
        protected void setUserPrefix(String userprefix) {
            fieldUserPrefix = userprefix;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param recipientsuffix The recipientsuffix to set
         */
        protected void setRecipientSuffix(String recipientsuffix) {
            fieldRecipientSuffix = recipientsuffix;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param recipientprefix The recipientprefix to set
         */
        protected void setRecipientPrefix(String recipientprefix) {
            fieldRecipientPrefix = recipientprefix;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
         * @param sequenceNumber The sequenceNumber to set
         */
        protected void setSequenceNumber(int sequenceNumber) {
            fieldSequenceNumber = sequenceNumber;
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factorypostprocessor/FileSystemBeanFactoryPostProcessor.java`
#### Snippet
```java
    private final class FileSystemVisitor extends BeanDefinitionVisitor {
        @Override
        protected String resolveStringValue(String strVal) throws BeansException {
            if (strVal.startsWith(FS_PREFIX)) {
                try {
```

## RuleId[id=RedundantEscapeInRegexReplacement]
### RedundantEscapeInRegexReplacement
Redundant escape of '.'
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/MailetConfigImpl.java`
#### Snippet
```java
            // http://commons.apache.org/configuration/userguide-1.2/howto_xml.html
            // Escaping dot characters in XML tags
            key = key.replaceAll("\\.\\.", "\\.");
            
            // Convert array values to a "," delimited string value
```

## RuleId[id=DanglingJavadoc]
### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAEncryptedMailboxMessage.java`
#### Snippet
```java
public class JPAEncryptedMailboxMessage extends AbstractJPAMailboxMessage {

        /** The value for the body field. Lazy loaded */
        /** We use a max length to represent 1gb data. Thats prolly overkill, but who knows */
        @Basic(optional = false, fetch = FetchType.LAZY)
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAEncryptedMailboxMessage.java`
#### Snippet
```java


        /** The value for the header field. Lazy loaded */
        /** We use a max length to represent 1gb data. Thats prolly overkill, but who knows */
        @Basic(optional = false, fetch = FetchType.LAZY)
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAMailboxMessage.java`
#### Snippet
```java
    private static final byte[] EMPTY_BODY = new byte[] {};

    /** The value for the body field. Lazy loaded */
    /** We use a max length to represent 1gb data. Thats prolly overkill, but who knows */
    @Basic(optional = false, fetch = FetchType.LAZY)
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAMailboxMessage.java`
#### Snippet
```java


    /** The value for the header field. Lazy loaded */
    /** We use a max length to represent 10mb data. Thats prolly overkill, but who knows */
    @Basic(optional = false, fetch = FetchType.LAZY)
```

### DanglingJavadoc
Dangling Javadoc comment
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/matchers/And.java`
#### Snippet
```java
package org.apache.james.mailetcontainer.impl.matchers;

/****************************************************************
 * Licensed to the Apache Software Foundation (ASF) under one   *
 * or more contributor license agreements.  See the NOTICE file *
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/CountingInputStream.java`
#### Snippet
```java
 * under the License.                                           *
 ****************************************************************/
/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Header.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MimePath.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteContent.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MimeDescriptor.java`
#### Snippet
```java
 * under the License.                                           *
 ****************************************************************/
/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/request/SearchOperation.java`
#### Snippet
```java

/****************************************************************
 * Licensed to the Apache Software Foundation (ASF) under one   *
 * or more contributor license agreements.  See the NOTICE file *
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/utils/FastByteArrayOutputStream.java`
#### Snippet
```java
package org.apache.james.imap.utils;

/**
 *  Licensed to the Apache Software Foundation (ASF) under one or more
 *  contributor license agreements.  See the NOTICE file distributed with
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/utils/FastByteArrayOutputStream.java`
#### Snippet
```java
import java.io.UnsupportedEncodingException;

/**
 * This class was forked from cassandra:
 * 
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/HeaderBodyElement.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/ContentBodyElement.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/EnvelopeImpl.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/AddressImpl.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/MimeDescriptorStructure.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/EnvelopeBuilder.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
 ****************************************************************/

/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasAttachment.java`
#### Snippet
```java
            Object content;
            
            /**
             * if there is an attachment and no inline text,
             * the content type can be anything
```

### DanglingJavadoc
Dangling Javadoc comment
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/package-info.java`
#### Snippet
```java
package org.apache.james.backends.opensearch.json;

/**
 * See {@link https://github.com/opensearch-project/opensearch-java/issues/292}
 *
```

### DanglingJavadoc
Dangling Javadoc comment
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MessageUpdateJson.java`
#### Snippet
```java


/****************************************************************
 * Licensed to the Apache Software Foundation (ASF) under one   *
 * or more contributor license agreements.  See the NOTICE file *
```

## RuleId[id=TrivialIf]
### TrivialIf
`if` statement can be simplified
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/SMTPProtocolHandlerChain.java`
#### Snippet
```java
                }
            }
            if (!add(new AuthCmdHandler())) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/ReactorRabbitMQChannelPool.java`
#### Snippet
```java
                    return true;
                }
                if (metadata.idleTime() > Duration.ofSeconds(30).toMillis()) {
                    return true;
                }
```

### TrivialIf
`if` statement can be simplified
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/JPAId.java`
#### Snippet
```java
        }
        JPAId other = (JPAId) obj;
        if (value != other.value) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/JPAUserFlag.java`
#### Snippet
```java
        }
        final JPAUserFlag other = (JPAUserFlag) obj;
        if (id != other.id) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/AbstractJPAMailboxMessage.java`
#### Snippet
```java
                return false;
            }
            if (uid != other.uid) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `server/container/guice/blob/deduplication-gc/src/main/java/org/apache/james/modules/blobstore/validation/StorageStrategyAggregate.java`
#### Snippet
```java

        public boolean isAssignable(StorageStrategy storageStrategy) {
            if (holds(DEDUPLICATION) && storageStrategy.equals(PASSTHROUGH)) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/InMemoryId.java`
#### Snippet
```java
        }
        InMemoryId other = (InMemoryId) obj;
        if (value != other.value) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `server/data/data-jpa/src/main/java/org/apache/james/user/jpa/model/JPAUser.java`
#### Snippet
```java
        final JPAUser other = (JPAUser) obj;
        if (name == null) {
            if (other.name != null) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `server/data/data-jpa/src/main/java/org/apache/james/user/jpa/model/JPAUser.java`
#### Snippet
```java
                return false;
            }
        } else if (!name.equals(other.name)) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/request/DayMonthYear.java`
#### Snippet
```java
            return false;
        }
        if (year != other.year) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/IdRange.java`
#### Snippet
```java
            return false;
        }
        if (lowVal != other.lowVal) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/api/display/HumanReadableText.java`
#### Snippet
```java
            return false;
        }
        if (!Arrays.equals(parameters, other.parameters)) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java
            }
            if (parameters == null) {
                if (other.parameters != null) {
                    return false;
                }
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java
                    return false;
                }
            } else if (!parameters.equals(other.parameters)) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
        if (chars == null) {
            result = false;
        } else if (chars.length() < 26) {
            // Be liberal in what you accept
            result = false;
```

### TrivialIf
`if` statement can be simplified
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractAuthProcessor.java`
#### Snippet
```java
        try {
            boolean authFailure = false;
            if (authenticationAttempt.getAuthenticationId() == null) {
                authFailure = true;
            }
```

### TrivialIf
`if` statement can be simplified
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Keyword.java`
#### Snippet
```java
            return false;
        }
        if (!FLAG_NAME_PATTERN.matchesAllOf(flagName)) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/CommandListservMatcher.java`
#### Snippet
```java
    public boolean matchRecipient(MailAddress recipient) {
        if (recipient.getDomain().equals(listservAddress.getDomain())) {
            if (recipient.getLocalPart().startsWith(listservAddress.getLocalPart() + "-")) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/CommandForListserv.java`
#### Snippet
```java
    public boolean matchRecipient(MailAddress recipient) {
        if (recipient.getDomain().equals(listservAddress.getDomain())) {
            if (recipient.getLocalPart().equals(listservAddress.getLocalPart() + "-on")
                || recipient.getLocalPart().equals(listservAddress.getLocalPart() + "-off")) {
                return true;
```

## RuleId[id=NonStrictComparisonCanBeEquality]
### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
                //<LF>, quote ("), or backslash (\)
                char q = address.charAt(pos);
                if (q <= 0 || q == '\n' || q == '\r' || q == '\"' || q == '\\') {
                    throw new AddressException("Unquoted local-part (user account) must be one of the 128 ASCI " +
                            "characters exception <CR>, <LF>, quote (\"), or backslash (\\) at position " +
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
    @Deprecated
    public static  MailAddress getMailSender(String sender) {
        if (sender == null || sender.trim().length() <= 0) {
            return null;
        }
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/MockPublicKeyRecordRetriever.java`
#### Snippet
```java
            String search = makeKey(selector, token);
            Collection<String> res = this.records.get(search);
            if (res.size() <= 0) {
                throw new TempFailException("Timout or servfail");
            } else {
```

### NonStrictComparisonCanBeEquality
Can be replaced with equality
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/managesieve/transcode/MessageToCoreToMessage.java`
#### Snippet
```java
        MimeMessage reply = (MimeMessage) message.reply(false);
        reply.setContent(computeMultiPartResponse(session, message));
        if (null == message.getAllRecipients() || 0 >= message.getAllRecipients().length) {
            throw new MessagingException("Message has no recipients");
        } else {
```

## RuleId[id=OptionalUsedAsFieldOrParameterType]
### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'delayed'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/ForceDelivery.java`
#### Snippet
```java

    @JsonCreator
    public ForceDelivery(@JsonProperty("delayed") Optional<Boolean> delayed) {
        this.delayed = delayed;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delayed'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/ForceDelivery.java`
#### Snippet
```java
public class ForceDelivery {

    private final Optional<Boolean> delayed;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'nextDelivery'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/MailQueueItemDTO.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> nextDelivery;

    public MailQueueItemDTO(String name, String sender, List<String> recipients, Optional<ZonedDateTime> nextDelivery) {
        this.name = name;
        this.sender = sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'nextDelivery'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/MailQueueItemDTO.java`
#### Snippet
```java
        }

        public Builder nextDelivery(Optional<ZonedDateTime> nextDelivery) {
            this.nextDelivery = nextDelivery;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/MailQueueItemDTO.java`
#### Snippet
```java
        }

        public Builder sender(Optional<MailAddress> sender) {
            sender.ifPresent(this::sender);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nextDelivery'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/MailQueueItemDTO.java`
#### Snippet
```java
    private final String sender;
    private final List<String> recipients;
    private final Optional<ZonedDateTime> nextDelivery;

    public MailQueueItemDTO(String name, String sender, List<String> recipients, Optional<ZonedDateTime> nextDelivery) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nextDelivery'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/dto/MailQueueItemDTO.java`
#### Snippet
```java
        private String sender;
        private List<String> recipients;
        private Optional<ZonedDateTime> nextDelivery;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    public WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO(@JsonProperty("type") String type,
                                                                        @JsonProperty("mailQueueName") String mailQueueName,
                                                                        @JsonProperty("sender") Optional<String> sender,
                                                                        @JsonProperty("name") Optional<String> name,
                                                                        @JsonProperty("recipient") Optional<String> recipient,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                        @JsonProperty("mailQueueName") String mailQueueName,
                                                                        @JsonProperty("sender") Optional<String> sender,
                                                                        @JsonProperty("name") Optional<String> name,
                                                                        @JsonProperty("recipient") Optional<String> recipient,
                                                                        @JsonProperty("initialCount") long initialCount,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String queue;
    private final String type;
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String type;
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
    private final long initialCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    public DeleteMailsFromMailQueueTaskAdditionalInformationDTO(@JsonProperty("type") String type,
                                                                @JsonProperty("queue") String queue,
                                                                @JsonProperty("sender") Optional<String> sender,
                                                                @JsonProperty("name") Optional<String> name,
                                                                @JsonProperty("recipient") Optional<String> recipient,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                @JsonProperty("queue") String queue,
                                                                @JsonProperty("sender") Optional<String> sender,
                                                                @JsonProperty("name") Optional<String> name,
                                                                @JsonProperty("recipient") Optional<String> recipient,
                                                                @JsonProperty("initialCount") long initialCount,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                @JsonProperty("sender") Optional<String> sender,
                                                                @JsonProperty("name") Optional<String> name,
                                                                @JsonProperty("recipient") Optional<String> recipient,
                                                                @JsonProperty("initialCount") long initialCount,
                                                                @JsonProperty("remainingCount") long remainingCount,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
    private final long initialCount;
    private final long remainingCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                        @JsonProperty("sender") Optional<String> sender,
                                                                        @JsonProperty("name") Optional<String> name,
                                                                        @JsonProperty("recipient") Optional<String> recipient,
                                                                        @JsonProperty("initialCount") long initialCount,
                                                                        @JsonProperty("remainingCount") long remainingCount,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String type;
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
    private final long initialCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String mailQueueName;
    private final String type;
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
    private final long initialCount;
    private final long remainingCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskDTO.java`
#### Snippet
```java
    public DeleteMailsFromMailQueueTaskDTO(@JsonProperty("type") String type,
                                           @JsonProperty("queue") String queueName,
                                           @JsonProperty("sender") Optional<String> sender,
                                           @JsonProperty("name") Optional<String> name,
                                           @JsonProperty("recipient") Optional<String> recipient) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskDTO.java`
#### Snippet
```java
                                           @JsonProperty("queue") String queueName,
                                           @JsonProperty("sender") Optional<String> sender,
                                           @JsonProperty("name") Optional<String> name,
                                           @JsonProperty("recipient") Optional<String> recipient) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskDTO.java`
#### Snippet
```java
                                           @JsonProperty("sender") Optional<String> sender,
                                           @JsonProperty("name") Optional<String> name,
                                           @JsonProperty("recipient") Optional<String> recipient) {
        this.type = type;
        this.queueName = queueName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskDTO.java`
#### Snippet
```java
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;

    public DeleteMailsFromMailQueueTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskDTO.java`
#### Snippet
```java
    private final String queueName;
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskDTO.java`
#### Snippet
```java
    private final String type;
    private final String queueName;
    private final Optional<String> sender;
    private final Optional<String> name;
    private final Optional<String> recipient;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastAdditionalInformation'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/ClearMailQueueTask.java`
#### Snippet
```java
    private Optional<Long> initialCount;
    private Optional<ManageableMailQueue> queue;
    private Optional<TaskExecutionDetails.AdditionalInformation> lastAdditionalInformation;

    public ClearMailQueueTask(MailQueueName queueName, ClearMailQueueTask.MailQueueFactory factory) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'initialCount'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/ClearMailQueueTask.java`
#### Snippet
```java
    private final MailQueueName queueName;
    private final ClearMailQueueTask.MailQueueFactory factory;
    private Optional<Long> initialCount;
    private Optional<ManageableMailQueue> queue;
    private Optional<TaskExecutionDetails.AdditionalInformation> lastAdditionalInformation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'queue'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/ClearMailQueueTask.java`
#### Snippet
```java
    private final ClearMailQueueTask.MailQueueFactory factory;
    private Optional<Long> initialCount;
    private Optional<ManageableMailQueue> queue;
    private Optional<TaskExecutionDetails.AdditionalInformation> lastAdditionalInformation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'optionalName'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java

    private final Optional<MailAddress> optionalSender;
    private final Optional<String> optionalName;
    private final Optional<MailAddress> optionalRecipient;
    private final MailQueueFactory factory;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'optionalRecipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
    private final Optional<MailAddress> optionalSender;
    private final Optional<String> optionalName;
    private final Optional<MailAddress> optionalRecipient;
    private final MailQueueFactory factory;
    private final MailQueueName queueName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'queue'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
    private final MailQueueName queueName;
    private Optional<Long> initialCount;
    private Optional<ManageableMailQueue> queue;
    private Optional<TaskExecutionDetails.AdditionalInformation> lastAdditionalInformation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'optionalSender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
    public static final TaskType TYPE = TaskType.of("delete-mails-from-mail-queue");

    private final Optional<MailAddress> optionalSender;
    private final Optional<String> optionalName;
    private final Optional<MailAddress> optionalRecipient;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
        private final long initialCount;

        private final Optional<String> sender;
        private final Optional<String> name;
        private final Optional<String> recipient;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java

        private final Optional<String> sender;
        private final Optional<String> name;
        private final Optional<String> recipient;
        private final Instant timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastAdditionalInformation'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
    private Optional<Long> initialCount;
    private Optional<ManageableMailQueue> queue;
    private Optional<TaskExecutionDetails.AdditionalInformation> lastAdditionalInformation;

    public DeleteMailsFromMailQueueTask(MailQueueName queueName, MailQueueFactory factory,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'initialCount'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
    private final MailQueueFactory factory;
    private final MailQueueName queueName;
    private Optional<Long> initialCount;
    private Optional<ManageableMailQueue> queue;
    private Optional<TaskExecutionDetails.AdditionalInformation> lastAdditionalInformation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalSender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java

        public AdditionalInformation(MailQueueName mailQueueName, long initialCount, long remainingCount,
                                     Optional<MailAddress> optionalSender, Optional<String> optionalName,
                                     Optional<MailAddress> optionalRecipient, Instant timestamp) {
            this.mailQueueName = mailQueueName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalName'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java

        public AdditionalInformation(MailQueueName mailQueueName, long initialCount, long remainingCount,
                                     Optional<MailAddress> optionalSender, Optional<String> optionalName,
                                     Optional<MailAddress> optionalRecipient, Instant timestamp) {
            this.mailQueueName = mailQueueName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalRecipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
        public AdditionalInformation(MailQueueName mailQueueName, long initialCount, long remainingCount,
                                     Optional<MailAddress> optionalSender, Optional<String> optionalName,
                                     Optional<MailAddress> optionalRecipient, Instant timestamp) {
            this.mailQueueName = mailQueueName;
            this.initialCount = initialCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
        private final Optional<String> sender;
        private final Optional<String> name;
        private final Optional<String> recipient;
        private final Instant timestamp;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalSender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java

    public DeleteMailsFromMailQueueTask(MailQueueName queueName, MailQueueFactory factory,
                                        Optional<MailAddress> optionalSender,
                                        Optional<String> optionalName,
                                        Optional<MailAddress> optionalRecipient) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalName'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
    public DeleteMailsFromMailQueueTask(MailQueueName queueName, MailQueueFactory factory,
                                        Optional<MailAddress> optionalSender,
                                        Optional<String> optionalName,
                                        Optional<MailAddress> optionalRecipient) {
        this.factory = factory;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalRecipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
                                        Optional<MailAddress> optionalSender,
                                        Optional<String> optionalName,
                                        Optional<MailAddress> optionalRecipient) {
        this.factory = factory;
        this.queueName = queueName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'addressType'
in `mdn/src/main/java/org/apache/james/mdn/fields/OriginalRecipient.java`
#### Snippet
```java

    public static class Builder {
        private Optional<AddressType> addressType;
        private Text originalRecipient;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userAgentProduct'
in `mdn/src/main/java/org/apache/james/mdn/fields/ReportingUserAgent.java`
#### Snippet
```java

        private String userAgentName;
        private Optional<String> userAgentProduct;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'userAgentProduct'
in `mdn/src/main/java/org/apache/james/mdn/fields/ReportingUserAgent.java`
#### Snippet
```java
    }

    private ReportingUserAgent(String userAgentName, Optional<String> userAgentProduct) {
        this.userAgentName = userAgentName;
        this.userAgentProduct = userAgentProduct
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userAgentProduct'
in `mdn/src/main/java/org/apache/james/mdn/fields/ReportingUserAgent.java`
#### Snippet
```java
    public static final Predicate<String> IS_EMPTY = String::isEmpty;
    private final String userAgentName;
    private final Optional<String> userAgentProduct;

    public static Builder builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'addressType'
in `mdn/src/main/java/org/apache/james/mdn/fields/FinalRecipient.java`
#### Snippet
```java

    public static class Builder {
        private Optional<AddressType> addressType;
        private Text finalRecipient;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nameType'
in `mdn/src/main/java/org/apache/james/mdn/fields/Gateway.java`
#### Snippet
```java

    public static class Builder {
        private Optional<AddressType> nameType;
        private Text name;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'originalRecipientField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
    private final Optional<ReportingUserAgent> reportingUserAgentField;
    private final Optional<Gateway> gatewayField;
    private final Optional<OriginalRecipient> originalRecipientField;
    private final FinalRecipient finalRecipientField;
    private final Optional<OriginalMessageId> originalMessageIdField;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'originalMessageIdField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        private Optional<OriginalRecipient> originalRecipientField = Optional.empty();
        private Optional<FinalRecipient> finalRecipientField = Optional.empty();
        private Optional<OriginalMessageId> originalMessageIdField = Optional.empty();
        private Optional<Disposition> dispositionField = Optional.empty();
        private ImmutableList.Builder<Error> errorField = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'gatewayField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java

    private final Optional<ReportingUserAgent> reportingUserAgentField;
    private final Optional<Gateway> gatewayField;
    private final Optional<OriginalRecipient> originalRecipientField;
    private final FinalRecipient finalRecipientField;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'reportingUserAgentField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java

    public static class Builder {
        private Optional<ReportingUserAgent> reportingUserAgentField = Optional.empty();
        private Optional<Gateway> gatewayField = Optional.empty();
        private Optional<OriginalRecipient> originalRecipientField = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'reportingUserAgentField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java

    @VisibleForTesting
    MDNReport(Optional<ReportingUserAgent> reportingUserAgentField, Optional<Gateway> gatewayField, Optional<OriginalRecipient> originalRecipientField,
                      FinalRecipient finalRecipientField, Optional<OriginalMessageId> originalMessageIdField, Disposition dispositionField,
                      ImmutableList<Error> errorFields, ImmutableList<ExtensionField> extensionFields) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'gatewayField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java

    @VisibleForTesting
    MDNReport(Optional<ReportingUserAgent> reportingUserAgentField, Optional<Gateway> gatewayField, Optional<OriginalRecipient> originalRecipientField,
                      FinalRecipient finalRecipientField, Optional<OriginalMessageId> originalMessageIdField, Disposition dispositionField,
                      ImmutableList<Error> errorFields, ImmutableList<ExtensionField> extensionFields) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'originalRecipientField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java

    @VisibleForTesting
    MDNReport(Optional<ReportingUserAgent> reportingUserAgentField, Optional<Gateway> gatewayField, Optional<OriginalRecipient> originalRecipientField,
                      FinalRecipient finalRecipientField, Optional<OriginalMessageId> originalMessageIdField, Disposition dispositionField,
                      ImmutableList<Error> errorFields, ImmutableList<ExtensionField> extensionFields) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'originalMessageIdField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
    @VisibleForTesting
    MDNReport(Optional<ReportingUserAgent> reportingUserAgentField, Optional<Gateway> gatewayField, Optional<OriginalRecipient> originalRecipientField,
                      FinalRecipient finalRecipientField, Optional<OriginalMessageId> originalMessageIdField, Disposition dispositionField,
                      ImmutableList<Error> errorFields, ImmutableList<ExtensionField> extensionFields) {
        this.reportingUserAgentField = reportingUserAgentField;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'originalMessageIdField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
    private final Optional<OriginalRecipient> originalRecipientField;
    private final FinalRecipient finalRecipientField;
    private final Optional<OriginalMessageId> originalMessageIdField;
    private final Disposition dispositionField;
    private final ImmutableList<Error> errorFields;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'dispositionField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        private Optional<FinalRecipient> finalRecipientField = Optional.empty();
        private Optional<OriginalMessageId> originalMessageIdField = Optional.empty();
        private Optional<Disposition> dispositionField = Optional.empty();
        private ImmutableList.Builder<Error> errorField = ImmutableList.builder();
        private ImmutableList.Builder<ExtensionField> extensionFields = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'reportingUserAgentField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
    }

    private final Optional<ReportingUserAgent> reportingUserAgentField;
    private final Optional<Gateway> gatewayField;
    private final Optional<OriginalRecipient> originalRecipientField;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'originalRecipientField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        private Optional<ReportingUserAgent> reportingUserAgentField = Optional.empty();
        private Optional<Gateway> gatewayField = Optional.empty();
        private Optional<OriginalRecipient> originalRecipientField = Optional.empty();
        private Optional<FinalRecipient> finalRecipientField = Optional.empty();
        private Optional<OriginalMessageId> originalMessageIdField = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'originalRecipientField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        }

        public Builder originalRecipientField(Optional<OriginalRecipient> originalRecipientField) {
            this.originalRecipientField = originalRecipientField;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'finalRecipientField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        private Optional<Gateway> gatewayField = Optional.empty();
        private Optional<OriginalRecipient> originalRecipientField = Optional.empty();
        private Optional<FinalRecipient> finalRecipientField = Optional.empty();
        private Optional<OriginalMessageId> originalMessageIdField = Optional.empty();
        private Optional<Disposition> dispositionField = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'gatewayField'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
    public static class Builder {
        private Optional<ReportingUserAgent> reportingUserAgentField = Optional.empty();
        private Optional<Gateway> gatewayField = Optional.empty();
        private Optional<OriginalRecipient> originalRecipientField = Optional.empty();
        private Optional<FinalRecipient> finalRecipientField = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeSender'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java
    }

    private Task deleteMailsTask(MailQueueName queueName, Optional<MailAddress> maybeSender, Optional<String> maybeName, Optional<MailAddress> maybeRecipient) {
        int paramCount = Booleans.countTrue(maybeSender.isPresent(), maybeName.isPresent(), maybeRecipient.isPresent());
        switch (paramCount) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeName'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java
    }

    private Task deleteMailsTask(MailQueueName queueName, Optional<MailAddress> maybeSender, Optional<String> maybeName, Optional<MailAddress> maybeRecipient) {
        int paramCount = Booleans.countTrue(maybeSender.isPresent(), maybeName.isPresent(), maybeRecipient.isPresent());
        switch (paramCount) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeRecipient'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java
    }

    private Task deleteMailsTask(MailQueueName queueName, Optional<MailAddress> maybeSender, Optional<String> maybeName, Optional<MailAddress> maybeRecipient) {
        int paramCount = Booleans.countTrue(maybeSender.isPresent(), maybeName.isPresent(), maybeRecipient.isPresent());
        switch (paramCount) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isDelayed'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java
    }

    private boolean filter(MailQueueItemDTO item, Optional<Boolean> isDelayed) {
        boolean mailIsDelayed = item.getNextDelivery().map(date -> date.isAfter(ZonedDateTime.now())).orElse(false);
        return isDelayed
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isDelayed'
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java
    }

    private List<MailQueueItemDTO> listMails(ManageableMailQueue queue, Optional<Boolean> isDelayed, Limit limit) {
        try (MailQueue closeable = queue) {
            return limit.applyOnStream(Iterators.toStream(queue.browse()))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'message'
in `mdn/src/main/java/org/apache/james/mdn/MDN.java`
#### Snippet
```java
        }

        public Builder message(Optional<Message> message) {
            this.message = message;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'message'
in `mdn/src/main/java/org/apache/james/mdn/MDN.java`
#### Snippet
```java
        private String humanReadableText;
        private MDNReport report;
        private Optional<Message> message = Optional.empty();

        public Builder report(MDNReport report) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'message'
in `mdn/src/main/java/org/apache/james/mdn/MDN.java`
#### Snippet
```java
    private final Optional<Message> message;

    private MDN(String humanReadableText, MDNReport report, Optional<Message> message) {
        this.humanReadableText = humanReadableText;
        this.report = report;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'message'
in `mdn/src/main/java/org/apache/james/mdn/MDN.java`
#### Snippet
```java
    private final String humanReadableText;
    private final MDNReport report;
    private final Optional<Message> message;

    private MDN(String humanReadableText, MDNReport report, Optional<Message> message) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'type'
in `mdn/src/main/java/org/apache/james/mdn/fields/Disposition.java`
#### Snippet
```java
        private Optional<DispositionActionMode> actionMode = Optional.empty();
        private Optional<DispositionSendingMode> sendingMode = Optional.empty();
        private Optional<DispositionType> type = Optional.empty();
        private ImmutableList.Builder<DispositionModifier> modifiers = ImmutableList.builder();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'actionMode'
in `mdn/src/main/java/org/apache/james/mdn/fields/Disposition.java`
#### Snippet
```java

    public static class Builder {
        private Optional<DispositionActionMode> actionMode = Optional.empty();
        private Optional<DispositionSendingMode> sendingMode = Optional.empty();
        private Optional<DispositionType> type = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sendingMode'
in `mdn/src/main/java/org/apache/james/mdn/fields/Disposition.java`
#### Snippet
```java
    public static class Builder {
        private Optional<DispositionActionMode> actionMode = Optional.empty();
        private Optional<DispositionSendingMode> sendingMode = Optional.empty();
        private Optional<DispositionType> type = Optional.empty();
        private ImmutableList.Builder<DispositionModifier> modifiers = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'smtpReturnCode'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/hook/HookResult.java`
#### Snippet
```java
    public static class Builder {
        private HookReturnCode result;
        private Optional<String> smtpReturnCode;
        private Optional<String> smtpDescription;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'smtpDescription'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/hook/HookResult.java`
#### Snippet
```java
        private HookReturnCode result;
        private Optional<String> smtpReturnCode;
        private Optional<String> smtpDescription;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cryptoConfig'
in `server/container/guice/distributed/src/main/java/org/apache/james/modules/blobstore/BlobStoreModulesChooser.java`
#### Snippet
```java
    }

    public static Module chooseEncryptionModule(Optional<CryptoConfig> cryptoConfig) {
        Optional<Module> encryptionModule = cryptoConfig.map(EncryptionModule::new);
        return encryptionModule.orElse(new NoEncryptionModule());
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cryptoConfig'
in `server/container/guice/distributed/src/main/java/org/apache/james/modules/blobstore/BlobStoreConfiguration.java`
#### Snippet
```java
    private final Optional<CryptoConfig> cryptoConfig;

    BlobStoreConfiguration(BlobStoreImplName implementation, boolean cacheEnabled, StorageStrategy storageStrategy, Optional<CryptoConfig> cryptoConfig) {
        this.implementation = implementation;
        this.cacheEnabled = cacheEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cryptoConfig'
in `server/container/guice/distributed/src/main/java/org/apache/james/modules/blobstore/BlobStoreConfiguration.java`
#### Snippet
```java
    @FunctionalInterface
    public interface RequireCryptoConfig {
        BlobStoreConfiguration cryptoConfig(Optional<CryptoConfig> cryptoConfig);

        default BlobStoreConfiguration noCryptoConfig() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cryptoConfig'
in `server/container/guice/distributed/src/main/java/org/apache/james/modules/blobstore/BlobStoreConfiguration.java`
#### Snippet
```java
    private final boolean cacheEnabled;
    private final StorageStrategy storageStrategy;
    private final Optional<CryptoConfig> cryptoConfig;

    BlobStoreConfiguration(BlobStoreImplName implementation, boolean cacheEnabled, StorageStrategy storageStrategy, Optional<CryptoConfig> cryptoConfig) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'expiryDate'
in `server/data/data-memory/src/main/java/org/apache/james/vacation/memory/MemoryNotificationRegistry.java`
#### Snippet
```java
    public static class Entry {
        private final RecipientId recipientId;
        private final Optional<ZonedDateTime> expiryDate;

        public Entry(RecipientId recipientId, Optional<ZonedDateTime> expiryDate) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'expiryDate'
in `server/data/data-memory/src/main/java/org/apache/james/vacation/memory/MemoryNotificationRegistry.java`
#### Snippet
```java
        private final Optional<ZonedDateTime> expiryDate;

        public Entry(RecipientId recipientId, Optional<ZonedDateTime> expiryDate) {
            this.recipientId = recipientId;
            this.expiryDate = expiryDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'globalQuota'
in `server/data/data-memory/src/main/java/org/apache/james/sieverepository/memory/InMemorySieveQuotaRepository.java`
#### Snippet
```java
public class InMemorySieveQuotaRepository implements SieveQuotaRepository {

    private Optional<QuotaSizeLimit> globalQuota = Optional.empty();

    private Map<Username, QuotaSizeLimit> userQuota = new ConcurrentHashMap<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxChanges'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChangeRepository.java`
#### Snippet
```java
    Mono<MailboxChanges> getSinceState(AccountId accountId, State state, Optional<Limit> maxChanges);

    Mono<MailboxChanges> getSinceStateWithDelegation(AccountId accountId, State state, Optional<Limit> maxChanges);

    Mono<State> getLatestState(AccountId accountId);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxChanges'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChangeRepository.java`
#### Snippet
```java
    Mono<Void> save(MailboxChange change);

    Mono<MailboxChanges> getSinceState(AccountId accountId, State state, Optional<Limit> maxChanges);

    Mono<MailboxChanges> getSinceStateWithDelegation(AccountId accountId, State state, Optional<Limit> maxChanges);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxIdsToReturn'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/EmailChangeRepository.java`
#### Snippet
```java
    Mono<EmailChanges> getSinceState(AccountId accountId, State state, Optional<Limit> maxIdsToReturn);

    Mono<EmailChanges> getSinceStateWithDelegation(AccountId accountId, State state, Optional<Limit> maxIdsToReturn);

    Mono<State> getLatestState(AccountId accountId);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxIdsToReturn'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/EmailChangeRepository.java`
#### Snippet
```java
    Mono<Void> save(EmailChange change);

    Mono<EmailChanges> getSinceState(AccountId accountId, State state, Optional<Limit> maxIdsToReturn);

    Mono<EmailChanges> getSinceStateWithDelegation(AccountId accountId, State state, Optional<Limit> maxIdsToReturn);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ifInState'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/FilteringManagement.java`
#### Snippet
```java
    Publisher<Version> defineRulesForUser(Username username, List<Rule> rules, Optional<Version> ifInState);

    default Publisher<Version> defineRulesForUser(Username username, Optional<Version> ifInState, Rule... rules) {
        return defineRulesForUser(username, Arrays.asList(rules), ifInState);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ifInState'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/FilteringManagement.java`
#### Snippet
```java
public interface FilteringManagement {

    Publisher<Version> defineRulesForUser(Username username, List<Rule> rules, Optional<Version> ifInState);

    default Publisher<Version> defineRulesForUser(Username username, Optional<Version> ifInState, Rule... rules) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'eventId'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/Version.java`
#### Snippet
```java
    public static final Version INITIAL = new Version(-1);

    public static Version from(Optional<EventId> eventId) {
        return eventId.map(EventId::value)
            .map(Version::new)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isDelivery'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/EmailChange.java`
#### Snippet
```java
        private final ImmutableList.Builder<MessageId> updated;
        private final ImmutableList.Builder<MessageId> destroyed;
        private Optional<Boolean> isDelivery;

        private Builder(AccountId accountId, State state, ZonedDateTime date, boolean isDelegated) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ifInState'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/DefineRulesCommand.java`
#### Snippet
```java
    private final Optional<Version> ifInState;

    public DefineRulesCommand(Username username, List<Rule> rules, Optional<Version> ifInState) {
        Preconditions.checkNotNull(username);
        Preconditions.checkNotNull(rules);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ifInState'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/DefineRulesCommand.java`
#### Snippet
```java
    private final Username username;
    private final List<Rule> rules;
    private final Optional<Version> ifInState;

    public DefineRulesCommand(Username username, List<Rule> rules, Optional<Version> ifInState) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_VERSION'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/FilterUsernameChangeTaskStep.java`
#### Snippet
```java

public class FilterUsernameChangeTaskStep implements UsernameChangeTaskStep {
    public static final Optional<Version> NO_VERSION = Optional.empty();

    private final FilteringManagement filteringManagement;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ifInState'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/FilteringAggregate.java`
#### Snippet
```java
    }

    private boolean expectedState(Optional<Version> ifInState) {
        return ifInState.map(requestedVersion -> history.getVersionAsJava()
                .map(eventId -> new Version(eventId.value()))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inputTime'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/pushsubscription/PushSubscriptionHelpers.java`
#### Snippet
```java
    }

    public static PushSubscriptionExpiredTime evaluateExpiresTime(Optional<ZonedDateTime> inputTime, Clock clock) {
        ZonedDateTime now = ZonedDateTime.now(clock);
        ZonedDateTime maxExpiresTime = now.plusDays(EXPIRES_TIME_MAX_DAY());
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'created'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChange.java`
#### Snippet
```java
        private boolean delegated;
        private final boolean isCountChange;
        private Optional<List<MailboxId>> created;
        private Optional<List<MailboxId>> updated;
        private Optional<List<MailboxId>> destroyed;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'destroyed'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChange.java`
#### Snippet
```java
        private Optional<List<MailboxId>> created;
        private Optional<List<MailboxId>> updated;
        private Optional<List<MailboxId>> destroyed;

        private Builder(AccountId accountId, State state, ZonedDateTime date, boolean isCountChange) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'updated'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChange.java`
#### Snippet
```java
        private final boolean isCountChange;
        private Optional<List<MailboxId>> created;
        private Optional<List<MailboxId>> updated;
        private Optional<List<MailboxId>> destroyed;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'replicationFactor'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
        private Optional<String> keyspace;
        private Optional<String> cacheKeyspace;
        private Optional<Integer> replicationFactor;
        private Optional<Boolean> durableWrites;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keyspace'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
public class KeyspacesConfiguration {
    public static class Builder {
        private Optional<String> keyspace;
        private Optional<String> cacheKeyspace;
        private Optional<Integer> replicationFactor;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'replicationFactor'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
        }

        public Builder replicationFactor(Optional<Integer> replicationFactor) {
            this.replicationFactor = replicationFactor;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'keyspace'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
        }

        public Builder keyspace(Optional<String> keyspace) {
            this.keyspace = keyspace;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'durableWrites'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
        private Optional<String> cacheKeyspace;
        private Optional<Integer> replicationFactor;
        private Optional<Boolean> durableWrites;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cacheKeyspace'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> keyspace;
        private Optional<String> cacheKeyspace;
        private Optional<Integer> replicationFactor;
        private Optional<Boolean> durableWrites;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cacheKeyspace'
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/KeyspacesConfiguration.java`
#### Snippet
```java
        }

        public Builder cacheKeyspace(Optional<String> cacheKeyspace) {
            this.cacheKeyspace = cacheKeyspace;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ttl'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CassandraCacheConfiguration.java`
#### Snippet
```java

        private Optional<Integer> sizeThresholdInBytes = Optional.empty();
        private Optional<Duration> ttl = Optional.empty();

        public Builder sizeThresholdInBytes(int sizeThresholdInBytes) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sizeThresholdInBytes'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CassandraCacheConfiguration.java`
#### Snippet
```java
        }

        public Builder sizeThresholdInBytes(Optional<Integer> sizeThresholdInBytes) {
            sizeThresholdInBytes.ifPresent(this::sizeThresholdInBytes);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ttl'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CassandraCacheConfiguration.java`
#### Snippet
```java
        }

        public Builder ttl(Optional<Duration> ttl) {
            ttl.ifPresent(this::ttl);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sizeThresholdInBytes'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CassandraCacheConfiguration.java`
#### Snippet
```java
        private static final int DEFAULT_BYTE_THRESHOLD_SIZE = 8 * 1024;

        private Optional<Integer> sizeThresholdInBytes = Optional.empty();
        private Optional<Duration> ttl = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'schemaVersion'
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/dto/CassandraVersionResponse.java`
#### Snippet
```java
public class CassandraVersionResponse {

    public static CassandraVersionResponse from(Optional<SchemaVersion> schemaVersion) {
        return new CassandraVersionResponse(schemaVersion.map(SchemaVersion::getValue));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'version'
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/dto/CassandraVersionResponse.java`
#### Snippet
```java
    private final Optional<Integer> version;

    public CassandraVersionResponse(Optional<Integer> version) {
        this.version = version;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'version'
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/dto/CassandraVersionResponse.java`
#### Snippet
```java
    }

    private final Optional<Integer> version;

    public CassandraVersionResponse(Optional<Integer> version) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'stringValue'
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/routes/RecomputeMailboxCountersRequestToTask.java`
#### Snippet
```java

    @VisibleForTesting
    static Options parseOptions(Optional<String> stringValue) {
        return stringValue
            .map(RecomputeMailboxCountersRequestToTask::parseOptions)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'firstBytes'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CachedBlobStore.java`
#### Snippet
```java

        final PushbackInputStream in;
        final Optional<byte[]> firstBytes;
        final boolean hasMore;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'firstBytes'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CachedBlobStore.java`
#### Snippet
```java
        final boolean hasMore;

        private ReadAheadInputStream(PushbackInputStream in, Optional<byte[]> firstBytes, boolean hasMore) {
            this.in = in;
            this.firstBytes = firstBytes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailAddress'
in `core/src/main/java/org/apache/james/core/MaybeSender.java`
#### Snippet
```java
    private final Optional<MailAddress> mailAddress;

    private MaybeSender(Optional<MailAddress> mailAddress) {
        this.mailAddress = mailAddress;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailAddress'
in `core/src/main/java/org/apache/james/core/MaybeSender.java`
#### Snippet
```java
    }

    private final Optional<MailAddress> mailAddress;

    private MaybeSender(Optional<MailAddress> mailAddress) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaLimitValue.java`
#### Snippet
```java
public interface QuotaLimitValue<T extends QuotaLimitValue<T>> {

    static boolean isValidValue(Optional<Long> value) {
        return value.map(longValue -> longValue >= 0).orElse(true);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultDomain'
in `core/src/main/java/org/apache/james/core/Username.java`
#### Snippet
```java
    }

    public Username withDefaultDomain(Optional<Domain> defaultDomain) {
        if (hasDomainPart()) {
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `core/src/main/java/org/apache/james/core/Username.java`
#### Snippet
```java
    }

    public Username withOtherDomain(Optional<Domain> domain) {
        return new Username(localPart, domain);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domainPart'
in `core/src/main/java/org/apache/james/core/Username.java`
#### Snippet
```java
    private final Optional<Domain> domainPart;

    private Username(String localPart, Optional<Domain> domainPart) {
        Preconditions.checkNotNull(localPart);
        Preconditions.checkArgument(!localPart.isEmpty(), "username local part should not be empty");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `core/src/main/java/org/apache/james/core/Username.java`
#### Snippet
```java
    }

    public static Username from(String localPart, Optional<String> domain) {
       return new Username(localPart, domain.map(Domain::of));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domainPart'
in `core/src/main/java/org/apache/james/core/Username.java`
#### Snippet
```java

    private final String localPart;
    private final Optional<Domain> domainPart;

    private Username(String localPart, Optional<Domain> domainPart) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaSizeLimit.java`
#### Snippet
```java
    }

    public static QuotaSizeLimit size(Optional<Long> value) {
        return new QuotaSizeLimit(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaSizeLimit.java`
#### Snippet
```java
    private final Optional<Long> value;

    private QuotaSizeLimit(Optional<Long> value) {
        Preconditions.checkArgument(QuotaLimitValue.isValidValue(value), "Quota limit should be positive");
        this.value = value;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaSizeLimit.java`
#### Snippet
```java
    }

    private final Optional<Long> value;

    private QuotaSizeLimit(Optional<Long> value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaCountLimit.java`
#### Snippet
```java
    }

    private final Optional<Long> value;

    private QuotaCountLimit(Optional<Long> value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaCountLimit.java`
#### Snippet
```java
    private final Optional<Long> value;

    private QuotaCountLimit(Optional<Long> value) {
        Preconditions.checkArgument(QuotaLimitValue.isValidValue(value), "Quota limit should be positive");
        this.value = value;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `core/src/main/java/org/apache/james/core/quota/QuotaCountLimit.java`
#### Snippet
```java
    }

    public static QuotaCountLimit count(Optional<Long> value) {
        return new QuotaCountLimit(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'error'
in `core/src/main/java/org/apache/james/core/healthcheck/Result.java`
#### Snippet
```java
    private final ResultStatus status;
    private final Optional<String> cause;
    private final Optional<Throwable> error;

    private Result(ComponentName componentName, ResultStatus status, Optional<String> cause, Optional<Throwable> error) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cause'
in `core/src/main/java/org/apache/james/core/healthcheck/Result.java`
#### Snippet
```java
    private final Optional<Throwable> error;

    private Result(ComponentName componentName, ResultStatus status, Optional<String> cause, Optional<Throwable> error) {
        this.componentName = componentName;
        this.status = status;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'error'
in `core/src/main/java/org/apache/james/core/healthcheck/Result.java`
#### Snippet
```java
    private final Optional<Throwable> error;

    private Result(ComponentName componentName, ResultStatus status, Optional<String> cause, Optional<Throwable> error) {
        this.componentName = componentName;
        this.status = status;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cause'
in `core/src/main/java/org/apache/james/core/healthcheck/Result.java`
#### Snippet
```java
    private final ComponentName componentName;
    private final ResultStatus status;
    private final Optional<String> cause;
    private final Optional<Throwable> error;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultPort'
in `core/src/main/java/org/apache/james/util/Host.java`
#### Snippet
```java
    }

    private static ImmutableList<Host> parseHosts(String hostsString, Optional<Integer> defaultPort) {
        return Splitter.on(',')
            .omitEmptyStrings()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultPort'
in `core/src/main/java/org/apache/james/util/Host.java`
#### Snippet
```java
    }

    public static Host parse(String ipAndPort, Optional<Integer> defaultPort) {
        Preconditions.checkNotNull(ipAndPort);
        Preconditions.checkArgument(!ipAndPort.isEmpty());
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultPort'
in `core/src/main/java/org/apache/james/util/Host.java`
#### Snippet
```java
    }

    private static int getPortFromConfPart(List<String> parts, Optional<Integer> defaultPort) {
        if (parts.size() == 2) {
            return Integer.parseInt(parts.get(1));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/jpa-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
public class JPAJamesConfiguration implements Configuration {
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersRepositoryImplementation'
in `server/apps/jpa-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/jpa-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersRepositoryImplementation'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        private Optional<ConfigurationPath> configurationPath;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'searchConfiguration'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
public class CassandraRabbitMQJamesConfiguration implements Configuration {
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'blobStoreConfiguration'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailQueueViewChoice'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jmapEnabled'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'vaultConfiguration'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'eventBusPublishConfirmEnabled'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<SSLConfiguration> sslConfiguration;
        private Optional<Long> queueTTL;
        private Optional<Boolean> eventBusPublishConfirmEnabled;
        private Optional<Boolean> eventBusNotificationDurabilityEnabled;
        private Optional<String> vhost;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'vhost'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        }

        public Builder vhost(Optional<String> vhost) {
            this.vhost = vhost;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private final Optional<SSLKeyStore> keyStore;

        private SSLConfiguration(SSLValidationStrategy strategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> trustStore, Optional<SSLKeyStore> keyStore) {
            Preconditions.checkNotNull(strategy);
            Preconditions.checkNotNull(trustStore);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'keyStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private final Optional<SSLKeyStore> keyStore;

        private SSLConfiguration(SSLValidationStrategy strategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> trustStore, Optional<SSLKeyStore> keyStore) {
            Preconditions.checkNotNull(strategy);
            Preconditions.checkNotNull(trustStore);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'quorumQueueReplicationFactor'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        }

        public Builder quorumQueueReplicationFactor(Optional<Integer> quorumQueueReplicationFactor) {
            return quorumQueueReplicationFactor
                .map(this::quorumQueueReplicationFactor)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'vhost'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
    private final boolean eventBusPublishConfirmEnabled;
    private final boolean eventBusNotificationDurabilityEnabled;
    private final Optional<String> vhost;

    private RabbitMQConfiguration(URI uri, URI managementUri, ManagementCredentials managementCredentials, int maxRetries, int minDelayInMs,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'useQuorumQueues'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> useSsl;
        private Optional<Boolean> useSslManagement;
        private Optional<Boolean> useQuorumQueues;
        private Optional<Integer> quorumQueueReplicationFactor;
        private Optional<SSLConfiguration> sslConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxRetries'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private final ManagementCredentials managementCredentials;
        private final ImmutableList.Builder<Host> hosts;
        private Optional<Integer> maxRetries;
        private Optional<Integer> minDelayInMs;
        private Optional<Integer> connectionTimeoutInMs;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'quorumQueueReplicationFactor'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> useSslManagement;
        private Optional<Boolean> useQuorumQueues;
        private Optional<Integer> quorumQueueReplicationFactor;
        private Optional<SSLConfiguration> sslConfiguration;
        private Optional<Long> queueTTL;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ttl'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        }

        public Builder queueTTL(Optional<Long> ttl) {
            ttl.ifPresent(aLong -> Preconditions.checkArgument(aLong > 0, "'%s' must be strictly positive", QUEUE_TTL));
            this.queueTTL = ttl;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'eventBusNotificationDurabilityEnabled'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Long> queueTTL;
        private Optional<Boolean> eventBusPublishConfirmEnabled;
        private Optional<Boolean> eventBusNotificationDurabilityEnabled;
        private Optional<String> vhost;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'useSsl'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> shutdownTimeoutInMs;
        private Optional<Integer> networkRecoveryIntervalInMs;
        private Optional<Boolean> useSsl;
        private Optional<Boolean> useSslManagement;
        private Optional<Boolean> useQuorumQueues;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'queueTTL'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> quorumQueueReplicationFactor;
        private Optional<SSLConfiguration> sslConfiguration;
        private Optional<Long> queueTTL;
        private Optional<Boolean> eventBusPublishConfirmEnabled;
        private Optional<Boolean> eventBusNotificationDurabilityEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'channelRpcTimeoutInMs'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> minDelayInMs;
        private Optional<Integer> connectionTimeoutInMs;
        private Optional<Integer> channelRpcTimeoutInMs;
        private Optional<Integer> handshakeTimeoutInMs;
        private Optional<Integer> shutdownTimeoutInMs;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sslTrustStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                private final SSLValidationStrategy sslValidationStrategy;
                private final HostNameVerifier hostNameVerifier;
                private Optional<SSLTrustStore> sslTrustStore;
                private Optional<SSLKeyStore> sslKeyStore;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'handshakeTimeoutInMs'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> connectionTimeoutInMs;
        private Optional<Integer> channelRpcTimeoutInMs;
        private Optional<Integer> handshakeTimeoutInMs;
        private Optional<Integer> shutdownTimeoutInMs;
        private Optional<Integer> networkRecoveryIntervalInMs;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private final SSLValidationStrategy strategy;
        private final HostNameVerifier hostNameVerifier;
        private final Optional<SSLTrustStore> trustStore;
        private final Optional<SSLKeyStore> keyStore;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'networkRecoveryIntervalInMs'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> handshakeTimeoutInMs;
        private Optional<Integer> shutdownTimeoutInMs;
        private Optional<Integer> networkRecoveryIntervalInMs;
        private Optional<Boolean> useSsl;
        private Optional<Boolean> useSslManagement;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'queueTTL'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
    private final List<Host> hosts;
    private final ManagementCredentials managementCredentials;
    private final Optional<Long> queueTTL;
    private final boolean eventBusPublishConfirmEnabled;
    private final boolean eventBusNotificationDurabilityEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'useSslManagement'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> networkRecoveryIntervalInMs;
        private Optional<Boolean> useSsl;
        private Optional<Boolean> useSslManagement;
        private Optional<Boolean> useQuorumQueues;
        private Optional<Integer> quorumQueueReplicationFactor;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sslKeyStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                }

                public ReadyToBuild sslKeyStore(Optional<SSLKeyStore> sslKeyStore) {
                    this.sslKeyStore = sslKeyStore;
                    return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
            @FunctionalInterface
            interface RequireSSLStrategyTrustStore {
                RequireHostNameVerifier sslStrategy(SSLValidationStrategy strategy, Optional<SSLTrustStore> trustStore);

                default RequireHostNameVerifier strategyIgnore() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'shutdownTimeoutInMs'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> channelRpcTimeoutInMs;
        private Optional<Integer> handshakeTimeoutInMs;
        private Optional<Integer> shutdownTimeoutInMs;
        private Optional<Integer> networkRecoveryIntervalInMs;
        private Optional<Boolean> useSsl;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionTimeoutInMs'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Integer> maxRetries;
        private Optional<Integer> minDelayInMs;
        private Optional<Integer> connectionTimeoutInMs;
        private Optional<Integer> channelRpcTimeoutInMs;
        private Optional<Integer> handshakeTimeoutInMs;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keyStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private final HostNameVerifier hostNameVerifier;
        private final Optional<SSLTrustStore> trustStore;
        private final Optional<SSLKeyStore> keyStore;

        private SSLConfiguration(SSLValidationStrategy strategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> trustStore, Optional<SSLKeyStore> keyStore) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minDelayInMs'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private final ImmutableList.Builder<Host> hosts;
        private Optional<Integer> maxRetries;
        private Optional<Integer> minDelayInMs;
        private Optional<Integer> connectionTimeoutInMs;
        private Optional<Integer> channelRpcTimeoutInMs;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sslKeyStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                private final HostNameVerifier hostNameVerifier;
                private Optional<SSLTrustStore> sslTrustStore;
                private Optional<SSLKeyStore> sslKeyStore;

                private ReadyToBuild(SSLValidationStrategy sslValidationStrategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> sslTrustStore) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'queueTTL'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                                  int connectionTimeoutInMs, int channelRpcTimeoutInMs, int handshakeTimeoutInMs, int shutdownTimeoutInMs,
                                  int networkRecoveryIntervalInMs, Boolean useSsl, Boolean useSslManagement, SSLConfiguration sslConfiguration,
                                  boolean useQuorumQueues, int quorumQueueReplicationFactor, List<Host> hosts, Optional<Long> queueTTL,
                                  boolean eventBusPublishConfirmEnabled, boolean eventBusNotificationDurabilityEnabled,
                                  Optional<String> vhost) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'vhost'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                                  boolean useQuorumQueues, int quorumQueueReplicationFactor, List<Host> hosts, Optional<Long> queueTTL,
                                  boolean eventBusPublishConfirmEnabled, boolean eventBusNotificationDurabilityEnabled,
                                  Optional<String> vhost) {
        this.uri = uri;
        this.managementUri = managementUri;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'vhost'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> eventBusPublishConfirmEnabled;
        private Optional<Boolean> eventBusNotificationDurabilityEnabled;
        private Optional<String> vhost;

        private Builder(URI amqpUri, URI managementUri, ManagementCredentials managementCredentials) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sslConfiguration'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> useQuorumQueues;
        private Optional<Integer> quorumQueueReplicationFactor;
        private Optional<SSLConfiguration> sslConfiguration;
        private Optional<Long> queueTTL;
        private Optional<Boolean> eventBusPublishConfirmEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sslTrustStore'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                private Optional<SSLKeyStore> sslKeyStore;

                private ReadyToBuild(SSLValidationStrategy sslValidationStrategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> sslTrustStore) {
                    this.sslValidationStrategy = sslValidationStrategy;
                    this.hostNameVerifier = hostNameVerifier;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'disposition'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        private Optional<String> filename = Optional.empty();
        private ImmutableList.Builder<Header> headers = ImmutableList.builder();
        private Optional<String> disposition = Optional.empty();
        private Optional<String> dataAsString = Optional.empty();
        private Optional<byte[]> dataAsBytes = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        public static final String DEFAULT_VALUE = "";

        private Optional<String> cid = Optional.empty();
        private Optional<String> filename = Optional.empty();
        private ImmutableList.Builder<Header> headers = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'filename'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java

        private Optional<String> cid = Optional.empty();
        private Optional<String> filename = Optional.empty();
        private ImmutableList.Builder<Header> headers = ImmutableList.builder();
        private Optional<String> disposition = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'type'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        private Optional<byte[]> dataAsBytes = Optional.empty();
        private Optional<Multipart> dataAsMultipart = Optional.empty();
        private Optional<String> type = Optional.empty();

        public BodyPartBuilder cid(String cid) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private Optional<String> textContentType = Optional.empty();
    private Optional<String> subject = Optional.empty();
    private Optional<InternetAddress> sender = Optional.empty();
    private Optional<MimeMultipart> content = Optional.empty();
    private ImmutableList.Builder<InternetAddress> from = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'dataAsString'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        private ImmutableList.Builder<Header> headers = ImmutableList.builder();
        private Optional<String> disposition = Optional.empty();
        private Optional<String> dataAsString = Optional.empty();
        private Optional<byte[]> dataAsBytes = Optional.empty();
        private Optional<Multipart> dataAsMultipart = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'text'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    }

    private Optional<String> text = Optional.empty();
    private Optional<String> textContentType = Optional.empty();
    private Optional<String> subject = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subType'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    public static class MultipartBuilder {
        private ImmutableList.Builder<BodyPart> bodyParts = ImmutableList.builder();
        private Optional<String> subType = Optional.empty();

        public MultipartBuilder subType(String subType) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'dataAsMultipart'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        private Optional<String> dataAsString = Optional.empty();
        private Optional<byte[]> dataAsBytes = Optional.empty();
        private Optional<Multipart> dataAsMultipart = Optional.empty();
        private Optional<String> type = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'dataAsBytes'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        private Optional<String> disposition = Optional.empty();
        private Optional<String> dataAsString = Optional.empty();
        private Optional<byte[]> dataAsBytes = Optional.empty();
        private Optional<Multipart> dataAsMultipart = Optional.empty();
        private Optional<String> type = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private Optional<String> text = Optional.empty();
    private Optional<String> textContentType = Optional.empty();
    private Optional<String> subject = Optional.empty();
    private Optional<InternetAddress> sender = Optional.empty();
    private Optional<MimeMultipart> content = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textContentType'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java

    private Optional<String> text = Optional.empty();
    private Optional<String> textContentType = Optional.empty();
    private Optional<String> subject = Optional.empty();
    private Optional<InternetAddress> sender = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'content'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private Optional<String> subject = Optional.empty();
    private Optional<InternetAddress> sender = Optional.empty();
    private Optional<MimeMultipart> content = Optional.empty();
    private ImmutableList.Builder<InternetAddress> from = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> cc = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java


    public void setDomainMaxStorage(Domain domain, Optional<QuotaSizeLimit> size) {
        transactionRunner.run(
            entityManager -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxStorageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    public void setMaxStorage(QuotaRoot quotaRoot, Optional<QuotaSizeLimit> maxStorageQuota) {
        transactionRunner.run(
            entityManager -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxMessageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    private MaxGlobalMessageCount getGlobalMaxMessageEntity(EntityManager entityManager, Optional<QuotaCountLimit> maxMessageQuota) {
        MaxGlobalMessageCount storedValue = entityManager.find(MaxGlobalMessageCount.class, MaxGlobalMessageCount.DEFAULT_KEY);
        Long value = quotaValueToLong(maxMessageQuota);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'globalMaxMessageCount'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    public void setGlobalMaxMessage(Optional<QuotaCountLimit> globalMaxMessageCount) {
        transactionRunner.run(
            entityManager -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxStorageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    private MaxUserStorage getMaxUserStorageEntity(EntityManager entityManager, QuotaRoot quotaRoot, Optional<QuotaSizeLimit> maxStorageQuota) {
        MaxUserStorage storedValue = entityManager.find(MaxUserStorage.class, quotaRoot.getValue());
        Long value = quotaValueToLong(maxStorageQuota);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'globalMaxStorage'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java


    public void setGlobalMaxStorage(Optional<QuotaSizeLimit> globalMaxStorage) {
        transactionRunner.run(
            entityManager -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxSizeQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    private MaxGlobalStorage getGlobalMaxStorageEntity(EntityManager entityManager, Optional<QuotaSizeLimit> maxSizeQuota) {
        MaxGlobalStorage storedValue = entityManager.find(MaxGlobalStorage.class, MaxGlobalStorage.DEFAULT_KEY);
        Long value = quotaValueToLong(maxSizeQuota);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'count'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    public void setDomainMaxMessage(Domain domain, Optional<QuotaCountLimit> count) {
        transactionRunner.run(
            entityManager -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxMessageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    private MaxDomainMessageCount getMaxDomainMessageEntity(EntityManager entityManager, Domain domain, Optional<QuotaCountLimit> maxMessageQuota) {
        MaxDomainMessageCount storedValue = entityManager.find(MaxDomainMessageCount.class, domain.asString());
        Long value = quotaValueToLong(maxMessageQuota);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxMessageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    private MaxUserMessageCount getMaxUserMessageEntity(EntityManager entityManager, QuotaRoot quotaRoot, Optional<QuotaCountLimit> maxMessageQuota) {
        MaxUserMessageCount storedValue = entityManager.find(MaxUserMessageCount.class, quotaRoot.getValue());
        Long value = quotaValueToLong(maxMessageQuota);
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for parameter 'maxStorageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java


    private Long quotaValueToLong(Optional<? extends QuotaLimitValue<?>> maxStorageQuota) {
        return maxStorageQuota.map(value -> {
            if (value.isUnlimited()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxStorageQuota'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    private MaxDomainStorage getMaxDomainStorageEntity(EntityManager entityManager, Domain domain, Optional<QuotaSizeLimit> maxStorageQuota) {
        MaxDomainStorage storedValue = entityManager.find(MaxDomainStorage.class, domain.asString());
        Long value = quotaValueToLong(maxStorageQuota);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxMessageCount'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaDAO.java`
#### Snippet
```java
    }

    public void setMaxMessage(QuotaRoot quotaRoot, Optional<QuotaCountLimit> maxMessageCount) {
        transactionRunner.run(
            entityManager -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sequence'
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/model/ICALAttributeDTO.java`
#### Snippet
```java
    private final String dtstamp;
    private final String method;
    private final Optional<String> sequence;
    private final Optional<String> recurrenceId;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sequence'
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/model/ICALAttributeDTO.java`
#### Snippet
```java

    private ICALAttributeDTO(String ical, String uid, String sender, String recipient, String replyTo, String dtstamp,
                             String method, Optional<String> sequence, Optional<String> recurrenceId) {
        this.ical = ical;
        this.sender = sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recurrenceId'
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/model/ICALAttributeDTO.java`
#### Snippet
```java

    private ICALAttributeDTO(String ical, String uid, String sender, String recipient, String replyTo, String dtstamp,
                             String method, Optional<String> sequence, Optional<String> recurrenceId) {
        this.ical = ical;
        this.sender = sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recurrenceId'
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/model/ICALAttributeDTO.java`
#### Snippet
```java
    private final String method;
    private final Optional<String> sequence;
    private final Optional<String> recurrenceId;

    private ICALAttributeDTO(String ical, String uid, String sender, String recipient, String replyTo, String dtstamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'blobStoreConfiguration'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'searchConfiguration'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
public class DistributedPOP3JamesConfiguration implements Configuration {
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailQueueViewChoice'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<VaultConfiguration> vaultConfiguration;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersRepositoryImplementation'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<VaultConfiguration> vaultConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'vaultConfiguration'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<VaultConfiguration> vaultConfiguration;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
        @FunctionalInterface
        interface RequireNamespace {
            ReadyToBuild namespace(Optional<BucketName> namespace);

            default ReadyToBuild namespace(BucketName namespace) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
    private final Optional<String> prefix;

    private BucketNameResolver(Optional<BucketName> namespace, Optional<String> prefix) {
        Preconditions.checkNotNull(namespace);
        Preconditions.checkNotNull(prefix);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'prefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
    private final Optional<String> prefix;

    private BucketNameResolver(Optional<BucketName> namespace, Optional<String> prefix) {
        Preconditions.checkNotNull(namespace);
        Preconditions.checkNotNull(prefix);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
            private final Optional<String> prefix;

            ReadyToBuild(Optional<BucketName> namespace, Optional<String> prefix) {
                this.namespace = namespace;
                this.prefix = prefix;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'prefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
            private final Optional<String> prefix;

            ReadyToBuild(Optional<BucketName> namespace, Optional<String> prefix) {
                this.namespace = namespace;
                this.prefix = prefix;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'prefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
        static final class ReadyToBuild {
            private final Optional<BucketName> namespace;
            private final Optional<String> prefix;

            ReadyToBuild(Optional<BucketName> namespace, Optional<String> prefix) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java

        static final class ReadyToBuild {
            private final Optional<BucketName> namespace;
            private final Optional<String> prefix;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'prefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
        @FunctionalInterface
        interface RequirePrefix {
            RequireNamespace prefix(Optional<String> prefix);

            default RequireNamespace noPrefix() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java
    }

    private final Optional<BucketName> namespace;
    private final Optional<String> prefix;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'prefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/BucketNameResolver.java`
#### Snippet
```java

    private final Optional<BucketName> namespace;
    private final Optional<String> prefix;

    private BucketNameResolver(Optional<BucketName> namespace, Optional<String> prefix) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStorePath'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
                                   String accessKeyId,
                                   String secretKey,
                                   Optional<String> trustStorePath,
                                   Optional<String> trustStoreType,
                                   Optional<String> trustStoreSecret,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStoreType'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
                                   String secretKey,
                                   Optional<String> trustStorePath,
                                   Optional<String> trustStoreType,
                                   Optional<String> trustStoreSecret,
                                   Optional<String> trustStoreAlgorithm) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStoreSecret'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
                                   Optional<String> trustStorePath,
                                   Optional<String> trustStoreType,
                                   Optional<String> trustStoreSecret,
                                   Optional<String> trustStoreAlgorithm) {
        this.endpoint = endpoint;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStoreAlgorithm'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
                                   Optional<String> trustStoreType,
                                   Optional<String> trustStoreSecret,
                                   Optional<String> trustStoreAlgorithm) {
        this.endpoint = endpoint;
        this.accessKeyId = accessKeyId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStorePath'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild trustStorePath(Optional<String> trustStorePath) {
                this.trustStorePath = trustStorePath;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStoreType'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java

            private Optional<String> trustStorePath;
            private Optional<String> trustStoreType;
            private Optional<String> trustStoreSecret;
            private Optional<String> trustStoreAlgorithm;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStoreAlgorithm'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild trustStoreAlgorithm(Optional<String> trustStoreAlgorithm) {
                this.trustStoreAlgorithm = trustStoreAlgorithm;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStoreSecret'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild trustStoreSecret(Optional<String> trustStoreSecret) {
                this.trustStoreSecret = trustStoreSecret;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStorePath'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
    private final String secretKey;

    private final Optional<String> trustStorePath;
    private final Optional<String> trustStoreType;
    private final Optional<String> trustStoreSecret;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStoreAlgorithm'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            private Optional<String> trustStoreType;
            private Optional<String> trustStoreSecret;
            private Optional<String> trustStoreAlgorithm;

            public ReadyToBuild(URI endpoint, String accessKeyId, String secretKey) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStorePath'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            private final String secretKey;

            private Optional<String> trustStorePath;
            private Optional<String> trustStoreType;
            private Optional<String> trustStoreSecret;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStoreAlgorithm'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
    private final Optional<String> trustStoreType;
    private final Optional<String> trustStoreSecret;
    private final Optional<String> trustStoreAlgorithm;

    private AwsS3AuthConfiguration(URI endpoint,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStoreType'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild trustStoreType(Optional<String> trustStoreType) {
                this.trustStoreType = trustStoreType;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStoreSecret'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
    private final Optional<String> trustStorePath;
    private final Optional<String> trustStoreType;
    private final Optional<String> trustStoreSecret;
    private final Optional<String> trustStoreAlgorithm;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStoreType'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java

    private final Optional<String> trustStorePath;
    private final Optional<String> trustStoreType;
    private final Optional<String> trustStoreSecret;
    private final Optional<String> trustStoreAlgorithm;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStoreSecret'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/AwsS3AuthConfiguration.java`
#### Snippet
```java
            private Optional<String> trustStorePath;
            private Optional<String> trustStoreType;
            private Optional<String> trustStoreSecret;
            private Optional<String> trustStoreAlgorithm;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'httpConcurrency'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild httpConcurrency(Optional<Integer> httpConcurrency) {
                this.httpConcurrency = httpConcurrency;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bucketPrefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java

            private Optional<BucketName> defaultBucketName;
            private Optional<String> bucketPrefix;
            private Optional<Integer> httpConcurrency;
            private Optional<Duration> readTimeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultBucketName'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild defaultBucketName(Optional<BucketName> defaultBucketName) {
                this.defaultBucketName = defaultBucketName;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'inMemoryReadLimit'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final Optional<String> bucketPrefix;
    private final int httpConcurrency;
    private final Optional<Long> inMemoryReadLimit;
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'httpConcurrency'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private Optional<BucketName> defaultBucketName;
            private Optional<String> bucketPrefix;
            private Optional<Integer> httpConcurrency;
            private Optional<Duration> readTimeout;
            private Optional<Duration> writeTimeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultBucketName'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private final AwsS3AuthConfiguration specificAuthConfiguration;

            private Optional<BucketName> defaultBucketName;
            private Optional<String> bucketPrefix;
            private Optional<Integer> httpConcurrency;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'readTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private Optional<String> bucketPrefix;
            private Optional<Integer> httpConcurrency;
            private Optional<Duration> readTimeout;
            private Optional<Duration> writeTimeout;
            private Optional<Duration> connectionTimeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'writeTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final Optional<Long> inMemoryReadLimit;
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
    private Optional<Duration> connectionTimeout;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'inMemoryReadLimit'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private Optional<Duration> writeTimeout;
            private Optional<Duration> connectionTimeout;
            private Optional<Long> inMemoryReadLimit;
            private Region region;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'connectionTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild connectionTimeout(Optional<Duration> connectionTimeout) {
                this.connectionTimeout = connectionTimeout;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private Optional<Duration> readTimeout;
            private Optional<Duration> writeTimeout;
            private Optional<Duration> connectionTimeout;
            private Optional<Long> inMemoryReadLimit;
            private Region region;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'writeTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private Optional<Integer> httpConcurrency;
            private Optional<Duration> readTimeout;
            private Optional<Duration> writeTimeout;
            private Optional<Duration> connectionTimeout;
            private Optional<Long> inMemoryReadLimit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
    private Optional<Duration> connectionTimeout;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bucketPrefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final AwsS3AuthConfiguration specificAuthConfiguration;
    private final Optional<BucketName> namespace;
    private final Optional<String> bucketPrefix;
    private final int httpConcurrency;
    private final Optional<Long> inMemoryReadLimit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'readTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild readTimeout(Optional<Duration> readTimeout) {
                this.readTimeout = readTimeout;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'writeTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild writeTimeout(Optional<Duration> writeTimeout) {
                this.writeTimeout = writeTimeout;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bucketPrefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild bucketPrefix(Optional<String> bucketPrefix) {
                this.bucketPrefix = bucketPrefix;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'readTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final int httpConcurrency;
    private final Optional<Long> inMemoryReadLimit;
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
    private Optional<Duration> connectionTimeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final Region region;
    private final AwsS3AuthConfiguration specificAuthConfiguration;
    private final Optional<BucketName> namespace;
    private final Optional<String> bucketPrefix;
    private final int httpConcurrency;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bucketPrefix'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    S3BlobStoreConfiguration(Optional<String> bucketPrefix,
                             Optional<BucketName> namespace,
                             Region region,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'namespace'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    S3BlobStoreConfiguration(Optional<String> bucketPrefix,
                             Optional<BucketName> namespace,
                             Region region,
                             AwsS3AuthConfiguration specificAuthConfiguration,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inMemoryReadLimit'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
                             AwsS3AuthConfiguration specificAuthConfiguration,
                             int httpConcurrency,
                             Optional<Long> inMemoryReadLimit,
                             Optional<Duration> readTimeout,
                             Optional<Duration> writeTimeout,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'readTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
                             int httpConcurrency,
                             Optional<Long> inMemoryReadLimit,
                             Optional<Duration> readTimeout,
                             Optional<Duration> writeTimeout,
                             Optional<Duration> connectionTimeout) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'writeTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
                             Optional<Long> inMemoryReadLimit,
                             Optional<Duration> readTimeout,
                             Optional<Duration> writeTimeout,
                             Optional<Duration> connectionTimeout) {
        this.bucketPrefix = bucketPrefix;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'connectionTimeout'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
                             Optional<Duration> readTimeout,
                             Optional<Duration> writeTimeout,
                             Optional<Duration> connectionTimeout) {
        this.bucketPrefix = bucketPrefix;
        this.namespace = namespace;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inMemoryReadLimit'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            }

            public ReadyToBuild inMemoryReadLimit(Optional<Long> inMemoryReadLimit) {
                this.inMemoryReadLimit = inMemoryReadLimit;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runner'
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/JamesMailSpooler.java`
#### Snippet
```java

    private Configuration configuration;
    private Optional<Runner> runner;
    private MailQueue queue;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'usersPerSecond'
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RunningOptionsDTO.java`
#### Snippet
```java
    @JsonCreator
    public RunningOptionsDTO(
            @JsonProperty("usersPerSecond") Optional<Integer> usersPerSecond) {
        this.usersPerSecond = usersPerSecond;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersPerSecond'
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RunningOptionsDTO.java`
#### Snippet
```java
    }

    private final Optional<Integer> usersPerSecond;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RecomputeCurrentQuotasTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long processedQuotaRoots;
    private final ImmutableList<String> failedQuotaRoots;
    private final Optional<RunningOptionsDTO> runningOptions;
    private final Instant timestamp;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RecomputeCurrentQuotasTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                              @JsonProperty("processedQuotaRoots") long processedQuotaRoots,
                                                              @JsonProperty("failedQuotaRoots") ImmutableList<String> failedQuotaRoots,
                                                              @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions,
                                                              @JsonProperty("timestamp") Instant timestamp) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RecomputeCurrentQuotasTaskDTO.java`
#### Snippet
```java

    public RecomputeCurrentQuotasTaskDTO(@JsonProperty("type") String type,
                                         @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.runningOptions = runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RecomputeCurrentQuotasTaskDTO.java`
#### Snippet
```java

    private final String type;
    private final Optional<RunningOptionsDTO> runningOptions;

    public RecomputeCurrentQuotasTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'jwtPublickeyPemUrl'
in `server/container/guice/protocols/webadmin/src/main/java/org/apache/james/modules/server/WebAdminServerModule.java`
#### Snippet
```java
    }

    private Optional<String> loadPublicKey(FileSystem fileSystem, Optional<String> jwtPublickeyPemUrl) {
        return jwtPublickeyPemUrl.map(Throwing.function(url -> FileUtils.readFileToString(fileSystem.getFile(url), StandardCharsets.US_ASCII)));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/json/QuotaRatioAsJson.java`
#### Snippet
```java

    private final String user;
    private final Optional<String> domain;
    private final QuotaRatio quotaRatio;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/json/QuotaRatioAsJson.java`
#### Snippet
```java
    private final QuotaRatio quotaRatio;

    private QuotaRatioAsJson(String user, Optional<String> domain, QuotaRatio quotaRatio) {
        this.user = user;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/json/QuotaRatioAsJson.java`
#### Snippet
```java
        }

        public Builder domain(Optional<String> domain) {
            this.domain = domain;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/json/QuotaRatioAsJson.java`
#### Snippet
```java

        private String user;
        private Optional<String> domain;
        private QuotaRatio quotaRatio;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'indexQuotaRatioName'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/OpenSearchQuotaConfiguration.java`
#### Snippet
```java
    public static class Builder {

        private Optional<IndexName> indexQuotaRatioName;
        private Optional<ReadAliasName> readAliasQuotaRatioName;
        private Optional<WriteAliasName> writeAliasQuotaRatioName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'indexQuotaRatioName'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/OpenSearchQuotaConfiguration.java`
#### Snippet
```java
        }

        public Builder indexQuotaRatioName(Optional<IndexName> indexQuotaRatioName) {
            this.indexQuotaRatioName = indexQuotaRatioName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'writeAliasQuotaRatioName'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/OpenSearchQuotaConfiguration.java`
#### Snippet
```java
        private Optional<IndexName> indexQuotaRatioName;
        private Optional<ReadAliasName> readAliasQuotaRatioName;
        private Optional<WriteAliasName> writeAliasQuotaRatioName;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'readAliasQuotaRatioName'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/OpenSearchQuotaConfiguration.java`
#### Snippet
```java
        }

        public Builder readAliasQuotaRatioName(Optional<ReadAliasName> readAliasQuotaRatioName) {
            this.readAliasQuotaRatioName = readAliasQuotaRatioName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'readAliasQuotaRatioName'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/OpenSearchQuotaConfiguration.java`
#### Snippet
```java

        private Optional<IndexName> indexQuotaRatioName;
        private Optional<ReadAliasName> readAliasQuotaRatioName;
        private Optional<WriteAliasName> writeAliasQuotaRatioName;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'writeAliasQuotaRatioName'
in `mailbox/plugin/quota-search-opensearch/src/main/java/org/apache/james/quota/search/opensearch/OpenSearchQuotaConfiguration.java`
#### Snippet
```java
        }

        public Builder writeAliasQuotaRatioName(Optional<WriteAliasName> writeAliasQuotaRatioName) {
            this.writeAliasQuotaRatioName = writeAliasQuotaRatioName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userBase'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<String> principal;
        private Optional<String> credentials;
        private Optional<String> userBase;
        private Optional<String> userIdAttribute;
        private Optional<String> userObjectClass;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'credentials'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<String> ldapHost;
        private Optional<String> principal;
        private Optional<String> credentials;
        private Optional<String> userBase;
        private Optional<String> userIdAttribute;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'principal'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> ldapHost;
        private Optional<String> principal;
        private Optional<String> credentials;
        private Optional<String> userBase;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'administratorId'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
                                        String userObjectClass, int connectionTimeout, int readTimeout,
                                        boolean supportsVirtualHosting, int poolSize, ReadOnlyLDAPGroupRestriction restriction, String filter,
                                        Optional<String> administratorId, boolean trustAllCerts,
                                        ImmutableMap<Domain, String> perDomainBaseDN) throws ConfigurationException {
        this.ldapHost = ldapHost;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'administratorId'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
     * The administrator is allowed to log in as other users
     */
    private final Optional<Username> administratorId;

    private final boolean trustAllCerts;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userIdAttribute'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<String> credentials;
        private Optional<String> userBase;
        private Optional<String> userIdAttribute;
        private Optional<String> userObjectClass;
        private Optional<Integer> poolSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ldapHost'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<String> ldapHost;
        private Optional<String> principal;
        private Optional<String> credentials;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_ADMINISTRATOR_ID'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
    private static final ReadOnlyLDAPGroupRestriction NO_RESTRICTION = new ReadOnlyLDAPGroupRestriction(null);
    private static final String NO_FILTER = null;
    private static final Optional<String> NO_ADMINISTRATOR_ID = Optional.empty();
    private static final int DEFAULT_POOL_SIZE = 4;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustAllCerts'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<String> userObjectClass;
        private Optional<Integer> poolSize;
        private Optional<Boolean> trustAllCerts;
        private ImmutableMap.Builder<Domain, String> perDomainBaseDN;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'poolSize'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<String> userIdAttribute;
        private Optional<String> userObjectClass;
        private Optional<Integer> poolSize;
        private Optional<Boolean> trustAllCerts;
        private ImmutableMap.Builder<Domain, String> perDomainBaseDN;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userObjectClass'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<String> userBase;
        private Optional<String> userIdAttribute;
        private Optional<String> userObjectClass;
        private Optional<Integer> poolSize;
        private Optional<Boolean> trustAllCerts;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userExtraFilter'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/ReadOnlyLDAPUsersDAO.java`
#### Snippet
```java
    private LdapRepositoryConfiguration ldapConfiguration;
    private LDAPConnectionPool ldapConnectionPool;
    private Optional<Filter> userExtraFilter;
    private Filter objectClassFilter;
    private Filter listingFilter;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionPerIpLimitUpstreamHandler'
in `server/protocols/protocols-managesieve/src/main/java/org/apache/james/managesieveserver/netty/ManageSieveServer.java`
#### Snippet
```java
    private final ManageSieveProcessor manageSieveProcessor;
    private Optional<ConnectionLimitUpstreamHandler> connectionLimitUpstreamHandler = Optional.empty();
    private Optional<ConnectionPerIpLimitUpstreamHandler> connectionPerIpLimitUpstreamHandler = Optional.empty();

    public ManageSieveServer(int maxLineLength, ManageSieveProcessor manageSieveProcessor) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionLimitUpstreamHandler'
in `server/protocols/protocols-managesieve/src/main/java/org/apache/james/managesieveserver/netty/ManageSieveServer.java`
#### Snippet
```java
    private final int maxLineLength;
    private final ManageSieveProcessor manageSieveProcessor;
    private Optional<ConnectionLimitUpstreamHandler> connectionLimitUpstreamHandler = Optional.empty();
    private Optional<ConnectionPerIpLimitUpstreamHandler> connectionPerIpLimitUpstreamHandler = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedHamToRspamdTaskDTO.java`
#### Snippet
```java
                                  @JsonProperty("rspamdTimeoutInSeconds") int rspamdTimeoutInSeconds,
                                  @JsonProperty("samplingProbability") double samplingProbability,
                                  @JsonProperty("classifiedAsSpam") Optional<Boolean> classifiedAsSpam) {
        this.type = type;
        this.periodInSecond = periodInSecond;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedHamToRspamdTaskDTO.java`
#### Snippet
```java
    private final int messagesPerSecond;
    private final double samplingProbability;
    private final Optional<Boolean> classifiedAsSpam;

    private final int rspamdTimeoutInSeconds;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedSpamToRspamdTaskDTO.java`
#### Snippet
```java
    private final int messagesPerSecond;
    private final double samplingProbability;
    private final Optional<Boolean> classifiedAsSpam;
    private final int rspamdTimeoutInSeconds;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedSpamToRspamdTaskDTO.java`
#### Snippet
```java
                                   @JsonProperty("rspamdTimeoutInSeconds") int rspamdTimeoutInSeconds,
                                   @JsonProperty("samplingProbability") double samplingProbability,
                                   @JsonProperty("classifiedAsSpam") Optional<Boolean> classifiedAsSpam) {
        this.type = type;
        this.periodInSecond = periodInSecond;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'periodInSecond'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java
    public static final RunningOptions DEFAULT = new RunningOptions(DEFAULT_PERIOD, DEFAULT_MESSAGES_PER_SECOND, DEFAULT_SAMPLING_PROBABILITY, ALL_MESSAGES, DEFAULT_RSPAMD_TIMEOUT);

    private final Optional<Long> periodInSecond;
    private final int messagesPerSecond;
    private final double samplingProbability;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'periodInSecond'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java
    private final Duration rspamdTimeout;

    public RunningOptions(Optional<Long> periodInSecond,
                          int messagesPerSecond,
                          double samplingProbability,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java
                          int messagesPerSecond,
                          double samplingProbability,
                          Optional<Boolean> classifiedAsSpam) {
        this(periodInSecond, messagesPerSecond, samplingProbability, classifiedAsSpam, DEFAULT_RSPAMD_TIMEOUT);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ALL_MESSAGES'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java
    public static final Duration DEFAULT_RSPAMD_TIMEOUT = Duration.ofSeconds(15);
    public static final double DEFAULT_SAMPLING_PROBABILITY = 1;
    public static final Optional<Boolean> ALL_MESSAGES = Optional.empty();
    public static final RunningOptions DEFAULT = new RunningOptions(DEFAULT_PERIOD, DEFAULT_MESSAGES_PER_SECOND, DEFAULT_SAMPLING_PROBABILITY, ALL_MESSAGES, DEFAULT_RSPAMD_TIMEOUT);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'DEFAULT_PERIOD'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java


    public static final Optional<Long> DEFAULT_PERIOD = Optional.empty();
    public static final int DEFAULT_MESSAGES_PER_SECOND = 10;
    public static final Duration DEFAULT_RSPAMD_TIMEOUT = Duration.ofSeconds(15);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java
    private final int messagesPerSecond;
    private final double samplingProbability;
    private final Optional<Boolean> classifiedAsSpam;
    private final Duration rspamdTimeout;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'periodInSecond'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java


    public RunningOptions(@JsonProperty("periodInSecond") Optional<Long> periodInSecond,
                          @JsonProperty("messagesPerSecond") int messagesPerSecond,
                          @JsonProperty("samplingProbability") double samplingProbability,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'classifiedAsSpam'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/RunningOptions.java`
#### Snippet
```java
                          @JsonProperty("messagesPerSecond") int messagesPerSecond,
                          @JsonProperty("samplingProbability") double samplingProbability,
                          @JsonProperty("classifiedAsSpam") Optional<Boolean> classifiedAsSpam,
                          @JsonProperty("rspamdTimeoutInSeconds") Duration rspamdTimeout) {
        this.periodInSecond = periodInSecond;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'desiredRewriteSubject'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/model/AnalysisResult.java`
#### Snippet
```java
        private float score;
        private float requiredScore;
        private Optional<String> desiredRewriteSubject;
        private boolean hasVirus;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'desiredRewriteSubject'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/model/AnalysisResult.java`
#### Snippet
```java
    private final float score;
    private final float requiredScore;
    private final Optional<String> desiredRewriteSubject;
    private final boolean hasVirus;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'desiredRewriteSubject'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/model/AnalysisResult.java`
#### Snippet
```java
    private final boolean hasVirus;

    public AnalysisResult(Action action, float score, float requiredScore, Optional<String> desiredRewriteSubject, boolean hasVirus) {
        this.action = action;
        this.score = score;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'timeout'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/client/RspamdClientConfiguration.java`
#### Snippet
```java
    private final URL url;
    private final String password;
    private final Optional<Integer> timeout;
    private final boolean perUserBayes;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'timeout'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/client/RspamdClientConfiguration.java`
#### Snippet
```java
    }

    public RspamdClientConfiguration(URL url, String password, Optional<Integer> timeout, boolean perUserBayes) {
        this.url = url;
        this.password = password;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'timeout'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/client/RspamdClientConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    public RspamdClientConfiguration(URL url, String password, Optional<Integer> timeout) {
        this.url = url;
        this.password = password;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rejectSpamProcessor'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/RspamdScanner.java`
#### Snippet
```java
    private boolean rewriteSubject;
    private Optional<String> virusProcessor;
    private Optional<String> rejectSpamProcessor;

    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'virusProcessor'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/RspamdScanner.java`
#### Snippet
```java
    private final RspamdClientConfiguration configuration;
    private boolean rewriteSubject;
    private Optional<String> virusProcessor;
    private Optional<String> rejectSpamProcessor;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'hamMessageCount'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedHamToRspamdTask.java`
#### Snippet
```java

            static class Builder {
                private Optional<Long> hamMessageCount;
                private Optional<Long> reportedHamMessageCount;
                private Optional<Long> errorCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'errorCount'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedHamToRspamdTask.java`
#### Snippet
```java
                private Optional<Long> hamMessageCount;
                private Optional<Long> reportedHamMessageCount;
                private Optional<Long> errorCount;

                Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'reportedHamMessageCount'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedHamToRspamdTask.java`
#### Snippet
```java
            static class Builder {
                private Optional<Long> hamMessageCount;
                private Optional<Long> reportedHamMessageCount;
                private Optional<Long> errorCount;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'errorCount'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedSpamToRspamdTask.java`
#### Snippet
```java
                private Optional<Long> spamMessageCount;
                private Optional<Long> reportedSpamMessageCount;
                private Optional<Long> errorCount;

                Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'reportedSpamMessageCount'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedSpamToRspamdTask.java`
#### Snippet
```java
            static class Builder {
                private Optional<Long> spamMessageCount;
                private Optional<Long> reportedSpamMessageCount;
                private Optional<Long> errorCount;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'spamMessageCount'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedSpamToRspamdTask.java`
#### Snippet
```java

            static class Builder {
                private Optional<Long> spamMessageCount;
                private Optional<Long> reportedSpamMessageCount;
                private Optional<Long> errorCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'afterDate'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/GetMailboxMessagesService.java`
#### Snippet
```java
    }

    private Flux<MessageResult> getMailboxMessagesOfAUser(Username username, String mailboxName, Optional<Date> afterDate,
                                                          RunningOptions runningOptions, FeedSpamToRspamdTask.Context context) {
        MailboxSession mailboxSession = mailboxManager.createSystemSession(username);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'afterDate'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/GetMailboxMessagesService.java`
#### Snippet
```java
    }

    public Flux<Pair<Username, MessageResult>> getHamMessagesOfAllUser(Optional<Date> afterDate, RunningOptions runningOptions,
                                                                       FeedHamToRspamdTask.Context context) {
        return Flux.from(userRepository.listReactive())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'afterDate'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/GetMailboxMessagesService.java`
#### Snippet
```java
    }

    private Flux<MessageResult> getMailboxMessagesOfAUser(Username username, MailboxMetaData mailboxMetaData, Optional<Date> afterDate,
                                                          RunningOptions runningOptions, FeedHamToRspamdTask.Context context) {
        MailboxSession mailboxSession = mailboxManager.createSystemSession(username);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'afterDate'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/GetMailboxMessagesService.java`
#### Snippet
```java
    }

    public Flux<Pair<Username, MessageResult>> getMailboxMessagesOfAllUser(String mailboxName, Optional<Date> afterDate, RunningOptions runningOptions,
                                                                           FeedSpamToRspamdTask.Context context) {
        return Flux.from(userRepository.listReactive())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeContent'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessageZipper.java`
#### Snippet
```java

    @VisibleForTesting
    void putMessageToEntry(ZipArchiveOutputStream zipOutputStream, DeletedMessage message, Optional<InputStream> maybeContent) throws IOException {
        if (maybeContent.isPresent()) {
            try (InputStream closableMessageContent = maybeContent.get()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessageConverter.java`
#### Snippet
```java
    }

    private Set<MailAddress> retrieveRecipients(Optional<Message> maybeMessage) {
        return maybeMessage.map(message -> Envelope.fromMime4JMessage(message, Envelope.ValidationPolicy.IGNORE))
            .map(Envelope::getRecipients)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessage'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessageConverter.java`
#### Snippet
```java
    }

    private MaybeSender retrieveSender(Optional<Message> mimeMessage) {
        return mimeMessage
            .map(Message::getSender)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessage'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessageConverter.java`
#### Snippet
```java
    }

    private ZonedDateTime retrieveDeliveryDate(Optional<Message> mimeMessage, org.apache.james.mailbox.store.mail.model.Message message) {
        return mimeMessage.map(Message::getDate)
            .map(Date::toInstant)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/dto/query/QueryDTO.java`
#### Snippet
```java
    public QueryDTO(@JsonProperty("combinator") String combinator,
                    @JsonProperty("criteria") List<QueryElement> criteria,
                    @JsonProperty("limit") Optional<Long> limit) {
        this.combinator = combinator;
        this.criteria = criteria;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/dto/query/QueryDTO.java`
#### Snippet
```java
    private final String combinator;
    private final List<QueryElement> criteria;
    private final Optional<Long> limit;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/dto/DeletedMessageWithStorageInformationDTO.java`
#### Snippet
```java
        private final String sender;
        private final List<String> recipients;
        private final Optional<String> subject;
        private final boolean hasAttachment;
        private final long size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/dto/DeletedMessageWithStorageInformationDTO.java`
#### Snippet
```java
                                 @JsonProperty("sender") String sender,
                                 @JsonProperty("recipients") List<String> recipients,
                                 @JsonProperty("subject") Optional<String> subject,
                                 @JsonProperty("hasAttachment") boolean hasAttachment,
                                 @JsonProperty("size") long size) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessage.java`
#### Snippet
```java
    public DeletedMessage(MessageId messageId, List<MailboxId> originMailboxes, Username owner,
                          ZonedDateTime deliveryDate, ZonedDateTime deletionDate, MaybeSender sender, List<MailAddress> recipients,
                          Optional<String> subject, boolean hasAttachment, long size) {
        Preconditions.checkArgument(size > 0, "'size' is required to be a strictly positive number");

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessage.java`
#### Snippet
```java
            private final boolean hasAttachment;
            private final long size;
            private Optional<String> subject;

            FinalStage(MessageId messageId, List<MailboxId> originMailboxes, Username owner, ZonedDateTime deliveryDate,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessage.java`
#### Snippet
```java
            }

            public FinalStage subject(Optional<String> subject) {
                this.subject = subject;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/DeletedMessage.java`
#### Snippet
```java
    private final MaybeSender sender;
    private final List<MailAddress> recipients;
    private final Optional<String> subject;
    private final boolean hasAttachment;
    private final long size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/Query.java`
#### Snippet
```java
    }

    public static Query and(List<Criterion<?>> criteria, Optional<Long> limit) {
        return new Query(criteria, limit.orElse(null));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'username'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/client/RspamdHttpClient.java`
#### Snippet
```java
        private final Optional<Username> username;

        public Options(Optional<Username> username) {
            this.username = username;
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'username'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/client/RspamdHttpClient.java`
#### Snippet
```java
        }

        private final Optional<Username> username;

        public Options(Optional<Username> username) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/Query.java`
#### Snippet
```java
    private final List<Criterion<?>> criteria;

    private final Optional<Long> limit;

    private Query(List<Criterion<?>> criteria) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lineCount'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/POP3MessageCommandArguments.java`
#### Snippet
```java
    
    private final int messageNumber;
    private final Optional<Integer> lineCount;

    public static Optional<POP3MessageCommandArguments> fromRequest(Request request) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lineCount'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/POP3MessageCommandArguments.java`
#### Snippet
```java
    }
    
    private POP3MessageCommandArguments(int messsageNumber, Optional<Integer> lineCount) {
        this.messageNumber = messsageNumber;
        this.lineCount = lineCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'givenUserId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/FakeAuthorizator.java`
#### Snippet
```java
    private final Optional<Username> delegatedUserId;

    private FakeAuthorizator(Optional<Username> givenUserId, Optional<Username> userId) {
        this.givenUserId = givenUserId;
        this.delegatedUserId = userId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'userId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/FakeAuthorizator.java`
#### Snippet
```java
    private final Optional<Username> delegatedUserId;

    private FakeAuthorizator(Optional<Username> givenUserId, Optional<Username> userId) {
        this.givenUserId = givenUserId;
        this.delegatedUserId = userId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'givenUserId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/FakeAuthorizator.java`
#### Snippet
```java
    }

    private final Optional<Username> givenUserId;
    private final Optional<Username> delegatedUserId;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delegatedUserId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/FakeAuthorizator.java`
#### Snippet
```java

    private final Optional<Username> givenUserId;
    private final Optional<Username> delegatedUserId;

    private FakeAuthorizator(Optional<Username> givenUserId, Optional<Username> userId) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'loggedInUser'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/SessionProviderImpl.java`
#### Snippet
```java
    }

    private MailboxSession createSession(Username userName, Optional<Username> loggedInUser, MailboxSession.SessionType type) {
        return new MailboxSession(newSessionId(), userName, loggedInUser, new ArrayList<>(), MailboxConstants.DEFAULT_DELIMITER, type);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'metricFactory'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/PreDeletionHooks.java`
#### Snippet
```java

    private final Set<PreDeletionHook> hooks;
    private final Optional<MetricFactory> metricFactory;

    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'metricFactory'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/PreDeletionHooks.java`
#### Snippet
```java
    }

    private PreDeletionHooks(Set<PreDeletionHook> hooks, Optional<MetricFactory> metricFactory) {
        this.hooks = hooks;
        this.metricFactory = metricFactory;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MessageStorer.java`
#### Snippet
```java
     * Otherwize an empty optional will be returned on the right side of the pair.
     */
    Mono<Pair<MessageMetaData, Optional<List<MessageAttachmentMetadata>>>> appendMessageToStore(Mailbox mailbox, Date internalDate, int size, int bodyStartOctet, Content content, Flags flags, PropertyBuilder propertyBuilder, Optional<Message> maybeMessage, MailboxSession session, HeaderImpl headers) throws MailboxException;

    /**
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MessageStorer.java`
#### Snippet
```java
        }

        private Mono<List<MessageAttachmentMetadata>> storeAttachments(MessageId messageId, Content messageContent, Optional<Message> maybeMessage, MailboxSession session) {
            MessageParser.ParsingResult attachments = extractAttachments(messageContent, maybeMessage);
            return attachmentMapperFactory.getAttachmentMapper(session)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MessageStorer.java`
#### Snippet
```java
        }

        private MessageParser.ParsingResult extractAttachments(Content contentIn, Optional<Message> maybeMessage) {
            return maybeMessage.map(message -> {
                try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'copyBatchSize'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
    private final Optional<Integer> moveBatchSize;

    private BatchSizes(int fetchMetadata, int fetchHeaders, int fetchFull, Optional<Integer> copyBatchSize, Optional<Integer> moveBatchSize) {
        this.fetchMetadata = fetchMetadata;
        this.fetchHeaders = fetchHeaders;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'moveBatchSize'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
    private final Optional<Integer> moveBatchSize;

    private BatchSizes(int fetchMetadata, int fetchHeaders, int fetchFull, Optional<Integer> copyBatchSize, Optional<Integer> moveBatchSize) {
        this.fetchMetadata = fetchMetadata;
        this.fetchHeaders = fetchHeaders;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'copyBatchSize'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
        private Optional<Integer> fetchHeaders;
        private Optional<Integer> fetchFull;
        private Optional<Integer> copyBatchSize;
        private Optional<Integer> moveBatchSize;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'copyBatchSize'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
    private final int fetchHeaders;
    private final int fetchFull;
    private final Optional<Integer> copyBatchSize;
    private final Optional<Integer> moveBatchSize;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'moveBatchSize'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
        private Optional<Integer> fetchFull;
        private Optional<Integer> copyBatchSize;
        private Optional<Integer> moveBatchSize;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchMetadata'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
    public static class Builder {

        private Optional<Integer> fetchMetadata;
        private Optional<Integer> fetchHeaders;
        private Optional<Integer> fetchFull;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchFull'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
        private Optional<Integer> fetchMetadata;
        private Optional<Integer> fetchHeaders;
        private Optional<Integer> fetchFull;
        private Optional<Integer> copyBatchSize;
        private Optional<Integer> moveBatchSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchHeaders'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java

        private Optional<Integer> fetchMetadata;
        private Optional<Integer> fetchHeaders;
        private Optional<Integer> fetchFull;
        private Optional<Integer> copyBatchSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'moveBatchSize'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/BatchSizes.java`
#### Snippet
```java
    private final int fetchFull;
    private final Optional<Integer> copyBatchSize;
    private final Optional<Integer> moveBatchSize;

    private BatchSizes(int fetchMetadata, int fetchHeaders, int fetchFull, Optional<Integer> copyBatchSize, Optional<Integer> moveBatchSize) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'thisMimeMessageId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/ThreadIdGuessingAlgorithm.java`
#### Snippet
```java

public interface ThreadIdGuessingAlgorithm {
    Mono<ThreadId> guessThreadIdReactive(MessageId messageId, Optional<MimeMessageId> thisMimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject, MailboxSession session);

    Flux<MessageId> getMessageIdsInThread(ThreadId threadId, MailboxSession session);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyTo'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/ThreadIdGuessingAlgorithm.java`
#### Snippet
```java

public interface ThreadIdGuessingAlgorithm {
    Mono<ThreadId> guessThreadIdReactive(MessageId messageId, Optional<MimeMessageId> thisMimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject, MailboxSession session);

    Flux<MessageId> getMessageIdsInThread(ThreadId threadId, MailboxSession session);
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'references'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/ThreadIdGuessingAlgorithm.java`
#### Snippet
```java

public interface ThreadIdGuessingAlgorithm {
    Mono<ThreadId> guessThreadIdReactive(MessageId messageId, Optional<MimeMessageId> thisMimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject, MailboxSession session);

    Flux<MessageId> getMessageIdsInThread(ThreadId threadId, MailboxSession session);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/ThreadIdGuessingAlgorithm.java`
#### Snippet
```java

public interface ThreadIdGuessingAlgorithm {
    Mono<ThreadId> guessThreadIdReactive(MessageId messageId, Optional<MimeMessageId> thisMimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject, MailboxSession session);

    Flux<MessageId> getMessageIdsInThread(ThreadId threadId, MailboxSession session);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'EMPTY_SAVE_DATE'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/MailboxMessage.java`
#### Snippet
```java
public interface MailboxMessage extends Message, Comparable<MailboxMessage> {

    Optional<Date> EMPTY_SAVE_DATE = Optional.empty();

    ThreadId getThreadId();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessageId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private Set<MimeMessageId> buildMimeMessageIdSet(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references) {
        Set<MimeMessageId> mimeMessageIds = new HashSet<>();
        mimeMessageId.ifPresent(mimeMessageIds::add);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyTo'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private Set<MimeMessageId> buildMimeMessageIdSet(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references) {
        Set<MimeMessageId> mimeMessageIds = new HashSet<>();
        mimeMessageId.ifPresent(mimeMessageIds::add);
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'references'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private Set<MimeMessageId> buildMimeMessageIdSet(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references) {
        Set<MimeMessageId> mimeMessageIds = new HashSet<>();
        mimeMessageId.ifPresent(mimeMessageIds::add);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessageId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private MultimailboxesSearchQuery buildSearchQuery(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject) {
        Set<MimeMessageId> mimeMessageIds = buildMimeMessageIdSet(mimeMessageId, inReplyTo, references);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyTo'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private MultimailboxesSearchQuery buildSearchQuery(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject) {
        Set<MimeMessageId> mimeMessageIds = buildMimeMessageIdSet(mimeMessageId, inReplyTo, references);

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'references'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private MultimailboxesSearchQuery buildSearchQuery(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject) {
        Set<MimeMessageId> mimeMessageIds = buildMimeMessageIdSet(mimeMessageId, inReplyTo, references);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/SearchThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private MultimailboxesSearchQuery buildSearchQuery(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references, Optional<Subject> subject) {
        Set<MimeMessageId> mimeMessageIds = buildMimeMessageIdSet(mimeMessageId, inReplyTo, references);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'systemFlagFilter'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/FlagsFilter.java`
#### Snippet
```java

    public static class Builder {
        private Optional<SystemFlagFilter> systemFlagFilter;
        private Optional<UserFlagFilter> userFlagFilter;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userFlagFilter'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/FlagsFilter.java`
#### Snippet
```java
    public static class Builder {
        private Optional<SystemFlagFilter> systemFlagFilter;
        private Optional<UserFlagFilter> userFlagFilter;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'flags'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/FlagsFactory.java`
#### Snippet
```java

        private final ArrayList<String> userFlags;
        private Optional<Flags> flags;
        private Optional<FlagsFilter> flagsFilter;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'flagsFilter'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/FlagsFactory.java`
#### Snippet
```java
        private final ArrayList<String> userFlags;
        private Optional<Flags> flags;
        private Optional<FlagsFilter> flagsFilter;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
        }

        public Builder saveDate(Optional<Date> saveDate) {
            this.saveDate = saveDate;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
        private ThreadId threadId;
        private Date internalDate;
        private Optional<Date> saveDate = Optional.empty();
        private Long size;
        private Integer bodyStartOctet;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
    public SimpleMailboxMessage(MessageId messageId, ThreadId threadId, Date internalDate, long size, int bodyStartOctet,
                                Content content, Flags flags,
                                Properties properties, MailboxId mailboxId, List<MessageAttachmentMetadata> attachments, Optional<Date> saveDate) {
        super(new SimpleMessage(
                messageId,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
    private final MailboxId mailboxId;
    private final ThreadId threadId;
    private Optional<Date> saveDate;
    private boolean answered;
    private boolean deleted;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'modseq'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
        private MailboxId mailboxId;
        private Optional<MessageUid> uid = Optional.empty();
        private Optional<ModSeq> modseq = Optional.empty();
        private ImmutableList.Builder<MessageAttachmentMetadata> attachments = ImmutableList.builder();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'uid'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
        private Properties properties;
        private MailboxId mailboxId;
        private Optional<MessageUid> uid = Optional.empty();
        private Optional<ModSeq> modseq = Optional.empty();
        private ImmutableList.Builder<MessageAttachmentMetadata> attachments = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentDispositionField'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
    }

    private boolean isInline(Optional<ContentDispositionField> contentDispositionField) {
        return contentDispositionField.map(ContentDispositionField::isInline)
            .orElse(false);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentTypeField'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
    }

    private Optional<String> name(Optional<ContentTypeField> contentTypeField, Optional<ContentDispositionField> contentDispositionField) {
        return contentTypeField
            .flatMap(field -> Optional.ofNullable(field.getParameter("name")))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentDispositionField'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
    }

    private Optional<String> name(Optional<ContentTypeField> contentTypeField, Optional<ContentDispositionField> contentDispositionField) {
        return contentTypeField
            .flatMap(field -> Optional.ofNullable(field.getParameter("name")))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentIdField'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
    }

    private Optional<Cid> cid(Optional<ContentIdField> contentIdField) {
        return contentIdField.map(ContentIdField::getId)
            .flatMap(cidParser::parse);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxStorage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/quota/FixedMaxQuotaManager.java`
#### Snippet
```java
public class FixedMaxQuotaManager implements MaxQuotaManager {

    private Optional<QuotaSizeLimit> maxStorage = Optional.empty();
    private Optional<QuotaCountLimit> maxMessage = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxMessage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/quota/FixedMaxQuotaManager.java`
#### Snippet
```java

    private Optional<QuotaSizeLimit> maxStorage = Optional.empty();
    private Optional<QuotaCountLimit> maxMessage = Optional.empty();

    @Override
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearchIndex.java`
#### Snippet
```java
        private final MessageUid messageUid;

        public SearchResult(Optional<MessageId> messageId, MailboxId mailboxId, MessageUid messageUid) {
            this.messageId = messageId;
            this.mailboxId = mailboxId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageId'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearchIndex.java`
#### Snippet
```java

    class SearchResult {
        private final Optional<MessageId> messageId;
        private final MailboxId mailboxId;
        private final MessageUid messageUid;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageManager.java`
#### Snippet
```java

    private Mono<AppendResult> appendMessage(Content msgIn, Date internalDate, final MailboxSession mailboxSession, boolean isRecent, Flags flagsToBeSet,
                                             Optional<Message> maybeMessage, boolean isDelivery) {
        return Mono.fromCallable(() -> {
            if (!isWriteable(mailboxSession)) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageManager.java`
#### Snippet
```java

    private Mono<AppendResult> createAndDispatchMessage(Date internalDate, MailboxSession mailboxSession, Content content, PropertyBuilder propertyBuilder,
                                                        Flags flags, int bodyStartOctet, Optional<Message> maybeMessage, HeaderImpl headers,
                                                        boolean isDelivery) throws MailboxException {
        int size = (int) content.size();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'classDocs'
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/MailetMatcherDescriptor.java`
#### Snippet
```java
            }

            RequiresExperimental classDocs(Optional<String> classDocs);
        }

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'info'
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/MailetMatcherDescriptor.java`
#### Snippet
```java
    private final boolean experimental;

    private MailetMatcherDescriptor(String name, String fullyQualifiedClassName, Type type, Optional<String> info, Optional<String> classDocs, boolean experimental) {
        this.name = name;
        this.fullyQualifiedClassName = fullyQualifiedClassName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'classDocs'
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/MailetMatcherDescriptor.java`
#### Snippet
```java
    private final boolean experimental;

    private MailetMatcherDescriptor(String name, String fullyQualifiedClassName, Type type, Optional<String> info, Optional<String> classDocs, boolean experimental) {
        this.name = name;
        this.fullyQualifiedClassName = fullyQualifiedClassName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'classDocs'
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/MailetMatcherDescriptor.java`
#### Snippet
```java
    private final Type type;
    private final Optional<String> info;
    private final Optional<String> classDocs;
    private final boolean experimental;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'info'
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/MailetMatcherDescriptor.java`
#### Snippet
```java
            }

            RequiresClassDocs info(Optional<String> info);
        }

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'info'
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/MailetMatcherDescriptor.java`
#### Snippet
```java
    private final String fullyQualifiedClassName;
    private final Type type;
    private final Optional<String> info;
    private final Optional<String> classDocs;
    private final boolean experimental;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'current'
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java

        private static final Spliterator<?> NOT_ABLE_TO_SPLIT_SPLITERATOR = null;
        private Optional<T> current;
        private final Function<T, Optional<T>> generator;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'array'
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java
    }

    public static <T> Stream<T> ofOptional(Optional<T[]> array) {
        return array
            .map(Arrays::stream)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `server/container/util/src/main/java/org/apache/james/util/MDCBuilder.java`
#### Snippet
```java
    }

    public MDCBuilder addToContextIfPresent(String key, Optional<String> value) {
        Preconditions.checkNotNull(key);
        value.ifPresent(nonNullValue -> contextMap.put(key, nonNullValue));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'requestValue'
in `server/container/util/src/main/java/org/apache/james/util/OptionalUtils.java`
#### Snippet
```java
    }

    public static <T> boolean containsDifferent(Optional<T> requestValue, T storeValue) {
        return requestValue
            .filter(Predicate.not(Predicate.isEqual(storeValue)))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optional1'
in `server/container/util/src/main/java/org/apache/james/util/OptionalUtils.java`
#### Snippet
```java
    }

    public static <T, U> boolean matches(Optional<T> optional1, Optional<U> optional2, BiPredicate<T, U> biPredicate) {
        return optional1.map(value1 ->
            optional2
```

### OptionalUsedAsFieldOrParameterType
`Optional`++used as type for parameter 'optional2'++
in `server/container/util/src/main/java/org/apache/james/util/OptionalUtils.java`
#### Snippet
```java
    }

    public static <T, U> boolean matches(Optional<T> optional1, Optional<U> optional2, BiPredicate<T, U> biPredicate) {
        return optional1.map(value1 ->
            optional2
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optional'
in `server/container/util/src/main/java/org/apache/james/util/OptionalUtils.java`
#### Snippet
```java
    }

    public static <T> Optional<T> executeIfEmpty(Optional<T> optional, Operation operation) {
        if (!optional.isPresent()) {
            operation.perform();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'thisDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearches.java`
#### Snippet
```java
    }

    private boolean before(Optional<Date> thisDate, Date thatDate, DateResolution dateResolution) {
        return thisDate.map(date -> before(date, thatDate, dateResolution))
            .orElse(false);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'thisDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearches.java`
#### Snippet
```java
    }

    private boolean after(Optional<Date> thisDate, Date thatDate, DateResolution dateResolution) {
        return thisDate.map(date -> after(date, thatDate, dateResolution))
            .orElse(false);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'thisDate'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearches.java`
#### Snippet
```java
    }

    private boolean on(Optional<Date> thisDate, Date thatDate, DateResolution dateResolution) {
        return thisDate.map(date -> on(date, thatDate, dateResolution))
            .orElse(false);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'unit'
in `server/container/util/src/main/java/org/apache/james/util/UnitParser.java`
#### Snippet
```java
        private final Optional<String> unit;

        ParsingResult(long number, Optional<String> unit) {
            this.number = number;
            this.unit = unit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'unit'
in `server/container/util/src/main/java/org/apache/james/util/UnitParser.java`
#### Snippet
```java
    static class ParsingResult {
        private final long number;
        private final Optional<String> unit;

        ParsingResult(long number, Optional<String> unit) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'replacement'
in `server/container/util/src/main/java/org/apache/james/util/ValuePatch.java`
#### Snippet
```java
    }

    public Optional<T> notKeptOrElse(Optional<T> replacement) {
        if (isKept()) {
            return replacement;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `server/container/util/src/main/java/org/apache/james/util/ValuePatch.java`
#### Snippet
```java
    }

    public static <T> ValuePatch<T> ofOptional(Optional<T> value) {
        Preconditions.checkNotNull(value);
        return value.map(ValuePatch::modifyTo)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'currentItemByteStream'
in `server/container/util/src/main/java/org/apache/james/util/ReactorUtils.java`
#### Snippet
```java
        private final Iterator<ByteBuffer> source;
        private final Stream<ByteBuffer> sourceAsStream;
        private Optional<ByteBuffer> currentItemByteStream;

        StreamInputStream(Stream<ByteBuffer> source) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'offset'
in `server/container/util/src/main/java/org/apache/james/util/streams/Offset.java`
#### Snippet
```java
    private static final Offset NONE = new Offset(0);

    public static Offset from(Optional<Integer> offset) {
        return offset.map(Offset::from)
            .orElse(NONE);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/container/util/src/main/java/org/apache/james/util/streams/Limit.java`
#### Snippet
```java
    }

    public static Limit from(Optional<Integer> limit) {
        return limit.map(Limit::from)
            .orElse(UNLIMITED);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `server/container/util/src/main/java/org/apache/james/util/streams/Limit.java`
#### Snippet
```java
    }

    private final Optional<Integer> limit;

    private Limit(Optional<Integer> limit) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/container/util/src/main/java/org/apache/james/util/streams/Limit.java`
#### Snippet
```java
    private final Optional<Integer> limit;

    private Limit(Optional<Integer> limit) {
        this.limit = limit;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
        }

        public static MessageContent ofTextOnly(Optional<String> textBody) {
            return new MessageContent(textBody, Optional.empty());
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
        private final Optional<String> htmlBody;

        public MessageContent(Optional<String> textBody, Optional<String> htmlBody) {
            this.textBody = textBody;
            this.htmlBody = htmlBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
        private final Optional<String> htmlBody;

        public MessageContent(Optional<String> textBody, Optional<String> htmlBody) {
            this.textBody = textBody;
            this.htmlBody = htmlBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
        }

        public static MessageContent ofHtmlOnly(Optional<String> htmlBody) {
            return new MessageContent(Optional.empty(), htmlBody);
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java

    public static final class MessageContent {
        private final Optional<String> textBody;
        private final Optional<String> htmlBody;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
    public static final class MessageContent {
        private final Optional<String> textBody;
        private final Optional<String> htmlBody;

        public MessageContent(Optional<String> textBody, Optional<String> htmlBody) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/AddUser.java`
#### Snippet
```java
public class AddUser {
    
    private Optional<Port> port = Optional.empty();
    private Username user;
    private String passwd;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'operationCount'
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java
        private final int threadCount;
        private final ConcurrentOperation operation;
        private Optional<Integer> operationCount;
        private Optional<Boolean> noErrorLogs;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'noErrorLogs'
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java
        private final ConcurrentOperation operation;
        private Optional<Integer> operationCount;
        private Optional<Boolean> noErrorLogs;

        private Builder(int threadCount, ConcurrentOperation operation) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'storageStrategy'
in `server/container/guice/blob/deduplication-gc/src/main/java/org/apache/james/modules/blobstore/validation/StorageStrategyAggregate.java`
#### Snippet
```java
        }

        private final Optional<StorageStrategy> storageStrategy;

        State(Optional<StorageStrategy> storageStrategy) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'storageStrategy'
in `server/container/guice/blob/deduplication-gc/src/main/java/org/apache/james/modules/blobstore/validation/StorageStrategyAggregate.java`
#### Snippet
```java
        private final Optional<StorageStrategy> storageStrategy;

        State(Optional<StorageStrategy> storageStrategy) {
            this.storageStrategy = storageStrategy;
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'loggedInUser'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxSession.java`
#### Snippet
```java
    private final SessionId sessionId;
    private final Username userName;
    private final Optional<Username> loggedInUser;
    private final List<Locale> localePreferences;
    private final Map<Object, Object> attributes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'loggedInUser'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxSession.java`
#### Snippet
```java
    private final SessionType type;

    public MailboxSession(SessionId sessionId, Username userName, Optional<Username> loggedInUser,
                                List<Locale> localePreferences, char pathSeparator, SessionType type) {
        this(sessionId, userName, loggedInUser, localePreferences, new ArrayList<>(), null, pathSeparator, type);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'loggedInUser'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxSession.java`
#### Snippet
```java
    }

    public MailboxSession(SessionId sessionId, Username userName, Optional<Username> loggedInUser,
                          List<Locale> localePreferences, List<String> sharedSpaces, String otherUsersSpace, char pathSeparator, SessionType type) {
        this.sessionId = sessionId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageId'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UpdatedFlags.java`
#### Snippet
```java
        }

        public Builder messageId(Optional<MessageId> messageId) {
            this.messageId = messageId;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'modSeq'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UpdatedFlags.java`
#### Snippet
```java
        private Flags oldFlags;
        private Flags newFlags;
        private Optional<ModSeq> modSeq = Optional.empty();

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageId'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UpdatedFlags.java`
#### Snippet
```java
    public static class Builder {
        private MessageUid uid;
        private Optional<MessageId> messageId = Optional.empty();
        private Flags oldFlags;
        private Flags newFlags;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageId'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UpdatedFlags.java`
#### Snippet
```java
    private final ModSeq modSeq;

    private UpdatedFlags(MessageUid uid, Optional<MessageId> messageId, ModSeq modSeq, Flags oldFlags, Flags newFlags) {
       this.uid = uid;
       this.messageId = messageId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageId'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UpdatedFlags.java`
#### Snippet
```java
     * The usage of Optional here is for backward compatibility (to be able to still dequeue older events)
     */
    private final Optional<MessageId> messageId;
    private final Flags oldFlags;
    private final Flags newFlags;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MultimailboxesSearchQuery.java`
#### Snippet
```java
        private ImmutableSet.Builder<MailboxId> mailboxIds;
        private ImmutableSet.Builder<MailboxId> notInMailboxIds;
        private Optional<Namespace> namespace;

        private Builder(SearchQuery searchQuery) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/QuotaRoot.java`
#### Snippet
```java
    private final Optional<Domain> domain;

    private QuotaRoot(String value, Optional<Domain> domain) {
        this.value = value;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/QuotaRoot.java`
#### Snippet
```java

    private final String value;
    private final Optional<Domain> domain;

    private QuotaRoot(String value, Optional<Domain> domain) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/QuotaRoot.java`
#### Snippet
```java
public class QuotaRoot {

    public static QuotaRoot quotaRoot(String value, Optional<Domain> domain) {
        return new QuotaRoot(value, domain);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional`++used as type for parameter 'input'++
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/SerializableQuotaLimitValue.java`
#### Snippet
```java
public class SerializableQuotaLimitValue<T extends QuotaLimitValue<T>> implements Serializable {

    public static <U extends QuotaLimitValue<U>> SerializableQuotaLimitValue<U> valueOf(Optional<U> input) {
        return new SerializableQuotaLimitValue<>(input.orElse(null));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maybeParsedMessage'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
            private Optional<Boolean> isDelivery;
            private Optional<Flags> flags;
            private Optional<Message> maybeParsedMessage;

            private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'messageAttachments'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
        private final ComposedMessageId id;
        private final Long size;
        private final Optional<List<MessageAttachmentMetadata>> messageAttachments;
        private final ThreadId threadId;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isDelivery'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
            private Optional<Date> internalDate;
            private Optional<Boolean> isRecent;
            private Optional<Boolean> isDelivery;
            private Optional<Flags> flags;
            private Optional<Message> maybeParsedMessage;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'internalDate'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java

        public static class Builder {
            private Optional<Date> internalDate;
            private Optional<Boolean> isRecent;
            private Optional<Boolean> isDelivery;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'flags'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
            private Optional<Boolean> isRecent;
            private Optional<Boolean> isDelivery;
            private Optional<Flags> flags;
            private Optional<Message> maybeParsedMessage;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageAttachments'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
        private final ThreadId threadId;

        public AppendResult(ComposedMessageId id, Long size, Optional<List<MessageAttachmentMetadata>> messageAttachments, ThreadId threadId) {
            this.id = id;
            this.size = size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeParsedMessage'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
        private final Optional<Message> maybeParsedMessage;

        private AppendCommand(Content msgIn, Date internalDate, boolean isRecent, boolean isDelivery, Flags flags, Optional<Message> maybeParsedMessage) {
            this.msgIn = msgIn;
            this.internalDate = internalDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maybeParsedMessage'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
        private final boolean isDelivery;
        private final Flags flags;
        private final Optional<Message> maybeParsedMessage;

        private AppendCommand(Content msgIn, Date internalDate, boolean isRecent, boolean isDelivery, Flags flags, Optional<Message> maybeParsedMessage) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'date'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
            }

            public Builder withInternalDate(Optional<Date> date) {
                this.internalDate = date;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isRecent'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
        public static class Builder {
            private Optional<Date> internalDate;
            private Optional<Boolean> isRecent;
            private Optional<Boolean> isDelivery;
            private Optional<Flags> flags;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'transformation'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Cid.java`
#### Snippet
```java
    public static class CidParser {
        private Optional<CidValidator> validator;
        private Optional<CidTransformation> transformation;

        private CidParser() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'validator'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Cid.java`
#### Snippet
```java

    public static class CidParser {
        private Optional<CidValidator> validator;
        private Optional<CidTransformation> transformation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mimeType'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ContentType.java`
#### Snippet
```java

    private final String value;
    private final Optional<MimeType> mimeType;
    private final Optional<Charset> charset;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ContentType.java`
#### Snippet
```java
    }

    public static ContentType of(MimeType mimeType, Optional<Charset> charset) {
        return new ContentType(
            charset.map(value -> mimeType.asString() + "; charset=" + value.name())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'charset'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ContentType.java`
#### Snippet
```java
    private final String value;
    private final Optional<MimeType> mimeType;
    private final Optional<Charset> charset;

    private ContentType(String value, Optional<MimeType> mimeType, Optional<Charset> charset) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeType'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ContentType.java`
#### Snippet
```java
    private final Optional<Charset> charset;

    private ContentType(String value, Optional<MimeType> mimeType, Optional<Charset> charset) {
        this.value = value;
        this.mimeType = mimeType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ContentType.java`
#### Snippet
```java
    private final Optional<Charset> charset;

    private ContentType(String value, Optional<MimeType> mimeType, Optional<Charset> charset) {
        this.value = value;
        this.mimeType = mimeType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
        }

        public Builder name(Optional<String> name) {
            this.name = name;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
    private final boolean isInline;

    public MessageAttachmentMetadata(AttachmentMetadata attachment, Optional<String> name, Optional<Cid> cid, boolean isInline) {
        this.attachment = attachment;
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
    private final boolean isInline;

    public MessageAttachmentMetadata(AttachmentMetadata attachment, Optional<String> name, Optional<Cid> cid, boolean isInline) {
        this.attachment = attachment;
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java

    private final AttachmentMetadata attachment;
    private final Optional<String> name;
    private final Optional<Cid> cid;
    private final boolean isInline;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isInline'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
        private Optional<String> name;
        private Optional<Cid> cid;
        private Optional<Boolean> isInline = Optional.empty();

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
    private final AttachmentMetadata attachment;
    private final Optional<String> name;
    private final Optional<Cid> cid;
    private final boolean isInline;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
        }

        public Builder cid(Optional<Cid> cid) {
            Preconditions.checkNotNull(cid);
            this.cid = cid;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java
        private AttachmentMetadata attachment;
        private Optional<String> name;
        private Optional<Cid> cid;
        private Optional<Boolean> isInline = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageAttachmentMetadata.java`
#### Snippet
```java

        private AttachmentMetadata attachment;
        private Optional<String> name;
        private Optional<Cid> cid;
        private Optional<Boolean> isInline = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ParsedAttachment.java`
#### Snippet
```java
        @FunctionalInterface
        interface RequireName {
            RequireCid name(Optional<String> name);

            default RequireCid name(String name) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ParsedAttachment.java`
#### Snippet
```java
    private final boolean isInline;

    private ParsedAttachment(ContentType contentType, ByteSource content, Optional<String> name, Optional<Cid> cid, boolean isInline) {
        this.contentType = contentType;
        this.content = content;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ParsedAttachment.java`
#### Snippet
```java
    private final boolean isInline;

    private ParsedAttachment(ContentType contentType, ByteSource content, Optional<String> name, Optional<Cid> cid, boolean isInline) {
        this.contentType = contentType;
        this.content = content;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ParsedAttachment.java`
#### Snippet
```java
        @FunctionalInterface
        interface RequireCid {
            RequireIsInline cid(Optional<Cid> cid);

            default RequireIsInline cid(Cid cid) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ParsedAttachment.java`
#### Snippet
```java
    private final ByteSource content;
    private final Optional<String> name;
    private final Optional<Cid> cid;
    private final boolean isInline;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ParsedAttachment.java`
#### Snippet
```java
    private final ContentType contentType;
    private final ByteSource content;
    private final Optional<String> name;
    private final Optional<Cid> cid;
    private final boolean isInline;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageMetaData.java`
#### Snippet
```java
    private final ThreadId threadId;

    public MessageMetaData(MessageUid uid, ModSeq modSeq, Flags flags, long size, Date internalDate, Optional<Date> saveDate, MessageId messageId, ThreadId threadId) {
        this.uid = uid;
        this.flags = flags;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MessageMetaData.java`
#### Snippet
```java
    private final long size;
    private final Date internalDate;
    private final Optional<Date> saveDate;
    private final ModSeq modSeq;
    private final MessageId messageId;
```

### OptionalUsedAsFieldOrParameterType
`Optional`++used as type for parameter 'input'++
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/SerializableQuotaUsageValue.java`
#### Snippet
```java
public class SerializableQuotaUsageValue<T extends QuotaLimitValue<T>, U extends QuotaUsageValue<U, T>> implements Serializable {

    public static <T extends QuotaLimitValue<T>, U extends QuotaUsageValue<U, T>> SerializableQuotaUsageValue<T, U> valueOf(Optional<U> input) {
        return new SerializableQuotaUsageValue<>(input.orElse(null));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxAnnotation.java`
#### Snippet
```java

    private final MailboxAnnotationKey key;
    private final Optional<String> value;

    private MailboxAnnotation(MailboxAnnotationKey key, Optional<String> value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxAnnotation.java`
#### Snippet
```java
    private final Optional<String> value;

    private MailboxAnnotation(MailboxAnnotationKey key, Optional<String> value) {
        Preconditions.checkNotNull(key);
        Preconditions.checkNotNull(value);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'user'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

    protected final Optional<String> namespace;
    protected final Optional<Username> user;
    private final MailboxNameExpression mailboxNameExpression;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailboxNameExpression'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
        Optional<Username> username;
        Optional<String> namespace;
        Optional<MailboxNameExpression> mailboxNameExpression;
        
        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'username'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
        private static final Wildcard DEFAULT_WILDCARD = Wildcard.INSTANCE;

        Optional<Username> username;
        Optional<String> namespace;
        Optional<MailboxNameExpression> mailboxNameExpression;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
    }

    protected final Optional<String> namespace;
    protected final Optional<Username> user;
    private final MailboxNameExpression mailboxNameExpression;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

        Optional<Username> username;
        Optional<String> namespace;
        Optional<MailboxNameExpression> mailboxNameExpression;
        
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'namespace'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
     * Constructs an expression determining a set of mailbox names.
     */
    private MailboxQuery(Optional<String> namespace, Optional<Username> user, MailboxNameExpression mailboxNameExpression) {
        this.namespace = namespace;
        this.user = user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'user'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
     * Constructs an expression determining a set of mailbox names.
     */
    private MailboxQuery(Optional<String> namespace, Optional<Username> user, MailboxNameExpression mailboxNameExpression) {
        this.namespace = namespace;
        this.user = user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'eventId'
in `mailbox/api/src/main/java/org/apache/james/mailbox/events/MessageMoveEvent.java`
#### Snippet
```java
        private Username username;
        private MessageMoves messageMoves;
        private Optional<EventId> eventId;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messagesPerSecond'
in `mailbox/api/src/main/java/org/apache/james/mailbox/indexer/ReIndexer.java`
#### Snippet
```java
    class RunningOptions {
        public static class Builder {
            private Optional<Integer> messagesPerSecond;
            private Optional<Mode> mode;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mode'
in `mailbox/api/src/main/java/org/apache/james/mailbox/indexer/ReIndexer.java`
#### Snippet
```java
        public static class Builder {
            private Optional<Integer> messagesPerSecond;
            private Optional<Mode> mode;

            public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messagesPerSecond'
in `mailbox/api/src/main/java/org/apache/james/mailbox/indexer/ReIndexer.java`
#### Snippet
```java
            }

            public Builder messagesPerSeconds(Optional<Integer> messagesPerSecond) {
                this.messagesPerSecond = messagesPerSecond;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mode'
in `mailbox/api/src/main/java/org/apache/james/mailbox/indexer/ReIndexer.java`
#### Snippet
```java
            }

            public Builder mode(Optional<Mode> mode) {
                this.mode = mode;
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delegateUser'
in `mailbox/api/src/main/java/org/apache/james/mailbox/exception/ForbiddenDelegationException.java`
#### Snippet
```java

    private final Username givenUser;
    private final Optional<Username> delegateUser;

    public ForbiddenDelegationException(Username givenUser) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textualContent'
in `mailbox/api/src/main/java/org/apache/james/mailbox/extractor/ParsedContent.java`
#### Snippet
```java
    }

    public static ParsedContent of(Optional<String> textualContent) {
        return new ParsedContent(textualContent, ImmutableMap.of());
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textualContent'
in `mailbox/api/src/main/java/org/apache/james/mailbox/extractor/ParsedContent.java`
#### Snippet
```java
    private final Map<String, List<String>> metadata;

    private ParsedContent(Optional<String> textualContent, Map<String, List<String>> metadata) {
        this.textualContent = textualContent;
        this.metadata = metadata;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textualContent'
in `mailbox/api/src/main/java/org/apache/james/mailbox/extractor/ParsedContent.java`
#### Snippet
```java
    }

    public static ParsedContent of(Optional<String> textualContent, Map<String, List<String>> metadata) {
        return new ParsedContent(textualContent, metadata);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textualContent'
in `mailbox/api/src/main/java/org/apache/james/mailbox/extractor/ParsedContent.java`
#### Snippet
```java
    }

    private final Optional<String> textualContent;
    private final Map<String, List<String>> metadata;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'sorts'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/SearchQuery.java`
#### Snippet
```java
        private final ImmutableList.Builder<Criterion> criterias;
        private final ImmutableSet.Builder<MessageUid> recentMessageUids;
        private Optional<ImmutableList<Sort>> sorts;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailetContext'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailetConfig.java`
#### Snippet
```java
        private static final String DEFAULT_MAILET_NAME = "A Mailet";
        private Optional<String> mailetName;
        private Optional<MailetContext> mailetContext;
        private Properties properties;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailetName'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailetConfig.java`
#### Snippet
```java

        private static final String DEFAULT_MAILET_NAME = "A Mailet";
        private Optional<String> mailetName;
        private Optional<MailetContext> mailetContext;
        private Properties properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailetContext'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMatcherConfig.java`
#### Snippet
```java

        private String matcherName;
        private Optional<MailetContext> mailetContext;
        private Optional<String> condition;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'condition'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMatcherConfig.java`
#### Snippet
```java
    private final Optional<String> condition;

    private FakeMatcherConfig(String matcherName, MailetContext mailetContext, Optional<String> condition) {
        this.matcherName = matcherName;
        this.mailetContext = mailetContext;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'condition'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMatcherConfig.java`
#### Snippet
```java
    private final String matcherName;
    private final MailetContext mailetContext;
    private final Optional<String> condition;

    private FakeMatcherConfig(String matcherName, MailetContext mailetContext, Optional<String> condition) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'condition'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMatcherConfig.java`
#### Snippet
```java
        private String matcherName;
        private Optional<MailetContext> mailetContext;
        private Optional<String> condition;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxMessage'
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryPerUserMaxQuotaManager.java`
#### Snippet
```java
public class InMemoryPerUserMaxQuotaManager implements MaxQuotaManager {

    private Optional<QuotaCountLimit> maxMessage = Optional.empty();
    private Optional<QuotaSizeLimit> maxStorage = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxStorage'
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryPerUserMaxQuotaManager.java`
#### Snippet
```java

    private Optional<QuotaCountLimit> maxMessage = Optional.empty();
    private Optional<QuotaSizeLimit> maxStorage = Optional.empty();

    private final Map<Domain, QuotaCountLimit> domainMaxMessage = new ConcurrentHashMap<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessageId'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/CassandraThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private Set<MimeMessageId> buildMimeMessageIdSet(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references) {
        Set<MimeMessageId> mimeMessageIds = new HashSet<>();
        mimeMessageId.ifPresent(mimeMessageIds::add);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyTo'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/CassandraThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private Set<MimeMessageId> buildMimeMessageIdSet(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references) {
        Set<MimeMessageId> mimeMessageIds = new HashSet<>();
        mimeMessageId.ifPresent(mimeMessageIds::add);
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'references'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/CassandraThreadIdGuessingAlgorithm.java`
#### Snippet
```java
    }

    private Set<MimeMessageId> buildMimeMessageIdSet(Optional<MimeMessageId> mimeMessageId, Optional<MimeMessageId> inReplyTo, Optional<List<MimeMessageId>> references) {
        Set<MimeMessageId> mimeMessageIds = new HashSet<>();
        mimeMessageId.ifPresent(mimeMessageIds::add);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'baseSubject'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraThreadDAO.java`
#### Snippet
```java
    }

    public Flux<Void> insertSome(Username username, Set<MimeMessageId> mimeMessageIds, MessageId messageId, ThreadId threadId, Optional<Subject> baseSubject) {
        return Flux.fromIterable(mimeMessageIds)
            .flatMap(mimeMessageId -> executor.executeVoid(insertOne.bind()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java
    private final AttachmentId attachmentId;
    private final Optional<String> name;
    private final Optional<Cid> cid;
    private final boolean isInline;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java

        private AttachmentId attachmentId;
        private Optional<String> name;
        private Optional<Cid> cid;
        private Optional<Boolean> isInline;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isInline'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java
        private Optional<String> name;
        private Optional<Cid> cid;
        private Optional<Boolean> isInline;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java
        }

        public Builder cid(Optional<Cid> cid) {
            Preconditions.checkNotNull(cid);
            this.cid = cid;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java

    private final AttachmentId attachmentId;
    private final Optional<String> name;
    private final Optional<Cid> cid;
    private final boolean isInline;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java
        private AttachmentId attachmentId;
        private Optional<String> name;
        private Optional<Cid> cid;
        private Optional<Boolean> isInline;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java

    @VisibleForTesting
    MessageAttachmentRepresentation(AttachmentId attachmentId, Optional<String> name, Optional<Cid> cid, boolean isInline) {
        this.attachmentId = attachmentId;
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageAttachmentRepresentation.java`
#### Snippet
```java

    @VisibleForTesting
    MessageAttachmentRepresentation(AttachmentId attachmentId, Optional<String> name, Optional<Cid> cid, boolean isInline) {
        this.attachmentId = attachmentId;
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ALL_MAILBOXES'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/DeleteMessageListener.java`
#### Snippet
```java
 */
public class DeleteMessageListener implements EventListener.ReactiveGroupEventListener {
    private static final Optional<CassandraId> ALL_MAILBOXES = Optional.empty();

    public static class DeleteMessageListenerGroup extends Group {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'logger'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
    private final MailAddress postmaster;

    private FakeMailContext(Optional<Logger> logger, MailAddress postmaster) {
        attributes = new HashMap<>();
        sentMails = new ConcurrentLinkedQueue<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bouncer'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        private final Optional<MailAddress> bouncer;

        public BouncedMail(SentMail sentMail, String message, Optional<MailAddress> bouncer) {
            this.sentMail = sentMail;
            this.message = message;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delay'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        private final Map<AttributeName, Attribute> attributes;
        private final String state;
        private final Optional<Delay> delay;

        private SentMail(MailAddress sender, Collection<MailAddress> recipients, MimeMessage msg, Map<AttributeName, Attribute> attributes, String state, Optional<Delay> delay) throws MessagingException {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'delay'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        private final Optional<Delay> delay;

        private SentMail(MailAddress sender, Collection<MailAddress> recipients, MimeMessage msg, Map<AttributeName, Attribute> attributes, String state, Optional<Delay> delay) throws MessagingException {
            this.sender = sender;
            this.recipients = ImmutableList.copyOf(recipients);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromMailet'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
            private Map<AttributeName, Attribute> attributes = new HashMap<>();
            private Optional<String> state = Optional.empty();
            private Optional<Boolean> fromMailet = Optional.empty();
            private Optional<Delay> delay = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        private final Collection<MailAddress> recipients;
        private final MimeMessage msg;
        private final Optional<String> subject;
        private final Map<AttributeName, Attribute> attributes;
        private final String state;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bouncer'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        }

        public BouncedMail(SentMail.Builder sentMail, String message, Optional<MailAddress> bouncer) throws MessagingException {
            this(sentMail.build(), message, bouncer);
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'recipients'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        public static class Builder {
            private MailAddress sender;
            private Optional<Collection<MailAddress>> recipients = Optional.empty();
            private MimeMessage msg;
            private Map<AttributeName, Attribute> attributes = new HashMap<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'logger'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
    private final Collection<SentMail> sentMails;
    private final Collection<BouncedMail> bouncedMails;
    private final Optional<Logger> logger;
    private final MailAddress postmaster;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'state'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
            private MimeMessage msg;
            private Map<AttributeName, Attribute> attributes = new HashMap<>();
            private Optional<String> state = Optional.empty();
            private Optional<Boolean> fromMailet = Optional.empty();
            private Optional<Delay> delay = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
            }

            public Builder sender(Optional<MailAddress> sender) {
                sender.ifPresent(this::sender);
                return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delay'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
            private Optional<String> state = Optional.empty();
            private Optional<Boolean> fromMailet = Optional.empty();
            private Optional<Delay> delay = Optional.empty();

            public Builder sender(MailAddress sender) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'postmaster'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java

        private Logger logger;
        private Optional<MailAddress> postmaster;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bouncer'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
        private final SentMail sentMail;
        private final String message;
        private final Optional<MailAddress> bouncer;

        public BouncedMail(SentMail sentMail, String message, Optional<MailAddress> bouncer) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/MessageRepresentation.java`
#### Snippet
```java
    }

    public SimpleMailboxMessage toMailboxMessage(ComposedMessageIdWithMetaData metadata, List<MessageAttachmentMetadata> attachments, Optional<Date> saveDate) {
        return SimpleMailboxMessage.builder()
            .messageId(messageId)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/AttachmentLoader.java`
#### Snippet
```java

    public Mono<CassandraMailboxMessage> addAttachmentToMessage(Pair<ComposedMessageIdWithMetaData, MessageRepresentation> messageRepresentation,
                                                                Optional<Date> saveDate,
                                                                MessageMapper.FetchType fetchType) {
        return loadAttachments(messageRepresentation.getRight().getAttachments().stream(), fetchType)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'state'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
        private Optional<String> state;
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
        private Optional<String> state;
        private Optional<String> errorMessage;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'remoteHost'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<Long> size;
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
        private PerRecipientHeaders perRecipientHeaders;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'errorMessage'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<MailAddress> sender;
        private Optional<String> state;
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lastUpdated'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        }

        public Builder lastUpdated(Optional<Date> lastUpdated) {
            this.lastUpdated = lastUpdated;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'remoteAddr'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Map<AttributeName, Attribute> attributes;
        private Optional<Long> size;
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
        private PerRecipientHeaders perRecipientHeaders;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'state'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        }

        public Builder state(Optional<String> state) {
            this.state = state;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'errorMessage'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        }

        public Builder errorMessage(Optional<String> errorMessage) {
            this.errorMessage = errorMessage;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileName'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java

        private final String name;
        private Optional<String> fileName;
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mimeMessage'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private final String name;
        private Optional<String> fileName;
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
        private Optional<Long> size;
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastUpdated'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<String> state;
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
        private Optional<Long> size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'executionProfile'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraUidProvider.java`
#### Snippet
```java
    }

    private Mono<MessageUid> findHighestUid(CassandraId mailboxId, Optional<DriverExecutionProfile> executionProfile) {
        BoundStatement statement = selectStatement.bind()
            .set(MAILBOX_ID, mailboxId.asUuid(), TypeCodecs.TIMEUUID);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyStartOctet'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<Date> internalDate;
    private final Optional<Date> saveDate;
    private final Optional<Long> bodyStartOctet;
    private final Optional<Long> size;
    private final Optional<BlobId> headerContent;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'headerContent'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<Long> bodyStartOctet;
    private final Optional<Long> size;
    private final Optional<BlobId> headerContent;

    public CassandraMessageMetadata(ComposedMessageIdWithMetaData composedMessageId, Optional<Date> internalDate, Optional<Date> saveDate, Optional<Long> bodyStartOctet, Optional<Long> size, Optional<BlobId> headerContent) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        private Optional<Date> saveDate;
        private Optional<Long> bodyStartOctet;
        private Optional<Long> size;
        private Optional<BlobId> headerContent;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'internalDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java

    private final ComposedMessageIdWithMetaData composedMessageId;
    private final Optional<Date> internalDate;
    private final Optional<Date> saveDate;
    private final Optional<Long> bodyStartOctet;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'internalDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<BlobId> headerContent;

    public CassandraMessageMetadata(ComposedMessageIdWithMetaData composedMessageId, Optional<Date> internalDate, Optional<Date> saveDate, Optional<Long> bodyStartOctet, Optional<Long> size, Optional<BlobId> headerContent) {
        this.composedMessageId = composedMessageId;
        this.internalDate = internalDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<BlobId> headerContent;

    public CassandraMessageMetadata(ComposedMessageIdWithMetaData composedMessageId, Optional<Date> internalDate, Optional<Date> saveDate, Optional<Long> bodyStartOctet, Optional<Long> size, Optional<BlobId> headerContent) {
        this.composedMessageId = composedMessageId;
        this.internalDate = internalDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyStartOctet'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<BlobId> headerContent;

    public CassandraMessageMetadata(ComposedMessageIdWithMetaData composedMessageId, Optional<Date> internalDate, Optional<Date> saveDate, Optional<Long> bodyStartOctet, Optional<Long> size, Optional<BlobId> headerContent) {
        this.composedMessageId = composedMessageId;
        this.internalDate = internalDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<BlobId> headerContent;

    public CassandraMessageMetadata(ComposedMessageIdWithMetaData composedMessageId, Optional<Date> internalDate, Optional<Date> saveDate, Optional<Long> bodyStartOctet, Optional<Long> size, Optional<BlobId> headerContent) {
        this.composedMessageId = composedMessageId;
        this.internalDate = internalDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'headerContent'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<BlobId> headerContent;

    public CassandraMessageMetadata(ComposedMessageIdWithMetaData composedMessageId, Optional<Date> internalDate, Optional<Date> saveDate, Optional<Long> bodyStartOctet, Optional<Long> size, Optional<BlobId> headerContent) {
        this.composedMessageId = composedMessageId;
        this.internalDate = internalDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'date'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        }

        public Builder saveDate(Optional<Date> date) {
            this.saveDate = date;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final ComposedMessageIdWithMetaData composedMessageId;
    private final Optional<Date> internalDate;
    private final Optional<Date> saveDate;
    private final Optional<Long> bodyStartOctet;
    private final Optional<Long> size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyStartOctet'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        private Optional<Date> internalDate;
        private Optional<Date> saveDate;
        private Optional<Long> bodyStartOctet;
        private Optional<Long> size;
        private Optional<BlobId> headerContent;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        private ComposedMessageIdWithMetaData composedMessageId;
        private Optional<Date> internalDate;
        private Optional<Date> saveDate;
        private Optional<Long> bodyStartOctet;
        private Optional<Long> size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        }

        public Builder size(Optional<Long> size) {
            this.size = size;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'headerContent'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        private Optional<Long> bodyStartOctet;
        private Optional<Long> size;
        private Optional<BlobId> headerContent;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyStartOctet'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        }

        public Builder bodyStartOctet(Optional<Long> bodyStartOctet) {
            this.bodyStartOctet = bodyStartOctet;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'date'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        }

        public Builder internalDate(Optional<Date> date) {
            this.internalDate = date;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    private final Optional<Date> saveDate;
    private final Optional<Long> bodyStartOctet;
    private final Optional<Long> size;
    private final Optional<BlobId> headerContent;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'headerContent'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
        }

        public Builder headerContent(Optional<BlobId> headerContent) {
            this.headerContent = headerContent;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'internalDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
    public static class Builder {
        private ComposedMessageIdWithMetaData composedMessageId;
        private Optional<Date> internalDate;
        private Optional<Date> saveDate;
        private Optional<Long> bodyStartOctet;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'executionProfile'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraModSeqProvider.java`
#### Snippet
```java
    }

    private Mono<Optional<ModSeq>> findHighestModSeq(CassandraId mailboxId, Optional<DriverExecutionProfile> executionProfile) {
        BoundStatement statement = select.bind()
            .set(MAILBOX_ID, mailboxId.asUuid(), TypeCodecs.TIMEUUID);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailboxId'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdMapper.java`
#### Snippet
```java
    }

    private Mono<Void> retrieveAndDeleteIndices(CassandraMessageId messageId, Optional<CassandraId> mailboxId) {
        return imapUidDAO.retrieve(messageId, mailboxId, chooseReadConsistencyUponWrites())
            .map(CassandraMessageMetadata::getComposedMessageId)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messagesPerSecond'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RunningOptionsDTO.java`
#### Snippet
```java
    }

    private final Optional<Integer> messagesPerSecond;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messagesPerSecond'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RunningOptionsDTO.java`
#### Snippet
```java

    @JsonCreator
    public RunningOptionsDTO(@JsonProperty("messagesPerSecond") Optional<Integer> messagesPerSecond) {
        this.messagesPerSecond = messagesPerSecond;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long updatedMessageIdEntries;
    private final long removedMessageIdEntries;
    private final Optional<RunningOptionsDTO> runningOptions;
    private final ImmutableList<MessageInconsistenciesEntry> fixedInconsistencies;
    private final ImmutableList<MessageInconsistenciesEntry> errors;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                   @JsonProperty("updatedMessageIdEntries") long updatedMessageIdEntries,
                                                                   @JsonProperty("removedMessageIdEntries")long removedMessageIdEntries,
                                                                   @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions,
                                                                   @JsonProperty("fixedInconsistencies") ImmutableList<MessageInconsistenciesEntry> fixedInconsistencies,
                                                                   @JsonProperty("errors") ImmutableList<MessageInconsistenciesEntry> errors) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailboxId'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java

    @VisibleForTesting
    public Flux<CassandraMessageMetadata> retrieve(CassandraMessageId messageId, Optional<CassandraId> mailboxId) {
        return retrieve(messageId, mailboxId, STRONG);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailboxId'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
    }

    private BoundStatement selectStatement(CassandraMessageId messageId, Optional<CassandraId> mailboxId) {
        return mailboxId
            .map(cassandraId -> select.bind()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailboxId'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
    }

    public Flux<CassandraMessageMetadata> retrieve(CassandraMessageId messageId, Optional<CassandraId> mailboxId, JamesExecutionProfiles.ConsistencyChoice readConsistencyChoice) {
        return cassandraAsyncExecutor.executeRows(setExecutionProfileIfNeeded(selectStatement(messageId, mailboxId), readConsistencyChoice))
            .map(this::toComposedMessageIdWithMetadata);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesTaskDTO.java`
#### Snippet
```java

    public SolveMessageInconsistenciesTaskDTO(@JsonProperty("type") String type,
                                              @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.runningOptions = runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesTaskDTO.java`
#### Snippet
```java

    private final String type;
    private final Optional<RunningOptionsDTO> runningOptions;

    public SolveMessageInconsistenciesTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
    }

    private Mono<SimpleMailboxMessage> expungeOne(ComposedMessageIdWithMetaData metaData, Optional<Date> saveDate) {
        return delete(metaData)
            .then(messageDAOV3.retrieveMessage(metaData, FetchType.METADATA)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustMessageProjection'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RecomputeMailboxCountersTaskDTO.java`
#### Snippet
```java

    public RecomputeMailboxCountersTaskDTO(@JsonProperty("type") String type,
                                           @JsonProperty("trustMessageProjection") Optional<Boolean> trustMessageProjection) {
        this.type = type;
        this.trustMessageProjection = trustMessageProjection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustMessageProjection'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RecomputeMailboxCountersTaskDTO.java`
#### Snippet
```java

    private final String type;
    private final Optional<Boolean> trustMessageProjection;

    public RecomputeMailboxCountersTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'errors'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
            private ImmutableList.Builder<MailboxId>  fixedInconsistencies;
            private ImmutableList.Builder<ConflictingEntry> conflictingEntries;
            private Optional<Long> errors;

            Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'processedMailboxPathEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
        static class Builder {
            private Optional<Long> processedMailboxEntries;
            private Optional<Long> processedMailboxPathEntries;
            private ImmutableList.Builder<MailboxId>  fixedInconsistencies;
            private ImmutableList.Builder<ConflictingEntry> conflictingEntries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'processedMailboxEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
    public static class Context {
        static class Builder {
            private Optional<Long> processedMailboxEntries;
            private Optional<Long> processedMailboxPathEntries;
            private ImmutableList.Builder<MailboxId>  fixedInconsistencies;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'acl'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/eventsourcing/acl/MailboxACLAggregate.java`
#### Snippet
```java
        private final Optional<MailboxACL> acl;

        private State(Optional<MailboxACL> acl) {
            this.acl = acl;
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'acl'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/eventsourcing/acl/MailboxACLAggregate.java`
#### Snippet
```java
        }

        private final Optional<MailboxACL> acl;

        private State(Optional<MailboxACL> acl) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sizeLimit'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/quota/Limits.java`
#### Snippet
```java
    private final Optional<QuotaCountLimit> countLimit;

    public Limits(Optional<QuotaSizeLimit> sizeLimit, Optional<QuotaCountLimit> countLimit) {
        this.sizeLimit = sizeLimit;
        this.countLimit = countLimit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'countLimit'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/quota/Limits.java`
#### Snippet
```java
    private final Optional<QuotaCountLimit> countLimit;

    public Limits(Optional<QuotaSizeLimit> sizeLimit, Optional<QuotaCountLimit> countLimit) {
        this.sizeLimit = sizeLimit;
        this.countLimit = countLimit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sizeLimit'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/quota/Limits.java`
#### Snippet
```java
    }

    private final Optional<QuotaSizeLimit> sizeLimit;
    private final Optional<QuotaCountLimit> countLimit;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'countLimit'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/quota/Limits.java`
#### Snippet
```java

    private final Optional<QuotaSizeLimit> sizeLimit;
    private final Optional<QuotaCountLimit> countLimit;

    public Limits(Optional<QuotaSizeLimit> sizeLimit, Optional<QuotaCountLimit> countLimit) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'processedImapUidEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java

            static class Builder {
                private Optional<Long> processedImapUidEntries;
                private Optional<Long> processedMessageIdEntries;
                private Optional<Long> addedMessageIdEntries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'processedMessageIdEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java
            static class Builder {
                private Optional<Long> processedImapUidEntries;
                private Optional<Long> processedMessageIdEntries;
                private Optional<Long> addedMessageIdEntries;
                private Optional<Long> updatedMessageIdEntries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'updatedMessageIdEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> processedMessageIdEntries;
                private Optional<Long> addedMessageIdEntries;
                private Optional<Long> updatedMessageIdEntries;
                private Optional<Long> removedMessageIdEntries;
                private ImmutableList.Builder<ComposedMessageId> fixedInconsistencies;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'addedMessageIdEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> processedImapUidEntries;
                private Optional<Long> processedMessageIdEntries;
                private Optional<Long> addedMessageIdEntries;
                private Optional<Long> updatedMessageIdEntries;
                private Optional<Long> removedMessageIdEntries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'removedMessageIdEntries'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> addedMessageIdEntries;
                private Optional<Long> updatedMessageIdEntries;
                private Optional<Long> removedMessageIdEntries;
                private ImmutableList.Builder<ComposedMessageId> fixedInconsistencies;
                private ImmutableList.Builder<ComposedMessageId> errors;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'globalLimits'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/quota/CassandraPerUserMaxQuotaManager.java`
#### Snippet
```java
    }

    private Map<Quota.Scope, QuotaSizeLimit> sizeDetails(Limits userLimits, Limits domainLimits, Optional<QuotaSizeLimit> globalLimits) {
        return Stream.of(
                userLimits.getSizeLimit().stream().map(limit -> Pair.of(Quota.Scope.User, limit)),
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'globalLimits'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/quota/CassandraPerUserMaxQuotaManager.java`
#### Snippet
```java
    }

    private Map<Quota.Scope, QuotaCountLimit> countDetails(Limits userLimits, Limits domainLimits, Optional<QuotaCountLimit> globalLimits) {
        return Stream.of(
                userLimits.getCountLimit().stream().map(limit -> Pair.of(Quota.Scope.User, limit)),
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saslConfiguration'
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/netty/SMTPServer.java`
#### Snippet
```java
        private final Optional<OidcSASLConfiguration> saslConfiguration;

        public AuthenticationConfiguration(AuthenticationAnnounceMode authenticationAnnounceMode, boolean requireSSL, boolean plainAuthEnabled, Optional<OidcSASLConfiguration> saslConfiguration) {
            this.authenticationAnnounceMode = authenticationAnnounceMode;
            this.requireSSL = requireSSL;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saslConfiguration'
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/netty/SMTPServer.java`
#### Snippet
```java
        private final boolean requireSSL;
        private final boolean plainAuthEnabled;
        private final Optional<OidcSASLConfiguration> saslConfiguration;

        public AuthenticationConfiguration(AuthenticationAnnounceMode authenticationAnnounceMode, boolean requireSSL, boolean plainAuthEnabled, Optional<OidcSASLConfiguration> saslConfiguration) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'registrationKey'
in `event-bus/distributed/src/main/java/org/apache/james/events/RoutingKeyConverter.java`
#### Snippet
```java
        }

        private final Optional<RegistrationKey> registrationKey;

        private RoutingKey(Optional<RegistrationKey> registrationKey) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'registrationKey'
in `event-bus/distributed/src/main/java/org/apache/james/events/RoutingKeyConverter.java`
#### Snippet
```java
        private final Optional<RegistrationKey> registrationKey;

        private RoutingKey(Optional<RegistrationKey> registrationKey) {
            this.registrationKey = registrationKey;
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'consumer'
in `event-bus/distributed/src/main/java/org/apache/james/events/GroupRegistrationHandler.java`
#### Snippet
```java
    private final GroupRegistration.WorkQueueName queueName;
    private Scheduler scheduler;
    private Optional<Disposable> consumer;

    GroupRegistrationHandler(NamingStrategy namingStrategy, EventSerializer eventSerializer, ReactorRabbitMQChannelPool channelPool, Sender sender, ReceiverProvider receiverProvider,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'receiverSubscriber'
in `event-bus/distributed/src/main/java/org/apache/james/events/KeyRegistrationHandler.java`
#### Snippet
```java
    private final RabbitMQConfiguration configuration;
    private final ReceiverProvider receiverProvider;
    private Optional<Disposable> receiverSubscriber;
    private final MetricFactory metricFactory;
    private Scheduler scheduler;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'receiverSubscriber'
in `event-bus/distributed/src/main/java/org/apache/james/events/GroupRegistration.java`
#### Snippet
```java
    private final ListenerExecutor listenerExecutor;
    private final RabbitMQConfiguration configuration;
    private Optional<Disposable> receiverSubscriber;
    private final ReceiverProvider receiverProvider;
    private Scheduler scheduler;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/SenderUtils.java`
#### Snippet
```java
    }

    private final Optional<MailAddress> sender;

    private SenderUtils(Optional<MailAddress> sender) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/SenderUtils.java`
#### Snippet
```java
    private final Optional<MailAddress> sender;

    private SenderUtils(Optional<MailAddress> sender) {
        this.sender = sender;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/SenderUtils.java`
#### Snippet
```java
public class SenderUtils {

    public static SenderUtils from(Optional<MailAddress> sender) {
        return new SenderUtils(sender);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'replyTo'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/ReplyToUtils.java`
#### Snippet
```java
    private final Optional<MailAddress> replyTo;

    private ReplyToUtils(Optional<MailAddress> replyTo) {
        this.replyTo = replyTo;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'replyTo'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/ReplyToUtils.java`
#### Snippet
```java
public class ReplyToUtils {

    public static ReplyToUtils from(Optional<MailAddress> replyTo) {
        return new ReplyToUtils(replyTo);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'replyTo'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/ReplyToUtils.java`
#### Snippet
```java
    }

    private final Optional<MailAddress> replyTo;

    private ReplyToUtils(Optional<MailAddress> replyTo) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'plainText'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/MimeMessageBodyGenerator.java`
#### Snippet
```java
    }

    public MimeMessage from(MimeMessage messageHoldingHeaders, Optional<String> plainText, Optional<String> htmlText) throws MessagingException {
        Preconditions.checkNotNull(messageHoldingHeaders);
        Preconditions.checkNotNull(plainText);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlText'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/MimeMessageBodyGenerator.java`
#### Snippet
```java
    }

    public MimeMessage from(MimeMessage messageHoldingHeaders, Optional<String> plainText, Optional<String> htmlText) throws MessagingException {
        Preconditions.checkNotNull(messageHoldingHeaders);
        Preconditions.checkNotNull(plainText);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'plainText'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/MimeMessageBodyGenerator.java`
#### Snippet
```java
    }

    private String retrievePlainTextMessage(Optional<String> plainText, String htmlText) {
        return plainText.filter(text -> !text.isBlank()).orElseGet(() -> htmlTextExtractor.toPlainText(htmlText));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'plainText'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/MimeMessageBodyGenerator.java`
#### Snippet
```java
    }

    private Multipart generateMultipart(String htmlText, Optional<String> plainText) throws MessagingException {
        try {
            Multipart multipart = new MimeMultipart(ALTERNATIVE);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delayDuration'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/Requeue.java`
#### Snippet
```java

    private MailQueue mailQueue;
    private Optional<Duration> delayDuration;
    private ProcessingState processor;
    private boolean consume;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'givenAddress'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/SpecialAddressesUtils.java`
#### Snippet
```java
     * else the givenAddress is returned.
     */
    public Optional<MailAddress> getFirstSpecialAddressIfMatchingOrGivenAddress(Optional<String> givenAddress, List<String> allowedSpecials) throws MessagingException {
        List<MailAddress> extractAddresses = AddressExtractor
                .withContext(mailet.getMailetContext())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'parameter'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WithStorageDirective.java`
#### Snippet
```java
    }

    private boolean validBooleanParameter(Optional<String> parameter) {
        return parameter.map(v -> v.equals("true") || v.equals("false"))
            .orElse(true);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_FLAGS'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/ToSenderFolder.java`
#### Snippet
```java
public class ToSenderFolder extends GenericMailet {
    private static final Logger LOGGER = LoggerFactory.getLogger(ToSenderFolder.class);
    private static final Optional<Flags> NO_FLAGS = Optional.empty();

    private final UsersRepository usersRepository;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'to'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/NotifySender.java`
#### Snippet
```java

    private final DNSService dns;
    private Optional<String> to = Optional.empty();

    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'to'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/NotifyPostmaster.java`
#### Snippet
```java

    private final DNSService dns;
    private Optional<String> to = Optional.empty();

    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'exception'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/ExecutionResult.java`
#### Snippet
```java

    private final ExecutionState executionState;
    private final Optional<Exception> exception;

    public ExecutionResult(ExecutionState executionState, Optional<Exception> exception) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'exception'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/ExecutionResult.java`
#### Snippet
```java
    private final Optional<Exception> exception;

    public ExecutionResult(ExecutionState executionState, Optional<Exception> exception) {
        this.executionState = executionState;
        this.exception = exception;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'returnCode'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/EnhancedMessagingException.java`
#### Snippet
```java
    }

    private boolean isServerError(Optional<Integer> returnCode) {
        return (returnCode.isPresent()
            && returnCode.get() >= 500
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nestedReturnCode'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/EnhancedMessagingException.java`
#### Snippet
```java
    private final MessagingException messagingException;
    private final Optional<Integer> returnCode;
    private final Optional<Integer> nestedReturnCode;

    public EnhancedMessagingException(MessagingException messagingException) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'returnCode'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/EnhancedMessagingException.java`
#### Snippet
```java
    
    private final MessagingException messagingException;
    private final Optional<Integer> returnCode;
    private final Optional<Integer> nestedReturnCode;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'onSuccess'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/RemoteDeliveryConfiguration.java`
#### Snippet
```java
    private final String authPass;
    private final Properties javaxAdditionalProperties;
    private final Optional<ProcessingState> onSuccess;

    public RemoteDeliveryConfiguration(MailetConfig mailetConfig, DomainList domainList) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bounceProcessor'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/RemoteDeliveryConfiguration.java`
#### Snippet
```java
    private final MailQueueName outGoingQueueName;
    private final String bindAddress;
    private final Optional<ProcessingState> bounceProcessor;
    private final Collection<String> gatewayServer;
    private final String authUser;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeAddressList'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/AddressExtractor.java`
#### Snippet
```java
    }

    private List<MailAddress> extract(Optional<String> maybeAddressList) throws MessagingException {
        if (!maybeAddressList.isPresent()) {
            return ImmutableList.of();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'addressList'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/AddressExtractor.java`
#### Snippet
```java
        }

        public List<MailAddress> extract(Optional<String> addressList) throws MessagingException {
            checkParameters();
            return new AddressExtractor(mailetContext, allowedSpecials).extract(addressList);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'reversePath'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private final Optional<String> recipients;
    private final Optional<String> to;
    private final Optional<String> reversePath;
    private final Optional<String> sender;
    private final Optional<String> replyTo;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'to'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private final boolean isReply;
    private final Optional<String> recipients;
    private final Optional<String> to;
    private final Optional<String> reversePath;
    private final Optional<String> sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'replyTo'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private final Optional<String> reversePath;
    private final Optional<String> sender;
    private final Optional<String> replyTo;
    private final boolean debug;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private final Optional<String> to;
    private final Optional<String> reversePath;
    private final Optional<String> sender;
    private final Optional<String> replyTo;
    private final boolean debug;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recipients'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private final boolean attachError;
    private final boolean isReply;
    private final Optional<String> recipients;
    private final Optional<String> to;
    private final Optional<String> reversePath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recipients'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private LoadedOnceInitParameters(boolean isStatic, boolean passThrough, boolean fakeDomainCheck, TypeCode inline, TypeCode attachment, String message,
            String subject, String prefix, boolean attachError, boolean isReply, 
            Optional<String> recipients, Optional<String> to, Optional<String> reversePath, Optional<String> sender, Optional<String> replyTo, boolean debug) {
        this.isStatic = isStatic;
        this.passThrough = passThrough;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'to'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private LoadedOnceInitParameters(boolean isStatic, boolean passThrough, boolean fakeDomainCheck, TypeCode inline, TypeCode attachment, String message,
            String subject, String prefix, boolean attachError, boolean isReply, 
            Optional<String> recipients, Optional<String> to, Optional<String> reversePath, Optional<String> sender, Optional<String> replyTo, boolean debug) {
        this.isStatic = isStatic;
        this.passThrough = passThrough;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'reversePath'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private LoadedOnceInitParameters(boolean isStatic, boolean passThrough, boolean fakeDomainCheck, TypeCode inline, TypeCode attachment, String message,
            String subject, String prefix, boolean attachError, boolean isReply, 
            Optional<String> recipients, Optional<String> to, Optional<String> reversePath, Optional<String> sender, Optional<String> replyTo, boolean debug) {
        this.isStatic = isStatic;
        this.passThrough = passThrough;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private LoadedOnceInitParameters(boolean isStatic, boolean passThrough, boolean fakeDomainCheck, TypeCode inline, TypeCode attachment, String message,
            String subject, String prefix, boolean attachError, boolean isReply, 
            Optional<String> recipients, Optional<String> to, Optional<String> reversePath, Optional<String> sender, Optional<String> replyTo, boolean debug) {
        this.isStatic = isStatic;
        this.passThrough = passThrough;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'replyTo'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/LoadedOnceInitParameters.java`
#### Snippet
```java
    private LoadedOnceInitParameters(boolean isStatic, boolean passThrough, boolean fakeDomainCheck, TypeCode inline, TypeCode attachment, String message,
            String subject, String prefix, boolean attachError, boolean isReply, 
            Optional<String> recipients, Optional<String> to, Optional<String> reversePath, Optional<String> sender, Optional<String> replyTo, boolean debug) {
        this.isStatic = isStatic;
        this.passThrough = passThrough;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'flags'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailboxAppenderImpl.java`
#### Snippet
```java
    }

    private Mono<AppendResult> append(MimeMessage mail, Username user, String folder, Optional<Flags> flags, MailboxSession mailboxSession) {
        MailboxPath mailboxPath = MailboxPath.forUser(user, folder);
        return Mono.using(
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'flags'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailboxAppenderImpl.java`
#### Snippet
```java
    }

    private MessageManager.AppendCommand.Builder appendCommand(Optional<Flags> flags) {
        MessageManager.AppendCommand.Builder builder = MessageManager.AppendCommand.builder()
            .recent()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'flags'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailboxAppenderImpl.java`
#### Snippet
```java
    }

    protected Mono<AppendResult> appendMessageToMailbox(MimeMessage mail, MailboxSession session, MailboxPath path, Optional<Flags> flags) {
        return createMailboxIfNotExist(session, path)
            .flatMap(mailbox -> Mono.from(mailbox.appendMessageReactive(appendCommand(flags).build(extractContent(mail)), session)));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'retries'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailDispatcher.java`
#### Snippet
```java
    private final boolean ignoreError;
    private final boolean propagate;
    private final Optional<Integer> retries;
    private final String errorProcessor;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'retries'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailDispatcher.java`
#### Snippet
```java
    private final String errorProcessor;

    private MailDispatcher(MailStore mailStore, MailetContext mailetContext, boolean consume, Optional<Integer> retries, String onMailetException) {
        this.mailStore = mailStore;
        this.consume = consume;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultInLineType'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectMailetInitParameters.java`
#### Snippet
```java
    private final GenericMailet mailet;
    private final Optional<TypeCode> defaultAttachmentType;
    private final Optional<TypeCode> defaultInLineType;

    private RedirectMailetInitParameters(GenericMailet mailet, Optional<TypeCode> defaultAttachmentType, Optional<TypeCode> defaultInLineType) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultAttachmentType'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectMailetInitParameters.java`
#### Snippet
```java
    }

    public static InitParameters from(GenericMailet mailet, Optional<TypeCode> defaultAttachmentType) {
        RedirectMailetInitParameters initParameters = new RedirectMailetInitParameters(mailet, defaultAttachmentType, defaultAttachmentType);
        if (initParameters.isStatic()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultAttachmentType'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectMailetInitParameters.java`
#### Snippet
```java
    private final Optional<TypeCode> defaultInLineType;

    private RedirectMailetInitParameters(GenericMailet mailet, Optional<TypeCode> defaultAttachmentType, Optional<TypeCode> defaultInLineType) {
        this.mailet = mailet;
        this.defaultAttachmentType = defaultAttachmentType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'retries'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailDispatcher.java`
#### Snippet
```java
        private MailetContext mailetContext;
        private String onMailetException;
        private Optional<Integer> retries = Optional.empty();

        public Builder consume(boolean consume) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeReversePath'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MailModifier.java`
#### Snippet
```java
     * the requested value is null does nothing.
     */
    public void setReversePath(Optional<MailAddress> maybeReversePath) {
        if (maybeReversePath.isPresent()) {
            MailAddress reversePath = maybeReversePath.get();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalReplyTo'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MailModifier.java`
#### Snippet
```java
     * the "Reply-To:" header. If the requested value is null does nothing.</p>
     */
    public void setReplyTo(Optional<MailAddress> optionalReplyTo) throws MessagingException {
        optionalReplyTo.ifPresent(Throwing
            .consumer((ThrowingConsumer<MailAddress>) this::setReplyTo)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultInLineType'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectMailetInitParameters.java`
#### Snippet
```java
    private final Optional<TypeCode> defaultInLineType;

    private RedirectMailetInitParameters(GenericMailet mailet, Optional<TypeCode> defaultAttachmentType, Optional<TypeCode> defaultInLineType) {
        this.mailet = mailet;
        this.defaultAttachmentType = defaultAttachmentType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultAttachmentType'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/RedirectMailetInitParameters.java`
#### Snippet
```java

    private final GenericMailet mailet;
    private final Optional<TypeCode> defaultAttachmentType;
    private final Optional<TypeCode> defaultInLineType;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MailModifier.java`
#### Snippet
```java
    }

    public void setSender(Optional<MailAddress> sender) throws MessagingException {
        if (sender.isPresent()) {
            sender.flatMap(MailAddress::toInternetAddress)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java

    private final Optional<Long> count;
    private final Optional<Long> size;

    private QuotaDTO(Optional<Long> count, Optional<Long> size) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Long> count;
        private Optional<Long> size;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
        }

        public Builder count(Optional<Long> count) {
            this.count = count;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
    @JsonPOJOBuilder(withPrefix = "")
    public static class Builder {
        private Optional<Long> count;
        private Optional<Long> size;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
    }

    private final Optional<Long> count;
    private final Optional<Long> size;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
        }

        public Builder size(Optional<Long> size) {
            this.size = size;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
    private final Optional<Long> size;

    private QuotaDTO(Optional<Long> count, Optional<Long> size) {
        this.count = count;
        this.size = size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDTO.java`
#### Snippet
```java
    private final Optional<Long> size;

    private QuotaDTO(Optional<Long> count, Optional<Long> size) {
        this.count = count;
        this.size = size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'global'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
    }

    private final Optional<ValidatedQuotaDTO> global;
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> computed;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'global'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
    private final Optional<ValidatedQuotaDTO> computed;

    private QuotaDomainDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> computed) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
    private final Optional<ValidatedQuotaDTO> computed;

    private QuotaDomainDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> computed) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'computed'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
    private final Optional<ValidatedQuotaDTO> computed;

    private QuotaDomainDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> computed) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java

    private final Optional<ValidatedQuotaDTO> global;
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> computed;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'computed'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
        private Optional<ValidatedQuotaDTO> global;
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> computed;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'computed'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
    private final Optional<ValidatedQuotaDTO> global;
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> computed;

    private QuotaDomainDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> computed) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java


    private final Optional<QuotaCountLimit> count;
    private final Optional<QuotaSizeLimit> size;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java
    public static class Builder {
        private Optional<ValidatedQuotaDTO> global;
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> computed;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'global'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDomainDTO.java`
#### Snippet
```java

    public static class Builder {
        private Optional<ValidatedQuotaDTO> global;
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> computed;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java
        }

        public Builder count(Optional<QuotaCountLimit> count) {
            this.count = count;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java
    @JsonPOJOBuilder(withPrefix = "")
    public static class Builder {
        private Optional<QuotaCountLimit> count;
        private Optional<QuotaSizeLimit> size;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java

    private final Optional<QuotaCountLimit> count;
    private final Optional<QuotaSizeLimit> size;

    private ValidatedQuotaDTO(Optional<QuotaCountLimit> count, Optional<QuotaSizeLimit> size) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java
    public static class Builder {
        private Optional<QuotaCountLimit> count;
        private Optional<QuotaSizeLimit> size;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java
        }

        public Builder size(Optional<QuotaSizeLimit> size) {
            this.size = size;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'count'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java
    private final Optional<QuotaSizeLimit> size;

    private ValidatedQuotaDTO(Optional<QuotaCountLimit> count, Optional<QuotaSizeLimit> size) {
        this.count = count;
        this.size = size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'size'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/ValidatedQuotaDTO.java`
#### Snippet
```java
    private final Optional<QuotaSizeLimit> size;

    private ValidatedQuotaDTO(Optional<QuotaCountLimit> count, Optional<QuotaSizeLimit> size) {
        this.count = count;
        this.size = size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    public static class Builder {
        private Optional<ValidatedQuotaDTO> global;
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> user;
        private Optional<ValidatedQuotaDTO> computed;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'computed'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> user;
    private final Optional<ValidatedQuotaDTO> computed;
    private final OccupationDTO occupation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'user'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
        private Optional<ValidatedQuotaDTO> global;
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> user;
        private Optional<ValidatedQuotaDTO> computed;
        private OccupationDTO occupation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'global'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java

    public static class Builder {
        private Optional<ValidatedQuotaDTO> global;
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'user'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    private final Optional<ValidatedQuotaDTO> global;
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> user;
    private final Optional<ValidatedQuotaDTO> computed;
    private final OccupationDTO occupation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'global'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    }

    private final Optional<ValidatedQuotaDTO> global;
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'computed'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
        private Optional<ValidatedQuotaDTO> domain;
        private Optional<ValidatedQuotaDTO> user;
        private Optional<ValidatedQuotaDTO> computed;
        private OccupationDTO occupation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java

    private final Optional<ValidatedQuotaDTO> global;
    private final Optional<ValidatedQuotaDTO> domain;
    private final Optional<ValidatedQuotaDTO> user;
    private final Optional<ValidatedQuotaDTO> computed;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'global'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    private final OccupationDTO occupation;

    private QuotaDetailsDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> user, Optional<ValidatedQuotaDTO> computed, OccupationDTO occupation) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    private final OccupationDTO occupation;

    private QuotaDetailsDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> user, Optional<ValidatedQuotaDTO> computed, OccupationDTO occupation) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'user'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    private final OccupationDTO occupation;

    private QuotaDetailsDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> user, Optional<ValidatedQuotaDTO> computed, OccupationDTO occupation) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'computed'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/QuotaDetailsDTO.java`
#### Snippet
```java
    private final OccupationDTO occupation;

    private QuotaDetailsDTO(Optional<ValidatedQuotaDTO> global, Optional<ValidatedQuotaDTO> domain, Optional<ValidatedQuotaDTO> user, Optional<ValidatedQuotaDTO> computed, OccupationDTO occupation) {
        this.global = global;
        this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformation.java`
#### Snippet
```java
    private final long successfulRedeliveriesCount;
    private final long failedRedeliveriesCount;
    private final Optional<Group> group;
    private final Optional<EventDeadLetters.InsertionId> insertionId;
    private final Instant timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformation.java`
#### Snippet
```java
    private final long failedRedeliveriesCount;
    private final Optional<Group> group;
    private final Optional<EventDeadLetters.InsertionId> insertionId;
    private final Instant timestamp;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformation.java`
#### Snippet
```java
    EventDeadLettersRedeliveryTaskAdditionalInformation(long successfulRedeliveriesCount,
                                                        long failedRedeliveriesCount,
                                                        Optional<Group> group,
                                                        Optional<EventDeadLetters.InsertionId> insertionId,
                                                        Instant timestamp) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformation.java`
#### Snippet
```java
                                                        long failedRedeliveriesCount,
                                                        Optional<Group> group,
                                                        Optional<EventDeadLetters.InsertionId> insertionId,
                                                        Instant timestamp) {
        this.successfulRedeliveriesCount = successfulRedeliveriesCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'olderThan'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java
        private final boolean byExpiresHeader;

        private final Optional<String> olderThan;

        @JsonIgnore
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'olderThan'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java
                              @JsonProperty("mailbox") String mailbox,
                              @JsonProperty("byExpiresHeader") boolean byExpiresHeader,
                              @JsonProperty("olderThan") Optional<String> olderThan) {
            Preconditions.checkArgument(usersPerSecond > 0, "'usersPerSecond' must be strictly positive");
            this.usersPerSecond = usersPerSecond;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxAgeDuration'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java

        @JsonIgnore
        private final Optional<Duration> maxAgeDuration;

        @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'byExpiresHeader'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java

        public static RunningOptions fromParams(
                Optional<String> byExpiresHeader, Optional<String> olderThan,
                Optional<String> usersPerSecond, Optional<String> mailbox) {
            try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'olderThan'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java

        public static RunningOptions fromParams(
                Optional<String> byExpiresHeader, Optional<String> olderThan,
                Optional<String> usersPerSecond, Optional<String> mailbox) {
            try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'usersPerSecond'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java
        public static RunningOptions fromParams(
                Optional<String> byExpiresHeader, Optional<String> olderThan,
                Optional<String> usersPerSecond, Optional<String> mailbox) {
            try {
                if (byExpiresHeader.isPresent() == olderThan.isPresent()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailbox'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxService.java`
#### Snippet
```java
        public static RunningOptions fromParams(
                Optional<String> byExpiresHeader, Optional<String> olderThan,
                Optional<String> usersPerSecond, Optional<String> mailbox) {
            try {
                if (byExpiresHeader.isPresent() == olderThan.isPresent()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
            long successfulRedeliveriesCount,
            long failedRedeliveriesCount,
            Optional<Group> group,
            Optional<EventDeadLetters.InsertionId> insertionId,
            Instant timestamp) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
            long failedRedeliveriesCount,
            Optional<Group> group,
            Optional<EventDeadLetters.InsertionId> insertionId,
            Instant timestamp) {
            super(successfulRedeliveriesCount, failedRedeliveriesCount, group, insertionId, timestamp);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long successfulRedeliveriesCount;
    private final long failedRedeliveriesCount;
    private final Optional<String> group;
    private final Optional<String> insertionId;
    private final Instant timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                  @JsonProperty("successfulRedeliveriesCount") long successfulRedeliveriesCount,
                                                                  @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                                                                  @JsonProperty("group") Optional<String> group,
                                                                  @JsonProperty("insertionId") Optional<String> insertionId,
                                                                  @JsonProperty("timestamp") Instant timestamp
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                  @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                                                                  @JsonProperty("group") Optional<String> group,
                                                                  @JsonProperty("insertionId") Optional<String> insertionId,
                                                                  @JsonProperty("timestamp") Instant timestamp
    ) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                       @JsonProperty("successfulRedeliveriesCount") long successfulRedeliveriesCount,
                       @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                       @JsonProperty("group") Optional<String> group,
                       @JsonProperty("insertionId") Optional<String> insertionId,
                       @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                       @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                       @JsonProperty("group") Optional<String> group,
                       @JsonProperty("insertionId") Optional<String> insertionId,
                       @JsonProperty("timestamp") Instant timestamp,
                       @JsonProperty("runningOptions") RunningOptions runningOptions) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                       @JsonProperty("successfulRedeliveriesCount") long successfulRedeliveriesCount,
                       @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                       @JsonProperty("group") Optional<String> group,
                       @JsonProperty("insertionId") Optional<String> insertionId,
                       @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                       @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                       @JsonProperty("group") Optional<String> group,
                       @JsonProperty("insertionId") Optional<String> insertionId,
                       @JsonProperty("timestamp") Instant timestamp,
                       @JsonProperty("runningOptions") RunningOptions runningOptions) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
        private final RunningOptions runningOptions;

        EventDeadLettersRedeliveryTaskAdditionalInformationForGroup(long successfulRedeliveriesCount, long failedRedeliveriesCount, Optional<Group> group, Instant timestamp, RunningOptions runningOptions) {
            super(successfulRedeliveriesCount, failedRedeliveriesCount, group, Optional.empty(), timestamp);
            this.runningOptions = runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long failedRedeliveriesCount;
    private final Optional<String> group;
    private final Optional<String> insertionId;
    private final Instant timestamp;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                       @JsonProperty("successfulRedeliveriesCount") long successfulRedeliveriesCount,
                       @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                       @JsonProperty("group") Optional<String> group,
                       @JsonProperty("insertionId") Optional<String> insertionId,
                       @JsonProperty("timestamp") Instant timestamp) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'insertionId'
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                       @JsonProperty("failedRedeliveriesCount") long failedRedeliveriesCount,
                       @JsonProperty("group") Optional<String> group,
                       @JsonProperty("insertionId") Optional<String> insertionId,
                       @JsonProperty("timestamp") Instant timestamp) {
                super(type, successfulRedeliveriesCount, failedRedeliveriesCount, group, insertionId, timestamp);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'thresholdChange'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/model/HistoryEvolution.java`
#### Snippet
```java
    private final HistoryChangeType thresholdHistoryChange;
    private final Optional<HighestThresholdRecentness> recentness;
    private final Optional<QuotaThresholdChange> thresholdChange;

    public HistoryEvolution(HistoryChangeType thresholdHistoryChange, Optional<HighestThresholdRecentness> recentness, Optional<QuotaThresholdChange> thresholdChange) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recentness'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/model/HistoryEvolution.java`
#### Snippet
```java
    private final Optional<QuotaThresholdChange> thresholdChange;

    public HistoryEvolution(HistoryChangeType thresholdHistoryChange, Optional<HighestThresholdRecentness> recentness, Optional<QuotaThresholdChange> thresholdChange) {
        this.thresholdHistoryChange = thresholdHistoryChange;
        this.recentness = recentness;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'thresholdChange'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/model/HistoryEvolution.java`
#### Snippet
```java
    private final Optional<QuotaThresholdChange> thresholdChange;

    public HistoryEvolution(HistoryChangeType thresholdHistoryChange, Optional<HighestThresholdRecentness> recentness, Optional<QuotaThresholdChange> thresholdChange) {
        this.thresholdHistoryChange = thresholdHistoryChange;
        this.recentness = recentness;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recentness'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/model/HistoryEvolution.java`
#### Snippet
```java

    private final HistoryChangeType thresholdHistoryChange;
    private final Optional<HighestThresholdRecentness> recentness;
    private final Optional<QuotaThresholdChange> thresholdChange;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        }

        public Builder name(Optional<String> name) {
            name.ifPresent(this::name);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'gradePeriod'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        private ImmutableList.Builder<QuotaThreshold> thresholds;
        private ImmutableMap.Builder<QuotaThreshold, RenderingInformation> toRenderingInformation;
        private Optional<Duration> gradePeriod;
        private Optional<String> bodyTemplate;
        private Optional<String> subjectTemplate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        }

        private RenderingInformation(Optional<String> bodyTemplate, Optional<String> subjectTemplate) {
            Preconditions.checkArgument(!bodyTemplate.equals(Optional.of("")), "Pass a non empty bodyTemplate");
            Preconditions.checkArgument(!subjectTemplate.equals(Optional.of("")), "Pass a non empty subjectTemplate");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        }

        private RenderingInformation(Optional<String> bodyTemplate, Optional<String> subjectTemplate) {
            Preconditions.checkArgument(!bodyTemplate.equals(Optional.of("")), "Pass a non empty bodyTemplate");
            Preconditions.checkArgument(!subjectTemplate.equals(Optional.of("")), "Pass a non empty subjectTemplate");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        private final Optional<String> subjectTemplate;

        public static RenderingInformation from(Optional<String> bodyTemplate, Optional<String> subjectTemplate) {
            return new RenderingInformation(
                bodyTemplate,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        private final Optional<String> subjectTemplate;

        public static RenderingInformation from(Optional<String> bodyTemplate, Optional<String> subjectTemplate) {
            return new RenderingInformation(
                bodyTemplate,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
    public static class RenderingInformation {
        private final Optional<String> bodyTemplate;
        private final Optional<String> subjectTemplate;

        public static RenderingInformation from(Optional<String> bodyTemplate, Optional<String> subjectTemplate) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java

    private QuotaMailingListenerConfiguration(ImmutableMap<QuotaThreshold, RenderingInformation> toRenderingInformation,
                                              QuotaThresholds thresholds, Duration gracePeriod, Optional<String> bodyTemplate, Optional<String> subjectTemplate, String name) {
        this.toRenderingInformation = toRenderingInformation;
        this.thresholds = thresholds;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java

    private QuotaMailingListenerConfiguration(ImmutableMap<QuotaThreshold, RenderingInformation> toRenderingInformation,
                                              QuotaThresholds thresholds, Duration gracePeriod, Optional<String> bodyTemplate, Optional<String> subjectTemplate, String name) {
        this.toRenderingInformation = toRenderingInformation;
        this.thresholds = thresholds;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        private ImmutableMap.Builder<QuotaThreshold, RenderingInformation> toRenderingInformation;
        private Optional<Duration> gradePeriod;
        private Optional<String> bodyTemplate;
        private Optional<String> subjectTemplate;
        private Optional<String> name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        }

        public Builder subjectTemplate(Optional<String> subjectTemplate) {
            subjectTemplate.ifPresent(this::subjectTemplate);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java

    public static class RenderingInformation {
        private final Optional<String> bodyTemplate;
        private final Optional<String> subjectTemplate;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        private Optional<Duration> gradePeriod;
        private Optional<String> bodyTemplate;
        private Optional<String> subjectTemplate;
        private Optional<String> name;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
    private final QuotaThresholds thresholds;
    private final Duration gracePeriod;
    private final Optional<String> bodyTemplate;
    private final Optional<String> subjectTemplate;
    private final String name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'duration'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        }

        public Builder gracePeriod(Optional<Duration> duration) {
            duration.ifPresent(this::gracePeriod);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        }

        public Builder bodyTemplate(Optional<String> bodyTemplate) {
            bodyTemplate.ifPresent(this::bodyTemplate);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
        private Optional<String> bodyTemplate;
        private Optional<String> subjectTemplate;
        private Optional<String> name;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subjectTemplate'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
    private final Duration gracePeriod;
    private final Optional<String> bodyTemplate;
    private final Optional<String> subjectTemplate;
    private final String name;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'countThreshold'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java

    public static class Builder {
        private Optional<QuotaThreshold> countThreshold;
        private Optional<QuotaThreshold> sizeThreshold;
        private Quota<QuotaSizeLimit, QuotaSizeUsage> sizeQuota;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sizeThreshold'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java

    private final Optional<QuotaThreshold> countThreshold;
    private final Optional<QuotaThreshold> sizeThreshold;
    private final Quota<QuotaSizeLimit, QuotaSizeUsage> sizeQuota;
    private final Quota<QuotaCountLimit, QuotaCountUsage> countQuota;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'countThreshold'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java
    }

    private final Optional<QuotaThreshold> countThreshold;
    private final Optional<QuotaThreshold> sizeThreshold;
    private final Quota<QuotaSizeLimit, QuotaSizeUsage> sizeQuota;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'countThreshold'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java

    @VisibleForTesting
    QuotaThresholdNotice(Optional<QuotaThreshold> countThreshold, Optional<QuotaThreshold> sizeThreshold,
                         Quota<QuotaSizeLimit, QuotaSizeUsage> sizeQuota, Quota<QuotaCountLimit, QuotaCountUsage> countQuota, QuotaMailingListenerConfiguration configuration) {
        this.countThreshold = countThreshold;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sizeThreshold'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java

    @VisibleForTesting
    QuotaThresholdNotice(Optional<QuotaThreshold> countThreshold, Optional<QuotaThreshold> sizeThreshold,
                         Quota<QuotaSizeLimit, QuotaSizeUsage> sizeQuota, Quota<QuotaCountLimit, QuotaCountUsage> countQuota, QuotaMailingListenerConfiguration configuration) {
        this.countThreshold = countThreshold;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sizeThreshold'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java
    public static class Builder {
        private Optional<QuotaThreshold> countThreshold;
        private Optional<QuotaThreshold> sizeThreshold;
        private Quota<QuotaSizeLimit, QuotaSizeUsage> sizeQuota;
        private Quota<QuotaCountLimit, QuotaCountUsage> countQuota;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'additionalFilter'
in `server/container/guice/mailet/src/main/java/org/apache/james/modules/server/MailetContainerModule.java`
#### Snippet
```java
            }

            private Impl(String processorName, Class<? extends Matcher> matcherClass, Class<? extends Mailet> mailetClass, Optional<Predicate<? super MatcherMailetPair>> additionalFilter, Optional<String> additionalErrorMessage) {
                this.processorName = processorName;
                this.matcherClass = matcherClass;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'additionalErrorMessage'
in `server/container/guice/mailet/src/main/java/org/apache/james/modules/server/MailetContainerModule.java`
#### Snippet
```java
            }

            private Impl(String processorName, Class<? extends Matcher> matcherClass, Class<? extends Mailet> mailetClass, Optional<Predicate<? super MatcherMailetPair>> additionalFilter, Optional<String> additionalErrorMessage) {
                this.processorName = processorName;
                this.matcherClass = matcherClass;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'additionalErrorMessage'
in `server/container/guice/mailet/src/main/java/org/apache/james/modules/server/MailetContainerModule.java`
#### Snippet
```java
            private final Class<? extends Mailet> mailetClass;
            private final Optional<Predicate<? super MatcherMailetPair>> additionalFilter;
            private final Optional<String> additionalErrorMessage;

            public Impl(String processorName, Class<? extends Matcher> matcherClass, Class<? extends Mailet> mailetClass) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'additionalFilter'
in `server/container/guice/mailet/src/main/java/org/apache/james/modules/server/MailetContainerModule.java`
#### Snippet
```java
            private final Class<? extends Matcher> matcherClass;
            private final Class<? extends Mailet> mailetClass;
            private final Optional<Predicate<? super MatcherMailetPair>> additionalFilter;
            private final Optional<String> additionalErrorMessage;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'additionalInformation'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/dto/ExecutionDetailsDto.java`
#### Snippet
```java

    private final TaskExecutionDetails executionDetails;
    private final Optional<AdditionalInformationDTO> additionalInformation;

    private ExecutionDetailsDto(TaskExecutionDetails executionDetails,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'additionalInformation'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/dto/ExecutionDetailsDto.java`
#### Snippet
```java

    private ExecutionDetailsDto(TaskExecutionDetails executionDetails,
                                Optional<AdditionalInformationDTO> additionalInformation) {
        this.executionDetails = executionDetails;
        this.additionalInformation = additionalInformation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'urlCORSOrigin'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> enableCORS = Optional.empty();
        private Optional<TlsConfiguration> tlsConfiguration = Optional.empty();
        private Optional<String> urlCORSOrigin = Optional.empty();
        private Optional<String> host = Optional.empty();
        private ImmutableList.Builder<String> additionalRoutes = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enableCORS'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<PortSupplier> port = Optional.empty();
        private Optional<Boolean> enableCORS = Optional.empty();
        private Optional<TlsConfiguration> tlsConfiguration = Optional.empty();
        private Optional<String> urlCORSOrigin = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'minThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        }

        public Builder minThreadCount(Optional<Integer> minThreadCount) {
            this.minThreadCount = minThreadCount;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<String> jwtPublicKey = Optional.empty();
        private Optional<Integer> maxThreadCount = Optional.empty();
        private Optional<Integer> minThreadCount = Optional.empty();

        public Builder jwtPublicKeyPEM(String jwtPublicKeyPEM) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        }

        public Builder maxThreadCount(Optional<Integer> maxThreadCount) {
            this.maxThreadCount = maxThreadCount;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private ImmutableList.Builder<String> additionalRoutes = ImmutableList.builder();
        private Optional<String> jwtPublicKey = Optional.empty();
        private Optional<Integer> maxThreadCount = Optional.empty();
        private Optional<Integer> minThreadCount = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'jwtPublicKeyPEM'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        }

        public Builder jwtPublicKeyPEM(Optional<String> jwtPublicKeyPEM) {
            jwtPublicKeyPEM.ifPresent(this::jwtPublicKeyPEM);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'tlsConfiguration'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    private final boolean enabled;
    private final Optional<PortSupplier> port;
    private final Optional<TlsConfiguration> tlsConfiguration;
    private final boolean enableCORS;
    private final String urlCORSOrigin;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    private final Optional<String> jwtPublicKey;
    private final Optional<Integer> maxThreadCount;
    private final Optional<Integer> minThreadCount;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java

    private final boolean enabled;
    private final Optional<PortSupplier> port;
    private final Optional<TlsConfiguration> tlsConfiguration;
    private final boolean enableCORS;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    private final List<String> additionalRoutes;
    private final Optional<String> jwtPublicKey;
    private final Optional<Integer> maxThreadCount;
    private final Optional<Integer> minThreadCount;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'tlsConfiguration'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<PortSupplier> port = Optional.empty();
        private Optional<Boolean> enableCORS = Optional.empty();
        private Optional<TlsConfiguration> tlsConfiguration = Optional.empty();
        private Optional<String> urlCORSOrigin = Optional.empty();
        private Optional<String> host = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<PortSupplier> port = Optional.empty();
        private Optional<Boolean> enableCORS = Optional.empty();
        private Optional<TlsConfiguration> tlsConfiguration = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'tlsConfiguration'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        }

        public Builder tls(Optional<TlsConfiguration> tlsConfiguration) {
            this.tlsConfiguration = tlsConfiguration;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jwtPublicKey'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<String> host = Optional.empty();
        private ImmutableList.Builder<String> additionalRoutes = ImmutableList.builder();
        private Optional<String> jwtPublicKey = Optional.empty();
        private Optional<Integer> maxThreadCount = Optional.empty();
        private Optional<Integer> minThreadCount = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jwtPublicKey'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    private final String host;
    private final List<String> additionalRoutes;
    private final Optional<String> jwtPublicKey;
    private final Optional<Integer> maxThreadCount;
    private final Optional<Integer> minThreadCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'port'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    WebAdminConfiguration(boolean enabled, Optional<PortSupplier> port, Optional<TlsConfiguration> tlsConfiguration,
                          boolean enableCORS, String urlCORSOrigin, String host, List<String> additionalRoutes, Optional<String> jwtPublicKey, Optional<Integer> maxThreadCount, Optional<Integer> minThreadCount) {
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'tlsConfiguration'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    WebAdminConfiguration(boolean enabled, Optional<PortSupplier> port, Optional<TlsConfiguration> tlsConfiguration,
                          boolean enableCORS, String urlCORSOrigin, String host, List<String> additionalRoutes, Optional<String> jwtPublicKey, Optional<Integer> maxThreadCount, Optional<Integer> minThreadCount) {
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'jwtPublicKey'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    WebAdminConfiguration(boolean enabled, Optional<PortSupplier> port, Optional<TlsConfiguration> tlsConfiguration,
                          boolean enableCORS, String urlCORSOrigin, String host, List<String> additionalRoutes, Optional<String> jwtPublicKey, Optional<Integer> maxThreadCount, Optional<Integer> minThreadCount) {
        this.enabled = enabled;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    WebAdminConfiguration(boolean enabled, Optional<PortSupplier> port, Optional<TlsConfiguration> tlsConfiguration,
                          boolean enableCORS, String urlCORSOrigin, String host, List<String> additionalRoutes, Optional<String> jwtPublicKey, Optional<Integer> maxThreadCount, Optional<Integer> minThreadCount) {
        this.enabled = enabled;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'minThreadCount'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    WebAdminConfiguration(boolean enabled, Optional<PortSupplier> port, Optional<TlsConfiguration> tlsConfiguration,
                          boolean enableCORS, String urlCORSOrigin, String host, List<String> additionalRoutes, Optional<String> jwtPublicKey, Optional<Integer> maxThreadCount, Optional<Integer> minThreadCount) {
        this.enabled = enabled;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'host'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<TlsConfiguration> tlsConfiguration = Optional.empty();
        private Optional<String> urlCORSOrigin = Optional.empty();
        private Optional<String> host = Optional.empty();
        private ImmutableList.Builder<String> additionalRoutes = ImmutableList.builder();
        private Optional<String> jwtPublicKey = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enabled'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<PortSupplier> port = Optional.empty();
        private Optional<Boolean> enableCORS = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'taskParameterName'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/tasks/TaskFromRequestRegistry.java`
#### Snippet
```java

    public static class Builder {
        private Optional<String> taskParameterName;
        private ImmutableMap.Builder<TaskRegistrationKey, TaskFromRequest> tasks;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'details'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/utils/ErrorResponder.java`
#### Snippet
```java
        private final String type;
        private final String message;
        private final Optional<String> details;

        @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cause'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/utils/ErrorResponder.java`
#### Snippet
```java
    private ErrorType type;
    private String message;
    private Optional<Exception> cause;

    public ErrorResponder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'details'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/utils/ErrorResponder.java`
#### Snippet
```java

        @VisibleForTesting
        ErrorDetail(int statusCode, String type, String message, Optional<String> details) {
            this.statusCode = statusCode;
            this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bearer'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/authentication/JwtFilter.java`
#### Snippet
```java
    }

    private void checkHeaderPresent(Optional<String> bearer) {
        if (!bearer.isPresent()) {
            halt(HttpStatus.UNAUTHORIZED_401, "No Bearer header.");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bearer'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/authentication/JwtFilter.java`
#### Snippet
```java
    }

    private void checkIsAdmin(Optional<String> bearer) {
        if (!jwtTokenVerifier.hasAttribute("admin", true, bearer.get())) {
            halt(HttpStatus.UNAUTHORIZED_401, "Non authorized user.");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bearer'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/authentication/JwtFilter.java`
#### Snippet
```java
    }

    private String retrieveUser(Optional<String> bearer) {
        return jwtTokenVerifier.verifyAndExtractLogin(bearer.get())
            .orElseThrow(() -> halt(HttpStatus.UNAUTHORIZED_401, "Invalid Bearer header."));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'description'
in `server/container/lifecycle-api/src/main/java/org/apache/james/lifecycle/api/StartUpCheck.java`
#### Snippet
```java
        private final String name;
        private final ResultType resultType;
        private final Optional<String> description;

        private CheckResult(String name, ResultType resultType, Optional<String> description) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'description'
in `server/container/lifecycle-api/src/main/java/org/apache/james/lifecycle/api/StartUpCheck.java`
#### Snippet
```java
                private final String name;
                private final ResultType resultType;
                private Optional<String> description;

                ReadyToBuild(String name, ResultType resultType) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'description'
in `server/container/lifecycle-api/src/main/java/org/apache/james/lifecycle/api/StartUpCheck.java`
#### Snippet
```java
        private final Optional<String> description;

        private CheckResult(String name, ResultType resultType, Optional<String> description) {
            Preconditions.checkNotNull(name);
            Preconditions.checkNotNull(resultType);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileCustomPrefix'
in `server/blob/blob-export-api/src/main/java/org/apache/james/blob/export/api/ExportedFileNamesGenerator.java`
#### Snippet
```java
public interface ExportedFileNamesGenerator {

    static String generateFileName(Optional<String> fileCustomPrefix,
                                   BlobId blobId,
                                   Optional<FileExtension> fileExtension) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileExtension'
in `server/blob/blob-export-api/src/main/java/org/apache/james/blob/export/api/ExportedFileNamesGenerator.java`
#### Snippet
```java
    static String generateFileName(Optional<String> fileCustomPrefix,
                                   BlobId blobId,
                                   Optional<FileExtension> fileExtension) {
        Preconditions.checkNotNull(blobId);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'prefix'
in `server/blob/blob-export-api/src/main/java/org/apache/james/blob/export/api/BlobExportMechanism.java`
#### Snippet
```java
    @FunctionalInterface
    interface FilePrefixStage {
        FileExtensionStage filePrefix(Optional<String> prefix);

        default FileExtensionStage noFileCustomPrefix() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'extension'
in `server/blob/blob-export-api/src/main/java/org/apache/james/blob/export/api/BlobExportMechanism.java`
#### Snippet
```java
    @FunctionalInterface
    interface FileExtensionStage {
        FinalStage fileExtension(Optional<FileExtension> extension);

        default FinalStage noFileExtension() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'privateKeyAlgorithm'
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/CryptoConfigBuilder.java`
#### Snippet
```java
    }

    public CryptoConfigBuilder privateKeyAlgorithm(Optional<String> privateKeyAlgorithm) {
        this.privateKeyAlgorithm = privateKeyAlgorithm;
        return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'privateKeyAlgorithm'
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/CryptoConfigBuilder.java`
#### Snippet
```java
    private String salt;
    private char[] password;
    private Optional<String> privateKeyAlgorithm = Optional.empty();

    CryptoConfigBuilder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'privateKeyAlgorithm'
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/CryptoConfig.java`
#### Snippet
```java
    private final String salt;
    private final char[] password;
    private final Optional<String> privateKeyAlgorithm;

    CryptoConfig(String salt, char[] password, Optional<String> privateKeyAlgorithm) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'privateKeyAlgorithm'
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/CryptoConfig.java`
#### Snippet
```java
    private final Optional<String> privateKeyAlgorithm;

    CryptoConfig(String salt, char[] password, Optional<String> privateKeyAlgorithm) {
        this.salt = salt;
        this.password = password;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'vhost'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/RabbitMQMailQueueManagement.java`
#### Snippet
```java

    private final RabbitMQManagementAPI api;
    private final Optional<String> vhost;

    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailQueuePublishConfirmEnabled'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/RabbitMQMailQueueConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> sizeMetricsEnabled = Optional.empty();
        private Optional<Boolean> mailQueuePublishConfirmEnabled = Optional.empty();

        public Builder sizeMetricsEnabled(boolean sizeMetricsEnabled) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sizeMetricsEnabled'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/RabbitMQMailQueueConfiguration.java`
#### Snippet
```java
        }

        public Builder sizeMetricsEnabled(Optional<Boolean> sizeMetricsEnabled) {
            this.sizeMetricsEnabled = sizeMetricsEnabled;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sizeMetricsEnabled'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/RabbitMQMailQueueConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Boolean> sizeMetricsEnabled = Optional.empty();
        private Optional<Boolean> mailQueuePublishConfirmEnabled = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeConfiguration'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/configuration/ConfigurationAggregate.java`
#### Snippet
```java
        private Optional<CassandraMailQueueViewConfiguration> maybeConfiguration;

        State(Optional<CassandraMailQueueViewConfiguration> maybeConfiguration) {
            Preconditions.checkNotNull(maybeConfiguration);
            this.maybeConfiguration = maybeConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maybeConfiguration'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/configuration/ConfigurationAggregate.java`
#### Snippet
```java
        }

        private Optional<CassandraMailQueueViewConfiguration> maybeConfiguration;

        State(Optional<CassandraMailQueueViewConfiguration> maybeConfiguration) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'reporter'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESMetricReporter.java`
#### Snippet
```java

public class ESMetricReporter implements UserDefinedStartable {
    private final Optional<ElasticsearchReporter> reporter;
    private final ESReporterConfiguration esReporterConfiguration;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailReferenceDTO.java`
#### Snippet
```java
    private final ImmutableList<String> recipients;
    private final String name;
    private final Optional<String> sender;
    private final String state;
    private final String errorMessage;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastUpdated'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailReferenceDTO.java`
#### Snippet
```java
    private final String state;
    private final String errorMessage;
    private final Optional<Instant> lastUpdated;
    private final ImmutableMap<String, String> attributes;
    private final String remoteAddr;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailReferenceDTO.java`
#### Snippet
```java
                             @JsonProperty("recipients") ImmutableList<String> recipients,
                             @JsonProperty("name") String name,
                             @JsonProperty("sender") Optional<String> sender,
                             @JsonProperty("state") String state,
                             @JsonProperty("errorMessage") String errorMessage,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lastUpdated'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailReferenceDTO.java`
#### Snippet
```java
                             @JsonProperty("state") String state,
                             @JsonProperty("errorMessage") String errorMessage,
                             @JsonProperty("lastUpdated") Optional<Instant> lastUpdated,
                             @JsonProperty("attributes") ImmutableMap<String, String> attributes,
                             @JsonProperty("remoteAddr") String remoteAddr,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'index'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    private final Optional<Integer> port;
    private final boolean enabled;
    private final Optional<String> index;
    private final Optional<Long> periodInSecond;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> host = Optional.empty();
        private Optional<Integer> port = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<String> index = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'periodInSecond'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<String> index = Optional.empty();
        private Optional<Long> periodInSecond = Optional.empty();

        public Builder enabled() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'host'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<String> host = Optional.empty();
        private Optional<Integer> port = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'host'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    private final Optional<Long> periodInSecond;

    public ESReporterConfiguration(Optional<String> host, Optional<Integer> port, boolean enabled, Optional<String> index, Optional<Long> periodInSecond) {
        this.host = host;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'port'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    private final Optional<Long> periodInSecond;

    public ESReporterConfiguration(Optional<String> host, Optional<Integer> port, boolean enabled, Optional<String> index, Optional<Long> periodInSecond) {
        this.host = host;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'index'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    private final Optional<Long> periodInSecond;

    public ESReporterConfiguration(Optional<String> host, Optional<Integer> port, boolean enabled, Optional<String> index, Optional<Long> periodInSecond) {
        this.host = host;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'periodInSecond'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    private final Optional<Long> periodInSecond;

    public ESReporterConfiguration(Optional<String> host, Optional<Integer> port, boolean enabled, Optional<String> index, Optional<Long> periodInSecond) {
        this.host = host;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java

    private final Optional<String> host;
    private final Optional<Integer> port;
    private final boolean enabled;
    private final Optional<String> index;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'periodInSecond'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    private final boolean enabled;
    private final Optional<String> index;
    private final Optional<Long> periodInSecond;

    public ESReporterConfiguration(Optional<String> host, Optional<Integer> port, boolean enabled, Optional<String> index, Optional<Long> periodInSecond) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enabled'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
        private Optional<String> host = Optional.empty();
        private Optional<Integer> port = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<String> index = Optional.empty();
        private Optional<Long> periodInSecond = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'host'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
    public static final long DEFAULT_PERIOD_IN_SECOND = 60L;

    private final Optional<String> host;
    private final Optional<Integer> port;
    private final boolean enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'index'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java
        private Optional<Integer> port = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<String> index = Optional.empty();
        private Optional<Long> periodInSecond = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'authCredential'
in `server/apps/cli/src/main/java/org/apache/james/cli/probe/impl/JmxConnection.java`
#### Snippet
```java
    private final JMXConnector jmxConnector;

    public JmxConnection(String host, int port, Optional<AuthCredential> authCredential) throws IOException {
        JMXServiceURL jmxUrl = new JMXServiceURL(String.format(fmtUrl, host, port));
        Map<String, ?> env = authCredential
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'nextDelivery'
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
        }

        public DefaultMailQueueItemView(Mail mail, Optional<ZonedDateTime> nextDelivery) {
            this.mail = mail;
            this.nextDelivery = nextDelivery;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nextDelivery'
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java

        private final Mail mail;
        private final Optional<ZonedDateTime> nextDelivery;

        public DefaultMailQueueItemView(Mail mail) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'removedRulesEvent'
in `server/data/data-library/src/main/java/org/apache/james/dlp/eventsourcing/aggregates/DLPDomainConfiguration.java`
#### Snippet
```java
    }

    private EventId computeNextEventId(Optional<Event> removedRulesEvent) {
        return removedRulesEvent
            .map(Event::eventId)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'administratorId'
in `server/data/data-library/src/main/java/org/apache/james/user/lib/UsersRepositoryImpl.java`
#### Snippet
```java
    protected final T usersDAO;
    private boolean virtualHosting;
    private Optional<Username> administratorId;
    private long verifyFailureDelay;
    private UserEntityValidator validator;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'autoDetect'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> autoDetectIp;
        private Optional<Boolean> autoDetect;
        private Optional<Domain> defaultDomain;
        private Optional<Boolean> cacheEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultDomain'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        }

        public Builder defaultDomain(Optional<Domain> defaultDomain) {
            this.defaultDomain = defaultDomain;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'autoDetectIp'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
public class DomainListConfiguration {
    public static class Builder {
        private Optional<Boolean> autoDetectIp;
        private Optional<Boolean> autoDetect;
        private Optional<Domain> defaultDomain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'autoDetectIp'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        }

        public Builder autoDetectIp(Optional<Boolean> autoDetectIp) {
            this.autoDetectIp = autoDetectIp;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cacheEnabled'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> autoDetect;
        private Optional<Domain> defaultDomain;
        private Optional<Boolean> cacheEnabled;
        private Optional<Duration> cacheExpiracy;
        private ImmutableList.Builder<Domain> configuredDomains;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cacheExpiracy'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        private Optional<Domain> defaultDomain;
        private Optional<Boolean> cacheEnabled;
        private Optional<Duration> cacheExpiracy;
        private ImmutableList.Builder<Domain> configuredDomains;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'autoDetect'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        }

        public Builder autoDetect(Optional<Boolean> autoDetect) {
            this.autoDetect = autoDetect;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cacheExpiracy'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        }

        public Builder cacheExpiracy(Optional<Duration> cacheExpiracy) {
            this.cacheExpiracy = cacheExpiracy;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultDomain'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> autoDetectIp;
        private Optional<Boolean> autoDetect;
        private Optional<Domain> defaultDomain;
        private Optional<Boolean> cacheEnabled;
        private Optional<Duration> cacheExpiracy;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cacheEnabled'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        }

        public Builder cacheEnabled(Optional<Boolean> cacheEnabled) {
            this.cacheEnabled = cacheEnabled;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'explanation'
in `server/data/data-cassandra/src/main/java/org/apache/james/dlp/eventsourcing/cassandra/DLPConfigurationItemDTO.java`
#### Snippet
```java
    @JsonCreator
    private DLPConfigurationItemDTO(@JsonProperty("id") String id,
                                   @JsonProperty("explanation") Optional<String> explanation,
                                   @JsonProperty("expression") String expression,
                                   @JsonProperty("targetsContent") boolean targetsContent,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'explanation'
in `server/data/data-cassandra/src/main/java/org/apache/james/dlp/eventsourcing/cassandra/DLPConfigurationItemDTO.java`
#### Snippet
```java

    private final String id;
    private final Optional<String> explanation;
    private final String expression;
    private final boolean targetsContent;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/model/SieveQuota.java`
#### Snippet
```java

    private final long currentUsage;
    private final Optional<QuotaSizeLimit> limit;

    public SieveQuota(long currentUsage, Optional<QuotaSizeLimit> limit) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/model/SieveQuota.java`
#### Snippet
```java
    private final Optional<QuotaSizeLimit> limit;

    public SieveQuota(long currentUsage, Optional<QuotaSizeLimit> limit) {
        Preconditions.checkArgument(currentUsage >= 0, "Current usage should be positive or equal to zero");
        limit.ifPresent(limitValue -> Preconditions.checkArgument(limitValue.asLong() >= 0, "Limit value should be positive or equal to zero"));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isActive'
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/model/Script.java`
#### Snippet
```java
        private ScriptName name;
        private ScriptContent content;
        private Optional<Boolean> isActive = Optional.empty();
        private Optional<Long> size = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'size'
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/model/Script.java`
#### Snippet
```java
        private ScriptContent content;
        private Optional<Boolean> isActive = Optional.empty();
        private Optional<Long> size = Optional.empty();

        public Builder name(ScriptName name) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'waitDelay'
in `server/data/data-cassandra/src/main/java/org/apache/james/vacation/cassandra/CassandraNotificationRegistry.java`
#### Snippet
```java
    }

    private boolean isValid(Optional<Integer> waitDelay) {
        return waitDelay.isEmpty() || waitDelay.get() >= 0;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ttl'
in `server/data/data-cassandra/src/main/java/org/apache/james/vacation/cassandra/CassandraNotificationRegistryDAO.java`
#### Snippet
```java
    }

    public Mono<Void> register(AccountId accountId, RecipientId recipientId, Optional<Integer> ttl) {
        return cassandraAsyncExecutor.executeVoid(
            ttl.map(value -> registerWithTTLStatement.bind().setInt(TTL, value))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
    }

    private Mono<Void> checkOverQuotaUponModification(Long sizeDifference, Long spaceUsed, Optional<QuotaSizeLimit> limit) {
        try {
            new SieveQuota(spaceUsed, limit)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `server/data/data-cassandra/src/main/java/org/apache/james/vacation/cassandra/CassandraVacationDAO.java`
#### Snippet
```java
    }

    private <T> RegularInsert applyPatchForField(String field, Optional<T> value, RegularInsert insert) {
        return insert.value(field, literal(value.orElse(null)));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'value'
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    }

    public static <T> AttributeValue<Optional<AttributeValue<T>>> of(Optional<AttributeValue<T>> value) {
        Preconditions.checkNotNull(value, "value should not be null");
        Preconditions.checkArgument(value.map(v -> v instanceof AttributeValue).orElse(true),
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeAllFastViewProjectionItemsTask.java`
#### Snippet
```java
    public static class RecomputeAllFastViewTaskDTO implements TaskDTO {
        private final String type;
        private final Optional<RunningOptionsDTO> runningOptions;

        public RecomputeAllFastViewTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeAllFastViewProjectionItemsTask.java`
#### Snippet
```java

        public RecomputeAllFastViewTaskDTO(@JsonProperty("type") String type,
                                           @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
            this.type = type;
            this.runningOptions = runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'retParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
    public static class Builder {
        private Optional<EnvId> envIdParameter;
        private Optional<Ret> retParameter;
        private final ImmutableMap.Builder<MailAddress, RecipientDsnParameters> rcptParameters;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'envIdParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
    }

    public static Optional<DsnParameters> of(Optional<EnvId> envIdParameter, Optional<Ret> retParameter, ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters) {
        if (envIdParameter.isEmpty() && retParameter.isEmpty() && rcptParameters.isEmpty()) {
            return Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'retParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
    }

    public static Optional<DsnParameters> of(Optional<EnvId> envIdParameter, Optional<Ret> retParameter, ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters) {
        if (envIdParameter.isEmpty() && retParameter.isEmpty() && rcptParameters.isEmpty()) {
            return Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional`>>> used as type for parameter 'notifyAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<AttributeValue<String>> retAttributeValue;

        public DsnAttributeValues(Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue, Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue, Optional<AttributeValue<String>> envIdAttributeValue, Optional<AttributeValue<String>> retAttributeValue) {
            this.notifyAttributeValue = notifyAttributeValue;
            this.orcptAttributeValue = orcptAttributeValue;
```

### OptionalUsedAsFieldOrParameterType
`Optional`>>> used as type for parameter 'orcptAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<AttributeValue<String>> retAttributeValue;

        public DsnAttributeValues(Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue, Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue, Optional<AttributeValue<String>> envIdAttributeValue, Optional<AttributeValue<String>> retAttributeValue) {
            this.notifyAttributeValue = notifyAttributeValue;
            this.orcptAttributeValue = orcptAttributeValue;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'envIdAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<AttributeValue<String>> retAttributeValue;

        public DsnAttributeValues(Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue, Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue, Optional<AttributeValue<String>> envIdAttributeValue, Optional<AttributeValue<String>> retAttributeValue) {
            this.notifyAttributeValue = notifyAttributeValue;
            this.orcptAttributeValue = orcptAttributeValue;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'retAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<AttributeValue<String>> retAttributeValue;

        public DsnAttributeValues(Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue, Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue, Optional<AttributeValue<String>> envIdAttributeValue, Optional<AttributeValue<String>> retAttributeValue) {
            this.notifyAttributeValue = notifyAttributeValue;
            this.orcptAttributeValue = orcptAttributeValue;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'retAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue;
        private final Optional<AttributeValue<String>> envIdAttributeValue;
        private final Optional<AttributeValue<String>> retAttributeValue;

        public DsnAttributeValues(Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue, Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue, Optional<AttributeValue<String>> envIdAttributeValue, Optional<AttributeValue<String>> retAttributeValue) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'retParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java

    private final Optional<EnvId> envIdParameter;
    private final Optional<Ret> retParameter;
    private final ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'orcptParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java

        private final Optional<EnumSet<Notify>> notifyParameter;
        private final Optional<MailAddress> orcptParameter;

        RecipientDsnParameters(Optional<EnumSet<Notify>> notifyParameter, Optional<MailAddress> orcptParameter) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'notifyParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        }

        public static Optional<RecipientDsnParameters> of(Optional<EnumSet<Notify>> notifyParameter, Optional<MailAddress> orcptParameter) {
            if (notifyParameter.isEmpty() && orcptParameter.isEmpty()) {
                return Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'orcptParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        }

        public static Optional<RecipientDsnParameters> of(Optional<EnumSet<Notify>> notifyParameter, Optional<MailAddress> orcptParameter) {
            if (notifyParameter.isEmpty() && orcptParameter.isEmpty()) {
                return Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional`>>> used as type for field 'notifyAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        }

        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue;
        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue;
        private final Optional<AttributeValue<String>> envIdAttributeValue;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'notifyParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        }

        private final Optional<EnumSet<Notify>> notifyParameter;
        private final Optional<MailAddress> orcptParameter;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'notifyParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<MailAddress> orcptParameter;

        RecipientDsnParameters(Optional<EnumSet<Notify>> notifyParameter, Optional<MailAddress> orcptParameter) {
            this.notifyParameter = notifyParameter;
            this.orcptParameter = orcptParameter;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'orcptParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<MailAddress> orcptParameter;

        RecipientDsnParameters(Optional<EnumSet<Notify>> notifyParameter, Optional<MailAddress> orcptParameter) {
            this.notifyParameter = notifyParameter;
            this.orcptParameter = orcptParameter;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'envIdParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java

    public static class Builder {
        private Optional<EnvId> envIdParameter;
        private Optional<Ret> retParameter;
        private final ImmutableMap.Builder<MailAddress, RecipientDsnParameters> rcptParameters;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'envIdAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue;
        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue;
        private final Optional<AttributeValue<String>> envIdAttributeValue;
        private final Optional<AttributeValue<String>> retAttributeValue;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'envIdParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
    private final ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters;

    DsnParameters(Optional<EnvId> envIdParameter, Optional<Ret> retParameter, ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters) {
        this.envIdParameter = envIdParameter;
        this.retParameter = retParameter;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'retParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
    private final ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters;

    DsnParameters(Optional<EnvId> envIdParameter, Optional<Ret> retParameter, ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters) {
        this.envIdParameter = envIdParameter;
        this.retParameter = retParameter;
```

### OptionalUsedAsFieldOrParameterType
`Optional`>>> used as type for field 'orcptAttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java

        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> notifyAttributeValue;
        private final Optional<AttributeValue<Map<String, AttributeValue<String>>>> orcptAttributeValue;
        private final Optional<AttributeValue<String>> envIdAttributeValue;
        private final Optional<AttributeValue<String>> retAttributeValue;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'envIdParameter'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
    }

    private final Optional<EnvId> envIdParameter;
    private final Optional<Ret> retParameter;
    private final ImmutableMap<MailAddress, RecipientDsnParameters> rcptParameters;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messagesPerSecond'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RunningOptionsDTO.java`
#### Snippet
```java
    }

    private final Optional<Integer> messagesPerSecond;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messagesPerSecond'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RunningOptionsDTO.java`
#### Snippet
```java
    @JsonCreator
    public RunningOptionsDTO(
            @JsonProperty("messagesPerSecond") Optional<Integer> messagesPerSecond) {
        this.messagesPerSecond = messagesPerSecond;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'important'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    private final Optional<Collection<String>> targetFolder;
    private final Optional<Boolean> seen;
    private final Optional<Boolean> important;
    private final Optional<Collection<String>> keywords;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'important'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        private ImmutableList.Builder<String> targetFolders = ImmutableList.builder();
        private Optional<Boolean> seen = Optional.empty();
        private Optional<Boolean> important = Optional.empty();
        private Optional<Collection<String>> keywords = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'targetFolder'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    }

    private final Optional<Collection<String>> targetFolder;
    private final Optional<Boolean> seen;
    private final Optional<Boolean> important;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'targetFolder'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    private final Optional<Collection<String>> keywords;

    private StorageDirective(Optional<Collection<String>> targetFolder,
                            Optional<Boolean> seen,
                            Optional<Boolean> important,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'seen'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java

    private StorageDirective(Optional<Collection<String>> targetFolder,
                            Optional<Boolean> seen,
                            Optional<Boolean> important,
                            Optional<Collection<String>> keywords) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'important'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    private StorageDirective(Optional<Collection<String>> targetFolder,
                            Optional<Boolean> seen,
                            Optional<Boolean> important,
                            Optional<Collection<String>> keywords) {
        this.targetFolder = targetFolder;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'keywords'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
                            Optional<Boolean> seen,
                            Optional<Boolean> important,
                            Optional<Collection<String>> keywords) {
        this.targetFolder = targetFolder;
        this.seen = seen;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'keywords'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java

    @SuppressWarnings("unchecked")
    private static Optional<Collection<String>> extractKeywords(Optional<Attribute> keywords) {
        Stream<String> stream = keywords
            .map(Attribute::getValue)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        }

        public Builder targetFolder(Optional<String> value) {
            value.ifPresent(targetFolders::add);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'keywords'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    private final Optional<Boolean> seen;
    private final Optional<Boolean> important;
    private final Optional<Collection<String>> keywords;

    private StorageDirective(Optional<Collection<String>> targetFolder,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'seen'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    public static class Builder {
        private ImmutableList.Builder<String> targetFolders = ImmutableList.builder();
        private Optional<Boolean> seen = Optional.empty();
        private Optional<Boolean> important = Optional.empty();
        private Optional<Collection<String>> keywords = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        private Optional<Collection<String>> keywords = Optional.empty();

        public Builder seen(Optional<Boolean> value) {
            this.seen = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        }

        public Builder important(Optional<Boolean> value) {
            this.important = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'value'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        }

        public Builder keywords(Optional<Collection<String>> value) {
            this.keywords = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'values'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        }

        public Builder targetFolders(Optional<List<String>> values) {
            values.ifPresent(this::targetFolders);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'seen'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java

    private final Optional<Collection<String>> targetFolder;
    private final Optional<Boolean> seen;
    private final Optional<Boolean> important;
    private final Optional<Collection<String>> keywords;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'attr'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
    }

    private static Optional<Boolean> asBooleanOptional(Optional<Attribute> attr) {
        return attr.map(Attribute::getValue)
            .map(AttributeValue::getValue)
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'keywords'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        private Optional<Boolean> seen = Optional.empty();
        private Optional<Boolean> important = Optional.empty();
        private Optional<Collection<String>> keywords = Optional.empty();

        public Builder seen(Optional<Boolean> value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/PopulateEmailQueryViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long failedUserCount;
    private final long failedMessageCount;
    private final Optional<RunningOptionsDTO> runningOptions;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/PopulateEmailQueryViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                       @JsonProperty("failedUserCount") long failedUserCount,
                                                       @JsonProperty("failedMessageCount") long failedMessageCount,
                                                       @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.timestamp = timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptionsDTO'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeUserFastViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                              @JsonProperty("processedMessageCount") long processedMessageCount,
                                                              @JsonProperty("failedMessageCount") long failedMessageCount,
                                                              @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptionsDTO) {
        this.type = type;
        this.timestamp = timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeUserFastViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long processedMessageCount;
    private final long failedMessageCount;
    private final Optional<RunningOptionsDTO> runningOptions;

    private RecomputeUserFastViewTaskAdditionalInformationDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeAllFastViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                     @JsonProperty("failedUserCount") long failedUserCount,
                                                     @JsonProperty("failedMessageCount") long failedMessageCount,
                                                     @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.timestamp = timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeAllFastViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long failedUserCount;
    private final long failedMessageCount;
    private final Optional<RunningOptionsDTO> runningOptions;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/PopulateEmailQueryViewTask.java`
#### Snippet
```java

        public PopulateEmailQueryViewTaskDTO(@JsonProperty("type") String type,
                                             @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
            this.type = type;
            this.runningOptions = runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/PopulateEmailQueryViewTask.java`
#### Snippet
```java
    public static class PopulateEmailQueryViewTaskDTO implements TaskDTO {
        private final String type;
        private final Optional<RunningOptionsDTO> runningOptions;

        public PopulateEmailQueryViewTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeUserFastViewProjectionItemsTask.java`
#### Snippet
```java
                @JsonProperty("type") String type,
                @JsonProperty("username") String username,
                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {

            this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeUserFastViewProjectionItemsTask.java`
#### Snippet
```java
        private final String type;
        private final String username;
        private final Optional<RunningOptionsDTO> runningOptions;

        public RecomputeUserFastViewTaskDTO(
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMailDTO'
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepository.java`
#### Snippet
```java
    }

    private Mono<Void> deleteBlobs(Optional<MailDTO> maybeMailDTO) {
        return Mono.justOrEmpty(maybeMailDTO)
            .flatMap(mailDTO -> Mono.from(mimeMessageStore.delete(blobIds(mailDTO))));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'host'
in `server/container/guice/jmx/src/main/java/org/apache/james/modules/server/JmxConfiguration.java`
#### Snippet
```java

    private final boolean enabled;
    private final Optional<Host> host;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'host'
in `server/container/guice/jmx/src/main/java/org/apache/james/modules/server/JmxConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JmxConfiguration(boolean enabled, Optional<Host> host) {
        Preconditions.checkArgument(disabledOrHasHost(enabled, host), "Specifying a host is compulsory when JMX is enabled");
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'host'
in `server/container/guice/jmx/src/main/java/org/apache/james/modules/server/JmxConfiguration.java`
#### Snippet
```java
    }

    private boolean disabledOrHasHost(boolean enabled, Optional<Host> host) {
        return !enabled || host.isPresent();
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String repositoryPath;
    private final String targetQueue;
    private final Optional<String> targetProcessor;
    private final boolean consume;
    private final long initialCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
        @JsonProperty("repositoryPath") String repositoryPath,
        @JsonProperty("targetQueue") String targetQueue,
        @JsonProperty("targetProcessor") Optional<String> targetProcessor,
        @JsonProperty("consume") Optional<Boolean> consume,
        @JsonProperty("initialCount") long initialCount,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'consume'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
        @JsonProperty("targetQueue") String targetQueue,
        @JsonProperty("targetProcessor") Optional<String> targetProcessor,
        @JsonProperty("consume") Optional<Boolean> consume,
        @JsonProperty("initialCount") long initialCount,
        @JsonProperty("remainingCount") long remainingCount,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
        @JsonProperty("remainingCount") long remainingCount,
        @JsonProperty("timestamp") Instant timestamp,
        @JsonProperty("limit") Optional<Integer> limit,
        @JsonProperty("maxRetries") Optional<Integer> maxRetries) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxRetries'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
        @JsonProperty("timestamp") Instant timestamp,
        @JsonProperty("limit") Optional<Integer> limit,
        @JsonProperty("maxRetries") Optional<Integer> maxRetries) {
        this.type = type;
        this.repositoryPath = repositoryPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long remainingCount;
    private final Instant timestamp;
    private final Optional<Integer> limit;
    private final Optional<Integer> maxRetries;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxRetries'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final Instant timestamp;
    private final Optional<Integer> limit;
    private final Optional<Integer> maxRetries;

    public ReprocessingAllMailsTaskAdditionalInformationDTO(
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'consume'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
                                       @JsonProperty("repositoryPath") String repositoryPath,
                                       @JsonProperty("targetQueue") String targetQueue,
                                       @JsonProperty("consume") Optional<Boolean> consume,
                                       @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                       @JsonProperty("limit") Optional<Integer> limit,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
                                       @JsonProperty("targetQueue") String targetQueue,
                                       @JsonProperty("consume") Optional<Boolean> consume,
                                       @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                       @JsonProperty("limit") Optional<Integer> limit,
                                       @JsonProperty("maxRetries") Optional<Integer> maxRetries) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
                                       @JsonProperty("consume") Optional<Boolean> consume,
                                       @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                       @JsonProperty("limit") Optional<Integer> limit,
                                       @JsonProperty("maxRetries") Optional<Integer> maxRetries) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxRetries'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
                                       @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                       @JsonProperty("limit") Optional<Integer> limit,
                                       @JsonProperty("maxRetries") Optional<Integer> maxRetries) {
        this.type = type;
        this.repositorySize = repositorySize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
    private final String targetQueue;
    private final boolean consume;
    private final Optional<String> targetProcessor;
    private final Optional<Integer> limit;
    private final Optional<Integer> maxRetries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxRetries'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
    private final Optional<String> targetProcessor;
    private final Optional<Integer> limit;
    private final Optional<Integer> maxRetries;

    public ReprocessingAllMailsTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskDTO.java`
#### Snippet
```java
    private final boolean consume;
    private final Optional<String> targetProcessor;
    private final Optional<Integer> limit;
    private final Optional<Integer> maxRetries;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskDTO.java`
#### Snippet
```java
                                      @JsonProperty("targetQueue") String targetQueue,
                                      @JsonProperty("mailKey") String mailKey,
                                      @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                      @JsonProperty("boolean") Optional<Boolean> consume) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'consume'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskDTO.java`
#### Snippet
```java
                                      @JsonProperty("mailKey") String mailKey,
                                      @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                      @JsonProperty("boolean") Optional<Boolean> consume) {
        this.type = type;
        this.repositoryPath = repositoryPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_MAX_RETRIES'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskDTO.java`
#### Snippet
```java
public class ReprocessingOneMailTaskDTO implements TaskDTO {

    public static final Optional<Integer> NO_MAX_RETRIES = Optional.empty();

    public static TaskDTOModule<ReprocessingOneMailTask, ReprocessingOneMailTaskDTO> module(Clock clock, ReprocessingService reprocessingService) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskDTO.java`
#### Snippet
```java
    private final String targetQueue;
    private final String mailKey;
    private final Optional<String> targetProcessor;
    private final boolean consume;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_MAX_RETRIES'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskAdditionalInformationDTO.java`
#### Snippet
```java
public class ReprocessingOneMailTaskAdditionalInformationDTO implements AdditionalInformationDTO {

    public static final Optional<Integer> NO_MAX_RETRIES = Optional.empty();

    public static AdditionalInformationDTOModule<ReprocessingOneMailTask.AdditionalInformation, ReprocessingOneMailTaskAdditionalInformationDTO> module() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'consume'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                           @JsonProperty("targetQueue") String targetQueue,
                                                           @JsonProperty("mailKey") String mailKey,
                                                           @JsonProperty("consume") Optional<Boolean> consume,
                                                           @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                                           @JsonProperty("timestamp") Instant timestamp) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                           @JsonProperty("mailKey") String mailKey,
                                                           @JsonProperty("consume") Optional<Boolean> consume,
                                                           @JsonProperty("targetProcessor") Optional<String> targetProcessor,
                                                           @JsonProperty("timestamp") Instant timestamp) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String targetQueue;
    private final String mailKey;
    private final Optional<String> targetProcessor;
    private final boolean consume;
    private final Instant timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingService.java`
#### Snippet
```java
        private final Limit limit;

        public Configuration(MailQueueName mailQueueName, Optional<String> targetProcessor, Optional<Integer> maxRetries, boolean consume, Limit limit) {
            this.mailQueueName = mailQueueName;
            this.targetProcessor = targetProcessor;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxRetries'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingService.java`
#### Snippet
```java
        private final Limit limit;

        public Configuration(MailQueueName mailQueueName, Optional<String> targetProcessor, Optional<Integer> maxRetries, boolean consume, Limit limit) {
            this.mailQueueName = mailQueueName;
            this.targetProcessor = targetProcessor;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'targetProcessor'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingService.java`
#### Snippet
```java
    public static class Configuration {
        private final MailQueueName mailQueueName;
        private final Optional<String> targetProcessor;
        private final Optional<Integer> maxRetries;
        private final boolean consume;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxRetries'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingService.java`
#### Snippet
```java
        private final MailQueueName mailQueueName;
        private final Optional<String> targetProcessor;
        private final Optional<Integer> maxRetries;
        private final boolean consume;
        private final Limit limit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isCondstoreEnable'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> enableIdle;
        private ImmutableSet<String> disabledCaps;
        private Optional<Boolean> isCondstoreEnable;
        private Optional<Boolean> provisionDefaultMailboxes;
        private Optional<Properties> customProperties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'appendLimit'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
    private final Properties customProperties;

    private ImapConfiguration(Optional<Long> appendLimit, boolean enableIdle, long idleTimeInterval, int concurrentRequests, int maxQueueSize, TimeUnit idleTimeIntervalUnit, ImmutableSet<Capability> disabledCaps, boolean isCondstoreEnable, boolean provisionDefaultMailboxes, Properties customProperties) {
        this.appendLimit = appendLimit;
        this.enableIdle = enableIdle;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'appendLimit'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        }

        public Builder appendLimit(Optional<Integer> appendLimit) {
            this.appendLimit = appendLimit.map(Integer::longValue);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'concurrentRequests'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private Optional<Long> idleTimeInterval;
        private Optional<Long> appendLimit;
        private Optional<Integer> concurrentRequests;
        private Optional<Integer> maxQueueSize;
        private Optional<TimeUnit> idleTimeIntervalUnit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enableIdle'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private Optional<Integer> maxQueueSize;
        private Optional<TimeUnit> idleTimeIntervalUnit;
        private Optional<Boolean> enableIdle;
        private ImmutableSet<String> disabledCaps;
        private Optional<Boolean> isCondstoreEnable;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxQueueSize'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private Optional<Long> appendLimit;
        private Optional<Integer> concurrentRequests;
        private Optional<Integer> maxQueueSize;
        private Optional<TimeUnit> idleTimeIntervalUnit;
        private Optional<Boolean> enableIdle;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'appendLimit'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java

        private Optional<Long> idleTimeInterval;
        private Optional<Long> appendLimit;
        private Optional<Integer> concurrentRequests;
        private Optional<Integer> maxQueueSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'appendLimit'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
    }

    private final Optional<Long> appendLimit;
    private final long idleTimeInterval;
    private final int concurrentRequests;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'idleTimeInterval'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private static final boolean DEFAULT_CONDSTORE_DISABLE = false;

        private Optional<Long> idleTimeInterval;
        private Optional<Long> appendLimit;
        private Optional<Integer> concurrentRequests;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'idleTimeIntervalUnit'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private Optional<Integer> concurrentRequests;
        private Optional<Integer> maxQueueSize;
        private Optional<TimeUnit> idleTimeIntervalUnit;
        private Optional<Boolean> enableIdle;
        private ImmutableSet<String> disabledCaps;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'customProperties'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> isCondstoreEnable;
        private Optional<Boolean> provisionDefaultMailboxes;
        private Optional<Properties> customProperties;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'provisionDefaultMailboxes'
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapConfiguration.java`
#### Snippet
```java
        private ImmutableSet<String> disabledCaps;
        private Optional<Boolean> isCondstoreEnable;
        private Optional<Boolean> provisionDefaultMailboxes;
        private Optional<Properties> customProperties;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'attributes'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<String> remoteAddr;
    private final Optional<Date> lastUpdated;
    private final Optional<ImmutableMap<String, String>> attributes;
    private final Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders;
    private final Optional<HeadersDto> headers;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'error'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<String> sender;
    private final List<String> recipients;
    private final Optional<String> error;
    private final Optional<String> state;
    private final Optional<String> remoteHost;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastUpdated'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<String> remoteHost;
    private final Optional<String> remoteAddr;
    private final Optional<Date> lastUpdated;
    private final Optional<ImmutableMap<String, String>> attributes;
    private final Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders;
    private final Optional<HeadersDto> headers;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final Optional<Long> messageSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageContent'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    }

    private static Optional<String> fetchTextBody(Set<AdditionalField> additionalFields, Optional<MessageContent> messageContent) throws InaccessibleFieldException {
        if (!additionalFields.contains(AdditionalField.TEXT_BODY)) {
            return Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'remoteHost'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<String> error;
    private final Optional<String> state;
    private final Optional<String> remoteHost;
    private final Optional<String> remoteAddr;
    private final Optional<Date> lastUpdated;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'state'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final List<String> recipients;
    private final Optional<String> error;
    private final Optional<String> state;
    private final Optional<String> remoteHost;
    private final Optional<String> remoteAddr;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageSize'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final Optional<Long> messageSize;

    public enum AdditionalField {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<HeadersDto> headers;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final Optional<Long> messageSize;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'remoteAddr'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<String> state;
    private final Optional<String> remoteHost;
    private final Optional<String> remoteAddr;
    private final Optional<Date> lastUpdated;
    private final Optional<ImmutableMap<String, String>> attributes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java

    private final String name;
    private final Optional<String> sender;
    private final List<String> recipients;
    private final Optional<String> error;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'perRecipientsHeaders'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<Date> lastUpdated;
    private final Optional<ImmutableMap<String, String>> attributes;
    private final Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders;
    private final Optional<HeadersDto> headers;
    private final Optional<String> textBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    }

    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'error'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    }

    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'state'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java

    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'remoteHost'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java

    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'remoteAddr'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java

    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lastUpdated'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'attributes'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    public MailDto(String name, Optional<String> sender, List<String> recipients, Optional<String> error,
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'perRecipientsHeaders'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'headers'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
            Optional<String> state, Optional<String> remoteHost, Optional<String> remoteAddr,
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
        this.name = name;
        this.sender = sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
        this.name = name;
        this.sender = sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageSize'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
            Optional<Date> lastUpdated, Optional<ImmutableMap<String, String>> attributes,
            Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders, Optional<HeadersDto> headers,
            Optional<String> textBody, Optional<String> htmlBody, Optional<Long> messageSize) {
        this.name = name;
        this.sender = sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'headers'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    private final Optional<ImmutableMap<String, String>> attributes;
    private final Optional<ImmutableMap<String, HeadersDto>> perRecipientsHeaders;
    private final Optional<HeadersDto> headers;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageContent'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/MailDto.java`
#### Snippet
```java
    }

    private static Optional<String> fetchHtmlBody(Set<AdditionalField> additionalFields, Optional<MessageContent> messageContent) throws InaccessibleFieldException {
        if (!additionalFields.contains(AdditionalField.HTML_BODY)) {
            return Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'parameters'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/IDRequest.java`
#### Snippet
```java
public class IDRequest extends AbstractImapRequest {

    private final Optional<Map<String, String>> parameters;

    public IDRequest(Tag tag, Optional<Map<String, String>> parameters) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'parameters'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/IDRequest.java`
#### Snippet
```java
    private final Optional<Map<String, String>> parameters;

    public IDRequest(Tag tag, Optional<Map<String, String>> parameters) {
        super(tag, ImapConstants.ID_COMMAND);
        this.parameters = parameters;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `protocols/imap/src/main/java/org/apache/james/imap/encode/FetchResponseEncoder.java`
#### Snippet
```java
    }

    private boolean isSaveDateFetched(Optional<Date> saveDate) {
        return saveDate != null;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'statusDataItems'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/ListRequest.java`
#### Snippet
```java
    private final EnumSet<ListSelectOption> selectOptions;
    private final EnumSet<ListReturnOption> returnOptions;
    private final Optional<StatusDataItems> statusDataItems;

    public ListRequest(String referenceName, String mailboxPattern, Tag tag) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'statusDataItems'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/ListRequest.java`
#### Snippet
```java

    public ListRequest(ImapCommand imapCommand, String referenceName, String mailboxPattern, Tag tag,
                       EnumSet<ListSelectOption> selectOptions, EnumSet<ListReturnOption> returnOptions, Optional<StatusDataItems> statusDataItems) {
        super(tag, imapCommand);
        this.baseReferenceName = referenceName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxsize'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/GetMetadataRequest.java`
#### Snippet
```java
        private String mailboxName;
        private Set<MailboxAnnotationKey> keys;
        private Optional<Integer> maxsize;
        private Depth depth;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxsize'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/GetMetadataRequest.java`
#### Snippet
```java
    private final String mailboxName;
    private final Set<MailboxAnnotationKey> keys;
    private final Optional<Integer> maxsize;
    private final Depth depth;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxsize'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/GetMetadataRequest.java`
#### Snippet
```java
        }

        public Builder maxsize(Optional<Integer> maxsize) {
            this.maxsize = maxsize;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'appendLimit'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/MailboxStatusResponse.java`
#### Snippet
```java
    private final MailboxId mailboxId;

    public MailboxStatusResponse(Optional<Long> appendLimit, Long size, Long deleted, Long deletedStorage, Long messages, Long recent, MessageUid uidNext, ModSeq highestModSeq, UidValidity uidValidity, Long unseen, String mailbox, MailboxId mailboxId) {
        this.appendLimit = appendLimit;
        this.size = size;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'appendLimit'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/MailboxStatusResponse.java`
#### Snippet
```java
 */
public class MailboxStatusResponse implements ImapResponseMessage {
    private final Optional<Long> appendLimit;
    private final Long size;
    private final Long deleted;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'previousCharset'
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
public class SearchCommandParser extends AbstractUidCommandParser {
    public static class Context {
        private Optional<Charset> previousCharset = Optional.empty();

        public void setCharset(Charset charset) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/FetchResponse.java`
#### Snippet
```java
    private final ThreadId threadId;

    public FetchResponse(MessageSequenceNumber messageNumber, Flags flags, MessageUid uid, Optional<Date> saveDate, ModSeq modSeq, Date internalDate, Long size, Envelope envelope, Structure body, Structure bodystructure, List<BodyElement> elements, MessageId emailId, ThreadId threadId) {
        this.messageNumber = messageNumber;
        this.flags = flags;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/FetchResponse.java`
#### Snippet
```java
    private final MessageUid uid;
    private final Date internalDate;
    private final Optional<Date> saveDate;
    private final Long size;
    private final List<BodyElement> elements;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'delegateUserName'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractAuthProcessor.java`
#### Snippet
```java
        private final String password;

        public AuthenticationAttempt(Optional<Username> delegateUserName, Username authenticationId, String password) {
            this.delegateUserName = delegateUserName;
            this.authenticationId = authenticationId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'delegateUserName'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractAuthProcessor.java`
#### Snippet
```java

    protected static class AuthenticationAttempt {
        private final Optional<Username> delegateUserName;
        private final Username authenticationId;
        private final String password;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxsize'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/GetMetadataProcessor.java`
#### Snippet
```java
    }

    private List<MailboxAnnotation> filterItemsBySize(List<MailboxAnnotation> mailboxAnnotations, final Optional<Integer> maxsize) {
        Predicate<MailboxAnnotation> lowerPredicate = annotation -> maxsize
            .map(maxSizeInput -> (annotation.size() <= maxSizeInput))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxsize'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/GetMetadataProcessor.java`
#### Snippet
```java
    }

    private Optional<Integer> getMaxSizeValue(List<MailboxAnnotation> mailboxAnnotations, Optional<Integer> maxsize) {
        return maxsize.flatMap(value -> mailboxAnnotations.stream()
            .map(MailboxAnnotation::size)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxsize'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/GetMetadataProcessor.java`
#### Snippet
```java

    private void respond(ImapRequest request, Responder responder, String mailboxName,
                         List<MailboxAnnotation> mailboxAnnotations, Optional<Integer> maxsize, Optional<Integer> maximumOversizedSize) {
        if (maximumOversizedSize.isPresent()) {
            responder.respond(new MetadataResponse(mailboxName, filterItemsBySize(mailboxAnnotations, maxsize)));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maximumOversizedSize'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/GetMetadataProcessor.java`
#### Snippet
```java

    private void respond(ImapRequest request, Responder responder, String mailboxName,
                         List<MailboxAnnotation> mailboxAnnotations, Optional<Integer> maxsize, Optional<Integer> maximumOversizedSize) {
        if (maximumOversizedSize.isPresent()) {
            responder.respond(new MetadataResponse(mailboxName, filterItemsBySize(mailboxAnnotations, maxsize)));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'highestModSeq'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/SearchProcessor.java`
#### Snippet
```java
    }

    private ImapResponseMessage toResponse(SearchRequest request, ImapSession session, Collection<MessageUid> uids, Optional<ModSeq> highestModSeq) {
        LongList ids = asResults(session, request.isUseUids(), uids);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'numberOfOctets'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/PartialFetchBodyElement.java`
#### Snippet
```java
    private final String name;

    public PartialFetchBodyElement(BodyElement delegate, long firstOctet, Optional<Long> numberOfOctets) {
        this.delegate = delegate;
        this.firstOctet = firstOctet;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'numberOfOctets'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/PartialFetchBodyElement.java`
#### Snippet
```java
    private final BodyElement delegate;
    private final long firstOctet;
    private final Optional<Long> numberOfOctets;
    private final String name;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'msn'
in `protocols/imap/src/main/java/org/apache/james/mailbox/NullableMessageSequenceNumber.java`
#### Snippet
```java
    }

    private final Optional<MessageSequenceNumber> msn;

    private NullableMessageSequenceNumber(Optional<MessageSequenceNumber> msn) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'msn'
in `protocols/imap/src/main/java/org/apache/james/mailbox/NullableMessageSequenceNumber.java`
#### Snippet
```java
    private final Optional<MessageSequenceNumber> msn;

    private NullableMessageSequenceNumber(Optional<MessageSequenceNumber> msn) {
        this.msn = msn;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'deletionWindowSize'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTaskDTO.java`
#### Snippet
```java
    private final String bucketName;
    private final int expectedBlobCount;
    private final Optional<Integer> deletionWindowSize;
    private final double associatedProbability;
    private final String type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'deletionWindowSize'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTaskDTO.java`
#### Snippet
```java
    public BlobGCTaskDTO(@JsonProperty("bucketName") String bucketName,
                         @JsonProperty("expectedBlobCount") int expectedBlobCount,
                         @JsonProperty("deletionWindowSize") Optional<Integer> deletionWindowSize,
                         @JsonProperty("associatedProbability") double associatedProbability,
                         @JsonProperty("type") String type) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'deletionWindowSize'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTask.java`
#### Snippet
```java
        private final int expectedBlobCount;
        private final double associatedProbability;
        private Optional<Integer> deletionWindowSize;

        public Builder(BlobStoreDAO blobStoreDAO, GenerationAwareBlobId.Factory generationAwareBlobIdFactory,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'deletionWindowSize'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTask.java`
#### Snippet
```java
        }

        public Builder deletionWindowSize(Optional<Integer> deletionWindowSize) {
            this.deletionWindowSize = deletionWindowSize;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'deletionWindowSize'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                              @JsonProperty("bloomFilterExpectedBlobCount") long bloomFilterExpectedBlobCount,
                                              @JsonProperty("bloomFilterAssociatedProbability") double bloomFilterAssociatedProbability,
                                              @JsonProperty("deletionWindowSize") Optional<Integer> deletionWindowSize) {
        this.type = type;
        this.timestamp = timestamp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'deletionWindowSize'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final long bloomFilterExpectedBlobCount;
    private final double bloomFilterAssociatedProbability;
    private final Optional<Integer> deletionWindowSize;

    public BlobGCTaskAdditionalInformationDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private Content getTextContent(MessageResult messageResult, Optional<MimePath> path) throws MailboxException {
        if (path.isEmpty()) {
            try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private FetchResponse.BodyElement fieldsNot(MessageResult messageResult, String name, Optional<MimePath> path, Collection<String> names) throws MailboxException {
        final Iterator<Header> headers = getHeaders(messageResult, path);
        List<Header> lines = MessageResultUtils.getNotMatching(names, headers);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private FetchResponse.BodyElement mimeHeaders(MessageResult messageResult, String name, Optional<MimePath> path) throws MailboxException {
        final Iterator<Header> headers = getMimeHeaders(messageResult, path);
        List<Header> lines = MessageResultUtils.getAll(headers);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }
    
    private FetchResponse.BodyElement headers(MessageResult messageResult, String name, Optional<MimePath> path) throws MailboxException {
        if (path.isEmpty()) {
            // if its base we can just return the raw headers without parsing
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private FetchResponse.BodyElement fields(MessageResult messageResult, String name, Optional<MimePath> path, Collection<String> names) throws MailboxException {
        final Iterator<Header> headers = getHeaders(messageResult, path);
        List<Header> lines = MessageResultUtils.getMatching(names, headers);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private FetchResponse.BodyElement bodyContent(MessageResult messageResult, String name, SectionType specifier, Optional<MimePath> path, Collection<String> names) throws MailboxException {
        switch (specifier) {
            case CONTENT:
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private Iterator<Header> getHeaders(MessageResult messageResult, Optional<MimePath> path) throws MailboxException {
        if (path.isEmpty()) {
            return messageResult.getHeaders().headers();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private void setSaveDate(Optional<Date> saveDate) {
        this.saveDate = saveDate;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private FetchResponse.BodyElement text(MessageResult messageResult, String name, Optional<MimePath> path) throws MailboxException {
        Content body = Optional.ofNullable(getTextContent(messageResult, path))
            .orElseGet(EmptyContent::new);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private Iterator<Header> getMimeHeaders(MessageResult messageResult, Optional<MimePath> path) throws MailboxException {
        return messageResult.iterateMimeHeaders(path.get());
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private HeaderBodyElement headerBodyElement(MessageResult messageResult, String name, List<Header> lines, Optional<MimePath> path) throws MailboxException {
        final HeaderBodyElement result = new HeaderBodyElement(name, lines);
        // if the size is 2 we had found not header and just want to write the empty line with CLRF terminated
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private Content getContent(MessageResult messageResult, Optional<MimePath> path) throws MailboxException {
        if (path.isEmpty()) {
            try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private void addSaveDate(FetchData fetch, Optional<Date> saveDate) {
        // SAVEDATE response
        if (fetch.contains(Item.SAVEDATE)) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    private Flags flags;
    private Date internalDate;
    private Optional<Date> saveDate;
    private Long size;
    private ModSeq modSeq;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'path'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java
    }

    private FetchResponse.BodyElement content(MessageResult messageResult, String name, Optional<MimePath> path) throws MailboxException {
        Content full =  Optional.ofNullable(getContent(messageResult, path))
            .orElseGet(EmptyContent::new);;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bloomFilterAssociatedProbability'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
                private Optional<Long> errorCount;
                private Optional<Long> bloomFilterExpectedBlobCount;
                private Optional<Double> bloomFilterAssociatedProbability;

                Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'referenceSourceCount'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java

            static class Builder {
                private Optional<Long> referenceSourceCount;
                private Optional<Long> blobCount;
                private Optional<Long> gcedBlobCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'errorCount'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
                private Optional<Long> blobCount;
                private Optional<Long> gcedBlobCount;
                private Optional<Long> errorCount;
                private Optional<Long> bloomFilterExpectedBlobCount;
                private Optional<Double> bloomFilterAssociatedProbability;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'gcedBlobCount'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
                private Optional<Long> referenceSourceCount;
                private Optional<Long> blobCount;
                private Optional<Long> gcedBlobCount;
                private Optional<Long> errorCount;
                private Optional<Long> bloomFilterExpectedBlobCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'blobCount'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
            static class Builder {
                private Optional<Long> referenceSourceCount;
                private Optional<Long> blobCount;
                private Optional<Long> gcedBlobCount;
                private Optional<Long> errorCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bloomFilterExpectedBlobCount'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
                private Optional<Long> gcedBlobCount;
                private Optional<Long> errorCount;
                private Optional<Long> bloomFilterExpectedBlobCount;
                private Optional<Double> bloomFilterAssociatedProbability;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/QuotaDTO.java`
#### Snippet
```java

    private final long used;
    private final Optional<Long> limit;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/QuotaDTO.java`
#### Snippet
```java
    @JsonCreator
    private QuotaDTO(@JsonProperty("used") long used,
                     @JsonProperty("limit") Optional<Long> limit) {
        this.used = used;
        this.limit = limit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/container/core/src/main/java/org/apache/james/server/core/configuration/Configuration.java`
#### Snippet
```java
        public static class Builder {
            private Optional<String> rootDirectory;
            private Optional<ConfigurationPath> configurationPath;

            private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/container/core/src/main/java/org/apache/james/server/core/configuration/Configuration.java`
#### Snippet
```java
    class Basic implements Configuration {
        public static class Builder {
            private Optional<String> rootDirectory;
            private Optional<ConfigurationPath> configurationPath;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'recentness'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java

    private final HistoryEvolution.HistoryChangeType change;
    private final Optional<HistoryEvolution.HighestThresholdRecentness> recentness;
    private final Optional<Double> threshold;
    private final Optional<Long> instant;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'instant'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
    private final Optional<HistoryEvolution.HighestThresholdRecentness> recentness;
    private final Optional<Double> threshold;
    private final Optional<Long> instant;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'threshold'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
    private final HistoryEvolution.HistoryChangeType change;
    private final Optional<HistoryEvolution.HighestThresholdRecentness> recentness;
    private final Optional<Double> threshold;
    private final Optional<Long> instant;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'recentness'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
    public HistoryEvolutionDTO(
            @JsonProperty("changeType") HistoryEvolution.HistoryChangeType change,
            @JsonProperty("recentness") Optional<HistoryEvolution.HighestThresholdRecentness> recentness,
            @JsonProperty("threshold") Optional<Double> threshold,
            @JsonProperty("instant") Optional<Long> instant) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'threshold'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
            @JsonProperty("changeType") HistoryEvolution.HistoryChangeType change,
            @JsonProperty("recentness") Optional<HistoryEvolution.HighestThresholdRecentness> recentness,
            @JsonProperty("threshold") Optional<Double> threshold,
            @JsonProperty("instant") Optional<Long> instant) {
        this.change = change;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'instant'
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
            @JsonProperty("recentness") Optional<HistoryEvolution.HighestThresholdRecentness> recentness,
            @JsonProperty("threshold") Optional<Double> threshold,
            @JsonProperty("instant") Optional<Long> instant) {
        this.change = change;
        this.recentness = recentness;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'state'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
        private Optional<String> state;
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'remoteHost'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Map<AttributeName, Attribute> attributes;
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
        private PerRecipientHeaders perRecipientHeaders;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'errorMessage'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Optional<MailAddress> sender;
        private Optional<String> state;
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sender'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
        private Optional<String> state;
        private Optional<String> errorMessage;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sender'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        }

        public Builder sender(Optional<MailAddress> sender) {
            this.sender = sender;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'remoteAddr'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
        private PerRecipientHeaders perRecipientHeaders;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastUpdated'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Optional<String> state;
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
        private Optional<String> remoteAddr;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mimeMessage'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java

        private final String name;
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keystore'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java

    private final boolean enabled;
    private final Optional<String> keystore;
    private final Optional<String> privateKey;
    private final Optional<String> certificates;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'keystore'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JMAPDraftConfiguration(boolean enabled, Optional<String> keystore, Optional<String> privateKey, Optional<String> certificates, String keystoreType,
                           Optional<String> secret, List<String> jwtPublicKeyPem, Optional<List<String>> authenticationStrategies) {
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'privateKey'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JMAPDraftConfiguration(boolean enabled, Optional<String> keystore, Optional<String> privateKey, Optional<String> certificates, String keystoreType,
                           Optional<String> secret, List<String> jwtPublicKeyPem, Optional<List<String>> authenticationStrategies) {
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'certificates'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JMAPDraftConfiguration(boolean enabled, Optional<String> keystore, Optional<String> privateKey, Optional<String> certificates, String keystoreType,
                           Optional<String> secret, List<String> jwtPublicKeyPem, Optional<List<String>> authenticationStrategies) {
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'secret'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    JMAPDraftConfiguration(boolean enabled, Optional<String> keystore, Optional<String> privateKey, Optional<String> certificates, String keystoreType,
                           Optional<String> secret, List<String> jwtPublicKeyPem, Optional<List<String>> authenticationStrategies) {
        this.enabled = enabled;
        this.keystore = keystore;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'authenticationStrategies'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    JMAPDraftConfiguration(boolean enabled, Optional<String> keystore, Optional<String> privateKey, Optional<String> certificates, String keystoreType,
                           Optional<String> secret, List<String> jwtPublicKeyPem, Optional<List<String>> authenticationStrategies) {
        this.enabled = enabled;
        this.keystore = keystore;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'authenticationStrategies'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        }

        public Builder authenticationStrategies(Optional<List<String>> authenticationStrategies) {
            this.authenticationStrategies = authenticationStrategies;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'certificates'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        private Optional<String> keystoreType = Optional.empty();
        private Optional<String> privateKey = Optional.empty();
        private Optional<String> certificates = Optional.empty();
        private Optional<String> secret = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'secret'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    private final Optional<String> certificates;
    private final String keystoreType;
    private final Optional<String> secret;
    private final List<String> jwtPublicKeyPem;
    private final Optional<List<String>> authenticationStrategies;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'certificates'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    private final Optional<String> keystore;
    private final Optional<String> privateKey;
    private final Optional<String> certificates;
    private final String keystoreType;
    private final Optional<String> secret;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'authenticationStrategies'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> enabled = Optional.empty();
        private ImmutableList.Builder<String> jwtPublicKeyPem = ImmutableList.builder();
        private Optional<List<String>> authenticationStrategies = Optional.empty();

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keystoreType'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> keystore = Optional.empty();
        private Optional<String> keystoreType = Optional.empty();
        private Optional<String> privateKey = Optional.empty();
        private Optional<String> certificates = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'privateKey'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        private Optional<String> keystore = Optional.empty();
        private Optional<String> keystoreType = Optional.empty();
        private Optional<String> privateKey = Optional.empty();
        private Optional<String> certificates = Optional.empty();
        private Optional<String> secret = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keystore'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<String> keystore = Optional.empty();
        private Optional<String> keystoreType = Optional.empty();
        private Optional<String> privateKey = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'secret'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        private Optional<String> privateKey = Optional.empty();
        private Optional<String> certificates = Optional.empty();
        private Optional<String> secret = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
        private ImmutableList.Builder<String> jwtPublicKeyPem = ImmutableList.builder();
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'authenticationStrategies'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    private final Optional<String> secret;
    private final List<String> jwtPublicKeyPem;
    private final Optional<List<String>> authenticationStrategies;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'privateKey'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
    private final boolean enabled;
    private final Optional<String> keystore;
    private final Optional<String> privateKey;
    private final Optional<String> certificates;
    private final String keystoreType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enabled'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        private Optional<String> certificates = Optional.empty();
        private Optional<String> secret = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
        private ImmutableList.Builder<String> jwtPublicKeyPem = ImmutableList.builder();
        private Optional<List<String>> authenticationStrategies = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Header.java`
#### Snippet
```java
        
        private String name;
        private Optional<String> value;

        public Builder header(List<String> header) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Header.java`
#### Snippet
```java

    private final String name;
    private final Optional<String> value;

    private Header(String name, Optional<String> value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Header.java`
#### Snippet
```java
    private final Optional<String> value;

    private Header(String name, Optional<String> value) {
        this.name = name;
        this.value = value;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalName'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/http/DownloadRoutes.java`
#### Snippet
```java
    }

    private Mono<Void> downloadBlob(Optional<String> optionalName, HttpServerResponse response, long blobSize, ContentType blobContentType, InputStream stream) {
        return addContentDispositionHeader(optionalName, response)
            .header("Content-Length", String.valueOf(blobSize))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'optionalName'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/http/DownloadRoutes.java`
#### Snippet
```java
    }

    private HttpServerResponse addContentDispositionHeader(Optional<String> optionalName, HttpServerResponse resp) {
        return optionalName.map(name -> addContentDispositionHeaderRegardingEncoding(name, resp))
            .orElse(resp);
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'ids'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java

    private final Optional<String> accountId;
    private final Optional<ImmutableList<MailboxId>> ids;
    private final Optional<ImmutableSet<MailboxProperty>> properties;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java
    private final Optional<ImmutableSet<MailboxProperty>> properties;

    private GetMailboxesRequest(Optional<String> accountId, Optional<ImmutableList<MailboxId>> ids, Optional<ImmutableSet<MailboxProperty>> properties) {
        this.accountId = accountId;
        this.ids = ids;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'ids'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java
    private final Optional<ImmutableSet<MailboxProperty>> properties;

    private GetMailboxesRequest(Optional<String> accountId, Optional<ImmutableList<MailboxId>> ids, Optional<ImmutableSet<MailboxProperty>> properties) {
        this.accountId = accountId;
        this.ids = ids;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'notFound'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesResponse.java`
#### Snippet
```java
    private final String state;
    private final List<Mailbox> list;
    private final Optional<List<String>> notFound;

    private GetMailboxesResponse(String accountId, String state, List<Mailbox> list, Optional<List<String>> notFound) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'notFound'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesResponse.java`
#### Snippet
```java
    private final Optional<List<String>> notFound;

    private GetMailboxesResponse(String accountId, String state, List<Mailbox> list, Optional<List<String>> notFound) {
        this.accountId = accountId;
        this.state = state;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java
    private final Optional<ImmutableSet<MailboxProperty>> properties;

    private GetMailboxesRequest(Optional<String> accountId, Optional<ImmutableList<MailboxId>> ids, Optional<ImmutableSet<MailboxProperty>> properties) {
        this.accountId = accountId;
        this.ids = ids;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java
    private final Optional<String> accountId;
    private final Optional<ImmutableList<MailboxId>> ids;
    private final Optional<ImmutableSet<MailboxProperty>> properties;

    private GetMailboxesRequest(Optional<String> accountId, Optional<ImmutableList<MailboxId>> ids, Optional<ImmutableSet<MailboxProperty>> properties) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java

        private String accountId;
        private Optional<ImmutableSet<MailboxProperty>> properties;
        private Optional<ImmutableList<MailboxId>> ids;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'ids'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java
        private String accountId;
        private Optional<ImmutableSet<MailboxProperty>> properties;
        private Optional<ImmutableList<MailboxId>> ids;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMailboxesRequest.java`
#### Snippet
```java
    }

    private final Optional<String> accountId;
    private final Optional<ImmutableList<MailboxId>> ids;
    private final Optional<ImmutableSet<MailboxProperty>> properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'collapseThreads'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Filter> filter;
    private final List<String> sort;
    private final Optional<Boolean> collapseThreads;
    private final Optional<Number> position;
    private final Optional<String> anchor;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'filter'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java

    private final Optional<String> accountId;
    private final Optional<Filter> filter;
    private final List<String> sort;
    private final Optional<Boolean> collapseThreads;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    }

    private final Optional<String> accountId;
    private final Optional<Filter> filter;
    private final List<String> sort;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'position'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
        private final ImmutableList.Builder<String> sort;
        private Boolean collapseThreads;
        private Optional<Number> position;
        private String anchor;
        private Number anchorOffset;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<String> anchor;
    private final Optional<Number> anchorOffset;
    private final Optional<Number> limit;
    private final Optional<Boolean> fetchThreads;
    private final Optional<Boolean> fetchMessages;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchSearchSnippets'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Boolean> fetchMessages;
    private final List<String> fetchMessageProperties;
    private final Optional<Boolean> fetchSearchSnippets;

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Boolean> fetchSearchSnippets;

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'filter'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Boolean> fetchSearchSnippets;

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'collapseThreads'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Boolean> fetchSearchSnippets;

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'position'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'anchor'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'anchorOffset'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fetchThreads'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java

    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fetchMessages'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

        this.accountId = accountId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fetchSearchSnippets'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    @VisibleForTesting GetMessageListRequest(Optional<String> accountId, Optional<Filter> filter, List<String> sort, Optional<Boolean> collapseThreads,
            Optional<Number> position, Optional<String> anchor, Optional<Number> anchorOffset, Optional<Number> limit, Optional<Boolean> fetchThreads,
            Optional<Boolean> fetchMessages, List<String> fetchMessageProperties, Optional<Boolean> fetchSearchSnippets) {

        this.accountId = accountId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'anchorOffset'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Number> position;
    private final Optional<String> anchor;
    private final Optional<Number> anchorOffset;
    private final Optional<Number> limit;
    private final Optional<Boolean> fetchThreads;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchMessages'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Number> limit;
    private final Optional<Boolean> fetchThreads;
    private final Optional<Boolean> fetchMessages;
    private final List<String> fetchMessageProperties;
    private final Optional<Boolean> fetchSearchSnippets;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'anchor'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Boolean> collapseThreads;
    private final Optional<Number> position;
    private final Optional<String> anchor;
    private final Optional<Number> anchorOffset;
    private final Optional<Number> limit;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchThreads'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final Optional<Number> anchorOffset;
    private final Optional<Number> limit;
    private final Optional<Boolean> fetchThreads;
    private final Optional<Boolean> fetchMessages;
    private final List<String> fetchMessageProperties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'position'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListRequest.java`
#### Snippet
```java
    private final List<String> sort;
    private final Optional<Boolean> collapseThreads;
    private final Optional<Number> position;
    private final Optional<String> anchor;
    private final Optional<Number> anchorOffset;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'updated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java
    }

    private final Optional<List<String>> updated;
    private final Optional<Map<String, SetError>> notUpdated;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'notUpdatedId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java

        private Optional<String> updatedId = Optional.empty();
        private Optional<String> notUpdatedId = Optional.empty();
        private Optional<SetError> setError = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'updatedId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java
    public static class Builder {

        private Optional<String> updatedId = Optional.empty();
        private Optional<String> notUpdatedId = Optional.empty();
        private Optional<SetError> setError = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'notUpdated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java

    private final Optional<List<String>> updated;
    private final Optional<Map<String, SetError>> notUpdated;

    private SetVacationResponse(Optional<List<String>> updated, Optional<Map<String, SetError>> notUpdated) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'updated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java
    private final Optional<Map<String, SetError>> notUpdated;

    private SetVacationResponse(Optional<List<String>> updated, Optional<Map<String, SetError>> notUpdated) {
        this.updated = updated;
        this.notUpdated = notUpdated;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'notUpdated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java
    private final Optional<Map<String, SetError>> notUpdated;

    private SetVacationResponse(Optional<List<String>> updated, Optional<Map<String, SetError>> notUpdated) {
        this.updated = updated;
        this.notUpdated = notUpdated;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'setError'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java
        private Optional<String> updatedId = Optional.empty();
        private Optional<String> notUpdatedId = Optional.empty();
        private Optional<SetError> setError = Optional.empty();

        public Builder updatedId(String updatedId) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'total'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListResponse.java`
#### Snippet
```java
        private boolean canCalculateUpdates;
        private Optional<Number> position;
        private Optional<Number> total;
        private final ImmutableList.Builder<String> threadIds;
        private final ImmutableList.Builder<MessageId> messageIds;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'position'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListResponse.java`
#### Snippet
```java
        private String state;
        private boolean canCalculateUpdates;
        private Optional<Number> position;
        private Optional<Number> total;
        private final ImmutableList.Builder<String> threadIds;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxIds'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java

    @VisibleForTesting
    UpdateMessagePatch(Optional<List<String>> mailboxIds,
                       Optional<Keywords> keywords,
                       Optional<OldKeyword> oldKeywords,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'keywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
    @VisibleForTesting
    UpdateMessagePatch(Optional<List<String>> mailboxIds,
                       Optional<Keywords> keywords,
                       Optional<OldKeyword> oldKeywords,
                       ImmutableList<ValidationResult> validationResults) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'oldKeywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
    UpdateMessagePatch(Optional<List<String>> mailboxIds,
                       Optional<Keywords> keywords,
                       Optional<OldKeyword> oldKeywords,
                       ImmutableList<ValidationResult> validationResults) {

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'mailboxIds'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
    }

    private final Optional<List<String>> mailboxIds;
    private final Optional<Keywords> keywords;
    private final Optional<OldKeyword> oldKeywords;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java

    private final Optional<List<String>> mailboxIds;
    private final Optional<Keywords> keywords;
    private final Optional<OldKeyword> oldKeywords;
    private final ImmutableList<ValidationResult> validationErrors;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'keywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
        private Optional<List<String>> mailboxIds = Optional.empty();
        private OldKeyword.Builder oldKeyworkBuilder = OldKeyword.builder();
        private Optional<Map<String, Boolean>> keywords = Optional.empty();
        private Set<ValidationResult> validationResult = Sets.newHashSet();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'oldKeywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
    private final Optional<List<String>> mailboxIds;
    private final Optional<Keywords> keywords;
    private final Optional<OldKeyword> oldKeywords;
    private final ImmutableList<ValidationResult> validationErrors;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'mailboxIds'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
    @JsonPOJOBuilder(withPrefix = "")
    public static class Builder {
        private Optional<List<String>> mailboxIds = Optional.empty();
        private OldKeyword.Builder oldKeyworkBuilder = OldKeyword.builder();
        private Optional<Map<String, Boolean>> keywords = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cid'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final Optional<String> name;
    private final Number size;
    private final Optional<String> cid;
    private final boolean isInline;
    private final Optional<Number> width;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'width'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final Optional<String> cid;
    private final boolean isInline;
    private final Optional<Number> width;
    private final Optional<Number> height;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
        }

        public Builder name(Optional<String> name) {
            this.name = name.orElse(null);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final Optional<Number> height;

    @VisibleForTesting Attachment(BlobId blobId, ContentType type, Optional<String> name, Number size, Optional<String> cid, boolean isInline, Optional<Number> width, Optional<Number> height) {
        this.blobId = blobId;
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final Optional<Number> height;

    @VisibleForTesting Attachment(BlobId blobId, ContentType type, Optional<String> name, Number size, Optional<String> cid, boolean isInline, Optional<Number> width, Optional<Number> height) {
        this.blobId = blobId;
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'width'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final Optional<Number> height;

    @VisibleForTesting Attachment(BlobId blobId, ContentType type, Optional<String> name, Number size, Optional<String> cid, boolean isInline, Optional<Number> width, Optional<Number> height) {
        this.blobId = blobId;
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'height'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final Optional<Number> height;

    @VisibleForTesting Attachment(BlobId blobId, ContentType type, Optional<String> name, Number size, Optional<String> cid, boolean isInline, Optional<Number> width, Optional<Number> height) {
        this.blobId = blobId;
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'height'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final boolean isInline;
    private final Optional<Number> width;
    private final Optional<Number> height;

    @VisibleForTesting Attachment(BlobId blobId, ContentType type, Optional<String> name, Number size, Optional<String> cid, boolean isInline, Optional<Number> width, Optional<Number> height) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cid'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
        }

        public Builder cid(Optional<String> cid) {
            this.cid = cid.orElse(null);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Attachment.java`
#### Snippet
```java
    private final BlobId blobId;
    private final ContentType type;
    private final Optional<String> name;
    private final Number size;
    private final Optional<String> cid;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isActivated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java

    private VacationResponse(ValuePatch<String> id, ValuePatch<Boolean> isEnabled, ValuePatch<ZonedDateTime> fromDate, ValuePatch<ZonedDateTime> toDate,
                             ValuePatch<String> textBody, ValuePatch<String> subject, ValuePatch<String> htmlBody, Optional<Boolean> isActivated) {
        this.id = id;
        this.isEnabled = isEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isActivated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java
        private ValuePatch<String> textBody = ValuePatch.keep();
        private ValuePatch<String> htmlBody = ValuePatch.keep();
        private Optional<Boolean> isActivated = Optional.empty();

        public Builder id(String id) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'toDate'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java

        @JsonDeserialize(using = OptionalZonedDateTimeDeserializer.class)
        public Builder toDate(Optional<ZonedDateTime> toDate) {
            this.toDate = ValuePatch.ofOptional(toDate);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java
        }

        public Builder textBody(Optional<String> textBody) {
            this.textBody = ValuePatch.ofOptional(textBody);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isActivated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java
    private final ValuePatch<String> textBody;
    private final ValuePatch<String> htmlBody;
    private final Optional<Boolean> isActivated;

    private VacationResponse(ValuePatch<String> id, ValuePatch<Boolean> isEnabled, ValuePatch<ZonedDateTime> fromDate, ValuePatch<ZonedDateTime> toDate,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromDate'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java

        @JsonDeserialize(using = OptionalZonedDateTimeDeserializer.class)
        public Builder fromDate(Optional<ZonedDateTime> fromDate) {
            this.fromDate = ValuePatch.ofOptional(fromDate);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'activated'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java

        @JsonProperty("isActivated")
        public Builder activated(Optional<Boolean> activated) {
            Preconditions.checkNotNull(activated);
            this.isActivated = activated;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java
        }

        public Builder htmlBody(Optional<String> htmlBody) {
            this.htmlBody = ValuePatch.ofOptional(htmlBody);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/VacationResponse.java`
#### Snippet
```java
        }

        public Builder subject(Optional<String> subject) {
            this.subject = ValuePatch.ofOptional(subject);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessagesRequest.java`
#### Snippet
```java
    }
    
    private final Optional<String> accountId;
    private final ImmutableList<MessageId> ids;
    private final MessageProperties properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessagesRequest.java`
#### Snippet
```java
    private final MessageProperties properties;

    public GetMessagesRequest(Optional<String> accountId, ImmutableList<MessageId> ids, MessageProperties properties) {
        this.accountId = accountId;
        this.ids = ids;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessagesRequest.java`
#### Snippet
```java
    public static class Builder {
        
        private Optional<String> accountId;
        private final ImmutableList.Builder<MessageId> ids;
        private Optional<ImmutableSet<String>> properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessagesRequest.java`
#### Snippet
```java
        private Optional<String> accountId;
        private final ImmutableList.Builder<MessageId> ids;
        private Optional<ImmutableSet<String>> properties;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'expires'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UploadResponse.java`
#### Snippet
```java
    private final String type;
    private final Number size;
    private final Optional<ZonedDateTime> expires;

    @VisibleForTesting UploadResponse(Optional<String> accountId, String blobId, String type, Number size, Optional<ZonedDateTime> expires) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UploadResponse.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> expires;

    @VisibleForTesting UploadResponse(Optional<String> accountId, String blobId, String type, Number size, Optional<ZonedDateTime> expires) {
        this.accountId = accountId;
        this.blobId = blobId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'expires'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UploadResponse.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> expires;

    @VisibleForTesting UploadResponse(Optional<String> accountId, String blobId, String type, Number size, Optional<ZonedDateTime> expires) {
        this.accountId = accountId;
        this.blobId = blobId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UploadResponse.java`
#### Snippet
```java
    }

    private final Optional<String> accountId;
    private final String blobId;
    private final String type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'preview'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/PreviewDTO.java`
#### Snippet
```java
    public static final PreviewDTO NO_BODY = PreviewDTO.of(NO_BODY_AS_STRING);

    public static PreviewDTO from(Optional<Preview> preview) {
        return preview.map(Preview::getValue)
            .map(PreviewDTO::of)
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetError.java`
#### Snippet
```java
    private final Type type;
    private final Optional<String> description;
    private final Optional<ImmutableSet<MessageProperty>> properties;


```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'description'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetError.java`
#### Snippet
```java


    @VisibleForTesting SetError(Type type, Optional<String> description, Optional<ImmutableSet<MessageProperty>> properties) {
        this.type = type;
        this.description = description;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetError.java`
#### Snippet
```java


    @VisibleForTesting SetError(Type type, Optional<String> description, Optional<ImmutableSet<MessageProperty>> properties) {
        this.type = type;
        this.description = description;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'description'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetError.java`
#### Snippet
```java

    private final Type type;
    private final Optional<String> description;
    private final Optional<ImmutableSet<MessageProperty>> properties;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetError.java`
#### Snippet
```java
        private Type type;
        private String description;
        private Optional<ImmutableSet<MessageProperty>> properties = Optional.empty();

        protected Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'max'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Quotas.java`
#### Snippet
```java
        private final Optional<Number> max;
        
        public Value(Number used, Optional<Number> max) {
            this.used = used;
            this.max = max;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'max'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Quotas.java`
#### Snippet
```java
    public static class Value<T extends QuotaLimitValue<T>, U extends QuotaUsageValue<U, T>> {
        private final Number used;
        private final Optional<Number> max;
        
        public Value(Number used, Optional<Number> max) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'ifInState'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java

    private final Optional<String> accountId;
    private final Optional<String> ifInState;
    private final List<CreationMessageEntry> create;
    private final List<MDNCreationEntry> sendMDN;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
    private final List<MessageId> destroy;

    @VisibleForTesting SetMessagesRequest(Optional<String> accountId, Optional<String> ifInState,
                                          List<CreationMessageEntry> create, List<MDNCreationEntry> sendMDN,
                                          Map<MessageId, Function<UpdateMessagePatchConverter, UpdateMessagePatch>> update,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'ifInState'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
    private final List<MessageId> destroy;

    @VisibleForTesting SetMessagesRequest(Optional<String> accountId, Optional<String> ifInState,
                                          List<CreationMessageEntry> create, List<MDNCreationEntry> sendMDN,
                                          Map<MessageId, Function<UpdateMessagePatchConverter, UpdateMessagePatch>> update,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'accountId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
    }

    private final Optional<String> accountId;
    private final Optional<String> ifInState;
    private final List<CreationMessageEntry> create;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java
    private final Optional<String> email;

    @VisibleForTesting Emailer(Optional<String> name, Optional<String> email) {
        this.name = name;
        this.email = email;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java
    private final Optional<String> email;

    @VisibleForTesting Emailer(Optional<String> name, Optional<String> email) {
        this.name = name;
        this.email = email;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'allowInvalid'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java
        private static final boolean DEFAULT_DISABLE = false;

        private Optional<Boolean> allowInvalid = Optional.empty();
        private Optional<String> name = Optional.empty();
        private Optional<String> email = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java

        @JsonProperty("name")
        public Builder name(Optional<String> name) {
            this.name = name;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java

        @JsonProperty("email")
        public Builder email(Optional<String> email) {
            this.email = email;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java

        private Optional<Boolean> allowInvalid = Optional.empty();
        private Optional<String> name = Optional.empty();
        private Optional<String> email = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java

    private final Optional<String> name;
    private final Optional<String> email;

    @VisibleForTesting Emailer(Optional<String> name, Optional<String> email) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java
        private Optional<Boolean> allowInvalid = Optional.empty();
        private Optional<String> name = Optional.empty();
        private Optional<String> email = Optional.empty();

        @JsonProperty("name")
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java
        }

        private Optional<String> replaceIfNeeded(Optional<String> value) {
            return value.filter(Predicate.not(Strings::isNullOrEmpty));
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Emailer.java`
#### Snippet
```java
    }

    private final Optional<String> name;
    private final Optional<String> email;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/SortOrder.java`
#### Snippet
```java
    }

    public static SortOrder getSortOrder(Optional<Role> role) {
        return role
                .map(SortOrder::getDefaultSortOrder)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'owner'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxNamespace.java`
#### Snippet
```java

    private final Type type;
    private final Optional<Username> owner;

    private MailboxNamespace(Type type, Optional<Username> owner) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'owner'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxNamespace.java`
#### Snippet
```java
    private final Optional<Username> owner;

    private MailboxNamespace(Type type, Optional<Username> owner) {
        this.type = type;
        this.owner = owner;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailboxMetaData'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java
        private MailboxSession session;
        private Optional<MailboxId> id = Optional.empty();
        private Optional<MailboxMetaData> mailboxMetaData = Optional.empty();
        private Optional<Map<MailboxPath, MailboxMetaData>> userMailboxesMetadata = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'userMailboxesMetadata'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java

    @VisibleForTesting
    Mono<Optional<MailboxId>> getParentIdFromMailboxPath(MailboxPath mailboxPath, Optional<Map<MailboxPath, MailboxMetaData>> userMailboxesMetadata,
                                                   MailboxSession mailboxSession) {
        List<MailboxPath> levels = mailboxPath.getHierarchyLevels(mailboxSession.getPathDelimiter());
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'userMailboxesMetadata'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java
        }

        public MailboxBuilder usingPreloadedMailboxesMetadata(Optional<Map<MailboxPath, MailboxMetaData>> userMailboxesMetadata) {
            this.userMailboxesMetadata = userMailboxesMetadata;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'id'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java
        private QuotaLoader quotaLoader;
        private MailboxSession session;
        private Optional<MailboxId> id = Optional.empty();
        private Optional<MailboxMetaData> mailboxMetaData = Optional.empty();
        private Optional<Map<MailboxPath, MailboxMetaData>> userMailboxesMetadata = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'userMailboxesMetadata'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java
        private Optional<MailboxId> id = Optional.empty();
        private Optional<MailboxMetaData> mailboxMetaData = Optional.empty();
        private Optional<Map<MailboxPath, MailboxMetaData>> userMailboxesMetadata = Optional.empty();

        private MailboxBuilder(MailboxFactory mailboxFactory, QuotaLoader quotaLoader) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'userMailboxesMetadata'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java
                         MailboxCounters.Sanitized mailboxCounters,
                         MailboxACL resolvedAcl,
                         Optional<Map<MailboxPath, MailboxMetaData>> userMailboxesMetadata,
                         QuotaLoader quotaLoader,
                         MailboxSession mailboxSession) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

    private final Optional<String> name;
    private final Optional<MailboxId> parentId;
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sortOrder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
    private final Optional<MailboxId> parentId;
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;
    private final Optional<Rights> sharedWith;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
    private final Optional<String> name;
    private final Optional<MailboxId> parentId;
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;
    private final Optional<Rights> sharedWith;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
    }

    private final Optional<String> name;
    private final Optional<MailboxId> parentId;
    private final Optional<Role> role;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sharedWith'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
        private Optional<Rights> sharedWith;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sortOrder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
        private Optional<Rights> sharedWith;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sharedWith'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;
    private final Optional<Rights> sharedWith;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
    public static class Builder {

        private Optional<String> name;
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

        private Optional<String> name;
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxUpdateRequest(Optional<String> name, Optional<MailboxId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder, Optional<Rights> sharedWith) {

        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxUpdateRequest(Optional<String> name, Optional<MailboxId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder, Optional<Rights> sharedWith) {

        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxUpdateRequest(Optional<String> name, Optional<MailboxId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder, Optional<Rights> sharedWith) {

        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sortOrder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxUpdateRequest(Optional<String> name, Optional<MailboxId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder, Optional<Rights> sharedWith) {

        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sharedWith'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxUpdateRequest(Optional<String> name, Optional<MailboxId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder, Optional<Rights> sharedWith) {

        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
        private Optional<String> name;
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
        private Optional<Rights> sharedWith;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'messageProperties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MessageProperties.java`
#### Snippet
```java
    public static final ImmutableSet<MessageProperty> MANDATORY_PROPERTIES = ImmutableSet.of(MessageProperty.id);

    private final Optional<ImmutableSet<MessageProperty>> messageProperties;
    private final Optional<ImmutableSet<HeaderProperty>> headersProperties;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MessageProperties.java`
#### Snippet
```java
    private final Optional<ImmutableSet<HeaderProperty>> headersProperties;

    public MessageProperties(Optional<ImmutableSet<String>> properties) {
        this.messageProperties = properties.map(this::toMessageProperties);
        this.headersProperties = properties.map(this::toHeadersProperties);
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'headersProperties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MessageProperties.java`
#### Snippet
```java

    private final Optional<ImmutableSet<MessageProperty>> messageProperties;
    private final Optional<ImmutableSet<HeaderProperty>> headersProperties;

    public MessageProperties(Optional<ImmutableSet<String>> properties) {
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageProperties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MessageProperties.java`
#### Snippet
```java
    }

    private MessageProperties(Optional<ImmutableSet<MessageProperty>> messageProperties,
                              Optional<ImmutableSet<HeaderProperty>> headersProperties) {
        this.messageProperties = messageProperties;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'headersProperties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MessageProperties.java`
#### Snippet
```java

    private MessageProperties(Optional<ImmutableSet<MessageProperty>> messageProperties,
                              Optional<ImmutableSet<HeaderProperty>> headersProperties) {
        this.messageProperties = messageProperties;
        this.headersProperties = headersProperties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Builder isAnswered(Optional<Boolean> isAnswered) {
            oldKeywordBuilder.isAnswered(isAnswered);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'keywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        private final ImmutableList.Builder<Attachment> attachments;
        private final ImmutableMap.Builder<BlobId, SubMessage> attachedMessages;
        private Optional<Map<String, Boolean>> keywords = Optional.empty();

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
    private final Optional<String> inReplyToMessageId;
    private final ImmutableMap<String, String> headers;
    private final Optional<DraftEmailer> from;
    private final ImmutableList<DraftEmailer> to;
    private final ImmutableList<DraftEmailer> cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        public static class Builder {
            private Optional<String> name = Optional.empty();
            private Optional<String> email = Optional.empty();

            public Builder name(String name) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
    private final ZonedDateTime date;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final ImmutableList<Attachment> attachments;
    private final ImmutableMap<BlobId, SubMessage> attachedMessages;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Builder isDraft(Optional<Boolean> isDraft) {
            oldKeywordBuilder.isDraft(isDraft);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
    public static class EmailUserAndDomain {
        private final Optional<String> user;
        private final Optional<String> domain;

        public EmailUserAndDomain(Optional<String> user, Optional<String> domain) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyToMessageId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

    @VisibleForTesting
    CreationMessage(ImmutableList<String> mailboxIds, Optional<String> inReplyToMessageId, ImmutableMap<String, String> headers, Optional<DraftEmailer> from,
                    ImmutableList<DraftEmailer> to, ImmutableList<DraftEmailer> cc, ImmutableList<DraftEmailer> bcc, ImmutableList<DraftEmailer> replyTo, String subject, ZonedDateTime date, Optional<String> textBody, Optional<String> htmlBody, ImmutableList<Attachment> attachments,
                    ImmutableMap<BlobId, SubMessage> attachedMessages, Keywords keywords) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

    @VisibleForTesting
    CreationMessage(ImmutableList<String> mailboxIds, Optional<String> inReplyToMessageId, ImmutableMap<String, String> headers, Optional<DraftEmailer> from,
                    ImmutableList<DraftEmailer> to, ImmutableList<DraftEmailer> cc, ImmutableList<DraftEmailer> bcc, ImmutableList<DraftEmailer> replyTo, String subject, ZonedDateTime date, Optional<String> textBody, Optional<String> htmlBody, ImmutableList<Attachment> attachments,
                    ImmutableMap<BlobId, SubMessage> attachedMessages, Keywords keywords) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
    @VisibleForTesting
    CreationMessage(ImmutableList<String> mailboxIds, Optional<String> inReplyToMessageId, ImmutableMap<String, String> headers, Optional<DraftEmailer> from,
                    ImmutableList<DraftEmailer> to, ImmutableList<DraftEmailer> cc, ImmutableList<DraftEmailer> bcc, ImmutableList<DraftEmailer> replyTo, String subject, ZonedDateTime date, Optional<String> textBody, Optional<String> htmlBody, ImmutableList<Attachment> attachments,
                    ImmutableMap<BlobId, SubMessage> attachedMessages, Keywords keywords) {
        this.mailboxIds = mailboxIds;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
    @VisibleForTesting
    CreationMessage(ImmutableList<String> mailboxIds, Optional<String> inReplyToMessageId, ImmutableMap<String, String> headers, Optional<DraftEmailer> from,
                    ImmutableList<DraftEmailer> to, ImmutableList<DraftEmailer> cc, ImmutableList<DraftEmailer> bcc, ImmutableList<DraftEmailer> replyTo, String subject, ZonedDateTime date, Optional<String> textBody, Optional<String> htmlBody, ImmutableList<Attachment> attachments,
                    ImmutableMap<BlobId, SubMessage> attachedMessages, Keywords keywords) {
        this.mailboxIds = mailboxIds;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Builder isFlagged(Optional<Boolean> isFlagged) {
            oldKeywordBuilder.isFlagged(isFlagged);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        private final Optional<String> name;
        private final Optional<String> email;
        private final EmailValidator emailValidator;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        @JsonPOJOBuilder(withPrefix = "")
        public static class Builder {
            private Optional<String> name = Optional.empty();
            private Optional<String> email = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        private final OldKeyword.Builder oldKeywordBuilder;
        private final ImmutableMap.Builder<String, String> headers;
        private Optional<DraftEmailer> from = Optional.empty();
        private final ImmutableList.Builder<DraftEmailer> to;
        private final ImmutableList.Builder<DraftEmailer> cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
    private final String subject;
    private final ZonedDateTime date;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final ImmutableList<Attachment> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'user'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        private final Optional<String> domain;

        public EmailUserAndDomain(Optional<String> user, Optional<String> domain) {
            this.user = user;
            this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        private final Optional<String> domain;

        public EmailUserAndDomain(Optional<String> user, Optional<String> domain) {
            this.user = user;
            this.domain = domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'inReplyToMessageId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

    private final ImmutableList<String> mailboxIds;
    private final Optional<String> inReplyToMessageId;
    private final ImmutableMap<String, String> headers;
    private final Optional<DraftEmailer> from;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

        @VisibleForTesting
        DraftEmailer(Optional<String> name, Optional<String> email) {
            this.name = name;
            this.email = email;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

        @VisibleForTesting
        DraftEmailer(Optional<String> name, Optional<String> email) {
            this.name = name;
            this.email = email;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'user'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

    public static class EmailUserAndDomain {
        private final Optional<String> user;
        private final Optional<String> domain;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Builder isForwarded(Optional<Boolean> isForwarded) {
            oldKeywordBuilder.isForwarded(isForwarded);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Builder isUnread(Optional<Boolean> isUnread) {
            oldKeywordBuilder.isUnread(isUnread);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'keywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Keywords computeKeywords(Optional<Keywords> keywords, Optional<OldKeyword> oldKeywords) {
            Preconditions.checkArgument(!(keywords.isPresent() && oldKeywords.isPresent()), "Does not support keyword and is* at the same time");
            return keywords
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'oldKeywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
        }

        public Keywords computeKeywords(Optional<Keywords> keywords, Optional<OldKeyword> oldKeywords) {
            Preconditions.checkArgument(!(keywords.isPresent() && oldKeywords.isPresent()), "Does not support keyword and is* at the same time");
            return keywords
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'email'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

        private final Optional<String> name;
        private final Optional<String> email;
        private final EmailValidator emailValidator;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'UNSUPPORTED'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Rights.java`
#### Snippet
```java
public class Rights {
    @VisibleForTesting
    static final Optional<Boolean> UNSUPPORTED = Optional.empty();

    public enum Right {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'preview'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
    @JsonPOJOBuilder(withPrefix = "")
    public static class Builder<S extends MessageFastView.Builder<S>> extends MessageHeaderView.Builder<S> {
        protected Optional<Preview> preview;
        protected Optional<Boolean> hasAttachment;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'preview'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
        }

        public S preview(Optional<Preview> preview) {
            this.preview = preview;
            return (S) this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyToMessageId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
                    String threadId,
                    ImmutableSet<MailboxId> mailboxIds,
                    Optional<String> inReplyToMessageId,
                    ImmutableMap<String, String> headers,
                    Optional<Emailer> from,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
                    Optional<String> inReplyToMessageId,
                    ImmutableMap<String, String> headers,
                    Optional<Emailer> from,
                    ImmutableList<Emailer> to,
                    ImmutableList<Emailer> cc,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'hasAttachment'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
    public static class Builder<S extends MessageFastView.Builder<S>> extends MessageHeaderView.Builder<S> {
        protected Optional<Preview> preview;
        protected Optional<Boolean> hasAttachment;

        protected Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'id'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxCreateRequest(Optional<String> id, String name, Optional<MailboxCreationId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder) {

        this.id = id;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxCreateRequest(Optional<String> id, String name, Optional<MailboxCreationId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder) {

        this.id = id;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxCreateRequest(Optional<String> id, String name, Optional<MailboxCreationId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder) {

        this.id = id;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sortOrder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java

    @VisibleForTesting
    MailboxCreateRequest(Optional<String> id, String name, Optional<MailboxCreationId> parentId, Optional<Role> role, Optional<SortOrder> sortOrder) {

        this.id = id;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'id'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
    }

    private final Optional<String> id;
    private final String name;
    private final Optional<MailboxCreationId> parentId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sortOrder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
        private Optional<MailboxCreationId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sortOrder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
    private final Optional<MailboxCreationId> parentId;
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
    private final Optional<String> id;
    private final String name;
    private final Optional<MailboxCreationId> parentId;
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
        private Optional<String> id;
        private String name;
        private Optional<MailboxCreationId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'id'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
    public static class Builder {

        private Optional<String> id;
        private String name;
        private Optional<MailboxCreationId> parentId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
    private final String name;
    private final Optional<MailboxCreationId> parentId;
    private final Optional<Role> role;
    private final Optional<SortOrder> sortOrder;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
        private String name;
        private Optional<MailboxCreationId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'keywords'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        protected ImmutableSet<MailboxId> mailboxIds;
        protected Number size;
        protected Optional<Keywords> keywords = Optional.empty();

        public S id(MessageId id) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        protected String inReplyToMessageId;
        protected ImmutableMap<String, String> headers;
        protected Optional<Emailer> from;
        protected final ImmutableList.Builder<Emailer> to;
        protected final ImmutableList.Builder<Emailer> cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        }

        public S from(Optional<Emailer> from) {
            this.from = from;
            return (S) this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyToMessageId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
                      String threadId,
                      ImmutableSet<MailboxId> mailboxIds,
                      Optional<String> inReplyToMessageId,
                      ImmutableMap<String, String> headers,
                      Optional<Emailer> from,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
                      Optional<String> inReplyToMessageId,
                      ImmutableMap<String, String> headers,
                      Optional<Emailer> from,
                      ImmutableList<Emailer> to,
                      ImmutableList<Emailer> cc,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'inReplyToMessageId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
    }

    private final Optional<String> inReplyToMessageId;
    @JsonFilter(GetMessagesMethod.HEADERS_FILTER)
    private final ImmutableMap<String, String> headers;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
    @JsonFilter(GetMessagesMethod.HEADERS_FILTER)
    private final ImmutableMap<String, String> headers;
    private final Optional<Emailer> from;
    private final ImmutableList<Emailer> to;
    private final ImmutableList<Emailer> cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
    public static class Builder extends MessageFastView.Builder<MessageFullView.Builder> {
        private Optional<String> textBody = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();
        private final ImmutableList.Builder<Attachment> attachments;
        private final ImmutableMap.Builder<BlobId, SubMessage> attachedMessages;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
        }

        public Builder textBody(Optional<String> textBody) {
            this.textBody = textBody;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
        }

        public Builder htmlBody(Optional<String> htmlBody) {
            this.htmlBody = htmlBody;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java

    private final boolean hasAttachment;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final ImmutableList<Attachment> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
    private final boolean hasAttachment;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final ImmutableList<Attachment> attachments;
    private final ImmutableMap<BlobId, SubMessage> attachedMessages;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
    @JsonPOJOBuilder(withPrefix = "")
    public static class Builder extends MessageFastView.Builder<MessageFullView.Builder> {
        private Optional<String> textBody = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();
        private final ImmutableList.Builder<Attachment> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'inReplyToMessageId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
                    String threadId,
                    ImmutableSet<MailboxId> mailboxIds,
                    Optional<String> inReplyToMessageId,
                    boolean hasAttachment,
                    ImmutableMap<String, String> headers,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
                    boolean hasAttachment,
                    ImmutableMap<String, String> headers,
                    Optional<Emailer> from,
                    ImmutableList<Emailer> to,
                    ImmutableList<Emailer> cc,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
                    Number size,
                    PreviewDTO preview,
                    Optional<String> textBody,
                    Optional<String> htmlBody,
                    ImmutableList<Attachment> attachments,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java
                    PreviewDTO preview,
                    Optional<String> textBody,
                    Optional<String> htmlBody,
                    ImmutableList<Attachment> attachments,
                    ImmutableMap<BlobId, SubMessage> attachedMessages,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'hasKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
        private String attachments;
        private Header header;
        private Optional<String> hasKeyword;
        private Optional<String> notKeyword;
        private Optional<String> attachmentFileName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'hasAttachment'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;
    private final Optional<Boolean> hasAttachment;
    private final Optional<String> text;
    private final Optional<String> from;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'inMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    public static class Builder {

        private Optional<List<String>> inMailboxes;
        private Optional<List<String>> notInMailboxes;
        private ZonedDateTime before;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'attachmentFileName'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> hasKeyword;
    private final Optional<String> notKeyword;
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'notKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Header> header;
    private final Optional<String> hasKeyword;
    private final Optional<String> notKeyword;
    private final Optional<String> attachmentFileName;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'inMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    }

    private final Optional<List<String>> inMailboxes;
    private final Optional<List<String>> notInMailboxes;
    private final Optional<ZonedDateTime> before;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minSize'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> before;
    private final Optional<ZonedDateTime> after;
    private final Optional<Number> minSize;
    private final Optional<Number> maxSize;
    private final Optional<Boolean> isFlagged;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxSize'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> after;
    private final Optional<Number> minSize;
    private final Optional<Number> maxSize;
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isUnread;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Number> minSize;
    private final Optional<Number> maxSize;
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isAnswered;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bcc'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> to;
    private final Optional<String> cc;
    private final Optional<String> bcc;
    private final Optional<String> subject;
    private final Optional<String> body;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cc'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> from;
    private final Optional<String> to;
    private final Optional<String> cc;
    private final Optional<String> bcc;
    private final Optional<String> subject;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'notInMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

        private Optional<List<String>> inMailboxes;
        private Optional<List<String>> notInMailboxes;
        private ZonedDateTime before;
        private ZonedDateTime after;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Number> maxSize;
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'attachmentFileName'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
        private Optional<String> hasKeyword;
        private Optional<String> notKeyword;
        private Optional<String> attachmentFileName;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'header'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> body;
    private final Optional<String> attachments;
    private final Optional<Header> header;
    private final Optional<String> hasKeyword;
    private final Optional<String> notKeyword;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'hasKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachments;
    private final Optional<Header> header;
    private final Optional<String> hasKeyword;
    private final Optional<String> notKeyword;
    private final Optional<String> attachmentFileName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'totalMessages'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private boolean mayRename;
        private boolean mayDelete;
        private Optional<Number> totalMessages;
        private Optional<Number> unreadMessages;
        private Optional<Number> totalThreads;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private MailboxId id;
        private String name;
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private SortOrder sortOrder;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> cc;
    private final Optional<String> bcc;
    private final Optional<String> subject;
    private final Optional<String> body;
    private final Optional<String> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'quotas'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
    private final Rights sharedWith;
    private final MailboxNamespace namespace;
    private final Optional<Quotas> quotas;

    @VisibleForTesting Mailbox(MailboxId id, String name, Optional<MailboxId> parentId, Optional<Role> role, SortOrder sortOrder, boolean mustBeOnlyMailbox,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'notKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
        private Header header;
        private Optional<String> hasKeyword;
        private Optional<String> notKeyword;
        private Optional<String> attachmentFileName;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'to'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> text;
    private final Optional<String> from;
    private final Optional<String> to;
    private final Optional<String> cc;
    private final Optional<String> bcc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;
    private final Optional<Boolean> hasAttachment;
    private final Optional<String> text;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
    private final Optional<Quotas> quotas;

    @VisibleForTesting Mailbox(MailboxId id, String name, Optional<MailboxId> parentId, Optional<Role> role, SortOrder sortOrder, boolean mustBeOnlyMailbox,
                               boolean mayReadItems, boolean mayAddItems, boolean mayRemoveItems, boolean mayCreateChild, boolean mayRename, boolean mayDelete,
                               Number totalMessages, Number unreadMessages, Number totalThreads, Number unreadThreads, Rights sharedWith, MailboxNamespace namespace,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'body'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> bcc;
    private final Optional<String> subject;
    private final Optional<String> body;
    private final Optional<String> attachments;
    private final Optional<Header> header;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'text'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Boolean> isForwarded;
    private final Optional<Boolean> hasAttachment;
    private final Optional<String> text;
    private final Optional<String> from;
    private final Optional<String> to;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
    private final Optional<Quotas> quotas;

    @VisibleForTesting Mailbox(MailboxId id, String name, Optional<MailboxId> parentId, Optional<Role> role, SortOrder sortOrder, boolean mustBeOnlyMailbox,
                               boolean mayReadItems, boolean mayAddItems, boolean mayRemoveItems, boolean mayCreateChild, boolean mayRename, boolean mayDelete,
                               Number totalMessages, Number unreadMessages, Number totalThreads, Number unreadThreads, Rights sharedWith, MailboxNamespace namespace,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'after'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<List<String>> notInMailboxes;
    private final Optional<ZonedDateTime> before;
    private final Optional<ZonedDateTime> after;
    private final Optional<Number> minSize;
    private final Optional<Number> maxSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'notInMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

        @JsonDeserialize
        public Builder notInMailboxes(Optional<List<String>> notInMailboxes) {
            this.notInMailboxes = notInMailboxes.map(ImmutableList::copyOf);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'quotas'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
                               boolean mayReadItems, boolean mayAddItems, boolean mayRemoveItems, boolean mayCreateChild, boolean mayRename, boolean mayDelete,
                               Number totalMessages, Number unreadMessages, Number totalThreads, Number unreadThreads, Rights sharedWith, MailboxNamespace namespace,
                               Optional<Quotas> quotas) {

        this.id = id;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'namespace'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private Optional<Number> unreadThreads;
        private Optional<Rights> sharedWith;
        private Optional<MailboxNamespace> namespace;
        private Optional<Quotas> quotas;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
    private final String name;
    private final Optional<MailboxId> parentId;
    private final Optional<Role> role;
    private final SortOrder sortOrder;
    private final boolean mustBeOnlyMailbox;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'unreadMessages'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private boolean mayDelete;
        private Optional<Number> totalMessages;
        private Optional<Number> unreadMessages;
        private Optional<Number> totalThreads;
        private Optional<Number> unreadThreads;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        }

        public Builder role(Optional<Role> role) {
            this.role = role;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'quotas'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private Optional<Rights> sharedWith;
        private Optional<MailboxNamespace> namespace;
        private Optional<Quotas> quotas;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private String name;
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private SortOrder sortOrder;
        private boolean mustBeOnlyMailbox;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'parentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
    private final MailboxId id;
    private final String name;
    private final Optional<MailboxId> parentId;
    private final Optional<Role> role;
    private final SortOrder sortOrder;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sharedWith'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private Optional<Number> totalThreads;
        private Optional<Number> unreadThreads;
        private Optional<Rights> sharedWith;
        private Optional<MailboxNamespace> namespace;
        private Optional<Quotas> quotas;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'totalThreads'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private Optional<Number> totalMessages;
        private Optional<Number> unreadMessages;
        private Optional<Number> totalThreads;
        private Optional<Number> unreadThreads;
        private Optional<Rights> sharedWith;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'unreadThreads'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Mailbox.java`
#### Snippet
```java
        private Optional<Number> unreadMessages;
        private Optional<Number> totalThreads;
        private Optional<Number> unreadThreads;
        private Optional<Rights> sharedWith;
        private Optional<MailboxNamespace> namespace;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'hasKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

        @JsonDeserialize
        public Builder hasKeyword(Optional<String> hasKeyword) {
            this.hasKeyword = hasKeyword;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'notKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

        @JsonDeserialize
        public Builder notKeyword(Optional<String> notKeyword) {
            this.notKeyword = notKeyword;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'inMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

        @JsonDeserialize
        public Builder inMailboxes(Optional<List<String>> inMailboxes) {
            this.inMailboxes = inMailboxes.map(ImmutableList::copyOf);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'attachmentFileName'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
        }

        public Builder attachmentFileName(Optional<String> attachmentFileName) {
            this.attachmentFileName = attachmentFileName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Boolean> hasAttachment;
    private final Optional<String> text;
    private final Optional<String> from;
    private final Optional<String> to;
    private final Optional<String> cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'attachments'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> subject;
    private final Optional<String> body;
    private final Optional<String> attachments;
    private final Optional<Header> header;
    private final Optional<String> hasKeyword;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;
    private final Optional<Boolean> hasAttachment;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'inMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'notInMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'before'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'after'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'minSize'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxSize'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<String> attachmentFileName;

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'hasAttachment'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    @VisibleForTesting FilterCondition(Optional<List<String>> inMailboxes, Optional<List<String>> notInMailboxes, Optional<ZonedDateTime> before, Optional<ZonedDateTime> after, Optional<Number> minSize, Optional<Number> maxSize,
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'text'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'to'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cc'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    }

    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isAnswered;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        }

        public Builder isForwarded(Optional<Boolean> isForwarded) {
            this.isForwarded = isForwarded;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        }

        public Builder isFlagged(Optional<Boolean> isFlagged) {
            this.isFlagged = isFlagged;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> isUnread;
        private Optional<Boolean> isFlagged;
        private Optional<Boolean> isAnswered;
        private Optional<Boolean> isDraft;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java

    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bcc'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        }

        public Builder isDraft(Optional<Boolean> isDraft) {
            this.isDraft = isDraft;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        private Optional<Boolean> isAnswered;
        private Optional<Boolean> isDraft;
        private Optional<Boolean> isForwarded;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;

    private OldKeyword(Optional<Boolean> isUnread, Optional<Boolean> isFlagged, Optional<Boolean> isAnswered,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> isFlagged, Optional<Boolean> isUnread, Optional<Boolean> isAnswered, Optional<Boolean> isDraft, Optional<Boolean> isForwarded,
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Boolean> isUnread;
        private Optional<Boolean> isFlagged;
        private Optional<Boolean> isAnswered;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    private final Optional<Boolean> isForwarded;

    private OldKeyword(Optional<Boolean> isUnread, Optional<Boolean> isFlagged, Optional<Boolean> isAnswered,
                      Optional<Boolean> isDraft, Optional<Boolean> isForwarded) {
        this.isUnread = isUnread;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isFlagged'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    private final Optional<Boolean> isForwarded;

    private OldKeyword(Optional<Boolean> isUnread, Optional<Boolean> isFlagged, Optional<Boolean> isAnswered,
                      Optional<Boolean> isDraft, Optional<Boolean> isForwarded) {
        this.isUnread = isUnread;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'body'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

        this.inMailboxes = inMailboxes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'attachments'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

        this.inMailboxes = inMailboxes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'header'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

        this.inMailboxes = inMailboxes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'hasKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

        this.inMailboxes = inMailboxes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'notKeyword'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

        this.inMailboxes = inMailboxes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    private final Optional<Boolean> isForwarded;

    private OldKeyword(Optional<Boolean> isUnread, Optional<Boolean> isFlagged, Optional<Boolean> isAnswered,
                      Optional<Boolean> isDraft, Optional<Boolean> isForwarded) {
        this.isUnread = isUnread;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java

    private OldKeyword(Optional<Boolean> isUnread, Optional<Boolean> isFlagged, Optional<Boolean> isAnswered,
                      Optional<Boolean> isDraft, Optional<Boolean> isForwarded) {
        this.isUnread = isUnread;
        this.isFlagged = isFlagged;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isForwarded'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java

    private OldKeyword(Optional<Boolean> isUnread, Optional<Boolean> isFlagged, Optional<Boolean> isAnswered,
                      Optional<Boolean> isDraft, Optional<Boolean> isForwarded) {
        this.isUnread = isUnread;
        this.isFlagged = isFlagged;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'attachmentFileName'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
                                       Optional<Boolean> hasAttachment,
                                       Optional<String> text, Optional<String> from, Optional<String> to, Optional<String> cc, Optional<String> bcc, Optional<String> subject,
                                       Optional<String> body, Optional<String> attachments, Optional<Header> header, Optional<String> hasKeyword, Optional<String> notKeyword, Optional<String> attachmentFileName) {

        this.inMailboxes = inMailboxes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        private Optional<Boolean> isFlagged;
        private Optional<Boolean> isAnswered;
        private Optional<Boolean> isDraft;
        private Optional<Boolean> isForwarded;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'notInMailboxes'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

    private final Optional<List<String>> inMailboxes;
    private final Optional<List<String>> notInMailboxes;
    private final Optional<ZonedDateTime> before;
    private final Optional<ZonedDateTime> after;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
        private Instant date;
        private Optional<String> textBody = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();
        private final ImmutableList.Builder<Attachment> attachments;
        private final ImmutableMap.Builder<BlobId, SubMessage> attachedMessages;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'before'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    private final Optional<List<String>> inMailboxes;
    private final Optional<List<String>> notInMailboxes;
    private final Optional<ZonedDateTime> before;
    private final Optional<ZonedDateTime> after;
    private final Optional<Number> minSize;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isUnread'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        }

        public Builder isUnread(Optional<Boolean> isUnread) {
            this.isUnread = isUnread;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    private final Optional<Boolean> isUnread;
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        private Optional<Boolean> isUnread;
        private Optional<Boolean> isFlagged;
        private Optional<Boolean> isAnswered;
        private Optional<Boolean> isDraft;
        private Optional<Boolean> isForwarded;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isDraft'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
    private final Optional<Boolean> isFlagged;
    private final Optional<Boolean> isAnswered;
    private final Optional<Boolean> isDraft;
    private final Optional<Boolean> isForwarded;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java

    @VisibleForTesting SubMessage(ImmutableMap<String, String> headers,
                                  Optional<Emailer> from,
                                  ImmutableList<Emailer> to,
                                  ImmutableList<Emailer> cc,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isAnswered'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/OldKeyword.java`
#### Snippet
```java
        }

        public Builder isAnswered(Optional<Boolean> isAnswered) {
            this.isAnswered = isAnswered;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
                                  String subject,
                                  Instant date,
                                  Optional<String> textBody,
                                  Optional<String> htmlBody,
                                  ImmutableList<Attachment> attachments,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
                                  Instant date,
                                  Optional<String> textBody,
                                  Optional<String> htmlBody,
                                  ImmutableList<Attachment> attachments,
                                  ImmutableMap<BlobId, SubMessage> attachedMessages) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
        }

        public Builder htmlBody(Optional<String> htmlBody) {
            this.htmlBody = htmlBody;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
        private String subject;
        private Instant date;
        private Optional<String> textBody = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();
        private final ImmutableList.Builder<Attachment> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
    private final Instant date;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final ImmutableList<Attachment> attachments;
    private final ImmutableMap<BlobId, SubMessage> attachedMessages;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java

    private final ImmutableMap<String, String> headers;
    private final Optional<Emailer> from;
    private final ImmutableList<Emailer> to;
    private final ImmutableList<Emailer> cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
    private final String subject;
    private final Instant date;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
    private final ImmutableList<Attachment> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/SubMessage.java`
#### Snippet
```java
        }

        public Builder textBody(Optional<String> textBody) {
            this.textBody = textBody;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/DownloadPath.java`
#### Snippet
```java

    private final String blobId;
    private final Optional<String> name;

    private DownloadPath(String blobId, Optional<String> name) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/DownloadPath.java`
#### Snippet
```java
    private final Optional<String> name;

    private DownloadPath(String blobId, Optional<String> name) {
        this.blobId = blobId;
        this.name = name;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'message'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
            private Set<MailboxId> mailboxIds = Sets.newHashSet();
            private MessageId messageId;
            private Optional<Message> message;

            public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'message'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
        private final Set<MailboxId> mailboxIds;
        private final MessageId messageId;
        private final Optional<Message> message;

        private MetaDataWithContent(MessageUid uid,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'message'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
                                    List<MessageAttachmentMetadata> attachments,
                                    Set<MailboxId> mailboxIds,
                                    MessageId messageId, Optional<Message> message) {
            this.uid = uid;
            this.keywords = keywords;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
    }

    private MessageFullView instanciateMessageFullView(MetaDataWithContent message, Message mimeMessage, Optional<String> htmlBody, Optional<String> textBody, MessageFastViewPrecomputedProperties messageProjection) {
        return MessageFullView.builder()
                .id(message.getMessageId())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
    }

    private MessageFullView instanciateMessageFullView(MetaDataWithContent message, Message mimeMessage, Optional<String> htmlBody, Optional<String> textBody, MessageFastViewPrecomputedProperties messageProjection) {
        return MessageFullView.builder()
                .id(message.getMessageId())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'preloadedUserDefaultQuotas'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/quotas/QuotaLoaderWithDefaultPreloaded.java`
#### Snippet
```java
    }

    private boolean containsQuotaId(Optional<Quotas> preloadedUserDefaultQuotas, Quotas.QuotaId quotaId) {
        return preloadedUserDefaultQuotas
            .map(Quotas::getQuotas)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'preloadedUserDefaultQuotas'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/quotas/QuotaLoaderWithDefaultPreloaded.java`
#### Snippet
```java
    private final Optional<Quotas> preloadedUserDefaultQuotas;

    private QuotaLoaderWithDefaultPreloaded(QuotaRootResolver quotaRootResolver, DefaultQuotaLoader defaultQuotaLoader, Optional<Quotas> preloadedUserDefaultQuotas) {
        this.quotaRootResolver = quotaRootResolver;
        this.defaultQuotaLoader = defaultQuotaLoader;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'preloadedUserDefaultQuotas'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/quotas/QuotaLoaderWithDefaultPreloaded.java`
#### Snippet
```java
    private final QuotaRootResolver quotaRootResolver;
    private final DefaultQuotaLoader defaultQuotaLoader;
    private final Optional<Quotas> preloadedUserDefaultQuotas;

    private QuotaLoaderWithDefaultPreloaded(QuotaRootResolver quotaRootResolver, DefaultQuotaLoader defaultQuotaLoader, Optional<Quotas> preloadedUserDefaultQuotas) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'description'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/ErrorResponse.java`
#### Snippet
```java

    private final String type;
    private final Optional<String> description;
    
    @VisibleForTesting ErrorResponse(String type, Optional<String> description) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'description'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/ErrorResponse.java`
#### Snippet
```java

        private Optional<String> type = Optional.empty();
        private Optional<String> description = Optional.empty();
        
        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'type'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/ErrorResponse.java`
#### Snippet
```java
    public static class Builder {

        private Optional<String> type = Optional.empty();
        private Optional<String> description = Optional.empty();
        
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'description'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/ErrorResponse.java`
#### Snippet
```java
    private final Optional<String> description;
    
    @VisibleForTesting ErrorResponse(String type, Optional<String> description) {
        this.type = type;
        this.description = description;
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
        }

        public Builder properties(Optional<? extends Set<? extends Property>> properties) {
            this.properties = properties.map(ImmutableSet::copyOf);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`, SimpleFilterProvider>> used as type for parameter 'filterProvider'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
        }
        
        public Builder filterProvider(Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider) {
            this.filterProvider = filterProvider;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`, SimpleFilterProvider>> used as type for field 'filterProvider'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
        private Method.Response response;
        private Optional<? extends Set<? extends Property>> properties = Optional.empty();
        private Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider = Optional.empty();

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
    private JmapResponse(Method.Response.Name method, MethodCallId methodCallId,
                         Method.Response response,
                         Optional<? extends Set<? extends Property>> properties,
                         Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider) {
        this.method = method;
```

### OptionalUsedAsFieldOrParameterType
`Optional`, SimpleFilterProvider>> used as type for parameter 'filterProvider'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
                         Method.Response response,
                         Optional<? extends Set<? extends Property>> properties,
                         Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider) {
        this.method = method;
        this.methodCallId = methodCallId;
```

### OptionalUsedAsFieldOrParameterType
`Optional`, SimpleFilterProvider>> used as type for field 'filterProvider'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
    private final Method.Response response;
    private final Optional<? extends Set<? extends Property>> properties;
    private final Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider;
    
    private JmapResponse(Method.Response.Name method, MethodCallId methodCallId,
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
        private MethodCallId methodCallId;
        private Method.Response response;
        private Optional<? extends Set<? extends Property>> properties = Optional.empty();
        private Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponse.java`
#### Snippet
```java
    private final MethodCallId methodCallId;
    private final Method.Response response;
    private final Optional<? extends Set<? extends Property>> properties;
    private final Optional<Pair<? extends Set<? extends Property>, SimpleFilterProvider>> filterProvider;
    
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxIds'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMailboxesMethod.java`
#### Snippet
```java
    }

    private Flux<Mailbox> retrieveMailboxes(Optional<ImmutableList<MailboxId>> mailboxIds, MailboxSession mailboxSession) {
        return mailboxIds
            .map(ids -> retrieveSpecificMailboxes(mailboxSession, ids))
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'NO_PRELOADED_METADATA'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMailboxesMethod.java`
#### Snippet
```java
    private static final Method.Request.Name METHOD_NAME = Method.Request.name("getMailboxes");
    private static final Method.Response.Name RESPONSE_NAME = Method.Response.name("mailboxes");
    private static final Optional<Map<MailboxPath, MailboxMetaData>> NO_PRELOADED_METADATA = Optional.empty();
    private static final String ACTION = "GET_MAILBOXES";

```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponseWriterImpl.java`
#### Snippet
```java

        private CachedObjectMapper(ObjectMapper objectMapper,
                                   Optional<? extends Set<? extends Property>> properties,
                                   Optional<? extends Set<? extends Property>> subProperties) {
            this.objectMapper = objectMapper;
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for parameter 'subProperties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponseWriterImpl.java`
#### Snippet
```java
        private CachedObjectMapper(ObjectMapper objectMapper,
                                   Optional<? extends Set<? extends Property>> properties,
                                   Optional<? extends Set<? extends Property>> subProperties) {
            this.objectMapper = objectMapper;
            this.properties = properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for field 'subProperties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponseWriterImpl.java`
#### Snippet
```java
        private final ObjectMapper objectMapper;
        private final Optional<? extends Set<? extends Property>> properties;
        private final Optional<? extends Set<? extends Property>> subProperties;

        private CachedObjectMapper(ObjectMapper objectMapper,
```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for field 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponseWriterImpl.java`
#### Snippet
```java
    private static class CachedObjectMapper {
        private final ObjectMapper objectMapper;
        private final Optional<? extends Set<? extends Property>> properties;
        private final Optional<? extends Set<? extends Property>> subProperties;

```

### OptionalUsedAsFieldOrParameterType
`Optional``>` used as type for parameter 'properties'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/JmapResponseWriterImpl.java`
#### Snippet
```java
    }
    
    private PropertyFilter getPropertiesFilter(Optional<? extends Set<? extends Property>> properties) {
        return properties
                .map(this::toFieldNames)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromField'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MailboxSendingNotAllowedException.java`
#### Snippet
```java

    private final Username connectedUser;
    private final Optional<Username> fromField;

    public MailboxSendingNotAllowedException(Username connectedUser, Optional<Username> fromField) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromField'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MailboxSendingNotAllowedException.java`
#### Snippet
```java
    private final Optional<Username> fromField;

    public MailboxSendingNotAllowedException(Username connectedUser, Optional<Username> fromField) {
        super();
        this.connectedUser = connectedUser;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'currentParentId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java
    }

    private boolean mustChangeParent(Optional<MailboxId> currentParentId, MailboxId newParentId) {
        return currentParentId
                .map(x -> ! x.equals(newParentId))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'requestValue'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java

    @VisibleForTesting
    <T> boolean requestChanged(Optional<T> requestValue, Optional<T> storeValue) {
        return requestValue.isPresent() && !requestValue.equals(storeValue);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'storeValue'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java

    @VisibleForTesting
    <T> boolean requestChanged(Optional<T> requestValue, Optional<T> storeValue) {
        return requestValue.isPresent() && !requestValue.equals(storeValue);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'role'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesDestructionProcessor.java`
#### Snippet
```java
    }

    private void checkRole(Optional<Role> role) throws SystemMailboxNotUpdatableException {
        if (role.map(Role::isSystemRole).orElse(false)) {
            throw new SystemMailboxNotUpdatableException();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
    }

    private void addText(MultipartBuilder builder, Optional<String> textBody) throws IOException {
        if (textBody.isPresent()) {
            builder.addBodyPart(BodyPartBuilder.create()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
    }

    private void addHtml(MultipartBuilder builder, Optional<String> htmlBody) throws IOException {
        if (htmlBody.isPresent()) {
            builder.addBodyPart(BodyPartBuilder.create()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromAddress'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
    }

    private String generateUniqueMessageId(Optional<Mailbox> fromAddress) {
        String noDomain = null;
        return MimeUtil.createUniqueMessageId(fromAddress
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeFromUser'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesCreationProcessor.java`
#### Snippet
```java
    }

    private Mono<Boolean> canSendMailUsingIdentity(Username connectedUser, Optional<Username> maybeFromUser) {
        return Mono.justOrEmpty(maybeFromUser)
            .flatMap(fromUser -> Mono.from(canSendFrom.userCanSendFromReactive(connectedUser, fromUser)));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'from'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesCreationProcessor.java`
#### Snippet
```java

    @VisibleForTesting
    Mono<Void> assertUserCanSendFrom(Username connectedUser, Optional<DraftEmailer> from) {
        Optional<Username> maybeFromUser = from.flatMap(DraftEmailer::getEmail)
            .map(Username::of);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mailboxId'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesCreationProcessor.java`
#### Snippet
```java

    @VisibleForTesting
    Optional<MailboxPath> getMailboxPathFromId(Optional<MailboxId> mailboxId, MailboxSession mailboxSession) {
        FunctionChainer<MailboxId, Optional<MailboxPath>> fromMailboxIdToMailboxPath = Throwing.function(id -> {
            try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'address'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/mailet/filter/ContentMatcher.java`
#### Snippet
```java

        private final Optional<String> personal;
        private final Optional<String> address;
        private final String fullAddress;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'personal'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/mailet/filter/ContentMatcher.java`
#### Snippet
```java
        private static final Logger LOGGER = LoggerFactory.getLogger(AddressHeader.class);

        private final Optional<String> personal;
        private final Optional<String> address;
        private final String fullAddress;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userInfoEndpoint'
in `protocols/api/src/main/java/org/apache/james/protocols/api/OidcSASLConfiguration.java`
#### Snippet
```java
    private final Optional<URL> introspectionEndpoint;
    private final Optional<String> introspectionEndpointAuthorization;
    private final Optional<URL> userInfoEndpoint;

    public OidcSASLConfiguration(URL jwksURL,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'introspectionEndpoint'
in `protocols/api/src/main/java/org/apache/james/protocols/api/OidcSASLConfiguration.java`
#### Snippet
```java
                                 URL oidcConfigurationURL,
                                 String scope,
                                 Optional<URL> introspectionEndpoint,
                                 Optional<String> introspectionEndpointAuthorization,
                                 Optional<URL> userInfoEndpoint) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'introspectionEndpointAuthorization'
in `protocols/api/src/main/java/org/apache/james/protocols/api/OidcSASLConfiguration.java`
#### Snippet
```java
                                 String scope,
                                 Optional<URL> introspectionEndpoint,
                                 Optional<String> introspectionEndpointAuthorization,
                                 Optional<URL> userInfoEndpoint) {
        this.jwksURL = jwksURL;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'userInfoEndpoint'
in `protocols/api/src/main/java/org/apache/james/protocols/api/OidcSASLConfiguration.java`
#### Snippet
```java
                                 Optional<URL> introspectionEndpoint,
                                 Optional<String> introspectionEndpointAuthorization,
                                 Optional<URL> userInfoEndpoint) {
        this.jwksURL = jwksURL;
        this.claim = claim;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'introspectionEndpointAuthorization'
in `protocols/api/src/main/java/org/apache/james/protocols/api/OidcSASLConfiguration.java`
#### Snippet
```java
    private final String scope;
    private final Optional<URL> introspectionEndpoint;
    private final Optional<String> introspectionEndpointAuthorization;
    private final Optional<URL> userInfoEndpoint;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'introspectionEndpoint'
in `protocols/api/src/main/java/org/apache/james/protocols/api/OidcSASLConfiguration.java`
#### Snippet
```java
    private final URL oidcConfigurationURL;
    private final String scope;
    private final Optional<URL> introspectionEndpoint;
    private final Optional<String> introspectionEndpointAuthorization;
    private final Optional<URL> userInfoEndpoint;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeFromUser'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesUpdateProcessor.java`
#### Snippet
```java

    @VisibleForTesting
    Mono<Void> assertUserCanSendFrom(Username connectedUser, Optional<Username> maybeFromUser) {
        return Mono.justOrEmpty(maybeFromUser)
            .flatMap(fromUser -> Mono.from(canSendFrom.userCanSendFromReactive(connectedUser, fromUser)))
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeCondition'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java
    }
    
    private Stream<FilterCondition> filterToFilterCondition(Optional<Filter> maybeCondition) {
        return maybeCondition.stream()
            .flatMap(c -> {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeFilter'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java
    }

    private Set<MailboxId> buildFilterMailboxesSet(Optional<Filter> maybeFilter, Function<FilterCondition, Optional<List<String>>> mailboxListExtractor) {
        return filterToFilterCondition(maybeFilter)
            .flatMap(condition -> mailboxListExtractor.apply(condition).stream())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'threads'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetContainer.java`
#### Snippet
```java
        public static final String DEFAULT_POSTMASTER = "postmaster@localhost";
        private Optional<String> postmaster;
        private Optional<Integer> threads;
        private Map<String, ProcessorConfiguration> processors;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'postmaster'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetContainer.java`
#### Snippet
```java
        public static final int DEFAULT_THREAD_COUNT = 5;
        public static final String DEFAULT_POSTMASTER = "postmaster@localhost";
        private Optional<String> postmaster;
        private Optional<Integer> threads;
        private Map<String, ProcessorConfiguration> processors;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enableJmx'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/ProcessorConfiguration.java`
#### Snippet
```java

        private String state;
        private Optional<Boolean> enableJmx = Optional.empty();
        private ImmutableList.Builder<MailetConfiguration> mailets;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'authorizedAddresses'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
    }

    private final Optional<String> authorizedAddresses;
    private final boolean authRequired;
    private final boolean bracketEnforcement;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'authorizedAddresses'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> verifyIndentity;
        private Optional<Boolean> bracketEnforcement;
        private Optional<String> authorizedAddresses;
        private ImmutableList.Builder<HookConfigurationEntry> addittionalHooks;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'authRequired'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        private static final String DEFAULT_DISABLED = "0";

        private Optional<Boolean> authRequired;
        private Optional<String> maxMessageSize;
        private Optional<Boolean> verifyIndentity;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bracketEnforcement'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        private Optional<String> maxMessageSize;
        private Optional<Boolean> verifyIndentity;
        private Optional<Boolean> bracketEnforcement;
        private Optional<String> authorizedAddresses;
        private ImmutableList.Builder<HookConfigurationEntry> addittionalHooks;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxMessageSize'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java

        private Optional<Boolean> authRequired;
        private Optional<String> maxMessageSize;
        private Optional<Boolean> verifyIndentity;
        private Optional<Boolean> bracketEnforcement;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'verifyIndentity'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> authRequired;
        private Optional<String> maxMessageSize;
        private Optional<Boolean> verifyIndentity;
        private Optional<Boolean> bracketEnforcement;
        private Optional<String> authorizedAddresses;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'authorizedAddresses'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
    private final ImmutableList<HookConfigurationEntry> addittionalHooks;

    private SmtpConfiguration(Optional<String> authorizedAddresses, boolean authRequired, boolean bracketEnforcement,
                              boolean verifyIndentity, String maxMessageSize, ImmutableList<HookConfigurationEntry> addittionalHooks) {
        this.authorizedAddresses = authorizedAddresses;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'matcherCondition'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetConfiguration.java`
#### Snippet
```java

    private final Class<? extends Matcher> matcher;
    private final Optional<String> matcherCondition;
    private final Class<? extends Mailet> mailet;
    private final Map<String, String> properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'matcherCondition'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetConfiguration.java`
#### Snippet
```java

        private Class<? extends Matcher> matcher;
        private Optional<String> matcherCondition;
        private Class<? extends Mailet> mailet;
        private ImmutableMap.Builder<String, String> properties;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'matcherCondition'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetConfiguration.java`
#### Snippet
```java
    private final Map<String, String> properties;

    private MailetConfiguration(Class<? extends Matcher> matcher, Optional<String> matcherCondition, Class<? extends Mailet> mailet, ImmutableMap<String, String> properties) {
        this.matcher = matcher;
        this.matcherCondition = matcherCondition;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'module'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java
    public static class Builder {
        private ImmutableList.Builder<Module> overrideModules;
        private Optional<Module> module;
        private Optional<SmtpConfiguration> smtpConfiguration;
        private Optional<MailetContainer> mailetConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailetConfiguration'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java
        private Optional<Module> module;
        private Optional<SmtpConfiguration> smtpConfiguration;
        private Optional<MailetContainer> mailetConfiguration;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'smtpConfiguration'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java
        private ImmutableList.Builder<Module> overrideModules;
        private Optional<Module> module;
        private Optional<SmtpConfiguration> smtpConfiguration;
        private Optional<MailetContainer> mailetConfiguration;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'charset'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ReplaceContent.java`
#### Snippet
```java
    private static final String PARAMETER_NAME_CHARSET = "charset";

    private Optional<Charset> charset;
    private boolean debug;
    @VisibleForTesting ReplaceConfig replaceConfig;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private boolean applyBodyReplacingUnits(Mail mail, ReplaceConfig replaceConfig, Optional<Charset> charset) throws IOException, MessagingException, ParseException {
        if (!replaceConfig.getBodyReplacingUnits().isEmpty()) {
            Object bodyObj = mail.getMessage().getContent();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeCharset'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private boolean applySubjectReplacingUnits(Mail mail, ReplaceConfig replaceConfig, Optional<Charset> maybeCharset) throws MessagingException {
        if (!replaceConfig.getSubjectReplacingUnits().isEmpty()) {
            String subject = applyPatterns(replaceConfig.getSubjectReplacingUnits(), 
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    public void replaceMailContentAndSubject(Mail mail, ReplaceConfig replaceConfig, Optional<Charset> charset) throws MailetException {
        try {
            boolean subjectChanged = applySubjectReplacingUnits(mail, replaceConfig, charset);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private void setContent(Mail mail, String body, Optional<Charset> charset) throws MessagingException, ParseException {
        mail.getMessage().setContent(body, getContentType(mail, charset));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ContentReplacer.java`
#### Snippet
```java
    }

    private String getContentType(Mail mail, Optional<Charset> charset) throws MessagingException, ParseException {
        String contentTypeAsString = mail.getMessage().getContentType();
        if (charset.isPresent()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultAge'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/Expires.java`
#### Snippet
```java
    private Optional<Duration> minAge = Optional.empty();
    private Optional<Duration> maxAge = Optional.empty();
    private Optional<Duration> defaultAge = Optional.empty();
    
    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxAge'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/Expires.java`
#### Snippet
```java

    private Optional<Duration> minAge = Optional.empty();
    private Optional<Duration> maxAge = Optional.empty();
    private Optional<Duration> defaultAge = Optional.empty();
    
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minAge'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/Expires.java`
#### Snippet
```java
    private final Clock clock;

    private Optional<Duration> minAge = Optional.empty();
    private Optional<Duration> maxAge = Optional.empty();
    private Optional<Duration> defaultAge = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'a'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/Expires.java`
#### Snippet
```java
    }
    
    private boolean isAfter(Optional<Duration> a, Optional<Duration> b) {
        return a.isPresent() && b.isPresent() && a.get().compareTo(b.get()) > 0;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'b'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/Expires.java`
#### Snippet
```java
    }
    
    private boolean isAfter(Optional<Duration> a, Optional<Duration> b) {
        return a.isPresent() && b.isPresent() && a.get().compareTo(b.get()) > 0;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'noticeText'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ToProcessor.java`
#### Snippet
```java
    private boolean debug;
    private ProcessingState processor;
    private Optional<String> noticeText;

    @Override
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'newSubject'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/utils/MimeMessageModifier.java`
#### Snippet
```java
    }

    public void replaceSubject(Optional<String> newSubject) throws MessagingException {
        if (newSubject.isPresent()) {
            message.setSubject(null);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'attributeName'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
    @VisibleForTesting String removeAttachments;
    private String directoryName;
    private Optional<AttributeName> attributeName;
    private Optional<Pattern> regExPattern;
    private Optional<Pattern> notRegExPattern;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'pattern'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
    }

    private Optional<Boolean> isMatchingPattern(String name, Optional<Pattern> pattern) {
        return pattern.map(p -> p.matcher(name).matches());
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'regExPattern'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
    private String directoryName;
    private Optional<AttributeName> attributeName;
    private Optional<Pattern> regExPattern;
    private Optional<Pattern> notRegExPattern;
    private String mimeType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileName'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     * @throws Exception
     */
    @VisibleForTesting Optional<String> saveAttachmentToFile(Part part, Optional<String> fileName) throws Exception {
        try {
            File outputFile = outputFile(part, fileName);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'notRegExPattern'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
    private Optional<AttributeName> attributeName;
    private Optional<Pattern> regExPattern;
    private Optional<Pattern> notRegExPattern;
    private String mimeType;
    private boolean decodeFilename;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileName'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
    }

    private File outputFile(Part part, Optional<String> fileName) throws MessagingException, IOException {
        Optional<String> maybePartFileName = Optional.ofNullable(part.getFileName());
        return createTempFile(fileName.orElse(maybePartFileName.orElse(null)));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeConfiguration'
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasMimeTypeParameter.java`
#### Snippet
```java
    }

    private List<Pair<String, String>> parseConfigurationString(Optional<String> maybeConfiguration) {
        return maybeConfiguration
            .map(tokenizeConfiguration())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'group'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/ListenerConfiguration.java`
#### Snippet
```java
    private final Optional<Boolean> isAsync;

    private ListenerConfiguration(String clazz, Optional<String> group, Optional<HierarchicalConfiguration<ImmutableNode>> configuration, Optional<Boolean> isAsync) {
        this.clazz = clazz;
        this.group = group;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'configuration'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/ListenerConfiguration.java`
#### Snippet
```java
    private final Optional<Boolean> isAsync;

    private ListenerConfiguration(String clazz, Optional<String> group, Optional<HierarchicalConfiguration<ImmutableNode>> configuration, Optional<Boolean> isAsync) {
        this.clazz = clazz;
        this.group = group;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isAsync'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/ListenerConfiguration.java`
#### Snippet
```java
    private final Optional<Boolean> isAsync;

    private ListenerConfiguration(String clazz, Optional<String> group, Optional<HierarchicalConfiguration<ImmutableNode>> configuration, Optional<Boolean> isAsync) {
        this.clazz = clazz;
        this.group = group;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'group'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/ListenerConfiguration.java`
#### Snippet
```java

    private final String clazz;
    private final Optional<String> group;
    private final Optional<HierarchicalConfiguration<ImmutableNode>> configuration;
    private final Optional<Boolean> isAsync;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'configuration'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/ListenerConfiguration.java`
#### Snippet
```java
    private final String clazz;
    private final Optional<String> group;
    private final Optional<HierarchicalConfiguration<ImmutableNode>> configuration;
    private final Optional<Boolean> isAsync;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isAsync'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/ListenerConfiguration.java`
#### Snippet
```java
    private final Optional<String> group;
    private final Optional<HierarchicalConfiguration<ImmutableNode>> configuration;
    private final Optional<Boolean> isAsync;

    private ListenerConfiguration(String clazz, Optional<String> group, Optional<HierarchicalConfiguration<ImmutableNode>> configuration, Optional<Boolean> isAsync) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'clazz'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/MailboxListenerFactory.java`
#### Snippet
```java
    public static class MailboxListenerBuilder {
        private final GuiceGenericLoader genericLoader;
        private Optional<ClassName> clazz;
        private Optional<EventListener.ExecutionMode> executionMode;
        private Optional<HierarchicalConfiguration<ImmutableNode>> configuration;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'configuration'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/MailboxListenerFactory.java`
#### Snippet
```java
        }

        public MailboxListenerBuilder withConfiguration(Optional<HierarchicalConfiguration<ImmutableNode>> configuration) {
            configuration.ifPresent(this::withConfiguration);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'executionMode'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/MailboxListenerFactory.java`
#### Snippet
```java
        }

        public MailboxListenerBuilder withExecutionMode(Optional<EventListener.ExecutionMode> executionMode) {
            executionMode.ifPresent(this::withExecutionMode);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'configuration'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/MailboxListenerFactory.java`
#### Snippet
```java
        private Optional<ClassName> clazz;
        private Optional<EventListener.ExecutionMode> executionMode;
        private Optional<HierarchicalConfiguration<ImmutableNode>> configuration;

        public MailboxListenerBuilder(GuiceGenericLoader genericLoader) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'executionMode'
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/mailbox/MailboxListenerFactory.java`
#### Snippet
```java
        private final GuiceGenericLoader genericLoader;
        private Optional<ClassName> clazz;
        private Optional<EventListener.ExecutionMode> executionMode;
        private Optional<HierarchicalConfiguration<ImmutableNode>> configuration;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskDTO.java`
#### Snippet
```java
    private final String type;
    private final String username;
    private final Optional<RunningOptionsDTO> runningOptions;

    private UserReindexingTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskDTO.java`
#### Snippet
```java
    private UserReindexingTaskDTO(@JsonProperty("type") String type,
                                  @JsonProperty("username") String username,
                                  @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.username = username;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/FullReindexingTaskDTO.java`
#### Snippet
```java

    private final String type;
    private final Optional<RunningOptionsDTO> runningOptions;

    public FullReindexingTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/FullReindexingTaskDTO.java`
#### Snippet
```java

    public FullReindexingTaskDTO(@JsonProperty("type") String type,
                                 @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.runningOptions = runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskDTO.java`
#### Snippet
```java
    private final String type;
    private final String mailboxId;
    private final Optional<RunningOptionsDTO> runningOptions;

    public SingleMailboxReindexingTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskDTO.java`
#### Snippet
```java
    public SingleMailboxReindexingTaskDTO(@JsonProperty("type") String type,
                                          @JsonProperty("mailboxId") String mailboxId,
                                          @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.mailboxId = mailboxId;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messagesPerSecond'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/RunningOptionsDTO.java`
#### Snippet
```java

    @JsonCreator
    public RunningOptionsDTO(@JsonProperty("messagesPerSecond") Optional<Integer> messagesPerSecond,
                             @JsonProperty("mode") Optional<RunningOptions.Mode> mode) {
        this.messagesPerSecond = messagesPerSecond;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mode'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/RunningOptionsDTO.java`
#### Snippet
```java
    @JsonCreator
    public RunningOptionsDTO(@JsonProperty("messagesPerSecond") Optional<Integer> messagesPerSecond,
                             @JsonProperty("mode") Optional<RunningOptions.Mode> mode) {
        this.messagesPerSecond = messagesPerSecond;
        this.mode = mode;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messagesPerSecond'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/RunningOptionsDTO.java`
#### Snippet
```java
    }

    private final Optional<Integer> messagesPerSecond;
    private final Optional<RunningOptions.Mode> mode;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mode'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/RunningOptionsDTO.java`
#### Snippet
```java

    private final Optional<Integer> messagesPerSecond;
    private final Optional<RunningOptions.Mode> mode;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'failures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                       @JsonProperty("successfullyReprocessedMailCount") int successfullyReprocessedMailCount,
                                                       @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                                                       @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                                                       @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                                                       @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                       @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                                                       @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                                                       @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                                                       @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                                       @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                       @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                                                       @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                                                       @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                                       @JsonProperty("timestamp") Instant timestamp,
                                                       @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                       @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                                       @JsonProperty("timestamp") Instant timestamp,
                                                       @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions
                                                       ) {
        this.user = user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ErrorRecoveryIndexationTaskDTO.java`
#### Snippet
```java
    private final List<ReindexingFailureDTO> previousMessageFailures;
    private final  Optional<List<String>> previousMailboxFailures;
    private final Optional<RunningOptionsDTO> runningOptions;

    private ErrorRecoveryIndexationTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'previousMailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ErrorRecoveryIndexationTaskDTO.java`
#### Snippet
```java
    private ErrorRecoveryIndexationTaskDTO(@JsonProperty("type") String type,
                                           @JsonProperty("previousFailures") List<ReindexingFailureDTO> previousMessageFailures,
                                           @JsonProperty("previousMailboxFailures") Optional<List<String>> previousMailboxFailures,
                                           @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ErrorRecoveryIndexationTaskDTO.java`
#### Snippet
```java
                                           @JsonProperty("previousFailures") List<ReindexingFailureDTO> previousMessageFailures,
                                           @JsonProperty("previousMailboxFailures") Optional<List<String>> previousMailboxFailures,
                                           @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.previousMessageFailures = previousMessageFailures;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'previousMailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ErrorRecoveryIndexationTaskDTO.java`
#### Snippet
```java
    private final String type;
    private final List<ReindexingFailureDTO> previousMessageFailures;
    private final  Optional<List<String>> previousMailboxFailures;
    private final Optional<RunningOptionsDTO> runningOptions;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ErrorRecoveryIndexationTask.java`
#### Snippet
```java
        }

        private List<MailboxId> mailboxFailuresFromDTO(Optional<List<String>> mailboxFailures) {
            return mailboxFailures.map(mailboxIdList ->
                    mailboxIdList.stream()
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'failures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                @JsonProperty("successfullyReprocessedMailCount") int successfullyReprocessedMailCount,
                                                                @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                                                                @JsonProperty("failures") Optional<List<ReIndexingContextInformationDTO.ReindexingFailureDTO>> failures,
                                                                @JsonProperty("messageFailures") Optional<List<ReIndexingContextInformationDTO.ReindexingFailureDTO>> messageFailures,
                                                                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                                                                @JsonProperty("failures") Optional<List<ReIndexingContextInformationDTO.ReindexingFailureDTO>> failures,
                                                                @JsonProperty("messageFailures") Optional<List<ReIndexingContextInformationDTO.ReindexingFailureDTO>> messageFailures,
                                                                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                                                @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                @JsonProperty("failures") Optional<List<ReIndexingContextInformationDTO.ReindexingFailureDTO>> failures,
                                                                @JsonProperty("messageFailures") Optional<List<ReIndexingContextInformationDTO.ReindexingFailureDTO>> messageFailures,
                                                                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                                                @JsonProperty("timestamp") Instant timestamp,
                                                                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                                                @JsonProperty("timestamp") Instant timestamp,
                                                                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.mailboxId = mailboxId;
        this.reIndexingContextInformationDTO = new ReIndexingContextInformationDTO(
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'failures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
    }

    static List<ReindexingFailureDTO> resolveFailure(Optional<List<ReindexingFailureDTO>> failures, Optional<List<ReindexingFailureDTO>> messageFailures) {
        Preconditions.checkState(failures.isPresent() ^ messageFailures.isPresent(),
            "Exactly one field 'failures' or 'messageFailures' need to be specified");
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
    }

    static List<ReindexingFailureDTO> resolveFailure(Optional<List<ReindexingFailureDTO>> failures, Optional<List<ReindexingFailureDTO>> messageFailures) {
        Preconditions.checkState(failures.isPresent() ^ messageFailures.isPresent(),
            "Exactly one field 'failures' or 'messageFailures' need to be specified");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
    protected final Optional<List<String>> mailboxFailures;
    protected final Instant timestamp;
    protected final Optional<RunningOptionsDTO> runningOptions;

    ReIndexingContextInformationDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
    protected final int failedReprocessedMailCount;
    protected final List<ReindexingFailureDTO> messageFailures;
    protected final Optional<List<String>> mailboxFailures;
    protected final Instant timestamp;
    protected final Optional<RunningOptionsDTO> runningOptions;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'failures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("successfullyReprocessedMailCount") int successfullyReprocessedMailCount,
                @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                @JsonProperty("timestamp") Instant timestamp,
                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                @JsonProperty("timestamp") Instant timestamp,
                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
                super(type, successfullyReprocessedMailCount, failedReprocessedMailCount, failures, messageFailures, mailboxFailures, timestamp, runningOptions);
            }
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'failures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                                    @JsonProperty("successfullyReprocessedMailCount") int successfullyReprocessedMailCount,
                                    @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                                    @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                                    @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                                    @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                                    @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                                    @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                                    @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                                    @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                    @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                                    @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                                    @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                                    @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                    @JsonProperty("timestamp") Instant timestamp,
                                    @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                                    @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                                    @JsonProperty("timestamp") Instant timestamp,
                                    @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
        this.type = type;
        this.successfullyReprocessedMailCount = successfullyReprocessedMailCount;
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'failures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("successfullyReprocessedMailCount") int successfullyReprocessedMailCount,
                @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'messageFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("failedReprocessedMailCount") int failedReprocessedMailCount,
                @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                @JsonProperty("timestamp") Instant timestamp,
```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for parameter 'mailboxFailures'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("failures") Optional<List<ReindexingFailureDTO>> failures,
                @JsonProperty("messageFailures") Optional<List<ReindexingFailureDTO>> messageFailures,
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                @JsonProperty("timestamp") Instant timestamp,
                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'runningOptions'
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                @JsonProperty("mailboxFailures") Optional<List<String>> mailboxFailures,
                @JsonProperty("timestamp") Instant timestamp,
                @JsonProperty("runningOptions") Optional<RunningOptionsDTO> runningOptions) {
                super(type, successfullyReprocessedMailCount, failedReprocessedMailCount, failures, messageFailures, mailboxFailures, timestamp, runningOptions);
            }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultValue'
in `mailet/base/src/main/java/org/apache/mailet/base/MailetUtil.java`
#### Snippet
```java
    }

    public static int getInitParameterAsInteger(String condition, Optional<Integer> defaultValue) throws MessagingException {
        if (Strings.isNullOrEmpty(condition) && defaultValue.isEmpty()) {
            throw new MessagingException("Condition is required. It should be a strictly positive integer");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultValue'
in `mailet/base/src/main/java/org/apache/mailet/base/MailetUtil.java`
#### Snippet
```java
    }

    private static int getInitParameterAsStrictlyPositiveInteger(String condition, Optional<Integer> defaultValue) throws MessagingException {
        int valueAsInt = getInitParameterAsInteger(condition, defaultValue);

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'missingPOP3Entries'
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> processedPop3MetaDataStoreEntries;
                private Optional<Long> stalePOP3Entries;
                private Optional<Long> missingPOP3Entries;
                private ImmutableList.Builder<MessageInconsistenciesEntry> fixedInconsistencies;
                private ImmutableList.Builder<MessageInconsistenciesEntry> errors;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'stalePOP3Entries'
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> processedImapUidEntries;
                private Optional<Long> processedPop3MetaDataStoreEntries;
                private Optional<Long> stalePOP3Entries;
                private Optional<Long> missingPOP3Entries;
                private ImmutableList.Builder<MessageInconsistenciesEntry> fixedInconsistencies;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'processedImapUidEntries'
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesService.java`
#### Snippet
```java

            static class Builder {
                private Optional<Long> processedImapUidEntries;
                private Optional<Long> processedPop3MetaDataStoreEntries;
                private Optional<Long> stalePOP3Entries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'processedPop3MetaDataStoreEntries'
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesService.java`
#### Snippet
```java
            static class Builder {
                private Optional<Long> processedImapUidEntries;
                private Optional<Long> processedPop3MetaDataStoreEntries;
                private Optional<Long> stalePOP3Entries;
                private Optional<Long> missingPOP3Entries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'frameHandlerFactory'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/NettyServer.java`
#### Snippet
```java
        private boolean proxyRequired;
        private Optional<Encryption> secure;
        private Optional<ChannelHandlerFactory> frameHandlerFactory;

        @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'secure'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/NettyServer.java`
#### Snippet
```java
        private Protocol protocol;
        private boolean proxyRequired;
        private Optional<Encryption> secure;
        private Optional<ChannelHandlerFactory> frameHandlerFactory;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionLimitUpstreamHandler'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/AbstractChannelPipelineFactory.java`
#### Snippet
```java
    private final int timeout;
    private final boolean proxyRequired;
    private final Optional<ConnectionLimitUpstreamHandler> connectionLimitUpstreamHandler;
    private final Optional<ConnectionPerIpLimitUpstreamHandler> connectionPerIpLimitUpstreamHandler;
    private final ChannelHandlerFactory frameHandlerFactory;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionPerIpLimitUpstreamHandler'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/AbstractChannelPipelineFactory.java`
#### Snippet
```java
    private final boolean proxyRequired;
    private final Optional<ConnectionLimitUpstreamHandler> connectionLimitUpstreamHandler;
    private final Optional<ConnectionPerIpLimitUpstreamHandler> connectionPerIpLimitUpstreamHandler;
    private final ChannelHandlerFactory frameHandlerFactory;
    private final EventExecutorGroup eventExecutorGroup;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bossWorker'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/AbstractAsyncServer.java`
#### Snippet
```java
     * Default is to not use boss threads and let the IO threads hand over this responsibility.
     */
    public void setBossWorkerCount(Optional<Integer> bossWorker) {
        if (started) {
            throw new IllegalStateException("Can only be set when the server is not running");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bossWorker'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/AbstractAsyncServer.java`
#### Snippet
```java

    private volatile int ioWorker = DEFAULT_IO_WORKER_COUNT;
    private volatile Optional<Integer> bossWorker = Optional.of(DEFAULT_BOSS_WORKER_COUNT);

    private List<InetSocketAddress> addresses = new ArrayList<>();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bossGroup'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/AbstractAsyncServer.java`
#### Snippet
```java
    private volatile int timeout = 120;

    private Optional<EventLoopGroup> bossGroup;
    private EventLoopGroup workerGroup;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersRepositoryImplementation'
in `server/apps/memory-app/src/main/java/org/apache/james/MemoryJamesConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<Boolean> jmapEnabled;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/memory-app/src/main/java/org/apache/james/MemoryJamesConfiguration.java`
#### Snippet
```java
public class MemoryJamesConfiguration implements Configuration {
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jmapEnabled'
in `server/apps/memory-app/src/main/java/org/apache/james/MemoryJamesConfiguration.java`
#### Snippet
```java
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<Boolean> jmapEnabled;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/memory-app/src/main/java/org/apache/james/MemoryJamesConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<Boolean> jmapEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lineHandler'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/BasicChannelInboundHandler.java`
#### Snippet
```java
    private final ProtocolMDCContextFactory mdcContextFactory;
    private final Deque<ChannelInboundHandlerAdapter> behaviourOverrides = new ConcurrentLinkedDeque<>();
    private final Optional<LineHandler> lineHandler;
    protected final LinkedList<ProtocolHandlerResultHandler> resultHandlers;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'matchingValue'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Condition.java`
#### Snippet
```java
    class Builder {
        private Operator.OperatorName operator;
        private Optional<String> matchingValue;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'numberOfAnswers'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/MockSMTPBehavior.java`
#### Snippet
```java
        private Condition condition;
        private Response response;
        private Optional<NumberOfAnswersPolicy> numberOfAnswers;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'numberOfAnswers'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/MockSMTPBehavior.java`
#### Snippet
```java
        }

        public Builder numberOfAnswer(Optional<NumberOfAnswersPolicy> numberOfAnswers) {
            this.numberOfAnswers = numberOfAnswers;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'numberOfAnswers'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/MockSMTPBehavior.java`
#### Snippet
```java
        private final Optional<Integer> numberOfAnswers;

        private NumberOfAnswersPolicy(Optional<Integer> numberOfAnswers) {
            this.numberOfAnswers = numberOfAnswers;
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'numberOfAnswers'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/MockSMTPBehavior.java`
#### Snippet
```java
        }

        private final Optional<Integer> numberOfAnswers;

        private NumberOfAnswersPolicy(Optional<Integer> numberOfAnswers) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'port'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/HTTPConfigurationServer.java`
#### Snippet
```java
        private final Optional<Port> port;

        Configuration(Optional<Port> port) {
            this.port = port;
        }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/HTTPConfigurationServer.java`
#### Snippet
```java
        }

        private final Optional<Port> port;

        Configuration(Optional<Port> port) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cryptoConfig'
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java
    }

    public static Module chooseEncryptionModule(Optional<CryptoConfig> cryptoConfig) {
        Optional<Module> encryptionModule = cryptoConfig.map(EncryptionModule::new);
        return encryptionModule.orElse(new NoEncryptionModule());
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cryptoConfig'
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreConfiguration.java`
#### Snippet
```java

    private final StorageStrategy storageStrategy;
    private final Optional<CryptoConfig> cryptoConfig;

    BlobStoreConfiguration(StorageStrategy storageStrategy, Optional<CryptoConfig> cryptoConfig) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cryptoConfig'
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreConfiguration.java`
#### Snippet
```java
    private final Optional<CryptoConfig> cryptoConfig;

    BlobStoreConfiguration(StorageStrategy storageStrategy, Optional<CryptoConfig> cryptoConfig) {

        this.storageStrategy = storageStrategy;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'cryptoConfig'
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreConfiguration.java`
#### Snippet
```java
    @FunctionalInterface
    public interface RequireCryptoConfig {
        BlobStoreConfiguration cryptoConfig(Optional<CryptoConfig> cryptoConfig);

        default BlobStoreConfiguration noCryptoConfig() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/scaling-pulsar-smtp/src/main/java/org/apache/james/SMTPRelayConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/scaling-pulsar-smtp/src/main/java/org/apache/james/SMTPRelayConfiguration.java`
#### Snippet
```java
public class SMTPRelayConfiguration implements Configuration {
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/MessageIdExtraField.java`
#### Snippet
```java
    }

    public MessageIdExtraField(Optional<String> value) {
        super(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/SizeExtraField.java`
#### Snippet
```java
    }

    public SizeExtraField(Optional<Long> value) {
        super(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/MailboxIdExtraField.java`
#### Snippet
```java
    }

    public MailboxIdExtraField(Optional<String> value) {
        super(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'next'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZipEntryIterator.java`
#### Snippet
```java
public class ZipEntryIterator implements Iterator<ZipEntry>, Closeable {
    private final ZipInputStream zipInputStream;
    private Optional<ZipEntry> next;

    private static final Logger LOGGER = LoggerFactory.getLogger(ZipEntryIterator.class);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'next'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZippedMailAccountIterator.java`
#### Snippet
```java
    private static final List<MailboxAnnotation> NO_ANNOTATION = ImmutableList.of();
    private final ZipEntryIterator zipEntryIterator;
    private Optional<ZipEntry> next;

    public ZippedMailAccountIterator(ZipEntryIterator zipEntryIterator) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'date'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/InternalDateExtraField.java`
#### Snippet
```java
    }

    public InternalDateExtraField(Optional<Date> date) {
        super(date
            .map(Date::getTime));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/UidExtraField.java`
#### Snippet
```java
    }

    public UidExtraField(Optional<Long> value) {
        super(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/LongExtraField.java`
#### Snippet
```java
    }

    LongExtraField(Optional<Long> value) {
        this.value = value;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/LongExtraField.java`
#### Snippet
```java
public abstract class LongExtraField implements ZipExtraField {

    private Optional<Long> value;

    LongExtraField() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/UidValidityExtraField.java`
#### Snippet
```java
    }

    public UidValidityExtraField(Optional<Long> value) {
        super(value);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/StringExtraField.java`
#### Snippet
```java
    }

    public StringExtraField(Optional<String> value) {
        this.value = value;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/StringExtraField.java`
#### Snippet
```java
public abstract class StringExtraField implements ZipExtraField {

    private Optional<String> value;

    public StringExtraField() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'searchConfiguration'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
public class CassandraJamesServerConfiguration implements Configuration {
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'vaultConfiguration'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersRepositoryImplementation'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<ConfigurationPath> configurationPath;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'blobStoreConfiguration'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<SearchConfiguration> searchConfiguration;
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<BlobStoreConfiguration> blobStoreConfiguration;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jmapEnabled'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'enabled'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java

    @JsonCreator
    private VacationDTO(@JsonProperty("enabled") Optional<Boolean> enabled,
                        @JsonProperty("fromDate") Optional<ZonedDateTime> fromDate,
                        @JsonProperty("toDate") Optional<ZonedDateTime> toDate,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromDate'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    @JsonCreator
    private VacationDTO(@JsonProperty("enabled") Optional<Boolean> enabled,
                        @JsonProperty("fromDate") Optional<ZonedDateTime> fromDate,
                        @JsonProperty("toDate") Optional<ZonedDateTime> toDate,
                        @JsonProperty("subject") Optional<String> subject,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'toDate'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    private VacationDTO(@JsonProperty("enabled") Optional<Boolean> enabled,
                        @JsonProperty("fromDate") Optional<ZonedDateTime> fromDate,
                        @JsonProperty("toDate") Optional<ZonedDateTime> toDate,
                        @JsonProperty("subject") Optional<String> subject,
                        @JsonProperty("textBody") Optional<String> textBody,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
                        @JsonProperty("fromDate") Optional<ZonedDateTime> fromDate,
                        @JsonProperty("toDate") Optional<ZonedDateTime> toDate,
                        @JsonProperty("subject") Optional<String> subject,
                        @JsonProperty("textBody") Optional<String> textBody,
                        @JsonProperty("htmlBody") Optional<String> htmlBody) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
                        @JsonProperty("toDate") Optional<ZonedDateTime> toDate,
                        @JsonProperty("subject") Optional<String> subject,
                        @JsonProperty("textBody") Optional<String> textBody,
                        @JsonProperty("htmlBody") Optional<String> htmlBody) {
        this.enabled = enabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
                        @JsonProperty("subject") Optional<String> subject,
                        @JsonProperty("textBody") Optional<String> textBody,
                        @JsonProperty("htmlBody") Optional<String> htmlBody) {
        this.enabled = enabled;
        this.fromDate = fromDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enabled'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    }

    private final Optional<Boolean> enabled;
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    private final Optional<String> subject;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;

    @JsonCreator
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'toDate'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    private final Optional<Boolean> enabled;
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
    private final Optional<String> textBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromDate'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/VacationDTO.java`
#### Snippet
```java

    private final Optional<Boolean> enabled;
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'oidcSASLConfiguration'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyImapSession.java`
#### Snippet
```java

    public NettyImapSession(Channel channel, Encryption secure, boolean compress, boolean requiredSSL, boolean plainAuthEnabled, SessionId sessionId,
                            Optional<OidcSASLConfiguration> oidcSASLConfiguration) {
        this.channel = channel;
        this.secure = secure;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'oidcSASLConfiguration'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyImapSession.java`
#### Snippet
```java
    private final SessionId sessionId;
    private final boolean supportsOAuth;
    private final Optional<OidcSASLConfiguration> oidcSASLConfiguration;

    private volatile ImapSessionState state = ImapSessionState.NON_AUTHENTICATED;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'explanation'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/DLPConfigurationItemDTO.java`
#### Snippet
```java
    public DLPConfigurationItemDTO(@JsonProperty("id") String id,
                                   @JsonProperty("expression") String expression,
                                   @JsonProperty("explanation") Optional<String> explanation,
                                   @JsonProperty("targetsSender") boolean targetsSender,
                                   @JsonProperty("targetsRecipients") boolean targetsRecipients,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'explanation'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/dto/DLPConfigurationItemDTO.java`
#### Snippet
```java
    private final String id;
    private final String expression;
    private final Optional<String> explanation;
    private final boolean targetsSender;
    private final boolean targetsRecipients;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionLimitUpstreamHandler'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/IMAPServer.java`
#### Snippet
```java
    private int literalSizeLimit;
    private AuthenticationConfiguration authenticationConfiguration;
    private Optional<ConnectionLimitUpstreamHandler> connectionLimitUpstreamHandler = Optional.empty();
    private Optional<ConnectionPerIpLimitUpstreamHandler> connectionPerIpLimitUpstreamHandler = Optional.empty();
    private boolean ignoreIDLEUponProcessing;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'connectionPerIpLimitUpstreamHandler'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/IMAPServer.java`
#### Snippet
```java
    private AuthenticationConfiguration authenticationConfiguration;
    private Optional<ConnectionLimitUpstreamHandler> connectionLimitUpstreamHandler = Optional.empty();
    private Optional<ConnectionPerIpLimitUpstreamHandler> connectionPerIpLimitUpstreamHandler = Optional.empty();
    private boolean ignoreIDLEUponProcessing;
    private Duration heartbeatInterval;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'oidcSASLConfiguration'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/IMAPServer.java`
#### Snippet
```java
        private final boolean isSSLRequired;
        private final boolean plainAuthEnabled;
        private final Optional<OidcSASLConfiguration> oidcSASLConfiguration;

        public AuthenticationConfiguration(boolean isSSLRequired, boolean plainAuthEnabled) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageIdField'
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
    }

    private Optional<MessageId> toMessageId(Optional<String> messageIdField) {
        if (messageIdField.isPresent()) {
            return Optional.of(messageIdFactory.fromString(messageIdField.get()));
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTask.java`
#### Snippet
```java
    private final Username username;
    private final DeleteUserDataService.Performer performer;
    private final Optional<StepName> fromStep;

    public DeleteUserDataTask(DeleteUserDataService service, Username username, Optional<StepName> fromStep) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTask.java`
#### Snippet
```java
    private final Optional<StepName> fromStep;

    public DeleteUserDataTask(DeleteUserDataService service, Username username, Optional<StepName> fromStep) {
        this.username = username;
        this.performer = service.performer(fromStep);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTask.java`
#### Snippet
```java
        private final Optional<StepName> fromStep;

        public AdditionalInformation(Instant timestamp, Username username, Map<StepName, DeleteUserDataService.StepState> status, Optional<StepName> fromStep) {
            this.timestamp = timestamp;
            this.username = username;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTask.java`
#### Snippet
```java
        private final Username username;
        private final Map<StepName, DeleteUserDataService.StepState> status;
        private final Optional<StepName> fromStep;

        public AdditionalInformation(Instant timestamp, Username username, Map<StepName, DeleteUserDataService.StepState> status, Optional<StepName> fromStep) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'opt'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/routes/VacationRoutes.java`
#### Snippet
```java
    }

    private static <T> ValuePatch<T> updateOrKeep(Optional<T> opt) {
        return opt.map(ValuePatch::modifyTo).orElse(ValuePatch.keep());
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTask.java`
#### Snippet
```java
    private final Optional<StepName> fromStep;

    public UsernameChangeTask(UsernameChangeService service, Username oldUser, Username newUser, Optional<StepName> fromStep) {
        this.oldUser = oldUser;
        this.newUser = newUser;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTask.java`
#### Snippet
```java
        private final Optional<StepName> fromStep;

        public AdditionalInformation(Instant timestamp, Username oldUser, Username newUser, Map<StepName, UsernameChangeService.StepState> status, Optional<StepName> fromStep) {
            this.timestamp = timestamp;
            this.oldUser = oldUser;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTask.java`
#### Snippet
```java
    private final Username newUser;
    private final UsernameChangeService.Performer performer;
    private final Optional<StepName> fromStep;

    public UsernameChangeTask(UsernameChangeService service, Username oldUser, Username newUser, Optional<StepName> fromStep) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTask.java`
#### Snippet
```java
        private final Username newUser;
        private final Map<StepName, UsernameChangeService.StepState> status;
        private final Optional<StepName> fromStep;

        public AdditionalInformation(Instant timestamp, Username oldUser, Username newUser, Map<StepName, UsernameChangeService.StepState> status, Optional<StepName> fromStep) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTaskDTO.java`
#### Snippet
```java
                                 @JsonProperty("oldUser") String oldUser,
                                 @JsonProperty("newUser") String newUser,
                                 @JsonProperty("fromStep") Optional<String> fromStep) {
        this.type = type;
        this.oldUser = oldUser;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTaskDTO.java`
#### Snippet
```java
    private final String oldUser;
    private final String newUser;
    private final Optional<String> fromStep;

    public UsernameChangeTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTaskDTO.java`
#### Snippet
```java
    private final String type;
    private final String username;
    private final Optional<String> fromStep;

    public DeleteUserDataTaskDTO(@JsonProperty("type") String type,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTaskDTO.java`
#### Snippet
```java
    public DeleteUserDataTaskDTO(@JsonProperty("type") String type,
                                 @JsonProperty("username") String username,
                                 @JsonProperty("fromStep") Optional<String> fromStep) {
        this.type = type;
        this.username = username;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataService.java`
#### Snippet
```java
        private final Optional<Integer> correspondingPriority;

        public Performer(Set<DeleteUserDataTaskStep> steps, DeleteUserDataStatus status, Optional<StepName> fromStep) {
            this.steps = steps;
            this.status = status;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataService.java`
#### Snippet
```java
    }

    public Performer performer(Optional<StepName> fromStep) {
        return new Performer(steps, new DeleteUserDataStatus(steps), fromStep);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'correspondingPriority'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataService.java`
#### Snippet
```java
        private final Set<DeleteUserDataTaskStep> steps;
        private final DeleteUserDataStatus status;
        private final Optional<Integer> correspondingPriority;

        public Performer(Set<DeleteUserDataTaskStep> steps, DeleteUserDataStatus status, Optional<StepName> fromStep) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java

    private final boolean enabled;
    private final Optional<Port> port;
    private final boolean emailQueryViewEnabled;
    private final boolean userProvisioningEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultVersion'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> userProvisioningEnabled = Optional.empty();
        private Optional<Port> port = Optional.empty();
        private Optional<Version> defaultVersion = Optional.empty();
        private Optional<Long> maximumSendSize = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'userProvisioningEnabled'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<Boolean> emailQueryViewEnabled = Optional.empty();
        private Optional<Boolean> userProvisioningEnabled = Optional.empty();
        private Optional<Port> port = Optional.empty();
        private Optional<Version> defaultVersion = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'emailQueryViewEnabled'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<Boolean> emailQueryViewEnabled = Optional.empty();
        private Optional<Boolean> userProvisioningEnabled = Optional.empty();
        private Optional<Port> port = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maximumSendSize'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        private Optional<Port> port = Optional.empty();
        private Optional<Version> defaultVersion = Optional.empty();
        private Optional<Long> maximumSendSize = Optional.empty();

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'enabled'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Boolean> enabled = Optional.empty();
        private Optional<Boolean> emailQueryViewEnabled = Optional.empty();
        private Optional<Boolean> userProvisioningEnabled = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'port'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JMAPConfiguration(boolean enabled, Optional<Port> port, boolean emailQueryViewEnabled, boolean userProvisioningEnabled, Version defaultVersion, Optional<Long> maximumSendSize) {
        this.enabled = enabled;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maximumSendSize'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JMAPConfiguration(boolean enabled, Optional<Port> port, boolean emailQueryViewEnabled, boolean userProvisioningEnabled, Version defaultVersion, Optional<Long> maximumSendSize) {
        this.enabled = enabled;
        this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maximumSendSize'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        }

        public Builder maximumSendSize(Optional<Long> maximumSendSize) {
            this.maximumSendSize = maximumSendSize;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultVersion'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        }

        public Builder defaultVersion(Optional<Version> defaultVersion) {
            this.defaultVersion = defaultVersion;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'enabled'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        }

        public Builder userProvisioningEnabled(Optional<Boolean> enabled) {
            this.userProvisioningEnabled = enabled;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'enabled'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        }

        public Builder enableEmailQueryView(Optional<Boolean> enabled) {
            this.emailQueryViewEnabled = enabled;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> emailQueryViewEnabled = Optional.empty();
        private Optional<Boolean> userProvisioningEnabled = Optional.empty();
        private Optional<Port> port = Optional.empty();
        private Optional<Version> defaultVersion = Optional.empty();
        private Optional<Long> maximumSendSize = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maximumSendSize'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPConfiguration.java`
#### Snippet
```java
    private final boolean userProvisioningEnabled;
    private final Version defaultVersion;
    private final Optional<Long> maximumSendSize;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeService.java`
#### Snippet
```java
        private final Optional<Integer> correspondingPriority;

        public Performer(Set<UsernameChangeTaskStep> steps, UsernameChangeStatus status, Optional<StepName> fromStep) {
            this.steps = steps;
            this.status = status;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'correspondingPriority'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeService.java`
#### Snippet
```java
        private final Set<UsernameChangeTaskStep> steps;
        private final UsernameChangeStatus status;
        private final Optional<Integer> correspondingPriority;

        public Performer(Set<UsernameChangeTaskStep> steps, UsernameChangeStatus status, Optional<StepName> fromStep) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeService.java`
#### Snippet
```java
    }

    public Performer performer(Optional<StepName> fromStep) {
        return new Performer(steps, new UsernameChangeStatus(steps), fromStep);
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                      @JsonProperty("username") String username,
                                                      @JsonProperty("status") Map<String, String> status,
                                                      @JsonProperty("fromStep") Optional<String> fromStep,
                                                      @JsonProperty("timestamp") Instant timestamp) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String username;
    private final Map<String, String> status;
    private final Optional<String> fromStep;
    private final Instant timestamp;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessage'
in `mailbox/plugin/deleted-messages-vault-cassandra/src/main/java/org/apache/james/vault/metadata/DeletedMessageVaultDeletionCallback.java`
#### Snippet
```java
    }

    private MaybeSender retrieveSender(Optional<Message> mimeMessage) {
        return mimeMessage
            .map(Message::getSender)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maybeMessage'
in `mailbox/plugin/deleted-messages-vault-cassandra/src/main/java/org/apache/james/vault/metadata/DeletedMessageVaultDeletionCallback.java`
#### Snippet
```java
    }

    private Set<MailAddress> retrieveRecipients(Optional<Message> maybeMessage) {
        return maybeMessage.map(message -> Envelope.fromMime4JMessage(message, Envelope.ValidationPolicy.IGNORE))
            .map(Envelope::getRecipients)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessage'
in `mailbox/plugin/deleted-messages-vault-cassandra/src/main/java/org/apache/james/vault/metadata/DeletedMessageVaultDeletionCallback.java`
#### Snippet
```java


    private ZonedDateTime retrieveDeliveryDate(Optional<Message> mimeMessage, org.apache.james.mailbox.store.mail.model.Message message) {
        return mimeMessage.map(Message::getDate)
            .map(Date::toInstant)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'server'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/JMAPServer.java`
#### Snippet
```java
    private final Multimap<Version, JMAPRoute> routes;
    private final List<JMAPRoute> corsRoutes;
    private Optional<DisposableServer> server;

    @Inject
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'validationQuery'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> testOnBorrow;
        private Optional<Integer> validationQueryTimeoutSec;
        private Optional<String> validationQuery;
        private Optional<Integer> maxConnections;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_MAX_CONNECTIONS'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        static final Optional<Integer> NO_VALIDATION_QUERY_TIMEOUT_SEC = Optional.empty();
        static final Optional<String> NO_VALIDATION_QUERY = Optional.empty();
        static final Optional<Integer> NO_MAX_CONNECTIONS = Optional.empty();

        private final String driverName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_VALIDATION_QUERY_TIMEOUT_SEC'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    public static class ReadyToBuild {
        static final Optional<Boolean> NO_TEST_ON_BORROW = Optional.empty();
        static final Optional<Integer> NO_VALIDATION_QUERY_TIMEOUT_SEC = Optional.empty();
        static final Optional<String> NO_VALIDATION_QUERY = Optional.empty();
        static final Optional<Integer> NO_MAX_CONNECTIONS = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxConnections'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private Optional<Integer> validationQueryTimeoutSec;
        private Optional<String> validationQuery;
        private Optional<Integer> maxConnections;


```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'credential'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    private final Optional<Boolean> testOnBorrow;
    private final Optional<Integer> validationQueryTimeoutSec;
    private final Optional<Credential> credential;
    private final Optional<String> validationQuery;
    private final Optional<Integer> maxConnections;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_TEST_ON_BORROW'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java

    public static class ReadyToBuild {
        static final Optional<Boolean> NO_TEST_ON_BORROW = Optional.empty();
        static final Optional<Integer> NO_VALIDATION_QUERY_TIMEOUT_SEC = Optional.empty();
        static final Optional<String> NO_VALIDATION_QUERY = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'testOnBorrow'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java

        private Optional<Credential> credential;
        private Optional<Boolean> testOnBorrow;
        private Optional<Integer> validationQueryTimeoutSec;
        private Optional<String> validationQuery;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_CREDENTIAL'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    public static class Credential {
        private static final Logger LOGGER = LoggerFactory.getLogger(Credential.class);
        static final Optional<Credential> NO_CREDENTIAL = Optional.empty();

        public static Optional<Credential> of(String username, String password) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'credential'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java


        private ReadyToBuild(String driverName, String driverURL, Optional<Credential> credential,
                            Optional<Boolean> testOnBorrow, Optional<Integer> validationQueryTimeoutSec,
                            Optional<String> validationQuery,Optional<Integer> maxConnections
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'testOnBorrow'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java

        private ReadyToBuild(String driverName, String driverURL, Optional<Credential> credential,
                            Optional<Boolean> testOnBorrow, Optional<Integer> validationQueryTimeoutSec,
                            Optional<String> validationQuery,Optional<Integer> maxConnections
        ) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'validationQueryTimeoutSec'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java

        private ReadyToBuild(String driverName, String driverURL, Optional<Credential> credential,
                            Optional<Boolean> testOnBorrow, Optional<Integer> validationQueryTimeoutSec,
                            Optional<String> validationQuery,Optional<Integer> maxConnections
        ) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'validationQuery'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private ReadyToBuild(String driverName, String driverURL, Optional<Credential> credential,
                            Optional<Boolean> testOnBorrow, Optional<Integer> validationQueryTimeoutSec,
                            Optional<String> validationQuery,Optional<Integer> maxConnections
        ) {
            this.driverName = driverName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxConnections'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private ReadyToBuild(String driverName, String driverURL, Optional<Credential> credential,
                            Optional<Boolean> testOnBorrow, Optional<Integer> validationQueryTimeoutSec,
                            Optional<String> validationQuery,Optional<Integer> maxConnections
        ) {
            this.driverName = driverName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'NO_VALIDATION_QUERY'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        static final Optional<Boolean> NO_TEST_ON_BORROW = Optional.empty();
        static final Optional<Integer> NO_VALIDATION_QUERY_TIMEOUT_SEC = Optional.empty();
        static final Optional<String> NO_VALIDATION_QUERY = Optional.empty();
        static final Optional<Integer> NO_MAX_CONNECTIONS = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'credential'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private final String driverURL;

        private Optional<Credential> credential;
        private Optional<Boolean> testOnBorrow;
        private Optional<Integer> validationQueryTimeoutSec;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'validationQueryTimeoutSec'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private Optional<Credential> credential;
        private Optional<Boolean> testOnBorrow;
        private Optional<Integer> validationQueryTimeoutSec;
        private Optional<String> validationQuery;
        private Optional<Integer> maxConnections;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxConnections'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    private final Optional<Credential> credential;
    private final Optional<String> validationQuery;
    private final Optional<Integer> maxConnections;

    @VisibleForTesting
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'validationQueryTimeoutSec'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    private final String driverURL;
    private final Optional<Boolean> testOnBorrow;
    private final Optional<Integer> validationQueryTimeoutSec;
    private final Optional<Credential> credential;
    private final Optional<String> validationQuery;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'credential'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JPAConfiguration(String driverName, String driverURL, Optional<Credential> credential, Optional<Boolean> testOnBorrow,
                     Optional<Integer> validationQueryTimeoutSec, Optional<String> validationQuery, Optional<Integer> maxConnections) {
        Preconditions.checkNotNull(driverName, "driverName cannot be null");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'testOnBorrow'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    JPAConfiguration(String driverName, String driverURL, Optional<Credential> credential, Optional<Boolean> testOnBorrow,
                     Optional<Integer> validationQueryTimeoutSec, Optional<String> validationQuery, Optional<Integer> maxConnections) {
        Preconditions.checkNotNull(driverName, "driverName cannot be null");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'validationQueryTimeoutSec'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    JPAConfiguration(String driverName, String driverURL, Optional<Credential> credential, Optional<Boolean> testOnBorrow,
                     Optional<Integer> validationQueryTimeoutSec, Optional<String> validationQuery, Optional<Integer> maxConnections) {
        Preconditions.checkNotNull(driverName, "driverName cannot be null");
        Preconditions.checkNotNull(driverURL, "driverURL cannot be null");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'validationQuery'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    JPAConfiguration(String driverName, String driverURL, Optional<Credential> credential, Optional<Boolean> testOnBorrow,
                     Optional<Integer> validationQueryTimeoutSec, Optional<String> validationQuery, Optional<Integer> maxConnections) {
        Preconditions.checkNotNull(driverName, "driverName cannot be null");
        Preconditions.checkNotNull(driverURL, "driverURL cannot be null");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxConnections'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    JPAConfiguration(String driverName, String driverURL, Optional<Credential> credential, Optional<Boolean> testOnBorrow,
                     Optional<Integer> validationQueryTimeoutSec, Optional<String> validationQuery, Optional<Integer> maxConnections) {
        Preconditions.checkNotNull(driverName, "driverName cannot be null");
        Preconditions.checkNotNull(driverURL, "driverURL cannot be null");
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'validationQuery'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    private final Optional<Integer> validationQueryTimeoutSec;
    private final Optional<Credential> credential;
    private final Optional<String> validationQuery;
    private final Optional<Integer> maxConnections;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'testOnBorrow'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
    private final String driverName;
    private final String driverURL;
    private final Optional<Boolean> testOnBorrow;
    private final Optional<Integer> validationQueryTimeoutSec;
    private final Optional<Credential> credential;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTaskAdditionalInformationDTO.java`
#### Snippet
```java
                                                      @JsonProperty("newUser") String newUser,
                                                      @JsonProperty("status") Map<String, String> status,
                                                      @JsonProperty("fromStep") Optional<String> fromStep,
                                                      @JsonProperty("timestamp") Instant timestamp) {
        this.type = type;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromStep'
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTaskAdditionalInformationDTO.java`
#### Snippet
```java
    private final String newUser;
    private final Map<String, String> status;
    private final Optional<String> fromStep;
    private final Instant timestamp;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'errorMessage'
in `server/task/task-memory/src/main/java/org/apache/james/task/TaskManagerWorker.java`
#### Snippet
```java
        Publisher<Void> completed(TaskId taskId, Task.Result result, Publisher<Optional<TaskExecutionDetails.AdditionalInformation>> additionalInformationPublisher);

        Publisher<Void> failed(TaskId taskId, Publisher<Optional<TaskExecutionDetails.AdditionalInformation>> additionalInformationPublisher, Optional<String> errorMessage, Optional<Throwable> t);

        default Publisher<Void> failed(TaskId taskId, Publisher<Optional<TaskExecutionDetails.AdditionalInformation>> additionalInformationPublisher, Throwable t) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 't'
in `server/task/task-memory/src/main/java/org/apache/james/task/TaskManagerWorker.java`
#### Snippet
```java
        Publisher<Void> completed(TaskId taskId, Task.Result result, Publisher<Optional<TaskExecutionDetails.AdditionalInformation>> additionalInformationPublisher);

        Publisher<Void> failed(TaskId taskId, Publisher<Optional<TaskExecutionDetails.AdditionalInformation>> additionalInformationPublisher, Optional<String> errorMessage, Optional<Throwable> t);

        default Publisher<Void> failed(TaskId taskId, Publisher<Optional<TaskExecutionDetails.AdditionalInformation>> additionalInformationPublisher, Throwable t) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isEnabled'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder cacheEnable(Optional<Boolean> isEnabled) {
            Preconditions.checkNotNull(isEnabled);
            this.isCacheEnabled = isEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'timeoutInMillis'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        private Optional<String> host;
        private Optional<Integer> port;
        private Optional<Integer> timeoutInMillis;
        private Optional<Duration> cacheEvictionPeriod;
        private Optional<Long> cacheWeightInBytes;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cacheEvictionPeriod'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        private Optional<Integer> port;
        private Optional<Integer> timeoutInMillis;
        private Optional<Duration> cacheEvictionPeriod;
        private Optional<Long> cacheWeightInBytes;
        private ImmutableSet.Builder<MimeType> contentTypeBlacklist;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'timeoutInMillis'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder timeoutInMillis(Optional<Integer> timeoutInMillis) {
            Preconditions.checkNotNull(timeoutInMillis);
            this.timeoutInMillis = timeoutInMillis;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'port'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder port(Optional<Integer> port) {
            Preconditions.checkNotNull(port);
            this.port = port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'isEnabled'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder enable(Optional<Boolean> isEnabled) {
            Preconditions.checkNotNull(isEnabled);
            this.isEnabled = isEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'host'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder host(Optional<String> host) {
            Preconditions.checkNotNull(host);
            this.host = host;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'cacheWeightInBytes'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        private Optional<Integer> timeoutInMillis;
        private Optional<Duration> cacheEvictionPeriod;
        private Optional<Long> cacheWeightInBytes;
        private ImmutableSet.Builder<MimeType> contentTypeBlacklist;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'duration'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder cacheEvictionPeriod(Optional<Duration> duration) {
            this.cacheEvictionPeriod = duration;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'port'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> isCacheEnabled;
        private Optional<String> host;
        private Optional<Integer> port;
        private Optional<Integer> timeoutInMillis;
        private Optional<Duration> cacheEvictionPeriod;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isCacheEnabled'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> isEnabled;
        private Optional<Boolean> isCacheEnabled;
        private Optional<String> host;
        private Optional<Integer> port;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'weight'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        }

        public Builder cacheWeightInBytes(Optional<Long> weight) {
            this.cacheWeightInBytes = weight;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'host'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> isEnabled;
        private Optional<Boolean> isCacheEnabled;
        private Optional<String> host;
        private Optional<Integer> port;
        private Optional<Integer> timeoutInMillis;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isEnabled'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Boolean> isEnabled;
        private Optional<Boolean> isCacheEnabled;
        private Optional<String> host;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'expression'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java
        private EnumSet<Targets.Type> targets;
        private Optional<String> explanation;
        private Optional<String> expression;
        private Optional<Id> id;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'explanation'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java
        }

        public Builder explanation(Optional<String> explanation) {
            explanation.ifPresent(this::explanation);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'explanation'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java
    private final Targets targets;

    private DLPConfigurationItem(Id id, Optional<String> explanation, Pattern regexp, Targets targets) {
        this.id = id;
        this.explanation = explanation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'id'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java
        private Optional<String> explanation;
        private Optional<String> expression;
        private Optional<Id> id;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'explanation'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java

    private final Id id;
    private final Optional<String> explanation;
    private final Pattern regexp;
    private final Targets targets;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'explanation'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java

        private EnumSet<Targets.Type> targets;
        private Optional<String> explanation;
        private Optional<String> expression;
        private Optional<Id> id;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'expression'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java
        }

        public Builder expression(Optional<String> expression) {
            expression.ifPresent(this::expression);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'content'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaTextExtractor.java`
#### Snippet
```java
        }

        private final Optional<String> content;
        private final Map<String, List<String>> metadata;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'content'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaTextExtractor.java`
#### Snippet
```java
        }

        private ContentAndMetadata(Optional<String> content, Map<String, List<String>> metadata) {
            this.content = content;
            this.metadata = metadata;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java
    private final Optional<WildCard> wildcard;

    private MappingSource(Optional<Domain> domain, Optional<Username> user, Optional<WildCard> wildcard) {
        this.domain = domain;
        this.user = user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'user'
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java
    private final Optional<WildCard> wildcard;

    private MappingSource(Optional<Domain> domain, Optional<Username> user, Optional<WildCard> wildcard) {
        this.domain = domain;
        this.user = user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'wildcard'
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java
    private final Optional<WildCard> wildcard;

    private MappingSource(Optional<Domain> domain, Optional<Username> user, Optional<WildCard> wildcard) {
        this.domain = domain;
        this.user = user;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'user'
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java

    private final Optional<Domain> domain;
    private final Optional<Username> user;
    private final Optional<WildCard> wildcard;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'domain'
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java
    }

    private final Optional<Domain> domain;
    private final Optional<Username> user;
    private final Optional<WildCard> wildcard;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'wildcard'
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java
    private final Optional<Domain> domain;
    private final Optional<Username> user;
    private final Optional<WildCard> wildcard;

    private MappingSource(Optional<Domain> domain, Optional<Username> user, Optional<WildCard> wildcard) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'expiryDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/VacationService.java`
#### Snippet
```java
    Mono<Vacation> retrieveVacation(AccountId accountId);

    Mono<Void> registerNotification(AccountId accountId, RecipientId recipientId, Optional<ZonedDateTime> expiryDate);

    Mono<Boolean> isNotificationRegistered(AccountId accountId, RecipientId recipientId);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'expiryDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/NotificationRegistry.java`
#### Snippet
```java
public interface NotificationRegistry {

    Mono<Void> register(AccountId accountId, RecipientId recipientId, Optional<ZonedDateTime> expiryDate);

    Mono<Boolean> isRegistered(AccountId accountId, RecipientId recipientId);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'isEnabled'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Boolean> isEnabled = Optional.empty();
        private Optional<ZonedDateTime> fromDate = Optional.empty();
        private Optional<ZonedDateTime> toDate = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        }

        public Builder htmlBody(Optional<String> htmlBody) {
            Preconditions.checkNotNull(htmlBody);
            this.htmlBody = htmlBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        private Optional<String> textBody = Optional.empty();
        private Optional<String> subject = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();

        public Builder enabled(boolean enabled) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        }

        public Builder fromDate(Optional<ZonedDateTime> fromDate) {
            Preconditions.checkNotNull(fromDate);
            this.fromDate = fromDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java

    private final boolean isEnabled;
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fromDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    private final Optional<String> htmlBody;

    private Vacation(boolean isEnabled, Optional<ZonedDateTime> fromDate, Optional<ZonedDateTime> toDate,
                     Optional<String> textBody, Optional<String> subject, Optional<String> htmlBody) {
        this.isEnabled = isEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'toDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    private final Optional<String> htmlBody;

    private Vacation(boolean isEnabled, Optional<ZonedDateTime> fromDate, Optional<ZonedDateTime> toDate,
                     Optional<String> textBody, Optional<String> subject, Optional<String> htmlBody) {
        this.isEnabled = isEnabled;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java

    private Vacation(boolean isEnabled, Optional<ZonedDateTime> fromDate, Optional<ZonedDateTime> toDate,
                     Optional<String> textBody, Optional<String> subject, Optional<String> htmlBody) {
        this.isEnabled = isEnabled;
        this.fromDate = fromDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java

    private Vacation(boolean isEnabled, Optional<ZonedDateTime> fromDate, Optional<ZonedDateTime> toDate,
                     Optional<String> textBody, Optional<String> subject, Optional<String> htmlBody) {
        this.isEnabled = isEnabled;
        this.fromDate = fromDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'htmlBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java

    private Vacation(boolean isEnabled, Optional<ZonedDateTime> fromDate, Optional<ZonedDateTime> toDate,
                     Optional<String> textBody, Optional<String> subject, Optional<String> htmlBody) {
        this.isEnabled = isEnabled;
        this.fromDate = fromDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'toDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        private Optional<Boolean> isEnabled = Optional.empty();
        private Optional<ZonedDateTime> fromDate = Optional.empty();
        private Optional<ZonedDateTime> toDate = Optional.empty();
        private Optional<String> textBody = Optional.empty();
        private Optional<String> subject = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'htmlBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    private final Optional<String> subject;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;

    private Vacation(boolean isEnabled, Optional<ZonedDateTime> fromDate, Optional<ZonedDateTime> toDate,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'toDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        }

        public Builder toDate(Optional<ZonedDateTime> toDate) {
            Preconditions.checkNotNull(toDate);
            this.toDate = toDate;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        private Optional<ZonedDateTime> fromDate = Optional.empty();
        private Optional<ZonedDateTime> toDate = Optional.empty();
        private Optional<String> textBody = Optional.empty();
        private Optional<String> subject = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subject'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        }

        public Builder subject(Optional<String> subject) {
            Preconditions.checkNotNull(subject);
            this.subject = subject;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'textBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        }

        public Builder textBody(Optional<String> textBody) {
            Preconditions.checkNotNull(textBody);
            this.textBody = textBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
        private Optional<ZonedDateTime> toDate = Optional.empty();
        private Optional<String> textBody = Optional.empty();
        private Optional<String> subject = Optional.empty();
        private Optional<String> htmlBody = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subject'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'toDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    private final boolean isEnabled;
    private final Optional<ZonedDateTime> fromDate;
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
    private final Optional<String> textBody;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'textBody'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    private final Optional<ZonedDateTime> toDate;
    private final Optional<String> subject;
    private final Optional<String> textBody;
    private final Optional<String> htmlBody;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fromDate'
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/Vacation.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Boolean> isEnabled = Optional.empty();
        private Optional<ZonedDateTime> fromDate = Optional.empty();
        private Optional<ZonedDateTime> toDate = Optional.empty();
        private Optional<String> textBody = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'rootDirectory'
in `server/apps/jpa-smtp-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
public class JPAJamesConfiguration implements Configuration {
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'usersRepositoryImplementation'
in `server/apps/jpa-smtp-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'configurationPath'
in `server/apps/jpa-smtp-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> rootDirectory;
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'authorizationHeader'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/IntrospectionEndpoint.java`
#### Snippet
```java
public class IntrospectionEndpoint {
    private final URL url;
    private final Optional<String> authorizationHeader;

    public IntrospectionEndpoint(URL url, Optional<String> authorizationHeader) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'authorizationHeader'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/IntrospectionEndpoint.java`
#### Snippet
```java
    private final Optional<String> authorizationHeader;

    public IntrospectionEndpoint(URL url, Optional<String> authorizationHeader) {
        this.url = url;
        this.authorizationHeader = authorizationHeader;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'kid'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/JwksPublicKeyProvider.java`
#### Snippet
```java
    private final Optional<String> kid;

    private JwksPublicKeyProvider(URL jwksURL, Optional<String> kid) {
        Preconditions.checkNotNull(jwksURL);
        Preconditions.checkNotNull(kid);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'kid'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/JwksPublicKeyProvider.java`
#### Snippet
```java

    private final UrlJwkProvider jwkProvider;
    private final Optional<String> kid;

    private JwksPublicKeyProvider(URL jwksURL, Optional<String> kid) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'preferredUsername'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/userinfo/UserinfoResponse.java`
#### Snippet
```java
public class UserinfoResponse {
    private final String sub;
    private final Optional<String> preferredUsername;
    private final Optional<String> email;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'email'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/userinfo/UserinfoResponse.java`
#### Snippet
```java
    private final String sub;
    private final Optional<String> preferredUsername;
    private final Optional<String> email;

    private final JsonNode json;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'zonedDateTimeOptional'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/CassandraZonedDateTimeModule.java`
#### Snippet
```java
    }

    static Optional<UdtValue> toUDT(UserDefinedType zonedDateTimeUserType, Optional<ZonedDateTime> zonedDateTimeOptional) {
        return zonedDateTimeOptional.map(zonedDateTime -> toUDT(zonedDateTimeUserType, zonedDateTime));
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nbf'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<Integer> exp;
    private final Optional<Integer> iat;
    private final Optional<Integer> nbf;
    private final Optional<String> sub;
    private final Optional<String> aud;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'iss'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<String> sub;
    private final Optional<String> aud;
    private final Optional<String> iss;
    private final Optional<String> jti;
    private final JsonNode json;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sub'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<Integer> iat;
    private final Optional<Integer> nbf;
    private final Optional<String> sub;
    private final Optional<String> aud;
    private final Optional<String> iss;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'aud'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<Integer> nbf;
    private final Optional<String> sub;
    private final Optional<String> aud;
    private final Optional<String> iss;
    private final Optional<String> jti;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'iat'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<String> tokenType;
    private final Optional<Integer> exp;
    private final Optional<Integer> iat;
    private final Optional<Integer> nbf;
    private final Optional<String> sub;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jti'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<String> aud;
    private final Optional<String> iss;
    private final Optional<String> jti;
    private final JsonNode json;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'username'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<String> scope;
    private final Optional<String> clientId;
    private final Optional<String> username;
    private final Optional<String> tokenType;
    private final Optional<Integer> exp;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'exp'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<String> username;
    private final Optional<String> tokenType;
    private final Optional<Integer> exp;
    private final Optional<Integer> iat;
    private final Optional<Integer> nbf;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'tokenType'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final Optional<String> clientId;
    private final Optional<String> username;
    private final Optional<String> tokenType;
    private final Optional<Integer> exp;
    private final Optional<Integer> iat;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'clientId'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java
    private final boolean active;
    private final Optional<String> scope;
    private final Optional<String> clientId;
    private final Optional<String> username;
    private final Optional<String> tokenType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'scope'
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java

    private final boolean active;
    private final Optional<String> scope;
    private final Optional<String> clientId;
    private final Optional<String> username;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minDelay'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        private ImmutableList.Builder<Host> hosts;
        private boolean createKeyspace;
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetry;
        private Optional<String> username;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'minDelay'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        }

        public Builder minDelay(Optional<Integer> minDelay) {
            this.minDelay = minDelay;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'username'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetry;
        private Optional<String> username;
        private Optional<String> password;
        private Optional<String> localDC;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        private boolean createKeyspace;
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetry;
        private Optional<String> username;
        private Optional<String> password;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'localDC'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
    private final Optional<String> password;

    private ClusterConfiguration(List<Host> hosts, Optional<String> localDC, boolean createKeyspace, int minDelay, int maxRetry, Optional<String> username,
                                Optional<String> password) {
        this.hosts = hosts;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'username'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
    private final Optional<String> password;

    private ClusterConfiguration(List<Host> hosts, Optional<String> localDC, boolean createKeyspace, int minDelay, int maxRetry, Optional<String> username,
                                Optional<String> password) {
        this.hosts = hosts;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'password'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java

    private ClusterConfiguration(List<Host> hosts, Optional<String> localDC, boolean createKeyspace, int minDelay, int maxRetry, Optional<String> username,
                                Optional<String> password) {
        this.hosts = hosts;
        this.localDC = localDC;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'password'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
    private final int maxRetry;
    private final Optional<String> username;
    private final Optional<String> password;

    private ClusterConfiguration(List<Host> hosts, Optional<String> localDC, boolean createKeyspace, int minDelay, int maxRetry, Optional<String> username,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'username'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java


        public Builder username(Optional<String> username) {
            this.username = username;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'localDC'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        private Optional<String> username;
        private Optional<String> password;
        private Optional<String> localDC;

        public Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        }

        public Builder maxRetry(Optional<Integer> maxRetry) {
            this.maxRetry = maxRetry;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'username'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
    private final int minDelay;
    private final int maxRetry;
    private final Optional<String> username;
    private final Optional<String> password;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'localDC'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        }

        public Builder localDC(Optional<String> localDC) {
            this.localDC = localDC;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'localDC'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java

    private final List<Host> hosts;
    private final Optional<String> localDC;
    private final boolean createKeyspace;
    private final int minDelay;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'password'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        }

        public Builder password(Optional<String> password) {
            this.password = password;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'password'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java
        private Optional<Integer> maxRetry;
        private Optional<String> username;
        private Optional<String> password;
        private Optional<String> localDC;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'comment'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/components/CassandraModule.java`
#### Snippet
```java
        private final Builder originalBuilderReference;
        private final String tableName;
        private Optional<String> comment;
        private Optional<Function<CreateTableWithOptions, CreateTableWithOptions>> options;

```

### OptionalUsedAsFieldOrParameterType
`Optional`> used as type for field 'options'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/components/CassandraModule.java`
#### Snippet
```java
        private final String tableName;
        private Optional<String> comment;
        private Optional<Function<CreateTableWithOptions, CreateTableWithOptions>> options;

        private TableBuilder(Builder originalBuilderReference, String tableName) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'indexSettings'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/IndexCreationFactory.java`
#### Snippet
```java

        public ReactorOpenSearchClient createIndexAndAliases(ReactorOpenSearchClient client,
                                                                Optional<IndexSettings> indexSettings,
                                                                Optional<TypeMapping> mappingContent) {
            Preconditions.checkNotNull(indexName);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mappingContent'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/IndexCreationFactory.java`
#### Snippet
```java
        public ReactorOpenSearchClient createIndexAndAliases(ReactorOpenSearchClient client,
                                                                Optional<IndexSettings> indexSettings,
                                                                Optional<TypeMapping> mappingContent) {
            Preconditions.checkNotNull(indexName);
            try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'indexSettings'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/IndexCreationFactory.java`
#### Snippet
```java
                }

                public ReactorOpenSearchClient createIndexAndAliases(ReactorOpenSearchClient client, Optional<IndexSettings> indexSettings, Optional<TypeMapping> mappingContent) {
                    return build().createIndexAndAliases(client, indexSettings, mappingContent);
                }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mappingContent'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/IndexCreationFactory.java`
#### Snippet
```java
                }

                public ReactorOpenSearchClient createIndexAndAliases(ReactorOpenSearchClient client, Optional<IndexSettings> indexSettings, Optional<TypeMapping> mappingContent) {
                    return build().createIndexAndAliases(client, indexSettings, mappingContent);
                }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mappingContent'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/IndexCreationFactory.java`
#### Snippet
```java
        }

        private void createIndexIfNeeded(ReactorOpenSearchClient client, IndexName indexName, IndexSettings settings, Optional<TypeMapping> mappingContent) throws IOException {
            try {
                if (!indexExists(client, indexName)) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailRepositoryStrongConsistency'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> modseqReadStrongConsistency = Optional.empty();
        private Optional<Boolean> optimisticConsistencyLevel = Optional.empty();
        private Optional<Boolean> mailRepositoryStrongConsistency = Optional.empty();
        private Optional<Boolean> aclEnabled = Optional.empty();

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'consistencyLevelRegular'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> attachmentV2MigrationReadTimeout = Optional.empty();
        private Optional<Integer> messageAttachmentIdsReadTimeout = Optional.empty();
        private Optional<String> consistencyLevelRegular = Optional.empty();
        private Optional<String> consistencyLevelLightweightTransaction = Optional.empty();
        private Optional<Float> mailboxReadRepair = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder fetchNextPageInAdvanceRow(Optional<Integer> value) {
            value.ifPresent(this::fetchNextPageInAdvanceRow);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder mailboxReadRepair(Optional<Float> value) {
            value.ifPresent(this::mailboxReadRepair);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageReadStrongConsistency'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Float> mailboxCountersReadRepairChanceOneHundred = Optional.empty();
        private Optional<Boolean> mailboxReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageWriteStrongConsistency = Optional.empty();
        private Optional<Boolean> uidReadStrongConsistency = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailboxCountersReadRepairMax'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<String> consistencyLevelLightweightTransaction = Optional.empty();
        private Optional<Float> mailboxReadRepair = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairMax = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairChanceOneHundred = Optional.empty();
        private Optional<Boolean> mailboxReadStrongConsistency = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder expungeChunkSize(Optional<Integer> value) {
            value.ifPresent(this::expungeChunkSize);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'modSeqMaxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> flagsUpdateMessageIdMaxRetry = Optional.empty();
        private Optional<Integer> flagsUpdateMessageMaxRetry = Optional.empty();
        private Optional<Integer> modSeqMaxRetry = Optional.empty();
        private Optional<Integer> uidMaxRetry = Optional.empty();
        private Optional<Integer> aclMaxRetry = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder aclEnabled(Optional<Boolean> value) {
            this.aclEnabled = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder mailRepositoryStrongConsistency(Optional<Boolean> value) {
            this.mailRepositoryStrongConsistency = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageAttachmentIdsReadTimeout'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> blobPartSize = Optional.empty();
        private Optional<Integer> attachmentV2MigrationReadTimeout = Optional.empty();
        private Optional<Integer> messageAttachmentIdsReadTimeout = Optional.empty();
        private Optional<String> consistencyLevelRegular = Optional.empty();
        private Optional<String> consistencyLevelLightweightTransaction = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder uidMaxRetry(Optional<Integer> value) {
            value.ifPresent(this::uidMaxRetry);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailboxReadRepair'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<String> consistencyLevelRegular = Optional.empty();
        private Optional<String> consistencyLevelLightweightTransaction = Optional.empty();
        private Optional<Float> mailboxReadRepair = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairMax = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairChanceOneHundred = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'attachmentV2MigrationReadTimeout'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> fetchNextPageInAdvanceRow = Optional.empty();
        private Optional<Integer> blobPartSize = Optional.empty();
        private Optional<Integer> attachmentV2MigrationReadTimeout = Optional.empty();
        private Optional<Integer> messageAttachmentIdsReadTimeout = Optional.empty();
        private Optional<String> consistencyLevelRegular = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'expungeChunkSize'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<Integer> expungeChunkSize = Optional.empty();
        private Optional<Integer> flagsUpdateMessageIdMaxRetry = Optional.empty();
        private Optional<Integer> flagsUpdateMessageMaxRetry = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder flagsUpdateMessageIdMaxRetry(Optional<Integer> value) {
            value.ifPresent(this::flagsUpdateMessageIdMaxRetry);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailboxCountersReadRepairChanceOneHundred'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Float> mailboxReadRepair = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairMax = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairChanceOneHundred = Optional.empty();
        private Optional<Boolean> mailboxReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageReadStrongConsistency = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder blobPartSize(Optional<Integer> value) {
            value.ifPresent(this::blobPartSize);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder mailboxCountersReadRepairMax(Optional<Float> value) {
            value.ifPresent(this::mailboxCountersReadRepairMax);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder modSeqMaxRetry(Optional<Integer> value) {
            value.ifPresent(this::modSeqMaxRetry);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageWriteStrongConsistency'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> mailboxReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageWriteStrongConsistency = Optional.empty();
        private Optional<Boolean> uidReadStrongConsistency = Optional.empty();
        private Optional<Boolean> modseqReadStrongConsistency = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'aclMaxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> modSeqMaxRetry = Optional.empty();
        private Optional<Integer> uidMaxRetry = Optional.empty();
        private Optional<Integer> aclMaxRetry = Optional.empty();
        private Optional<Integer> fetchNextPageInAdvanceRow = Optional.empty();
        private Optional<Integer> blobPartSize = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder flagsUpdateMessageMaxRetry(Optional<Integer> value) {
            value.ifPresent(this::flagsUpdateMessageMaxRetry);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder modseqReadStrongConsistency(Optional<Boolean> value) {
            this.modseqReadStrongConsistency = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'aclEnabled'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> optimisticConsistencyLevel = Optional.empty();
        private Optional<Boolean> mailRepositoryStrongConsistency = Optional.empty();
        private Optional<Boolean> aclEnabled = Optional.empty();

        public Builder mailboxReadStrongConsistency(boolean value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'blobPartSize'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> aclMaxRetry = Optional.empty();
        private Optional<Integer> fetchNextPageInAdvanceRow = Optional.empty();
        private Optional<Integer> blobPartSize = Optional.empty();
        private Optional<Integer> attachmentV2MigrationReadTimeout = Optional.empty();
        private Optional<Integer> messageAttachmentIdsReadTimeout = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'uidReadStrongConsistency'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> messageReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageWriteStrongConsistency = Optional.empty();
        private Optional<Boolean> uidReadStrongConsistency = Optional.empty();
        private Optional<Boolean> modseqReadStrongConsistency = Optional.empty();
        private Optional<Boolean> optimisticConsistencyLevel = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'flagsUpdateMessageMaxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> expungeChunkSize = Optional.empty();
        private Optional<Integer> flagsUpdateMessageIdMaxRetry = Optional.empty();
        private Optional<Integer> flagsUpdateMessageMaxRetry = Optional.empty();
        private Optional<Integer> modSeqMaxRetry = Optional.empty();
        private Optional<Integer> uidMaxRetry = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder mailboxCountersReadRepairChanceOneHundred(Optional<Float> value) {
            value.ifPresent(this::mailboxCountersReadRepairChanceOneHundred);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder optimisticConsistencyLevel(Optional<Boolean> value) {
            this.optimisticConsistencyLevel = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder messageAttachmentIdsReadTimeout(Optional<Integer> value) {
            value.ifPresent(this::messageAttachmentIdsReadTimeout);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder mailboxReadStrongConsistency(Optional<Boolean> value) {
            this.mailboxReadStrongConsistency = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mailboxReadStrongConsistency'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Float> mailboxCountersReadRepairMax = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairChanceOneHundred = Optional.empty();
        private Optional<Boolean> mailboxReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageReadStrongConsistency = Optional.empty();
        private Optional<Boolean> messageWriteStrongConsistency = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder consistencyLevelRegular(Optional<String> value) {
            value.ifPresent(this::consistencyLevelRegular);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder uidReadStrongConsistency(Optional<Boolean> value) {
            this.uidReadStrongConsistency = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'consistencyLevelLightweightTransaction'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> messageAttachmentIdsReadTimeout = Optional.empty();
        private Optional<String> consistencyLevelRegular = Optional.empty();
        private Optional<String> consistencyLevelLightweightTransaction = Optional.empty();
        private Optional<Float> mailboxReadRepair = Optional.empty();
        private Optional<Float> mailboxCountersReadRepairMax = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder aclMaxRetry(Optional<Integer> value) {
            value.ifPresent(this::aclMaxRetry);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'modseqReadStrongConsistency'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> messageWriteStrongConsistency = Optional.empty();
        private Optional<Boolean> uidReadStrongConsistency = Optional.empty();
        private Optional<Boolean> modseqReadStrongConsistency = Optional.empty();
        private Optional<Boolean> optimisticConsistencyLevel = Optional.empty();
        private Optional<Boolean> mailRepositoryStrongConsistency = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder consistencyLevelLightweightTransaction(Optional<String> value) {
            value.ifPresent(this::consistencyLevelLightweightTransaction);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'optimisticConsistencyLevel'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> uidReadStrongConsistency = Optional.empty();
        private Optional<Boolean> modseqReadStrongConsistency = Optional.empty();
        private Optional<Boolean> optimisticConsistencyLevel = Optional.empty();
        private Optional<Boolean> mailRepositoryStrongConsistency = Optional.empty();
        private Optional<Boolean> aclEnabled = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'flagsUpdateMessageIdMaxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<Integer> expungeChunkSize = Optional.empty();
        private Optional<Integer> flagsUpdateMessageIdMaxRetry = Optional.empty();
        private Optional<Integer> flagsUpdateMessageMaxRetry = Optional.empty();
        private Optional<Integer> modSeqMaxRetry = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder messageReadStrongConsistency(Optional<Boolean> value) {
            this.messageReadStrongConsistency = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'uidMaxRetry'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> flagsUpdateMessageMaxRetry = Optional.empty();
        private Optional<Integer> modSeqMaxRetry = Optional.empty();
        private Optional<Integer> uidMaxRetry = Optional.empty();
        private Optional<Integer> aclMaxRetry = Optional.empty();
        private Optional<Integer> fetchNextPageInAdvanceRow = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fetchNextPageInAdvanceRow'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        private Optional<Integer> uidMaxRetry = Optional.empty();
        private Optional<Integer> aclMaxRetry = Optional.empty();
        private Optional<Integer> fetchNextPageInAdvanceRow = Optional.empty();
        private Optional<Integer> blobPartSize = Optional.empty();
        private Optional<Integer> attachmentV2MigrationReadTimeout = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder attachmentV2MigrationReadTimeout(Optional<Integer> value) {
            value.ifPresent(this::attachmentV2MigrationReadTimeout);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/CassandraConfiguration.java`
#### Snippet
```java
        }

        public Builder messageWriteStrongConsistency(Optional<Boolean> value) {
            this.messageWriteStrongConsistency = value;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'scrollId'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/search/ScrolledSearch.java`
#### Snippet
```java
    }

    private Mono<ScrollResponse<ObjectNode>> buildRequest(Optional<String> scrollId) {
        return scrollId.map(Throwing.function(id -> client.scroll(new ScrollRequest.Builder()
                            .scrollId(scrollId.get())
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jwtTokenString'
in `server/apps/webadmin-cli/src/main/java/org/apache/james/cli/WebAdminHTTPClientUtil.java`
#### Snippet
```java

    public static class JwtToken {
        final Optional<String> jwtTokenString;

        final Optional<String> jwtFilePath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'jwtFilePath'
in `server/apps/webadmin-cli/src/main/java/org/apache/james/cli/WebAdminHTTPClientUtil.java`
#### Snippet
```java
        final Optional<String> jwtTokenString;

        final Optional<String> jwtFilePath;

        PrintStream err;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'jwtTokenString'
in `server/apps/webadmin-cli/src/main/java/org/apache/james/cli/WebAdminHTTPClientUtil.java`
#### Snippet
```java
        PrintStream err;

        public JwtToken(Optional<String> jwtTokenString, Optional<String> jwtFilePath, PrintStream err) {
            this.jwtTokenString = jwtTokenString;
            this.jwtFilePath = jwtFilePath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'jwtFilePath'
in `server/apps/webadmin-cli/src/main/java/org/apache/james/cli/WebAdminHTTPClientUtil.java`
#### Snippet
```java
        PrintStream err;

        public JwtToken(Optional<String> jwtTokenString, Optional<String> jwtFilePath, PrintStream err) {
            this.jwtTokenString = jwtTokenString;
            this.jwtFilePath = jwtFilePath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'credential'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Duration> requestTimeout;
        private Optional<HostScheme> hostScheme;
        private Optional<Credential> credential;
        private Optional<SSLConfiguration> sslTrustConfiguration;
        private Optional<Integer> maxConnectionsPerHost;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nbReplica'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private final ImmutableList.Builder<Host> hosts;
        private Optional<Integer> nbShards;
        private Optional<Integer> nbReplica;
        private Optional<Integer> waitForActiveShards;
        private Optional<Integer> minDelay;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'trustStore'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private final SSLValidationStrategy strategy;
        private final HostNameVerifier hostNameVerifier;
        private final Optional<SSLTrustStore> trustStore;

        private SSLConfiguration(SSLValidationStrategy strategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> trustStore) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'masterHost'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java

    @VisibleForTesting
    static void validateHostsConfigurationOptions(Optional<String> masterHost,
                                                  Optional<Integer> masterPort,
                                                  List<String> multiHosts) throws ConfigurationException {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'masterPort'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
    @VisibleForTesting
    static void validateHostsConfigurationOptions(Optional<String> masterHost,
                                                  Optional<Integer> masterPort,
                                                  List<String> multiHosts) throws ConfigurationException {
        if (masterHost.isPresent() != masterPort.isPresent()) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'minDelay'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder minDelay(Optional<Integer> minDelay) {
            this.minDelay = minDelay;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'credential'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder credential(Optional<Credential> credential) {
            this.credential = credential;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxConnections'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder maxConnections(Optional<Integer> maxConnections) {
            this.maxConnections = maxConnections;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sslTrustConfiguration'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<HostScheme> hostScheme;
        private Optional<Credential> credential;
        private Optional<SSLConfiguration> sslTrustConfiguration;
        private Optional<Integer> maxConnectionsPerHost;
        private Optional<Integer> maxConnections;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileCustomPrefix'
in `server/blob/blob-export-file/src/main/java/org/apache/james/blob/export/file/LocalFileBlobExportMechanism.java`
#### Snippet
```java

    private String copyBlobToFile(BlobId blobId,
                                  Optional<String> fileCustomPrefix,
                                  Optional<FileExtension> fileExtension) {
        try {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileExtension'
in `server/blob/blob-export-file/src/main/java/org/apache/james/blob/export/file/LocalFileBlobExportMechanism.java`
#### Snippet
```java
    private String copyBlobToFile(BlobId blobId,
                                  Optional<String> fileCustomPrefix,
                                  Optional<FileExtension> fileExtension) {
        try {
            File exportingDirectory = fileSystem.getFile(configuration.exportDirectory);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxConnectionsPerHost'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder maxConnectionsPerHost(Optional<Integer> maxConnectionsPerHost) {
            this.maxConnectionsPerHost = maxConnectionsPerHost;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStore'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private final Optional<SSLTrustStore> trustStore;

        private SSLConfiguration(SSLValidationStrategy strategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> trustStore) {
            Preconditions.checkNotNull(strategy);
            Preconditions.checkNotNull(trustStore);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'requestTimeout'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetries;
        private Optional<Duration> requestTimeout;
        private Optional<HostScheme> hostScheme;
        private Optional<Credential> credential;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxConnectionsPerHost'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Credential> credential;
        private Optional<SSLConfiguration> sslTrustConfiguration;
        private Optional<Integer> maxConnectionsPerHost;
        private Optional<Integer> maxConnections;
        private ImmutableList.Builder<String> searchOverrides;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxRetries'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Integer> waitForActiveShards;
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetries;
        private Optional<Duration> requestTimeout;
        private Optional<HostScheme> hostScheme;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxConnectionsPerHost'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
    private final SSLConfiguration sslConfiguration;
    private final Optional<Integer> maxConnections;
    private final Optional<Integer> maxConnectionsPerHost;
    private final List<String> searchOverrides;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'credential'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java

    private OpenSearchConfiguration(ImmutableList<Host> hosts, int nbShards, int nbReplica, int waitForActiveShards, int minDelay, int maxRetries, Duration requestTimeout,
                                    HostScheme hostScheme, Optional<Credential> credential, SSLConfiguration sslConfiguration, Optional<Integer> maxConnections, Optional<Integer> maxConnectionsPerHost, List<String> searchOverrides) {
        this.hosts = hosts;
        this.nbShards = nbShards;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxConnections'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java

    private OpenSearchConfiguration(ImmutableList<Host> hosts, int nbShards, int nbReplica, int waitForActiveShards, int minDelay, int maxRetries, Duration requestTimeout,
                                    HostScheme hostScheme, Optional<Credential> credential, SSLConfiguration sslConfiguration, Optional<Integer> maxConnections, Optional<Integer> maxConnectionsPerHost, List<String> searchOverrides) {
        this.hosts = hosts;
        this.nbShards = nbShards;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxConnectionsPerHost'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java

    private OpenSearchConfiguration(ImmutableList<Host> hosts, int nbShards, int nbReplica, int waitForActiveShards, int minDelay, int maxRetries, Duration requestTimeout,
                                    HostScheme hostScheme, Optional<Credential> credential, SSLConfiguration sslConfiguration, Optional<Integer> maxConnections, Optional<Integer> maxConnectionsPerHost, List<String> searchOverrides) {
        this.hosts = hosts;
        this.nbShards = nbShards;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sslTrustStore'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
                private final SSLValidationStrategy sslValidationStrategy;
                private final HostNameVerifier hostNameVerifier;
                private Optional<SSLTrustStore> sslTrustStore;

                private ReadyToBuild(SSLValidationStrategy sslValidationStrategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> sslTrustStore) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'maxRetries'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder maxRetries(Optional<Integer> maxRetries) {
            this.maxRetries = maxRetries;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'nbShards'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java

        private final ImmutableList.Builder<Host> hosts;
        private Optional<Integer> nbShards;
        private Optional<Integer> nbReplica;
        private Optional<Integer> waitForActiveShards;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'minDelay'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Integer> nbReplica;
        private Optional<Integer> waitForActiveShards;
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetries;
        private Optional<Duration> requestTimeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sslTrustStore'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder sslTrustConfiguration(Optional<SSLConfiguration> sslTrustStore) {
            this.sslTrustConfiguration = sslTrustStore;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'requestTimeout'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder requestTimeout(Optional<Duration> requestTimeout) {
            this.requestTimeout = requestTimeout;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'hostScheme'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Integer> maxRetries;
        private Optional<Duration> requestTimeout;
        private Optional<HostScheme> hostScheme;
        private Optional<Credential> credential;
        private Optional<SSLConfiguration> sslTrustConfiguration;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxConnections'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
    private final Optional<Credential> credential;
    private final SSLConfiguration sslConfiguration;
    private final Optional<Integer> maxConnections;
    private final Optional<Integer> maxConnectionsPerHost;
    private final List<String> searchOverrides;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'trustStore'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java

            public interface RequireSSLStrategyTrustStore {
                RequireHostNameVerifier sslStrategy(SSLValidationStrategy strategy, Optional<SSLTrustStore> trustStore);

                default RequireHostNameVerifier strategyIgnore() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'waitForActiveShards'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Integer> nbShards;
        private Optional<Integer> nbReplica;
        private Optional<Integer> waitForActiveShards;
        private Optional<Integer> minDelay;
        private Optional<Integer> maxRetries;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'credential'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
    private final Duration requestTimeout;
    private final HostScheme hostScheme;
    private final Optional<Credential> credential;
    private final SSLConfiguration sslConfiguration;
    private final Optional<Integer> maxConnections;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'hostScheme'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        }

        public Builder hostScheme(Optional<HostScheme> hostScheme) {
            this.hostScheme = hostScheme;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sslTrustStore'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
                private Optional<SSLTrustStore> sslTrustStore;

                private ReadyToBuild(SSLValidationStrategy sslValidationStrategy, HostNameVerifier hostNameVerifier, Optional<SSLTrustStore> sslTrustStore) {
                    this.sslValidationStrategy = sslValidationStrategy;
                    this.hostNameVerifier = hostNameVerifier;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'DEFAULT_PORT_AS_OPTIONAL'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
    public static final int DEFAULT_PORT = 9200;
    public static final String LOCALHOST = "127.0.0.1";
    public static final Optional<Integer> DEFAULT_PORT_AS_OPTIONAL = Optional.of(DEFAULT_PORT);
    public static final HostScheme DEFAULT_SCHEME = HostScheme.HTTP;
    public static final SSLConfiguration DEFAULT_SSL_TRUST_CONFIGURATION = SSLConfiguration.defaultBehavior();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'maxConnections'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<SSLConfiguration> sslTrustConfiguration;
        private Optional<Integer> maxConnectionsPerHost;
        private Optional<Integer> maxConnections;
        private ImmutableList.Builder<String> searchOverrides;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileCustomPrefix'
in `third-party/linshare/src/main/java/org/apache/james/linshare/LinshareBlobExportMechanism.java`
#### Snippet
```java
    }

    private void exportBlob(BlobId blobId, MailAddress mailAddress, Optional<String> fileCustomPrefix,
                            Optional<FileExtension> fileExtension) throws IOException {
        String fileName = ExportedFileNamesGenerator.generateFileName(fileCustomPrefix, blobId, fileExtension);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileExtension'
in `third-party/linshare/src/main/java/org/apache/james/linshare/LinshareBlobExportMechanism.java`
#### Snippet
```java

    private void exportBlob(BlobId blobId, MailAddress mailAddress, Optional<String> fileCustomPrefix,
                            Optional<FileExtension> fileExtension) throws IOException {
        String fileName = ExportedFileNamesGenerator.generateFileName(fileCustomPrefix, blobId, fileExtension);
        File tempFile = new File(tempDir, fileName);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'defaultProtocol'
in `server/mailrepository/mailrepository-memory/src/main/java/org/apache/james/mailrepository/memory/MailRepositoryStoreConfiguration.java`
#### Snippet
```java

    private final List<Item> items;
    private final Optional<Protocol> defaultProtocol;

    public MailRepositoryStoreConfiguration(List<Item> items, Optional<Protocol> defaultProtocol) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'defaultProtocol'
in `server/mailrepository/mailrepository-memory/src/main/java/org/apache/james/mailrepository/memory/MailRepositoryStoreConfiguration.java`
#### Snippet
```java
    private final Optional<Protocol> defaultProtocol;

    public MailRepositoryStoreConfiguration(List<Item> items, Optional<Protocol> defaultProtocol) {
        this.items = items;
        this.defaultProtocol = defaultProtocol;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/Limit.java`
#### Snippet
```java
    private final Optional<Integer> value;

    private Limit(Optional<Integer> value) {
        this.value = value;
    }
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'value'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/Limit.java`
#### Snippet
```java
    }

    private final Optional<Integer> value;

    private Limit(Optional<Integer> value) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'quotaBoundary'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/QuotaQuery.java`
#### Snippet
```java
        }

        public Builder moreThan(Optional<QuotaBoundary> quotaBoundary) {
            quotaBoundary.ifPresent(this::moreThan);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'quotaBoundary'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/QuotaQuery.java`
#### Snippet
```java
        }

        public Builder lessThan(Optional<QuotaBoundary> quotaBoundary) {
            quotaBoundary.ifPresent(this::lessThan);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'offset'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/QuotaQuery.java`
#### Snippet
```java
        private ImmutableList.Builder<QuotaClause> clauses;
        private Optional<Limit> limit;
        private Optional<Offset> offset;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'domain'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/QuotaQuery.java`
#### Snippet
```java
        }

        public Builder hasDomain(Optional<Domain> domain) {
            domain.ifPresent(this::hasDomain);
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/QuotaQuery.java`
#### Snippet
```java
    public static class Builder {
        private ImmutableList.Builder<QuotaClause> clauses;
        private Optional<Limit> limit;
        private Optional<Offset> offset;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'name'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/EMailer.java`
#### Snippet
```java
    private final String domain;

    public EMailer(Optional<String> name, String address, String domain) {
        this.name = name;
        this.address = address;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'name'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/EMailer.java`
#### Snippet
```java
public class EMailer implements SerializableMessage {

    private final Optional<String> name;
    private final String address;
    private final String domain;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'indexHeaders'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
        private Optional<WriteAliasName> writeAliasMailboxName;
        private Optional<IndexAttachments> indexAttachment;
        private Optional<IndexHeaders> indexHeaders;

        Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'indexAttachment'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
        private Optional<ReadAliasName> readAliasMailboxName;
        private Optional<WriteAliasName> writeAliasMailboxName;
        private Optional<IndexAttachments> indexAttachment;
        private Optional<IndexHeaders> indexHeaders;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'readAliasMailboxName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private Optional<IndexName> indexMailboxName;
        private Optional<ReadAliasName> readAliasMailboxName;
        private Optional<WriteAliasName> writeAliasMailboxName;
        private Optional<IndexAttachments> indexAttachment;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'indexMailboxName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
        }

        Builder indexMailboxName(Optional<IndexName> indexMailboxName) {
            this.indexMailboxName = indexMailboxName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'writeAliasMailboxName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
        private Optional<IndexName> indexMailboxName;
        private Optional<ReadAliasName> readAliasMailboxName;
        private Optional<WriteAliasName> writeAliasMailboxName;
        private Optional<IndexAttachments> indexAttachment;
        private Optional<IndexHeaders> indexHeaders;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'writeAliasMailboxName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
        }

        Builder writeAliasMailboxName(Optional<WriteAliasName> writeAliasMailboxName) {
            this.writeAliasMailboxName = writeAliasMailboxName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'readAliasMailboxName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java
        }

        Builder readAliasMailboxName(Optional<ReadAliasName> readAliasMailboxName) {
            this.readAliasMailboxName = readAliasMailboxName;
            return this;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'indexMailboxName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/OpenSearchMailboxConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private Optional<IndexName> indexMailboxName;
        private Optional<ReadAliasName> readAliasMailboxName;
        private Optional<WriteAliasName> writeAliasMailboxName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sentDate'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/HeaderCollection.java`
#### Snippet
```java
    private final ImmutableSet<String> subjectSet;
    private final List<Header> headers;
    private final Optional<ZonedDateTime> sentDate;
    private final Optional<String> messageID;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'sentDate'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/HeaderCollection.java`
#### Snippet
```java
        private final ImmutableSet.Builder<String> subjectSet;
        private final ImmutableList.Builder<Header> headers;
        private Optional<ZonedDateTime> sentDate;
        private Optional<String> messageID;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'sentDate'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/HeaderCollection.java`
#### Snippet
```java
                             ImmutableSet<EMailer> ccAddressSet, ImmutableSet<EMailer> bccAddressSet,
                             ImmutableSet<EMailer> replyToAddressSet, ImmutableSet<String> subjectSet,
                             List<Header> headers, Optional<ZonedDateTime> sentDate, Optional<String> messageID) {
        this.toAddressSet = toAddressSet;
        this.fromAddressSet = fromAddressSet;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'messageID'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/HeaderCollection.java`
#### Snippet
```java
                             ImmutableSet<EMailer> ccAddressSet, ImmutableSet<EMailer> bccAddressSet,
                             ImmutableSet<EMailer> replyToAddressSet, ImmutableSet<String> subjectSet,
                             List<Header> headers, Optional<ZonedDateTime> sentDate, Optional<String> messageID) {
        this.toAddressSet = toAddressSet;
        this.fromAddressSet = fromAddressSet;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageID'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/HeaderCollection.java`
#### Snippet
```java
    private final List<Header> headers;
    private final Optional<ZonedDateTime> sentDate;
    private final Optional<String> messageID;

    private HeaderCollection(ImmutableSet<EMailer> toAddressSet, ImmutableSet<EMailer> fromAddressSet,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'messageID'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/HeaderCollection.java`
#### Snippet
```java
        private final ImmutableList.Builder<Header> headers;
        private Optional<ZonedDateTime> sentDate;
        private Optional<String> messageID;

        private Builder() {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'checkUser'
in `server/container/feature-checks/src/main/java/org/apache/james/healthcheck/MailReceptionCheck.java`
#### Snippet
```java
        }

        private final Optional<Username> checkUser;
        private final Duration timeout;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'checkUser'
in `server/container/feature-checks/src/main/java/org/apache/james/healthcheck/MailReceptionCheck.java`
#### Snippet
```java
        private final Duration timeout;

        public Configuration(Optional<Username> checkUser, Duration timeout) {
            this.checkUser = checkUser;
            this.timeout = timeout;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mimeMessageID'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
    private final long uid;
    private final String[] userFlags;
    private final Optional<String> mimeMessageID;

    private IndexableMessage(List<MimePart> attachments,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyHtml'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
    private final List<MimePart> attachments;
    private final EMailers bcc;
    private final Optional<String> bodyHtml;
    private final Optional<String> bodyText;
    private final EMailers cc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyText'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
    private final EMailers bcc;
    private final Optional<String> bodyHtml;
    private final Optional<String> bodyText;
    private final EMailers cc;
    private final String date;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyHtml'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
    private IndexableMessage(List<MimePart> attachments,
                             EMailers bcc,
                             Optional<String> bodyHtml,
                             Optional<String> bodyText,
                             EMailers cc,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyText'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
                             EMailers bcc,
                             Optional<String> bodyHtml,
                             Optional<String> bodyText,
                             EMailers cc,
                             String date,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'saveDate'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
                             ModSeq modSeq,
                             String sentDate,
                             Optional<String> saveDate, long size,
                             Subjects subjects,
                             String subType,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mimeMessageID'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
                             long uid,
                             String[] userFlags,
                             Optional<String> mimeMessageID) {
        this.attachments = attachments;
        this.bcc = bcc;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'saveDate'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/IndexableMessage.java`
#### Snippet
```java
    private final long modSeq;
    private final String sentDate;
    private final Optional<String> saveDate;
    private final long size;
    private final Subjects subjects;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/search/OpenSearchSearcher.java`
#### Snippet
```java

    public Flux<Hit<ObjectNode>> search(Collection<MailboxId> mailboxIds, SearchQuery query,
                                        Optional<Integer> limit, List<String> fields) {
        SearchRequest searchRequest = prepareSearch(mailboxIds, query, limit, fields);
        return new ScrolledSearch(client, searchRequest)
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/search/OpenSearchSearcher.java`
#### Snippet
```java
    }

    private int computeRequiredSize(Optional<Integer> limit) {
        return limit.map(value -> Math.min(value.intValue(), size))
            .orElse(size);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/search/OpenSearchSearcher.java`
#### Snippet
```java
    }

    private SearchRequest prepareSearch(Collection<MailboxId> mailboxIds, SearchQuery query, Optional<Integer> limit, List<String> fields) {
        List<SortOptions> sorts = query.getSorts()
            .stream()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'contentDisposition'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final Optional<String> fileName;
    private final Optional<String> fileExtension;
    private final Optional<String> contentDisposition;
    private final List<MimePart> attachments;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyContent'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    public static class ParsedMimePart {
        private final HeaderCollection headerCollection;
        private final Optional<byte[]> bodyContent;
        private final Optional<Charset> charset;
        private final Optional<MediaType> mediaType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final List<ParsedMimePart> children;
        private Optional<MediaType> mediaType;
        private Optional<SubType> subType;
        private Optional<String> fileName;
        private Optional<String> fileExtension;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyTextContent'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final List<MimePart> attachments;

    private MimePart(HeaderCollection headerCollection, Optional<String> bodyTextContent, Optional<MediaType> mediaType,
                    Optional<SubType> subType, Optional<String> fileName, Optional<String> fileExtension,
                    Optional<String> contentDisposition, List<MimePart> attachments) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mediaType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final List<MimePart> attachments;

    private MimePart(HeaderCollection headerCollection, Optional<String> bodyTextContent, Optional<MediaType> mediaType,
                    Optional<SubType> subType, Optional<String> fileName, Optional<String> fileExtension,
                    Optional<String> contentDisposition, List<MimePart> attachments) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java

    private MimePart(HeaderCollection headerCollection, Optional<String> bodyTextContent, Optional<MediaType> mediaType,
                    Optional<SubType> subType, Optional<String> fileName, Optional<String> fileExtension,
                    Optional<String> contentDisposition, List<MimePart> attachments) {
        this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java

    private MimePart(HeaderCollection headerCollection, Optional<String> bodyTextContent, Optional<MediaType> mediaType,
                    Optional<SubType> subType, Optional<String> fileName, Optional<String> fileExtension,
                    Optional<String> contentDisposition, List<MimePart> attachments) {
        this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileExtension'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java

    private MimePart(HeaderCollection headerCollection, Optional<String> bodyTextContent, Optional<MediaType> mediaType,
                    Optional<SubType> subType, Optional<String> fileName, Optional<String> fileExtension,
                    Optional<String> contentDisposition, List<MimePart> attachments) {
        this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentDisposition'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private MimePart(HeaderCollection headerCollection, Optional<String> bodyTextContent, Optional<MediaType> mediaType,
                    Optional<SubType> subType, Optional<String> fileName, Optional<String> fileExtension,
                    Optional<String> contentDisposition, List<MimePart> attachments) {
        this.headerCollection = headerCollection;
        this.mediaType = mediaType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'bodyContent'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final List<ParsedMimePart> attachments;

        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'charset'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final List<ParsedMimePart> attachments;

        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'mediaType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java

        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
                              Optional<String> contentDisposition, List<ParsedMimePart> attachments) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'subType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
                              Optional<String> contentDisposition, List<ParsedMimePart> attachments) {
            this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
                              Optional<String> contentDisposition, List<ParsedMimePart> attachments) {
            this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
                              Optional<String> contentDisposition, List<ParsedMimePart> attachments) {
            this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'fileExtension'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        public ParsedMimePart(HeaderCollection headerCollection, Optional<InputStream> bodyContent, Optional<Charset> charset,
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
                              Optional<String> contentDisposition, List<ParsedMimePart> attachments) {
            this.headerCollection = headerCollection;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'contentDisposition'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
                              Optional<MediaType> mediaType,
                              Optional<SubType> subType, Optional<ContentType> contentType, Optional<String> fileName, Optional<String> fileExtension,
                              Optional<String> contentDisposition, List<ParsedMimePart> attachments) {
            this.headerCollection = headerCollection;
            this.mediaType = mediaType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<MediaType> mediaType;
        private Optional<SubType> subType;
        private Optional<String> fileName;
        private Optional<String> fileExtension;
        private Optional<String> contentDisposition;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyTextContent'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java

    private final HeaderCollection headerCollection;
    private final Optional<String> bodyTextContent;
    private final Optional<MediaType> mediaType;
    private final Optional<SubType> subType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mediaType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<InputStream> bodyContent;
        private final List<ParsedMimePart> children;
        private Optional<MediaType> mediaType;
        private Optional<SubType> subType;
        private Optional<String> fileName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final Optional<SubType> subType;
        private Optional<ContentType> contentType;
        private final Optional<String> fileName;
        private final Optional<String> fileExtension;
        private final Optional<String> contentDisposition;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'bodyContent'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java

        private final HeaderCollection.Builder headerCollectionBuilder;
        private Optional<InputStream> bodyContent;
        private final List<ParsedMimePart> children;
        private Optional<MediaType> mediaType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'contentType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final Optional<MediaType> mediaType;
        private final Optional<SubType> subType;
        private Optional<ContentType> contentType;
        private final Optional<String> fileName;
        private final Optional<String> fileExtension;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileExtension'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<SubType> subType;
        private Optional<String> fileName;
        private Optional<String> fileExtension;
        private Optional<String> contentDisposition;
        private Optional<Charset> charset;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileExtension'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final Optional<SubType> subType;
    private final Optional<String> fileName;
    private final Optional<String> fileExtension;
    private final Optional<String> contentDisposition;
    private final List<MimePart> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileExtension'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<ContentType> contentType;
        private final Optional<String> fileName;
        private final Optional<String> fileExtension;
        private final Optional<String> contentDisposition;
        private final List<ParsedMimePart> attachments;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'contentDisposition'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<String> fileName;
        private Optional<String> fileExtension;
        private Optional<String> contentDisposition;
        private Optional<Charset> charset;
        private Predicate<ContentType> shouldCaryOverContent;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'charset'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final HeaderCollection headerCollection;
        private final Optional<byte[]> bodyContent;
        private final Optional<Charset> charset;
        private final Optional<MediaType> mediaType;
        private final Optional<SubType> subType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mediaType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final Optional<byte[]> bodyContent;
        private final Optional<Charset> charset;
        private final Optional<MediaType> mediaType;
        private final Optional<SubType> subType;
        private Optional<ContentType> contentType;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final Optional<String> bodyTextContent;
    private final Optional<MediaType> mediaType;
    private final Optional<SubType> subType;
    private final Optional<String> fileName;
    private final Optional<String> fileExtension;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'charset'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<String> fileExtension;
        private Optional<String> contentDisposition;
        private Optional<Charset> charset;
        private Predicate<ContentType> shouldCaryOverContent;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'fileName'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final Optional<MediaType> mediaType;
    private final Optional<SubType> subType;
    private final Optional<String> fileName;
    private final Optional<String> fileExtension;
    private final Optional<String> contentDisposition;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'mediaType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
    private final HeaderCollection headerCollection;
    private final Optional<String> bodyTextContent;
    private final Optional<MediaType> mediaType;
    private final Optional<SubType> subType;
    private final Optional<String> fileName;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'contentDisposition'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final Optional<String> fileName;
        private final Optional<String> fileExtension;
        private final Optional<String> contentDisposition;
        private final List<ParsedMimePart> attachments;

```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'subType'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final Optional<Charset> charset;
        private final Optional<MediaType> mediaType;
        private final Optional<SubType> subType;
        private Optional<ContentType> contentType;
        private final Optional<String> fileName;
```

## RuleId[id=CharsetObjectCanBeUsed]
### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
        File file = getQuotaFile();
        if (file.exists()) {
            try (Scanner scanner = new Scanner(file, UTF_8)) {
                quota = scanner.nextLong();
            } catch (FileNotFoundException | NoSuchElementException ex) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
        }
        if (file.exists()) {
            try (Scanner scanner = new Scanner(file, UTF_8)) {
                quota = scanner.nextLong();
            } catch (FileNotFoundException | NoSuchElementException ex) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
            tmpFile = Files.createTempFile(file.getParentFile().toPath(), "", ".tmp").toFile();
            try (Writer out = new OutputStreamWriter(new BufferedOutputStream(
                    new FileOutputStream(tmpFile), bufferSize), UTF_8)) {
                out.write(content);
            }
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
        File file = getQuotaFile(username);
        if (file.exists()) {
            try (Scanner scanner = new Scanner(file, UTF_8)) {
                quota = scanner.nextLong();
            } catch (FileNotFoundException | NoSuchElementException ex) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/managesieve/transcode/MessageToCoreToMessage.java`
#### Snippet
```java
                    }
                    InputStream is = (InputStream) part.getContent();
                    try (Scanner scanner = new Scanner(is, "UTF-8")) {
                        scanner.useDelimiter("\\A");
                        if (scanner.hasNext()) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/http/DownloadRoutes.java`
#### Snippet
```java
        String blobId = request.param(BLOB_ID_PATH_PARAM);
        try {
            String name = URLDecoder.decode(request.param(NAME_PATH_PARAM), StandardCharsets.UTF_8.toString());
            DownloadPath downloadPath = DownloadPath.of(blobId, name);
            return get(request, response, downloadPath);
```

### CharsetObjectCanBeUsed
session.getCharset() can be used instead
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/CommandDispatcher.java`
#### Snippet
```java
        String curCommandArgument = null;
        // This should be changed once we move to java6
        String cmdString = new String(line, session.getCharset().name()).trim();
        int spaceIndex = cmdString.indexOf(" ");
        if (spaceIndex > 0) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/routes/RegexMappingRoutes.java`
#### Snippet
```java
        try {
            MappingSource mappingSource = MappingSource.parse(request.params(MAPPING_SOURCE_PARAM));
            String regex = URLDecoder.decode(request.params(REGEX_PARAM), StandardCharsets.UTF_8.toString());
            recipientRewriteTable.removeRegexMapping(mappingSource, regex);
        } catch (RecipientRewriteTableException e) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/routes/RegexMappingRoutes.java`
#### Snippet
```java
        try {
            MappingSource mappingSource = extractMappingSource(request);
            String regex = URLDecoder.decode(request.params(REGEX_PARAM), StandardCharsets.UTF_8.toString());
            recipientRewriteTable.addRegexMapping(mappingSource, regex);
        } catch (InvalidRegexException e) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/routes/DomainsRoutes.java`
#### Snippet
```java
    private String urlDecodeDomain(String domainName) {
        try {
            return URLDecoder.decode(domainName, StandardCharsets.UTF_8.toString());
        } catch (IllegalArgumentException | UnsupportedEncodingException e) {
            throw ErrorResponder.builder()
```

## RuleId[id=AutoCloseableResource]
### AutoCloseableResource
'ManageableMailQueue' used without 'try'-with-resources statement
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java
    private Task deleteMails(Request request) {
        MailQueueName mailQueueName = MailQueueName.of(request.params(MAIL_QUEUE_NAME));
        checkQueueExists(mailQueueName);
        return deleteMailsTask(mailQueueName,
                    sender(request.queryParams(SENDER_QUERY_PARAM)),
```

### AutoCloseableResource
'UnsynchronizedByteArrayOutputStream' used without 'try'-with-resources statement
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/FullByteContent.java`
#### Snippet
```java
    @Override
    public InputStream getInputStream() throws IOException {
        UnsynchronizedByteArrayOutputStream out = new UnsynchronizedByteArrayOutputStream((int) size);
        for (Header header : headers) {
            if (header != null) {
```

### AutoCloseableResource
'ConcurrentTestRunner' used without 'try'-with-resources statement
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java

    public ConcurrentTestRunner runSuccessfullyWithin(Duration duration) throws InterruptedException, ExecutionException {
        return run()
            .awaitTermination(duration)
            .assertNoException();
```

### AutoCloseableResource
'ConcurrentTestRunner' used without 'try'-with-resources statement
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java

        public ConcurrentTestRunner runSuccessfullyWithin(Duration duration) throws InterruptedException, ExecutionException {
            return build()
                .runSuccessfullyWithin(duration);
        }
```

### AutoCloseableResource
'ConcurrentTestRunner' used without 'try'-with-resources statement
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java

    public ConcurrentTestRunner runAcceptingErrorsWithin(Duration duration) throws InterruptedException, ExecutionException {
        return run()
            .awaitTermination(duration);
    }
```

### AutoCloseableResource
'ConcurrentTestRunner' used without 'try'-with-resources statement
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java

        public ConcurrentTestRunner runAcceptingErrorsWithin(Duration duration) throws InterruptedException, ExecutionException {
            return build()
                .runAcceptingErrorsWithin(duration);
        }
```

### AutoCloseableResource
'InternetHeadersInputStream' used without 'try'-with-resources statement
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
    public static void writeHeadersTo(Enumeration<String> headers, OutputStream headerOs) throws MessagingException {
        try {
            new InternetHeadersInputStream(headers).transferTo(headerOs);
        } catch (IOException e) {
            throw new MessagingException("Unable to write headers to stream", e);
```

### AutoCloseableResource
'InternetHeadersInputStream' used without 'try'-with-resources statement
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
                }
                Enumeration<String> filteredHeaders = myHeaders.getNonMatchingHeaderLines(ignoreList);
                new InternetHeadersInputStream(filteredHeaders).transferTo(headerOs);
                in.transferTo(bodyOs);
            }
```

### AutoCloseableResource
'InternetHeadersInputStream' used without 'try'-with-resources statement
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
            }
            Enumeration<String> filteredHeaders = headers.getNonMatchingHeaderLines(ignoreList);
            new InternetHeadersInputStream(filteredHeaders).transferTo(headerOs);

            if (preLoad && !messageParsed) {
```

### AutoCloseableResource
'InputStream' used without 'try'-with-resources statement
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java
            var resource = ClassLoader.getSystemClassLoader().getResource(resourceName);
            if (resource != null) {
                resource.openStream().transferTo(outputStream);
            } else {
                throw new RuntimeException("Failed to load configuration resource " + resourceName);
```

## RuleId[id=RedundantCast]
### RedundantCast
Casting `testLines.get(...)` to `String` is redundant
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
                boolean foundMatch = false;
                for (int i = 0; i < testLines.size(); i++) {
                    String expected = (String) testLines.get(i);
                    if (match(expected, actualLine)) {
                        foundMatch = true;
```

### RedundantCast
Casting `field` to `U` is redundant
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
            return Optional.empty();
        }
        return Optional.of((U) field);
    }

```

### RedundantCast
Casting `(this.count - this.pos)` to `long` is redundant
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
            return 0L;
        } else {
            long avail = (long)(this.count - this.pos);
            if (avail <= 0L) {
                if (this.markpos < 0) {
```

### RedundantCast
Casting `(this.count - this.pos)` to `long` is redundant
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java

                this.fill();
                avail = (long)(this.count - this.pos);
                if (avail <= 0L) {
                    return 0L;
```

### RedundantCast
Casting `messageMapper` to `InMemoryMessageMapper` is redundant
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/InMemoryMailboxSessionMapperFactory.java`
#### Snippet
```java
    public void deleteAll() throws MailboxException {
        ((InMemoryMailboxMapper) mailboxMapper).deleteAll().block();
        ((InMemoryMessageMapper) messageMapper).deleteAll();
        ((InMemorySubscriptionMapper) subscriptionMapper).deleteAll();
    }
```

### RedundantCast
Casting `c` to `Collection` is redundant
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
                "Expecting one of the storage directives to be specified: [targetFolder, seen, important, keywords]");

            Optional<Collection<String>> targetFolders = Optional.of(this.targetFolders.build()).filter(c -> !c.isEmpty()).map(c -> (Collection<String>) c);
            return new StorageDirective(targetFolders, seen, important, keywords);
        }
```

### RedundantCast
Casting `next` to `char` is redundant
in `protocols/imap/src/main/java/org/apache/james/imap/decode/ImapRequestLineReader.java`
#### Snippet
```java
        // Check if we found extra characters.
        if (next != '\n') {
            throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Expected end-of-line, found '" + (char) next + "'.");
        }
    }
```

### RedundantCast
Casting `mapper.readTree(...)` to `ObjectNode` is redundant
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/FilterDeserializer.java`
#### Snippet
```java
    public Filter deserialize(JsonParser p, DeserializationContext ctxt) throws IOException, JsonProcessingException {
        ObjectMapper mapper = (ObjectMapper) p.getCodec();
        ObjectNode obj = (ObjectNode) mapper.readTree(p);

        return mapper.treeToValue(obj, detectClass(obj.fields()));
```

### RedundantCast
Casting `handlers.get(...)` to `ProtocolHandler` is redundant
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java
    @Override
    public ProtocolHandler get(int index) {
        return (ProtocolHandler) handlers.get(index);
    }

```

### RedundantCast
Casting `handlers.remove(...)` to `ProtocolHandler` is redundant
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java
        checkReadOnly();

        return (ProtocolHandler) handlers.remove(index);
    }

```

### RedundantCast
Casting `handlers.next()` to `ProtocolHandler` is redundant
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java
        @Override
        public ProtocolHandler next() {
            return (ProtocolHandler) handlers.next();
        }

```

### RedundantCast
Casting `handlers.set(...)` to `ProtocolHandler` is redundant
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java
        checkReadOnly();

        return (ProtocolHandler) handlers.set(index, element);
    }

```

### RedundantCast
Casting `JsonpSerializableSerializer.INSTANCE` to `JsonpSerializer` is redundant
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/JsonpMapperBase.java`
#### Snippet
```java
        Class<?> valueClass = value.getClass();
        if (JsonpSerializable.class.isAssignableFrom(valueClass)) {
            return (JsonpSerializer<T>) JsonpSerializableSerializer.INSTANCE;
        }

```

### RedundantCast
Casting `JsonpValueSerializer.INSTANCE` to `JsonpSerializer` is redundant
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/JsonpMapperBase.java`
#### Snippet
```java

        if (JsonValue.class.isAssignableFrom(valueClass)) {
            return (JsonpSerializer<T>) JsonpValueSerializer.INSTANCE;
        }

```

## RuleId[id=JavadocDeclaration]
### JavadocDeclaration
Wrong tag `Deprecated`
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/MailAddress.java`
#### Snippet
```java
 * <strong>This version is copied from mailet-api with a few changes to not make it depend on javamail</strong>
 *
 * @Deprecated Use james-core {@link org.apache.james.core.MailAddress} instead.
 */
@Deprecated
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/MailAddressException.java`
#### Snippet
```java

/**
 * @Deprecated see {@link org.apache.james.protocols.smtp.MailAddress} for more details.
 */
@Deprecated
```

### JavadocDeclaration
`@param session` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * This implementation just calls {@link LineHandler#onLine(org.apache.james.protocols.api.ProtocolSession, byte[])} but subclasses should override it if needed.
     * 
     * @param session
     * @param line
     * @param next
```

### JavadocDeclaration
`@param line` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * 
     * @param session
     * @param line
     * @param next
     * @return response
```

### JavadocDeclaration
`@param next` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * @param session
     * @param line
     * @param next
     * @return response
     */
```

### JavadocDeclaration
`@param session` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * This implementation just calls {@link LineHandler#onLine(org.apache.james.protocols.api.ProtocolSession, byte[])} but subclasses should override it if needed.
     *
     * @param session
     * @param line
     * @param next
```

### JavadocDeclaration
`@param line` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     *
     * @param session
     * @param line
     * @param next
     * @return response
```

### JavadocDeclaration
`@param next` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * @param session
     * @param line
     * @param next
     * @return response
     */
```

### JavadocDeclaration
`@param session` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * This implementation just calls {@link LineHandler#onLine(org.apache.james.protocols.api.ProtocolSession, byte[])} but subclasses should override it if needed.
     * 
     * @param session
     * @param line
     * @param next
```

### JavadocDeclaration
`@param line` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * 
     * @param session
     * @param line
     * @param next
     * @return response
```

### JavadocDeclaration
`@param next` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/SeparatingDataLineFilter.java`
#### Snippet
```java
     * @param session
     * @param line
     * @param next
     * @return response
     */
```

### JavadocDeclaration
`@param session` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/AbstractHookableCmdHandler.java`
#### Snippet
```java
     * detected, otherwise null.
     * 
     * @param session
     * @param command
     * @param parameters
```

### JavadocDeclaration
`@param command` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/AbstractHookableCmdHandler.java`
#### Snippet
```java
     * 
     * @param session
     * @param command
     * @param parameters
     * @return smtp response if a syntax error was detected, otherwise <code>null</code>
```

### JavadocDeclaration
`@param parameters` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/AbstractHookableCmdHandler.java`
#### Snippet
```java
     * @param session
     * @param command
     * @param parameters
     * @return smtp response if a syntax error was detected, otherwise <code>null</code>
     */
```

### JavadocDeclaration
`@param session` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/AbstractHookableCmdHandler.java`
#### Snippet
```java
     * Execute the core commandHandling.
     * 
     * @param session
     * @param command
     * @param parameters
```

### JavadocDeclaration
`@param command` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/AbstractHookableCmdHandler.java`
#### Snippet
```java
     * 
     * @param session
     * @param command
     * @param parameters
     * @return smtp response
```

### JavadocDeclaration
`@param parameters` tag description is missing
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/AbstractHookableCmdHandler.java`
#### Snippet
```java
     * @param session
     * @param command
     * @param parameters
     * @return smtp response
     */
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/hook/MailHook.java`
#### Snippet
```java
     * Return the HookResult after run the hook
     *
     * @Deprecated use {@link #doMail(SMTPSession, MaybeSender)} instead
     * 
     * @param session the SMTPSession
```

### JavadocDeclaration
`@param sequenceNumber` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * Constructor for Account.
     * 
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param user
```

### JavadocDeclaration
`@param parsedConfiguration` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * 
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param user
     * @param password
```

### JavadocDeclaration
`@param user` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param user
     * @param password
     * @param recipient
```

### JavadocDeclaration
`@param password` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param parsedConfiguration
     * @param user
     * @param password
     * @param recipient
     * @param ignoreRecipientHeader
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param user
     * @param password
     * @param recipient
     * @param ignoreRecipientHeader
     * @param session
```

### JavadocDeclaration
`@param ignoreRecipientHeader` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param password
     * @param recipient
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
```

### JavadocDeclaration
`@param session` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param recipient
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/Account.java`
#### Snippet
```java
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */

```

### JavadocDeclaration
`@param account` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/StoreProcessor.java`
#### Snippet
```java
     * Constructor for StoreProcessor.
     * 
     * @param account
     */
    protected StoreProcessor(Account account) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * Method open.
     * 
     * @throws MessagingException
     */
    protected void open() throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * Method recurse.
     * 
     * @throws MessagingException
     */
    protected void recurse() throws MessagingException {
```

### JavadocDeclaration
`@param aMessage` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * Answer if <code>aMessage</code> has been SEEN.
     * 
     * @param aMessage
     * @return boolean
     * @throws MessagingException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * @param aMessage
     * @return boolean
     * @throws MessagingException
     */
    protected boolean isSeen(MimeMessage aMessage) throws MessagingException {
```

### JavadocDeclaration
`@param aMessage` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * </p>
     * 
     * @param aMessage
     * @return boolean
     * @throws MessagingException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * @param aMessage
     * @return boolean
     * @throws MessagingException
     */
    protected boolean handleMarkSeenNotPermanent(MimeMessage aMessage) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FolderProcessor.java`
#### Snippet
```java
     * Method close.
     * 
     * @throws MessagingException
     */
    protected void close() throws MessagingException {
```

### JavadocDeclaration
`@param sequenceNumber` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * Constructor for DynamicAccount.
     * 
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param userName
```

### JavadocDeclaration
`@param parsedConfiguration` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * 
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param userName
     * @param userPrefix
```

### JavadocDeclaration
`@param userName` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param userName
     * @param userPrefix
     * @param userSuffix
```

### JavadocDeclaration
`@param userPrefix` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param parsedConfiguration
     * @param userName
     * @param userPrefix
     * @param userSuffix
     * @param password
```

### JavadocDeclaration
`@param userSuffix` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param userName
     * @param userPrefix
     * @param userSuffix
     * @param password
     * @param recipientPrefix
```

### JavadocDeclaration
`@param password` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param userPrefix
     * @param userSuffix
     * @param password
     * @param recipientPrefix
     * @param recipientSuffix
```

### JavadocDeclaration
`@param recipientPrefix` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param userSuffix
     * @param password
     * @param recipientPrefix
     * @param recipientSuffix
     * @param ignoreRecipientHeader
```

### JavadocDeclaration
`@param recipientSuffix` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param password
     * @param recipientPrefix
     * @param recipientSuffix
     * @param ignoreRecipientHeader
     * @param session
```

### JavadocDeclaration
`@param ignoreRecipientHeader` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param recipientPrefix
     * @param recipientSuffix
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
```

### JavadocDeclaration
`@param session` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param recipientSuffix
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
    public DynamicAccount(int sequenceNumber, ParsedConfiguration parsedConfiguration, String userName, String userPrefix, String userSuffix, String password, String recipientPrefix, String recipientSuffix, boolean ignoreRecipientHeader, String customRecipientHeader, Session session)
```

### JavadocDeclaration
`@param sequenceNumber` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * Constructor for DynamicAccount.
     * 
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param user
```

### JavadocDeclaration
`@param parsedConfiguration` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * 
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param user
     * @param password
```

### JavadocDeclaration
`@param user` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param sequenceNumber
     * @param parsedConfiguration
     * @param user
     * @param password
     * @param recipient
```

### JavadocDeclaration
`@param password` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param parsedConfiguration
     * @param user
     * @param password
     * @param recipient
     * @param ignoreRecipientHeader
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param user
     * @param password
     * @param recipient
     * @param ignoreRecipientHeader
     * @param session
```

### JavadocDeclaration
`@param ignoreRecipientHeader` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param password
     * @param recipient
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
```

### JavadocDeclaration
`@param session` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param recipient
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
     * @param ignoreRecipientHeader
     * @param session
     * @throws ConfigurationException
     */
    private DynamicAccount(int sequenceNumber, ParsedConfiguration parsedConfiguration, String user, String password, String recipient, boolean ignoreRecipientHeader, String customRecipientHeader, Session session) throws ConfigurationException {
```

### JavadocDeclaration
`@param configuration` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/ParsedConfiguration.java`
#### Snippet
```java
     * Constructor for ParsedConfiguration.
     * 
     * @param configuration
     * @param localUsers
     * @param dnsServer
```

### JavadocDeclaration
`@param localUsers` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/ParsedConfiguration.java`
#### Snippet
```java
     * 
     * @param configuration
     * @param localUsers
     * @param dnsServer
     * @throws ConfigurationException
```

### JavadocDeclaration
`@param dnsServer` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/ParsedConfiguration.java`
#### Snippet
```java
     * @param configuration
     * @param localUsers
     * @param dnsServer
     * @throws ConfigurationException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/ParsedConfiguration.java`
#### Snippet
```java
     * @param localUsers
     * @param dnsServer
     * @throws ConfigurationException
     */
    public ParsedConfiguration(HierarchicalConfiguration<ImmutableNode> configuration, UsersRepository localUsers, DNSService dnsServer, DomainList domainList, MailQueue queue) throws ConfigurationException {
```

### JavadocDeclaration
`@param oldAccounts` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
     * existing users are copied and accounts for new users are created.
     *
     * @param oldAccounts
     * @param parameters
     * @return Map - The current Accounts
```

### JavadocDeclaration
`@param parameters` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
     *
     * @param oldAccounts
     * @param parameters
     * @return Map - The current Accounts
     * @throws ConfigurationException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
     * @param parameters
     * @return Map - The current Accounts
     * @throws ConfigurationException
     */
    protected Map<DynamicAccountKey, DynamicAccount> computeDynamicAccounts(Map<DynamicAccountKey, DynamicAccount> oldAccounts, ParsedDynamicAccountParameters parameters) throws ConfigurationException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/FetchMail.java`
#### Snippet
```java
     *
     * @param configuration The configuration containing the parameters
     * @throws ConfigurationException
     */
    protected void setSessionParameters(HierarchicalConfiguration<ImmutableNode> configuration) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Set the SEEN flag.
     *
     * @throws MessagingException
     */
    protected void setMessageSeen() throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @return MailAddress
     * @throws MessagingException
     */
    protected MailAddress getIntendedRecipient() throws MessagingException {
```

### JavadocDeclaration
`@param detailMsg` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * current status of the message being processed.
     *
     * @param detailMsg
     * @return StringBuilder
     */
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method isLocalServer.
     *
     * @param recipient
     * @return boolean
     */
```

### JavadocDeclaration
`@param mail` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * message store.
     *
     * @param mail
     */
    protected void handleBouncing(Mail mail) throws MessagingException {
```

### JavadocDeclaration
`@param messageIn` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Constructor for MessageProcessor.
     *
     * @param messageIn
     * @param account
     */
```

### JavadocDeclaration
`@param account` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param messageIn
     * @param account
     */

```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Is the SEEN flag set?
     *
     * @throws MessagingException
     */
    protected boolean isMessageSeen() throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * </p>
     *
     * @throws MessagingException
     */
    protected void handleMarkSeenNotPermanent() throws MessagingException {
```

### JavadocDeclaration
`@param ex` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method handleParseException.
     *
     * @param ex
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param ex
     * @throws MessagingException
     */
    protected void handleParseException(ParseException ex) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @return String
     * @throws MessagingException
     * @throws UnknownHostException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * @return String
     * @throws MessagingException
     * @throws UnknownHostException
     */
    protected String computeRemoteAddress() throws MessagingException, UnknownHostException {
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method rejectBlacklistedRecipient.
     *
     * @param recipient
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param recipient
     * @throws MessagingException
     */
    protected void rejectBlacklistedRecipient(MailAddress recipient) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Set the DELETED flag.
     *
     * @throws MessagingException
     */
    protected void setMessageDeleted() throws MessagingException {
```

### JavadocDeclaration
`@param account` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Constructor for MessageProcessor.
     *
     * @param account
     */
    private MessageProcessor(Account account) {
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method createMail creates a new <code>Mail</code>.
     *
     * @param message
     * @param recipient
     * @return Mail
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param message
     * @param recipient
     * @return Mail
     * @throws MessagingException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * @param recipient
     * @return Mail
     * @throws MessagingException
     */
    protected Mail createMail(MimeMessage message, MailAddress recipient) throws MessagingException, UnknownHostException {
```

### JavadocDeclaration
`@param mail` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method sendMail.
     *
     * @param mail
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param mail
     * @throws MessagingException
     */
    protected void sendMail(Mail mail) throws MessagingException {
```

### JavadocDeclaration
`@param msg` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * I opted not to use ORO (maybe I should have).
     *
     * @param msg
     * @return String
     */
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method rejectUserUndefined.
     *
     * @param recipient
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param recipient
     * @throws MessagingException
     */
    protected void rejectUserUndefined(MailAddress recipient) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @return MailAddress
     * @throws MessagingException
     */
    protected MailAddress getSender() throws MessagingException {
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method rejectRemoteRecipient.
     *
     * @param recipient
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param recipient
     * @throws MessagingException
     */
    protected void rejectRemoteRecipient(MailAddress recipient) throws MessagingException {
```

### JavadocDeclaration
`@param ex` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method handleUnknownHostException.
     *
     * @param ex
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param ex
     * @throws MessagingException
     */
    protected void handleUnknownHostException(UnknownHostException ex) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method rejectRemoteReceivedHeaderInvalid.
     *
     * @throws MessagingException
     */
    protected void rejectRemoteReceivedHeaderInvalid() throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method rejectRecipientNotFound.
     *
     * @throws MessagingException
     */
    protected void rejectRecipientNotFound() throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @return MimeMessage
     * @throws MessagingException
     */
    protected MimeMessage createEmptyMessage() throws MessagingException {
```

### JavadocDeclaration
`@param detailMsg` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Log the status of the current message as INFO.
     *
     * @param detailMsg
     */
    protected void logStatusInfo(String detailMsg) throws MessagingException {
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method isBlacklistedRecipient.
     *
     * @param recipient
     * @return boolean
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @param messageSize size
     * @throws MessagingException
     */
    protected void rejectMaxMessageSizeExceeded(int messageSize) throws MessagingException {
```

### JavadocDeclaration
`@param detailMsg` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Log the status the current message as ERROR.
     *
     * @param detailMsg
     */
    protected void logStatusError(String detailMsg) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @return MimeMessage
     * @throws MessagingException
     */
    protected MimeMessage createMessage() throws MessagingException {
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Method isLocalRecipient.
     *
     * @param recipient
     * @return boolean
     * @throws UsersRepositoryException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * @param recipient
     * @return boolean
     * @throws UsersRepositoryException
     */
    protected boolean isLocalRecipient(MailAddress recipient) throws UsersRepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     *
     * @return String
     * @throws MessagingException
     * @throws UnknownHostException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * @return String
     * @throws MessagingException
     * @throws UnknownHostException
     */
    protected String computeRemoteHostName() throws MessagingException, UnknownHostException {
```

### JavadocDeclaration
`@param detailMsg` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Log the status the current message as WARN.
     *
     * @param detailMsg
     */
    protected void logStatusWarn(String detailMsg) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
     * Is the DELETED flag set?
     *
     * @throws MessagingException
     */
    protected boolean isMessageDeleted() throws MessagingException {
```

### JavadocDeclaration
Wrong tag `returns`
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
     * relying on this design which may be removed in a future release.
     *
     * @returns true if the given object is equal to this one, false otherwise
     */
    @Override
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
     * Return <code>true</code> if the {@link MailAddress} should represent a null sender (<>)
     *
     * @Deprecated You should use an Optional&lt;MailAddress&gt; representation of a MailAddress rather than relying on a NULL object
     */
    @Deprecated
```

### JavadocDeclaration
`@param connectionFactory` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
     * Construct a new ActiveMQ based {@link MailQueue}.
     * 
     * @param connectionFactory
     * @param queuename
     * @param useBlob
```

### JavadocDeclaration
`@param queuename` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
     * 
     * @param connectionFactory
     * @param queuename
     * @param useBlob
     */
```

### JavadocDeclaration
`@param useBlob` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
     * @param connectionFactory
     * @param queuename
     * @param useBlob
     */
    public ActiveMQCacheableMailQueue(ConnectionFactory connectionFactory, MailQueueItemDecoratorFactory mailQueueItemDecoratorFactory, MailQueueName queuename, boolean useBlob, MetricFactory metricFactory,
```

### JavadocDeclaration
`@param session` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
     * Cast the given {@link Session} to an {@link ActiveMQSession}
     * 
     * @param session
     * @return amqSession
     * @throws JMSException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
     * @param session
     * @return amqSession
     * @throws JMSException
     */
    protected ActiveMQSession getAMQSession(Session session) {
```

### JavadocDeclaration
JMSException is not declared to be thrown by method getAMQSession
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
     * @param session
     * @return amqSession
     * @throws JMSException
     */
    protected ActiveMQSession getAMQSession(Session session) {
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java
     * {@link File} is lookup via the {@link FileSystem} service
     *
     * @param message
     * @return file
     * @throws JMSException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java
     * @param message
     * @return file
     * @throws JMSException
     * @throws FileNotFoundException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/FileSystemBlobStrategy.java`
#### Snippet
```java
     * @return file
     * @throws JMSException
     * @throws FileNotFoundException
     */
    protected File getFile(ActiveMQBlobMessage message) throws JMSException, IOException {
```

### JavadocDeclaration
`@param array` tag description is missing
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/EncryptDecryptHelper.java`
#### Snippet
```java
     * Encrypt the given array and return the encrypted one
     * 
     * @param array
     * @return enc-array
     */
```

### JavadocDeclaration
`@param array` tag description is missing
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/EncryptDecryptHelper.java`
#### Snippet
```java
     * Decrypt the given array and return the de-crypted one
     * 
     * @param array
     * @return dec-array
     */
```

### JavadocDeclaration
`@param pass` tag description is missing
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/EncryptDecryptHelper.java`
#### Snippet
```java
     * So to be safe its the best to call this in a constructor
     * 
     * @param pass
     */
    public static void init(String pass) {
```

### JavadocDeclaration
`@param em` tag description is missing
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/JpaMigrateQuery.java`
#### Snippet
```java
    
    /**
     * @param em
     * @param update
     */
```

### JavadocDeclaration
`@param update` tag description is missing
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/JpaMigrateQuery.java`
#### Snippet
```java
    /**
     * @param em
     * @param update
     */
    public static void executeUpdate(EntityManager em, String update) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/JpaMigrateCommand.java`
#### Snippet
```java
     * 
     * @param em the provided Entity Manager
     * @throws JpaMigrateException
     */
    void migrate(EntityManager em) throws JpaMigrateException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/JpaMigrator.java`
#### Snippet
```java
     * 
     * @param jiras the JIRAs numbers
     * @throws JpaMigrateException 
     */
    public static void main(String[] jiras) throws JpaMigrateException {
```

### JavadocDeclaration
`@param name` tag description is missing
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP168JpaMigrateCommand.java`
#### Snippet
```java

        /**
         * @param name
         */
        public MailboxPath(String name) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/SessionFactory.java`
#### Snippet
```java
     * 
     * @return <code>Session</code>, not null
     * @throws Exception
     */
    Session newSession(Continuation continuation)
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/HostSystem.java`
#### Snippet
```java
     * 
     * @return <code>Session</code>, not null
     * @throws Exception
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/HostSystem.java`
#### Snippet
```java
     * @param password
     *            user password
     * @throws Exception
     */
    boolean addUser(Username user, String password) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/Session.java`
#### Snippet
```java
     * Closes the session.
     * 
     * @throws Exception
     */
    void stop() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/Session.java`
#### Snippet
```java
     * Writes a line to the session output.
     * @param line not null
     * @throws Exception
     */
    void writeLine(String line) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/Session.java`
#### Snippet
```java
     * Reopens the session to reinitialize the server state
     * 
     * @throws Exception
     */
    void restart() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/Session.java`
#### Snippet
```java
     * Opens the session.
     * 
     * @throws Exception
     */
    void start() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/api/Session.java`
#### Snippet
```java
     * blocking until a new line is available.
     * @return not null
     * @throws Exception
     */
    String readLine() throws Exception;
```

### JavadocDeclaration
`@param cls` tag description is missing
in `server/container/guice/configuration/src/main/java/org/apache/james/utils/DelegatedPropertiesConfiguration.java`
#### Snippet
```java
    /**
     * Inherits deprecation from parent
     * @param cls
     * @param key
     * @param defaultValue
```

### JavadocDeclaration
`@param key` tag description is missing
in `server/container/guice/configuration/src/main/java/org/apache/james/utils/DelegatedPropertiesConfiguration.java`
#### Snippet
```java
     * Inherits deprecation from parent
     * @param cls
     * @param key
     * @param defaultValue
     * @return
```

### JavadocDeclaration
`@param defaultValue` tag description is missing
in `server/container/guice/configuration/src/main/java/org/apache/james/utils/DelegatedPropertiesConfiguration.java`
#### Snippet
```java
     * @param cls
     * @param key
     * @param defaultValue
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `server/container/guice/configuration/src/main/java/org/apache/james/utils/DelegatedPropertiesConfiguration.java`
#### Snippet
```java
     * @param key
     * @param defaultValue
     * @return
     */
    @Deprecated()
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/TokenCollector.java`
#### Snippet
```java
     * @param stream not null
     * @return this, not null
     * @throws IOException
     */
    public TokenCollector collect(Reader stream) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/TokenCounter.java`
#### Snippet
```java
     * @param stream not null
     * @return this, not null
     * @throws IOException
     */
    public TokenCounter count(Reader stream) throws IOException {
```

### JavadocDeclaration
`@param sessionNumber` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
         * Initialises the ClientRequest, with a message and session number.
         * 
         * @param sessionNumber
         * @param message
         */
```

### JavadocDeclaration
`@param message` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
         * 
         * @param sessionNumber
         * @param message
         */
        public ClientRequest(int sessionNumber, String message) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
         * only the writer for this session is writted to.
         * 
         * @throws Exception
         */
        @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
         * @param continueAfterFailure
         *            TODO
         * @throws Exception
         */
        void testProtocol(Session[] sessions, boolean continueAfterFailure) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailrepository/mailrepository-api/src/main/java/org/apache/james/mailrepository/api/MailRepository.java`
#### Snippet
```java
     * Removes all mails from this repository
     *
     * @throws MessagingException
     */
    void removeAll() throws MessagingException;
```

### JavadocDeclaration
`@param tokens` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * strength to the lowest strength.
     * 
     * @param tokens
     * @param workCorpus
     * @return SortedSet of TokenProbabilityStrength objects.
```

### JavadocDeclaration
`@param workCorpus` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * 
     * @param tokens
     * @param workCorpus
     * @return SortedSet of TokenProbabilityStrength objects.
     */
```

### JavadocDeclaration
`@param token` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * Compute the probability that "token" is SPAM.
     * 
     * @param token
     * @return The probability that the token occurs within spam.
     */
```

### JavadocDeclaration
`@param stream` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * encountered.
     * 
     * @param stream
     * @return Set
     */
```

### JavadocDeclaration
`@param tokenProbabilityStrengths` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * tokenProbabilities SortedSet.
     * 
     * @param tokenProbabilityStrengths
     * @param workCorpus
     * @return Computed spamminess.
```

### JavadocDeclaration
`@param workCorpus` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * 
     * @param tokenProbabilityStrengths
     * @param workCorpus
     * @return Computed spamminess.
     */
```

### JavadocDeclaration
`@param stream` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * token/counts.
     * 
     * @param stream
     * @param target
     */
```

### JavadocDeclaration
`@param target` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
     * 
     * @param stream
     * @param target
     */
    private void addTokenOccurrences(Reader stream, Map<String, Integer> target) throws java.io.IOException {
```

### JavadocDeclaration
`@param sqlDoc` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
     * Configures a SqlResources object from an xml document.
     * 
     * @param sqlDoc
     * @param sqlDefsSection
     * @param conn
```

### JavadocDeclaration
`@param sqlDefsSection` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
     * 
     * @param sqlDoc
     * @param sqlDefsSection
     * @param conn
     * @param configParameters
```

### JavadocDeclaration
`@param conn` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
     * @param sqlDoc
     * @param sqlDefsSection
     * @param conn
     * @param configParameters
     * @throws SQLException
```

### JavadocDeclaration
`@param configParameters` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
     * @param sqlDefsSection
     * @param conn
     * @param configParameters
     * @throws SQLException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
     * @param conn
     * @param configParameters
     * @throws SQLException
     */
    protected void init(Document sqlDoc, String sqlDefsSection, Connection conn, Map<String, String> configParameters) throws SQLException {
```

### JavadocDeclaration
`@param spamdPort` tag description is missing
in `third-party/spamassassin/src/main/java/org/apache/james/spamassassin/SpamAssassinInvoker.java`
#### Snippet
```java
     * @param spamdHost
     *            The host on which spamd runs
     * @param spamdPort
     */
    public SpamAssassinInvoker(MetricFactory metricFactory, String spamdHost, int spamdPort) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/AbstractStageable.java`
#### Snippet
```java
     * Does actual object staging.
     *
     * @throws Exception
     */
    protected abstract void doStage() throws Exception;
```

### JavadocDeclaration
`@return` tag description is missing
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MailboxMapper.java`
#### Snippet
```java
     *  @param mailbox Mailbox for whom we want to update ACL
     * @param mailboxACL New value of the ACL for this mailbox
     * @return
     */
    Mono<ACLDiff> setACL(Mailbox mailbox, MailboxACL mailboxACL);
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MessageIdMapper.java`
#### Snippet
```java
     *
     * @return Metadata of the update, indexed by mailboxIds.
     * @throws MailboxException
     */
    Mono<Multimap<MailboxId, UpdatedFlags>> setFlags(MessageId messageId, List<MailboxId> mailboxIds, Flags newState, MessageManager.FlagsUpdateMode updateMode);
```

### JavadocDeclaration
MailboxException is not declared to be thrown by method setFlags
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MessageIdMapper.java`
#### Snippet
```java
     *
     * @return Metadata of the update, indexed by mailboxIds.
     * @throws MailboxException
     */
    Mono<Multimap<MailboxId, UpdatedFlags>> setFlags(MessageId messageId, List<MailboxId> mailboxIds, Flags newState, MessageManager.FlagsUpdateMode updateMode);
```

### JavadocDeclaration
Javadoc pointing to itself
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MessageMapper.java`
#### Snippet
```java
        HEADERS,
        /**
         * Fetch the {@link #HEADERS}, {@link Property}'s and the {@link #ATTACHMENTS_METADATA}'s for the {@link MailboxMessage}. This includes:
         *
         * <p>
```

### JavadocDeclaration
Javadoc pointing to itself
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MessageMapper.java`
#### Snippet
```java
        METADATA,
        /**
         * Fetch the {@link #METADATA}, {@link Property}'s and the {@link #HEADERS}'s for the {@link MailboxMessage}. This includes:
         * 
         * <p>
```

### JavadocDeclaration
`@param sqlDoc` tag description is missing
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
     * Configures a SqlResources object from an xml document.
     * 
     * @param sqlDoc
     * @param sqlDefsSection
     * @param conn
```

### JavadocDeclaration
`@param sqlDefsSection` tag description is missing
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
     * 
     * @param sqlDoc
     * @param sqlDefsSection
     * @param conn
     * @param configParameters
```

### JavadocDeclaration
`@param conn` tag description is missing
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
     * @param sqlDoc
     * @param sqlDefsSection
     * @param conn
     * @param configParameters
     * @throws SQLException
```

### JavadocDeclaration
`@param configParameters` tag description is missing
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
     * @param sqlDefsSection
     * @param conn
     * @param configParameters
     * @throws SQLException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
     * @param conn
     * @param configParameters
     * @throws SQLException
     */
    protected void init(Document sqlDoc, String sqlDefsSection, Connection conn, Map<String, String> configParameters) throws SQLException {
```

### JavadocDeclaration
Tag `goal` is not allowed here
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTestMojo.java`
#### Snippet
```java
/**
 * Runs MPT scripts
 * @goal run
 */
public class MailProtocolTestMojo extends AbstractMojo {
```

### JavadocDeclaration
Wrong tag `parameter`
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTestMojo.java`
#### Snippet
```java
     * The Mail Protocol Tests (MPT) to run
     *
     * @parameter
     * @required
     * @since 0.1
```

### JavadocDeclaration
Wrong tag `required`
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTestMojo.java`
#### Snippet
```java
     *
     * @parameter
     * @required
     * @since 0.1
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTest.java`
#### Snippet
```java
     * Validate if the configured parameters are valid
     *
     * @throws MojoFailureException
     */
    private void validate() throws MojoFailureException {
```

### JavadocDeclaration
MailboxException is not declared to be thrown by method authenticate
in `mailbox/api/src/main/java/org/apache/james/mailbox/SessionProvider.java`
#### Snippet
```java
     * @return a <code>MailboxSession</code> for the real user
     *            when the given user is authenticated and authorized to access
     * @throws MailboxException
     *             when the creation fails for other reasons
     */
```

### JavadocDeclaration
MailboxException is not declared to be thrown by method authenticate
in `mailbox/api/src/main/java/org/apache/james/mailbox/SessionProvider.java`
#### Snippet
```java
     * @return a <code>MailboxSession</code> for the real user
     *            when the given user is authenticated and authorized to access
     * @throws MailboxException
     *             when the creation fails for other reasons
     */
```

### JavadocDeclaration
MailboxException is not declared to be thrown by method myRights
in `mailbox/api/src/main/java/org/apache/james/mailbox/RightManager.java`
#### Snippet
```java
     *         returns {@link MailboxACL#NO_RIGHTS} if
     *         {@code session.getUser()} is null.
     * @throws MailboxException in case of unknown mailbox or unsupported right
     */
    Rfc4314Rights myRights(Mailbox mailbox, MailboxSession session);
```

### JavadocDeclaration
MailboxException is not declared to be thrown by method myRights
in `mailbox/api/src/main/java/org/apache/james/mailbox/RightManager.java`
#### Snippet
```java
     *         returns {@link MailboxACL#NO_RIGHTS} if
     *         {@code session.getUser()} is null.
     * @throws MailboxException in case of unknown mailbox or unsupported right
     */
    Publisher<Rfc4314Rights> myRights(MailboxId mailboxId, MailboxSession session);
```

### JavadocDeclaration
`@param file` tag description is missing
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
     * Read a file with the specified encoding into a String
     *
     * @param file
     * @param encoding
     * @return
```

### JavadocDeclaration
`@param encoding` tag description is missing
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
     *
     * @param file
     * @param encoding
     * @return
     * @throws FileNotFoundException
```

### JavadocDeclaration
`@return` tag description is missing
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
     * @param file
     * @param encoding
     * @return
     * @throws FileNotFoundException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
     * @param encoding
     * @return
     * @throws FileNotFoundException
     */
    protected static String toString(File file, String encoding) throws FileNotFoundException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/JDBCGreylistHandler.java`
#### Snippet
```java
     *            The createSqlname
     * @return true or false
     * @throws SQLException
     */
    private boolean createTable(String tableNameSqlStringName, String createSqlStringName) throws SQLException {
```

### JavadocDeclaration
`@param anAction` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/FileIntoAction.java`
#### Snippet
```java
     * </p>
     * 
     * @param anAction
     * @param aMail
     * @param context not null
```

### JavadocDeclaration
`@param aMail` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/FileIntoAction.java`
#### Snippet
```java
     * 
     * @param anAction
     * @param aMail
     * @param context not null
     * @throws MessagingException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/FileIntoAction.java`
#### Snippet
```java
     * @param aMail
     * @param context not null
     * @throws MessagingException
     */
    public void execute(ActionFileInto anAction, Mail aMail, final ActionContext context) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ActionDispatcher.java`
#### Snippet
```java
     * Constructor for ActionDispatcher.
     *
     * @throws NoSuchMethodException
     */
    public ActionDispatcher() {
```

### JavadocDeclaration
NoSuchMethodException is not declared to be thrown by method ActionDispatcher
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ActionDispatcher.java`
#### Snippet
```java
     * Constructor for ActionDispatcher.
     *
     * @throws NoSuchMethodException
     */
    public ActionDispatcher() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ActionDispatcher.java`
#### Snippet
```java
     * @param aMail    not null
     * @param context  not null
     * @throws MessagingException
     */
    public void execute(final Action anAction, final Mail aMail, final ActionContext context) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/RedirectAction.java`
#### Snippet
```java
     * @param aMail not null
     * @param context not null
     * @throws MessagingException
     */
    public void execute(ActionRedirect anAction, Mail aMail, ActionContext context) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/KeepAction.java`
#### Snippet
```java
     * @param aMail not null
     * @param context not null
     * @throws MessagingException
     */
    public void execute(ActionKeep anAction, Mail aMail, ActionContext context) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/RejectAction.java`
#### Snippet
```java
     * @param aMail not null
     * @param context not null
     * @throws MessagingException
     */
    public void execute(ActionReject anAction, Mail aMail, ActionContext context) throws MessagingException {
```

### JavadocDeclaration
`@param aMail` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/SieveMailAdapter.java`
#### Snippet
```java
     * Constructor for SieveMailAdapter.
     * 
     * @param aMail
     * @param aMailetContext
     */
```

### JavadocDeclaration
`@param aMailetContext` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/SieveMailAdapter.java`
#### Snippet
```java
     * 
     * @param aMail
     * @param aMailetContext
     */
    public SieveMailAdapter(final Mail aMail, final MailetContext aMailetContext, final ActionDispatcher dispatcher, final Poster poster,
```

### JavadocDeclaration
`@param dns` tag description is missing
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/NetworkIsInWhitelist.java`
#### Snippet
```java
     * Injection setter for the DNSService.
     * 
     * @param dns
     */
    @Inject
```

### JavadocDeclaration
`@param config` tag description is missing
in `server/container/lifecycle-api/src/main/java/org/apache/james/lifecycle/api/Configurable.java`
#### Snippet
```java
     * with @PostConstruct
     * 
     * @param config
     * @throws ConfigurationException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/lifecycle-api/src/main/java/org/apache/james/lifecycle/api/Configurable.java`
#### Snippet
```java
     * 
     * @param config
     * @throws ConfigurationException
     */
    void configure(HierarchicalConfiguration<ImmutableNode> config) throws ConfigurationException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
     * 
     * @return count the count of all flushed mails
     * @throws MailQueueException
     */
    long flush() throws MailQueueException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
     * 
     * @return count the count of all removed mails
     * @throws MailQueueException
     */
    long clear() throws MailQueueException;
```

### JavadocDeclaration
`@param type` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
     * or a bounce loop
     *
     * @param type
     * @param value
     * @return count the count of all removed mails
```

### JavadocDeclaration
`@param value` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
     *
     * @param type
     * @param value
     * @return count the count of all removed mails
     * @throws MailQueueException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
     * @param value
     * @return count the count of all removed mails
     * @throws MailQueueException
     */
    long remove(Type type, String value) throws MailQueueException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/ManageableMailQueue.java`
#### Snippet
```java
     * 
     * @return size
     * @throws MailQueueException
     */
    long getSize() throws MailQueueException;
```

### JavadocDeclaration
`@param name` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueueFactory.java`
#### Snippet
```java
     * Return the {@link MailQueue} for the name.
     * 
     * @param name
     * @return queue
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueueManagementMBean.java`
#### Snippet
```java
     * 
     * @return data
     * @throws Exception
     */
    List<CompositeData> browse() throws Exception;
```

### JavadocDeclaration
`@param mail` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * calculate the time when the Mail will be available for deQueue
     * 
     * @param mail
     * @param delay
     * @param unit
```

### JavadocDeclaration
`@param delay` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * 
     * @param mail
     * @param delay
     * @param unit
     * @throws MailQueueException
```

### JavadocDeclaration
`@param unit` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * @param mail
     * @param delay
     * @param unit
     * @throws MailQueueException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * @param delay
     * @param unit
     * @throws MailQueueException
     */
    default void enQueue(Mail mail, long delay, TimeUnit unit) throws MailQueueException {
```

### JavadocDeclaration
`@param success` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
         * This is mostly used to either commit a transaction or rollback.
         * 
         * @param success
         * @throws MailQueueException
         */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
         * 
         * @param success
         * @throws MailQueueException
         */
        void done(CompletionStatus success) throws MailQueueException;
```

### JavadocDeclaration
`@param mail` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * calculate the time when the Mail will be available for deQueue
     *
     * @param mail
     * @param delay
     * @throws MailQueueException
```

### JavadocDeclaration
`@param delay` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     *
     * @param mail
     * @param delay
     * @throws MailQueueException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * @param mail
     * @param delay
     * @throws MailQueueException
     */
    void enQueue(Mail mail, Duration delay) throws MailQueueException;
```

### JavadocDeclaration
`@param mail` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * Enqueue the Mail to the queue
     * 
     * @param mail
     * @throws MailQueueException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-api/src/main/java/org/apache/james/queue/api/MailQueue.java`
#### Snippet
```java
     * 
     * @param mail
     * @throws MailQueueException
     */
    void enQueue(Mail mail) throws MailQueueException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
     * @param destination
     *            the destination under which the repository get stored
     * @throws ConfigurationException
     * @throws ConfigurationException
     *             get thrown on invalid destintion syntax
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
     * @param key
     *            the key to remove
     * @throws IOException 
     */
    
```

### JavadocDeclaration
IOException is not declared to be thrown by method remove
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
     * @param key
     *            the key to remove
     * @throws IOException 
     */
    
```

### JavadocDeclaration
`@param srcBean` tag description is missing
in `server/container/mailbox-jmx/src/main/java/org/apache/james/adapter/mailbox/MailboxCopierManagementMBean.java`
#### Snippet
```java
     * Copy from srcBean to dstBean all messages
     * 
     * @param srcBean
     * @param dstBean
     * @throws Exception
```

### JavadocDeclaration
`@param dstBean` tag description is missing
in `server/container/mailbox-jmx/src/main/java/org/apache/james/adapter/mailbox/MailboxCopierManagementMBean.java`
#### Snippet
```java
     * 
     * @param srcBean
     * @param dstBean
     * @throws Exception
     *             if copying failed
```

### JavadocDeclaration
`@param username` tag description is missing
in `server/container/mailbox-jmx/src/main/java/org/apache/james/adapter/mailbox/MailboxManagerManagementMBean.java`
#### Snippet
```java
     * Delete all Mailboxes which belong to the user
     * 
     * @param username
     * @return successful
     */
```

### JavadocDeclaration
`@param username` tag description is missing
in `server/container/mailbox-jmx/src/main/java/org/apache/james/adapter/mailbox/MailboxManagerManagementMBean.java`
#### Snippet
```java
     * List all mailboxes for a user
     * 
     * @param username
     * @return mailboxes
     */
```

### JavadocDeclaration
`@param handlerConfiguration` tag description is missing
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/netty/AbstractConfigurableAsyncServer.java`
#### Snippet
```java
     * Configure the helloName for the given Configuration
     * 
     * @param handlerConfiguration
     * @throws ConfigurationException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/netty/AbstractConfigurableAsyncServer.java`
#### Snippet
```java
     * 
     * @param handlerConfiguration
     * @throws ConfigurationException
     */
    protected void configureHelloName(Configuration handlerConfiguration) throws ConfigurationException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/netty/AbstractConfigurableAsyncServer.java`
#### Snippet
```java
     * this method to init stuff
     * 
     * @throws Exception
     */
    protected void preInit() throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/netty/AbstractConfigurableAsyncServer.java`
#### Snippet
```java
     * Build the SSLEngine
     * 
     * @throws Exception
     */
    protected void buildSSLContext() throws Exception {
```

### JavadocDeclaration
`@param input` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/api/display/ModifiedUtf7.java`
#### Snippet
```java
     * See RFC3501 for more details
     * 
     * @param input
     * @return utf7-encoded value
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer openParen() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer openSquareBracket() throws IOException;
```

### JavadocDeclaration
`@param message` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * Write a quoted message
     * 
     * @param message
     * @return composer
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * @param message
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer quote(String message) throws IOException;
```

### JavadocDeclaration
`@param number` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * Write the message of type <code>Long</code>
     * 
     * @param number
     * @return composer
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * @param number
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer message(long number) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer closeParen() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer closeSquareBracket() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer skipNextSpace() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     *            ASCII encoded, not null
     * @return self, not null
     * @throws IOException
     */
    ImapResponseComposer quoteUpperCaseAscii(String message) throws IOException;
```

### JavadocDeclaration
`@param mailboxName` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * with {@link #quote(String)}.
     * 
     * @param mailboxName
     * @return
     * @throws IOException
```

### JavadocDeclaration
`@return` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @param mailboxName
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * @param mailboxName
     * @return
     * @throws IOException
     */
    ImapResponseComposer mailbox(String mailboxName) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * 
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer end() throws IOException;
```

### JavadocDeclaration
`@param tag` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * Write a tag
     * 
     * @param tag
     * @return composer
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * @param tag
     * @return composer
     * @throws IOException
     */
    ImapResponseComposer tag(Tag tag) throws IOException;
```

### JavadocDeclaration
`@param literal` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * was buffered before will get written too
     * 
     * @param literal
     * @return self
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/encode/ImapResponseComposer.java`
#### Snippet
```java
     * @param literal
     * @return self
     * @throws IOException
     */
    ImapResponseComposer literal(Literal literal) throws IOException;
```

### JavadocDeclaration
`@param implementor` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/processor/CapabilityProcessor.java`
#### Snippet
```java
     * implemented capabilities
     * 
     * @param implementor
     */
    public void addProcessor(CapabilityImplementingProcessor implementor) {
```

### JavadocDeclaration
`@param session` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/processor/CapabilityProcessor.java`
#### Snippet
```java
     * Return all supported <code>CAPABILITIES</code> for this {@link ImapSession}
     * 
     * @param session
     * @return supported
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/PartialFetchBodyElement.java`
#### Snippet
```java
         * {@link InputStream} to the needed offset
         * 
         * @throws IOException
         */
        private void checkOffset() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageInputStream.java`
#### Snippet
```java
     *            {@link MimeMessageWrapper} to do some optimized processing if
     *            possible
     * @throws MessagingException
     */
    public MimeMessageInputStream(MimeMessage message, boolean tryCast) throws MessagingException {
```

### JavadocDeclaration
MessagingException is not declared to be thrown by method MailHeaders
in `server/container/core/src/main/java/org/apache/james/server/core/MailHeaders.java`
#### Snippet
```java
     * No argument constructor
     * 
     * @throws MessagingException
     *             if the super class cannot be properly instantiated
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param bodyOs
     *            the OutputStream to write the message body to
     * @throws IOException
     * @throws UnsupportedDataTypeException
     * @throws MessagingException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     *            the OutputStream to write the message body to
     * @throws IOException
     * @throws UnsupportedDataTypeException
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @throws IOException
     * @throws UnsupportedDataTypeException
     * @throws MessagingException
     */
    public static void writeMessageBodyTo(MimeMessage message, OutputStream bodyOs) throws IOException, MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     *            the String[] which holds headers which should be ignored
     * @return stream the InputStream which holds the headers
     * @throws MessagingException
     */
    public static InputStream getHeadersInputStream(MimeMessage message, String[] ignoreList) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param ignoreList
     *            the String[] which holds headers which should be ignored
     * @throws MessagingException
     */
    private static void writeHeadersTo(MimeMessage message, OutputStream headerOs, String[] ignoreList) throws MessagingException {
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
    /**
     * 
     * @param message
     * @param headerOs
     * @param bodyOs
```

### JavadocDeclaration
`@param headerOs` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * 
     * @param message
     * @param headerOs
     * @param bodyOs
     * @param ignoreList
```

### JavadocDeclaration
`@param bodyOs` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param message
     * @param headerOs
     * @param bodyOs
     * @param ignoreList
     * @throws MessagingException
```

### JavadocDeclaration
`@param ignoreList` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param headerOs
     * @param bodyOs
     * @param ignoreList
     * @throws MessagingException
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param bodyOs
     * @param ignoreList
     * @throws MessagingException
     * @throws IOException
     * @throws UnsupportedDataTypeException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param ignoreList
     * @throws MessagingException
     * @throws IOException
     * @throws UnsupportedDataTypeException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @throws MessagingException
     * @throws IOException
     * @throws UnsupportedDataTypeException
     */
    public static void writeToInternal(MimeMessage message, OutputStream headerOs, OutputStream bodyOs, String[] ignoreList) throws MessagingException, IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageUtil.java`
#### Snippet
```java
     * @param headerOs
     *            the OutputStream to which the headers get written
     * @throws MessagingException
     */
    public static void writeHeadersTo(Enumeration<String> headers, OutputStream headerOs) throws MessagingException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * 
     * @return messageInputStream
     * @throws MessagingException
     */

```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * @param source
     *            the MimeMessageSource
     * @throws MessagingException
     * @throws MessagingException
     */
```

### JavadocDeclaration
MessagingException is not declared to be thrown by method MimeMessageWrapper
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * @param source
     *            the MimeMessageSource
     * @throws MessagingException
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     *            the MimeMessageSource
     * @throws MessagingException
     * @throws MessagingException
     */
    public MimeMessageWrapper(MimeMessageSource source) {
```

### JavadocDeclaration
MessagingException is not declared to be thrown by method MimeMessageWrapper
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     *            the MimeMessageSource
     * @throws MessagingException
     * @throws MessagingException
     */
    public MimeMessageWrapper(MimeMessageSource source) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * @param source
     *            the MimeMessageSource
     * @throws MessagingException
     */
    public MimeMessageWrapper(Session session, MimeMessageSource source) {
```

### JavadocDeclaration
MessagingException is not declared to be thrown by method MimeMessageWrapper
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
     * @param source
     *            the MimeMessageSource
     * @throws MessagingException
     */
    public MimeMessageWrapper(Session session, MimeMessageSource source) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Keywords.java`
#### Snippet
```java
     * exposed IMAP flags)
     *
     * @throws IllegalArgumentException
     */
    public static KeywordsFactory lenientFactory() {
```

### JavadocDeclaration
`@return` tag description is missing
in `protocols/api/src/main/java/org/apache/james/protocols/api/ProtocolSession.java`
#### Snippet
```java
    /**
     * Gets the proxy information if proxying is enabled.
     * @return
     */
    Optional<ProxyInformation> getProxyInformation();
```

### JavadocDeclaration
`@param netspec` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/InetNetworkBuilder.java`
#### Snippet
```java
     * tests for presence of ':'.
     * 
     * @param netspec
     * @return boolean
     *              <code>true</code> if is a IPv6 pattern else <code>false</code>
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/InetNetworkBuilder.java`
#### Snippet
```java
     *            the String which is will converted to InetNetwork
     * @return network the InetNetwork
     * @throws java.net.UnknownHostException
     */
    public InetNetwork getFromString(String netspec) throws UnknownHostException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/InetNetworkBuilder.java`
#### Snippet
```java
     *            the String which is will converted to InetNetwork
     * @return network the InetNetwork
     * @throws java.net.UnknownHostException
     */
    private InetNetwork getV6FromString(String netspec) throws UnknownHostException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/InetNetworkBuilder.java`
#### Snippet
```java
     *            the String which is will converted to InetNetwork
     * @return network the InetNetwork
     * @throws java.net.UnknownHostException
     */
    private InetNetwork getV4FromString(String netspec) throws UnknownHostException {
```

### JavadocDeclaration
`@param netspec` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/InetNetworkBuilder.java`
#### Snippet
```java
     * </pre>
     * 
     * @param netspec
     * @return addrMask the address/mask of the given argument
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/model/Inet4Network.java`
#### Snippet
```java
     *            the byte[] represent the ip
     * @return ip the InetAddress generated of the given byte[]
     * @throws java.net.UnknownHostException
     */
    private static InetAddress getByAddress(byte[] ip) throws UnknownHostException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/model/Inet6Network.java`
#### Snippet
```java
     * @param ip the byte[] represent the ip
     * @return ip the InetAddress generated of the given byte[]
     * @throws java.net.UnknownHostException
     */
    private static InetAddress getByAddress(byte[] ip) throws UnknownHostException {
```

### JavadocDeclaration
`@param aContentType` tag description is missing
in `javax-mail-extension/src/main/java/org/apache/james/javax/MimeMultipartReport.java`
#### Snippet
```java
    /**
     * Sets the content type
     * @param aContentType
     */
    protected void setContentType(ContentType aContentType) {
```

### JavadocDeclaration
`@param aDataSource` tag description is missing
in `javax-mail-extension/src/main/java/org/apache/james/javax/MimeMultipartReport.java`
#### Snippet
```java
    /**
     * Constructs a MimeMultipartReport from the passed DataSource.
     * @param aDataSource
     * @throws javax.mail.MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `javax-mail-extension/src/main/java/org/apache/james/javax/MimeMultipartReport.java`
#### Snippet
```java
     * Constructs a MimeMultipartReport from the passed DataSource.
     * @param aDataSource
     * @throws javax.mail.MessagingException
     */
    public MimeMultipartReport(DataSource aDataSource) throws MessagingException {
```

### JavadocDeclaration
`@param subtype` tag description is missing
in `javax-mail-extension/src/main/java/org/apache/james/javax/MimeMultipartReport.java`
#### Snippet
```java
    /**
     * Constructs a MimeMultipartReport of the given subtype.
     * @param subtype
     */
    public MimeMultipartReport(String subtype) {
```

### JavadocDeclaration
`@param reportType` tag description is missing
in `javax-mail-extension/src/main/java/org/apache/james/javax/MimeMultipartReport.java`
#### Snippet
```java
    /**
     * Sets the type of report.
     * @param reportType
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `javax-mail-extension/src/main/java/org/apache/james/javax/MimeMultipartReport.java`
#### Snippet
```java
     * Sets the type of report.
     * @param reportType
     * @throws MessagingException
     */
    public void setReportType(String reportType) throws MessagingException {
```

### JavadocDeclaration
`@param mail` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasException.java`
#### Snippet
```java
     * </p>
     * 
     * @param mail
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     * save the files in (if not present).
     * 
     * @throws MailetException
     */
    @Override
```

### JavadocDeclaration
`@param mail` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     * @param part
     *            The part to analyse.
     * @param mail
     * @return True if one of the subpart was removed
     * @throws Exception
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     * @param mail
     * @return True if one of the subpart was removed
     * @throws Exception
     */
    @VisibleForTesting boolean processMultipartPartMessage(Part part, Mail mail) throws MailetException {
```

### JavadocDeclaration
Exception is not declared to be thrown by method processMultipartPartMessage
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     * @param mail
     * @return True if one of the subpart was removed
     * @throws Exception
     */
    @VisibleForTesting boolean processMultipartPartMessage(Part part, Mail mail) throws MailetException {
```

### JavadocDeclaration
`@return` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     * @param part
     *            The MIME part to save.
     * @return
     * @throws Exception
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/StripAttachment.java`
#### Snippet
```java
     *            The MIME part to save.
     * @return
     * @throws Exception
     */
    @VisibleForTesting Optional<String> saveAttachmentToFile(Part part, Optional<String> fileName) throws Exception {
```

### JavadocDeclaration
`@param recipient` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/CommandListservMatcher.java`
#### Snippet
```java
     * This doesn't perform an exact match, but checks to see if the request is at least
     * intended to go to the list serv manager.
     * @param recipient
     * @return true if matches, false otherwise
     */
```

### JavadocDeclaration
`@param mail` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasMailAttributeWithValue.java`
#### Snippet
```java
     * and has a toString() value equal to the configured value.</p>
     * 
     * @param mail
     */
    @Override
```

### JavadocDeclaration
`@param fileName` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/AttachmentFileNameIs.java`
#### Snippet
```java
     * Checks if <I>fileName</I> matches with at least one of the <CODE>masks</CODE>.
     * 
     * @param fileName
     */
    protected boolean matchFound(String fileName) {
```

### JavadocDeclaration
`@param part` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/AttachmentFileNameIs.java`
#### Snippet
```java
     * Checks if <I>part</I> is a zip containing a file that matches with at least one of the <CODE>masks</CODE>.
     *
     *@param part
     */
    protected boolean matchFoundInZip(Part part) throws MessagingException, IOException {
```

### JavadocDeclaration
`@param part` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/AttachmentFileNameIs.java`
#### Snippet
```java
     * Checks if <I>part</I> matches with at least one of the <CODE>masks</CODE>.
     * 
     * @param part
     */
    protected boolean matchFound(Part part) throws Exception {
```

### JavadocDeclaration
`@param mail` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/AttachmentFileNameIs.java`
#### Snippet
```java
    /** 
     * Either every recipient is matching or neither of them.
     * @param mail
     * @throws MessagingException if no matching attachment is found and at least one exception was thrown
     */
```

### JavadocDeclaration
`@param fileName` tag description is missing
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/AttachmentFileNameIs.java`
#### Snippet
```java
     * Transforms <I>fileName<I> in a trimmed lowercase string usable for matching agains the masks.
     *
     * @param fileName
     */
    protected String cleanFileName(String fileName) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/crypto/src/main/java/org/apache/james/transport/KeyStoreHolder.java`
#### Snippet
```java
     * @return a list of SMIMESignerInfo which keeps the data of each mail
     *         signer.
     * @throws Exception
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `mailet/crypto/src/main/java/org/apache/james/transport/KeyStoreHolder.java`
#### Snippet
```java
     *         signer.
     * @throws Exception
     * @throws MessagingException
     */
    public List<SMIMESignerInfo> verifySignatures(SMIMESigned signed) throws Exception {
```

### JavadocDeclaration
`@param session` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * and the payload
     *
     * @param session
     * @param m
     * @return copy
```

### JavadocDeclaration
`@param m` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     *
     * @param session
     * @param m
     * @return copy
     * @throws JMSException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * @param m
     * @return copy
     * @throws JMSException
     */
    @SuppressWarnings("unchecked")
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * a {@link BytesMessage}
     *
     * @param message
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     *
     * @param message
     * @throws MessagingException
     */
    protected MimeMessage mimeMessage(Message message) throws MessagingException, JMSException {
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * {@link Mail} is completely populated
     *
     * @param message
     * @return the complete mail
     * @throws MessagingException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * @param message
     * @return the complete mail
     * @throws MessagingException
     * @throws JMSException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * @return the complete mail
     * @throws MessagingException
     * @throws JMSException
     */
    protected final Mail createMail(Message message) throws MessagingException, JMSException {
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * {@link MimeMessage}
     *
     * @param message
     * @throws JMSException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     *
     * @param message
     * @throws JMSException
     */
    protected MailImpl.Builder populateMail(Message message) throws JMSException {
```

### JavadocDeclaration
`@param selector` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * Remove messages with the given selector
     *
     * @param selector
     * @return messages
     */
```

### JavadocDeclaration
`@param session` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * Create a {@link org.apache.james.queue.api.MailQueue.MailQueueItem} for the given parameters
     *
     * @param session
     * @param consumer
     * @param message
```

### JavadocDeclaration
`@param consumer` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     *
     * @param session
     * @param consumer
     * @param message
     * @return item
```

### JavadocDeclaration
`@param message` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * @param session
     * @param consumer
     * @param message
     * @return item
     * @throws JMSException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * @param message
     * @return item
     * @throws JMSException
     * @throws MessagingException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
     * @return item
     * @throws JMSException
     * @throws MessagingException
     */
    protected Mono<MailQueueItem> createMailQueueItem(Session session, MessageConsumer consumer, Message message) throws JMSException, MessagingException {
```

### JavadocDeclaration
`@param error` tag description is missing
in `server/data/data-api/src/main/java/org/apache/james/rrt/api/RecipientRewriteTableManagementMBean.java`
#### Snippet
```java
     * @param domain
     *            the domain. Null if no domain should be used
     * @param error
     * @throws Exception
     *            If an error occurred
```

### JavadocDeclaration
`@param toAddress` tag description is missing
in `server/data/data-api/src/main/java/org/apache/james/rrt/api/RecipientRewriteTableManagementMBean.java`
#### Snippet
```java
     * @param fromDomain
     *            the domain. Null if no domain should be used
     * @param toAddress
     *
     */
```

### JavadocDeclaration
`@param error` tag description is missing
in `server/data/data-api/src/main/java/org/apache/james/rrt/api/RecipientRewriteTableManagementMBean.java`
#### Snippet
```java
     * @param domain
     *            the domain. Null if no domain should be used
     * @param error
     * @throws Exception
     *            If an error occurred
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-api/src/main/java/org/apache/james/rrt/api/RecipientRewriteTable.java`
#### Snippet
```java
     * 
     * @return Map which holds all mappings
     * @throws RecipientRewriteTableException
     */
    Map<MappingSource, Mappings> getAllMappings() throws RecipientRewriteTableException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-api/src/main/java/org/apache/james/rrt/api/RecipientRewriteTable.java`
#### Snippet
```java
     * 
     * @return the collection which holds the mappings.
     * @throws RecipientRewriteTableException
     */
    Mappings getStoredMappings(MappingSource source) throws RecipientRewriteTableException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-api/src/main/java/org/apache/james/user/api/UsersRepositoryManagementMBean.java`
#### Snippet
```java
     * 
     * @return virtual
     * @throws UsersRepositoryException
     */
    boolean getVirtualHostingEnabled() throws Exception;
```

### JavadocDeclaration
`@param name` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factory/mailetcontainer/AbstractLoaderBeanFactory.java`
#### Snippet
```java
     * {@link #getStandardPackage()}
     * 
     * @param name
     * @return instance
     * @throws ClassNotFoundException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/bean/factory/mailetcontainer/AbstractLoaderBeanFactory.java`
#### Snippet
```java
     * @param name
     * @return instance
     * @throws ClassNotFoundException
     */
    @SuppressWarnings("unchecked")
```

### JavadocDeclaration
`@param beanName` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProvider.java`
#### Snippet
```java
     * naming,...
     * 
     * @param beanName
     * @return config
     * @throws ConfigurationException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProvider.java`
#### Snippet
```java
     * @param beanName
     * @return config
     * @throws ConfigurationException
     */
    HierarchicalConfiguration<ImmutableNode> getConfiguration(String beanName) throws ConfigurationException;
```

### JavadocDeclaration
`@param order` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/AbstractLifecycleBeanPostProcessor.java`
#### Snippet
```java

    /**
     * @param order
     */
    public void setOrder(int order) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/AbstractLifecycleBeanPostProcessor.java`
#### Snippet
```java
     * @param beanname
     *            then name of the bean
     * @throws Exception
     */
    protected abstract void executeLifecycleMethodBeforeInit(T bean, String beanname) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/AbstractLifecycleBeanPostProcessor.java`
#### Snippet
```java
     * @param beanname
     *            then name of the bean
     * @throws Exception
     */
    protected abstract void executeLifecycleMethodAfterInit(T bean, String beanname) throws Exception;
```

### JavadocDeclaration
`@param r` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProviderImpl.java`
#### Snippet
```java
     * Load the xmlConfiguration from the given resource.
     * 
     * @param r
     * @return
     * @throws ConfigurationException
```

### JavadocDeclaration
`@return` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProviderImpl.java`
#### Snippet
```java
     * 
     * @param r
     * @return
     * @throws ConfigurationException
     * @throws IOException
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProviderImpl.java`
#### Snippet
```java
     * @param r
     * @return
     * @throws ConfigurationException
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProviderImpl.java`
#### Snippet
```java
     * @return
     * @throws ConfigurationException
     * @throws IOException
     */
    private XMLConfiguration getConfig(Resource r) throws ConfigurationException, IOException {
```

### JavadocDeclaration
`@param configurationMappings` tag description is missing
in `server/container/spring/src/main/java/org/apache/james/container/spring/lifecycle/ConfigurationProviderImpl.java`
#### Snippet
```java
     * Inject the needed configuration mappings.
     * 
     * @param configurationMappings
     */
    public void setConfigurationMappings(Map<String, String> configurationMappings) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MessageInputStream.java`
#### Snippet
```java
     * @param bodyStream
     *            the stream containing body information
     * @throws IOException
     */
    private void closeOutputStreams(OutputStream headerStream, OutputStream bodyStream) throws IOException {
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MessageInputStream.java`
#### Snippet
```java
 * <strong>Note</strong>: Javamail (or the Activation Framework) already uses a
 * worker thread when asked for an inputstream.
 * @Deprecated Will be dropped in 3.9.0. See https://www.mail-archive.com/server-dev@james.apache.org/msg72460.html
 */
@Deprecated
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java
 * InputStream to the JDBC field/record, possibly sequenced with the file
 * stream.
 * @Deprecated Will be dropped in 3.9.0. See https://www.mail-archive.com/server-dev@james.apache.org/msg72460.html
 */
@Deprecated
```

### JavadocDeclaration
Wrong tag `Deprecated`
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
/**
 * Implementation of a MailRepository on a database.
 * @Deprecated Will be dropped in 3.9.0. See https://www.mail-archive.com/server-dev@james.apache.org/msg72460.html
 */
@Deprecated
```

## RuleId[id=FieldMayBeFinal]
### FieldMayBeFinal
Field `extensionFields` may be 'final'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        private Optional<Disposition> dispositionField = Optional.empty();
        private ImmutableList.Builder<Error> errorField = ImmutableList.builder();
        private ImmutableList.Builder<ExtensionField> extensionFields = ImmutableList.builder();

        public Builder reportingUserAgentField(ReportingUserAgent reportingUserAgentField) {
```

### FieldMayBeFinal
Field `errorField` may be 'final'
in `mdn/src/main/java/org/apache/james/mdn/MDNReport.java`
#### Snippet
```java
        private Optional<OriginalMessageId> originalMessageIdField = Optional.empty();
        private Optional<Disposition> dispositionField = Optional.empty();
        private ImmutableList.Builder<Error> errorField = ImmutableList.builder();
        private ImmutableList.Builder<ExtensionField> extensionFields = ImmutableList.builder();

```

### FieldMayBeFinal
Field `modifiers` may be 'final'
in `mdn/src/main/java/org/apache/james/mdn/fields/Disposition.java`
#### Snippet
```java
        private Optional<DispositionSendingMode> sendingMode = Optional.empty();
        private Optional<DispositionType> type = Optional.empty();
        private ImmutableList.Builder<DispositionModifier> modifiers = ImmutableList.builder();

        public Builder actionMode(DispositionActionMode actionMode) {
```

### FieldMayBeFinal
Field `userQuota` may be 'final'
in `server/data/data-memory/src/main/java/org/apache/james/sieverepository/memory/InMemorySieveQuotaRepository.java`
#### Snippet
```java
    private Optional<QuotaSizeLimit> globalQuota = Optional.empty();

    private Map<Username, QuotaSizeLimit> userQuota = new ConcurrentHashMap<>();

    @Override
```

### FieldMayBeFinal
Field `limit` may be 'final'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/EmailChanges.java`
#### Snippet
```java
        private boolean hasMoreChanges;
        private boolean canAddMoreItem;
        private Limit limit;
        private Set<MessageId> created;
        private Set<MessageId> updated;
```

### FieldMayBeFinal
Field `newState` may be 'final'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/EmailChanges.java`
#### Snippet
```java
    }

    private State newState;
    private final boolean hasMoreChanges;
    private final Set<MessageId> created;
```

### FieldMayBeFinal
Field `limit` may be 'final'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChanges.java`
#### Snippet
```java
        private boolean hasMoreChanges;
        private boolean canAddMoreItem;
        private Limit limit;
        private boolean isCountChangeOnly;
        private Set<MailboxId> created;
```

### FieldMayBeFinal
Field `newState` may be 'final'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/change/MailboxChanges.java`
#### Snippet
```java
    }

    private State newState;
    private final boolean hasMoreChanges;
    private final boolean isCountChangesOnly;
```

### FieldMayBeFinal
Field `sslTrustStore` may be 'final'
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQConfiguration.java`
#### Snippet
```java
                private final SSLValidationStrategy sslValidationStrategy;
                private final HostNameVerifier hostNameVerifier;
                private Optional<SSLTrustStore> sslTrustStore;
                private Optional<SSLKeyStore> sslKeyStore;

```

### FieldMayBeFinal
Field `cc` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private Optional<MimeMultipart> content = Optional.empty();
    private ImmutableList.Builder<InternetAddress> from = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> cc = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> to = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> bcc = ImmutableList.builder();
```

### FieldMayBeFinal
Field `headers` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private ImmutableList.Builder<InternetAddress> to = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> bcc = ImmutableList.builder();
    private ImmutableList.Builder<Header> headers = ImmutableList.builder();

    public MimeMessageBuilder setText(String text) {
```

### FieldMayBeFinal
Field `to` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private ImmutableList.Builder<InternetAddress> from = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> cc = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> to = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> bcc = ImmutableList.builder();
    private ImmutableList.Builder<Header> headers = ImmutableList.builder();
```

### FieldMayBeFinal
Field `headers` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
        private Optional<String> cid = Optional.empty();
        private Optional<String> filename = Optional.empty();
        private ImmutableList.Builder<Header> headers = ImmutableList.builder();
        private Optional<String> disposition = Optional.empty();
        private Optional<String> dataAsString = Optional.empty();
```

### FieldMayBeFinal
Field `bcc` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private ImmutableList.Builder<InternetAddress> cc = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> to = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> bcc = ImmutableList.builder();
    private ImmutableList.Builder<Header> headers = ImmutableList.builder();

```

### FieldMayBeFinal
Field `from` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java
    private Optional<InternetAddress> sender = Optional.empty();
    private Optional<MimeMultipart> content = Optional.empty();
    private ImmutableList.Builder<InternetAddress> from = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> cc = ImmutableList.builder();
    private ImmutableList.Builder<InternetAddress> to = ImmutableList.builder();
```

### FieldMayBeFinal
Field `bodyParts` may be 'final'
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java

    public static class MultipartBuilder {
        private ImmutableList.Builder<BodyPart> bodyParts = ImmutableList.builder();
        private Optional<String> subType = Optional.empty();

```

### FieldMayBeFinal
Field `body` may be 'final'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAEncryptedMailboxMessage.java`
#### Snippet
```java
        @Externalizer("EncryptDecryptHelper.getEncrypted")
        @Factory("EncryptDecryptHelper.getDecrypted")
        @Lob private byte[] body;


```

### FieldMayBeFinal
Field `header` may be 'final'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAEncryptedMailboxMessage.java`
#### Snippet
```java
        @Externalizer("EncryptDecryptHelper.getEncrypted")
        @Factory("EncryptDecryptHelper.getDecrypted")
        @Lob private byte[] header;
        
        public JPAEncryptedMailboxMessage(JPAMailbox mailbox, Date internalDate, int size, Flags flags, Content content, int bodyStartOctet, PropertyBuilder propertyBuilder) throws MailboxException {
```

### FieldMayBeFinal
Field `header` may be 'final'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAStreamingMailboxMessage.java`
#### Snippet
```java
    @Persistent(optional = false, fetch = FetchType.LAZY)
    @Column(name = "HEADER_BYTES", length = 10485760, nullable = false)
    private InputStream header;

    private final Content content;
```

### FieldMayBeFinal
Field `body` may be 'final'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/openjpa/JPAStreamingMailboxMessage.java`
#### Snippet
```java
    @Persistent(optional = false, fetch = FetchType.LAZY)
    @Column(name = "MAIL_BYTES", length = 1048576000, nullable = false)
    private InputStream body;

    @Persistent(optional = false, fetch = FetchType.LAZY)
```

### FieldMayBeFinal
Field `mailQueueViewChoice` may be 'final'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        private Optional<ConfigurationPath> configurationPath;
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<MailQueueViewChoice> mailQueueViewChoice;
        private Optional<VaultConfiguration> vaultConfiguration;

```

### FieldMayBeFinal
Field `connectionTimeout` may be 'final'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
    private Optional<Duration> connectionTimeout;

    @VisibleForTesting
```

### FieldMayBeFinal
Field `region` may be 'final'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
            private Optional<Duration> connectionTimeout;
            private Optional<Long> inMemoryReadLimit;
            private Region region;

            public ReadyToBuild(AwsS3AuthConfiguration specificAuthConfiguration, Region region) {
```

### FieldMayBeFinal
Field `readTimeout` may be 'final'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final int httpConcurrency;
    private final Optional<Long> inMemoryReadLimit;
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
    private Optional<Duration> connectionTimeout;
```

### FieldMayBeFinal
Field `writeTimeout` may be 'final'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreConfiguration.java`
#### Snippet
```java
    private final Optional<Long> inMemoryReadLimit;
    private Optional<Duration> readTimeout;
    private Optional<Duration> writeTimeout;
    private Optional<Duration> connectionTimeout;

```

### FieldMayBeFinal
Field `inFlightMails` may be 'final'
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/MailetProcessorImpl.java`
#### Snippet
```java
        }

        private ImmutableList<Mail> inFlightMails;
        private ImmutableSet<Mail> encounteredMails;

```

### FieldMayBeFinal
Field `encounteredMails` may be 'final'
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/MailetProcessorImpl.java`
#### Snippet
```java

        private ImmutableList<Mail> inFlightMails;
        private ImmutableSet<Mail> encounteredMails;

        private ProcessingStep(ImmutableList<Mail> inFlightMails, ImmutableSet<Mail> encounteredMails) {
```

### FieldMayBeFinal
Field `testElements` may be 'final'
in `mpt/core/src/main/java/org/apache/james/mpt/script/GenericSimpleScriptedTestProtocol.java`
#### Snippet
```java

    /** The Protocol session which contains the tests elements */
    private ProtocolSession testElements = new ProtocolSession();

    /** The Protocol session which is run after the testElements. */
```

### FieldMayBeFinal
Field `preElements` may be 'final'
in `mpt/core/src/main/java/org/apache/james/mpt/script/GenericSimpleScriptedTestProtocol.java`
#### Snippet
```java

    /** The Protocol session which is run before the testElements */
    private ProtocolSession preElements = new ProtocolSession();

    /** The Protocol session which contains the tests elements */
```

### FieldMayBeFinal
Field `postElements` may be 'final'
in `mpt/core/src/main/java/org/apache/james/mpt/script/GenericSimpleScriptedTestProtocol.java`
#### Snippet
```java

    /** The Protocol session which is run after the testElements. */
    private ProtocolSession postElements = new ProtocolSession();
    
    private final T hostSystem;
```

### FieldMayBeFinal
Field `timerName` may be 'final'
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java

        private TimerCommand timerCommand;
        private String timerName;

        public TimerElement(TimerCommand timerCommand, String timerName) {
```

### FieldMayBeFinal
Field `timers` may be 'final'
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
    private boolean continueAfterFailure = false;

    private Map<String, Stopwatch> timers = new HashMap<>();

    public final boolean isContinueAfterFailure() {
```

### FieldMayBeFinal
Field `timerCommand` may be 'final'
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
    private class TimerElement implements ProtocolElement {

        private TimerCommand timerCommand;
        private String timerName;

```

### FieldMayBeFinal
Field `perDomainBaseDN` may be 'final'
in `server/data/data-ldap/src/main/java/org/apache/james/user/ldap/LdapRepositoryConfiguration.java`
#### Snippet
```java
        private Optional<Integer> poolSize;
        private Optional<Boolean> trustAllCerts;
        private ImmutableMap.Builder<Domain, String> perDomainBaseDN;

        public Builder() {
```

### FieldMayBeFinal
Field `queue` may be 'final'
in `server/protocols/webadmin/webadmin-mail-over-web/src/main/java/org/apache/james/webadmin/routes/TransferEmailRoutes.java`
#### Snippet
```java
    public static final String BASE_URL = "/mail-transfer-service";

    private MailQueue queue;

    @Override
```

### FieldMayBeFinal
Field `jsonGenericSerializer` may be 'final'
in `server/task/task-json/src/main/java/org/apache/james/server/task/json/JsonTaskAdditionalInformationSerializer.java`
#### Snippet
```java
    }

    private JsonGenericSerializer<TaskExecutionDetails.AdditionalInformation, AdditionalInformationDTO> jsonGenericSerializer;

    @Inject
```

### FieldMayBeFinal
Field `jsonGenericSerializer` may be 'final'
in `server/task/task-json/src/main/java/org/apache/james/server/task/json/JsonTaskSerializer.java`
#### Snippet
```java
    }

    private JsonGenericSerializer<Task, TaskDTO> jsonGenericSerializer;

    @Inject
```

### FieldMayBeFinal
Field `fieldName` may be 'final'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/DeletedMessageField.java`
#### Snippet
```java
public class DeletedMessageField<T> {

    private FieldName fieldName;
    private ValueExtractor<T> valueExtractor;

```

### FieldMayBeFinal
Field `valueExtractor` may be 'final'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/DeletedMessageField.java`
#### Snippet
```java

    private FieldName fieldName;
    private ValueExtractor<T> valueExtractor;

    private DeletedMessageField(FieldName fieldName, ValueExtractor<T> valueExtractor) {
```

### FieldMayBeFinal
Field `expectedValue` may be 'final'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/Criterion.java`
#### Snippet
```java
    public static class ValueMatcher<V, T> {

        private V expectedValue;
        private Operator operator;
        private Predicate<T> matchPredicate;
```

### FieldMayBeFinal
Field `operator` may be 'final'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/Criterion.java`
#### Snippet
```java

        private V expectedValue;
        private Operator operator;
        private Predicate<T> matchPredicate;

```

### FieldMayBeFinal
Field `matchPredicate` may be 'final'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/search/Criterion.java`
#### Snippet
```java
        private V expectedValue;
        private Operator operator;
        private Predicate<T> matchPredicate;

        public ValueMatcher(V expectedValue, Operator operator, Predicate<T> matchPredicate) {
```

### FieldMayBeFinal
Field `textualLineCount` may be 'final'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/Properties.java`
#### Snippet
```java

public class Properties {
    private Long textualLineCount;
    private final ImmutableList<Property> properties;

```

### FieldMayBeFinal
Field `attachments` may be 'final'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/SimpleMailboxMessage.java`
#### Snippet
```java
        private Optional<MessageUid> uid = Optional.empty();
        private Optional<ModSeq> modseq = Optional.empty();
        private ImmutableList.Builder<MessageAttachmentMetadata> attachments = ImmutableList.builder();

        public Builder messageId(MessageId messageId) {
```

### FieldMayBeFinal
Field `PATTERN` may be 'final'
in `server/container/util/src/main/java/org/apache/james/util/UnitParser.java`
#### Snippet
```java
    private static final int UNIT = 2;

    private static Pattern PATTERN = Pattern.compile(PATTERN_STRING);

    static ParsingResult parse(String rawString) throws NumberFormatException {
```

### FieldMayBeFinal
Field `DEFAULT_BUFFER_SIZE` may be 'final'
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
 */
public class UnsynchronizedBufferedInputStream extends FilterInputStream {
    private static int DEFAULT_BUFFER_SIZE = 8192;
    private static int MAX_BUFFER_SIZE = 2147483639;
    protected byte[] buf;
```

### FieldMayBeFinal
Field `MAX_BUFFER_SIZE` may be 'final'
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
public class UnsynchronizedBufferedInputStream extends FilterInputStream {
    private static int DEFAULT_BUFFER_SIZE = 8192;
    private static int MAX_BUFFER_SIZE = 2147483639;
    protected byte[] buf;
    protected int count;
```

### FieldMayBeFinal
Field `notInMailboxIds` may be 'final'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MultimailboxesSearchQuery.java`
#### Snippet
```java
        private final SearchQuery searchQuery;
        private ImmutableSet.Builder<MailboxId> mailboxIds;
        private ImmutableSet.Builder<MailboxId> notInMailboxIds;
        private Optional<Namespace> namespace;

```

### FieldMayBeFinal
Field `mailboxIds` may be 'final'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MultimailboxesSearchQuery.java`
#### Snippet
```java
    public static class Builder {
        private final SearchQuery searchQuery;
        private ImmutableSet.Builder<MailboxId> mailboxIds;
        private ImmutableSet.Builder<MailboxId> notInMailboxIds;
        private Optional<Namespace> namespace;
```

### FieldMayBeFinal
Field `messageIds` may be 'final'
in `mailbox/api/src/main/java/org/apache/james/mailbox/events/MessageMoveEvent.java`
#### Snippet
```java

    public static class Builder {
        private ImmutableList.Builder<MessageId> messageIds;
        private Username username;
        private MessageMoves messageMoves;
```

### FieldMayBeFinal
Field `max` may be 'final'
in `mailbox/api/src/main/java/org/apache/james/mailbox/exception/OverQuotaException.java`
#### Snippet
```java
    
    private QuotaUsageValue<?, ?> used;
    private QuotaLimitValue<?> max;

    public OverQuotaException(String msg, QuotaLimitValue<?> max, QuotaUsageValue<?, ?> used) {
```

### FieldMayBeFinal
Field `used` may be 'final'
in `mailbox/api/src/main/java/org/apache/james/mailbox/exception/OverQuotaException.java`
#### Snippet
```java
    private static final long serialVersionUID = 532673188582481689L;
    
    private QuotaUsageValue<?, ?> used;
    private QuotaLimitValue<?> max;

```

### FieldMayBeFinal
Field `counter` may be 'final'
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/InMemoryMessageId.java`
#### Snippet
```java
    public static class Factory implements MessageId.Factory {
        
        private AtomicLong counter = new AtomicLong();
        
        @Override
```

### FieldMayBeFinal
Field `properties` may be 'final'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailetConfig.java`
#### Snippet
```java
        private Optional<String> mailetName;
        private Optional<MailetContext> mailetContext;
        private Properties properties;

        private Builder() {
```

### FieldMayBeFinal
Field `attributes` may be 'final'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMailContext.java`
#### Snippet
```java
            private Optional<Collection<MailAddress>> recipients = Optional.empty();
            private MimeMessage msg;
            private Map<AttributeName, Attribute> attributes = new HashMap<>();
            private Optional<String> state = Optional.empty();
            private Optional<Boolean> fromMailet = Optional.empty();
```

### FieldMayBeFinal
Field `perRecipientHeaders` may be 'final'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
        private PerRecipientHeaders perRecipientHeaders;

        private Builder(String name) {
```

### FieldMayBeFinal
Field `recipients` may be 'final'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<String> fileName;
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
        private Optional<String> state;
```

### FieldMayBeFinal
Field `attributes` may be 'final'
in `mailet/test/src/main/java/org/apache/mailet/base/test/FakeMail.java`
#### Snippet
```java
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
        private Optional<Long> size;
        private Optional<String> remoteAddr;
```

### FieldMayBeFinal
Field `context` may be 'final'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RecomputeMailboxCountersTask.java`
#### Snippet
```java
    private final RecomputeMailboxCountersService service;
    private final RecomputeMailboxCountersService.Options options;
    private RecomputeMailboxCountersService.Context context;

    public RecomputeMailboxCountersTask(RecomputeMailboxCountersService service, RecomputeMailboxCountersService.Options options) {
```

### FieldMayBeFinal
Field `conflictingEntries` may be 'final'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
            private Optional<Long> processedMailboxPathEntries;
            private ImmutableList.Builder<MailboxId>  fixedInconsistencies;
            private ImmutableList.Builder<ConflictingEntry> conflictingEntries;
            private Optional<Long> errors;

```

### FieldMayBeFinal
Field `fixedInconsistencies` may be 'final'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
            private Optional<Long> processedMailboxEntries;
            private Optional<Long> processedMailboxPathEntries;
            private ImmutableList.Builder<MailboxId>  fixedInconsistencies;
            private ImmutableList.Builder<ConflictingEntry> conflictingEntries;
            private Optional<Long> errors;
```

### FieldMayBeFinal
Field `fixedInconsistencies` may be 'final'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> updatedMessageIdEntries;
                private Optional<Long> removedMessageIdEntries;
                private ImmutableList.Builder<ComposedMessageId> fixedInconsistencies;
                private ImmutableList.Builder<ComposedMessageId> errors;

```

### FieldMayBeFinal
Field `errors` may be 'final'
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> removedMessageIdEntries;
                private ImmutableList.Builder<ComposedMessageId> fixedInconsistencies;
                private ImmutableList.Builder<ComposedMessageId> errors;

                Builder() {
```

### FieldMayBeFinal
Field `scriptActivationDate` may be 'final'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ResourceLocator.java`
#### Snippet
```java

    public static class UserSieveInformation {
        private ZonedDateTime scriptActivationDate;
        private ZonedDateTime scriptInterpretationDate;
        private InputStream scriptContent;
```

### FieldMayBeFinal
Field `scriptInterpretationDate` may be 'final'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ResourceLocator.java`
#### Snippet
```java
    public static class UserSieveInformation {
        private ZonedDateTime scriptActivationDate;
        private ZonedDateTime scriptInterpretationDate;
        private InputStream scriptContent;

```

### FieldMayBeFinal
Field `scriptContent` may be 'final'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/jsieve/ResourceLocator.java`
#### Snippet
```java
        private ZonedDateTime scriptActivationDate;
        private ZonedDateTime scriptInterpretationDate;
        private InputStream scriptContent;

        public UserSieveInformation(ZonedDateTime scriptActivationDate, ZonedDateTime scriptInterpretationDate, InputStream scriptContent) {
```

### FieldMayBeFinal
Field `mailetContext` may be 'final'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/AddressExtractor.java`
#### Snippet
```java
    public static class Builder {

        private MailetContext mailetContext;
        private List<String> allowedSpecials;

```

### FieldMayBeFinal
Field `value` may be 'final'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/SpecialAddressKind.java`
#### Snippet
```java
    NULL("null");

    private String value;

    private SpecialAddressKind(String value) {
```

### FieldMayBeFinal
Field `mailet` may be 'final'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MessageAlteringUtils.java`
#### Snippet
```java
    public static class Builder {

        private RedirectNotify mailet;
        private Mail originalMail;

```

### FieldMayBeFinal
Field `records` may be 'final'
in `server/dns-service/dnsservice-test/src/main/java/org/apache/james/dnsservice/api/InMemoryDNSService.java`
#### Snippet
```java
public class InMemoryDNSService implements DNSService {

    private Map<String,DNSRecord> records;

    public InMemoryDNSService() {
```

### FieldMayBeFinal
Field `toRenderingInformation` may be 'final'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
    public static class Builder {
        private ImmutableList.Builder<QuotaThreshold> thresholds;
        private ImmutableMap.Builder<QuotaThreshold, RenderingInformation> toRenderingInformation;
        private Optional<Duration> gradePeriod;
        private Optional<String> bodyTemplate;
```

### FieldMayBeFinal
Field `thresholds` may be 'final'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private ImmutableList.Builder<QuotaThreshold> thresholds;
        private ImmutableMap.Builder<QuotaThreshold, RenderingInformation> toRenderingInformation;
        private Optional<Duration> gradePeriod;
```

### FieldMayBeFinal
Field `uuid` may be 'final'
in `server/data/data-jpa/src/main/java/org/apache/james/sieve/jpa/model/JPASieveScript.java`
#### Snippet
```java

    @Id
    private String uuid = UUID.randomUUID().toString();

    @Column(name = "USER_NAME", nullable = false, length = 100)
```

### FieldMayBeFinal
Field `componentName` may be 'final'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/dto/HealthCheckDto.java`
#### Snippet
```java
public class HealthCheckDto {

    private ComponentName componentName;

    public HealthCheckDto(ComponentName componentName) {
```

### FieldMayBeFinal
Field `additionalRoutes` may be 'final'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/WebAdminConfiguration.java`
#### Snippet
```java
        private Optional<String> urlCORSOrigin = Optional.empty();
        private Optional<String> host = Optional.empty();
        private ImmutableList.Builder<String> additionalRoutes = ImmutableList.builder();
        private Optional<String> jwtPublicKey = Optional.empty();
        private Optional<Integer> maxThreadCount = Optional.empty();
```

### FieldMayBeFinal
Field `tasks` may be 'final'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/tasks/TaskFromRequestRegistry.java`
#### Snippet
```java
    public static class Builder {
        private Optional<String> taskParameterName;
        private ImmutableMap.Builder<TaskRegistrationKey, TaskFromRequest> tasks;

        public Builder() {
```

### FieldMayBeFinal
Field `maybeConfiguration` may be 'final'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/configuration/ConfigurationAggregate.java`
#### Snippet
```java
        }

        private Optional<CassandraMailQueueViewConfiguration> maybeConfiguration;

        State(Optional<CassandraMailQueueViewConfiguration> maybeConfiguration) {
```

### FieldMayBeFinal
Field `ILLEGAL_USERNAME_CHARACTERS` may be 'final'
in `server/data/data-library/src/main/java/org/apache/james/user/lib/UsersRepositoryImpl.java`
#### Snippet
```java
public class UsersRepositoryImpl<T extends UsersDAO> implements UsersRepository, Configurable {
    public static final org.slf4j.Logger LOGGER = LoggerFactory.getLogger(UsersRepositoryImpl.class);
    private static String ILLEGAL_USERNAME_CHARACTERS = "\"(),:; <>@[\\]";

    private final DomainList domainList;
```

### FieldMayBeFinal
Field `configuredDomains` may be 'final'
in `server/data/data-library/src/main/java/org/apache/james/domainlist/lib/DomainListConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> cacheEnabled;
        private Optional<Duration> cacheExpiracy;
        private ImmutableList.Builder<Domain> configuredDomains;

        public Builder() {
```

### FieldMayBeFinal
Field `headersByRecipient` may be 'final'
in `mailet/api/src/main/java/org/apache/mailet/PerRecipientHeaders.java`
#### Snippet
```java
public class PerRecipientHeaders implements Serializable {

    private Multimap<MailAddress, Header> headersByRecipient;

    public PerRecipientHeaders() {
```

### FieldMayBeFinal
Field `XCHAR_VALIDATOR` may be 'final'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
        private static final CharMatcher ESCAPE_CHAR = CharMatcher.isNot('+');
        // https://datatracker.ietf.org/doc/html/rfc3461#section-4
        private static CharMatcher XCHAR_VALIDATOR = CharMatcher.inRange('!', '~')
            .and(CharMatcher.isNot('='))
            .and(ESCAPE_CHAR);
```

### FieldMayBeFinal
Field `HEX_VALIDATOR` may be 'final'
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
            .and(CharMatcher.isNot('='))
            .and(ESCAPE_CHAR);
        private static CharMatcher HEX_VALIDATOR = CharMatcher.inRange('0', '9')
            .or(CharMatcher.inRange('A', 'F'));

```

### FieldMayBeFinal
Field `targetFolders` may be 'final'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
public class StorageDirective {
    public static class Builder {
        private ImmutableList.Builder<String> targetFolders = ImmutableList.builder();
        private Optional<Boolean> seen = Optional.empty();
        private Optional<Boolean> important = Optional.empty();
```

### FieldMayBeFinal
Field `serializers` may be 'final'
in `mailet/api/src/main/java/org/apache/mailet/Serializer.java`
#### Snippet
```java
    class Registry {

        private static ImmutableMap<String, Serializer<?>> serializers;

        static {
```

### FieldMayBeFinal
Field `email` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java

    private String name;
    private String email;
    private String id;
    private Boolean mayDelete;
```

### FieldMayBeFinal
Field `name` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    }

    private String name;
    private String email;
    private String id;
```

### FieldMayBeFinal
Field `sortOrder` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private String textSignature;
    private String htmlSignature;
    private Integer sortOrder;
    private List<EmailAddress> bcc;
    private List<EmailAddress> replyTo;
```

### FieldMayBeFinal
Field `textSignature` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private String id;
    private Boolean mayDelete;
    private String textSignature;
    private String htmlSignature;
    private Integer sortOrder;
```

### FieldMayBeFinal
Field `bcc` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private String htmlSignature;
    private Integer sortOrder;
    private List<EmailAddress> bcc;
    private List<EmailAddress> replyTo;

```

### FieldMayBeFinal
Field `id` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private String name;
    private String email;
    private String id;
    private Boolean mayDelete;
    private String textSignature;
```

### FieldMayBeFinal
Field `replyTo` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private Integer sortOrder;
    private List<EmailAddress> bcc;
    private List<EmailAddress> replyTo;

    public UserIdentity(String name, String email, String id,
```

### FieldMayBeFinal
Field `htmlSignature` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private Boolean mayDelete;
    private String textSignature;
    private String htmlSignature;
    private Integer sortOrder;
    private List<EmailAddress> bcc;
```

### FieldMayBeFinal
Field `mayDelete` may be 'final'
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/dto/UserIdentity.java`
#### Snippet
```java
    private String email;
    private String id;
    private Boolean mayDelete;
    private String textSignature;
    private String htmlSignature;
```

### FieldMayBeFinal
Field `headers` may be 'final'
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/dto/HeadersDto.java`
#### Snippet
```java

public class HeadersDto {
    private ImmutableListMultimap<String, String> headers;

    public HeadersDto(ImmutableListMultimap<String, String> headers) {
```

### FieldMayBeFinal
Field `childInfos` may be 'final'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ListResponse.java`
#### Snippet
```java
        private boolean returnNonExistent;
        private MailboxType mailboxType;
        private ImmutableSet.Builder<ChildInfo> childInfos;

        public Builder() {
```

### FieldMayBeFinal
Field `returnSubscribed` may be 'final'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ListResponse.java`
#### Snippet
```java
    }

    private boolean returnSubscribed;
    private boolean returnNonExistent;

```

### FieldMayBeFinal
Field `returnNonExistent` may be 'final'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ListResponse.java`
#### Snippet
```java

    private boolean returnSubscribed;
    private boolean returnNonExistent;

    private EnumSet<ChildInfo> childInfos;
```

### FieldMayBeFinal
Field `childInfos` may be 'final'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/ListResponse.java`
#### Snippet
```java
    private boolean returnNonExistent;

    private EnumSet<ChildInfo> childInfos;

    public ListResponse(MailboxMetaData.Children children, MailboxMetaData.Selectability selectability,
```

### FieldMayBeFinal
Field `DEFAULT_AUTHENTICATION_STRATEGIES` may be 'final'
in `server/container/guice/protocols/jmap/src/main/java/org/apache/james/jmap/draft/DraftMethodsModule.java`
#### Snippet
```java
public class DraftMethodsModule extends AbstractModule {
    private static PackageName IMPLICIT_AUTHENTICATION_STRATEGY_FQDN_PREFIX = PackageName.of("org.apache.james.jmap.http");
    private static List<String> DEFAULT_AUTHENTICATION_STRATEGIES = ImmutableList.of(AccessTokenAuthenticationStrategy.class.getSimpleName(),
        JWTAuthenticationStrategy.class.getSimpleName(),
        QueryParameterAccessTokenAuthenticationStrategy.class.getSimpleName());
```

### FieldMayBeFinal
Field `IMPLICIT_AUTHENTICATION_STRATEGY_FQDN_PREFIX` may be 'final'
in `server/container/guice/protocols/jmap/src/main/java/org/apache/james/jmap/draft/DraftMethodsModule.java`
#### Snippet
```java

public class DraftMethodsModule extends AbstractModule {
    private static PackageName IMPLICIT_AUTHENTICATION_STRATEGY_FQDN_PREFIX = PackageName.of("org.apache.james.jmap.http");
    private static List<String> DEFAULT_AUTHENTICATION_STRATEGIES = ImmutableList.of(AccessTokenAuthenticationStrategy.class.getSimpleName(),
        JWTAuthenticationStrategy.class.getSimpleName(),
```

### FieldMayBeFinal
Field `IMPLICIT_AUTHENTICATION_STRATEGY_FQDN_PREFIX` may be 'final'
in `server/container/guice/protocols/jmap/src/main/java/org/apache/james/jmap/rfc8621/RFC8621MethodsModule.java`
#### Snippet
```java
public class RFC8621MethodsModule extends AbstractModule {
    private static final Logger LOGGER = LoggerFactory.getLogger(RFC8621MethodsModule.class);
    private static PackageName IMPLICIT_AUTHENTICATION_STRATEGY_FQDN_PREFIX = PackageName.of("org.apache.james.jmap.http");
    private static List<String> DEFAULT_AUTHENTICATION_STRATEGIES = ImmutableList.of(
        BasicAuthenticationStrategy.class.getSimpleName(),
```

### FieldMayBeFinal
Field `DEFAULT_AUTHENTICATION_STRATEGIES` may be 'final'
in `server/container/guice/protocols/jmap/src/main/java/org/apache/james/jmap/rfc8621/RFC8621MethodsModule.java`
#### Snippet
```java
    private static final Logger LOGGER = LoggerFactory.getLogger(RFC8621MethodsModule.class);
    private static PackageName IMPLICIT_AUTHENTICATION_STRATEGY_FQDN_PREFIX = PackageName.of("org.apache.james.jmap.http");
    private static List<String> DEFAULT_AUTHENTICATION_STRATEGIES = ImmutableList.of(
        BasicAuthenticationStrategy.class.getSimpleName(),
        JWTAuthenticationStrategy.class.getSimpleName());
```

### FieldMayBeFinal
Field `recipients` may be 'final'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private final String name;
        private Optional<MimeMessage> mimeMessage;
        private List<MailAddress> recipients;
        private Optional<MailAddress> sender;
        private Optional<String> state;
```

### FieldMayBeFinal
Field `perRecipientHeaders` may be 'final'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
        private PerRecipientHeaders perRecipientHeaders;

        private Builder(String name) {
```

### FieldMayBeFinal
Field `attributes` may be 'final'
in `server/container/core/src/main/java/org/apache/james/server/core/MailImpl.java`
#### Snippet
```java
        private Optional<String> errorMessage;
        private Optional<Date> lastUpdated;
        private Map<AttributeName, Attribute> attributes;
        private Optional<String> remoteAddr;
        private Optional<String> remoteHost;
```

### FieldMayBeFinal
Field `jwtPublicKeyPem` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/JMAPDraftConfiguration.java`
#### Snippet
```java
        private Optional<String> secret = Optional.empty();
        private Optional<Boolean> enabled = Optional.empty();
        private ImmutableList.Builder<String> jwtPublicKeyPem = ImmutableList.builder();
        private Optional<List<String>> authenticationStrategies = Optional.empty();

```

### FieldMayBeFinal
Field `factory` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

    public static class MailboxIdDeserializer extends JsonDeserializer<MailboxId> {
        private MailboxId.Factory factory;

        public MailboxIdDeserializer(MailboxId.Factory factory) {
```

### FieldMayBeFinal
Field `factory` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

    public static class MailboxIdKeyDeserializer extends KeyDeserializer {
        private MailboxId.Factory factory;

        public MailboxIdKeyDeserializer(MailboxId.Factory factory) {
```

### FieldMayBeFinal
Field `factory` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

    public static class MessageIdKeyDeserializer extends KeyDeserializer {
        private MessageId.Factory factory;

        public MessageIdKeyDeserializer(MessageId.Factory factory) {
```

### FieldMayBeFinal
Field `factory` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/json/ObjectMapperFactory.java`
#### Snippet
```java

    public static class MessageIdDeserializer extends JsonDeserializer<MessageId> {
        private MessageId.Factory factory;

        public MessageIdDeserializer(MessageId.Factory factory) {
```

### FieldMayBeFinal
Field `rules` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetFilterResponse.java`
#### Snippet
```java
        private String accountId;
        private String state;
        private ImmutableList.Builder<JmapRuleDTO> rules;

        public Builder() {
```

### FieldMayBeFinal
Field `update` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationRequest.java`
#### Snippet
```java
    public static class Builder {

        private Map<String, VacationResponse> update = Maps.newHashMap();

        public Builder accountId(String accountId) {
```

### FieldMayBeFinal
Field `attachmentsNotFound` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesError.java`
#### Snippet
```java
    public static class Builder extends SetError.Builder {
        
        private List<BlobId> attachmentsNotFound;

        private Builder() {
```

### FieldMayBeFinal
Field `attachmentsNotFound` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesError.java`
#### Snippet
```java
    }

    private ImmutableList<BlobId> attachmentsNotFound;
    
    public SetMessagesError(SetError setError, ImmutableList<BlobId> attachmentsNotFound) {
```

### FieldMayBeFinal
Field `total` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListResponse.java`
#### Snippet
```java
        private boolean canCalculateUpdates;
        private Optional<Number> position;
        private Optional<Number> total;
        private final ImmutableList.Builder<String> threadIds;
        private final ImmutableList.Builder<MessageId> messageIds;
```

### FieldMayBeFinal
Field `position` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/GetMessageListResponse.java`
#### Snippet
```java
        private String state;
        private boolean canCalculateUpdates;
        private Optional<Number> position;
        private Optional<Number> total;
        private final ImmutableList.Builder<String> threadIds;
```

### FieldMayBeFinal
Field `oldKeyworkBuilder` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
    public static class Builder {
        private Optional<List<String>> mailboxIds = Optional.empty();
        private OldKeyword.Builder oldKeyworkBuilder = OldKeyword.builder();
        private Optional<Map<String, Boolean>> keywords = Optional.empty();
        private Set<ValidationResult> validationResult = Sets.newHashSet();
```

### FieldMayBeFinal
Field `validationResult` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java
        private OldKeyword.Builder oldKeyworkBuilder = OldKeyword.builder();
        private Optional<Map<String, Boolean>> keywords = Optional.empty();
        private Set<ValidationResult> validationResult = Sets.newHashSet();

        public Builder mailboxIds(List<String> mailboxIds) {
```

### FieldMayBeFinal
Field `sendMDN` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
        private String ifInState;
        private HashMap<CreationMessageId, CreationMessage> create;
        private HashMap<CreationMessageId, JmapMDN> sendMDN;
        private ImmutableMap.Builder<MessageId, Function<UpdateMessagePatchConverter, UpdateMessagePatch>> updatesProvider;

```

### FieldMayBeFinal
Field `destroy` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
        private ImmutableMap.Builder<MessageId, Function<UpdateMessagePatchConverter, UpdateMessagePatch>> updatesProvider;

        private ImmutableList.Builder<MessageId> destroy;

        private Builder() {
```

### FieldMayBeFinal
Field `create` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
        private String accountId;
        private String ifInState;
        private HashMap<CreationMessageId, CreationMessage> create;
        private HashMap<CreationMessageId, JmapMDN> sendMDN;
        private ImmutableMap.Builder<MessageId, Function<UpdateMessagePatchConverter, UpdateMessagePatch>> updatesProvider;
```

### FieldMayBeFinal
Field `updatesProvider` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetMessagesRequest.java`
#### Snippet
```java
        private HashMap<CreationMessageId, CreationMessage> create;
        private HashMap<CreationMessageId, JmapMDN> sendMDN;
        private ImmutableMap.Builder<MessageId, Function<UpdateMessagePatchConverter, UpdateMessagePatch>> updatesProvider;

        private ImmutableList.Builder<MessageId> destroy;
```

### FieldMayBeFinal
Field `sortOrder` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
        private Optional<Rights> sharedWith;

```

### FieldMayBeFinal
Field `role` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxUpdateRequest.java`
#### Snippet
```java
        private Optional<String> name;
        private Optional<MailboxId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;
        private Optional<Rights> sharedWith;
```

### FieldMayBeFinal
Field `fieldName` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MessageProperties.java`
#### Snippet
```java
        }
        
        private String fieldName;
    
        private HeaderProperty(String fieldName) {
```

### FieldMayBeFinal
Field `rights` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Rights.java`
#### Snippet
```java

    public static class Builder {
        private Multimap<Username, Right> rights;

        public Builder() {
```

### FieldMayBeFinal
Field `sortOrder` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
        private Optional<MailboxCreationId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;

        private Builder() {
```

### FieldMayBeFinal
Field `role` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxCreateRequest.java`
#### Snippet
```java
        private String name;
        private Optional<MailboxCreationId> parentId;
        private Optional<Role> role;
        private Optional<SortOrder> sortOrder;

```

### FieldMayBeFinal
Field `keywordsFactory` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/KeywordsCombiner.java`
#### Snippet
```java
    private static final ImmutableList<Keyword> KEYWORD_NOT_TO_UNION = KEYWORD_TO_INTERSECT;

    private Keywords.KeywordsFactory keywordsFactory;

    public KeywordsCombiner() {
```

### FieldMayBeFinal
Field `mailboxIds` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
            private SharedInputStream sharedContent;
            private List<MessageAttachmentMetadata> attachments;
            private Set<MailboxId> mailboxIds = Sets.newHashSet();
            private MessageId messageId;
            private Optional<Message> message;
```

### FieldMayBeFinal
Field `value` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/ValueWithId.java`
#### Snippet
```java

    private CreationMessageId creationId;
    private T value;

    private ValueWithId(CreationMessageId creationId, T value) {
```

### FieldMayBeFinal
Field `creationId` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/ValueWithId.java`
#### Snippet
```java
public class ValueWithId<T> {

    private CreationMessageId creationId;
    private T value;

```

### FieldMayBeFinal
Field `attachmentIds` may be 'final'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/exceptions/AttachmentsNotFoundException.java`
#### Snippet
```java
public class AttachmentsNotFoundException extends RuntimeException {
    
    private List<BlobId> attachmentIds;


```

### FieldMayBeFinal
Field `processors` may be 'final'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetContainer.java`
#### Snippet
```java
        private Optional<String> postmaster;
        private Optional<Integer> threads;
        private Map<String, ProcessorConfiguration> processors;

        private Builder() {
```

### FieldMayBeFinal
Field `mailets` may be 'final'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/ProcessorConfiguration.java`
#### Snippet
```java
        private String state;
        private Optional<Boolean> enableJmx = Optional.empty();
        private ImmutableList.Builder<MailetConfiguration> mailets;

        private Builder() {
```

### FieldMayBeFinal
Field `addittionalHooks` may be 'final'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        private Optional<Boolean> bracketEnforcement;
        private Optional<String> authorizedAddresses;
        private ImmutableList.Builder<HookConfigurationEntry> addittionalHooks;

        public Builder() {
```

### FieldMayBeFinal
Field `properties` may be 'final'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/MailetConfiguration.java`
#### Snippet
```java
        private Optional<String> matcherCondition;
        private Class<? extends Mailet> mailet;
        private ImmutableMap.Builder<String, String> properties;

        private Builder() {
```

### FieldMayBeFinal
Field `overrideModules` may be 'final'
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/TemporaryJamesServer.java`
#### Snippet
```java

    public static class Builder {
        private ImmutableList.Builder<Module> overrideModules;
        private Optional<Module> module;
        private Optional<SmtpConfiguration> smtpConfiguration;
```

### FieldMayBeFinal
Field `subjectReplacingUnits` may be 'final'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ReplaceConfig.java`
#### Snippet
```java
    public static class Builder {

        private ImmutableList.Builder<ReplacingPattern> subjectReplacingUnits;
        private ImmutableList.Builder<ReplacingPattern> bodyReplacingUnits;

```

### FieldMayBeFinal
Field `bodyReplacingUnits` may be 'final'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ReplaceConfig.java`
#### Snippet
```java

        private ImmutableList.Builder<ReplacingPattern> subjectReplacingUnits;
        private ImmutableList.Builder<ReplacingPattern> bodyReplacingUnits;

        private Builder() {
```

### FieldMayBeFinal
Field `errors` may be 'final'
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> missingPOP3Entries;
                private ImmutableList.Builder<MessageInconsistenciesEntry> fixedInconsistencies;
                private ImmutableList.Builder<MessageInconsistenciesEntry> errors;

                Builder() {
```

### FieldMayBeFinal
Field `fixedInconsistencies` may be 'final'
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesService.java`
#### Snippet
```java
                private Optional<Long> stalePOP3Entries;
                private Optional<Long> missingPOP3Entries;
                private ImmutableList.Builder<MessageInconsistenciesEntry> fixedInconsistencies;
                private ImmutableList.Builder<MessageInconsistenciesEntry> errors;

```

### FieldMayBeFinal
Field `proxyRequired` may be 'final'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/NettyServer.java`
#### Snippet
```java
    private int maxCurConnections;
    private int maxCurConnectionsPerIP;
    private boolean proxyRequired;
   
    private NettyServer(Protocol protocol, Encryption secure, boolean proxyRequired, ChannelHandlerFactory frameHandlerFactory) {
```

### FieldMayBeFinal
Field `parameters` may be 'final'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Mail.java`
#### Snippet
```java
        public static class Builder {
            private MailAddress address;
            private ImmutableList.Builder<Parameter> parameters;

            public Builder() {
```

### FieldMayBeFinal
Field `mailParameters` may be 'final'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Mail.java`
#### Snippet
```java
            private MailAddress from;
            private ImmutableSet.Builder<Recipient> recipients;
            private ImmutableSet.Builder<Parameter> mailParameters;

            public Builder() {
```

### FieldMayBeFinal
Field `recipients` may be 'final'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Mail.java`
#### Snippet
```java
        public static class Builder {
            private MailAddress from;
            private ImmutableSet.Builder<Recipient> recipients;
            private ImmutableSet.Builder<Parameter> mailParameters;

```

### FieldMayBeFinal
Field `jmapEnabled` may be 'final'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        private Optional<UsersRepositoryModuleChooser.Implementation> usersRepositoryImplementation;
        private Optional<VaultConfiguration> vaultConfiguration;
        private Optional<Boolean> jmapEnabled;

        private Builder() {
```

### FieldMayBeFinal
Field `toDomainObjectConverter` may be 'final'
in `json/src/main/java/org/apache/james/json/DTOModule.java`
#### Snippet
```java

            public class RequireToDTOConverterBuilder {
                private DomainObjectConverter<T, U> toDomainObjectConverter;

                private RequireToDTOConverterBuilder(DomainObjectConverter<T, U> toDomainObjectConverter) {
```

### FieldMayBeFinal
Field `credential` may be 'final'
in `server/container/guice/jpa-common/src/main/java/org/apache/james/modules/data/JPAConfiguration.java`
#### Snippet
```java
        private final String driverURL;

        private Optional<Credential> credential;
        private Optional<Boolean> testOnBorrow;
        private Optional<Integer> validationQueryTimeoutSec;
```

### FieldMayBeFinal
Field `contentTypeBlacklist` may be 'final'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaConfiguration.java`
#### Snippet
```java
        private Optional<Duration> cacheEvictionPeriod;
        private Optional<Long> cacheWeightInBytes;
        private ImmutableSet.Builder<MimeType> contentTypeBlacklist;

        private Builder() {
```

### FieldMayBeFinal
Field `targets` may be 'final'
in `server/data/data-api/src/main/java/org/apache/james/dlp/api/DLPConfigurationItem.java`
#### Snippet
```java
    public static class Builder {

        private EnumSet<Targets.Type> targets;
        private Optional<String> explanation;
        private Optional<String> expression;
```

### FieldMayBeFinal
Field `hosts` may be 'final'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/configuration/ClusterConfiguration.java`
#### Snippet
```java

    public static class Builder {
        private ImmutableList.Builder<Host> hosts;
        private boolean createKeyspace;
        private Optional<Integer> minDelay;
```

### FieldMayBeFinal
Field `types` may be 'final'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/components/CassandraModule.java`
#### Snippet
```java
    class Builder {
        private ImmutableList.Builder<CassandraTable> tables;
        private ImmutableList.Builder<CassandraType> types;

        private Builder() {
```

### FieldMayBeFinal
Field `tables` may be 'final'
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/components/CassandraModule.java`
#### Snippet
```java

    class Builder {
        private ImmutableList.Builder<CassandraTable> tables;
        private ImmutableList.Builder<CassandraType> types;

```

### FieldMayBeFinal
Field `searchOverrides` may be 'final'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        private Optional<Integer> maxConnectionsPerHost;
        private Optional<Integer> maxConnections;
        private ImmutableList.Builder<String> searchOverrides;

        public Builder() {
```

### FieldMayBeFinal
Field `container` may be 'final'
in `server/testing/src/main/java/org/apache/james/util/docker/DockerContainer.java`
#### Snippet
```java
    private static final String DOCKER_CONTAINER = "DOCKER_CONTAINER";

    private GenericContainer<?> container;

    public static DockerContainer fromName(String imageName) {
```

### FieldMayBeFinal
Field `clauses` may be 'final'
in `mailbox/plugin/quota-search/src/main/java/org/apache/james/quota/search/QuotaQuery.java`
#### Snippet
```java

    public static class Builder {
        private ImmutableList.Builder<QuotaClause> clauses;
        private Optional<Limit> limit;
        private Optional<Offset> offset;
```

### FieldMayBeFinal
Field `shouldCaryOverContent` may be 'final'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private Optional<String> contentDisposition;
        private Optional<Charset> charset;
        private Predicate<ContentType> shouldCaryOverContent;

        private Builder(Predicate<ContentType> shouldCaryOverContent) {
```

### FieldMayBeFinal
Field `contentType` may be 'final'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/json/MimePart.java`
#### Snippet
```java
        private final Optional<MediaType> mediaType;
        private final Optional<SubType> subType;
        private Optional<ContentType> contentType;
        private final Optional<String> fileName;
        private final Optional<String> fileExtension;
```

## RuleId[id=CaughtExceptionImmediatelyRethrown]
### CaughtExceptionImmediatelyRethrown
Caught exception `dropConnectionException` is immediately rethrown
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/ExtendedRcptToCommand.java`
#### Snippet
```java
                    sess.addRecipient(recipientAddress);
                    sess.sendResponse("250 Ok");
                } catch (DropConnectionException dropConnectionException) {
                    throw dropConnectionException;
                } catch (RejectException rejectException) {
```

### CaughtExceptionImmediatelyRethrown
Caught exception `dropConnectionException` is immediately rethrown
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/ExtendedMailFromCommand.java`
#### Snippet
```java
                    sess.setHasMailFrom(true);
                    sess.sendResponse("250 Ok");
                } catch (DropConnectionException dropConnectionException) {
                    throw dropConnectionException;
                } catch (RejectException rejectException) {
```

## RuleId[id=SpringXmlAutowireExplicitlyInspection]
### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/protocols/fetchmail/src/main/resources/META-INF/spring/fetchmail-context.xml`
#### Snippet
```java

    <!-- FetchMail -->
    <bean id="fetchmail" class="org.apache.james.fetchmail.FetchScheduler" autowire="byName"/>
</beans>

```

### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

    <bean id="etmMethodCallInterceptor"
```

### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    <bean id="etmMethodCallInterceptor"
          class="etm.contrib.aop.aopalliance.EtmMethodCallInterceptor"
          autowire="constructor"/>

    <bean id="etmAutoProxy"
```

### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
    <!-- Mailet Container Beans. -->
    <bean id="mailprocessor" name="processorRoute"
          class="org.apache.james.mailetcontainer.impl.CompositeProcessorImpl" autowire="byType"/>

    <!-- 
```

### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
      it is used - Seems like a Spring bug.
    -->
    <bean id="mailetcontext" class="org.apache.james.mailetcontainer.impl.JamesMailetContext" autowire="byType"/>
    <bean id="localResources" class="org.apache.james.mailetcontainer.impl.LocalResourcesImpl" autowire="byType"/>
    <bean id="mailspooler" class="org.apache.james.mailetcontainer.impl.JamesMailSpooler" autowire="byType"/>
```

### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
    -->
    <bean id="mailetcontext" class="org.apache.james.mailetcontainer.impl.JamesMailetContext" autowire="byType"/>
    <bean id="localResources" class="org.apache.james.mailetcontainer.impl.LocalResourcesImpl" autowire="byType"/>
    <bean id="mailspooler" class="org.apache.james.mailetcontainer.impl.JamesMailSpooler" autowire="byType"/>
    
```

### SpringXmlAutowireExplicitlyInspection
Unnecessary autowired dependency
in `server/mailet/mailetcontainer-impl/src/main/resources/META-INF/spring/mailetcontainer-context.xml`
#### Snippet
```java
    <bean id="mailetcontext" class="org.apache.james.mailetcontainer.impl.JamesMailetContext" autowire="byType"/>
    <bean id="localResources" class="org.apache.james.mailetcontainer.impl.LocalResourcesImpl" autowire="byType"/>
    <bean id="mailspooler" class="org.apache.james.mailetcontainer.impl.JamesMailSpooler" autowire="byType"/>
    
</beans>
```

## RuleId[id=SynchronizationOnLocalVariableOrMethodParameter]
### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on method parameter `workCorpus`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalyzer.java`
#### Snippet
```java
                // probability is different from (stronger than) the default
                if (isTokenDegeneratedFound) {
                    synchronized (workCorpus) {
                        workCorpus.put(tps.token, corpusProbability);
                    }
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `done`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/LazyMessageSearchIndex.java`
#### Snippet
```java
                done = oldDone;
            }
            synchronized (done) {
                Iterator<MailboxMessage> messages = factory.getMessageMapper(session).findInMailbox(mailbox, MessageRange.all(), FetchType.FULL, UNLIMITED);
                while (messages.hasNext()) {
```

## RuleId[id=UnnecessaryLocalVariable]
### UnnecessaryLocalVariable
Local variable `rabbitMQManagementAPI` is redundant
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQManagementAPI.java`
#### Snippet
```java
            RabbitMQConfiguration.ManagementCredentials credentials =
                configuration.getManagementCredentials();
            RabbitMQManagementAPI rabbitMQManagementAPI = Feign.builder()
                .client(getClient(configuration))
                .requestInterceptor(new BasicAuthRequestInterceptor(credentials.getUser(),
```

### UnnecessaryLocalVariable
Local variable `result` is redundant
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
        final String TAB = " ";

        String result = "ProtocolSession ( " + "continued = " + this.continued + TAB + "continuationExpected = "
                + this.continuationExpected + TAB + "maxSessionNumber = " + this.maxSessionNumber + TAB
                + "testElements = " + this.testElements + TAB + "elementsIterator = " + this.elementsIterator + TAB
```

### UnnecessaryLocalVariable
Local variable `metaData` is redundant
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/AbstractMessageMapper.java`
#### Snippet
```java
        MessageUid uid = uidProvider.nextUid(mailbox);
        ModSeq modSeq = modSeqProvider.nextModSeq(mailbox);
        final MessageMetaData metaData = copy(mailbox, uid, modSeq, original);  
        
        return metaData;
```

### UnnecessaryLocalVariable
Local variable `data` is redundant
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/AbstractMessageMapper.java`
#### Snippet
```java
            message.setModSeq(modSeqProvider.nextModSeq(mailbox));
        }
        MessageMetaData data = save(mailbox, message);
       
        return data;
```

### UnnecessaryLocalVariable
Local variable `fallBackInlinedBodyWithoutCid` is redundant
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
            return firstMatchingTextBody;
        }
        Optional<String> fallBackInlinedBodyWithoutCid = getFirstMatchingTextBody(multipart, mimeType, this::isInlinedWithoutCid);
        return fallBackInlinedBodyWithoutCid;
    }
```

### UnnecessaryLocalVariable
Local variable `target` is redundant
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIRBLHandler.java`
#### Snippet
```java
            for (String domain : domains) {
                Iterator<String> uRbl = uriRbl.iterator();
                String target = domain;

                while (uRbl.hasNext()) {
```

### UnnecessaryLocalVariable
Local variable `mailboxes` is redundant
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/DefaultMailboxBackup.java`
#### Snippet
```java
            .toStream()
            .map(MailboxMetaData::getPath);
        List<MailAccountContent> mailboxes = paths
            .flatMap(path -> getMailboxWithAnnotationsFromPath(session, path))
            .collect(ImmutableList.toImmutableList());
```

## RuleId[id=ArrayHashCode]
### ArrayHashCode
Array passed to 'Objects.hash()' should be wrapped in 'Arrays.hashcode()'
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/CryptoConfig.java`
#### Snippet
```java
    @Override
    public final int hashCode() {
        return Objects.hash(salt, password, privateKeyAlgorithm);
    }
}
```

## RuleId[id=BusyWait]
### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `mpt/core/src/main/java/org/apache/james/mpt/session/ExternalSession.java`
#### Snippet
```java
        while (!socket.finishConnect()) {
            monitor.note("connecting...");
            Thread.sleep(10);
        }
    }
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `mailet/ai/src/main/java/org/apache/james/ai/classic/CorpusLoaderThread.java`
#### Snippet
```java
                    break;
                }
                Thread.sleep(BayesianAnalysis.CORPUS_RELOAD_INTERVAL);
            }
        } catch (InterruptedException ex) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `third-party/clamav/src/main/java/org/apache/james/clamav/ClamAVScan.java`
#### Snippet
```java
                if (ping <= getMaxPings()) {
                    LOGGER.debug("Waiting {} milliseconds before retrying ...", getPingIntervalMilli());
                    Thread.sleep(getPingIntervalMilli());
                } else {
                    break;
```

## RuleId[id=InjectionValueTypeInspection]
### InjectionValueTypeInspection
Bean must be one of these types: org.apache.james.imap.api.process.ImapProcessor or javax.inject.Provider
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="imapDecoder" />
        <constructor-arg index="2" ref="imapEncoder" />
        <constructor-arg index="3" ref="imapProcessor" />
        <constructor-arg index="4" ref="metricFactory" />
        <constructor-arg index="5" ref="gaugeRegistry" />
```

## RuleId[id=ArraysAsListWithZeroOrOneArgument]
### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/MailSizeEsmtpExtension.java`
#### Snippet
```java
        long maxMessageSize = session.getConfiguration().getMaxMessageSize();
        if (maxMessageSize > 0) {
            return Arrays.asList("SIZE " + maxMessageSize);
        } else {
            return Collections.emptyList();
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/LifeCycleModule.java`
#### Snippet
```java
     */
    protected final void bindLifeCycle(Class<? extends Annotation> annotation, Matcher<? super TypeLiteral<?>> typeMatcher) {
        bindLifeCycle(asList(annotation), typeMatcher);
    }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `server/container/guice/onami/src/main/java/org/apache/james/onami/lifecycle/LifeCycleStageModule.java`
#### Snippet
```java
        bind(type(stager.getStage())).toInstance(stager);

        bindListener(binding.typeMatcher, new AbstractMethodTypeListener(asList(stager.getStage())) {
            @Override
            protected <I> void hear(final Method stageMethod, final TypeLiteral<I> parentType,
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java
    public static <T> Stream<T> iterate(T seed, Long limit, Function<T, Stream<T>> generator) {
        Preconditions.checkArgument(limit >= 0, "StreamUtils.iterate have a given limit '{}', while it should not be negative", limit);
        return StreamUtils.unfold(Arrays.asList(seed), conservativeGenerator(generator))
            .limit(limit + 1)
            .flatMap(List::stream);
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `server/container/guice/common/src/main/java/org/apache/james/GuiceJamesServer.java`
#### Snippet
```java

    public GuiceJamesServer combineWith(Collection<Module> modules) {
        return new GuiceJamesServer(isStartedProbe, Modules.combine(Iterables.concat(Arrays.asList(module), modules)));
    }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java
            String failed = formatRanges(failedRanges);

            return new ResponseCode("MODIFIED", Arrays.asList(failed), 0, false);
        }
        
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java
            String failed = formatRanges(failedRanges);

            return new ResponseCode("MODIFIED", Arrays.asList(failed), 0, false);
        }
        
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/response/StatusResponse.java`
#### Snippet
```java
        public static ResponseCode appendUid(UidValidity uidValidity, UidRange[] uids) {
            String uidParam = formatRanges(uids);
            return new ResponseCode("APPENDUID", Arrays.asList(uidParam), uidValidity.asLong(), false);
        }

```

## RuleId[id=IntegerDivisionInFloatingPointContext]
### IntegerDivisionInFloatingPointContext
`getMessageIn().getSize() * 1000 / 1024 / 1000f`: integer division in floating-point context
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        if (isMaxMessageSizeExceeded()) {
            StringBuilder msgBuffer = new StringBuilder("550 - Rejected - This message has been rejected as the message size of ");
            msgBuffer.append(getMessageIn().getSize() * 1000 / 1024 / 1000f);
            msgBuffer.append("KB exceeds the maximum permitted size of ");
            msgBuffer.append(getMaxMessageSizeLimit() / 1024);
```

### IntegerDivisionInFloatingPointContext
`totalTime.get() / totalTasks.get()`: integer division in floating-point context
in `server/container/util/src/main/java/org/apache/james/util/concurrent/JMXEnabledScheduledThreadPoolExecutor.java`
#### Snippet
```java
    @Override
    public synchronized double getAverageTaskTime() {
        return (totalTasks.get() == 0) ? 0 : totalTime.get() / totalTasks.get();
    }

```

## RuleId[id=PointlessBooleanExpression]
### PointlessBooleanExpression
`response.getRetCode().equals(SMTPRetCode.MAIL_OK) == false` can be simplified to '!response.getRetCode().equals(SMTPRetCode.MAIL_OK)'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/MailCmdHandler.java`
#### Snippet
```java
        Response response = super.onCommand(session, request);
        // Check if the response was not ok
        if (response.getRetCode().equals(SMTPRetCode.MAIL_OK) == false) {
            // cleanup the session
            session.removeAttachment(SMTPSession.SENDER, State.Transaction);
```

### PointlessBooleanExpression
`session.isTLSStarted() == false` can be simplified to '!session.isTLSStarted()'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/StlsCmdHandler.java`
#### Snippet
```java
        // check if starttls is supported, the state is the right one and it was
        // not started before
        if (session.isStartTLSSupported() && session.getHandlerState() == POP3Session.AUTHENTICATION_READY && session.isTLSStarted() == false) {
            return BEGIN_TLS;
        } else {
```

### PointlessBooleanExpression
`endOfStream == false` can be simplified to '!endOfStream'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/CRLFTerminatedInputStream.java`
#### Snippet
```java
    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        if (endOfStream == false) {

            int r = in.read(b, off, len);
```

### PointlessBooleanExpression
`endOfStream == false` can be simplified to '!endOfStream'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/CRLFTerminatedInputStream.java`
#### Snippet
```java
    @Override
    public int read() throws IOException {
        if (endOfStream == false) {
            int i = super.read();
            if (i == -1) {
```

### PointlessBooleanExpression
`permFlags.contains(f) == false` can be simplified to '!permFlags.contains(f)'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageManager.java`
#### Snippet
```java
        Flag[] systemFlags = flags.getSystemFlags();
        for (Flag f : systemFlags) {
            if (f != Flag.RECENT && permFlags.contains(f) == false) {
                flags.remove(f);
            }
```

### PointlessBooleanExpression
`permFlags.contains(Flags.Flag.USER) == false` can be simplified to '!permFlags.contains(Flags.Flag.USER)'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageManager.java`
#### Snippet
```java
        // if the permFlags contains the special USER flag we can skip this as
        // all user flags are allowed
        if (permFlags.contains(Flags.Flag.USER) == false) {
            String[] uFlags = flags.getUserFlags();
            for (String uFlag : uFlags) {
```

### PointlessBooleanExpression
`permFlags.contains(uFlag) == false` can be simplified to '!permFlags.contains(uFlag)'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageManager.java`
#### Snippet
```java
            String[] uFlags = flags.getUserFlags();
            for (String uFlag : uFlags) {
                if (permFlags.contains(uFlag) == false) {
                    flags.remove(uFlag);
                }
```

### PointlessBooleanExpression
`scriptFile.exists() == false` can be simplified to '!scriptFile.exists()'
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTest.java`
#### Snippet
```java
        }

        if (scriptFile.exists() == false) {
           throw new MojoFailureException("'scriptFile' not exists");
        }
```

### PointlessBooleanExpression
`eolCalled == false` can be simplified to '!eolCalled'
in `protocols/imap/src/main/java/org/apache/james/imap/utils/EolInputStream.java`
#### Snippet
```java

    private void eol(int i) throws IOException {
        if (i == -1 && eolCalled == false) {
            reader.eol();
            eolCalled = true;
```

### PointlessBooleanExpression
`stripParen == false` can be simplified to '!stripParen'
in `protocols/imap/src/main/java/org/apache/james/imap/decode/ImapRequestLineReader.java`
#### Snippet
```java
        stringBuilder.setLength(0);
        char next = nextWordChar();
        while (!isWhitespace(next) && (stripParen == false || next != ')')) {
            if (validator.isValid(next)) {
                if (stripParen == false || next != '(') {
```

### PointlessBooleanExpression
`stripParen == false` can be simplified to '!stripParen'
in `protocols/imap/src/main/java/org/apache/james/imap/decode/ImapRequestLineReader.java`
#### Snippet
```java
        while (!isWhitespace(next) && (stripParen == false || next != ')')) {
            if (validator.isValid(next)) {
                if (stripParen == false || next != '(') {
                    stringBuilder.append(next);
                }
```

### PointlessBooleanExpression
`session.supportMultipleNamespaces() == false` can be simplified to '!session.supportMultipleNamespaces()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/NamespaceProcessor.java`
#### Snippet
```java
        final String otherUsersSpace = mailboxSession.getOtherUsersSpace();
        final List<NamespaceResponse.Namespace> otherUsersSpaces;
        if (session.supportMultipleNamespaces() == false || otherUsersSpace == null) {
            otherUsersSpaces = null;
        } else {
```

### PointlessBooleanExpression
`EnableProcessor.getEnabledCapabilities(session).contains(capability) == false` can be simplified to '!EnableProcessor.getEnabledCapabilities(session).contains(capability)'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractSelectionProcessor.java`
#### Snippet
```java
    @Override
    public Mono<Void> enable(ImapMessage message, Responder responder, ImapSession session, Capability capability) {
        if (EnableProcessor.getEnabledCapabilities(session).contains(capability) == false) {
            SelectedMailbox sm = session.getSelected();
            // Send a HIGHESTMODSEQ response if the there was a select mailbox before and the client just enabled
```

### PointlessBooleanExpression
`useUids == false` can be simplified to '!useUids'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
        long highVal = range.getHighVal();

        if (useUids == false) {
            return msnRangeToMessageRange(selected, lowVal, highVal);
        } else {
```

## RuleId[id=UseBulkOperation]
### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/SMTPProtocolHandlerChain.java`
#### Snippet
```java
        this(metricFactory, true);
        for (Hook hook : hooks) {
            add(hook);
        }
        wireExtensibleHandlers();
```

## RuleId[id=UnstableApiUsage]
### UnstableApiUsage
'countTrue(boolean...)' is marked unstable with @Beta
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
        this.queueName = queueName;
        Preconditions.checkArgument(
            Booleans.countTrue(optionalSender.isPresent(), optionalName.isPresent(), optionalRecipient.isPresent()) == 1,
            "You should provide one and only one of the query parameters 'sender', 'name' or 'recipient'.");

```

### UnstableApiUsage
'countTrue(boolean...)' is marked unstable with @Beta
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/routes/MailQueueRoutes.java`
#### Snippet
```java

    private Task deleteMailsTask(MailQueueName queueName, Optional<MailAddress> maybeSender, Optional<String> maybeName, Optional<MailAddress> maybeRecipient) {
        int paramCount = Booleans.countTrue(maybeSender.isPresent(), maybeName.isPresent(), maybeRecipient.isPresent());
        switch (paramCount) {
            case 0:
```

### UnstableApiUsage
'CountingInputStream(java.io.InputStream)' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/upload/InMemoryUploadRepository.java`
#### Snippet
```java
        Preconditions.checkNotNull(user);

        return Mono.fromCallable(() -> new CountingInputStream(data))
            .flatMap(dataAsByte -> Mono.from(blobStore.save(bucketName, dataAsByte, BlobStore.StoragePolicy.LOW_COST))
                .map(blobId -> {
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/upload/InMemoryUploadRepository.java`
#### Snippet
```java
        Preconditions.checkNotNull(user);

        return Mono.fromCallable(() -> new CountingInputStream(data))
            .flatMap(dataAsByte -> Mono.from(blobStore.save(bucketName, dataAsByte, BlobStore.StoragePolicy.LOW_COST))
                .map(blobId -> {
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/upload/InMemoryUploadRepository.java`
#### Snippet
```java
                .map(blobId -> {
                    UploadId uploadId = UploadId.random();
                    uploadStore.put(uploadId, new ImmutablePair<>(user, UploadMetaData.from(uploadId, contentType, dataAsByte.getCount(), blobId)));
                    return UploadMetaData.from(uploadId, contentType, dataAsByte.getCount(), blobId);
                })
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/upload/InMemoryUploadRepository.java`
#### Snippet
```java
                    UploadId uploadId = UploadId.random();
                    uploadStore.put(uploadId, new ImmutablePair<>(user, UploadMetaData.from(uploadId, contentType, dataAsByte.getCount(), blobId)));
                    return UploadMetaData.from(uploadId, contentType, dataAsByte.getCount(), blobId);
                })
            );
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/container/guice/utils/src/main/java/org/apache/james/utils/PackageName.java`
#### Snippet
```java
    private static boolean hasEmptyParts(String sanitizedValue) {
        return Splitter.on(PART_SEPARATOR)
            .splitToStream(sanitizedValue)
            .anyMatch(String::isEmpty);
    }
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `core/src/main/java/org/apache/james/util/Host.java`
#### Snippet
```java
        return Splitter.on(',')
            .omitEmptyStrings()
            .splitToStream(hostsString)
            .map(string -> Host.parse(string, defaultPort))
            .distinct()
```

### UnstableApiUsage
'countTrue(boolean...)' is marked unstable with @Beta
in `core/src/main/java/org/apache/james/core/builder/MimeMessageBuilder.java`
#### Snippet
```java

        public BodyPart build() throws IOException, MessagingException {
            Preconditions.checkState(Booleans.countTrue(dataAsString.isPresent(),
                dataAsBytes.isPresent(), dataAsMultipart.isPresent()) <= 1, "Can not specify data as bytes, multipart and data as string at the same time");
            MimeBodyPart bodyPart = new MimeBodyPart();
```

### UnstableApiUsage
Overridden method 'sizeIfKnown()' is marked unstable with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java

        @Override
        public Optional<Long> sizeIfKnown() {
            return Optional.of(size);
        }
```

### UnstableApiUsage
'asByteSource()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
        @Override
        public InputStream openStream() throws IOException {
            return stream.asByteSource().openStream();
        }

```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
        private final long size;

        private FileBackedOutputStreamByteSource(FileBackedOutputStream stream, long size) {
            Preconditions.checkArgument(size >= 0, "'size' must be positive");
            this.stream = stream;
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
public class S3BlobStoreDAO implements BlobStoreDAO, Startable, Closeable {
    private static class FileBackedOutputStreamByteSource extends ByteSource {
        private final FileBackedOutputStream stream;
        private final long size;

```

### UnstableApiUsage
'FileBackedOutputStream(int)' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
    private Mono<Void> uploadUsingFile(BucketName bucketName, BlobId blobId, InputStream inputStream) {
        return Mono.using(
            () -> new FileBackedOutputStream(FILE_THRESHOLD),
            fileBackedOutputStream ->
                Mono.fromCallable(() -> IOUtils.copy(inputStream, fileBackedOutputStream))
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
    private Mono<Void> uploadUsingFile(BucketName bucketName, BlobId blobId, InputStream inputStream) {
        return Mono.using(
            () -> new FileBackedOutputStream(FILE_THRESHOLD),
            fileBackedOutputStream ->
                Mono.fromCallable(() -> IOUtils.copy(inputStream, fileBackedOutputStream))
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
                Mono.fromCallable(() -> IOUtils.copy(inputStream, fileBackedOutputStream))
                    .flatMap(size -> save(bucketName, blobId, new FileBackedOutputStreamByteSource(fileBackedOutputStream, size))),
            Throwing.consumer(FileBackedOutputStream::reset),
            LAZY)
            .onErrorMap(IOException.class, e -> new ObjectStoreIOException("Error saving blob", e))
```

### UnstableApiUsage
'reset()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
                Mono.fromCallable(() -> IOUtils.copy(inputStream, fileBackedOutputStream))
                    .flatMap(size -> save(bucketName, blobId, new FileBackedOutputStreamByteSource(fileBackedOutputStream, size))),
            Throwing.consumer(FileBackedOutputStream::reset),
            LAZY)
            .onErrorMap(IOException.class, e -> new ObjectStoreIOException("Error saving blob", e))
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/POP3MessageCommandArguments.java`
#### Snippet
```java
                .omitEmptyStrings()
                .trimResults()
                .splitToStream(parameters)
                .map(Integer::parseInt)
                .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteSourceContent.java`
#### Snippet
```java

    public static ByteSourceContent of(InputStream stream) throws IOException {
        FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
        try {
            stream.transferTo(out);
```

### UnstableApiUsage
'FileBackedOutputStream(int)' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteSourceContent.java`
#### Snippet
```java

    public static ByteSourceContent of(InputStream stream) throws IOException {
        FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
        try {
            stream.transferTo(out);
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteSourceContent.java`
#### Snippet
```java

    public static ByteSourceContent of(InputStream stream) throws IOException {
        FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
        try {
            stream.transferTo(out);
```

### UnstableApiUsage
'asByteSource()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteSourceContent.java`
#### Snippet
```java
        try {
            stream.transferTo(out);
            return new ByteSourceContent(out.asByteSource(), out::reset);
        } catch (IOException ioException) {
            out.reset();
```

### UnstableApiUsage
'reset()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteSourceContent.java`
#### Snippet
```java
        try {
            stream.transferTo(out);
            return new ByteSourceContent(out.asByteSource(), out::reset);
        } catch (IOException ioException) {
            out.reset();
```

### UnstableApiUsage
'reset()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ByteSourceContent.java`
#### Snippet
```java
            return new ByteSourceContent(out.asByteSource(), out::reset);
        } catch (IOException ioException) {
            out.reset();
            throw ioException;
        }
```

### UnstableApiUsage
'zip(java.util.stream.Stream, java.util.stream.Stream**, java.util.function.BiFunction)' is marked unstable with @Beta**
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
            .map(pair -> pair.getKey().stream()
                .map(uid -> Pair.of(uid, pair.getRight())))
            .map(uidsAndModSeq -> Streams.zip(uidsAndModSeq, messages.stream(),
                (uidAndModseq, aMessage) -> {
                    aMessage.setUid(uidAndModseq.getKey());
```

### UnstableApiUsage
'stream(java.util.Iterator)' is marked unstable with @Beta
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/MimeMessageHeaders.java`
#### Snippet
```java

    public MimeMessageHeaders(MimeMessage message) throws MessagingException {
        ImmutableList<Pair<String, String>> headsAndLines = Streams.stream(Iterators.forEnumeration(message.getAllHeaderLines()))
                .map(Throwing.function(this::extractHeaderLine).sneakyThrow())
                .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/ExportService.java`
#### Snippet
```java

    private BlobId zipToBlob(Username username, Flux<DeletedMessage> messages) throws IOException {
        try (FileBackedOutputStream fileOutputStream = new FileBackedOutputStream(FileUtils.ONE_MB_BI.intValue())) {
            zipper.zip(contentLoader(username), messages.toStream(), fileOutputStream);
            ByteSource byteSource = fileOutputStream.asByteSource();
```

### UnstableApiUsage
'FileBackedOutputStream(int)' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/ExportService.java`
#### Snippet
```java

    private BlobId zipToBlob(Username username, Flux<DeletedMessage> messages) throws IOException {
        try (FileBackedOutputStream fileOutputStream = new FileBackedOutputStream(FileUtils.ONE_MB_BI.intValue())) {
            zipper.zip(contentLoader(username), messages.toStream(), fileOutputStream);
            ByteSource byteSource = fileOutputStream.asByteSource();
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/ExportService.java`
#### Snippet
```java

    private BlobId zipToBlob(Username username, Flux<DeletedMessage> messages) throws IOException {
        try (FileBackedOutputStream fileOutputStream = new FileBackedOutputStream(FileUtils.ONE_MB_BI.intValue())) {
            zipper.zip(contentLoader(username), messages.toStream(), fileOutputStream);
            ByteSource byteSource = fileOutputStream.asByteSource();
```

### UnstableApiUsage
'asByteSource()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/ExportService.java`
#### Snippet
```java
        try (FileBackedOutputStream fileOutputStream = new FileBackedOutputStream(FileUtils.ONE_MB_BI.intValue())) {
            zipper.zip(contentLoader(username), messages.toStream(), fileOutputStream);
            ByteSource byteSource = fileOutputStream.asByteSource();
            return Mono.from(blobStore.save(blobStore.getDefaultBucketName(), byteSource.openStream(), LOW_COST)).block();
        }
```

### UnstableApiUsage
'asByteSource()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java
        return Mono.using(
                () -> encrypt(inputStream),
                fileBackedOutputStream -> Mono.from(underlying.save(bucketName, blobId, fileBackedOutputStream.asByteSource())),
                Throwing.consumer(FileBackedOutputStream::reset))
            .onErrorMap(e -> new ObjectStoreIOException("Exception occurred while saving bytearray", e));
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java
                () -> encrypt(inputStream),
                fileBackedOutputStream -> Mono.from(underlying.save(bucketName, blobId, fileBackedOutputStream.asByteSource())),
                Throwing.consumer(FileBackedOutputStream::reset))
            .onErrorMap(e -> new ObjectStoreIOException("Exception occurred while saving bytearray", e));
    }
```

### UnstableApiUsage
'reset()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java
                () -> encrypt(inputStream),
                fileBackedOutputStream -> Mono.from(underlying.save(bucketName, blobId, fileBackedOutputStream.asByteSource())),
                Throwing.consumer(FileBackedOutputStream::reset))
            .onErrorMap(e -> new ObjectStoreIOException("Exception occurred while saving bytearray", e));
    }
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java
    }

    public FileBackedOutputStream encrypt(InputStream input) {
        try (FileBackedOutputStream encryptedContent = new FileBackedOutputStream(FILE_THRESHOLD_100_KB)) {
            OutputStream outputStream = streamingAead.newEncryptingStream(encryptedContent, PBKDF2StreamingAeadFactory.EMPTY_ASSOCIATED_DATA);
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java

    public FileBackedOutputStream encrypt(InputStream input) {
        try (FileBackedOutputStream encryptedContent = new FileBackedOutputStream(FILE_THRESHOLD_100_KB)) {
            OutputStream outputStream = streamingAead.newEncryptingStream(encryptedContent, PBKDF2StreamingAeadFactory.EMPTY_ASSOCIATED_DATA);
            input.transferTo(outputStream);
```

### UnstableApiUsage
'FileBackedOutputStream(int)' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java

    public FileBackedOutputStream encrypt(InputStream input) {
        try (FileBackedOutputStream encryptedContent = new FileBackedOutputStream(FILE_THRESHOLD_100_KB)) {
            OutputStream outputStream = streamingAead.newEncryptingStream(encryptedContent, PBKDF2StreamingAeadFactory.EMPTY_ASSOCIATED_DATA);
            input.transferTo(outputStream);
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-aes/src/main/java/org/apache/james/blob/aes/AESBlobStoreDAO.java`
#### Snippet
```java

    public FileBackedOutputStream encrypt(InputStream input) {
        try (FileBackedOutputStream encryptedContent = new FileBackedOutputStream(FILE_THRESHOLD_100_KB)) {
            OutputStream outputStream = streamingAead.newEncryptingStream(encryptedContent, PBKDF2StreamingAeadFactory.EMPTY_ASSOCIATED_DATA);
            input.transferTo(outputStream);
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
                .omitEmptyStrings()
                .trimResults()
                .splitToStream(input)
                .map(string -> parseValue(string)
                    .orElseThrow(() -> new IllegalArgumentException(string + " could not be associated with any RCPT NOTIFY value")))
```

### UnstableApiUsage
'countTrue(boolean...)' is marked unstable with @Beta
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java

        private boolean hasChanges() {
            return Booleans.countTrue(
                seen.isPresent(),
                important.isPresent(),
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/routes/MailRepositoriesRoutes.java`
#### Snippet
```java
            .trimResults()
            .omitEmptyStrings()
            .splitToStream(additionalFieldsParam)
            .map(field -> AdditionalField.find(field).orElseThrow(() -> new IllegalArgumentException(field)))
            .collect(ImmutableSet.toImmutableSet());
```

### UnstableApiUsage
'com.google.common.collect.RangeSet' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java
    }

    private static LinkedList<Range<MessageUid>> mergeContiguousRanges(RangeSet<MessageUid> rangeSet) {
        LinkedList<Range<MessageUid>> mergedRanges = new LinkedList<>();
        
```

### UnstableApiUsage
'asRanges()' is declared in unstable interface 'com.google.common.collect.RangeSet' marked with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java
        LinkedList<Range<MessageUid>> mergedRanges = new LinkedList<>();
        
        for (Range<MessageUid> range: rangeSet.asRanges()) {
            Range<MessageUid> previous = mergedRanges.peekLast();
            if (rangesShouldBeMerged(range, previous)) {
```

### UnstableApiUsage
'com.google.common.collect.RangeSet' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java
        }

        RangeSet<MessageUid> rangeSet = createSortedRangeSet(ranges);
        List<Range<MessageUid>> mergedRanges = mergeContiguousRanges(rangeSet);
        return toUidRanges(mergedRanges);
```

### UnstableApiUsage
'com.google.common.collect.RangeSet' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java
    }

    private static RangeSet<MessageUid> createSortedRangeSet(List<UidRange> ranges) {
        RangeSet<MessageUid> rangeSet = TreeRangeSet.create();
        for (UidRange range: ranges) {
```

### UnstableApiUsage
'com.google.common.collect.RangeSet' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java

    private static RangeSet<MessageUid> createSortedRangeSet(List<UidRange> ranges) {
        RangeSet<MessageUid> rangeSet = TreeRangeSet.create();
        for (UidRange range: ranges) {
            rangeSet.add(Range.closed(range.getLowVal(), range.getHighVal()));
```

### UnstableApiUsage
'com.google.common.collect.TreeRangeSet' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java

    private static RangeSet<MessageUid> createSortedRangeSet(List<UidRange> ranges) {
        RangeSet<MessageUid> rangeSet = TreeRangeSet.create();
        for (UidRange range: ranges) {
            rangeSet.add(Range.closed(range.getLowVal(), range.getHighVal()));
```

### UnstableApiUsage
'create()' is declared in unstable class 'com.google.common.collect.TreeRangeSet' marked with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java

    private static RangeSet<MessageUid> createSortedRangeSet(List<UidRange> ranges) {
        RangeSet<MessageUid> rangeSet = TreeRangeSet.create();
        for (UidRange range: ranges) {
            rangeSet.add(Range.closed(range.getLowVal(), range.getHighVal()));
```

### UnstableApiUsage
'add(com.google.common.collect.Range)' is declared in unstable interface 'com.google.common.collect.RangeSet' marked with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/api/message/UidRange.java`
#### Snippet
```java
        RangeSet<MessageUid> rangeSet = TreeRangeSet.create();
        for (UidRange range: ranges) {
            rangeSet.add(Range.closed(range.getLowVal(), range.getHighVal()));
        }
        return rangeSet;
```

### UnstableApiUsage
'limit(java.io.InputStream, long)' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/decode/ImapRequestStreamLineReader.java`
#### Snippet
```java
        nextSeen = false;
        nextChar = 0;
        InputStream limited = ByteStreams.limit(input, size);

        if (extraCRLF) {
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/CreateCommandParser.java`
#### Snippet
```java
    private void assertMailboxNameJustContainDelimiter(String mailboxName, char delimiter) throws DecodingException {
        Splitter.on(delimiter)
            .splitToStream(mailboxName)
            .filter(Predicate.not(Strings::isNullOrEmpty))
            .findAny()
```

### UnstableApiUsage
'com.google.common.hash.Funnel' is marked unstable with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java

    private static final Logger LOGGER = LoggerFactory.getLogger(BloomFilterGCAlgorithm.class);
    private static final Funnel<CharSequence> BLOOM_FILTER_FUNNEL = Funnels.stringFunnel(StandardCharsets.US_ASCII);
    private static final int DELETION_BATCH_SIZE = 1000;

```

### UnstableApiUsage
'com.google.common.hash.Funnels' is marked unstable with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java

    private static final Logger LOGGER = LoggerFactory.getLogger(BloomFilterGCAlgorithm.class);
    private static final Funnel<CharSequence> BLOOM_FILTER_FUNNEL = Funnels.stringFunnel(StandardCharsets.US_ASCII);
    private static final int DELETION_BATCH_SIZE = 1000;

```

### UnstableApiUsage
'stringFunnel(java.nio.charset.Charset)' is declared in unstable class 'com.google.common.hash.Funnels' marked with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java

    private static final Logger LOGGER = LoggerFactory.getLogger(BloomFilterGCAlgorithm.class);
    private static final Funnel<CharSequence> BLOOM_FILTER_FUNNEL = Funnels.stringFunnel(StandardCharsets.US_ASCII);
    private static final int DELETION_BATCH_SIZE = 1000;

```

### UnstableApiUsage
'com.google.common.hash.BloomFilter' is marked unstable with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
    }

    private Mono<Result> gc(BloomFilter<CharSequence> bloomFilter, BucketName bucketName, Context context, int deletionWindowSize) {
        return Flux.from(blobStoreDAO.listBlobs(bucketName))
            .doOnNext(blobId -> context.incrementBlobCount())
```

### UnstableApiUsage
'mightContain(T)' is declared in unstable class 'com.google.common.hash.BloomFilter' marked with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
            .flatMap(blobId -> Mono.fromCallable(() -> generationAwareBlobIdFactory.from(blobId.asString())))
            .filter(blobId -> !blobId.inActiveGeneration(generationAwareBlobIdConfiguration, now))
            .filter(blobId -> !bloomFilter.mightContain(salt + blobId.asString()))
            .window(deletionWindowSize)
            .flatMap(blobIdFlux -> handlePagedDeletion(bucketName, context, blobIdFlux), DEFAULT_CONCURRENCY)
```

### UnstableApiUsage
'com.google.common.hash.BloomFilter' is marked unstable with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
    }

    private Mono<BloomFilter<CharSequence>> populatedBloomFilter(int expectedBlobCount, double associatedProbability, Context context) {
        return Mono.fromCallable(() -> BloomFilter.create(
                BLOOM_FILTER_FUNNEL,
```

### UnstableApiUsage
'com.google.common.hash.BloomFilter' is marked unstable with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java

    private Mono<BloomFilter<CharSequence>> populatedBloomFilter(int expectedBlobCount, double associatedProbability, Context context) {
        return Mono.fromCallable(() -> BloomFilter.create(
                BLOOM_FILTER_FUNNEL,
                expectedBlobCount,
```

### UnstableApiUsage
'create(com.google.common.hash.Funnel, int, double)' is declared in unstable class 'com.google.common.hash.BloomFilter' marked with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java

    private Mono<BloomFilter<CharSequence>> populatedBloomFilter(int expectedBlobCount, double associatedProbability, Context context) {
        return Mono.fromCallable(() -> BloomFilter.create(
                BLOOM_FILTER_FUNNEL,
                expectedBlobCount,
```

### UnstableApiUsage
'put(T)' is declared in unstable class 'com.google.common.hash.BloomFilter' marked with @Beta
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
                Flux.from(referenceSource.listReferencedBlobs())
                    .doOnNext(ref -> context.incrementReferenceSourceCount())
                    .map(ref -> bloomFilter.put(salt + ref.asString()))
                    .then()
                    .thenReturn(bloomFilter));
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
        } else if (source != null && !bodyModified) {
            try (InputStream in = source.getInputStream()) {
                CountingInputStream countingInputStream = new CountingInputStream(in);
                new MailHeaders(countingInputStream);
                long previousHeaderLength = countingInputStream.getCount();
```

### UnstableApiUsage
'CountingInputStream(java.io.InputStream)' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
        } else if (source != null && !bodyModified) {
            try (InputStream in = source.getInputStream()) {
                CountingInputStream countingInputStream = new CountingInputStream(in);
                new MailHeaders(countingInputStream);
                long previousHeaderLength = countingInputStream.getCount();
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
        } else if (source != null && !bodyModified) {
            try (InputStream in = source.getInputStream()) {
                CountingInputStream countingInputStream = new CountingInputStream(in);
                new MailHeaders(countingInputStream);
                long previousHeaderLength = countingInputStream.getCount();
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
                CountingInputStream countingInputStream = new CountingInputStream(in);
                new MailHeaders(countingInputStream);
                long previousHeaderLength = countingInputStream.getCount();
                return source.getMessageSize() - previousHeaderLength + IOUtils.consume(new InternetHeadersInputStream(getAllHeaderLines()));
            } catch (IOException e) {
```

### UnstableApiUsage
'countTrue(boolean...)' is marked unstable with @Beta
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
    @JsonIgnore
    public HistoryEvolution toHistoryEvolution() {
        Preconditions.checkState(Booleans.countTrue(
            threshold.isPresent(), instant.isPresent()) != 1,
            "threshold and instant needs to be both set, or both unset. Mixed states not allowed.");
```

### UnstableApiUsage
'countTrue(boolean...)' is marked unstable with @Beta
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java

        private MailboxId computeMailboxId() {
            int idCount = Booleans.countTrue(id.isPresent(), mailboxMetaData.isPresent());
            Preconditions.checkState(idCount == 1, "You need exactly one 'id' 'mailboxMetaData'");
            return id.or(
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesCreationProcessor.java`
#### Snippet
```java
        Splitter propertiesSplitter = Splitter.on(',').trimResults().omitEmptyStrings();
        return validationErrors.stream()
                .flatMap(err -> propertiesSplitter.splitToStream(err.getProperty()))
                .flatMap(MessageProperty::find)
                .collect(Collectors.toSet());
```

### UnstableApiUsage
'stream(java.util.Iterator)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/SetMailAttribute.java`
#### Snippet
```java
    @Override
    public void init() throws MailetException {
        entries = Streams.stream(getInitParameterNames())
            .map(name -> Attribute.convertToAttribute(name, getInitParameter(name)))
            .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java
            return Mono.usingWhen(blobStore.readReactive(bucketName, blobId, storagePolicy),
                Throwing.function(in -> {
                    FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
                    long size = in.transferTo(out);
                    return Mono.just(new DelegateCloseableByteSource(out.asByteSource(), out::reset, size));
```

### UnstableApiUsage
'FileBackedOutputStream(int)' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java
            return Mono.usingWhen(blobStore.readReactive(bucketName, blobId, storagePolicy),
                Throwing.function(in -> {
                    FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
                    long size = in.transferTo(out);
                    return Mono.just(new DelegateCloseableByteSource(out.asByteSource(), out::reset, size));
```

### UnstableApiUsage
'com.google.common.io.FileBackedOutputStream' is marked unstable with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java
            return Mono.usingWhen(blobStore.readReactive(bucketName, blobId, storagePolicy),
                Throwing.function(in -> {
                    FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
                    long size = in.transferTo(out);
                    return Mono.just(new DelegateCloseableByteSource(out.asByteSource(), out::reset, size));
```

### UnstableApiUsage
'asByteSource()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java
                    FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
                    long size = in.transferTo(out);
                    return Mono.just(new DelegateCloseableByteSource(out.asByteSource(), out::reset, size));
                }),
                stream -> Mono.fromRunnable(Throwing.runnable(stream::close)));
```

### UnstableApiUsage
'reset()' is declared in unstable class 'com.google.common.io.FileBackedOutputStream' marked with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java
                    FileBackedOutputStream out = new FileBackedOutputStream(FILE_THRESHOLD);
                    long size = in.transferTo(out);
                    return Mono.just(new DelegateCloseableByteSource(out.asByteSource(), out::reset, size));
                }),
                stream -> Mono.fromRunnable(Throwing.runnable(stream::close)));
```

### UnstableApiUsage
Overridden method 'sizeIfKnown()' is marked unstable with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public Optional<Long> sizeIfKnown() {
            return Optional.of(size);
        }
```

### UnstableApiUsage
Overridden method 'read(com.google.common.io.ByteProcessor)' is marked unstable with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public <T> T read(ByteProcessor<T> processor) throws IOException {
            return wrapped.read(processor);
        }
```

### UnstableApiUsage
'com.google.common.io.ByteProcessor' is marked unstable with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java

        @Override
        public <T> T read(ByteProcessor<T> processor) throws IOException {
            return wrapped.read(processor);
        }
```

### UnstableApiUsage
'read(com.google.common.io.ByteProcessor)' is marked unstable with @Beta
in `server/blob/blob-common/src/main/java/org/apache/james/blob/api/Store.java`
#### Snippet
```java
        @Override
        public <T> T read(ByteProcessor<T> processor) throws IOException {
            return wrapped.read(processor);
        }

```

### UnstableApiUsage
'limit(java.io.InputStream, long)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/LogMessage.java`
#### Snippet
```java
    private void logBody(MimeMessage message) throws MessagingException, IOException {
        if (body && logger.isInfoEnabled()) {
            try (InputStream inputStream = ByteStreams.limit(message.getDataHandler().getInputStream(), lengthToLog(message))) {
                logger.info(IOUtils.toString(inputStream, StandardCharsets.UTF_8));
            }
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/MappingArgument.java`
#### Snippet
```java
        return Splitter.on(',')
            .omitEmptyStrings()
            .splitToStream(mapping)
            .map(MappingArgument::parseKeyValue)
            .collect(ImmutableMap.toImmutableMap(Pair::getLeft, Pair::getRight));
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/SenderDomainIs.java`
#### Snippet
```java
        return Splitter.onPattern("(, |,| )")
                .omitEmptyStrings()
                .splitToStream(condition)
                .map(Domain::of)
                .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasMimeTypeParameter.java`
#### Snippet
```java
                    return Splitter.on(",")
                        .trimResults()
                        .splitToStream(value)
                        .map(this::conditionToPair)
                        .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/SenderHostIs.java`
#### Snippet
```java
        return Splitter.onPattern("(, |,| )")
            .omitEmptyStrings()
            .splitToStream(condition)
            .map(Domain::of)
            .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/RecipientDomainIs.java`
#### Snippet
```java
        return Splitter.onPattern("(, |,| )")
                .omitEmptyStrings()
                .splitToStream(condition)
                .map(Domain::of)
                .collect(ImmutableList.toImmutableList());
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/utils/MailAddressCollectionReader.java`
#### Snippet
```java
    public static Set<Optional<MailAddress>> read(String condition) {
        Preconditions.checkArgument(!Strings.isNullOrEmpty(condition));
        return Splitter.onPattern("(,| |\t)").splitToStream(condition)
            .filter(Predicate.not(Strings::isNullOrEmpty))
            .map(MailAddressCollectionReader::getMailAddress)
```

### UnstableApiUsage
'stream(java.util.Iterator)' is marked unstable with @Beta
in `mailet/base/src/main/java/org/apache/mailet/base/GenericMailet.java`
#### Snippet
```java
     */
    protected final void checkInitParameters(Set<String> allowed) throws MessagingException {
        Set<String> bad = Streams.stream(getInitParameterNames())
            .filter(not(allowed::contains))
            .filter(not(ERROR_PARAMETERS::contains))
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/AllButStartTlsLineBasedChannelHandler.java`
#### Snippet
```java

    protected boolean hasStartTLS(String trimedLowerCasedInput) {
        return CRLF_SPLITTER.splitToStream(trimedLowerCasedInput)
            .anyMatch(s -> s.equalsIgnoreCase(pattern));
    }
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Mail.java`
#### Snippet
```java

        public static Collection<Mail.Parameter> fromArgLine(String argLine) {
            return Splitter.on(' ').splitToStream(argLine)
                .filter(argString -> argString.contains("="))
                .map(Parameter::fromString)
```

### UnstableApiUsage
'zip(java.util.stream.Stream, java.util.stream.Stream**, java.util.function.BiFunction)' is marked unstable with @Beta**
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZipEntryType.java`
#### Snippet
```java
        Stream<Integer> indices = IntStream.range(0, values().length).boxed();

        entryByOrdinal = Streams.zip(indices, valuesAsStream, ImmutablePair::of)
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }
```

### UnstableApiUsage
'read()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
            int next;
            try {
                next = in.read();
            } catch (IOException e) {
                throw new DecodingException(HumanReadableText.SOCKET_IO_FAILURE, "Error reading from stream.", e);
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java

    private final File backingFile;
    private final CountingInputStream in;

    public NettyStreamImapRequestLineReader(Channel channel, File file, boolean retry) {
```

### UnstableApiUsage
'CountingInputStream(java.io.InputStream)' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
        this.backingFile = file;
        try {
            this.in = new CountingInputStream(new FileInputStream(file));
        } catch (FileNotFoundException e) {
            throw new RuntimeException(e);
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
        this.backingFile = file;
        try {
            this.in = new CountingInputStream(new FileInputStream(file));
        } catch (FileNotFoundException e) {
            throw new RuntimeException(e);
```

### UnstableApiUsage
'limit(java.io.InputStream, long)' is marked unstable with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
            FileInputStream fileInputStream = new FileInputStream(file);
            fileInputStream.skip(offset);
            InputStream limitedStream = ByteStreams.limit(fileInputStream, size);
            if (extraCRLF) {
                return new EolInputStream(reader, limitedStream);
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java

        try {
            long offset = in.getCount();
            in.skip(size);
            return new FileLiteral(offset, size, extraCRLF, backingFile, this);
```

### UnstableApiUsage
'skip(long)' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/NettyStreamImapRequestLineReader.java`
#### Snippet
```java
        try {
            long offset = in.getCount();
            in.skip(size);
            return new FileLiteral(offset, size, extraCRLF, backingFile, this);
        } catch (IOException e) {
```

### UnstableApiUsage
'CountingInputStream(java.io.InputStream)' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/upload/CassandraUploadRepository.java`
#### Snippet
```java
        BucketName bucketName = uploadBucketName.asBucketName();

        return Mono.fromCallable(() -> new CountingInputStream(data))
            .flatMap(countingInputStream -> Mono.from(blobStore.save(bucketName, countingInputStream, LOW_COST))
                .map(blobId -> new UploadDAO.UploadRepresentation(uploadId, bucketName, blobId, contentType, countingInputStream.getCount(), user))
```

### UnstableApiUsage
'com.google.common.io.CountingInputStream' is marked unstable with @Beta
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/upload/CassandraUploadRepository.java`
#### Snippet
```java
        BucketName bucketName = uploadBucketName.asBucketName();

        return Mono.fromCallable(() -> new CountingInputStream(data))
            .flatMap(countingInputStream -> Mono.from(blobStore.save(bucketName, countingInputStream, LOW_COST))
                .map(blobId -> new UploadDAO.UploadRepresentation(uploadId, bucketName, blobId, contentType, countingInputStream.getCount(), user))
```

### UnstableApiUsage
'getCount()' is declared in unstable class 'com.google.common.io.CountingInputStream' marked with @Beta
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/upload/CassandraUploadRepository.java`
#### Snippet
```java
        return Mono.fromCallable(() -> new CountingInputStream(data))
            .flatMap(countingInputStream -> Mono.from(blobStore.save(bucketName, countingInputStream, LOW_COST))
                .map(blobId -> new UploadDAO.UploadRepresentation(uploadId, bucketName, blobId, contentType, countingInputStream.getCount(), user))
                .flatMap(upload -> uploadDAO.save(upload)
                    .thenReturn(UploadMetaData.from(uploadId, upload.getContentType(), upload.getSize(), upload.getBlobId()))));
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
                    MailAddress address = new MailAddress(property.substring(JAMES_MAIL_PER_RECIPIENT_HEADERS.length() + 1));
                    String headers = message.getStringProperty(property);
                    return Splitter.on('\n').splitToStream(headers)
                        .map(PerRecipientHeaders.Header::fromString)
                        .map(header -> Pair.of(address, header));
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java

        builder.addAttributes(
            splitter.splitToStream(attributeNames)
            .flatMap(attributeName -> mailAttribute(message, attributeName))
            .collect(ImmutableList.toImmutableList()));
```

### UnstableApiUsage
'createTempDir()' is marked unstable with @Beta
in `third-party/linshare/src/main/java/org/apache/james/linshare/LinshareBlobExportMechanism.java`
#### Snippet
```java
        this.linshareAPI = linshareAPI;
        this.blobStore = blobStore;
        this.tempDir = Files.createTempDir();
    }

```

### UnstableApiUsage
'createTempDir()' is marked unstable with @Beta
in `server/testing/src/main/java/org/apache/james/junit/TemporaryFolderExtension.java`
#### Snippet
```java
    @Override
    public void beforeEach(ExtensionContext context) throws Exception {
        temporaryFolder = new TemporaryFolder(Files.createTempDir());
    }

```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/testing/src/main/java/org/apache/james/utils/TestIMAPClient.java`
#### Snippet
```java
        return replyString.contains("OK FETCH completed")
            && Splitter.on(" ")
                .splitToStream(flags)
                .allMatch(replyString::contains);
    }
```

### UnstableApiUsage
'splitToStream(java.lang.CharSequence)' is marked unstable with @Beta
in `server/testing/src/main/java/org/apache/james/utils/TestIMAPClient.java`
#### Snippet
```java
        return Splitter.on("\n")
            .trimResults()
            .splitToStream(imapClient.getReplyString())
            .filter(s -> s.startsWith("*"))
            .count();
```

## RuleId[id=LoopStatementsThatDontLoop]
### LoopStatementsThatDontLoop
`for` statement does not loop
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
            } else if (address instanceof Group) {
                MailboxList mList = ((Group) address).getMailboxes();
                for (int a = 0; a < mList.size(); ) {
                    String mailboxName = mList.get(a).getLocalPart();
                    if (mailboxName == null) {
```

### LoopStatementsThatDontLoop
`while` statement does not loop
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java

    public void close() throws IOException {
        while (true) {
            byte[] buffer;
            if ((buffer = this.buf) != null) {
```

## RuleId[id=UnnecessaryStringEscape]
### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
            StringBuilder exceptionBuffer = new StringBuilder(64)
                    .append("Error loading sql definition file. ")
                    .append("The element named \'")
                    .append(sqlDefsSection)
                    .append("\' does not exist.");
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
                    .append("The element named \'")
                    .append(sqlDefsSection)
                    .append("\' does not exist.");
            throw new RuntimeException(exceptionBuffer.toString());
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
        }
        if (!found) {
            String exceptionBuffer = "Error loading sql definition file. " + "The element named \'" + sqlDefsSection + "\' does not exist.";
            throw new RuntimeException(exceptionBuffer);
        }
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
        }
        if (!found) {
            String exceptionBuffer = "Error loading sql definition file. " + "The element named \'" + sqlDefsSection + "\' does not exist.";
            throw new RuntimeException(exceptionBuffer);
        }
```

## RuleId[id=DuplicateBranchesInSwitch]
### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
                                        break;
                                    case ';':
                                        end = c;
                                        break;
                                }
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
                    break;
                case '+':
                    next();
                    next();
                    readContinuation();
                    break;
                default:
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
                switch (next) {
                    case -1:
                        isFinishedHeaders = true;
                        result = next;
                        break;
                    case '#':
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageResultIterator.java`
#### Snippet
```java
            break;
        case FROM:
            range = MessageRange.from(cursor);
            break;
        case ONE:
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/PartContentBuilder.java`
#### Snippet
```java
                break;
            case T_START_MESSAGE:
                break;
            case T_END_OF_STREAM:
                throw new PartNotFoundException(position);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/PartContentBuilder.java`
#### Snippet
```java
                throw new PartNotFoundException(position);
            case T_END_BODYPART:
                throw new PartNotFoundException(position);
            default:
                skipToStartOfInner(position);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MessageAlteringUtils.java`
#### Snippet
```java
                break;
            case MESSAGE:
                break;
            case UNALTERED:
                break;
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MessageAlteringUtils.java`
#### Snippet
```java
                break;
            case UNALTERED:
                break;
        }
        return builder.toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/MessageAlteringUtils.java`
#### Snippet
```java
                break;
            case UNALTERED:
                break;
        }
        attachmentPart.setFileName(getFileName(originalMessage.getSubject()));
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `server/data/data-jpa/src/main/java/org/apache/james/user/jpa/model/JPAUser.java`
#### Snippet
```java
                return Hashing.sha256();
            case "SHA-512":
                return Hashing.sha512();
            case "SHA-1":
            case "SHA1":
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
            return result += 30;
        case ' ':
            return result;
        }
        throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Expected SP, 0, 1, 2, or 3 but was " + dayHigh);
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
                return f(request, context.getCharset());
            case 'G':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'H':
                return header(request, context.getCharset());
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
                return header(request, context.getCharset());
            case 'I':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'J':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'J':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'K':
                return keyword(request);
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
                return o(session, request, context);
            case 'P':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'Q':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'Q':
                throw new DecodingException(HumanReadableText.ILLEGAL_ARGUMENTS, "Unknown search key");
            case 'R':
                nextIsE(request);
```

## RuleId[id=NonFinalFieldInEnum]
### NonFinalFieldInEnum
Non-final field `value` in enum 'SpecialAddressKind'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/SpecialAddressKind.java`
#### Snippet
```java
    NULL("null");

    private String value;

    private SpecialAddressKind(String value) {
```

## RuleId[id=OctalLiteral]
### OctalLiteral
Octal integer `0000`
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
        MAX_DATE = cal.getTime();
        
        cal.set(0000, 0, 1);
        MIN_DATE = cal.getTime();
    }
```

## RuleId[id=RegExpSimplifiable]
### RegExpSimplifiable
`[^/][^/]*` can be simplified to '\[\^/\]+'
in `server/container/core/src/main/java/org/apache/james/server/core/filesystem/SimpleUrl.java`
#### Snippet
```java
    private static final String CURRENT_PATH = ".";

    private static final Pattern URL_REGEXP = Pattern.compile("^([^/][^/]*:(?://)?)?(.*)");

    private static String url;
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/UnwrapText.java`
#### Snippet
```java
        
        //P1: Manage spaces without trims
        Pattern p1 = Pattern.compile("([> ]*)(.*[^ .?!][ ]*)$", 0);
        
        //P2: Quotation char at the begin of a line and the first word starts with a lowercase char or a number. The word ends with a space, a tab or a lineend. 
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
    public String html2Text(String html) {
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
```

### RegExpSimplifiable
`[/]` can be simplified to '/'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
    public String html2Text(String html) {
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
    public String html2Text(String html) {
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
        return decodeEntities(html
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
```

### RegExpSimplifiable
`[/]` can be simplified to '/'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\<([bB][rR]|[dD][lL])[ ]*[/]*[ ]*\\>", "\n")
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }
```

### RegExpSimplifiable
`[/]` can be simplified to '/'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }
```

### RegExpSimplifiable
`[ ]` can be simplified to ' '
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                .replaceAll("\\</([pP]|[hH]5|[dD][tT]|[dD][dD]|[dD][iI][vV])[ ]*\\>", "\n")
                .replaceAll("\\<[lL][iI][ ]*[/]*[ ]*\\>", "\n* ")
                .replaceAll("\\<[dD][dD][ ]*[/]*[ ]*\\>", " - ")
                .replaceAll("\\<.*?\\>", ""));
    }
```

### RegExpSimplifiable
`[\\*]` can be simplified to '\\\*'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern FULL_SPLAT_PATTERN =
            Pattern.compile("[\\*][\\*]");
        private static final String FULL_SPLAT_REPLACEMENT = ".*";

```

### RegExpSimplifiable
`[\\*]` can be simplified to '\\\*'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern FULL_SPLAT_PATTERN =
            Pattern.compile("[\\*][\\*]");
        private static final String FULL_SPLAT_REPLACEMENT = ".*";

```

### RegExpSimplifiable
`[\\*]` can be simplified to '\\\*'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern NAME_SPLAT_PATTERN =
            Pattern.compile("\\{([^/]+?)\\}[\\*][\\*]");

        private static final Pattern NAME_PATTERN = Pattern.compile("\\{([^/]+?)\\}");
```

### RegExpSimplifiable
`[\\*]` can be simplified to '\\\*'
in `server/protocols/jmap/src/main/java/org/apache/james/jmap/UriMatcher.java`
#### Snippet
```java

        private static final Pattern NAME_SPLAT_PATTERN =
            Pattern.compile("\\{([^/]+?)\\}[\\*][\\*]");

        private static final Pattern NAME_PATTERN = Pattern.compile("\\{([^/]+?)\\}");
```

## RuleId[id=StringBufferReplaceableByString]
### StringBufferReplaceableByString
`StringBuilder responseBuffer` can be replaced with 'String'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/fastfail/SupressDuplicateRcptHandler.java`
#### Snippet
```java
            .filter(rcptList -> rcptList.contains(rcpt))
            .map(rcptList -> {
                StringBuilder responseBuffer = new StringBuilder();

                responseBuffer.append(DSNStatus.getStatus(DSNStatus.SUCCESS, DSNStatus.ADDRESS_VALID))
```

### StringBufferReplaceableByString
`StringBuilder userBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
        this(sequenceNumber, parsedConfiguration, null, password, null, ignoreRecipientHeader, customRecipientHeader, session);

        StringBuilder userBuffer = new StringBuilder(userPrefix);
        userBuffer.append(userName);
        userBuffer.append(userSuffix);
```

### StringBufferReplaceableByString
`StringBuilder recipientBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/DynamicAccount.java`
#### Snippet
```java
        setUser(userBuffer.toString());

        StringBuilder recipientBuffer = new StringBuilder(recipientPrefix);
        recipientBuffer.append(userName);
        recipientBuffer.append(recipientSuffix);
```

### StringBufferReplaceableByString
`StringBuilder buffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
            from = getDefaultLocalPart();
            setDefaultSenderLocalPart(true);
            StringBuilder buffer = new StringBuilder(32);
            buffer.append("Sender localpart is absent. Using default value (");
            buffer.append(getDefaultLocalPart());
```

### StringBufferReplaceableByString
`StringBuilder fromBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        // Check for domain part, add default if missing
        if (from.indexOf('@') < 0) {
            StringBuilder fromBuffer = new StringBuilder(from);
            fromBuffer.append('@');
            fromBuffer.append(getDefaultDomainName());
```

### StringBufferReplaceableByString
`StringBuilder buffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
            setDefaultSenderDomainPart(true);

            StringBuilder buffer = new StringBuilder(32);
            buffer.append("Sender domain is absent. Using default value (");
            buffer.append(getDefaultDomainName());
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        }

        StringBuilder messageBuffer = new StringBuilder("Rejected mail exceeding message size limit. Message size: ");
        messageBuffer.append(messageSize / 1024);
        messageBuffer.append("KB.");
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        // hard-coded recipient
        if (isIgnoreRecipientHeader()) {
            StringBuilder messageBuffer = new StringBuilder("Ignoring recipient header. Using configured recipient as new envelope recipient: ");
            messageBuffer.append(getRecipient());
            messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        if (targetRecipient != null) {
            MailAddress recipient = new MailAddress(targetRecipient);
            StringBuilder messageBuffer = new StringBuilder("Using original envelope recipient as new envelope recipient: ");
            messageBuffer.append(recipient);
            messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        if (allRecipients.length == 1) {
            MailAddress recipient = new MailAddress((InternetAddress) allRecipients[0]);
            StringBuilder messageBuffer = new StringBuilder("Using sole recipient header address as new envelope recipient: ");
            messageBuffer.append(recipient);
            messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        }

        StringBuilder messageBuffer = new StringBuilder("Rejected mail intended for remote recipient: ");
        messageBuffer.append(recipient);
        messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        }

        StringBuilder messageBuffer = new StringBuilder("Rejected mail intended for undefined user: ");
        messageBuffer.append(recipient);
        messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
            }
            intendedRecipient = getRecipient();
            StringBuilder messageBuffer = new StringBuilder("Intended recipient not found. Using configured recipient as new envelope recipient - ");
            messageBuffer.append(intendedRecipient);
            messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder msgBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
    protected void addErrorMessages(Mail mail) throws MessagingException {
        if (isMaxMessageSizeExceeded()) {
            StringBuilder msgBuffer = new StringBuilder("550 - Rejected - This message has been rejected as the message size of ");
            msgBuffer.append(getMessageIn().getSize() * 1000 / 1024 / 1000f);
            msgBuffer.append("KB exceeds the maximum permitted size of ");
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        }

        StringBuilder messageBuffer = new StringBuilder("Rejected mail with an invalid Received: header at index ");
        messageBuffer.append(getRemoteReceivedHeaderIndex());
        messageBuffer.append(".");
```

### StringBufferReplaceableByString
`StringBuilder messageBuffer` can be replaced with 'String'
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        }

        StringBuilder messageBuffer = new StringBuilder("Rejected mail intended for blacklisted recipient: ");
        messageBuffer.append(recipient);
        messageBuffer.append('.');
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `mailet/ai/src/main/java/org/apache/james/ai/classic/TokenProbabilityStrength.java`
#### Snippet
```java
     */
    public String toString() {
        StringBuilder sb = new StringBuilder(30);

        sb.append(token).append("=").append(strength);
```

### StringBufferReplaceableByString
`StringBuilder exceptionBuffer` can be replaced with 'String'
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
        }
        if (!found) {
            StringBuilder exceptionBuffer = new StringBuilder(64)
                    .append("Error loading sql definition file. ")
                    .append("The element named \'")
```

### StringBufferReplaceableByString
`StringBuilder exceptionBuffer` can be replaced with 'String'
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java

        if (sql == null && required) {
            StringBuilder exceptionBuffer = new StringBuilder(64)
                    .append("Required SQL resource: '")
                    .append(name)
```

### StringBufferReplaceableByString
`StringBuilder responseBuffer` can be replaced with 'String'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/AbstractPassCmdHandler.java`
#### Snippet
```java
                session.setHandlerState(POP3Session.TRANSACTION);

                StringBuilder responseBuffer = new StringBuilder(64).append("Welcome ")
                    .append(Optional.ofNullable(session.getUsername())
                        .map(Username::asString)
```

### StringBufferReplaceableByString
`StringBuilder result` can be replaced with 'String'
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
        }

        StringBuilder result = new StringBuilder();
        result.append(baseDirectory.getAbsolutePath());
        result.append(File.separator);
```

### StringBufferReplaceableByString
`StringBuffer` can be replaced with 'String'
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
                message = "Expected a date-time but was nothing.";
            } else {
                message = new StringBuffer("Expected a date-time but was ").append(chars.toString()).toString();
            }

```

### StringBufferReplaceableByString
`StringBuilder result` can be replaced with 'String'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/MyRightsResponse.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder result = new StringBuilder()
        .append(ImapConstants.ACL_RESPONSE_NAME)
        .append(' ')
```

### StringBufferReplaceableByString
`StringBuilder retValue` can be replaced with 'String'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/SearchResponse.java`
#### Snippet
```java
        final String TAB = " ";

        StringBuilder retValue = new StringBuilder();

        retValue.append("SearchResponse ( ").append("ids = ").append(this.ids).append(TAB).append(" )");
```

### StringBufferReplaceableByString
`StringBuilder result` can be replaced with 'String'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/QuotaResponse.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder result = new StringBuilder()
                .append(ImapConstants.QUOTA_RESPONSE_NAME)
                .append(' ')
```

### StringBufferReplaceableByString
`StringBuilder result` can be replaced with 'String'
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/QuotaRootResponse.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder result = new StringBuilder()
                .append(ImapConstants.QUOTAROOT_RESPONSE_NAME)
                .append(' ')
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/AddFooter.java`
#### Snippet
```java
        }
        int insertionIndex = matcher.start(matcher.groupCount() - 1);
        return new StringBuilder()
                .append(content, 0, insertionIndex)
                .append(getFooterHTML())
```

## RuleId[id=UnnecessaryReturn]
### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `protocols/imap/src/main/java/org/apache/james/imap/processor/base/UidMsnConverter.java`
#### Snippet
```java
            }
            if (contains(uid)) {
                return;
            } else {
                uidsAsInts.add((int) uid.asLong());
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `protocols/imap/src/main/java/org/apache/james/imap/processor/base/UidMsnConverter.java`
#### Snippet
```java
            }
            if (contains(uid)) {
                return;
            } else {
                uids.add(uid.asLong());
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/pushsubscription/CassandraPushSubscriptionRepository.java`
#### Snippet
```java
                if (isInvalidPushSubscriptionKey(request.keys())) {
                    sink.error(new InvalidPushSubscriptionKeys(request.keys().get()));
                    return;
                }
            })
```

## RuleId[id=ManualMinMaxCalculation]
### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
            }

            long skipped = avail < n ? avail : n;
            this.pos = (int)((long)this.pos + skipped);
            return skipped;
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
        }

        int cnt = avail < len ? avail : len;
        System.arraycopy(this.getBufIfOpen(), this.pos, b, off, cnt);
        this.pos += cnt;
```

## RuleId[id=SimplifiableConditionalExpression]
### SimplifiableConditionalExpression
`(getInitParameter("delete") == null) ? false : Boolean.parseBoolean(getInitParameter("delete"))` can be simplified to 'getInitParameter("delete")!=null \&\& Boolean.parseBoolean(getInitParameter("delete"))'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/FromRepository.java`
#### Snippet
```java

        try {
            delete = (getInitParameter("delete") == null) ? false : Boolean.parseBoolean(getInitParameter("delete"));
        } catch (Exception e) {
            // Ignore exception, default to false
```

### SimplifiableConditionalExpression
`(getInitParameter("debug") == null) ? false : Boolean.parseBoolean(getInitParameter("debug"))` can be simplified to 'getInitParameter("debug")!=null \&\& Boolean.parseBoolean(getInitParameter("debug"))'
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/UseHeaderRecipients.java`
#### Snippet
```java
    @Override
    public void init() {
        isDebug = (getInitParameter("debug") == null) ? false : Boolean.parseBoolean(getInitParameter("debug"));
    }

```

### SimplifiableConditionalExpression
`(getInitParameter("rebuildFrom") == null) ? true : Boolean.parseBoolean(getInitParameter("rebuildFrom"))` can be simplified to 'getInitParameter("rebuildFrom") == null \|\| Boolean.parseBoolean(getInitParameter("rebuildFrom"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/SMIMESign.java`
#### Snippet
```java
    @Override
    protected void initRebuildFrom() throws MessagingException {
        setRebuildFrom((getInitParameter("rebuildFrom") == null) ? true : Boolean.parseBoolean(getInitParameter("rebuildFrom")));
        if (isDebug()) {
            if (isRebuildFrom()) {
```

### SimplifiableConditionalExpression
`(getInitParameter("postmasterSigns") == null) ? true : Boolean.parseBoolean(getInitParameter("postmasterSigns"))` can be simplified to 'getInitParameter("postmasterSigns") == null \|\| Boolean.parseBoolean(getInitParameter("postmasterSigns"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/SMIMESign.java`
#### Snippet
```java
    @Override
    protected void initPostmasterSigns() {
        setPostmasterSigns((getInitParameter("postmasterSigns") == null) ? true : Boolean.parseBoolean(getInitParameter("postmasterSigns")));
    }
    
```

### SimplifiableConditionalExpression
`(getInitParameter("rebuildFrom") == null) ? true : Boolean.parseBoolean(getInitParameter("rebuildFrom"))` can be simplified to 'getInitParameter("rebuildFrom") == null \|\| Boolean.parseBoolean(getInitParameter("rebuildFrom"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/Sign.java`
#### Snippet
```java
    @Override
    protected void initRebuildFrom() throws MessagingException {
        setRebuildFrom((getInitParameter("rebuildFrom") == null) ? true : Boolean.parseBoolean(getInitParameter("rebuildFrom")));
        if (isDebug()) {
            if (isRebuildFrom()) {
```

### SimplifiableConditionalExpression
`(getInitParameter("postmasterSigns") == null) ? true : Boolean.parseBoolean(getInitParameter("postmasterSigns"))` can be simplified to 'getInitParameter("postmasterSigns") == null \|\| Boolean.parseBoolean(getInitParameter("postmasterSigns"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/Sign.java`
#### Snippet
```java
    @Override
    protected void initPostmasterSigns() {
        setPostmasterSigns((getInitParameter("postmasterSigns") == null) ? true : Boolean.parseBoolean(getInitParameter("postmasterSigns")));
    }
    
```

### SimplifiableConditionalExpression
`(getInitParameter("rebuildFrom") == null) ? false : Boolean.parseBoolean(getInitParameter("rebuildFrom"))` can be simplified to 'getInitParameter("rebuildFrom")!=null \&\& Boolean.parseBoolean(getInitParameter("rebuildFrom"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/AbstractSign.java`
#### Snippet
```java
     */
    protected void initRebuildFrom() throws MessagingException {
        setRebuildFrom((getInitParameter("rebuildFrom") == null) ? false : Boolean.parseBoolean(getInitParameter("rebuildFrom")));
        if (isDebug()) {
            if (isRebuildFrom()) {
```

### SimplifiableConditionalExpression
`(getInitParameter("postmasterSigns") == null) ? false : Boolean.parseBoolean(getInitParameter("postmasterSigns"))` can be simplified to 'getInitParameter("postmasterSigns")!=null \&\& Boolean.parseBoolean(getInitParameter("postmasterSigns"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/AbstractSign.java`
#### Snippet
```java
     */
    protected void initPostmasterSigns() {
        setPostmasterSigns((getInitParameter("postmasterSigns") == null) ? false : Boolean.parseBoolean(getInitParameter("postmasterSigns")));
    }
    
```

### SimplifiableConditionalExpression
`(getInitParameter("debug") == null) ? false : Boolean.parseBoolean(getInitParameter("debug"))` can be simplified to 'getInitParameter("debug")!=null \&\& Boolean.parseBoolean(getInitParameter("debug"))'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/AbstractSign.java`
#### Snippet
```java
     */
    protected void initDebug() {
        setDebug((getInitParameter("debug") == null) ? false : Boolean.parseBoolean(getInitParameter("debug")));
    }
    
```

## RuleId[id=JavadocLinkAsPlainText]
### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/type/DispositionType.java`
#### Snippet
```java
 * disposition type information as defined by RFC 8098.
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.6.2
 */
public enum DispositionType {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/action/mode/DispositionActionMode.java`
#### Snippet
```java
 * disposition action mode information as defined by RFC 8098.
 *
 * More information https://tools.ietf.org/html/rfc8098#section-3.2.6.1
 */
public enum DispositionActionMode {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/OriginalRecipient.java`
#### Snippet
```java
 * Implements optional Original-Recipient field defined in:
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.3
 */
public class OriginalRecipient implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/ReportingUserAgent.java`
#### Snippet
```java
 * Implements optional Reporting-UA header field
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.1
 */
public class ReportingUserAgent implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/FinalRecipient.java`
#### Snippet
```java
 * Implements mandatory Final recipient field
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.4
 */
public class FinalRecipient implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/Error.java`
#### Snippet
```java
 * Implements the optional MDN Error field defined in RFC-8098
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.7
 */
public class Error implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/Field.java`
#### Snippet
```java
 * Interface that defines fields as stated in RFC-8098
 *
 * https://tools.ietf.org/html/rfc8098#section-3.1
 */
public interface Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/ExtensionField.java`
#### Snippet
```java
 * Implements extension fields allowed by RFC-8098
 *
 * https://tools.ietf.org/html/rfc8098#section-3.3
 */
public class ExtensionField implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/OriginalMessageId.java`
#### Snippet
```java
 * Optional Original-Message−Id as defined in RFC-8098
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.5
 */
public class OriginalMessageId implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/Gateway.java`
#### Snippet
```java

/**
 * MDN-Gateway field as specified in https://tools.ietf.org/html/rfc8098#section-3.2.2
 */
public class Gateway implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/sending/mode/DispositionSendingMode.java`
#### Snippet
```java
 * disposition sending mode information as defined by RFC 8098.
 *
 * More information: https://tools.ietf.org/html/rfc8098#section-3.2.6.1
 */
public enum DispositionSendingMode {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/modifier/DispositionModifier.java`
#### Snippet
```java
 * disposition modifier information as defined by RFC 8098.
 *
 * https://tools.ietf.org/html/rfc8098#section-3.2.6.3
 */
public class DispositionModifier {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mdn/src/main/java/org/apache/james/mdn/fields/Disposition.java`
#### Snippet
```java

/**
 * Implements disposition as stated in https://tools.ietf.org/html/rfc8098#section-3.2.6
 */
public class Disposition implements Field {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/MailAddress.java`
#### Snippet
```java
 * <p>This parses an address as per the BNF specification for <mailbox>
 * from RFC 821 on page 30 and 31, section 4.1.2. COMMAND SYNTAX.
 * http://www.freesoft.org/CIE/RFC/821/15.htm</p>
 *
 * <strong>This version is copied from mailet-api with a few changes to not make it depend on javamail</strong>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/protocols/webadmin/webadmin-dropwizard-metrics/src/main/java/org/apache/james/webadmin/dropwizard/MetricsRoutes.java`
#### Snippet
```java

/**
 * Content adapted from https://github.com/prometheus/client_java/blob/master/simpleclient_servlet/src/main/java/io/prometheus/client/exporter/MetricsServlet.java
 */
public class MetricsRoutes implements PublicRoutes {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
 * <p>This parses an address as per the BNF specification for <mailbox>
 * from RFC 821 on page 30 and 31, section 4.1.2. COMMAND SYNTAX.
 * http://www.freesoft.org/CIE/RFC/821/15.htm</p>
 *
 * @version 1.0
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP184JpaMigrateCommand.java`
#### Snippet
```java
 * Simply drop the MAILBOXMEMBERSHIP.SIZE column.
 * 
 * @link https://issues.apache.org/jira/browse/IMAP-184
 * 
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP176JpaMigrateCommand.java`
#### Snippet
```java
 * Simply update the MAILBOX.NAMESPACE column with "#private" value.
 * 
 * @link https://issues.apache.org/jira/browse/IMAP-176
 * 
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP165JpaMigrateCommand.java`
#### Snippet
```java
 * Add 3 indexes for the DELETED, SEEN and RECENT columns of MEMBERSHIP table.
 * 
 * @link https://issues.apache.org/jira/browse/IMAP-165
 * 
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP172JpaMigrateCommand.java`
#### Snippet
```java
 * Simply drop the MAILBOX.MESSAGECOUNT and MAILBOX.SIZE columns.
 * 
 * @link https://issues.apache.org/jira/browse/IMAP-172
 * 
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/JpaMigrator.java`
#### Snippet
```java

    /**<p>Executes the database migration for the provided JIRAs numbers.
     * For example, for the https://issues.apache.org/jira/browse/IMAP-165 JIRA, simply invoke
     * with IMAP165 as parameter.
     * You can also invoke with many JIRA at once. They will be all serially executed.</p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP168JpaMigrateCommand.java`
#### Snippet
```java
 *</p>
 *
 * @link https://issues.apache.org/jira/browse/IMAP-168
 * 
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/tools/jpa-migrator/src/main/java/org/apache/james/mailbox/tools/jpa/migrator/command/IMAP180JpaMigrateCommand.java`
#### Snippet
```java
 * DROP TABLE MESSAGE_PROPERTY
 * 
 * @link https://issues.apache.org/jira/browse/IMAP-180
 * 
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mpt/core/src/main/java/org/apache/james/mpt/host/ExternalHostSystem.java`
#### Snippet
```java
 * This is typically used for functional integration testing of a complete
 * server system (including sockets). Apache James MPT AntLib provides an <a
 * href='http://ant.apache.org'>Ant</a> task suitable for this use
 * case.
 * </p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Local name for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-ID property
     */
    public static final String MIME_CONTENT_ID_NAME = "Content-ID";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Local name for <a href='http://www.faqs.org/rfcs/rfc1864.html'>RFC1864</a> Content-Language property
    */
   public static final String MIME_CONTENT_LANGUAGE_NAME = "Content-Language";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
 * <p>
 * The domain containing the namespace should be controlled by the definer.
 * So, all properties defined here begin with <code>http://james.apache.org</code>.
 * This is a simple way to prevent namespace collisions with expansion terms.
 * </p><p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
 * Namespaces derived from the RFC in which the term is 
 * defined are preferred. So, terms defined in
 * <a href='http://james.apache.org/server/rfclist/basic/rfc2045.txt'>RFC2045</a>
 * would be based in the <code>http://james.apache.org/rfc2045</code> space.
 * </p><ul>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Local name for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-Transfer-Encoding property
     */
    public static final String MIME_CONTENT_TRANSFER_ENCODING_NAME = "Content-Transfer-Encoding";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-Transfer-Encoding property.
     * @see #NAMESPACE_RFC_2045
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> mime type properties.
     * A distinct namespace is required to distinguish these properties from the Content-Type
     * parameters.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a>.
     */
    public static final String MIME_CONTENT_TYPE_SPACE = NAMESPACE_RFC_2045 + "/Content-Type";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc1864.html'>RFC 1864 - The Content-MD5 Header Field</a>.
    */
   public static final String NAMESPACE_RFC_1864 = "http://james.apache.org/rfc1864";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Local name for <a href='http://www.faqs.org/rfcs/rfc2557.html'>RFC2557</a> Content-Location property
     */
    public static final String MIME_CONTENT_LOCATION_NAME = "Content-Location";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-Description property.
     * @see #NAMESPACE_RFC_2045
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc1864.html'>RFC1864</a> Content-MD5 property.
    * @see #NAMESPACE_RFC_1864
    */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc2183.html'>RFC 2183- 
    * Communicating Presentation Information in Internet Messages</a>.
    */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Local name for <a href='http://www.faqs.org/rfcs/rfc1864.html'>RFC1864</a> Content-MD5 property
    */
   public static final String MIME_CONTENT_MD5_NAME = "Content-MD5";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2557.html'>RFC2557</a> Content-Location property.
     * @see #NAMESPACE_RFC_2557
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-ID property.
     * @see #MIME_CONTENT_TYPE_SPACE
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc2183.html'>RFC2183</a> Content-Disposition property.
    * @see #NAMESPACE_RFC_2183
    */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Local name for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> sub type property
     */
    public static final String MIME_SUB_TYPE_NAME = "subtype";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Local name for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> media type property
     */
    public static final String MIME_MEDIA_TYPE_NAME = "type";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
public class StandardNames {
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a>.
     */
    public static final String NAMESPACE_RFC_2045 = "http://james.apache.org/rfc2045";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc1766.html'>RFC 1766 - Tags for the Identification of Languages</a>.
    */
   public static final String NAMESPACE_RFC_1766 = "http://james.apache.org/rfc1766";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Local name for <a href='http://www.faqs.org/rfcs/rfc2183.html'>RFC2183</a> Content-Disposition property
    */
   public static final String MIME_CONTENT_DISPOSITION_TYPE_NAME = "disposition-type";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-Type
     * "charset" parameter.
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2557.html'>MIME</a>.
     */
    public static final String NAMESPACE_RFC_2557 = "http://james.apache.org/rfc2557";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc1766.html'>RFC1766</a> Content-Language property.
    * @see #NAMESPACE_RFC_1766
    */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Namespace for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-Type
     * parameter space.
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
   
   /**
    * Namespace for <a href='http://www.faqs.org/rfcs/rfc2183.html'>RFC2183</a> Content-Disposition property.
    * @see #NAMESPACE_RFC_2183
    */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/StandardNames.java`
#### Snippet
```java
    
    /**
     * Local name for <a href='http://www.faqs.org/rfcs/rfc2045.html'>MIME</a> Content-Description property
     */
    public static final String MIME_CONTENT_DESCRIPTION_NAME = "Content-Description";
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/util/src/main/java/org/apache/james/util/StructuredLogger.java`
#### Snippet
```java
     * We migrated to explicit Strings instead.
     *
     * See https://issues.apache.org/jira/browse/JAMES-3587
     *
     * Use {@link StructuredLogger::field} instead.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/util/src/main/java/org/apache/james/util/MDCBuilder.java`
#### Snippet
```java
     * We migrated to explicit Strings instead.
     *
     * See https://issues.apache.org/jira/browse/JAMES-3587
     *
     * Use {@link MDCBuilder::addToContext} instead.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/util/src/main/java/org/apache/james/util/MDCBuilder.java`
#### Snippet
```java
     * We migrated to explicit Strings instead.
     *
     * See https://issues.apache.org/jira/browse/JAMES-3587
     *
     * Use {@link MDCBuilder::ofValue} instead.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/util/src/main/java/org/apache/james/util/MDCBuilder.java`
#### Snippet
```java
     * Renamed to preserve a coherent semantic.
     *
     * See https://issues.apache.org/jira/browse/JAMES-3587
     *
     * Use {@link MDCBuilder::addToContext} instead.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/util/src/main/java/org/apache/james/util/MDCStructuredLogger.java`
#### Snippet
```java
     * We migrated to explicit Strings instead.
     *
     * See https://issues.apache.org/jira/browse/JAMES-3587
     *
     * Use {@link MDCStructuredLogger::field} instead
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
 *  - Removal of Unsafe usages
 *
 *  See https://issues.apache.org/jira/projects/IO/issues/IO-786 for rationals
 */
public class UnsynchronizedBufferedInputStream extends FilterInputStream {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxSession.java`
#### Snippet
```java

    /**
     * Gets the <a href='http://www.isi.edu/in-notes/rfc2342.txt' rel='tag'>RFC
     * 2342</a> other users namespace for the current session.<br>
     * Note that though servers may offer multiple other users namespaces,
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxSession.java`
#### Snippet
```java

    /**
     * Iterates the <a href='http://www.isi.edu/in-notes/rfc2342.txt'
     * rel='tag'>RFC 2342</a> Shared Namespaces available for the current
     * session.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxSession.java`
#### Snippet
```java

    /**
     * Gets the <a href='http://www.isi.edu/in-notes/rfc2342.txt' rel='tag'>RFC
     * 2342</a> personal namespace for the current session.<br>
     * Note that though servers may offer multiple personal namespaces, support
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/UidValidity.java`
#### Snippet
```java
     * to some IMPA clients not being able to detect changes.
     *
     * See https://issues.apache.org/jira/browse/JAMES-3074 for details
     */
    public static UidValidity generate() {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/ContentType.java`
#### Snippet
```java

/**
 * Follows syntax and usage as defined in https://tools.ietf.org/html/rfc2045#section-5
 * Thus includes mime type, defined by its media type and subtype as well as contentType fields parameters,
 * including charset
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/GhostMailbox.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/MAILBOX-322 for reading about the Ghost mailbox bug.
 *
 * This class intend to introduce a dedicated logger for the ghost mailbox bug.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/MailboxOperationLoggingListener.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/MAILBOX-322 for reading about the Ghost mailbox bug.
 *
 * This class logs mailboxes writes in order to give context to analyse ghost mailbox bug.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMailboxPathV3DAO.java`
#### Snippet
```java

    /**
     * See https://issues.apache.org/jira/browse/MAILBOX-322 to read about the Ghost mailbox bug.
     * <p>
     * A missed read on an existing mailbox is the cause of the ghost mailbox bug. Here we log missing reads. Successful
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMailboxPathV3DAO.java`
#### Snippet
```java

    /**
     * See https://issues.apache.org/jira/browse/MAILBOX-322 to read about the Ghost mailbox bug.
     * <p>
     * Read success allows to know if a mailbox existed before (mailbox write history might be older than this log introduction
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
     * ask the admin to review then merge the two mailbowes together using {@link MailboxMergingTask}.
     *
     * See https://github.com/apache/james-project/blob/master/src/site/markdown/server/manage-webadmin.md#correcting-ghost-mailbox
     */
    private static class ConflictingEntryInconsistency implements Inconsistency {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/ToSenderDomainRepository.java`
#### Snippet
```java
 *  to potential data loss). In case, you want to create a repository manually, make a http PUT request to
 *  /mailRepositories/encodedUrlOfTheRepository from web admin api.
 *  For example http://ip:port/mailRepositories/file%3A%2F%2FmailRepo
 *  @see <a href="https://james.apache.org/server/manage-webadmin.html">Create a mail repository</a>
 *
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
 * <p>
 * Generates a Delivery Status Notification (DSN) as per RFC-3464 An Extensible Message Format for Delivery Status
 * Notifications (https://tools.ietf.org/html/rfc3464).</p>
 *
 * <p>Note that this is different than a mail-client's reply, which would use the Reply-To or From header.</p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
 *   &lt;debug&gt;<i>true or false, default=false</i>&lt;/debug&gt;
 *   &lt;action&gt;<i>failed, delayed, delivered, expanded or relayed, default=failed</i>&lt;/action&gt;
 *   &lt;defaultStatus&gt;<i>SMTP status code. Try to adapt it to the mailet position: 2.0.0 for success, 4.0.0 for delays, 5.0.0 for failures default=unknown</i>&lt;/defaultStatus&gt;  &lt;!-- See https://tools.ietf.org/html/rfc3463 --&gt;
 * &lt;/mailet&gt;
 * </code>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/InSpammerBlacklist.java`
#### Snippet
```java
 * <ul>
 * <li><b>blackholes.mail-abuse.org</b>: Rejected - see
 * http://www.mail-abuse.org/rbl/
 * <li><b>dialups.mail-abuse.org</b>: Dialup - see
 * http://www.mail-abuse.org/dul/
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/InSpammerBlacklist.java`
#### Snippet
```java
 * http://www.mail-abuse.org/rbl/
 * <li><b>dialups.mail-abuse.org</b>: Dialup - see
 * http://www.mail-abuse.org/dul/
 * <li><b>relays.mail-abuse.org</b>: Open spam relay - see
 * http://www.mail-abuse.org/rss/
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/InSpammerBlacklist.java`
#### Snippet
```java
 * http://www.mail-abuse.org/dul/
 * <li><b>relays.mail-abuse.org</b>: Open spam relay - see
 * http://www.mail-abuse.org/rss/
 * </ul>
 * 
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/dlp/Dlp.java`
#### Snippet
```java
 *  &lt;/mailet&gt;
 *
 *  Rules can be administered via webAdmin, cf: https://james.apache.org/server/manage-webadmin.html#Administrating_DLP_Configuration
 *
 *  Only available on top of Memory and Cassandra storages.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/data/data-jpa/src/main/java/org/apache/james/rrt/jpa/model/JPARecipientRewrite.java`
#### Snippet
```java
     * Default no-args constructor for JPA class enhancement.
     * The constructor need to be public or protected to be used by JPA.
     * See:  http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html
     * Do not us this constructor, it is for JPA only.
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/data/data-jpa/src/main/java/org/apache/james/domainlist/jpa/model/JPADomain.java`
#### Snippet
```java
     * Default no-args constructor for JPA class enhancement.
     * The constructor need to be public or protected to be used by JPA.
     * See:  http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html
     * Do not us this constructor, it is for JPA only.
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/data/data-jpa/src/main/java/org/apache/james/mailrepository/jpa/model/JPAUrl.java`
#### Snippet
```java
     * Default no-args constructor for JPA class enhancement.
     * The constructor need to be public or protected to be used by JPA.
     * See:  http://docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html
     * Do not us this constructor, it is for JPA only.
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
     * Either headers or full.
     *
     * https://tools.ietf.org/html/rfc3461#section-4.3
     */
    public enum Ret {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
 * Represents DSN parameters attached to the envelope of an Email transiting over SMTP
 *
 * See https://tools.ietf.org/html/rfc3461
 */
public class DsnParameters {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
     * ENVID allow the sender to correlate a bounce with a submission.
     *
     * https://tools.ietf.org/html/rfc3461#section-4.4
     */
    public static class EnvId {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
     * NOTIFY controls in which situations a bounce should be emited for a given recipient.
     *
     * https://tools.ietf.org/html/rfc3461#section-4.1
     */
    public enum Notify {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapSessionState.java`
#### Snippet
```java
public enum ImapSessionState {
    /** 
     * <a href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt' rel='tag'>RFC2060</a>
     * <code>3.1 Non-Authenticated State</code>
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapSessionState.java`
#### Snippet
```java
    SELECTED("Selected State"),
    /** 
     * <a href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt' rel='tag'>RFC2060</a>
     * <code>3.4 Logout State</code>
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapSessionState.java`
#### Snippet
```java
/**
 * Enumerates 
 * <a href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt' rel='tag'>RFC2060</a>
 * session states.
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapSessionState.java`
#### Snippet
```java
    NON_AUTHENTICATED("Non Authenticated State"),
    /** 
     * <a href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt' rel='tag'>RFC2060</a>
     * <code>3.2 Authenticated State</code>
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/api/ImapSessionState.java`
#### Snippet
```java
    AUTHENTICATED("Authenticated State"),
    /** 
     * <a href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt' rel='tag'>RFC2060</a>
     * <code>3.3 Selected State</code>
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/api/process/ImapSession.java`
#### Snippet
```java
    /**
     * Return true if compression is supported. This is related to COMPRESS extension.
     * See http://www.ietf.org/rfc/rfc4978.txt
     * 
     * @return compressSupport
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/IDCommandParser.java`
#### Snippet
```java
 * Parses ID commands
 *
 * CF https://www.rfc-editor.org/rfc/rfc2971.html
 */
public class IDCommandParser extends AbstractImapCommandParser {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/ReplaceCommandParser.java`
#### Snippet
```java
 * RFC-8508: IMAP Replace extension
 *
 * https://www.rfc-editor.org/rfc/rfc8508.html
 */
public class ReplaceCommandParser extends AbstractUidCommandParser {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/encode/CapabilityResponseEncoder.java`
#### Snippet
```java
/**
 * Encodes <code>CAPABILITY</code> response. See <code>7.2.1</code> of <a
 * href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt'
 * rel='tag'>RFC2060</a>.
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/ReplaceRequest.java`
#### Snippet
```java
 * RFC-8508: IMAP Replace extension
 *
 * https://www.rfc-editor.org/rfc/rfc8508.html
 */
public class ReplaceRequest extends AbstractImapRequest implements Closeable {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/message/response/CapabilityResponse.java`
#### Snippet
```java
/**
 * A <code>CAPABILITY</code> response. See <code>7.2.1</code> of <a
 * href='http://james.apache.org/server/rfclist/imap4/rfc2060.txt'
 * rel='tag'>RFC2060</a>.
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/StatusProcessor.java`
#### Snippet
```java

/**
 * STATUS command initial definition: https://www.rfc-editor.org/rfc/rfc3501#section-6.3.10
 *
 * STATUS=SIZE extension: https://www.rfc-editor.org/rfc/rfc8438.html
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/StatusProcessor.java`
#### Snippet
```java
 * STATUS command initial definition: https://www.rfc-editor.org/rfc/rfc3501#section-6.3.10
 *
 * STATUS=SIZE extension: https://www.rfc-editor.org/rfc/rfc8438.html
 * DELETED extension: https://datatracker.ietf.org/doc/html/rfc9051#section-6.3.11
 *     and https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/StatusProcessor.java`
#### Snippet
```java
 *
 * STATUS=SIZE extension: https://www.rfc-editor.org/rfc/rfc8438.html
 * DELETED extension: https://datatracker.ietf.org/doc/html/rfc9051#section-6.3.11
 *     and https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
 * DELETED-STORAGE extension: https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/StatusProcessor.java`
#### Snippet
```java
 * STATUS=SIZE extension: https://www.rfc-editor.org/rfc/rfc8438.html
 * DELETED extension: https://datatracker.ietf.org/doc/html/rfc9051#section-6.3.11
 *     and https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
 * DELETED-STORAGE extension: https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/StatusProcessor.java`
#### Snippet
```java
 * DELETED extension: https://datatracker.ietf.org/doc/html/rfc9051#section-6.3.11
 *     and https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
 * DELETED-STORAGE extension: https://datatracker.ietf.org/doc/html/rfc9208#section-4.1.4
 */
public class StatusProcessor extends AbstractMailboxProcessor<StatusRequest> implements CapabilityImplementingProcessor {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/SetMetadataProcessor.java`
#### Snippet
```java
 * Support for RFC-5464 IMAP METADATA (SETMETADATA command)
 *
 * CF https://www.rfc-editor.org/rfc/rfc5464.html
 */
public class SetMetadataProcessor extends AbstractMailboxProcessor<SetMetadataRequest> implements CapabilityImplementingProcessor {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/ReplaceProcessor.java`
#### Snippet
```java
 * RFC-8508: IMAP Replace extension
 *
 * https://www.rfc-editor.org/rfc/rfc8508.html
 */
public class ReplaceProcessor extends AbstractMailboxProcessor<ReplaceRequest> implements CapabilityImplementingProcessor {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/imap/src/main/java/org/apache/james/imap/processor/GetMetadataProcessor.java`
#### Snippet
```java
 * Support for RFC-5464 IMAP METADATA (GETMETADATA command)
 *
 * CF https://www.rfc-editor.org/rfc/rfc5464.html
 */
public class GetMetadataProcessor extends AbstractMailboxProcessor<GetMetadataRequest> implements CapabilityImplementingProcessor {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/container/core/src/main/java/org/apache/james/server/core/BufferedDeferredFileOutputStream.java`
#### Snippet
```java
  * it, here we wrap the file output stream with BufferedOutputStream.
  *
  * @link https://issues.apache.org/jira/browse/JAMES-2343
 */
public class BufferedDeferredFileOutputStream extends ThresholdingOutputStream implements Disposable {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/api/src/main/java/org/apache/james/protocols/api/OIDCSASLParser.java`
#### Snippet
```java

/**
 * https://datatracker.ietf.org/doc/rfc7628/
 */
public class OIDCSASLParser {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/AddHabeasWarrantMark.java`
#### Snippet
```java
/**
 * <p>This matcher adds the Hebeas Warrant Mark to a message.
 * For details see: http://www.hebeas.com</p>
 *
 * <p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/Expires.java`
#### Snippet
```java
 * will let you delete expired messages through the WebAdmin interface:
 * <code>
 * curl -XDELETE http://ip:port/messages?byExpiresHeader
 * </code>
 */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/standard/src/main/java/org/apache/james/transport/matchers/HasHabeasWarrantMark.java`
#### Snippet
```java
/**
 * <p>This matcher tests for the Hebeas Warrant Mark.
 * For details see: http://www.hebeas.com</p>
 *
 * <p>Usage: Place this matcher</p>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `mailet/base/src/main/java/org/apache/mailet/base/FlowedMessageUtils.java`
#### Snippet
```java
 * <p>As a reference see:</p>
 * <ul>
 * <li><a href='http://www.rfc-editor.org/rfc/rfc2646.txt'>RFC2646</a></li>
 * <li><a href='http://www.rfc-editor.org/rfc/rfc3676.txt'>RFC3676</a> (new method with DelSP support).
 * </ul>
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/managesieve/src/main/java/org/apache/james/managesieve/core/PlainAuthenticationProcessor.java`
#### Snippet
```java

/**
 * See RFC-4616 : https://tools.ietf.org/html/rfc4616
 *
 * Only differences is that ManageSieve does not handle tags. See https://tools.ietf.org/html/rfc5804#section-2.1 for details
```

### JavadocLinkAsPlainText
Link specified as plain text
in `protocols/managesieve/src/main/java/org/apache/james/managesieve/core/PlainAuthenticationProcessor.java`
#### Snippet
```java
 * See RFC-4616 : https://tools.ietf.org/html/rfc4616
 *
 * Only differences is that ManageSieve does not handle tags. See https://tools.ietf.org/html/rfc5804#section-2.1 for details
 */
public class PlainAuthenticationProcessor implements AuthenticationProcessor {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraBlobStoreModule.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/JAMES-3767
 *
 * Cassandra APP will be removed after 3.8.0 release.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreModulesChooser.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/JAMES-3767
 *
 * Cassandra APP will be removed after 3.8.0 release.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/apps/cassandra-app/src/main/java/org/apache/james/BlobStoreConfiguration.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/JAMES-3767
 *
 * Cassandra APP will be removed after 3.8.0 release.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerMain.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/JAMES-3767
 *
 * Cassandra APP will be removed after 3.8.0 release.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java

/**
 * See https://issues.apache.org/jira/browse/JAMES-3767
 *
 * Cassandra APP will be removed after 3.8.0 release.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/introspection/TokenIntrospectionResponse.java`
#### Snippet
```java

/**
 * https://datatracker.ietf.org/doc/html/rfc7662#section-2.2
 */
public class TokenIntrospectionResponse {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/utils/LockLessConcurrencyLimitingRequestThrottler.java`
#### Snippet
```java
 * implemented in a lock free maner in order to prevent lock contention in reactive pipelines.
 *
 * See https://datastax-oss.atlassian.net/browse/JAVA-3024
 *
 * James can be configured to rely on this throttler if need be.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MessageInputStream.java`
#### Snippet
```java
 * <strong>Note</strong>: Javamail (or the Activation Framework) already uses a
 * worker thread when asked for an inputstream.
 * @Deprecated Will be dropped in 3.9.0. See https://www.mail-archive.com/server-dev@james.apache.org/msg72460.html
 */
@Deprecated
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/MimeMessageJDBCSource.java`
#### Snippet
```java
 * InputStream to the JDBC field/record, possibly sequenced with the file
 * stream.
 * @Deprecated Will be dropped in 3.9.0. See https://www.mail-archive.com/server-dev@james.apache.org/msg72460.html
 */
@Deprecated
```

### JavadocLinkAsPlainText
Link specified as plain text
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
/**
 * Implementation of a MailRepository on a database.
 * @Deprecated Will be dropped in 3.9.0. See https://www.mail-archive.com/server-dev@james.apache.org/msg72460.html
 */
@Deprecated
```

## RuleId[id=FieldCanBeLocal]
### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/smtp/core/src/main/java/org/apache/james/mpt/smtp/SmtpAuthCommandTest.java`
#### Snippet
```java
    protected abstract SmtpHostSystem createSmtpHostSystem();
    
    private SmtpHostSystem hostSystem;
    private SimpleScriptedTestProtocol scriptedTest;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/smtp/core/src/main/java/org/apache/james/mpt/smtp/SmtpTestExtension.java`
#### Snippet
```java

        private final ExternalSessionFactory sessionFactory;
        private final SmtpGuiceProbe.SmtpServerConnectedType smtpServerConnectedType;
        private final GuiceJamesServer jamesServer;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/SMTPConfigurationImpl.java`
#### Snippet
```java
 */
public class SMTPConfigurationImpl extends ProtocolConfigurationImpl implements SMTPConfiguration {
    private final long maxMessageSize = 0;
    private boolean bracketsEnforcement = true;
    private boolean enforceHeloEhlo = true;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/JPAProperty.java`
#### Snippet
```java
    @Column(name = "PROPERTY_LINE_NUMBER", nullable = false)
    @Index(name = "INDEX_PROPERTY_LINE_NUMBER")
    private int line;

    /** Local part of the name of this property */
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/model/MaxDomainStorage.java`
#### Snippet
```java
    @Id
    @Column(name = "DOMAIN")
    private String domain;

    @Column(name = "VALUE", nullable = true)
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/model/MaxUserStorage.java`
#### Snippet
```java
    @Id
    @Column(name = "QUOTAROOT_ID")
    private String quotaRoot;

    @Column(name = "VALUE", nullable = true)
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/model/MaxGlobalMessageCount.java`
#### Snippet
```java
    @Id
    @Column(name = "QUOTAROOT_ID")
    private String quotaRoot = DEFAULT_KEY;

    @Column(name = "VALUE", nullable = true)
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/model/MaxGlobalStorage.java`
#### Snippet
```java
    @Id
    @Column(name = "QUOTAROOT_ID")
    private String quotaRoot = DEFAULT_KEY;

    @Column(name = "VALUE", nullable = true)
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/model/MaxDomainMessageCount.java`
#### Snippet
```java
    @Id
    @Column(name = "DOMAIN")
    private String domain;

    @Column(name = "VALUE", nullable = true)
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/model/MaxUserMessageCount.java`
#### Snippet
```java
    @Id
    @Column(name = "QUOTAROOT_ID")
    private String quotaRoot;

    @Column(name = "VALUE", nullable = true)
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/jmx/MailProcessorManagement.java`
#### Snippet
```java
 */
public class MailProcessorManagement extends StandardMBean implements MailProcessorManagementMBean {
    private final String processorName;
    private final AtomicLong errorCount = new AtomicLong(0);
    private final AtomicLong successCount = new AtomicLong(0);
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ByteBufferOutputStream.java`
#### Snippet
```java
    private final Continuation continuation;
    private boolean matchPlus = false;
    private boolean matchCR = false;
    private boolean matchLF = false;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/StoreMessageResultIterator.java`
#### Snippet
```java
    private final Mailbox mailbox;
    private final FetchGroup group;
    private final MessageUid from;
    private MessageUid cursor;
    private final MessageUid to;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/container/util/src/main/java/org/apache/james/util/io/UnsynchronizedBufferedInputStream.java`
#### Snippet
```java
public class UnsynchronizedBufferedInputStream extends FilterInputStream {
    private static int DEFAULT_BUFFER_SIZE = 8192;
    private static int MAX_BUFFER_SIZE = 2147483639;
    protected byte[] buf;
    protected int count;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/container/util/src/main/java/org/apache/james/util/concurrency/ConcurrentTestRunner.java`
#### Snippet
```java
        private final ConcurrentOperation concurrentOperation;
        private final boolean noErrorLogs;
        private Exception exception;

        public ConcurrentRunnableTask(int threadNumber, ConcurrentOperation concurrentOperation, boolean noErrorLogs) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/SPF.java`
#### Snippet
```java
    private static final org.slf4j.Logger LOGGER = LoggerFactory.getLogger(SPF.class);

    private boolean debug = false;
    private boolean addHeader = false;
    private org.apache.james.jspf.impl.SPF spf;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
     * inboxes on this server.
     */
    private UsersRepository localusers;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/AbstractSQLWhitelistMatcher.java`
#### Snippet
```java
     * inboxes on this server.
     */
    private UsersRepository localusers;

    protected DataSource datasource;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/data/data-jpa/src/main/java/org/apache/james/sieve/jpa/model/JPASieveScript.java`
#### Snippet
```java
        private long scriptSize;
        private boolean isActive;
        private OffsetDateTime activationDateTime;

        public Builder username(String username) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/data/data-jpa/src/main/java/org/apache/james/domainlist/jpa/model/JPADomain.java`
#### Snippet
```java
    @Id
    @Column(name = "DOMAIN_NAME", nullable = false, length = 100)
    private String name;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/data/data-library/src/main/java/org/apache/james/user/lib/UsersRepositoryImpl.java`
#### Snippet
```java
public class UsersRepositoryImpl<T extends UsersDAO> implements UsersRepository, Configurable {
    public static final org.slf4j.Logger LOGGER = LoggerFactory.getLogger(UsersRepositoryImpl.class);
    private static String ILLEGAL_USERNAME_CHARACTERS = "\"(),:; <>@[\\]";

    private final DomainList domainList;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `protocols/imap/src/main/java/org/apache/james/imap/processor/SystemMessageProcessor.java`
#### Snippet
```java
    private static final Logger LOGGER = LoggerFactory.getLogger(SystemMessageProcessor.class);

    private final MailboxManager mailboxManager;

    @Inject
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/MailboxNamespace.java`
#### Snippet
```java

        @SuppressWarnings("unused")
        private final String type;

        Type(String type) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataViewFactory.java`
#### Snippet
```java
public class MessageMetadataViewFactory implements MessageViewFactory<MessageMetadataView> {

    private final BlobManager blobManager;
    private final MessageIdManager messageIdManager;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderViewFactory.java`
#### Snippet
```java

public class MessageHeaderViewFactory implements MessageViewFactory<MessageHeaderView> {
    private final BlobManager blobManager;
    private final MessageIdManager messageIdManager;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastViewFactory.java`
#### Snippet
```java
    private static class FromMessageResultAndPreview implements Helpers.FromMessageResult<MessageFastView> {

        private final BlobManager blobManager;
        private final Map<MessageId, MessageFastViewPrecomputedProperties> fastProjections;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullViewFactory.java`
#### Snippet
```java
    private static final Logger LOGGER = LoggerFactory.getLogger(MessageFullViewFactory.class);

    private final BlobManager blobManager;
    private final MessageContentExtractor messageContentExtractor;
    private final HtmlTextExtractor htmlTextExtractor;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/UidSearch.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/NonAuthenticatedState.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ObjectId.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/FetchBodyStructure.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ConcurrentSessions.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Recent.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Copy.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/UidSearchOnIndex.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Expunge.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/AuthenticatePlain.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private ImapScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ACLCommands.java`
#### Snippet
```java
    
    private ImapHostSystem system;
    private GrantRightsOnHost grantRightsOnHost;

    private MailboxACL.Rfc4314Rights readWriteSeenRight;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ACLCommands.java`
#### Snippet
```java
    protected abstract GrantRightsOnHost createGrantRightsOnHost();
    
    private ImapHostSystem system;
    private GrantRightsOnHost grantRightsOnHost;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/FetchBodySection.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Fetch.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    protected SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ListingWithSharingTest.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();

    private ImapHostSystem system;
    private ImapScriptedTestProtocol scriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Security.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/FetchHeaders.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/PartialFetch.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Select.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Events.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/Rename.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ACLIntegration.java`
#### Snippet
```java
    private ImapHostSystem system;
    private GrantRightsOnHost grantRightsOnHost;
    private MailboxMessageAppender mailboxMessageAppender;

    private ACLScriptedTestProtocol scriptedTestProtocol;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ACLIntegration.java`
#### Snippet
```java
    
    private ImapHostSystem system;
    private GrantRightsOnHost grantRightsOnHost;
    private MailboxMessageAppender mailboxMessageAppender;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ACLIntegration.java`
#### Snippet
```java
    protected abstract MailboxMessageAppender createMailboxMessageAppender();
    
    private ImapHostSystem system;
    private GrantRightsOnHost grantRightsOnHost;
    private MailboxMessageAppender mailboxMessageAppender;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/SelectedState.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/SelectedInbox.java`
#### Snippet
```java
    protected abstract ImapHostSystem createImapHostSystem();
    
    private ImapHostSystem system;
    private SimpleScriptedTestProtocol simpleScriptedTestProtocol;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaHttpClientImpl.java`
#### Snippet
```java
    private static final String RECURSIVE_METADATA_AS_TEXT_ENDPOINT = "/rmeta/text";

    private final TikaConfiguration tikaConfiguration;
    private final URI recursiveMetaData;
    private final HttpClient httpClient;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/ClientProvider.java`
#### Snippet
```java
    private final OpenSearchConfiguration configuration;
    private final RestClient lowLevelRestClient;
    private final OpenSearchAsyncClient openSearchClient;
    private final HttpAsyncClientConfigurer httpAsyncClientConfigurer;
    private final ReactorOpenSearchClient client;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/protocols/webadmin-integration-test/webadmin-integration-test-common/src/main/java/org/apache/james/webadmin/integration/QuotaSearchIntegrationTest.java`
#### Snippet
```java
public abstract class QuotaSearchIntegrationTest {
    private RequestSpecification webAdminApi;
    private Port jmapPort;

    protected abstract void awaitSearchUpToDate() throws Exception;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
    private DataSource datasource;

    private String datasourceName;

    @VisibleForTesting
```

## RuleId[id=MalformedFormatString]
### MalformedFormatString
Illegal format string specifier: unknown conversion in '%l'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/MinimalCopyBytesResponseTransformer.java`
#### Snippet
```java

        if (exceedMaximumSize) {
            throw new IllegalArgumentException(String.format("%s blob of %l size exceed maximum size allowed for in memory reads (%l)",
                blobId.asString(), response.contentLength(), configuration.getInMemoryReadLimit().orElse(-1L)));
        }
```

## RuleId[id=ThrowFromFinallyBlock]
### ThrowFromFinallyBlock
`throw` inside 'finally' block
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/DKIMVerifier.java`
#### Snippet
```java
                }
            } catch (IOException e) {
                throw new MessagingException("Exception calculating bodyhash: "
                        + e.getMessage(), e);
            }
```

### ThrowFromFinallyBlock
`throw` inside 'finally' block
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/DKIMSign.java`
#### Snippet
```java
                    bhj.getOutputStream().close();
                } catch (IOException e) {
                    throw new MessagingException("Exception calculating bodyhash: " + e.getMessage(), e);
                }
            }
```

## RuleId[id=IfStatementWithIdenticalBranches]
### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/IncrementalRuleChange.java`
#### Snippet
```java
            Rule.Id id = idsAfterList.get(position);
            if (inPrepended) {
                if (commonElements.contains(id)) {
                    inPrepended = false;
                    inCommonSection = true;
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
                break;
            }
            if (address.charAt(pos) == '\\') {
                lpSB.append('\\');
                pos++;
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/ImapRequestFrameDecoder.java`
#### Snippet
```java
                // check if we have a inMemorySize limit and if so if the
                // expected size will fit into it
                if (inMemorySizeLimit > 0 && inMemorySizeLimit < size) {

                    // ok seems like it will not fit in the memory limit so we
```

### IfStatementWithIdenticalBranches
'if' statement can be collapsed
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/jackson/JacksonJsonProvider.java`
#### Snippet
```java
    @Override
    public JsonParserFactory createParserFactory(Map<String, ?> config) {
        if (config == null || config.isEmpty()) {
            return defaultParserFactory;
        } else {
```

### IfStatementWithIdenticalBranches
'if' statement can be collapsed
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/jackson/JacksonJsonProvider.java`
#### Snippet
```java
    @Override
    public JsonGeneratorFactory createGeneratorFactory(Map<String, ?> config) {
        if (config == null || config.isEmpty()) {
            return defaultGeneratorFactory;
        } else {
```

## RuleId[id=SimplifyOptionalCallChains]
### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/ReceivedDataLineFilter.java`
#### Snippet
```java
    @Override
    protected Response onHeadersLine(SMTPSession session, byte[] line, LineHandler<SMTPSession> next) {
        if (getLocation() == Location.PREFIX && !session.getAttachment(headersPrefixAdded, State.Transaction).isPresent()) {
            session.setAttachment(headersPrefixAdded, Boolean.TRUE, State.Transaction);
            return addHeaders(session, line, next);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/ReceivedDataLineFilter.java`
#### Snippet
```java
    @Override
    protected Response onSeparatorLine(SMTPSession session, byte[] line, LineHandler<SMTPSession> next) {
        if (getLocation() == Location.SUFFIX && !session.getAttachment(headersSuffixAdded, State.Transaction).isPresent()) {
            session.setAttachment(headersSuffixAdded, Boolean.TRUE, State.Transaction);
            return addHeaders(session, line, next);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/DataCmdHandler.java`
#### Snippet
```java
            return UNEXPECTED_ARG;
        }
        if (!session.getAttachment(SMTPSession.SENDER, ProtocolSession.State.Transaction).isPresent()) {
            return NO_SENDER;
        } else if (!session.getAttachment(SMTPSession.RCPT_LIST, ProtocolSession.State.Transaction).isPresent()) {
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/DataCmdHandler.java`
#### Snippet
```java
        if (!session.getAttachment(SMTPSession.SENDER, ProtocolSession.State.Transaction).isPresent()) {
            return NO_SENDER;
        } else if (!session.getAttachment(SMTPSession.RCPT_LIST, ProtocolSession.State.Transaction).isPresent()) {
            return NO_RECIPIENT;
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/MailCmdHandler.java`
#### Snippet
```java
            return SENDER_ALREADY_SPECIFIED;
        } else if (!session.getAttachment(
                SMTPSession.CURRENT_HELO_MODE, State.Connection).isPresent()
                && session.getConfiguration().useHeloEhloEnforcement()) {
            return EHLO_HELO_NEEDED;
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/RcptCmdHandler.java`
#### Snippet
```java
            argument = argument.substring(0, colonIndex);
        }
        if (!session.getAttachment(SMTPSession.SENDER, State.Transaction).isPresent()) {
            return MAIL_NEEDED;
        } else if (argument == null
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/data/data-memory/src/main/java/org/apache/james/sieverepository/memory/InMemorySieveQuotaRepository.java`
#### Snippet
```java
    public synchronized void removeQuota(Username username) throws QuotaNotFoundException {
        Optional<QuotaSizeLimit> quotaValue = Optional.ofNullable(userQuota.get(username));
        if (!quotaValue.isPresent()) {
            throw new QuotaNotFoundException();
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/data/data-memory/src/main/java/org/apache/james/sieverepository/memory/InMemorySieveQuotaRepository.java`
#### Snippet
```java
    @Override
    public synchronized void removeQuota() throws QuotaNotFoundException {
        if (!globalQuota.isPresent()) {
            throw new QuotaNotFoundException();
        }
```

### SimplifyOptionalCallChains
Optional chain can be simplified
in `core/src/main/java/org/apache/james/core/MaybeSender.java`
#### Snippet
```java

    public Stream<MailAddress> asStream() {
        return mailAddress.map(Stream::of).orElse(Stream.of());
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `core/src/main/java/org/apache/james/core/MaybeSender.java`
#### Snippet
```java

    public boolean isNullSender() {
        return !mailAddress.isPresent();
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/jpa-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQMailQueueItem.java`
#### Snippet
```java
        super.done(success);
        if (success == CompletionStatus.SUCCESS) {
            if (message instanceof ActiveMQBlobMessage && !getMail().getAttribute(JAMES_REUSE_BLOB_URL).isPresent()) {

                // This should get removed once this jira issue was fixed
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/distributed-app/src/main/java/org/apache/james/CassandraRabbitMQJamesConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/distributed-pop3-app/src/main/java/org/apache/james/DistributedPOP3JamesConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/ICALToJsonAttribute.java`
#### Snippet
```java
        Calendar calendar = entry.getValue().getValue();
        Optional<byte[]> rawICal = Optional.ofNullable(rawCalendars.get(entry.getKey())).map(AttributeValue::getValue);
        if (!rawICal.isPresent()) {
            LOGGER.debug("Cannot find matching raw ICAL from key: {}", entry.getKey());
            return Stream.of();
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/ICALToJsonAttribute.java`
#### Snippet
```java
    private void setAttribute(Mail mail, Map<String, AttributeValue<Calendar>> calendars, Map<String, AttributeValue<byte[]>> rawCalendars) throws MessagingException {
        Optional<MailAddress> sender = retrieveSender(mail);
        if (!sender.isPresent()) {
            LOGGER.info("Skipping {} because no sender and no from", mail.getName());
            return;
```

### SimplifyOptionalCallChains
Optional chain can be simplified
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/matchers/Or.java`
#### Snippet
```java
        return Optional.ofNullable(matcher.match(mail))
            .map(Collection::stream)
            .orElse(Stream.of());
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/blob/BlobStoreDeletedMessageVault.java`
#### Snippet
```java
        Optional<ZonedDateTime> maybeEndDate = nameGenerator.bucketEndTime(bucketName);

        if (!maybeEndDate.isPresent()) {
            LOGGER.error("Pattern used for bucketName used in deletedMessageVault is invalid and end date cannot be parsed {}", bucketName);
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/AbstractApopCmdHandler.java`
#### Snippet
```java
    @Override
    public Response onCommand(POP3Session session, Request request) {
        if (!session.getAttachment(POP3Session.APOP_TIMESTAMP, State.Connection).isPresent()) {
            // APOP timestamp was not found in the session so APOP is not supported
            return POP3Response.ERR;
```

### SimplifyOptionalCallChains
Optional chain can be simplified
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java
        return array
            .map(Arrays::stream)
            .orElse(Stream.empty());
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/container/util/src/main/java/org/apache/james/util/OptionalUtils.java`
#### Snippet
```java

    public static <T> Optional<T> executeIfEmpty(Optional<T> optional, Operation operation) {
        if (!optional.isPresent()) {
            operation.perform();
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/container/util/src/main/java/org/apache/james/util/streams/Limit.java`
#### Snippet
```java

    public boolean isUnlimited() {
        return !limit.isPresent();
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mpt/mavenplugin/src/main/java/org/apache/james/mpt/maven/MailProtocolTest.java`
#### Snippet
```java
            }

            if (! addUser.getPort().isPresent()) {
                throw new MojoFailureException("'port' attribute must be set on AddUser to the port against which the script should run.");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxAnnotation.java`
#### Snippet
```java

    public boolean isNil() {
        return !value.isPresent();
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

        public Builder namespace(String namespace) {
            Preconditions.checkState(!this.namespace.isPresent());

            this.namespace = Optional.of(namespace);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
        
        public Builder userAndNamespaceFrom(MailboxPath base) {
            Preconditions.checkState(!this.namespace.isPresent());
            Preconditions.checkState(!this.username.isPresent());

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java
        public Builder userAndNamespaceFrom(MailboxPath base) {
            Preconditions.checkState(!this.namespace.isPresent());
            Preconditions.checkState(!this.username.isPresent());

            this.namespace = Optional.ofNullable(base.getNamespace());
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

        public Builder username(Username username) {
            Preconditions.checkState(!this.username.isPresent());

            this.username = Optional.of(username);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

        public Builder privateNamespace() {
            Preconditions.checkState(!this.namespace.isPresent());

            this.namespace = Optional.of(MailboxConstants.USER_NAMESPACE);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/SPFHandler.java`
#### Snippet
```java

        // We have no Sender or HELO/EHLO yet return false
        if (sender.isNullSender() || !heloEhlo.isPresent()) {
            LOGGER.info("No Sender or HELO/EHLO present");
        } else {
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/Resend.java`
#### Snippet
```java
    public Optional<MailAddress> getReplyTo() throws MessagingException {
        Optional<String> replyTo = getInitParameters().getReplyTo();
        if (!replyTo.isPresent()) {
            return Optional.empty();
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/ToSenderDomainRepository.java`
#### Snippet
```java
        try {
            Optional<MailRepository> mailRepository = retrieveRepository(url);
            if (!mailRepository.isPresent()) {
                LOGGER.warn("'{}' mail repository does not exist and will not be created. Mail {} will not be stored in it.",
                    url, mail.getName());
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/AddressExtractor.java`
#### Snippet
```java

    private List<MailAddress> extract(Optional<String> maybeAddressList) throws MessagingException {
        if (!maybeAddressList.isPresent()) {
            return ImmutableList.of();
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/data/data-jpa/src/main/java/org/apache/james/sieve/jpa/JPASieveRepository.java`
#### Snippet
```java
        transactionRunner.runAndHandleException(Throwing.<EntityManager>consumer(entityManager -> {
            Optional<JPASieveScript> sieveScript = findSieveScript(username, name, entityManager);
            if (!sieveScript.isPresent()) {
                rollbackTransactionIfActive(entityManager.getTransaction());
                throw new ScriptNotFoundException("Unable to find script " + name.getValue() + " for user " + username.asString());
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/data/data-jpa/src/main/java/org/apache/james/sieve/jpa/JPASieveRepository.java`
#### Snippet
```java
        transactionRunner.runAndHandleException(Throwing.<EntityManager>consumer(entityManager -> {
            Optional<JPASieveScript> sieveScript = findSieveScript(username, oldName, entityManager);
            if (!sieveScript.isPresent()) {
                rollbackTransactionIfActive(entityManager.getTransaction());
                throw new ScriptNotFoundException("Unable to find script " + oldName.getValue() + " for user " + username.asString());
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/authentication/JwtFilter.java`
#### Snippet
```java

    private void checkHeaderPresent(Optional<String> bearer) {
        if (!bearer.isPresent()) {
            halt(HttpStatus.UNAUTHORIZED_401, "No Bearer header.");
        }
```

### SimplifyOptionalCallChains
Optional chain can be simplified
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/MailReferenceDTO.java`
#### Snippet
```java
            mailReference.getEnqueueId().serialize(),
            Optional.ofNullable(mail.getRecipients()).map(Collection::stream)
                .orElse(Stream.empty())
                .map(MailAddress::asString)
                .collect(ImmutableList.toImmutableList()),
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/data/data-library/src/main/java/org/apache/james/rrt/lib/AbstractRecipientRewriteTable.java`
#### Snippet
```java

    private void checkHasValidAddress(Mapping mapping) throws RecipientRewriteTableException {
        if (!mapping.asMailAddress().isPresent()) {
            throw new RecipientRewriteTableException("Invalid emailAddress: " + mapping.asString());
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/GetMetadataRequest.java`
#### Snippet
```java

        private boolean isNoMaxsize() {
            return !maxsize.isPresent();
        }
    }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
        if (highVal != Long.MAX_VALUE) {
            uid = selected.uid((int) highVal);
            if (!uid.isPresent()) {
                throw new MessageRangeException("No message found with msn " + highVal);
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
        } else {
            uid = selected.getLastUid();
            if (!uid.isPresent()) {
                throw new MessageRangeException("Mailbox is empty");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
        if (lowVal != Long.MIN_VALUE) {
            uid = selected.uid((int) lowVal);
            if (!uid.isPresent()) {
                throw new MessageRangeException("No message found with msn " + lowVal);
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
        } else {
            uid = selected.getFirstUid();
            if (!uid.isPresent()) {
                throw new MessageRangeException("Mailbox is empty");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractMailboxProcessor.java`
#### Snippet
```java
        if (lowVal == Long.MAX_VALUE && highVal == Long.MAX_VALUE) {
            Optional<MessageUid> last = selected.getLastUid();
            if (!last.isPresent()) {
                throw new MessageRangeException("Mailbox is empty");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/SearchProcessor.java`
#### Snippet
```java
                        if (highVal != Long.MAX_VALUE) {
                            highUid = selected.uid((int) highVal);
                            if (!highUid.isPresent()) {
                                // we requested a message with a MSN higher
                                // then
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/container/core/src/main/java/org/apache/james/server/core/configuration/Configuration.java`
#### Snippet
```java
            public Builder useWorkingDirectoryEnvProperty() {
                rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
                if (!rootDirectory.isPresent()) {
                    throw new MissingArgumentException("Server needs a working.directory env entry");
                }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/send/PostDequeueDecorator.java`
#### Snippet
```java
            MessageId messageId = messageIdFactory.fromString((String) optionalRawMessageId.get());
            Optional<String> username = retrieveUsername();
            if (!getMail().getAttribute(IS_DELIVERED.getName()).isPresent()) {
                try {
                    MailboxSession mailboxSession = mailboxManager.createSystemSession(Username.of(username.get()));
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java

    public boolean isOnlyAFlagUpdate() {
        return !mailboxIds.isPresent() && (oldKeywords.isPresent() || keywords.isPresent());
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java

    public boolean isFlagsIdentity() {
        return !oldKeywords.isPresent() && !keywords.isPresent();
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/UpdateMessagePatch.java`
#### Snippet
```java

    public boolean isFlagsIdentity() {
        return !oldKeywords.isPresent() && !keywords.isPresent();
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/Keywords.java`
#### Snippet
```java
            ToKeyword LENIENT = value -> {
                Optional<Keyword> result = Keyword.parse(value);
                if (!result.isPresent()) {
                    LOGGER.warn("Fail to parse {} flag", value);
                }
```

### SimplifyOptionalCallChains
Unnecessary Optional rewrapping
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
            int atIndex = email.get().indexOf('@');
            if (atIndex < 0 || atIndex == email.get().length() - 1) {
                return new EmailUserAndDomain(Optional.of(email.get()), Optional.empty());
            }
            String user = email.get().substring(0, atIndex);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java
                .message("'from' address is mandatory")
                .build();
        if (!from.isPresent()) {
            errors.add(invalidPropertyFrom);
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java

        public FilterCondition build() {
            Preconditions.checkArgument(!hasKeyword.isPresent() || (Keyword.of(hasKeyword.get()) != null), "hasKeyword is not valid");
            Preconditions.checkArgument(!notKeyword.isPresent() || (Keyword.of(notKeyword.get()) != null), "notKeyword is not valid");
            return new FilterCondition(inMailboxes, notInMailboxes, Optional.ofNullable(before), Optional.ofNullable(after), Optional.ofNullable(minSize), Optional.ofNullable(maxSize),
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
        public FilterCondition build() {
            Preconditions.checkArgument(!hasKeyword.isPresent() || (Keyword.of(hasKeyword.get()) != null), "hasKeyword is not valid");
            Preconditions.checkArgument(!notKeyword.isPresent() || (Keyword.of(notKeyword.get()) != null), "notKeyword is not valid");
            return new FilterCondition(inMailboxes, notInMailboxes, Optional.ofNullable(before), Optional.ofNullable(after), Optional.ofNullable(minSize), Optional.ofNullable(maxSize),
                    Optional.ofNullable(isFlagged), Optional.ofNullable(isUnread), Optional.ofNullable(isAnswered), Optional.ofNullable(isDraft), Optional.ofNullable(isForwarded),
```

### SimplifyOptionalCallChains
Folded 'ifPresent()' call can be eliminated
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/FilterToCriteria.java`
#### Snippet
```java
        filter.getMinSize().ifPresent(minSize -> builder.add(SearchQuery.sizeGreaterThan(minSize.asLong())));
        filter.getHasAttachment().ifPresent(hasAttachment -> builder.add(SearchQuery.hasAttachment(hasAttachment)));
        filter.getHasKeyword().ifPresent(hasKeyword -> keywordQuery(hasKeyword, true).ifPresent(builder::add));
        filter.getNotKeyword().ifPresent(notKeyword -> keywordQuery(notKeyword, false).ifPresent(builder::add));
        filter.getAttachmentFileName().ifPresent(attachmentFileName -> builder.add(SearchQuery.attachmentFileName(attachmentFileName)));
```

### SimplifyOptionalCallChains
Folded 'ifPresent()' call can be eliminated
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/FilterToCriteria.java`
#### Snippet
```java
        filter.getHasAttachment().ifPresent(hasAttachment -> builder.add(SearchQuery.hasAttachment(hasAttachment)));
        filter.getHasKeyword().ifPresent(hasKeyword -> keywordQuery(hasKeyword, true).ifPresent(builder::add));
        filter.getNotKeyword().ifPresent(notKeyword -> keywordQuery(notKeyword, false).ifPresent(builder::add));
        filter.getAttachmentFileName().ifPresent(attachmentFileName -> builder.add(SearchQuery.attachmentFileName(attachmentFileName)));

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java

    private void assertNotSharedOutboxOrDraftMailbox(Mailbox mailbox, MailboxUpdateRequest updateRequest) {
        Preconditions.checkArgument(!updateRequest.getSharedWith().isPresent() || !mailbox.hasRole(Role.OUTBOX), "Sharing 'Outbox' is forbidden");
        Preconditions.checkArgument(!updateRequest.getSharedWith().isPresent() || !mailbox.hasRole(Role.DRAFTS), "Sharing 'Draft' is forbidden");
    }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java
    private void assertNotSharedOutboxOrDraftMailbox(Mailbox mailbox, MailboxUpdateRequest updateRequest) {
        Preconditions.checkArgument(!updateRequest.getSharedWith().isPresent() || !mailbox.hasRole(Role.OUTBOX), "Sharing 'Outbox' is forbidden");
        Preconditions.checkArgument(!updateRequest.getSharedWith().isPresent() || !mailbox.hasRole(Role.DRAFTS), "Sharing 'Draft' is forbidden");
    }

```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/mailet/filter/ContentMatcher.java`
#### Snippet
```java
            return fullAddress.equalsIgnoreCase(other.fullAddress)
                || (sameAddress && samePersonal)
                || (sameAddress && !personal.isPresent())
                || (samePersonal && !address.isPresent())
                || (personalMatchesAddress && sameAddress)
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/mailet/filter/ContentMatcher.java`
#### Snippet
```java
                || (sameAddress && samePersonal)
                || (sameAddress && !personal.isPresent())
                || (samePersonal && !address.isPresent())
                || (personalMatchesAddress && sameAddress)
                || (addressMatchesPersonal && samePersonal);
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/AbstractSign.java`
#### Snippet
```java
        Optional<String> fetchedAuthUser = AttributeUtils.getValueAndCastFromMail(mail, Mail.SMTP_AUTH_USER, String.class);
        // was the sender user SMTP authorized?
        if (!fetchedAuthUser.isPresent()) {
            LOGGER.info("Can not sign mail for sender <{}> as he is not a SMTP authenticated user", mail.getMaybeSender().asString());
            return false;
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/memory-app/src/main/java/org/apache/james/MemoryJamesConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/mailet/mock-smtp-server/src/main/java/org/apache/james/mock/smtp/server/model/Operator.java`
#### Snippet
```java
        }),
        MATCH_ALL("matchAll", maybeMatchingValue -> {
            Preconditions.checkState(!maybeMatchingValue.isPresent(), "You should not specify a matchingValue with the matchAll operator");

            return new Condition.MatchAllCondition();
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/scaling-pulsar-smtp/src/main/java/org/apache/james/SMTPRelayConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZipEntryIterator.java`
#### Snippet
```java
    public ZipEntry next() {
        Optional<ZipEntry> current = next;
        if (!current.isPresent()) {
            return null;
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `server/apps/jpa-smtp-app/src/main/java/org/apache/james/JPAJamesConfiguration.java`
#### Snippet
```java
        public Builder useWorkingDirectoryEnvProperty() {
            rootDirectory = Optional.ofNullable(System.getProperty(WORKING_DIRECTORY));
            if (!rootDirectory.isPresent()) {
                throw new MissingArgumentException("Server needs a working.directory env entry");
            }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
            throw new ConfigurationException("You should choose between mono host set up and " + OPENSEARCH_HOSTS);
        }
        if (multiHosts.isEmpty() && !masterHost.isPresent()) {
            throw new ConfigurationException("You should specify either (" + OPENSEARCH_MASTER_HOST + " and " + OPENSEARCH_PORT + ") or " + OPENSEARCH_HOSTS);
        }
```

### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `mailbox/opensearch/src/main/java/org/apache/james/mailbox/opensearch/events/OpenSearchListeningMessageSearchIndex.java`
#### Snippet
```java

    private void logIfNoMessageId(SearchResult searchResult) {
        if (!searchResult.getMessageId().isPresent()) {
            LOGGER.error("No messageUid for {} in mailbox {}", searchResult.getMessageUid(), searchResult.getMailboxId());
        }
```

## RuleId[id=SlowListContainsAll]
### SlowListContainsAll
Call to 'list.containsAll(collection)' may have poor performance
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/ProtocolHandlerChainImpl.java`
#### Snippet
```java
    @Override
    public boolean containsAll(Collection<?> c) {
        return handlers.containsAll(c);
    }

```

## RuleId[id=SlowAbstractSetRemoveAll]
### SlowAbstractSetRemoveAll
Call to 'set.removeAll(list)' may work slowly
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/MailDelivrer.java`
#### Snippet
```java
                    }));

                targetAddresses.removeAll(deliveredAddresses);
            } catch (MessagingException me) {
                lastError = handleMessagingException(mail, me);
```

## RuleId[id=ConfusingMainMethod]
### ConfusingMainMethod
Method `main()` does not have signature 'public static void main(String\[\])'
in `server/container/guice/common/src/main/java/org/apache/james/JamesServerMain.java`
#### Snippet
```java
    Logger LOGGER = LoggerFactory.getLogger("org.apache.james.CONFIGURATION");

    static void main(GuiceJamesServer server) throws Exception {
        server.start();

```

## RuleId[id=RedundantStringFormatCall]
### RedundantStringFormatCall
Redundant call to `format()`
in `server/apps/cli/src/main/java/org/apache/james/cli/ServerCmd.java`
#### Snippet
```java

    private void printMessageQuota(String quotaRootString, SerializableQuota<QuotaCountLimit, QuotaCountUsage> quota, PrintStream printStream) {
        printStream.println(String.format("MailboxMessage count quota for %s is: %s / %s",
            quotaRootString,
            formatMessageValue(quota.getUsed()),
```

### RedundantStringFormatCall
Redundant call to `format()`
in `server/apps/cli/src/main/java/org/apache/james/cli/ServerCmd.java`
#### Snippet
```java

    private void printStorageQuota(String quotaRootString, SerializableQuota<QuotaSizeLimit, QuotaSizeUsage> quota, PrintStream printStream) {
        printStream.println(String.format("Storage quota for %s is: %s / %s",
            quotaRootString,
            formatStorageValue(quota.getUsed()),
```

## RuleId[id=PointlessNullCheck]
### PointlessNullCheck
Unnecessary 'null' check before 'isInstance()' call
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
    @SuppressWarnings("unchecked")
    private <U extends ParsedField> Optional<U> castField(Field field, Class<U> clazz) {
        if (field == null || !clazz.isInstance(field)) {
            return Optional.empty();
        }
```

## RuleId[id=OptionalGetWithoutIsPresent]
### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/ClearMailQueueTask.java`
#### Snippet
```java
        return Mono.justOrEmpty(queue)
            .flatMap(q -> Mono.from(q.getSizeReactive()))
            .map(remainingSize -> new AdditionalInformation(queueName, initialCount.get(), remainingSize, Clock.systemUTC().instant()));
    }
}
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTask.java`
#### Snippet
```java
            .map(remainingSize -> new AdditionalInformation(
                queueName,
                initialCount.get(),
                remainingSize, optionalSender,
                optionalName, optionalRecipient,
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/projections/MemoryEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.comparing(Entry::getSentAt).reversed())
            .map(Entry::getMessageId)
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/projections/MemoryEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.comparing(Entry::getReceivedAt).reversed())
            .map(Entry::getMessageId)
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/projections/MemoryEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.comparing(Entry::getSentAt).reversed())
            .map(Entry::getMessageId)
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/projections/MemoryEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.comparing(Entry::getReceivedAt).reversed())
            .map(Entry::getMessageId)
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/projections/MemoryEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.comparing(Entry::getReceivedAt).reversed())
            .map(Entry::getMessageId)
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/memory/projections/MemoryEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.comparing(Entry::getSentAt).reversed())
            .map(Entry::getMessageId)
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `core/src/main/java/org/apache/james/core/MaybeSender.java`
#### Snippet
```java

    public MailAddress get() throws NoSuchElementException {
        return mailAddress.get();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `core/src/main/java/org/apache/james/core/Username.java`
#### Snippet
```java
    public MailAddress asMailAddress() throws AddressException {
        Preconditions.checkState(hasDomainPart());
        return new MailAddress(localPart, domainPart.get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SimpleMessageSearchIndex.java`
#### Snippet
```java

    private Flux<MessageId> getAsMessageIds(Flux<? extends SearchResult> temp, long limit) {
        return temp.map(searchResult -> searchResult.getMessageId().get())
            .filter(SearchUtil.distinct())
            .take(Long.valueOf(limit).intValue());
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/Cid.java`
#### Snippet
```java
            .unwrap()
            .parse(value)
            .get();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxAnnotation.java`
#### Snippet
```java
            return 0;
        }
        return value.get().length();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

        public Username getFixedUser() {
            return user.get();
        }
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/search/MailboxQuery.java`
#### Snippet
```java

        public String getFixedNamespace() {
            return namespace.get();
        }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/mail/InMemoryAnnotationMapper.java`
#### Snippet
```java
        lock.writeLock().lock();
        try {
            mailboxesAnnotations.put((InMemoryId) mailboxId, mailboxAnnotation.getKey().asString(), mailboxAnnotation.getValue().get());
        } finally {
            lock.writeLock().unlock();
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
                .flags(composedMessageId.getFlags())
                .content(new ByteContent(headerContent))
                .size(size.get())
                .bodyStartOctet(Math.toIntExact(bodyStartOctet.get()))
                .internalDate(internalDate.get())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
                .content(new ByteContent(headerContent))
                .size(size.get())
                .bodyStartOctet(Math.toIntExact(bodyStartOctet.get()))
                .internalDate(internalDate.get())
                .saveDate(saveDate)
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
                .size(size.get())
                .bodyStartOctet(Math.toIntExact(bodyStartOctet.get()))
                .internalDate(internalDate.get())
                .saveDate(saveDate)
                .properties(new PropertyBuilder())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMetadata.java`
#### Snippet
```java
                .properties(new PropertyBuilder())
                .build(),
            getHeaderContent().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdMapper.java`
#### Snippet
```java
        }
        if (fetchType == FetchType.HEADERS && metadata.isComplete()) {
            return Mono.from(blobStore.readBytes(blobStore.getDefaultBucketName(), metadata.getHeaderContent().get(), SIZE_BASED))
                .map(metadata::asMailboxMessage);
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            .setBoolean(SEEN, flags.contains(Flag.SEEN))
            .setBoolean(USER, flags.contains(Flag.USER))
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString())
            .build());
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdDAO.java`
#### Snippet
```java
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString())
            .build());
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraAnnotationMapper.java`
#### Snippet
```java
            .setUuid(CassandraAnnotationTable.MAILBOX_ID, ((CassandraId) mailboxId).asUuid())
            .setString(CassandraAnnotationTable.KEY, mailboxAnnotation.getKey().asString())
            .setString(CassandraAnnotationTable.VALUE, mailboxAnnotation.getValue().get()));
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setBoolean(USER, flags.contains(Flag.USER))
            .setSet(USER_FLAGS, ImmutableSet.copyOf(flags.getUserFlags()), String.class)
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString()));
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString()));
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString()));
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setBoolean(SEEN, flags.contains(Flag.SEEN))
            .setBoolean(USER, flags.contains(Flag.USER))
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setInstant(INTERNAL_DATE, metadata.getInternalDate().get().toInstant())
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setInstant(SAVE_DATE, metadata.getSaveDate().map(Date::toInstant).orElse(null))
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString())
            .build());
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageIdToImapUidDAO.java`
#### Snippet
```java
            .setInt(BODY_START_OCTET, Math.toIntExact(metadata.getBodyStartOctet().get()))
            .setLong(FULL_CONTENT_OCTETS, metadata.getSize().get())
            .setString(HEADER_CONTENT, metadata.getHeaderContent().get().asString())
            .build());
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
        }
        if (fetchType == FetchType.HEADERS && metadata.isComplete()) {
            return Mono.from(blobStore.readBytes(blobStore.getDefaultBucketName(), metadata.getHeaderContent().get(), SIZE_BASED))
                .map(metadata::asMailboxMessage);
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/SPFHandler.java`
#### Snippet
```java
    public HookResult onMessage(SMTPSession session, Mail mail) {
        // Store the spf header as attribute for later using
        mail.setAttribute(new Attribute(SPF_HEADER_MAIL_ATTRIBUTE_NAME, AttributeValue.of(session.getAttachment(SPF_HEADER, State.Transaction).get())));

        return null;
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/TosUtils.java`
#### Snippet
```java
    private boolean containsOnlyUnalteredOrTo(List<InternetAddress> apparentlyTo) {
        return apparentlyTo.size() == 1 && 
                (apparentlyTo.get(0).equals(SpecialAddress.UNALTERED.toInternetAddress().get()) || apparentlyTo.get(0).equals(SpecialAddress.RECIPIENTS.toInternetAddress().get()));
    }
}
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/mailet/mailets/src/main/java/org/apache/james/transport/util/TosUtils.java`
#### Snippet
```java
    private boolean containsOnlyUnalteredOrTo(List<InternetAddress> apparentlyTo) {
        return apparentlyTo.size() == 1 && 
                (apparentlyTo.get(0).equals(SpecialAddress.UNALTERED.toInternetAddress().get()) || apparentlyTo.get(0).equals(SpecialAddress.RECIPIENTS.toInternetAddress().get()));
    }
}
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
    private static final ImmutableSet<String> CONFIGURABLE_PARAMETERS = ImmutableSet.of("debug", "passThrough", "messageString", "attachment", "sender", "prefix", "action", "defaultStatus");
    private static final List<MailAddress> RECIPIENT_MAIL_ADDRESSES = ImmutableList.of(SpecialAddress.REVERSE_PATH);
    private static final List<InternetAddress> TO_INTERNET_ADDRESSES = ImmutableList.of(SpecialAddress.REVERSE_PATH.toInternetAddress().get());

    private static final String LOCALHOST = "127.0.0.1";
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/SimpleMailStore.java`
#### Snippet
```java
                    metric.increment();
                    LOGGER.info("Local delivered mail {} with messageId {} successfully from {} to {} in folder {} with composedMessageId {}",
                        mail.getName(), getMessageId(mail), mail.getMaybeSender().asString(), recipient.asPrettyString(), storageDirective.getTargetFolders().get(), ids);
                })
                .then();
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailboxAppenderImpl.java`
#### Snippet
```java

        MailboxSession session = createMailboxSession(user);
        String urlPath = storageDirective.getTargetFolders().flatMap(collection -> collection.stream().findFirst()).get();
        String targetFolder = useSlashAsSeparator(urlPath, session);

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/delivery/MailboxAppenderImpl.java`
#### Snippet
```java
    // Avoids using the MessageIdManager for JPA compatibility
    private Mono<ComposedMessageId> copyToExtraMailboxes(StorageDirective storageDirective, MailboxSession session, String targetFolder, ComposedMessageId id) {
        Collection<String> folders = storageDirective.getTargetFolders().get();

        if (folders.size() > 1) {
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java
            .flatMap(Optional::stream)
            .min(Comparator.reverseOrder())
            .get();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/authentication/JwtFilter.java`
#### Snippet
```java

    private void checkIsAdmin(Optional<String> bearer) {
        if (!jwtTokenVerifier.hasAttribute("admin", true, bearer.get())) {
            halt(HttpStatus.UNAUTHORIZED_401, "Non authorized user.");
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/authentication/JwtFilter.java`
#### Snippet
```java

    private String retrieveUser(Optional<String> bearer) {
        return jwtTokenVerifier.verifyAndExtractLogin(bearer.get())
            .orElseThrow(() -> halt(HttpStatus.UNAUTHORIZED_401, "Invalid Bearer header."));
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-library/src/main/java/org/apache/james/user/lib/UsersRepositoryImpl.java`
#### Snippet
```java
                throw new InvalidUsernameException("Given Username needs to contain a @domainpart");
            } else {
                Domain domain = username.getDomainPart().get();
                try {
                    if (!domainList.containsDomain(domain)) {
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-library/src/main/java/org/apache/james/rrt/lib/AbstractRecipientRewriteTable.java`
#### Snippet
```java
        }

        Domain domain = username.getDomainPart().get();
        String localPart = username.getLocalPart();
        Stream<Mapping> targetMappings = mapAddress(localPart, domain).asStream()
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailet/api/src/main/java/org/apache/mailet/Serializer.java`
#### Snippet
```java
        @Override
        public T duplicate(T value) {
            return deserialize(serialize(value).get()).get();
        }
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailet/api/src/main/java/org/apache/mailet/Serializer.java`
#### Snippet
```java
        @Override
        public T duplicate(T value) {
            return deserialize(serialize(value).get()).get();
        }
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailet/api/src/main/java/org/apache/mailet/Serializer.java`
#### Snippet
```java
            ObjectNode serializedJson = JsonNodeFactory.instance.objectNode();
            serializedJson.put("deserializer", serialized.getDeserializer().getName());
            serializedJson.replace("value", serialized.getValue().toJson().get());
            return Optional.of(serializedJson);
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/container/guice/jmx/src/main/java/org/apache/james/modules/server/JmxConfiguration.java`
#### Snippet
```java
    public Host getHost() {
        Preconditions.checkState(isEnabled(), "Trying to access JMX host while JMX is not enabled");
        return host.get();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `protocols/imap/src/main/java/org/apache/james/imap/message/request/GetMetadataRequest.java`
#### Snippet
```java
        public GetMetadataRequest build() {
            Preconditions.checkState(isNoDepth() || isDepthAndKeysNotEmpty());
            Preconditions.checkArgument(isNoMaxsize() || maxsize.get() > 0);
            return new GetMetadataRequest(this);
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchResponseBuilder.java`
#### Snippet
```java

    private Iterator<Header> getMimeHeaders(MessageResult messageResult, Optional<MimePath> path) throws MailboxException {
        return messageResult.iterateMimeHeaders(path.get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/plugin/quota-mailing-cassandra/src/main/java/org/apache/james/mailbox/quota/cassandra/dto/HistoryEvolutionDTO.java`
#### Snippet
```java
        Optional<QuotaThresholdChange> quotaThresholdChange = threshold
            .map(QuotaThreshold::new)
            .map(value -> new QuotaThresholdChange(value, Instant.ofEpochMilli(instant.get())));

        return new HistoryEvolution(
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/container/guice/protocols/jmap/src/main/java/org/apache/james/jmap/draft/JmapConfigurationSanitizer.java`
#### Snippet
```java
    private boolean keystoreExists() {
        try {
            return fileSystem.getFile(jmapDraftConfiguration.getKeystore().get()).exists();
        } catch (FileNotFoundException e) {
            return false;
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/send/PostDequeueDecorator.java`
#### Snippet
```java
        if (success == CompletionStatus.SUCCESS && mandatoryJmapMetaDataIsPresent()) {
            Optional<?> optionalRawMessageId = retrieveMessageId();
            MessageId messageId = messageIdFactory.fromString((String) optionalRawMessageId.get());
            Optional<String> username = retrieveUsername();
            if (!getMail().getAttribute(IS_DELIVERED.getName()).isPresent()) {
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/send/PostDequeueDecorator.java`
#### Snippet
```java
            if (!getMail().getAttribute(IS_DELIVERED.getName()).isPresent()) {
                try {
                    MailboxSession mailboxSession = mailboxManager.createSystemSession(Username.of(username.get()));
                    moveFromOutboxToSentWithSeenFlag(messageId, mailboxSession);
                    getMail().setAttribute(IS_DELIVERED);
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/SetVacationResponse.java`
#### Snippet
```java
            return new SetVacationResponse(
                updatedId.map(ImmutableList::of),
                notUpdatedId.map(id -> ImmutableMap.of(id, setError.get())));
        }
    }
```

### OptionalGetWithoutIsPresent
`Optional::get` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/SortOrder.java`
#### Snippet
```java
        return role
                .map(SortOrder::getDefaultSortOrder)
                .map(Optional::get)
                .orElse(DEFAULT_SORT_ORDER);
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/MailboxFactory.java`
#### Snippet
```java
            return id.or(
                () -> mailboxMetaData.map(MailboxMetaData::getId))
                .get();
        }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/CreationMessage.java`
#### Snippet
```java

        public EmailUserAndDomain getEmailUserAndDomain() {
            int atIndex = email.get().indexOf('@');
            if (atIndex < 0 || atIndex == email.get().length() - 1) {
                return new EmailUserAndDomain(Optional.of(email.get()), Optional.empty());
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
                headers, from,
                to.build(), cc.build(), bcc.build(), replyTo.build(), subject, date, size, PreviewDTO.from(preview),
                keywords.orElse(Keywords.DEFAULT_VALUE), hasAttachment.get());
        }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFullView.java`
#### Snippet
```java

            return new MessageFullView(id, blobId, threadId, mailboxIds, Optional.ofNullable(inReplyToMessageId),
                hasAttachment.get(), headers, from,
                to.build(), cc.build(), bcc.build(), replyTo.build(), subject, date, size, PreviewDTO.from(preview), textBody, htmlBody, attachments, attachedMessages,
                keywords.orElse(Keywords.DEFAULT_VALUE));
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageViewFactory.java`
#### Snippet
```java
                .map(KEYWORDS_FACTORY::fromFlags)
                .reduce(KEYWORDS_COMBINER)
                .get();
        }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/quotas/QuotaLoaderWithDefaultPreloaded.java`
#### Snippet
```java
                Quotas.QuotaId quotaId = Quotas.QuotaId.fromQuotaRoot(quotaRoot);
                if (containsQuotaId(preloadedUserDefaultQuotas, quotaId)) {
                    return Mono.just(preloadedUserDefaultQuotas.get());
                }
                return defaultQuotaLoader.getQuotas(mailboxPath);
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/crypto/SecurityKeyLoader.java`
#### Snippet
```java
        try {
            X509Certificate certificate = PemUtils.loadCertificate(
                fileSystem.getResource(jmapDraftConfiguration.getCertificates().get()))
                .get(0);
            return certificate.getPublicKey();
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/crypto/SecurityKeyLoader.java`
#### Snippet
```java
            return certificate.getPublicKey();
        } catch (CertificateParseException e) {
            String publicKeyAsString = IOUtils.toString(fileSystem.getResource(jmapDraftConfiguration.getCertificates().get()), StandardCharsets.US_ASCII);
            return new PublicKeyReader()
                .fromPEM(publicKeyAsString)
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MessageAppender.java`
#### Snippet
```java

                if (maximumSizeExceeded(messageContent)) {
                    throw new SizeExceededException(messageContent.length, configuration.getMaximumSendSize().get());
                }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java
    private void validateParent(Mailbox mailbox, MailboxUpdateRequest updateRequest, MailboxSession mailboxSession) throws MailboxException, MailboxHasChildException {
        if (isParentIdInRequest(updateRequest)) {
            MailboxId newParentId = updateRequest.getParentId().get();
            MessageManager parent = retrieveParent(mailboxSession, newParentId);
            if (mustChangeParent(mailbox.getParentId(), newParentId)) {
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java

        if (nameContainsPathDelimiter(updateRequest, pathDelimiter)) {
            throw new MailboxNameException(String.format("The mailbox '%s' contains an illegal character: '%c'", updateRequest.getName().get(), pathDelimiter));
        }
        if (nameMatchesSystemMailbox(updateRequest)) {
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMailboxesUpdateProcessor.java`
#### Snippet
```java
        }
        if (nameMatchesSystemMailbox(updateRequest)) {
            throw new MailboxNameException(String.format("The mailbox '%s' is a system mailbox.", updateRequest.getName().get()));
        }
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
            }
        } catch (IOException e) {
            LOGGER.error("Error while creating textBody \n{}\n or htmlBody \n{}", newMessage.getTextBody().get(), newMessage.getHtmlBody().get(), e);
            throw new RuntimeException(e);
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
            }
        } catch (IOException e) {
            LOGGER.error("Error while creating textBody \n{}\n or htmlBody \n{}", newMessage.getTextBody().get(), newMessage.getHtmlBody().get(), e);
            throw new RuntimeException(e);
        }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesUpdateProcessor.java`
#### Snippet
```java
                    .collect(ImmutableList.toImmutableList());
                try {
                    MailboxId targetId = mailboxIdFactory.fromString(patch.getMailboxIds().get().iterator().next());
                    mailboxManager.moveMessages(range, mailboxId, targetId, mailboxSession);
                    return SetMessagesResponse.builder().updated(messageIds);
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java

        if (isListingContentInMailboxQuery(messageListRequest)) {
            Filter filter = messageListRequest.getFilter().get();
            FilterCondition condition = (FilterCondition) filter;
            String mailboxIdAsString = condition.getInMailboxes().get().iterator().next();
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java
            Filter filter = messageListRequest.getFilter().get();
            FilterCondition condition = (FilterCondition) filter;
            String mailboxIdAsString = condition.getInMailboxes().get().iterator().next();
            MailboxId mailboxId = mailboxIdFactory.fromString(mailboxIdAsString);
            Limit aLimit = Limit.from(Math.toIntExact(limit));
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java
        }
        if (isListingContentInMailboxAfterQuery(messageListRequest)) {
            Filter filter = messageListRequest.getFilter().get();
            FilterCondition condition = (FilterCondition) filter;
            String mailboxIdAsString = condition.getInMailboxes().get().iterator().next();
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java
            Filter filter = messageListRequest.getFilter().get();
            FilterCondition condition = (FilterCondition) filter;
            String mailboxIdAsString = condition.getInMailboxes().get().iterator().next();
            MailboxId mailboxId = mailboxIdFactory.fromString(mailboxIdAsString);
            ZonedDateTime after = condition.getAfter().get();
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/GetMessageListMethod.java`
#### Snippet
```java
            String mailboxIdAsString = condition.getInMailboxes().get().iterator().next();
            MailboxId mailboxId = mailboxIdFactory.fromString(mailboxIdAsString);
            ZonedDateTime after = condition.getAfter().get();
            Limit aLimit = Limit.from(Math.toIntExact(limit));

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ToProcessor.java`
#### Snippet
```java
    private void setNoticeInErrorMessage(Mail mail) {
        if (mail.getErrorMessage() == null) {
            mail.setErrorMessage(noticeText.get());
        } else {
            mail.setErrorMessage(String.format("%s\r\n%s", mail.getErrorMessage(), noticeText.get()));
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ToProcessor.java`
#### Snippet
```java
            mail.setErrorMessage(noticeText.get());
        } else {
            mail.setErrorMessage(String.format("%s\r\n%s", mail.getErrorMessage(), noticeText.get()));
        }
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/ConfigurationProbe.java`
#### Snippet
```java

    public int getCopyBatchSize() {
        return configuration.getBatchSizes().getCopyBatchSize().get();
    }
}
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/container/guice/mailbox/src/main/java/org/apache/james/modules/ConfigurationProbe.java`
#### Snippet
```java

    public int getMoveBatchSize() {
        return configuration.getBatchSizes().getMoveBatchSize().get();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailet/base/src/main/java/org/apache/mailet/base/MailetUtil.java`
#### Snippet
```java
            .map(Throwing.<String, Integer>function(MailetUtil::tryParseInteger).sneakyThrow())
            .or(() -> defaultValue)
            .get();
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZippedMailAccountIterator.java`
#### Snippet
```java

    private MailArchiveEntry fromMailboxEntry(ZipEntry current) throws ZipException {
        return new MailboxWithAnnotationsArchiveEntry(getMailboxName(current), getMailBoxId(current).get(), NO_ANNOTATION);
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java
        return Flux.fromIterable(searchMultimap(mailboxIds, searchQuery)
            .stream()
            .map(searchResult -> searchResult.getMessageId().get())
            .filter(SearchUtil.distinct())
            .limit(Long.valueOf(limit).intValue())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
        return executor.executeRows(listMailboxContentSinceSentAt.bind()
            .set(MAILBOX_ID, cassandraId.asUuid(), TypeCodecs.UUID)
            .setInt(LIMIT_MARKER, limit.getLimit().get())
            .setInstant(SENT_AT, since.toInstant()))
            .map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)));
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
            .setInstant(RECEIVED_AT, since.toInstant()))
            .<MessageId>map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)))
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
            .sort(Comparator.<Pair<CassandraMessageId, Instant>, Instant>comparing(Pair::getValue).reversed())
            .map(pair -> (MessageId) pair.getKey())
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
            .setInstant(RECEIVED_AT, since.toInstant()))
            .<MessageId>map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)))
            .take(limit.getLimit().get());
    }

```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
        return executor.executeRows(listMailboxContentByReceivedAt.bind()
            .set(MAILBOX_ID, cassandraId.asUuid(), TypeCodecs.UUID)
            .setInt(LIMIT_MARKER, limit.getLimit().get()))
            .map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)));
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/projections/CassandraEmailQueryView.java`
#### Snippet
```java
        return executor.executeRows(listMailboxContentBySentAt.bind()
                .set(MAILBOX_ID, cassandraId.asUuid(), TypeCodecs.UUID)
                .setInt(LIMIT_MARKER, limit.getLimit().get()))
            .map(row -> CassandraMessageId.Factory.of(row.get(0, TypeCodecs.UUID)));
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java
    public static MappingSource fromUser(Username username) {
        if (username.getLocalPart().equals(WILDCARD)) {
            return MappingSource.fromDomain(username.getDomainPart().get());
        }
        return new MappingSource(Optional.empty(), Optional.of(username), Optional.empty());
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/data/data-api/src/main/java/org/apache/james/vacation/api/VacationPatch.java`
#### Snippet
```java
            .textBody(textBody.notKeptOrElse(vacation.getTextBody()))
            .htmlBody(htmlBody.notKeptOrElse(vacation.getHtmlBody()))
            .enabled(isEnabled.notKeptOrElse(Optional.of(vacation.isEnabled())).get())
            .build();
    }
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/CassandraTypesCreator.java`
#### Snippet
```java

    public InitializationStatus initializeTypes() {
        KeyspaceMetadata keyspaceMetadata = session.getMetadata().getKeyspaces().get(session.getKeyspace().get());

        return Flux.fromIterable(types)
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/init/CassandraTableManager.java`
#### Snippet
```java

    public InitializationStatus initializeTables(CassandraTypesProvider typesProvider) {
        KeyspaceMetadata keyspaceMetadata = session.getMetadata().getKeyspaces().get(session.getKeyspace().get());

        return Flux.fromIterable(module.moduleTables())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/search/ScrolledSearch.java`
#### Snippet
```java
    private Mono<ScrollResponse<ObjectNode>> buildRequest(Optional<String> scrollId) {
        return scrollId.map(Throwing.function(id -> client.scroll(new ScrollRequest.Builder()
                            .scrollId(scrollId.get())
                            .scroll(TIMEOUT)
                            .build())).sneakyThrow())
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
            return ImmutableList.of(
                Host.from(masterHost.get(),
                masterPort.get()));
        } else {
            return multiHosts.stream()
```

### OptionalGetWithoutIsPresent
`Optional.get()` without 'isPresent()' check
in `server/testing/src/main/java/org/apache/james/jmap/JmapCommonRequests.java`
#### Snippet
```java
            .filter(mailbox -> mailbox.get("role").equals(role.serialize()))
            .map(mailbox -> mailbox.get("id"))
            .findFirst().get();
    }

```

## RuleId[id=ConstantValue]
### ConstantValue
Condition `!add(new AuthCmdHandler())` is always `false`
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/SMTPProtocolHandlerChain.java`
#### Snippet
```java
                }
            }
            if (!add(new AuthCmdHandler())) {
                return false;
            }
```

### ConstantValue
Value `recipientAddress` is always 'null'
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/RcptCmdHandler.java`
#### Snippet
```java
            recipientAddress = new MailAddress(recipient);
        } catch (Exception pe) {
            LOGGER.info("Error parsing recipient address{}", getContext(session, recipientAddress, recipient), pe);
            /*
             * from RFC2822; 553 Requested action not taken: mailbox name
```

### ConstantValue
Condition `inCommonSection` is always `true`
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/IncrementalRuleChange.java`
#### Snippet
```java
                }
            }
            if (inCommonSection) {
                if (!commonElements.contains(id)) {
                    inCommonSection = false;
```

### ConstantValue
Value `deleted` is always 'true'
in `server/blob/blob-cassandra/src/main/java/org/apache/james/blob/cassandra/cache/CachedBlobStore.java`
#### Snippet
```java
            .flatMap(deleted -> {
                if (backend.getDefaultBucketName().equals(bucketName) && deleted) {
                    return Mono.from(cache.remove(blobId)).thenReturn(deleted);
                }
                return Mono.just(deleted);
```

### ConstantValue
Condition `x < 0` is always `false`
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
                //<x> ::= any one of the 128 ASCII characters (no exceptions)
                char x = address.charAt(pos);
                if (x < 0 || x > 127) {
                    throw new AddressException("Invalid \\ syntaxed character at position " +
                            (pos + 1) + " in '" + address + "'", address, pos + 1);
```

### ConstantValue
Condition `x < 0` is always `false`
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
                //<x> ::= any one of the 128 ASCII characters (no exceptions)
                char x = address.charAt(pos);
                if (x < 0 || x > 127) {
                    throw new AddressException("Invalid \\ syntaxed character at position " + (pos + 1) +
                            " in '" + address + "'", address, pos + 1);
```

### ConstantValue
Condition `blobMessage == null` is always `true`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java

                }*/
                if (blobMessage == null) {
                    // just use the MimeMessageInputStream which can read every
                    // MimeMessage implementation
```

### ConstantValue
Value `message` is always 'null'
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
            }
        } else {
            return super.mimeMessage(message);
        }
    }
```

### ConstantValue
Condition `message instanceof BlobMessage` is always `true`
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
    protected MailImpl.Builder populateMail(Message message) throws JMSException {
        MailImpl.Builder builder = super.populateMail(message);
        if (message instanceof BlobMessage) {
            BlobMessage blobMessage = (BlobMessage) message;
            try {
```

### ConstantValue
Value `m` is always 'null'
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
            return copy;
        } else {
            return super.copy(session, m);
        }
    }
```

### ConstantValue
Condition `start >= 0` is always `true`
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSessionBuilder.java`
#### Snippet
```java
            int start = 0;
            int end = 0;
            while (start >= 0 && end >= 0) { 
                start = builder.indexOf("${", end);
                if (start < 0) {
```

### ConstantValue
Condition `conn != null` is always `true`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalysisFeeder.java`
#### Snippet
```java

                // Commit our changes if necessary.
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.commit();
                    dbUpdated = false;
```

### ConstantValue
Condition `dbUpdated` is always `true`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/BayesianAnalysisFeeder.java`
#### Snippet
```java

                // Commit our changes if necessary.
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.commit();
                    dbUpdated = false;
```

### ConstantValue
Condition `conn != null` is always `true`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java

        // Commit our changes if necessary.
        if (conn != null && dbUpdated && !conn.getAutoCommit()) {
            conn.commit();
            dbUpdated = false;
```

### ConstantValue
Condition `sectionName != null` is always `true`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
            sectionElement = (Element) (sections.item(i));
            String sectionName = sectionElement.getAttribute("name");
            if (sectionName != null && sectionName.equals(sqlDefsSection)) {
                found = true;
                break;
```

### ConstantValue
Condition `sqlKey == null` is always `false`
in `mailet/ai/src/main/java/org/apache/james/ai/classic/SqlResources.java`
#### Snippet
```java
            // Get the key and value for this SQL statement.
            String sqlKey = sqlElement.getAttribute("name");
            if (sqlKey == null) {
                // ignore statements without a "name" attribute.
                continue;
```

### ConstantValue
Value `first` is always 'true'
in `mpt/core/src/main/java/org/apache/james/mpt/helper/ScriptBuilder.java`
#### Snippet
```java
            boolean first = true;
            if (flagsFetch) {
                first = add(buffer, first, "FLAGS");
            }
            if (rfc822Size) {
```

### ConstantValue
Value `body` is always 'null'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
                        }
                        // Fallback to a memory copy
                        return getContent(body);
                    }
                })
```

### ConstantValue
Value `address` is always 'null'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
                }
                return mailboxName;
            } else if (address instanceof Group) {
                MailboxList mList = ((Group) address).getMailboxes();
                for (int a = 0; a < mList.size(); ) {
```

### ConstantValue
Value `address` is always 'null'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/SearchUtil.java`
#### Snippet
```java
            if (address instanceof Mailbox) {
                return getDisplayAddress((Mailbox) address);
            } else if (address instanceof Group) {
                Group group = (Group) address;
                MailboxList mList = group.getMailboxes();
```

### ConstantValue
Condition `count < position` is always `true` when reached
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/PartContentBuilder.java`
#### Snippet
```java
                        break;
                    case T_START_MULTIPART:
                        if (count > 0 && count < position) {
                            ignoreInnerMessage();
                        }
```

### ConstantValue
Value `address` is always 'null'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/search/MessageSearches.java`
#### Snippet
```java
                    return true;
                }
            } else if (address instanceof Group) {
                MailboxList mList = ((Group) address).getMailboxes();
                for (Mailbox mailbox : mList) {
```

### ConstantValue
Condition `klass.getInterfaces() != null` is always `true`
in `mailet/mailetdocs-maven-plugin/src/main/java/org/apache/james/mailet/DefaultDescriptorsExtractor.java`
#### Snippet
```java
    private List<Class<?>> getAllInterfaces(Class<?> klass) {
        List<Class<?>> res = new LinkedList<>();
        if (klass.getInterfaces() != null) {
            Class<?>[] interfaces = klass.getInterfaces();
            for (Class<?> anInterface : interfaces) {
```

### ConstantValue
Condition `sectionName != null` is always `true`
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
            sectionElement = (Element) (sections.item(i));
            String sectionName = sectionElement.getAttribute("name");
            if (sectionName != null && sectionName.equals(sqlDefsSection)) {
                found = true;
                break;
```

### ConstantValue
Condition `sqlKey == null` is always `false`
in `server/container/util/src/main/java/org/apache/james/util/sql/SqlResources.java`
#### Snippet
```java
            // Get the key and value for this SQL statement.
            String sqlKey = sqlElement.getAttribute("name");
            if (sqlKey == null) {
                // ignore statements without a "name" attribute.
                continue;
```

### ConstantValue
Value `body` is always 'null'
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
            return parseTextBody(message, (TextBody)body);
        }
        if (body instanceof Multipart) {
            return parseMultipart(message, (Multipart)body);
        }
```

### ConstantValue
Value `firstUnseen` is always 'null'
in `mailbox/api/src/main/java/org/apache/james/mailbox/MessageManager.java`
#### Snippet
```java
                messageCount,
                unseenCount,
                firstUnseen,
                writeable,
                resolvedAcl);
```

### ConstantValue
Condition `pemObject instanceof PEMEncryptedKeyPair` is always `false`
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/DKIMSign.java`
#### Snippet
```java
                    return converter.getPrivateKey((PrivateKeyInfo)pemObject);
                }
                if (pemObject instanceof PEMEncryptedKeyPair) {
                    PEMEncryptedKeyPair pemEncryptedKeyPair = (PEMEncryptedKeyPair) pemObject;
                    PEMDecryptorProvider decProv = new JcePEMDecryptorProviderBuilder().build(passphrase);
```

### ConstantValue
Condition `mx != null` is always `true`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/ValidRcptMX.java`
#### Snippet
```java
            }

            if (mx != null && mx.hasNext()) {
                while (mx.hasNext()) {
                    String mxRec = mx.next();
```

### ConstantValue
Condition `serverCollection != null` is always `true`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIRBLHandler.java`
#### Snippet
```java
            LOGGER.info("Adding uriRBL server: {}", rblServerName);
        }
        if (serverCollection != null && serverCollection.size() > 0) {
            setUriRblServer(serverCollection);
        } else {
```

### ConstantValue
Condition `newDomains != null` is always `true`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIRBLHandler.java`
#### Snippet
```java

                // Check if new domains are found and add the domains
                if (newDomains != null && newDomains.size() > 0) {
                    domains.addAll(newDomains);
                }
```

### ConstantValue
Value `domain` is always 'null'
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
            return domain;
        }
        return domain;
    }

```

### ConstantValue
Condition `e instanceof MessagingException` is always `true`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/remote/delivery/MessageComposer.java`
#### Snippet
```java
            sb.append("RemoteHost said:");

            if (e instanceof MessagingException) {
                while ((ex = ((MessagingException) e).getNextException()) != null && ex instanceof MessagingException) {
                    e = ex;
```

### ConstantValue
Condition `conn != null` is always `true`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java

        // Commit our changes if necessary.
        if (conn != null && dbUpdated && !conn.getAutoCommit()) {
            conn.commit();
            dbUpdated = false;
```

### ConstantValue
Condition `dbUpdated` is always `true`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java

                // Commit our changes if necessary.
                if (conn != null && dbUpdated && !conn.getAutoCommit()) {
                    conn.commit();
                    dbUpdated = false;
```

### ConstantValue
Condition `conn != null` is always `true`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/AbstractSQLWhitelistMatcher.java`
#### Snippet
```java

        // Commit our changes if necessary.
        if (conn != null && dbUpdated && !conn.getAutoCommit()) {
            conn.commit();
            dbUpdated = false;
```

### ConstantValue
Condition `conn == null` is always `true`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/IsInWhiteList.java`
#### Snippet
```java
            Domain recipientHost = recipientMailAddress.getDomain();

            if (conn == null) {
                conn = datasource.getConnection();
            }
```

### ConstantValue
Condition `selectStmt == null` is always `true`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/IsInWhiteList.java`
#### Snippet
```java

            try {
                if (selectStmt == null) {
                    selectStmt = conn.prepareStatement(selectByPK);
                }
```

### ConstantValue
Condition `pairs == null` is always `false`
in `server/container/guice/mailet/src/main/java/org/apache/james/modules/server/MailetContainerModule.java`
#### Snippet
```java
            public void check(Multimap<String, MatcherMailetPair> processors) throws ConfigurationException {
                Collection<MatcherMailetPair> pairs = processors.get(processorName);
                if (pairs == null) {
                    throw new ConfigurationException(processorName + " is missing");
                }
```

### ConstantValue
Value `DISABLED` is always 'false'
in `third-party/elasticsearch/src/main/java/org/apache/james/metrics/es/v7/ESReporterConfiguration.java`
#### Snippet
```java

        public Builder disabled() {
            this.enabled = Optional.of(DISABLED);
            return this;
        }
```

### ConstantValue
Condition `null != clazz` is always `true`
in `server/data/data-library/src/main/java/org/apache/james/repository/file/ClassLoaderObjectInputStream.java`
#### Snippet
```java
        final Class<?> clazz = Class.forName(objectStreamClass.getName(), false, classLoader);

        if (null != clazz) {
            return clazz; // the classloader knows of the class
        } else {
```

### ConstantValue
Result of `value.map(v -> v instanceof AttributeValue).orElse(true)` is always 'true'
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public static <T> AttributeValue<Optional<AttributeValue<T>>> of(Optional<AttributeValue<T>> value) {
        Preconditions.checkNotNull(value, "value should not be null");
        Preconditions.checkArgument(value.map(v -> v instanceof AttributeValue).orElse(true),
            "value should be of type Optional<AttributeValue<T>> and was not");
        return new AttributeValue<>(value, new Serializer.OptionalSerializer<>());
```

### ConstantValue
Condition `v instanceof AttributeValue` is always `true`
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public static <T> AttributeValue<Optional<AttributeValue<T>>> of(Optional<AttributeValue<T>> value) {
        Preconditions.checkNotNull(value, "value should not be null");
        Preconditions.checkArgument(value.map(v -> v instanceof AttributeValue).orElse(true),
            "value should be of type Optional<AttributeValue<T>> and was not");
        return new AttributeValue<>(value, new Serializer.OptionalSerializer<>());
```

### ConstantValue
Method reference result is always 'true'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
            .map(AttributeValue.class::cast)
            .map(a -> ((AttributeValue<?>) a).getValue())
            .filter(String.class::isInstance)
            .map(String.class::cast);
        Collection<String> result = stream.collect(ImmutableSet.toImmutableSet());
```

### ConstantValue
Value `useStartTLS` is always 'false'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/SslConfig.java`
#### Snippet
```java
            return new SslConfig(useStartTLS, useSSL, clientAuth, keystore, keystoreType, privateKey, certificates, secret, truststore, truststoreType, enabledCipherSuites, enabledProtocols, truststoreSecret, enableOCSPCRLChecks);
        } else {
            return new SslConfig(useStartTLS, useSSL, clientAuth, null, null, null, null, null, null, null, null, null, null, false);
        }
    }
```

### ConstantValue
Value `useSSL` is always 'false'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/SslConfig.java`
#### Snippet
```java
            return new SslConfig(useStartTLS, useSSL, clientAuth, keystore, keystoreType, privateKey, certificates, secret, truststore, truststoreType, enabledCipherSuites, enabledProtocols, truststoreSecret, enableOCSPCRLChecks);
        } else {
            return new SslConfig(useStartTLS, useSSL, clientAuth, null, null, null, null, null, null, null, null, null, null, false);
        }
    }
```

### ConstantValue
Value `metaData` is always 'null'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/AbstractSelectionProcessor.java`
#### Snippet
```java
                boolean send = false;
                MailboxMetaData metaData  = null;
                return Mono.fromRunnable(() -> condstoreEnablingCommand(session, responder, metaData, send));
            }
        }
```

### ConstantValue
Value `isBase` is always 'true'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchDataConverter.java`
#### Snippet
```java
                    case CONTENT:
                        if (isBase) {
                            result = addContent(result, path, isBase, FetchGroup.Profile.FULL_CONTENT);
                        } else {
                            result = addContent(result, path, isBase, FetchGroup.Profile.MIME_CONTENT);
```

### ConstantValue
Value `isBase` is always 'false'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchDataConverter.java`
#### Snippet
```java
                            result = addContent(result, path, isBase, FetchGroup.Profile.FULL_CONTENT);
                        } else {
                            result = addContent(result, path, isBase, FetchGroup.Profile.MIME_CONTENT);
                        }
                        break;
```

### ConstantValue
Value `address` is always 'null'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/EnvelopeBuilder.java`
#### Snippet
```java
                addAddresses(group, addresses);

            } else if (address instanceof Mailbox) {
                final Mailbox mailbox = (Mailbox) address;
                final FetchResponse.Envelope.Address mailboxAddress = buildMailboxAddress(mailbox);
```

### ConstantValue
Value `publisher` is always 'null'
in `metrics/metrics-dropwizard/src/main/java/org/apache/james/metrics/dropwizard/DropWizardMetricFactory.java`
#### Snippet
```java
        }
        return Flux.using(() -> timer(name),
            any -> publisher,
            DropWizardTimeMetric::stopAndPublish);
    }
```

### ConstantValue
Value `defaultValue` is always 'null'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/AttachmentAccessToken.java`
#### Snippet
```java
                .blobId(blobId)
                .username(username)
                .expirationDate(ZonedDateTime.parse(Iterables.get(split, split.size() - 2, defaultValue)))
                .signature(Iterables.get(split, split.size() - 1, defaultValue))
                .build();
```

### ConstantValue
Value `defaultValue` is always 'null'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/AttachmentAccessToken.java`
#### Snippet
```java
                .username(username)
                .expirationDate(ZonedDateTime.parse(Iterables.get(split, split.size() - 2, defaultValue)))
                .signature(Iterables.get(split, split.size() - 1, defaultValue))
                .build();
    }
```

### ConstantValue
Value `node` is always 'null'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/utils/JsoupHtmlTextExtractor.java`
#### Snippet
```java
            return textNode.getWholeText();
        }
        if (node instanceof Element) {
            Element element = (Element) node;
            if (element.tagName().equals(BR_TAG)) {
```

### ConstantValue
Condition `e.getCause() instanceof JmapFieldNotSupportedException` is always `false`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/RequestHandler.java`
#### Snippet
```java
                .onErrorResume(JmapFieldNotSupportedException.class, e -> errorNotImplemented(e, request))
                .onErrorResume(
                    e -> e.getCause() instanceof JmapFieldNotSupportedException,
                    e -> errorNotImplemented((JmapFieldNotSupportedException) e.getCause(), request))
                .onErrorResume(IOException.class, e -> error(request, generateInvalidArgumentError(e.getMessage())));
```

### ConstantValue
Value `noDomain` is always 'null'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
        return MimeUtil.createUniqueMessageId(fromAddress
            .map(Mailbox::getDomain)
            .orElse(noDomain));
    }

```

### ConstantValue
Value `message` is always 'null'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/mailet/ExtractMDNOriginalJMAPMessageId.java`
#### Snippet
```java
        try {
            var message = new DefaultMessageBuilder().parseMessage(new MimeMessageInputStream(mimeMessage));
            Optional.of(MDN.parse(message))
                .map(MDN::getReport)
                .flatMap(MDNReport::getOriginalMessageIdField)
```

### ConstantValue
Condition `i < lines.size()` is always `true`
in `protocols/api/src/main/java/org/apache/james/protocols/api/AbstractProtocolTransport.java`
#### Snippet
```java
        for (int i = 0; i < lines.size(); i++) {
            builder.append(lines.get(i));
            if (i < lines.size()) {
                builder.append(CRLF);
            }
```

### ConstantValue
Condition `addr == null` is always `false`
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/model/Inet4Network.java`
#### Snippet
```java
        addr = Inet4Address.getByAddress(ip);

        if (addr == null) {
            addr = InetAddress.getByName(Integer.toString(ip[0] & 0xFF, 10) + "." + Integer.toString(ip[1] & 0xFF, 10) + "." + Integer.toString(ip[2] & 0xFF, 10) + "." + Integer.toString(ip[3] & 0xFF, 10));
        }
```

### ConstantValue
Condition `addr == null` is always `false`
in `server/dns-service/dnsservice-library/src/main/java/org/apache/james/dnsservice/library/inetnetwork/model/Inet6Network.java`
#### Snippet
```java

        // TODO Don't know if this is correct?
        if (addr == null) {
            addr = InetAddress.getByName(Integer.toString(ip[0] & 0xFF, 10) + ":" + Integer.toString(ip[1] & 0xFF, 10) + ":" + Integer.toString(ip[2] & 0xFF, 10) + ":" + Integer.toString(ip[3] & 0xFF, 10) + ":" + Integer.toString(ip[4] & 0xFF, 10) + ":" + Integer.toString(ip[5] & 0xFF, 10) + ":"
                    + Integer.toString(ip[6] & 0xFF, 10) + ":" + Integer.toString(ip[7] & 0xFF, 10) + ":" + Integer.toString(ip[8] & 0xFF, 10) + ":" + Integer.toString(ip[9] & 0xFF, 10) + ":" + Integer.toString(ip[10] & 0xFF, 10) + ":" + Integer.toString(ip[11] & 0xFF, 10) + ":"
```

### ConstantValue
Condition `obj instanceof SMIMESigned` is always `false`
in `mailet/crypto/src/main/java/org/apache/james/transport/mailets/SMIMECheckSignature.java`
#### Snippet
```java
        if (obj instanceof MimeMultipart) {
            signed = new SMIMESigned((MimeMultipart) message.getContent());
        } else if (obj instanceof SMIMESigned) {
            signed = (SMIMESigned) obj;
        } else if (obj instanceof byte[]) {
```

### ConstantValue
Value `appender` is always 'null'
in `mpt/impl/imap-mailbox/core/src/main/java/org/apache/james/mpt/imapmailbox/suite/ACLCommands.java`
#### Snippet
```java
        grantRightsOnHost = createGrantRightsOnHost();
        MailboxMessageAppender appender = null;
        scriptedTestProtocol = new ACLScriptedTestProtocol(grantRightsOnHost, appender, "/org/apache/james/imap/scripts/", system)
                .withUser(USER, PASSWORD)
                .withLocale(Locale.US);
```

### ConstantValue
Value `retry` is always 'true'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/ImapRequestFrameDecoder.java`
#### Snippet
```java
            } else {

                reader = new NettyImapRequestLineReader(ctx.channel(), in, retry, literalSizeLimit);
            }
        } else {
```

### ConstantValue
Value `retry` is always 'false'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/ImapRequestFrameDecoder.java`
#### Snippet
```java
            }
        } else {
            reader = new NettyImapRequestLineReader(ctx.channel(), in, retry, literalSizeLimit);
        }
        return Pair.of(reader, size);
```

### ConstantValue
Value `address` is always 'null'
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

                                }
                            } else if (address instanceof Group) {
                                MailboxList mList = ((Group) address).getMailboxes();
                                for (int a = 0; a < mList.size(); a++) {
```

### ConstantValue
Value `onlySpaces` is always 'null'
in `mailbox/tika/src/main/java/org/apache/james/mailbox/tika/TikaTextExtractor.java`
#### Snippet
```java
            }
            String onlySpaces = null;
            return StringUtils.stripStart(content.get(0), onlySpaces);
        }

```

### ConstantValue
Condition `(repository.tableName != null) && repository.tableName.equals(tableName)` is always `false` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
        // the equals equation
        JDBCMailRepository repository = (JDBCMailRepository) obj;
        return ((repository.tableName.equals(tableName)) || ((repository.tableName != null) && repository.tableName.equals(tableName))) && ((repository.repositoryName.equals(repositoryName)) || ((repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)));
    }

```

### ConstantValue
Condition `repository.tableName != null` is always `true` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
        // the equals equation
        JDBCMailRepository repository = (JDBCMailRepository) obj;
        return ((repository.tableName.equals(tableName)) || ((repository.tableName != null) && repository.tableName.equals(tableName))) && ((repository.repositoryName.equals(repositoryName)) || ((repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)));
    }

```

### ConstantValue
Condition `repository.tableName.equals(tableName)` is always `false` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
        // the equals equation
        JDBCMailRepository repository = (JDBCMailRepository) obj;
        return ((repository.tableName.equals(tableName)) || ((repository.tableName != null) && repository.tableName.equals(tableName))) && ((repository.repositoryName.equals(repositoryName)) || ((repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)));
    }

```

### ConstantValue
Condition `(repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)` is always `false` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
        // the equals equation
        JDBCMailRepository repository = (JDBCMailRepository) obj;
        return ((repository.tableName.equals(tableName)) || ((repository.tableName != null) && repository.tableName.equals(tableName))) && ((repository.repositoryName.equals(repositoryName)) || ((repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)));
    }

```

### ConstantValue
Condition `repository.repositoryName != null` is always `true` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
        // the equals equation
        JDBCMailRepository repository = (JDBCMailRepository) obj;
        return ((repository.tableName.equals(tableName)) || ((repository.tableName != null) && repository.tableName.equals(tableName))) && ((repository.repositoryName.equals(repositoryName)) || ((repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)));
    }

```

### ConstantValue
Condition `repository.repositoryName.equals(repositoryName)` is always `false` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
        // the equals equation
        JDBCMailRepository repository = (JDBCMailRepository) obj;
        return ((repository.tableName.equals(tableName)) || ((repository.tableName != null) && repository.tableName.equals(tableName))) && ((repository.repositoryName.equals(repositoryName)) || ((repository.repositoryName != null) && repository.repositoryName.equals(repositoryName)));
    }

```

### ConstantValue
Condition `hasRetrieveMessageAttributesSQL` is always `false` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
            throw new SQLException(logBufferAsString);
        }
        if (!hasMessageAttributesColumn && (hasUpdateMessageAttributesSQL || hasRetrieveMessageAttributesSQL)) {
            logBuffer.append("JDBC Mail Attributes support was activated but column '").append(attributesColumnName).append("' is missing in table '").append(tableName).append("'.");
            String logBufferAsString = logBuffer.toString();
```

### ConstantValue
Condition `hasRetrieveMessageAttributesSQL` is always `true` when reached
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
            throw new SQLException(logBufferAsString);
        }
        if (hasUpdateMessageAttributesSQL && hasRetrieveMessageAttributesSQL) {
            jdbcMailAttributesReady = true;
            logBuffer.append("JDBC Mail Attributes support ready.");
```

### ConstantValue
Value `noFlags` is always 'null'
in `server/testing/src/main/java/org/apache/james/utils/TestIMAPClient.java`
#### Snippet
```java
        String noFlags = null;
        String noDateTime = null;
        if (!imapClient.append(mailboxName, noFlags, noDateTime, message)) {
            throw new RuntimeException(imapClient.getReplyString());
        }
```

### ConstantValue
Value `noDateTime` is always 'null'
in `server/testing/src/main/java/org/apache/james/utils/TestIMAPClient.java`
#### Snippet
```java
        String noFlags = null;
        String noDateTime = null;
        if (!imapClient.append(mailboxName, noFlags, noDateTime, message)) {
            throw new RuntimeException(imapClient.getReplyString());
        }
```

## RuleId[id=ReactorTransformationOnMonoVoid]
### ReactorTransformationOnMonoVoid
Calling transform method map on Mono, call will not have any effect
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
                    context.addFixedInconsistency(mailbox.getMailboxId());
                })
                .map(any -> Result.COMPLETED)
                .defaultIfEmpty(Result.COMPLETED)
                .onErrorResume(e -> {
```

### ReactorTransformationOnMonoVoid
Calling transform method subscribe on Mono, call will not have any effect
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/ImapChannelUpstreamHandler.java`
#### Snippet
```java
                super.channelInactive(ctx);
            }))
            .subscribe(any -> {

            }, e -> {
```

### ReactorTransformationOnMonoVoid
Calling transform method subscribe on Mono, call will not have any effect
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/ImapChannelUpstreamHandler.java`
#### Snippet
```java
                    super.channelInactive(ctx);
                }))
                .subscribe(any -> {

                }, ctx::fireExceptionCaught);
```

## RuleId[id=StringConcatenationInsideStringBufferAppend]
### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
    private void appendReportingMTA(StringBuilder buffer) {
        try {
            buffer.append("Reporting-MTA: dns; " + dns.getHostName(dns.getLocalHost()))
                .append(LINE_BREAK);
        } catch (Exception e) {
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java

        appendReportingMTA(buffer);
        buffer.append("Received-From-MTA: dns; " + originalMail.getRemoteHost())
            .append(LINE_BREAK);

```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
    private void appendRecipient(StringBuilder buffer, MailAddress mailAddress, String deliveryError, Date lastUpdated) {
        buffer.append(LINE_BREAK);
        buffer.append("Final-Recipient: rfc822; " + mailAddress.toString()).append(LINE_BREAK);
        buffer.append("Action: ").append(action.asString().toLowerCase(Locale.US)).append(LINE_BREAK);
        buffer.append("Status: " + deliveryError).append(LINE_BREAK);
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
        buffer.append("Final-Recipient: rfc822; " + mailAddress.toString()).append(LINE_BREAK);
        buffer.append("Action: ").append(action.asString().toLowerCase(Locale.US)).append(LINE_BREAK);
        buffer.append("Status: " + deliveryError).append(LINE_BREAK);
        if (action.shouldIncludeDiagnostic()) {
            buffer.append("Diagnostic-Code: " + getDiagnosticType(deliveryError) + "; " + deliveryError).append(LINE_BREAK);
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
        buffer.append("Status: " + deliveryError).append(LINE_BREAK);
        if (action.shouldIncludeDiagnostic()) {
            buffer.append("Diagnostic-Code: " + getDiagnosticType(deliveryError) + "; " + deliveryError).append(LINE_BREAK);
        }
        buffer.append("Last-Attempt-Date: " + dateFormatter.format(ZonedDateTime.ofInstant(lastUpdated.toInstant(), ZoneId.systemDefault())))
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/DSNBounce.java`
#### Snippet
```java
            buffer.append("Diagnostic-Code: " + getDiagnosticType(deliveryError) + "; " + deliveryError).append(LINE_BREAK);
        }
        buffer.append("Last-Attempt-Date: " + dateFormatter.format(ZonedDateTime.ofInstant(lastUpdated.toInstant(), ZoneId.systemDefault())))
            .append(LINE_BREAK);
    }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/NotifyMailetsMessage.java`
#### Snippet
```java
        }
        if (message.getSentDate() != null) {
            builder.append("  Sent date: " + message.getSentDate())
                .append(LINE_BREAK);
        }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/NotifyMailetsMessage.java`
#### Snippet
```java
                .append(LINE_BREAK);
        }
        builder.append("  MAIL FROM: " + originalMail.getMaybeSender().asString())
            .append(LINE_BREAK);

```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/NotifyMailetsMessage.java`
#### Snippet
```java
        for (MailAddress recipient : originalMail.getRecipients()) {
            if (firstRecipient) {
                builder.append("  RCPT TO: " + recipient)
                    .append(LINE_BREAK);
                firstRecipient = false;
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/NotifyMailetsMessage.java`
#### Snippet
```java
                firstRecipient = false;
            } else {
                builder.append("           " + recipient)
                    .append(LINE_BREAK);
            }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/NotifyMailetsMessage.java`
#### Snippet
```java

        if (message.getLineCount() >= 0) {
            builder.append("  Number of lines: " + message.getLineCount())
                .append(LINE_BREAK);
        }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/redirect/NotifyMailetsMessage.java`
#### Snippet
```java
    private void appendAddresses(StringBuilder builder, String title, String[] addresses) {
        if (addresses != null) {
            builder.append("  " + title + ": ")
                .append(LINE_BREAK);
            for (String address : flatten(addresses)) {
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `server/apps/cli/src/main/java/org/apache/james/cli/type/CmdType.java`
#### Snippet
```java
        StringBuilder stringBuilder = new StringBuilder(command);
        for (String argument : arguments) {
            stringBuilder.append(" <" + argument + ">");
        }
        return stringBuilder.toString();
```

## RuleId[id=OptionalIsPresent]
### OptionalIsPresent
Can be replaced with single expression in functional style
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java

    private void addText(MultipartBuilder builder, Optional<String> textBody) throws IOException {
        if (textBody.isPresent()) {
            builder.addBodyPart(BodyPartBuilder.create()
                .use(bodyFactory)
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java

    private void addHtml(MultipartBuilder builder, Optional<String> htmlBody) throws IOException {
        if (htmlBody.isPresent()) {
            builder.addBodyPart(BodyPartBuilder.create()
                .use(bodyFactory)
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/PatternExtractor.java`
#### Snippet
```java
        public static FileNameWithCharset from(String fileName) {
            Optional<Integer> charsetOffset = charsetIndex(fileName);
            if (charsetOffset.isPresent()) {
                return new FileNameWithCharset(fileName.substring(0, charsetOffset.get()), 
                        charset(fileName, charsetOffset.get()));
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `mailbox/lucene/src/main/java/org/apache/james/mailbox/lucene/search/LuceneMessageSearchIndex.java`
#### Snippet
```java

    private Optional<MessageId> toMessageId(Optional<String> messageIdField) {
        if (messageIdField.isPresent()) {
            return Optional.of(messageIdFactory.fromString(messageIdField.get()));
        }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/OpenSearchConfiguration.java`
#### Snippet
```java
        validateHostsConfigurationOptions(masterHost, masterPort, multiHosts);

        if (masterHost.isPresent()) {
            return ImmutableList.of(
                Host.from(masterHost.get(),
```

## RuleId[id=RedundantOperationOnEmptyContainer]
### RedundantOperationOnEmptyContainer
Array `networks` is always empty
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/ValidRcptMX.java`
#### Snippet
```java
        if (networks.length == 0) {

            Collection<String> bannedNetworks = Arrays.stream(networks)
                .map(String::trim)
                .collect(ImmutableList.toImmutableList());
```

## RuleId[id=RedundantLengthCheck]
### RedundantLengthCheck
Redundant array length check
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/FlagsFactory.java`
#### Snippet
```java
            flags.add(Flags.Flag.SEEN);
        }
        if (userFlags != null && userFlags.length > 0) {
            for (String userFlag : userFlags) {
                flags.add(userFlag);
```

## RuleId[id=UNCHECKED_WARNING]
### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/ClearMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(ClearMailQueueTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/DeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(DeleteMailsFromMailQueueTaskAdditionalInformationDTO::toDTO)
            .typeName(DeleteMailsFromMailQueueTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailqueue/src/main/java/org/apache/james/webadmin/service/WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(WebAdminDeleteMailsFromMailQueueTaskAdditionalInformationDTO::toDTO)
            .typeName(DeleteMailsFromMailQueueTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/dto/WebAdminMigrationTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter((details, type) -> new WebAdminMigrationTaskAdditionalInformationDTO(type, details.getToVersion(), details.timestamp()))
            .typeName(MigrationTask.CASSANDRA_MIGRATION.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/tasks/TasksCleanupTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter((domain, type) -> new TasksCleanupTaskAdditionalInformationDTO(type, domain.getRemovedTasksCount(), domain.getProcessedTaskCount(), domain.getOlderThan(), domain.timestamp()))
            .typeName(TasksCleanupTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.stream.Stream' to 'java.util.stream.Stream\>'. Reason: 'p.acceptableClasses() .stream()' has raw type, so result of map is erased
in `server/container/guice/protocols/imap/src/main/java/org/apache/james/modules/protocols/IMAPServerModule.java`
#### Snippet
```java

    private static Stream<Pair<Class, AbstractProcessor>> asPairStream(AbstractProcessor p) {
        return p.acceptableClasses()
            .stream().map(clazz -> Pair.of(clazz, p));
    }

```

### UNCHECKED_WARNING
Unchecked call to 'map(Function)' as a member of raw type 'java.util.stream.Stream'
in `server/container/guice/protocols/imap/src/main/java/org/apache/james/modules/protocols/IMAPServerModule.java`
#### Snippet
```java

    private static Stream<Pair<Class, AbstractProcessor>> asPairStream(AbstractProcessor p) {
        return p.acceptableClasses()
            .stream().map(clazz -> Pair.of(clazz, p));
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.concurrent.CompletableFuture' to 'java.util.concurrent.CompletableFuture'
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/MinimalCopyBytesResponseTransformer.java`
#### Snippet
```java

    public CompletableFuture<ResponseBytes<GetObjectResponse>> prepare() {
        this.cf = new CompletableFuture();
        // Modifcation: Remove a defensive copy of the buffer upon completion: the caller is now the sole user of the array
        return this.cf.thenApply(arr -> ResponseBytes.fromByteArrayUnsafe(response, arr));
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/quota-recompute/src/main/java/org/apache/james/mailbox/quota/task/RecomputeCurrentQuotasTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(RecomputeCurrentQuotasTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(RecomputeCurrentQuotasTask.RECOMPUTE_CURRENT_QUOTAS.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedSpamToRspamdTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(FeedSpamToRspamdTaskAdditionalInformationDTO::toDto)
            .typeName(FeedSpamToRspamdTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private static FeedSpamToRspamdTask.AdditionalInformation toDomainObject(FeedSpamToRspamdTaskAdditionalInformationDTO dto) {
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/task/FeedHamToRspamdTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(FeedHamToRspamdTaskAdditionalInformationDTO::toDto)
            .typeName(FeedHamToRspamdTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private static FeedHamToRspamdTask.AdditionalInformation toDomainObject(FeedHamToRspamdTaskAdditionalInformationDTO dto) {
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/blob/BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(BlobStoreVaultGarbageCollectionTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/plugin/deleted-messages-vault/src/main/java/org/apache/james/vault/blob/BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(BlobStoreVaultGarbageCollectionTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    public static final AdditionalInformationDTOModule<BlobStoreVaultGarbageCollectionTask.AdditionalInformation, BlobStoreVaultGarbageCollectionTaskAdditionalInformationDTO> module() {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.TreeMap' to 'java.util.Map'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MimeDescriptorImpl.java`
#### Snippet
```java
        final String type = descriptor.getMediaType();
        final String transferEncoding = descriptor.getTransferEncoding();
        final Map<String, String> contentTypeParameters = new TreeMap<>(descriptor.getContentTypeParameters());
        final String codeset = descriptor.getCharset();
        if (codeset == null) {
```

### UNCHECKED_WARNING
Unchecked call to 'createMessage(MessageId, ThreadId, Mailbox, Date, Date, int, int, ...)' as a member of raw type 'org.apache.james.mailbox.store.MessageFactory'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MessageStorer.java`
#### Snippet
```java
                            Date saveDate = Date.from(clock.instant());

                            MailboxMessage message = messageFactory.createMessage(messageId, threadId, mailbox, internalDate, saveDate, size, bodyStartOctet, content, flags, propertyBuilder, attachments);
                            return Mono.from(messageMapper.addReactive(mailbox, message))
                                .map(metadata -> Pair.of(metadata, Optional.of(attachments)));
```

### UNCHECKED_WARNING
Unchecked call to 'createMessage(MessageId, ThreadId, Mailbox, Date, Date, int, int, ...)' as a member of raw type 'org.apache.james.mailbox.store.MessageFactory'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/MessageStorer.java`
#### Snippet
```java
                        Date saveDate = Date.from(clock.instant());

                        MailboxMessage message = messageFactory.createMessage(messageId, threadId, mailbox, internalDate, saveDate, size, bodyStartOctet, content, flags, propertyBuilder, ImmutableList.of());
                        return Mono.from(messageMapper.addReactive(mailbox, message))
                            .map(metadata -> Pair.of(metadata, Optional.empty()));
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.stream.Stream' to 'java.util.stream.Stream'
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java

    public static <T> Stream<T> unfold(T seed, Function<T, Optional<T>> generator) {
        return StreamSupport.stream(new UnfoldSpliterator(seed, generator), !PARALLEL);
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.james.util.StreamUtils.UnfoldSpliterator' to 'java.util.Spliterator'
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java

    public static <T> Stream<T> unfold(T seed, Function<T, Optional<T>> generator) {
        return StreamSupport.stream(new UnfoldSpliterator(seed, generator), !PARALLEL);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'UnfoldSpliterator(T, Function\>)' as a member of raw type 'org.apache.james.util.StreamUtils.UnfoldSpliterator'
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java

    public static <T> Stream<T> unfold(T seed, Function<T, Optional<T>> generator) {
        return StreamSupport.stream(new UnfoldSpliterator(seed, generator), !PARALLEL);
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'java.util.Spliterator\>' to 'java.util.Spliterator'
in `server/container/util/src/main/java/org/apache/james/util/StreamUtils.java`
#### Snippet
```java
        @Override
        public Spliterator<T> trySplit() {
            return (Spliterator<T>) NOT_ABLE_TO_SPLIT_SPLITERATOR;
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(SolveMailboxInconsistenciesTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(SolveMailboxInconsistenciesTask.SOLVE_MAILBOX_INCONSISTENCIES.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMessageInconsistenciesTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(SolveMessageInconsistenciesTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(SOLVE_MESSAGE_INCONSISTENCIES.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/MailboxMergingTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(MailboxMergingTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(MailboxMergingTask.MAILBOX_MERGING.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/RecomputeMailboxCountersTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(RecomputeMailboxCountersTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(RecomputeMailboxCountersTask.RECOMPUTE_MAILBOX_COUNTERS.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/migration/AclV2MigrationTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(AclV2MigrationTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(AclV2Migration.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private final String type;
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/migration/MessageV3MigrationTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(MessageV3MigrationTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(MessageV3Migration.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private final String type;
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/DeletedMessagesVaultRestoreTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(DeletedMessagesVaultRestoreTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(DeletedMessagesVaultRestoreTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/DeletedMessagesVaultExportTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(DeletedMessagesVaultExportTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(DeletedMessagesVaultExportTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/WebAdminDeletedMessagesVaultRestoreTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(WebAdminDeletedMessagesVaultRestoreTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(DeletedMessagesVaultRestoreTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/DeletedMessagesVaultDeleteTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter((details, type) -> new DeletedMessagesVaultDeleteTaskAdditionalInformationDTO(type, details.getUsername(), details.getDeleteMessageId(), details.timestamp()))
            .typeName(DeletedMessagesVaultDeleteTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox-deleted-message-vault/src/main/java/org/apache/james/webadmin/vault/routes/WebAdminDeletedMessagesVaultDeleteTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter((details, type) -> new WebAdminDeletedMessagesVaultDeleteTaskAdditionalInformationDTO(type, details.getUsername(), details.getDeleteMessageId(), details.timestamp()))
            .typeName(DeletedMessagesVaultDeleteTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/WebAdminSingleMailboxReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(SingleMailboxReindexingTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/WebAdminUserReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(UserReindexingTask.USER_RE_INDEXING.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/WebAdminIndexationContextInformationDTO.java`
#### Snippet
```java
                    details.timestamp()))
                .typeName(ErrorRecoveryIndexationTask.PREVIOUS_FAILURES_INDEXING.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/dto/WebAdminIndexationContextInformationDTO.java`
#### Snippet
```java
                    details.timestamp()))
                .typeName(FullReindexingTask.FULL_RE_INDEXING.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ClearMailboxContentTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(ClearMailboxContentTaskAdditionalInformationDTO::toDto)
            .typeName(ClearMailboxContentTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private static ClearMailboxContentTask.AdditionalInformation toDomainObject(ClearMailboxContentTaskAdditionalInformationDTO dto) {
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/MailboxesExportTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.getStage()))
            .typeName(MailboxesExportTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private final String username;
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/ExpireMailboxAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(ExpireMailboxAdditionalInformationDTO::toDto)
            .typeName(ExpireMailboxTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/SubscribeAllTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(SubscribeAllTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private final String type;
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                    domainObject.getRunningOptions()))
                .typeName(EventDeadLettersRedeliverGroupTask.TYPE.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                    domainObject.getRunningOptions()))
                .typeName(EventDeadLettersRedeliverAllTask.TYPE.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliveryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                    domainObject.timestamp()))
                .typeName(EventDeadLettersRedeliverOneTask.TYPE.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/CreateMissingParentsTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.getTotalFailure()))
            .typeName(CreateMissingParentsTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private final String type;
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.james.queue.rabbitmq.view.api.MailQueueView' to 'org.apache.james.queue.rabbitmq.view.api.MailQueueView'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/RabbitMQMailQueueFactory.java`
#### Snippet
```java
                    metricFactory, mailQueueView, configuration, clock),
                new Dequeuer(mailQueueName, receiverProvider, mailLoader, mailReferenceSerializer,
                    metricFactory, mailQueueView, prefetchCount),
                mailQueueView,
                decoratorFactory);
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.james.queue.rabbitmq.view.api.MailQueueView' to 'org.apache.james.queue.rabbitmq.view.api.MailQueueView'
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/RabbitMQMailQueueFactory.java`
#### Snippet
```java
                new Dequeuer(mailQueueName, receiverProvider, mailLoader, mailReferenceSerializer,
                    metricFactory, mailQueueView, prefetchCount),
                mailQueueView,
                decoratorFactory);

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/data/data-cassandra/src/main/java/org/apache/james/rrt/cassandra/migration/MappingsSourcesMigrationTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(MappingsSourcesMigrationTaskAdditionalInformationDTO::fromDomainObject)
            .typeName(type.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'T' to 'java.util.Map\>'
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public <U> Optional<AttributeValue<Map<String, AttributeValue<U>>>> asMapAttributeValueOf(Class<U> type) {
        if (value instanceof Map) {
            Map<String, AttributeValue<?>> aMap = (Map<String, AttributeValue<?>>) value;
            Map<String, AttributeValue<U>> castedMap = aMap.entrySet()
                .stream()
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Optional' to 'java.util.Optional++\>\>\>'++
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
                .flatMap(entry -> entry.getValue().asAttributeValueOf(type).stream().map(castedValue -> Pair.of(entry.getKey(), castedValue)))
                .collect(ImmutableMap.toImmutableMap(Pair::getKey, Pair::getValue));
            return Optional.of(new AttributeValue<>(castedMap, new Serializer.MapSerializer()));
        } else {
            return Optional.empty();
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.mailet.AttributeValue' to 'org.apache.mailet.AttributeValue++\>\>'++
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
                .flatMap(entry -> entry.getValue().asAttributeValueOf(type).stream().map(castedValue -> Pair.of(entry.getKey(), castedValue)))
                .collect(ImmutableMap.toImmutableMap(Pair::getKey, Pair::getValue));
            return Optional.of(new AttributeValue<>(castedMap, new Serializer.MapSerializer()));
        } else {
            return Optional.empty();
```

### UNCHECKED_WARNING
Unchecked call to 'AttributeValue(T, Serializer)' as a member of raw type 'org.apache.mailet.AttributeValue'
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
                .flatMap(entry -> entry.getValue().asAttributeValueOf(type).stream().map(castedValue -> Pair.of(entry.getKey(), castedValue)))
                .collect(ImmutableMap.toImmutableMap(Pair::getKey, Pair::getValue));
            return Optional.of(new AttributeValue<>(castedMap, new Serializer.MapSerializer()));
        } else {
            return Optional.empty();
```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.mailet.AttributeValue' to 'org.apache.mailet.AttributeValue++'++
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public <U> Optional<AttributeValue<U>> asAttributeValueOf(Class<U> type) {
        if (type.isInstance(value)) {
            return Optional.of((AttributeValue<U>) this);
        } else {
            return Optional.empty();
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/UploadCleanupTaskAdditionalInformationDTO.java`
#### Snippet
```java
                    domain.getScope().name().toLowerCase(Locale.US)))
            .typeName(UploadRepositoryCleanupTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);


```

### UNCHECKED_WARNING
Unchecked cast: 'java.util.Collection' to 'java.util.Collection'
in `mailet/api/src/main/java/org/apache/mailet/StorageDirective.java`
#### Snippet
```java
        if (mail.getAttribute(foldersAttribute).isPresent()) {
            return AttributeUtils.getValueAndCastFromMail(mail, foldersAttribute, Collection.class)
                .map(collection -> (Collection<AttributeValue>) collection)
                .map(collection -> collection.stream()
                    .map(AttributeValue::getValue)
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/PopulateEmailQueryViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(PopulateEmailQueryViewTaskAdditionalInformationDTO::toDTO)
            .typeName(PopulateEmailQueryViewTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/PopulateFilteringProjectionTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(PopulateFilteringProjectionTaskAdditionalInformationDTO::toDTO)
            .typeName(PopulateFilteringProjectionTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeUserFastViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(RecomputeUserFastViewTaskAdditionalInformationDTO::toDTO)
            .typeName(RecomputeUserFastViewProjectionItemsTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/RecomputeAllFastViewTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(RecomputeAllFastViewTaskAdditionalInformationDTO::toDTO)
            .typeName(RecomputeAllFastViewProjectionItemsTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'T'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/ProtocolHandlerChainImpl.java`
#### Snippet
```java
        for (Object handler: handlers) {
            if (type.isInstance(handler)) {
                return Optional.of((T) handler);
            }
        }
```

### UNCHECKED_WARNING
Unchecked overriding: return type requires unchecked conversion. Found 'org.apache.james.protocols.netty.AbstractChannelPipelineFactory', required 'io.netty.channel.ChannelInitializer'
in `server/protocols/protocols-library/src/main/java/org/apache/james/protocols/lib/netty/AbstractConfigurableAsyncServer.java`
#### Snippet
```java

    @Override
    protected AbstractChannelPipelineFactory createPipelineFactory() {
        return new AbstractSSLAwareChannelPipelineFactory<>(getTimeout(), connectionLimit, connPerIP,
            proxyRequired,
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/WebAdminClearMailRepositoryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(ClearMailRepositoryTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingAllMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.getConfiguration().getMaxRetries()))
            .typeName(ReprocessingAllMailsTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ClearMailRepositoryTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(ClearMailRepositoryTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ReprocessingOneMailTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(ReprocessingOneMailTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'encode(T, ImapResponseComposer)' as a member of raw type 'org.apache.james.imap.encode.ImapResponseEncoder'
in `protocols/imap/src/main/java/org/apache/james/imap/encode/main/DefaultImapEncoderFactory.java`
#### Snippet
```java

            if (imapResponseEncoder != null) {
                imapResponseEncoder.encode(message, composer);
            } else {
                endImapEncoder.encode(message, composer);
```

### UNCHECKED_WARNING
Unchecked assignment: 'com.google.common.collect.ImmutableMap' to 'java.util.Map,org.apache.james.imap.encode.ImapResponseEncoder\>'
in `protocols/imap/src/main/java/org/apache/james/imap/encode/main/DefaultImapEncoderFactory.java`
#### Snippet
```java

        public DefaultImapEncoder(Stream<ImapResponseEncoder> encoders, EndImapEncoder endImapEncoder) {
            this.encoders = encoders
                .collect(ImmutableMap.toImmutableMap(
                    ImapResponseEncoder::acceptableMessages,
                    Function.identity()));
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.stream.Collector' to 'java.util.stream.Collector,org.apache.james.imap.encode.ImapResponseEncoder\>\>'
in `protocols/imap/src/main/java/org/apache/james/imap/encode/main/DefaultImapEncoderFactory.java`
#### Snippet
```java
        public DefaultImapEncoder(Stream<ImapResponseEncoder> encoders, EndImapEncoder endImapEncoder) {
            this.encoders = encoders
                .collect(ImmutableMap.toImmutableMap(
                    ImapResponseEncoder::acceptableMessages,
                    Function.identity()));
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.function.Function' to 'java.util.function.Function'
in `protocols/imap/src/main/java/org/apache/james/imap/encode/main/DefaultImapEncoderFactory.java`
#### Snippet
```java
                .collect(ImmutableMap.toImmutableMap(
                    ImapResponseEncoder::acceptableMessages,
                    Function.identity()));
            this.endImapEncoder = endImapEncoder;
        }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.stream.Stream' to 'java.util.stream.Stream\>'. Reason: 'p.acceptableClasses() .stream()' has raw type, so result of map is erased
in `protocols/imap/src/main/java/org/apache/james/imap/processor/DefaultProcessor.java`
#### Snippet
```java

    private static Stream<Pair<Class, AbstractProcessor>> asPairStream(AbstractProcessor p) {
        return p.acceptableClasses()
            .stream().map(clazz -> Pair.of(clazz, p));
    }

```

### UNCHECKED_WARNING
Unchecked call to 'map(Function)' as a member of raw type 'java.util.stream.Stream'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/DefaultProcessor.java`
#### Snippet
```java

    private static Stream<Pair<Class, AbstractProcessor>> asPairStream(AbstractProcessor p) {
        return p.acceptableClasses()
            .stream().map(clazz -> Pair.of(clazz, p));
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Class' to 'java.lang.Class'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/ListProcessor.java`
#### Snippet
```java
                         MetricFactory metricFactory, SubscriptionManager subscriptionManager,
                         StatusProcessor statusProcessor, MailboxTyper mailboxTyper) {
        this((Class<T>) ListRequest.class, mailboxManager, factory, metricFactory, subscriptionManager, statusProcessor, mailboxTyper);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BlobGCTaskAdditionalInformationDTO.java`
#### Snippet
```java
                ))
            .typeName(BlobGCTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);

    private final String type;
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Collection' to 'java.util.Collection'
in `server/blob/blob-storage-strategy/src/main/java/org/apache/james/server/blob/deduplication/BloomFilterGCAlgorithm.java`
#### Snippet
```java
    private Mono<Result> handlePagedDeletion(BucketName bucketName, Context context, Flux<GenerationAwareBlobId> blobIdFlux) {
        return blobIdFlux.collectList()
            .flatMap(orphanBlobIds -> Mono.from(blobStoreDAO.delete(bucketName, (Collection) orphanBlobIds))
                .then(Mono.fromCallable(() -> {
                    context.incrementGCedBlobCount(orphanBlobIds.size());
```

### UNCHECKED_WARNING
Unchecked call to 'mailboxIds(Collection)' as a member of raw type 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataViewFactory.java`
#### Snippet
```java
        Collection<MailboxId> mailboxIds = Helpers.getMailboxIds(messageResults);

        return Mono.just(MessageMetadataView.messageMetadataBuilder()
            .id(firstMessageResult.getMessageId())
            .mailboxIds(mailboxIds)
            .blobId(BlobId.of(firstMessageResult.getMessageId()))
            .threadId(firstMessageResult.getMessageId().serialize())
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.james.jmap.draft.model.message.view.MessageFastView.Builder' to 'org.apache.james.jmap.draft.model.message.view.MessageFastView.Builder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java

    public static MessageFastView.Builder<? extends MessageFastView.Builder> builder() {
        return new Builder();
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageFastView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
        public S hasAttachment(boolean hasAttachment) {
            this.hasAttachment = Optional.of(hasAttachment);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageFastView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
        public S preview(Optional<Preview> preview) {
            this.preview = preview;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageFastView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageFastView.java`
#### Snippet
```java
        public S preview(Preview preview) {
            this.preview = Optional.of(preview);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        public S keywords(Keywords keywords) {
            this.keywords = Optional.ofNullable(keywords);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        public S mailboxIds(Collection<MailboxId> mailboxIds) {
            this.mailboxIds = ImmutableSet.copyOf(mailboxIds);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        public S size(long size) {
            this.size = Number.BOUND_SANITIZING_FACTORY.from(size);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        public S threadId(String threadId) {
            this.threadId = threadId;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        public S blobId(BlobId blobId) {
            this.blobId = blobId;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageMetadataView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageMetadataView.java`
#### Snippet
```java
        public S id(MessageId id) {
            this.id = id;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S date(Instant date) {
            this.date = date;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S to(List<Emailer> to) {
            this.to.addAll(to);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S from(Emailer from) {
            this.from = Optional.of(from);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S cc(List<Emailer> cc) {
            this.cc.addAll(cc);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S from(Optional<Emailer> from) {
            this.from = from;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S subject(String subject) {
            this.subject = subject;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S replyTo(List<Emailer> replyTo) {
            this.replyTo.addAll(replyTo);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java

    public static MessageHeaderView.Builder<? extends MessageHeaderView.Builder> messageHeaderBuilder() {
        return new Builder();
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S bcc(List<Emailer> bcc) {
            this.bcc.addAll(bcc);
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S headers(ImmutableMap<String, String> headers) {
            this.headers = headers;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.jmap.draft.model.message.view.MessageHeaderView.Builder' to 'S'
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageHeaderView.java`
#### Snippet
```java
        public S inReplyToMessageId(String inReplyToMessageId) {
            this.inReplyToMessageId = inReplyToMessageId;
            return (S) this;
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.protocols.api.handler.ProtocolHandler' to 'T'
in `protocols/api/src/main/java/org/apache/james/protocols/api/handler/AbstractProtocolHandlerChain.java`
#### Snippet
```java
            .stream()
            .filter(type::isInstance)
            .map(handler -> (T) handler)
            .findFirst();
    }
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMessageReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(SingleMessageReindexingTask.MESSAGE_RE_INDEXING.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/MessageIdReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter((details, type) -> new MessageIdReindexingTaskAdditionalInformationDTO(type, details.getMessageId(), details.timestamp()))
            .typeName(MessageIdReIndexingTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/UserReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                Optional.of(RunningOptionsDTO.toDTO(details.getRunningOptions()))))
            .typeName(UserReindexingTask.USER_RE_INDEXING.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/SingleMailboxReindexingTaskAdditionalInformationDTO.java`
#### Snippet
```java
                ))
            .typeName(SingleMailboxReindexingTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                    Optional.of(RunningOptionsDTO.toDTO(details.getRunningOptions()))))
                .typeName(FullReindexingTask.FULL_RE_INDEXING.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `mailbox/tools/indexer/src/main/java/org/apache/mailbox/tools/indexer/ReIndexingContextInformationDTO.java`
#### Snippet
```java
                    Optional.of(RunningOptionsDTO.toDTO(details.getRunningOptions()))))
                .typeName(ErrorRecoveryIndexationTask.PREVIOUS_FAILURES_INDEXING.asString())
                .withFactory(AdditionalInformationDTOModule::new);
        }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/protocols-pop3-distributed/src/main/java/org/apache/james/pop3server/mailbox/task/MetaDataFixInconsistenciesAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter(MetaDataFixInconsistenciesAdditionalInformationDTO::toDto)
            .typeName(MetaDataFixInconsistenciesTask.TASK_TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AbstractSSLAwareChannelPipelineFactory(int, int, int, boolean, Supplier, ChannelHandlerFactory, EventExecutorGroup)' as a member of raw type 'org.apache.james.protocols.netty.AbstractSSLAwareChannelPipelineFactory'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/NettyServer.java`
#### Snippet
```java
    protected AbstractChannelPipelineFactory createPipelineFactory() {

        return new AbstractSSLAwareChannelPipelineFactory(
            getTimeout(),
            maxCurConnections,
```

### UNCHECKED_WARNING
Unchecked overriding: return type requires unchecked conversion. Found 'org.apache.james.protocols.netty.AbstractChannelPipelineFactory', required 'io.netty.channel.ChannelInitializer'
in `protocols/netty/src/main/java/org/apache/james/protocols/netty/NettyServer.java`
#### Snippet
```java

    @Override
    protected AbstractChannelPipelineFactory createPipelineFactory() {

        return new AbstractSSLAwareChannelPipelineFactory(
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-rabbitmq/src/main/java/org/apache/james/webadmin/service/RepublishNotProcessedMailsTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(RepublishNotprocessedMailsTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'reactor.core.publisher.Sinks.Many'
in `server/protocols/protocols-imap4/src/main/java/org/apache/james/imapserver/netty/ImapRequestFrameDecoder.java`
#### Snippet
```java
        // we need to create a new one
        if (attachment.containsKey(SINK)) {
            sink = (Sinks.Many<byte[]>) attachment.get(SINK);
        } else {
            sink = Sinks.many().unicast().onBackpressureBuffer();
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUsersDataOfDomainTaskAdditionalInformationDTO.java`
#### Snippet
```java
                type, details.getDomain().asString(), details.getSuccessfulUsersCount(), details.getFailedUsersCount(), toSetString(details.getFailedUsers()), details.timestamp()))
            .typeName(DeleteUsersDataOfDomainTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.james.json.DTO' to 'U'
in `json/src/main/java/org/apache/james/json/JsonGenericSerializer.java`
#### Snippet
```java
    @SuppressWarnings("rawtypes")
    private U parseAsPolymorphicDTO(JsonNode jsonTree) throws IOException {
        return (U) objectMapper.readValue(objectMapper.treeAsTokens(jsonTree), DTO.class);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/DeleteUserDataTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(DeleteUserDataTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `server/protocols/webadmin/webadmin-data/src/main/java/org/apache/james/webadmin/service/UsernameChangeTaskAdditionalInformationDTO.java`
#### Snippet
```java
                details.timestamp()))
            .typeName(UsernameChangeTask.TYPE.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Enumeration' to 'java.util.Enumeration'
in `server/queue/queue-jms/src/main/java/org/apache/james/queue/jms/JMSCacheableMailQueue.java`
#### Snippet
```java
        builder.errorMessage(message.getStringProperty(JAMES_MAIL_ERROR_MESSAGE));
        builder.lastUpdated(new Date(message.getLongProperty(JAMES_MAIL_LAST_UPDATED)));
        Enumeration<String> properties = message.getPropertyNames();

        PerRecipientHeaders perRecipientHeaders = new PerRecipientHeaders();
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'T'. Reason: 'headerClaims.getHeader()' has raw type, so result of get is erased
in `server/protocols/jwt/src/main/java/org/apache/james/jwt/OidcJwtTokenVerifier.java`
#### Snippet
```java
        try {
            Jwt<Header, Claims> headerClaims = Jwts.parserBuilder().build().parseClaimsJwt(nonSignedToken);
            T claim = (T) headerClaims.getHeader().get(claimName);
            if (claim == null) {
                return Optional.empty();
```

### UNCHECKED_WARNING
Unchecked call to 'AdditionalInformationDTOModule(DTOConverter, DomainObjectConverter, Class, Class++, String)' as a member of raw type 'org.apache.james.server.task.json.dto.AdditionalInformationDTOModule'++
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/migration/MigrationTaskAdditionalInformationDTO.java`
#### Snippet
```java
            .toDTOConverter((details, type) -> new MigrationTaskAdditionalInformationDTO(type, details.getToVersion(), details.timestamp()))
            .typeName(MigrationTask.CASSANDRA_MIGRATION.asString())
            .withFactory(AdditionalInformationDTOModule::new);
    }

```

## RuleId[id=DataFlowIssue]
### DataFlowIssue
Passing a non-null argument to `Optional`
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/MailSizeEsmtpExtension.java`
#### Snippet
```java
                return next.onLine(session, line);
            } else {
                Long newSize = Optional.ofNullable(session.currentMessageSize())
                    .map(currentSize -> Long.valueOf(currentSize.intValue() + line.length))
                    .orElseGet(() -> Long.valueOf(line.length));
```

### DataFlowIssue
Argument `user` might be null
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/AuthCmdHandler.java`
#### Snippet
```java
                return doLoginAuthPassCheck(session, username, l);
            }
        }.setUsername(Username.of(user)));
        return AUTH_READY_PASSWORD_LOGIN;
    }
```

### DataFlowIssue
Argument `intendedRecipient` might be null
in `server/protocols/fetchmail/src/main/java/org/apache/james/fetchmail/MessageProcessor.java`
#### Snippet
```java
        // Set the filter states
        setBlacklistedRecipient(isBlacklistedRecipient(intendedRecipient));
        setRemoteRecipient(!isLocalServer(intendedRecipient));
        try {
            setUserUndefined(!isLocalRecipient(intendedRecipient));
```

### DataFlowIssue
Method invocation `equals` may produce `NullPointerException`
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/IncrementalRuleChange.java`
#### Snippet
```java
                    return Optional.empty();
                }
                if (!beforeIndexed.get(id).equals(afterIndexed.get(id))) {
                    updatedRules.add(afterIndexed.get(id));
                    position++;
```

### DataFlowIssue
Argument `afterIndexed.get(id)` might be null
in `server/data/data-jmap/src/main/java/org/apache/james/jmap/api/filtering/impl/IncrementalRuleChange.java`
#### Snippet
```java
                }
                if (!beforeIndexed.get(id).equals(afterIndexed.get(id))) {
                    updatedRules.add(afterIndexed.get(id));
                    position++;
                    continue;
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/CassandraSchemaVersionStartUpCheck.java`
#### Snippet
```java
        String upgradeVersionMessage =
            String.format("Current schema version is %d. Recommended version is %d",
                versionManager.computeVersion().block().getValue(),
                versionManager.getMaximumSupportedVersion().getValue());
        LOGGER.warn(upgradeVersionMessage);
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/CassandraSchemaVersionStartUpCheck.java`
#### Snippet
```java
            String.format("Current schema version is %d whereas the maximum supported version is %d. " +
                "Recommended version is %d.",
                versionManager.computeVersion().block().getValue(),
                versionManager.getMaximumSupportedVersion().getValue(),
                versionManager.getMaximumSupportedVersion().getValue());
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `server/container/guice/cassandra/src/main/java/org/apache/james/modules/mailbox/CassandraSchemaVersionStartUpCheck.java`
#### Snippet
```java
            String.format("Current schema version is %d whereas minimum required version is %d. " +
                "Recommended version is %d",
                versionManager.computeVersion().block().getValue(),
                versionManager.getMinimumSupportedVersion().getValue(),
                versionManager.getMaximumSupportedVersion().getValue());
```

### DataFlowIssue
Unboxing of `counterDAO.countMessagesInMailbox(originId).defaultIfEmpty(0L).block()` may produce `NullPointerException`
in `server/protocols/webadmin/webadmin-cassandra/src/main/java/org/apache/james/webadmin/routes/CassandraMailboxMergingRoutes.java`
#### Snippet
```java
        CassandraId destinationId = mailboxIdFactory.fromString(mailboxMergingRequest.getMergeDestination());

        long totalMessagesToMove = counterDAO.countMessagesInMailbox(originId).defaultIfEmpty(0L).block();
        return new MailboxMergingTask(mailboxMergingTaskRunner, totalMessagesToMove, originId, destinationId);
    }
```

### DataFlowIssue
Condition `message instanceof ActiveMQBlobMessage` is redundant and can be replaced with a null check
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQMailQueueItem.java`
#### Snippet
```java
        super.done(success);
        if (success == CompletionStatus.SUCCESS) {
            if (message instanceof ActiveMQBlobMessage && !getMail().getAttribute(JAMES_REUSE_BLOB_URL).isPresent()) {

                // This should get removed once this jira issue was fixed
```

### DataFlowIssue
Condition `m instanceof ActiveMQBlobMessage` is redundant and can be replaced with a null check
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
        // Handle the blob messages
        for (Message m : mList) {
            if (m instanceof ActiveMQBlobMessage) {
                try {
                    // Should get remove once this issue is closed:
```

### DataFlowIssue
Condition `message instanceof BlobMessage` is redundant and can be replaced with a null check
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
    @Override
    protected MimeMessage mimeMessage(Message message) throws MessagingException, JMSException {
        if (message instanceof BlobMessage) {
            try {
                BlobMessage blobMessage = (BlobMessage) message;
```

### DataFlowIssue
Condition `m instanceof ActiveMQBlobMessage` is redundant and can be replaced with a null check
in `server/queue/queue-activemq/src/main/java/org/apache/james/queue/activemq/ActiveMQCacheableMailQueue.java`
#### Snippet
```java
    @Override
    protected Message copy(Session session, Message m) throws JMSException {
        if (m instanceof ActiveMQBlobMessage) {
            ActiveMQBlobMessage b = (ActiveMQBlobMessage) m;
            ActiveMQBlobMessage copy = (ActiveMQBlobMessage) getAMQSession(session).createBlobMessage(b.getURL());
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaManager.java`
#### Snippet
```java
            Pair.of(Quota.Scope.Global, dao.getGlobalMaxStorage()))
        .filter(pair -> pair.getValue().isPresent())
        .collect(ImmutableMap.toImmutableMap(Pair::getKey, value -> value.getValue().get()));
    }

```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/quota/JPAPerUserMaxQuotaManager.java`
#### Snippet
```java
            Pair.of(Quota.Scope.Global, dao.getGlobalMaxMessage()))
        .filter(pair -> pair.getValue().isPresent())
        .collect(ImmutableMap.toImmutableMap(Pair::getKey, value -> value.getValue().get()));
    }

```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `mailet/icalendar/src/main/java/org/apache/james/transport/mailets/ICalendarParser.java`
#### Snippet
```java
            .stream()
            .flatMap(entry -> createCalendar(entry.getKey(), entry.getValue().getValue()))
            .collect(ImmutableMap.toImmutableMap(Pair::getKey, pair -> AttributeValue.ofUnserializable(pair.getValue())));

        mail.setAttribute(new Attribute(destinationAttributeName, AttributeValue.of(calendars)));
```

### DataFlowIssue
Passing a non-null argument to `Optional`
in `server/mailet/mailetcontainer-impl/src/main/java/org/apache/james/mailetcontainer/impl/matchers/Not.java`
#### Snippet
```java
    @Override
    public Collection<MailAddress> match(Mail mail) throws MessagingException {
        Collection<MailAddress> finalResult = Optional.ofNullable(Lists.newArrayList(mail.getRecipients())).orElse(new ArrayList<>());
        for (Matcher matcher : getMatchers()) {
            Collection<MailAddress> matcherResult = matcher.match(mail);
```

### DataFlowIssue
Dereference of `getObject(resolvedBucketName, blobId) .onErrorMap(NoSuchBucketException.class, e -> new ...` may produce `NullPointerException`
in `server/blob/blob-s3/src/main/java/org/apache/james/blob/objectstorage/aws/S3BlobStoreDAO.java`
#### Snippet
```java
        BucketName resolvedBucketName = bucketNameResolver.resolve(bucketName);

        return ReactorUtils.toInputStream(getObject(resolvedBucketName, blobId)
            .onErrorMap(NoSuchBucketException.class, e -> new ObjectNotFoundException("Bucket not found " + resolvedBucketName.asString(), e))
            .onErrorMap(NoSuchKeyException.class, e -> new ObjectNotFoundException("Blob not found " + blobId.asString() + " in bucket " + resolvedBucketName.asString(), e))
            .block()
            .flux);
    }
```

### DataFlowIssue
Variable is already assigned to this value
in `mailet/ai/src/main/java/org/apache/james/ai/classic/Tokenizer.java`
#### Snippet
```java
                ch2 = (char) i;
                if (Character.isDigit(ch2)) {
                    tokenCharFound = true;
                    previousWasDigit = true;
                    token.append(ch);
```

### DataFlowIssue
Condition `obj instanceof ProtocolElement` is redundant and can be replaced with a null check
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
        while (elementsIterator.hasNext()) {
            Object obj = elementsIterator.next();
            if (obj instanceof ProtocolElement) {
                ProtocolElement test = (ProtocolElement) obj;
                test.testProtocol(sessions, continueAfterFailure);
```

### DataFlowIssue
Condition `obj instanceof ProtocolElement` is redundant and can be replaced with a null check
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
                while (elementsIterator.hasNext()) {
                    Object obj = elementsIterator.next();
                    if (obj instanceof ProtocolElement) {
                        nextTest = (ProtocolElement) obj;

```

### DataFlowIssue
The call to 'checkArgument' always fails, according to its method contracts
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/client/RspamdClientConfiguration.java`
#### Snippet
```java
        Optional<Integer> rspamdTimeoutConfigure = Optional.ofNullable(config.getInteger("rspamdTimeout", null))
            .map(i -> {
                Preconditions.checkArgument(i > 0, "rspamdTimeout should be positive number");
                return i;
            });
```

### DataFlowIssue
Variable is already assigned to this value
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/core/ExtraDotInputStream.java`
#### Snippet
```java
    public ExtraDotInputStream(InputStream in) {
        this.in = new PushbackInputStream(in, 2);
        startLine = true;
    }
    
```

### DataFlowIssue
Method invocation `getBody` will produce `NullPointerException`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/ResultUtils.java`
#### Snippet
```java
                    fieldValue = ContentUtil.decode(raw, off, len - off);
                } else {
                    fieldValue = field.getBody();
                }
                if (fieldValue.endsWith("\r\f")) {
```

### DataFlowIssue
Method invocation `sanitize` may produce `NullPointerException`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/quota/StoreQuotaManager.java`
#### Snippet
```java
    public Quotas getQuotas(QuotaRoot quotaRoot) {
        MaxQuotaManager.QuotaDetails quotaDetails = maxQuotaManager.quotaDetails(quotaRoot);
        CurrentQuotas currentQuotas = Mono.from(currentQuotaManager.getCurrentQuotas(quotaRoot)).block().sanitize();
        return new Quotas(
            Quota.<QuotaCountLimit, QuotaCountUsage>builder()
```

### DataFlowIssue
Method invocation `sanitize` may produce `NullPointerException`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/quota/StoreQuotaManager.java`
#### Snippet
```java
        Map<Scope, QuotaSizeLimit> maxStorageDetails = maxQuotaManager.listMaxStorageDetails(quotaRoot);
        return Quota.<QuotaSizeLimit, QuotaSizeUsage>builder()
            .used(Mono.from(currentQuotaManager.getCurrentStorage(quotaRoot)).block().sanitize())
            .computedLimit(maxQuotaManager.getMaxStorage(maxStorageDetails).orElse(QuotaSizeLimit.unlimited()))
            .limitsByScope(maxStorageDetails)
```

### DataFlowIssue
Method invocation `sanitize` may produce `NullPointerException`
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/quota/StoreQuotaManager.java`
#### Snippet
```java
        Map<Scope, QuotaCountLimit> maxMessageDetails = maxQuotaManager.listMaxMessagesDetails(quotaRoot);
        return Quota.<QuotaCountLimit, QuotaCountUsage>builder()
            .used(Mono.from(currentQuotaManager.getCurrentMessageCount(quotaRoot)).block().sanitize())
            .computedLimit(maxQuotaManager.getMaxMessage(maxMessageDetails).orElse(QuotaCountLimit.unlimited()))
            .limitsByScope(maxMessageDetails)
```

### DataFlowIssue
Argument `ClassLoader.getSystemResourceAsStream(filename)` might be null
in `server/container/util/src/main/java/org/apache/james/util/ClassLoaderUtils.java`
#### Snippet
```java
    public static String getSystemResourceAsString(String filename, Charset charset) {
        try {
            return IOUtils.toString(ClassLoader.getSystemResourceAsStream(filename), charset);
        } catch (IOException e) {
            throw new RuntimeException(e);
```

### DataFlowIssue
Argument `ClassLoader.getSystemResourceAsStream(filename)` might be null
in `server/container/util/src/main/java/org/apache/james/util/ClassLoaderUtils.java`
#### Snippet
```java
    public static byte[] getSystemResourceAsByteArray(String filename) {
        try {
            return IOUtils.toByteArray(ClassLoader.getSystemResourceAsStream(filename));
        } catch (IOException e) {
            throw new RuntimeException(e);
```

### DataFlowIssue
Stream might have already been linked or consumed
in `server/container/util/src/main/java/org/apache/james/util/streams/Limit.java`
#### Snippet
```java

    public <T> Stream<T> applyOnStream(Stream<T> stream) {
        return limit
            .map(stream::limit)
            .orElse(stream);
    }

```

### DataFlowIssue
Switch label `MULTIPART_ALTERNATIVE` is unreachable
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java
    private MessageContent parseMultipartContent(Entity entity, Multipart multipart) throws IOException {
        switch (entity.getMimeType()) {
        case MULTIPART_ALTERNATIVE:
            return retrieveHtmlAndPlainTextContent(multipart);
        default:
```

### DataFlowIssue
Method reference invocation `Map.Entry::getKey` may produce `NullPointerException`
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxACL.java`
#### Snippet
```java
                except(entry.getValue(), other.getEntries().get(entry.getKey()))))
            .filter(pair -> !pair.getValue().isEmpty())
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue)));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getValue` may produce `NullPointerException`
in `mailbox/api/src/main/java/org/apache/james/mailbox/model/MailboxACL.java`
#### Snippet
```java
                except(entry.getValue(), other.getEntries().get(entry.getKey()))))
            .filter(pair -> !pair.getValue().isEmpty())
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue)));
    }

```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryPerUserMaxQuotaManager.java`
#### Snippet
```java
                Pair.of(Quota.Scope.Global, maxStorage))
            .filter(pair -> pair.getValue().isPresent())
            .collect(ImmutableMap.toImmutableMap(Pair::getKey, value -> value.getValue().get()));
    }

```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `mailbox/memory/src/main/java/org/apache/james/mailbox/inmemory/quota/InMemoryPerUserMaxQuotaManager.java`
#### Snippet
```java
                Pair.of(Quota.Scope.Global, maxMessage))
            .filter(pair -> pair.getValue().isPresent())
            .collect(ImmutableMap.toImmutableMap(Pair::getKey, value -> value.getValue().get()));
    }

```

### DataFlowIssue
Method invocation `forEach` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/FlagsExtractor.java`
#### Snippet
```java
        Flags flags = new Flags();
        row.get(Flag.USER_FLAGS, SET_OF_STRINGS_CODEC)
            .forEach(flags::add);
        return flags;
    }
```

### DataFlowIssue
Method invocation `forEach` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/FlagsExtractor.java`
#### Snippet
```java
        }
        row.get(Flag.USER_FLAGS, SET_OF_STRINGS_CODEC)
            .forEach(flags::add);
        return flags;
    }
```

### DataFlowIssue
Method invocation `stream` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraThreadLookupDAO.java`
#### Snippet
```java
    private ThreadTablePartitionKey readRow(Row row) {
        Set<MimeMessageId> mimeMessageIds = row.get(MIME_MESSAGE_IDS, SET_OF_STRINGS_CODEC)
            .stream()
            .map(MimeMessageId::new)
            .collect(ImmutableSet.toImmutableSet());
```

### DataFlowIssue
Argument `row.getString(USERNAME)` might be null
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraThreadLookupDAO.java`
#### Snippet
```java
            .map(MimeMessageId::new)
            .collect(ImmutableSet.toImmutableSet());
        return new ThreadTablePartitionKey(Username.of(row.getString(USERNAME)), mimeMessageIds);
    }
}
```

### DataFlowIssue
Method invocation `stream` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraACLDAOV2.java`
#### Snippet
```java
                MailboxACL.EntryKey entryKey = MailboxACL.EntryKey.deserialize(row.getString(CassandraACLV2Table.KEY));
                MailboxACL.Rfc4314Rights rights = row.getSet(CassandraACLV2Table.RIGHTS, String.class)
                    .stream()
                    .map(Throwing.function(MailboxACL.Rfc4314Rights::deserialize))
                    .reduce(MailboxACL.NO_RIGHTS, Throwing.binaryOperator(MailboxACL.Rfc4314Rights::union));
```

### DataFlowIssue
Method invocation `get` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMailboxDAO.java`
#### Snippet
```java
                return new Mailbox(
                    new MailboxPath(
                        mailboxBase.get(CassandraMailboxTable.MailboxBase.NAMESPACE, TypeCodecs.TEXT),
                        Username.of(mailboxBase.get(CassandraMailboxTable.MailboxBase.USER, TypeCodecs.TEXT)),
                        row.get(NAME, TypeCodecs.TEXT)),
```

### DataFlowIssue
Argument `mailboxBase.get(CassandraMailboxTable.MailboxBase.USER, TypeCodecs.TEXT)` might be null
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMailboxDAO.java`
#### Snippet
```java
                    new MailboxPath(
                        mailboxBase.get(CassandraMailboxTable.MailboxBase.NAMESPACE, TypeCodecs.TEXT),
                        Username.of(mailboxBase.get(CassandraMailboxTable.MailboxBase.USER, TypeCodecs.TEXT)),
                        row.get(NAME, TypeCodecs.TEXT)),
                    uidValidity,
```

### DataFlowIssue
Method invocation `orElse` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraModSeqProvider.java`
#### Snippet
```java
        return unbox(() -> findHighestModSeq((CassandraId) mailboxId,
            Optional.of(lwtProfile).filter(any -> cassandraConfiguration.isUidReadStrongConsistency()))
            .block().orElse(ModSeq.first()));
    }

```

### DataFlowIssue
Argument `row.get(USER, TypeCodecs.TEXT)` might be null
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMailboxPathV3DAO.java`
#### Snippet
```java

    private Mailbox fromRowToCassandraIdAndPath(Row row) {
        return fromRow(row, Username.of(row.get(USER, TypeCodecs.TEXT)), row.get(NAMESPACE, TypeCodecs.TEXT));
    }

```

### DataFlowIssue
Unboxing of `countAnnotationsReactive(mailboxId).block()` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraAnnotationMapper.java`
#### Snippet
```java
    @Override
    public int countAnnotations(MailboxId mailboxId) {
        return countAnnotationsReactive(mailboxId).block();
    }

```

### DataFlowIssue
Unboxing of `existReactive(mailboxId, mailboxAnnotation).block()` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraAnnotationMapper.java`
#### Snippet
```java
    @Override
    public boolean exist(MailboxId mailboxId, MailboxAnnotation mailboxAnnotation) {
        return existReactive(mailboxId, mailboxAnnotation).block();
    }

```

### DataFlowIssue
Method invocation `setUid` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
            .map(uidsAndModSeq -> Streams.zip(uidsAndModSeq, messages.stream(),
                (uidAndModseq, aMessage) -> {
                    aMessage.setUid(uidAndModseq.getKey());
                    aMessage.setModSeq((uidAndModseq.getValue()));
                    return aMessage;
```

### DataFlowIssue
Method invocation `getKey` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
            .map(uidsAndModSeq -> Streams.zip(uidsAndModSeq, messages.stream(),
                (uidAndModseq, aMessage) -> {
                    aMessage.setUid(uidAndModseq.getKey());
                    aMessage.setModSeq((uidAndModseq.getValue()));
                    return aMessage;
```

### DataFlowIssue
Method invocation `iterator` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
    @Override
    public Iterator<UpdatedFlags> updateFlags(Mailbox mailbox, FlagsUpdateCalculator flagUpdateCalculator, MessageRange range) {
        return updateFlagsReactive(mailbox, flagUpdateCalculator, range).block().iterator();
    }

```

### DataFlowIssue
Method invocation `isAfterOrEquals` may produce `NullPointerException`
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/task/SolveMailboxInconsistenciesService.java`
#### Snippet
```java
        SchemaVersion version = versionManager.computeVersion().block();

        boolean isVersionValid = version.isAfterOrEquals(MAILBOX_PATH_V_3_MIGRATION_PERFORMED_VERSION);

        Preconditions.checkState(isVersionValid,
```

### DataFlowIssue
Method invocation `version` may produce `NullPointerException`
in `server/container/guice/opensearch/src/main/java/org/apache/james/modules/mailbox/OpenSearchStartUpCheck.java`
#### Snippet
```java
    public CheckResult check() {
        try {
            Version esVersion = Version.parse(client.info().block().version().number());

            if (isCompatible(esVersion)) {
```

### DataFlowIssue
Method invocation `getKey` may produce `NullPointerException`
in `server/mailet/dkim/src/main/java/org/apache/james/jdkim/mailets/MimeMessageHeaders.java`
#### Snippet
```java
            .stream()
            .collect(ImmutableListMultimap.toImmutableListMultimap(
                pair -> pair.getKey().toLowerCase(Locale.US),
                Pair::getValue));
    }
```

### DataFlowIssue
Argument `getUserDirectory(username).listFiles()` might be null
in `server/data/data-file/src/main/java/org/apache/james/sieverepository/file/SieveFileRepository.java`
#### Snippet
```java
    @Override
    public void haveSpace(Username username, ScriptName name, long size) throws QuotaExceededException, StorageException {
        long usedSpace = Arrays.stream(getUserDirectory(username).listFiles())
            .filter(file -> !(file.getName().equals(name.getValue()) || SYSTEM_FILES.contains(file.getName())))
            .mapToLong(File::length)
```

### DataFlowIssue
Argument `listeners` might be null
in `event-bus/distributed/src/main/java/org/apache/james/events/LocalListenerRegistry.java`
#### Snippet
```java
            boolean listenersContainRequested = Optional.ofNullable(listeners).orElse(ImmutableSet.of()).contains(listener);
            if (listenersContainRequested) {
                ImmutableSet<EventListener.ReactiveEventListener> remainingListeners = removeListenerFromSet(listener, listeners);
                if (remainingListeners.isEmpty()) {
                    lastListenerRemoved.set(true);
```

### DataFlowIssue
Unboxing of `Flux.from(delegationStore.authorizedUsers(otherUserId)).hasElement(userId).block()` may produce `NullPointerException`
in `server/container/mailbox-adapter/src/main/java/org/apache/james/adapter/mailbox/DelegationStoreAuthorizator.java`
#### Snippet
```java
    @Override
    public AuthorizationState canLoginAsOtherUser(Username userId, Username otherUserId) throws MailboxException {
        boolean isAuthorized = Flux.from(delegationStore.authorizedUsers(otherUserId)).hasElement(userId).block();
        try {
            if (isAuthorized || isAdministrator(userId)) {
```

### DataFlowIssue
Argument `createGroupWorkQueue() .then(retryHandler.createRetryExchange(queueName)) ...` might be null
in `event-bus/distributed/src/main/java/org/apache/james/events/GroupRegistration.java`
#### Snippet
```java
        scheduler = Schedulers.newBoundedElastic(EventBus.EXECUTION_RATE, ReactorUtils.DEFAULT_BOUNDED_ELASTIC_QUEUESIZE, "group-handler");
        receiverSubscriber = Optional
            .of(createGroupWorkQueue()
                .then(retryHandler.createRetryExchange(queueName))
                .then(Mono.fromCallable(this::consumeWorkQueue))
                .retryWhen(Retry.backoff(retryBackoff.getMaxRetries(), retryBackoff.getFirstBackoff()).jitter(retryBackoff.getJitterFactor()).scheduler(Schedulers.boundedElastic()))
                .block());
        return this;
    }
```

### DataFlowIssue
Argument `namingStrategy.deadLetterQueue().getName()` might be null
in `event-bus/distributed/src/main/java/org/apache/james/events/EventDispatcher.java`
#### Snippet
```java
            sender.bind(BindingSpecification.binding()
                .exchange(namingStrategy.deadLetterExchange())
                .queue(namingStrategy.deadLetterQueue().getName())
                .routingKey(EMPTY_ROUTING_KEY)))
            .then()
```

### DataFlowIssue
Method invocation `size` may produce `NullPointerException`
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/RandomStoring.java`
#### Snippet
```java
        return ThreadLocalRandom
            .current()
            .ints(0, reroutingInfos.size())
            .distinct()
            .mapToObj(reroutingInfos::get)
```

### DataFlowIssue
Argument `mailAddressSplit.get(!isLocal)` might be null
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/RecipientRewriteTableProcessor.java`
#### Snippet
```java
        Map<Boolean, List<MailAddress>> mailAddressSplit = splitRemoteMailAddresses(mappings);

        forwardToRemoteAddress(mail, recipient, mailAddressSplit.get(!isLocal));

        return mailAddressSplit.get(isLocal);
```

### DataFlowIssue
Argument `Mono.from(configurationStore.list(domain)).block()` might be null
in `server/mailet/mailets/src/main/java/org/apache/james/transport/matchers/dlp/DlpRulesLoader.java`
#### Snippet
```java
        @Override
        public DlpDomainRules load(Domain domain) {
          return toRules(Mono.from(configurationStore.list(domain)).block());
        }

```

### DataFlowIssue
Method invocation `contains` may produce `NullPointerException`
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/SubscribeAllTask.java`
#### Snippet
```java

            subscriptions.stream()
                .filter(subscription -> !names.contains(subscription))
                .forEach(Throwing.consumer(subscription -> {
                    subscriptionManager.unsubscribe(session, subscription);
```

### DataFlowIssue
Method invocation `stream` may produce `NullPointerException`
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/SubscribeAllTask.java`
#### Snippet
```java
                    unsubscribedCount.incrementAndGet();
                }));
            names.stream()
                .filter(name -> !subscriptions.contains(name))
                .forEach(Throwing.consumer(name -> {
```

### DataFlowIssue
Method invocation `getLeft` may produce `NullPointerException`
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/QuotaMailingListenerConfiguration.java`
#### Snippet
```java
                    Optional.ofNullable(node.getString(XmlKeys.SUBJECT_TEMPLATE)))))
            .collect(ImmutableMap.toImmutableMap(
                pair -> new QuotaThreshold(pair.getLeft()),
                Pair::getRight));
    }
```

### DataFlowIssue
Argument `results` might be null
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/routes/HealthCheckRoutes.java`
#### Snippet
```java
    public Object validateHealthChecks(Request request, Response response) {
        List<Result> results = executeHealthChecks().collectList().block();
        ResultStatus status = retrieveAggregationStatus(results);
        response.status(getCorrespondingStatusCode(status));
        return new HeathCheckAggregationExecutionResultDto(status, mapResultToDto(results));
```

### DataFlowIssue
Argument `result` might be null
in `server/protocols/webadmin/webadmin-core/src/main/java/org/apache/james/webadmin/routes/HealthCheckRoutes.java`
#### Snippet
```java

        Result result = Mono.from(healthCheck.check()).block();
        logFailedCheck(result);
        response.status(getCorrespondingStatusCode(result.getStatus()));
        return new HealthCheckExecutionResultDto(result);
```

### DataFlowIssue
Unboxing of `getSizeReactive() .block()` may produce `NullPointerException`
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/CassandraMailQueueView.java`
#### Snippet
```java
    @Override
    public long getSize() {
        return getSizeReactive()
            .block();
    }

```

### DataFlowIssue
Unboxing of `cassandraMailQueueBrowser.browseReferences(mailQueueName) .map(EnqueuedItemWithSlicingCo...` may produce `NullPointerException`
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/CassandraMailQueueView.java`
#### Snippet
```java

    private long browseThenDelete(DeleteCondition deleteCondition) {
        return cassandraMailQueueBrowser.browseReferences(mailQueueName)
            .map(EnqueuedItemWithSlicingContext::getEnqueuedItem)
            .filter(deleteCondition::shouldBeDeleted)
            .flatMap(mailReference -> cassandraMailQueueMailDelete.considerDeleted(mailReference.getEnqueueId(), mailQueueName)
                .then(Mono.from(mimeMessageStore.delete(mailReference.getPartsId()))), DELETION_CONCURRENCY)
            .count()
            .doOnNext(ignored -> cassandraMailQueueMailDelete.updateBrowseStart(mailQueueName))
            .block();
    }

```

### DataFlowIssue
Method invocation `stream` may produce `NullPointerException`
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/EnqueuedMailsDaoUtil.java`
#### Snippet
```java
            .orElse(null);
        List<MailAddress> recipients = row.getList(RECIPIENTS, String.class)
            .stream()
            .map(Throwing.function(MailAddress::new))
            .collect(ImmutableList.toImmutableList());
```

### DataFlowIssue
Argument `row.getList(PER_RECIPIENT_SPECIFIC_HEADERS, TupleValue.class)` might be null
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/EnqueuedMailsDaoUtil.java`
#### Snippet
```java

        Map<String, ByteBuffer> rawAttributes = row.getMap(ATTRIBUTES, String.class, ByteBuffer.class);
        PerRecipientHeaders perRecipientHeaders = fromList(row.getList(PER_RECIPIENT_SPECIFIC_HEADERS, TupleValue.class));

        MailImpl mail = MailImpl.builder()
```

### DataFlowIssue
Argument `rawAttributes` might be null
in `server/queue/queue-rabbitmq/src/main/java/org/apache/james/queue/rabbitmq/view/cassandra/EnqueuedMailsDaoUtil.java`
#### Snippet
```java
            .state(state)
            .addAllHeadersForRecipients(perRecipientHeaders)
            .addAttributes(toAttributes(rawAttributes))
            .build();
        EnqueuedItem enqueuedItem = EnqueuedItem.builder()
```

### DataFlowIssue
Dereference of `names` may produce `NullPointerException`
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
        final String[] names = directory.list(numFilter);

        for (String origFilename : names) {
            // This needs to handle (skip over) the possible repository
            // numbers
```

### DataFlowIssue
Argument `names` might be null
in `server/data/data-library/src/main/java/org/apache/james/repository/file/AbstractFileRepository.java`
#### Snippet
```java
        final String[] names = storeDir.list(filter);

        return Arrays.stream(names).map(this::decode);
    }

```

### DataFlowIssue
Method invocation `getRight` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/rrt/cassandra/CassandraRecipientRewriteTable.java`
#### Snippet
```java
            .collect(ImmutableMap.toImmutableMap(
                Pair::getLeft,
                pair -> MappingsImpl.fromMappings(pair.getRight()),
                Mappings::union))
            .block();
```

### DataFlowIssue
Argument `row.getString(SOURCE)` might be null
in `server/data/data-cassandra/src/main/java/org/apache/james/rrt/cassandra/CassandraMappingsSourcesDAO.java`
#### Snippet
```java
                .setString(MAPPING_TYPE, mapping.getType().asPrefix())
                .setString(MAPPING_VALUE, mapping.getMappingValue()))
            .map(row -> MappingSource.parse(row.getString(SOURCE)));
    }

```

### DataFlowIssue
Argument `row.getInstant(DATE)` might be null
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraActiveScriptDAO.java`
#### Snippet
```java
            .map(row -> new ActiveScriptInfo(
                new ScriptName(row.getString(SCRIPT_NAME)),
                ZonedDateTime.ofInstant(row.getInstant(DATE), ZoneOffset.UTC)));
    }

```

### DataFlowIssue
Unboxing of `executor.executeReturnApplied(removeStatement.bind() .set(DOMAIN, domain.asString(),...` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/domainlist/cassandra/CassandraDomainList.java`
#### Snippet
```java
    @Override
    public void doRemoveDomain(Domain domain) throws DomainListException {
        boolean executed = executor.executeReturnApplied(removeStatement.bind()
                .set(DOMAIN, domain.asString(), TypeCodecs.TEXT))
            .block();
        if (!executed) {
            throw new DomainListException(domain.name() + " was not found");
```

### DataFlowIssue
Unboxing of `executor.executeReturnApplied(insertStatement.bind() .set(DOMAIN, domain.asString(),...` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/domainlist/cassandra/CassandraDomainList.java`
#### Snippet
```java
    @Override
    public void addDomain(Domain domain) throws DomainListException {
        boolean executed = executor.executeReturnApplied(insertStatement.bind()
                .set(DOMAIN, domain.asString(), TypeCodecs.TEXT))
            .block();
        if (!executed) {
            throw new DomainListException(domain.name() + " already exists.");
```

### DataFlowIssue
Method invocation `isPresent` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/domainlist/cassandra/CassandraDomainList.java`
#### Snippet
```java
                .set(DOMAIN, domain.asString(), TypeCodecs.TEXT))
            .block()
            .isPresent();
    }

```

### DataFlowIssue
Unboxing of `executor.executeSingleRow(countUserStatement.bind()) .map(row -> Ints.checkedCast(row.ge...` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/user/cassandra/CassandraUsersDAO.java`
#### Snippet
```java
    @Override
    public int countUsers() {
        return executor.executeSingleRow(countUserStatement.bind())
            .map(row -> Ints.checkedCast(row.getLong(0)))
            .block();
    }

```

### DataFlowIssue
Unboxing of `executor.executeReturnApplied( removeUserStatement.bind() .setSt...` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/user/cassandra/CassandraUsersDAO.java`
#### Snippet
```java
    @Override
    public void removeUser(Username name) throws UsersRepositoryException {
        boolean executed = executor.executeReturnApplied(
                removeUserStatement.bind()
                    .setString(NAME, name.asString()))
            .block();

        if (!executed) {
```

### DataFlowIssue
Unboxing of `executor.executeReturnApplied( updateUserStatement.bind() .setSt...` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/user/cassandra/CassandraUsersDAO.java`
#### Snippet
```java
        Preconditions.checkArgument(user instanceof DefaultUser);
        DefaultUser defaultUser = (DefaultUser) user;
        boolean executed = executor.executeReturnApplied(
                updateUserStatement.bind()
                    .setString(REALNAME, defaultUser.getUserName().asString())
                    .setString(PASSWORD, defaultUser.getHashedPassword())
                    .setString(ALGORITHM, defaultUser.getHashAlgorithm().asString())
                    .setString(NAME, defaultUser.getUserName().asString()))
            .block();

        if (!executed) {
```

### DataFlowIssue
Argument `row.getString(NAME)` might be null
in `server/data/data-cassandra/src/main/java/org/apache/james/user/cassandra/CassandraUsersDAO.java`
#### Snippet
```java
                getUserStatement.bind()
                    .setString(NAME, name.asString()))
            .map(row -> new DefaultUser(Username.of(row.getString(NAME)), row.getString(PASSWORD),
                Algorithm.of(row.getString(ALGORITHM), fallbackHashingMode), preferredAlgorithm));
    }
```

### DataFlowIssue
Unboxing of `executor.executeReturnApplied( insertStatement.bind() .setString...` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/user/cassandra/CassandraUsersDAO.java`
#### Snippet
```java
        DefaultUser user = new DefaultUser(username, preferredAlgorithm, preferredAlgorithm);
        user.setPassword(password);
        boolean executed = executor.executeReturnApplied(
                insertStatement.bind()
                    .setString(NAME, user.getUserName().asString())
                    .setString(REALNAME, user.getUserName().asString())
                    .setString(PASSWORD, user.getHashedPassword())
                    .setString(ALGORITHM, user.getHashAlgorithm().asString()))
            .block();

        if (!executed) {
```

### DataFlowIssue
Unboxing of `hasUserQuota.zipWith(hasGlobalQuota, (a, b) -> a || b) .block()` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
        Mono<Boolean> hasGlobalQuota = cassandraSieveQuotaDAO.getQuota().map(Optional::isPresent);

        return hasUserQuota.zipWith(hasGlobalQuota, (a, b) -> a || b)
            .block();
    }

```

### DataFlowIssue
Method invocation `isPresent` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
        return cassandraSieveQuotaDAO.getQuota()
            .block()
            .isPresent();
    }

```

### DataFlowIssue
Unboxing of `cassandraSieveDAO.deleteScriptInCassandra(username, name).defaultIfEmpty(false).block()` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
    public void deleteScript(Username username, ScriptName name) throws ScriptNotFoundException, IsActiveException {
        ensureIsNotActive(username, name);
        if (!cassandraSieveDAO.deleteScriptInCassandra(username, name).defaultIfEmpty(false).block()) {
            throw new ScriptNotFoundException();
        }
```

### DataFlowIssue
Method invocation `orElseThrow` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
        return cassandraSieveQuotaDAO.getQuota(username)
            .block()
            .orElseThrow(QuotaNotFoundException::new);
    }

```

### DataFlowIssue
Method invocation `orElseThrow` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
        return cassandraSieveQuotaDAO.getQuota()
            .block()
            .orElseThrow(QuotaNotFoundException::new);
    }

```

### DataFlowIssue
Unboxing of `newScriptExists.block()` may produce `NullPointerException`
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java

        oldScript.block();
        if (newScriptExists.block()) {
            throw new DuplicateException();
        }
```

### DataFlowIssue
Condition `entry instanceof AttributeValue` is redundant and can be replaced with a null check
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public static AttributeValue<Collection<AttributeValue<?>>> of(Collection<AttributeValue<?>> value) {
        Preconditions.checkNotNull(value, "value should not be null");
        Preconditions.checkArgument(value.stream().allMatch(entry -> entry instanceof AttributeValue),
            "Expecting Collection<AttributeValue<?>: invalid typing.");
        return new AttributeValue<>(value, new Serializer.CollectionSerializer());
```

### DataFlowIssue
Condition `entry.getKey() instanceof String` is redundant and can be replaced with a null check
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public static AttributeValue<Map<String, AttributeValue<?>>> of(Map<String, AttributeValue<?>> value) {
        Preconditions.checkNotNull(value, "value should not be null");
        Preconditions.checkArgument(value.entrySet().stream().allMatch(entry -> (entry.getKey() instanceof String) && (entry.getValue() instanceof AttributeValue)),
            "Expecting Map<String, AttributeValue<?>>: invalid typing.");
        return new AttributeValue<>(value, new Serializer.MapSerializer());
```

### DataFlowIssue
Condition `entry.getValue() instanceof AttributeValue` is redundant and can be replaced with a null check
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
    public static AttributeValue<Map<String, AttributeValue<?>>> of(Map<String, AttributeValue<?>> value) {
        Preconditions.checkNotNull(value, "value should not be null");
        Preconditions.checkArgument(value.entrySet().stream().allMatch(entry -> (entry.getKey() instanceof String) && (entry.getValue() instanceof AttributeValue)),
            "Expecting Map<String, AttributeValue<?>>: invalid typing.");
        return new AttributeValue<>(value, new Serializer.MapSerializer());
```

### DataFlowIssue
Method invocation `toString` may produce `NullPointerException`
in `mailet/api/src/main/java/org/apache/mailet/AttributeValue.java`
#### Snippet
```java
                .flatMap(AttributeValue::deserialize)
                .map(AttributeValue::ofAny)
                .orElseThrow(() -> new IllegalStateException("unable to deserialize " + input.toString()));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getKey` may produce `NullPointerException`
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
                .stream()
                .map(Throwing.function(entry -> Pair.of(new MailAddress(entry.getKey()), Notify.fromAttributeValue(entry.getValue()))))
                .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue)))
            .orElse(ImmutableMap.of());
        Map<MailAddress, MailAddress> orcpt = dsnAttributeValues.getOrcptAttributeValue()
```

### DataFlowIssue
Method reference invocation `Map.Entry::getValue` may produce `NullPointerException`
in `mailet/api/src/main/java/org/apache/mailet/DsnParameters.java`
#### Snippet
```java
                .stream()
                .map(Throwing.function(entry -> Pair.of(new MailAddress(entry.getKey()), Notify.fromAttributeValue(entry.getValue()))))
                .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue)))
            .orElse(ImmutableMap.of());
        Map<MailAddress, MailAddress> orcpt = dsnAttributeValues.getOrcptAttributeValue()
```

### DataFlowIssue
Argument `identities` might be null
in `server/protocols/webadmin/webadmin-jmap/src/main/java/org/apache/james/webadmin/data/jmap/UserIdentityRoutes.java`
#### Snippet
```java
        return defaultFilter
            .filter(FunctionalUtils.identityPredicate())
            .map(queryDefault -> getDefaultIdentity(identities)
                .map(List::of)
                .orElseThrow(() -> throw404("Default identity can not be found")))
```

### DataFlowIssue
Method invocation `isPresent` may produce `NullPointerException`
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryUrlStore.java`
#### Snippet
```java
        return urlsDao.retrieve(url)
            .block()
            .isPresent();
    }
}
```

### DataFlowIssue
Unboxing of `keysDAO.getCount(url).block()` may produce `NullPointerException`
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepository.java`
#### Snippet
```java
    @Override
    public long size() {
        return keysDAO.getCount(url).block();
    }

```

### DataFlowIssue
Method invocation `stream` may produce `NullPointerException`
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryMailDaoV2.java`
#### Snippet
```java
        MaybeSender sender = MaybeSender.getMailSender(row.getString(SENDER));
        List<MailAddress> recipients = row.getList(RECIPIENTS, String.class)
            .stream()
            .map(Throwing.function(MailAddress::new))
            .collect(ImmutableList.toImmutableList());
```

### DataFlowIssue
Argument `row.getList(PER_RECIPIENT_SPECIFIC_HEADERS, TupleValue.class)` might be null
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryMailDaoV2.java`
#### Snippet
```java

        Map<String, String> rawAttributes = row.getMap(ATTRIBUTES, String.class, String.class);
        PerRecipientHeaders perRecipientHeaders = fromList(row.getList(PER_RECIPIENT_SPECIFIC_HEADERS, TupleValue.class));

        MailImpl.Builder mailBuilder = MailImpl.builder()
```

### DataFlowIssue
Argument `rawAttributes` might be null
in `server/mailrepository/mailrepository-cassandra/src/main/java/org/apache/james/mailrepository/cassandra/CassandraMailRepositoryMailDaoV2.java`
#### Snippet
```java
            .state(state)
            .addAllHeadersForRecipients(perRecipientHeaders)
            .addAttributes(toAttributes(rawAttributes));

        return new MailDTO(mailBuilder,
```

### DataFlowIssue
Unboxing of `getRemainingSize().block()` may produce `NullPointerException`
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/ClearMailRepositoryTask.java`
#### Snippet
```java
    @Override
    public Result run() {
        initialCount = getRemainingSize().block();
        try {
            removeAllInAllRepositories();
```

### DataFlowIssue
Method invocation `getPathDelimiter` may produce `NullPointerException`
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/CreateCommandParser.java`
#### Snippet
```java
        }
        request.eol();
        assertMailboxNameJustContainDelimiter(mailboxName, mailboxSession.getPathDelimiter());
        return new CreateRequest(mailboxName, tag);
    }
```

### DataFlowIssue
Method invocation `getClass` will produce `NullPointerException`
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/EnvelopeBuilder.java`
#### Snippet
```java

            } else {
                LOGGER.warn("Unknown address type {}", address.getClass());
            }
        }
```

### DataFlowIssue
Method invocation `getMailboxId` may produce `NullPointerException`
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchProcessor.java`
#### Snippet
```java
                return doFetch(selected, request, responder, fetch, mailboxSession, mailbox, session);
            }).sneakyThrow())
            .doOnEach(logOnError(MessageRangeException.class, e -> LOGGER.debug("Fetch failed for mailbox {} because of invalid sequence-set {}", selected.getMailboxId(), idSet, e)))
            .onErrorResume(MessageRangeException.class, e -> {
                taggedBad(request, responder, HumanReadableText.INVALID_MESSAGESET);
```

### DataFlowIssue
Method invocation `getMailboxId` may produce `NullPointerException`
in `protocols/imap/src/main/java/org/apache/james/imap/processor/fetch/FetchProcessor.java`
#### Snippet
```java
                return Mono.empty();
            })
            .doOnEach(logOnError(MailboxException.class, e -> LOGGER.error("Fetch failed for mailbox {} and sequence-set {}", selected.getMailboxId(), idSet, e)))
            .onErrorResume(MailboxException.class, e -> {
                no(request, responder, HumanReadableText.SEARCH_FAILED);
```

### DataFlowIssue
Stream might have already been linked or consumed
in `mailbox/plugin/quota-search-scanning/src/main/java/org/apache/james/quota/search/scanning/ScanningQuotaSearcher.java`
#### Snippet
```java

    private Stream<Username> limit(Stream<Username> results, Limit limit) {
        return limit.getValue()
            .map(results::limit)
            .orElse(results);
    }

```

### DataFlowIssue
Method invocation `getHostString` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/http/LoggingHelper.java`
#### Snippet
```java
        return context("JMAP", MDCBuilder.create()
            .addToContext(MDCBuilder.PROTOCOL, "JMAP")
            .addToContext(MDCBuilder.IP, req.hostAddress().getHostString())
            .addToContextIfPresent("real-ip", Optional.ofNullable(req.requestHeaders().getAsString("X-Real-IP"))));
    }
```

### DataFlowIssue
Argument `request.param(NAME_PATH_PARAM)` might be null
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/http/DownloadRoutes.java`
#### Snippet
```java
        String blobId = request.param(BLOB_ID_PATH_PARAM);
        try {
            String name = URLDecoder.decode(request.param(NAME_PATH_PARAM), StandardCharsets.UTF_8.toString());
            DownloadPath downloadPath = DownloadPath.of(blobId, name);
            return get(request, response, downloadPath);
```

### DataFlowIssue
Passing a non-null argument to `Optional`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/mailbox/Rights.java`
#### Snippet
```java

    private Optional<Boolean> containsRight(Username username, Right right) {
        return Optional.ofNullable(rights.get(username))
            .filter(Predicate.not(Collection::isEmpty))
            .map(rightList -> rightList.contains(right));
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageViewFactory.java`
#### Snippet
```java
                .entrySet()
                .stream()
                .collect(ImmutableMap.toImmutableMap(entry -> entry.getValue().get(0).getName(),
                    entry -> entry.getValue().stream()
                        .map(Field::getBody)
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/message/view/MessageViewFactory.java`
#### Snippet
```java
                .stream()
                .collect(ImmutableMap.toImmutableMap(entry -> entry.getValue().get(0).getName(),
                    entry -> entry.getValue().stream()
                        .map(Field::getBody)
                        .map(body -> DecoderUtil.decodeEncodedWords(body, DecodeMonitor.SILENT))
```

### DataFlowIssue
Method invocation `get` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MessageAppender.java`
#### Snippet
```java
        ImmutableList<Attachment.WithBlob> result = attachments
            .stream()
            .flatMap(attachment -> Optional.ofNullable(blobs.get(attachment.getBlobId()))
                .map(blob -> new Attachment.WithBlob(attachment, blob))
                .stream())
```

### DataFlowIssue
Method reference invocation `Map.Entry::getKey` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
            .stream()
            .filter(entry -> !entry.getKey().equals("name"))
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getValue` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/MIMEMessageConverter.java`
#### Snippet
```java
            .stream()
            .filter(entry -> !entry.getKey().equals("name"))
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method invocation `getRules` may produce `NullPointerException`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/mailet/filter/JMAPFiltering.java`
#### Snippet
```java
                Rules filteringRules = Mono.from(filteringManagement.listRulesForUser(username))
                    .block();
                RuleMatcher ruleMatcher = new RuleMatcher(filteringRules.getRules());
                Stream<Rule> matchingRules = ruleMatcher.findApplicableRules(mail);

```

### DataFlowIssue
Passing a non-null argument to `Optional`
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/methods/SetMessagesUpdateProcessor.java`
#### Snippet
```java
    private Mono<SetMessagesResponse.Builder> update(Set<MailboxId> outboxes, MessageId messageId, UpdateMessagePatch updateMessagePatch, MailboxSession mailboxSession, Multimap<MessageId, ComposedMessageIdWithMetaData> metadata) {
        try {
            List<ComposedMessageIdWithMetaData> messages = Optional.ofNullable(metadata.get(messageId))
                .map(ImmutableList::copyOf)
                .orElse(ImmutableList.of());
```

### DataFlowIssue
Argument `patternStream` might be null
in `server/mailet/integration-testing/src/main/java/org/apache/james/mailets/configuration/SmtpConfiguration.java`
#### Snippet
```java
        InputStream patternStream = ClassLoader.getSystemResourceAsStream("smtpserver.xml");
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        IOUtils.copy(patternStream, byteArrayOutputStream);
        String pattern = new String(byteArrayOutputStream.toByteArray(), StandardCharsets.UTF_8);
        return new StringReader(pattern);
```

### DataFlowIssue
Method invocation `matches` may produce `NullPointerException`
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/UnwrapText.java`
#### Snippet
```java
            int w;
            // if patterns match, the quote level are identical and if the line length added to the length of the following word is greater than width then it is a wrapped line.
            if (m1.matches() && i < lines.length - 1 && m2.matches() && (
                    // The following line has the same quoting of the previous.
                    ((b = m1.group(1).trim().equals(m2.group(1).trim())) && l.length() + m2.group(3).length() + 1 > width)
```

### DataFlowIssue
Argument `getClass().getResourceAsStream(fileAsString.substring(1))` might be null
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/PatternExtractor.java`
#### Snippet
```java
    private Optional<? extends InputStream> retrieveInputStream(String fileAsString) throws FileNotFoundException {
        if (fileAsString.startsWith("#")) {
            return Optional.of(getClass().getResourceAsStream(fileAsString.substring(1)));
        }
        File file = new File(fileAsString);
```

### DataFlowIssue
Method invocation `getValue` may produce `NullPointerException`
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/MimeDecodingMailet.java`
#### Snippet
```java
                .stream()
                .flatMap(convertToMapContent)
                .collect(ImmutableMap.toImmutableMap(Pair::getKey, pair -> AttributeValue.of(pair.getValue())));

        mail.setAttribute(new Attribute(attributeName, AttributeValue.of(extractedMimeContentByName)));
```

### DataFlowIssue
Argument `text` might be null
in `mailet/base/src/main/java/org/apache/mailet/base/FlowedMessageUtils.java`
#### Snippet
```java
        String format = ct.getParameter("format");
        String text = format != null && format.equals("flowed") ? deflow(m) : (String) m.getContent();
        String coded = flow(text, delSp, width);
        ct.setParameter("format", "flowed");
        if (delSp) {
```

### DataFlowIssue
Variable is already assigned to this value
in `mailet/base/src/main/java/org/apache/mailet/base/FlowedMessageUtils.java`
#### Snippet
```java
                result.append(resultLine.toString());
                resultLine = new StringBuffer();
                resultLineFlowed = false;
            }
            resultLineQuoteDepth = actualQuoteDepth;
```

### DataFlowIssue
Method invocation `toString` may produce `NullPointerException`
in `mailet/base/src/main/java/org/apache/mailet/base/FlowedMessageUtils.java`
#### Snippet
```java
        }
        
        return result.toString();
    }
    
```

### DataFlowIssue
Casting `o` to `MailboxWithAnnotations` will produce `ClassCastException` for any non-null value
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/MailboxWithAnnotations.java`
#### Snippet
```java
    public boolean equals(Object o) {
        if (o instanceof MailboxAnnotation) {
            MailboxWithAnnotations that = (MailboxWithAnnotations) o;
            return Objects.equals(mailbox, that.mailbox) &&
                Objects.equals(annotations, that.annotations);
```

### DataFlowIssue
Method reference invocation `Map.Entry::getKey` may produce `NullPointerException`
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/ZipMailArchiveRestorer.java`
#### Snippet
```java
            .flatMap(Throwing.<MailboxWithAnnotationsArchiveEntry, Stream<ImmutablePair<SerializedMailboxId, MessageManager>>>function(
                mailboxEntry -> restoreMailboxEntry(session, mailboxEntry).stream()).sneakyThrow())
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getValue` may produce `NullPointerException`
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/ZipMailArchiveRestorer.java`
#### Snippet
```java
            .flatMap(Throwing.<MailboxWithAnnotationsArchiveEntry, Stream<ImmutablePair<SerializedMailboxId, MessageManager>>>function(
                mailboxEntry -> restoreMailboxEntry(session, mailboxEntry).stream()).sneakyThrow())
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getKey` may produce `NullPointerException`
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZipEntryType.java`
#### Snippet
```java

        entryByOrdinal = Streams.zip(indices, valuesAsStream, ImmutablePair::of)
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getValue` may produce `NullPointerException`
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZipEntryType.java`
#### Snippet
```java

        entryByOrdinal = Streams.zip(indices, valuesAsStream, ImmutablePair::of)
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Argument `row.getString(USER)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/upload/UploadDAO.java`
#### Snippet
```java
                ContentType.of(row.getString(CONTENT_TYPE)),
                row.getLong(SIZE),
                Username.of(row.getString(USER))));
    }
}
```

### DataFlowIssue
Argument `row.getUdtValue(DATE)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/EmailChangeRepositoryDAO.java`
#### Snippet
```java
            .accountId(accountId)
            .state(State.of(row.getUuid(STATE)))
            .date(CassandraZonedDateTimeModule.fromUDT(row.getUdtValue(DATE)))
            .isDelegated(row.getBoolean(IS_DELEGATED))
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
```

### DataFlowIssue
Argument `row.get(CREATED, SET_OF_UUIDS_CODEC)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/EmailChangeRepositoryDAO.java`
#### Snippet
```java
            .date(CassandraZonedDateTimeModule.fromUDT(row.getUdtValue(DATE)))
            .isDelegated(row.getBoolean(IS_DELEGATED))
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
            .updated(toIdSet(row.get(UPDATED, SET_OF_UUIDS_CODEC)))
            .destroyed(toIdSet(row.get(DESTROYED, SET_OF_UUIDS_CODEC)))
```

### DataFlowIssue
Argument `row.get(UPDATED, SET_OF_UUIDS_CODEC)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/EmailChangeRepositoryDAO.java`
#### Snippet
```java
            .isDelegated(row.getBoolean(IS_DELEGATED))
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
            .updated(toIdSet(row.get(UPDATED, SET_OF_UUIDS_CODEC)))
            .destroyed(toIdSet(row.get(DESTROYED, SET_OF_UUIDS_CODEC)))
            .build();
```

### DataFlowIssue
Argument `row.get(DESTROYED, SET_OF_UUIDS_CODEC)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/EmailChangeRepositoryDAO.java`
#### Snippet
```java
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
            .updated(toIdSet(row.get(UPDATED, SET_OF_UUIDS_CODEC)))
            .destroyed(toIdSet(row.get(DESTROYED, SET_OF_UUIDS_CODEC)))
            .build();
    }
```

### DataFlowIssue
Argument `row.getUdtValue(DATE)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/MailboxChangeRepositoryDAO.java`
#### Snippet
```java
            .accountId(accountId)
            .state(State.of(row.getUuid(STATE)))
            .date(CassandraZonedDateTimeModule.fromUDT(row.getUdtValue(DATE)))
            .isCountChange(row.getBoolean(IS_COUNT_CHANGE))
            .delegated(row.getBoolean(IS_DELEGATED))
```

### DataFlowIssue
Argument `row.get(CREATED, SET_OF_UUIDS_CODEC)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/MailboxChangeRepositoryDAO.java`
#### Snippet
```java
            .isCountChange(row.getBoolean(IS_COUNT_CHANGE))
            .delegated(row.getBoolean(IS_DELEGATED))
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
            .updated(toIdSet(row.get(UPDATED, SET_OF_UUIDS_CODEC)))
            .destroyed(toIdSet(row.get(DESTROYED, SET_OF_UUIDS_CODEC)))
```

### DataFlowIssue
Argument `row.get(UPDATED, SET_OF_UUIDS_CODEC)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/MailboxChangeRepositoryDAO.java`
#### Snippet
```java
            .delegated(row.getBoolean(IS_DELEGATED))
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
            .updated(toIdSet(row.get(UPDATED, SET_OF_UUIDS_CODEC)))
            .destroyed(toIdSet(row.get(DESTROYED, SET_OF_UUIDS_CODEC)))
            .build();
```

### DataFlowIssue
Argument `row.get(DESTROYED, SET_OF_UUIDS_CODEC)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/change/MailboxChangeRepositoryDAO.java`
#### Snippet
```java
            .created(toIdSet(row.get(CREATED, SET_OF_UUIDS_CODEC)))
            .updated(toIdSet(row.get(UPDATED, SET_OF_UUIDS_CODEC)))
            .destroyed(toIdSet(row.get(DESTROYED, SET_OF_UUIDS_CODEC)))
            .build();
    }
```

### DataFlowIssue
Method invocation `stream` may produce `NullPointerException`
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/pushsubscription/CassandraPushSubscriptionDAO.java`
#### Snippet
```java

    private Seq<TypeName> toTypes(Row row) {
        return CollectionConverters.asScala(row.getSet(TYPES, String.class).stream()
                .map(string -> typeStateFactory.parse(string).right().get())
                .collect(ImmutableSet.toImmutableSet()))
```

### DataFlowIssue
Argument `row.getInstant(EXPIRES)` might be null
in `server/data/data-jmap-cassandra/src/main/java/org/apache/james/jmap/cassandra/pushsubscription/CassandraPushSubscriptionDAO.java`
#### Snippet
```java
    private PushSubscriptionExpiredTime toExpires(Row row) {
        return PushSubscriptionExpiredTime.apply(
            ZonedDateTime.ofInstant(row.getInstant(EXPIRES), ZoneOffset.UTC));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getKey` may produce `NullPointerException`
in `server/task/task-memory/src/main/java/org/apache/james/task/MemoryTaskManager.java`
#### Snippet
```java
            .stream()
            .filter(details -> details.getValue().getStatus().equals(status))
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method reference invocation `Map.Entry::getValue` may produce `NullPointerException`
in `server/task/task-memory/src/main/java/org/apache/james/task/MemoryTaskManager.java`
#### Snippet
```java
            .stream()
            .filter(details -> details.getValue().getStatus().equals(status))
            .collect(ImmutableMap.toImmutableMap(Map.Entry::getKey, Map.Entry::getValue));
    }

```

### DataFlowIssue
Method invocation `isBefore` may produce `NullPointerException`
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/versions/CassandraSchemaVersionManager.java`
#### Snippet
```java
    public SchemaState computeSchemaState() {
        SchemaVersion version = computeVersion().block();
        if (version.isBefore(minVersion)) {
            return TOO_OLD;
        } else if (version.isBefore(maxVersion)) {
```

### DataFlowIssue
Method invocation `orElse` may produce `NullPointerException`
in `backends-common/cassandra/src/main/java/org/apache/james/backends/cassandra/migration/MigrationTask.java`
#### Snippet
```java

    private SchemaVersion getCurrentVersion() {
        return schemaVersionDAO.getCurrentSchemaVersion().block().orElse(DEFAULT_VERSION);
    }

```

## RuleId[id=ParameterCanBeLocal]
### ParameterCanBeLocal
Parameter can be converted to a local variable
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/JsonpDeserializerBase.java`
#### Snippet
```java

        @Override
        public Map<String, T> deserialize(JsonParser parser, JsonpMapper mapper, Event event) {
            Map<String, T> result = new HashMap<>();
            while ((event = parser.next()) != Event.END_OBJECT) {
```

### ParameterCanBeLocal
Parameter can be converted to a local variable
in `backends-common/opensearch/src/main/java/org/apache/james/backends/opensearch/json/JsonpDeserializerBase.java`
#### Snippet
```java

        @Override
        public Map<K, V> deserialize(JsonParser parser, JsonpMapper mapper, Event event) {
            Map<K, V> result = new HashMap<>();
            while ((event = parser.next()) != Event.END_OBJECT) {
```

## RuleId[id=DeprecatedIsStillUsed]
### DeprecatedIsStillUsed
Deprecated member 'getSender' is still used
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/MailEnvelope.java`
#### Snippet
```java
     */
    @Deprecated
    default MailAddress getSender() {
        return getMaybeSender().asOptional().orElse(MailAddress.nullSender());
    }
```

### DeprecatedIsStillUsed
Deprecated member 'ImapMailbox' is still used
in `protocols/pop3/src/main/java/org/apache/james/protocols/pop3/mailbox/ImapMailbox.java`
#### Snippet
```java
 */
@Deprecated
public abstract class ImapMailbox implements Mailbox {

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'addContext' is still used
in `server/container/util/src/main/java/org/apache/james/util/MDCBuilder.java`
#### Snippet
```java
     */
    @Deprecated
    public MDCBuilder addContext(String key, Object value) {
        Preconditions.checkNotNull(key);
        Optional.ofNullable(value)
```

### DeprecatedIsStillUsed
Deprecated member 'getAttributeNames' is still used
in `mailet/api/src/main/java/org/apache/mailet/Mail.java`
#### Snippet
```java
     */
    @Deprecated
    Iterator<String> getAttributeNames();

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'LogLevel' is still used
in `mailet/api/src/main/java/org/apache/mailet/MailetContext.java`
#### Snippet
```java
     */
    @Deprecated
    enum LogLevel {
        DEBUG,
        INFO,
```

### DeprecatedIsStillUsed
Deprecated member 'getMailServers' is still used
in `mailet/api/src/main/java/org/apache/mailet/MailetContext.java`
#### Snippet
```java
     */
    @Deprecated
    Collection<String> getMailServers(Domain domain);

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'CassandraJamesServerConfiguration' is still used
in `server/apps/cassandra-app/src/main/java/org/apache/james/CassandraJamesServerConfiguration.java`
#### Snippet
```java
 */
@Deprecated(forRemoval = true)
public class CassandraJamesServerConfiguration implements Configuration {
    public static class Builder {
        private Optional<SearchConfiguration> searchConfiguration;
```

### DeprecatedIsStillUsed
Deprecated member 'JDBCMailRepository' is still used
in `server/data/data-jdbc/src/main/java/org/apache/james/mailrepository/jdbc/JDBCMailRepository.java`
#### Snippet
```java
 */
@Deprecated
public class JDBCMailRepository implements MailRepository, Configurable, Initializable {
    private static final Logger LOGGER = LoggerFactory.getLogger(JDBCMailRepository.class);

```

### DeprecatedIsStillUsed
Deprecated member 'logWhenExceedP99' is still used
in `metrics/metrics-api/src/main/java/org/apache/james/metrics/api/TimeMetric.java`
#### Snippet
```java
        @Deprecated
        // Underlying implementations implies a high overhead
        ExecutionResult logWhenExceedP99(Duration thresholdInNanoSeconds);
    }

```

## RuleId[id=SpringXmlModelInspection]
### SpringXmlModelInspection
Cannot resolve bean 'mailboxmanager'
in `mailbox/tools/indexer/src/main/resources/META-INF/spring/mailbox-tools.xml`
#### Snippet
```java

    <bean id ="reindexer-impl" class="org.apache.mailbox.tools.indexer.ReIndexerImpl" lazy-init="true">
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="indexer"/>
        <constructor-arg index="2" ref="messageMapperFactory"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'indexer'
in `mailbox/tools/indexer/src/main/resources/META-INF/spring/mailbox-tools.xml`
#### Snippet
```java
    <bean id ="reindexer-impl" class="org.apache.mailbox.tools.indexer.ReIndexerImpl" lazy-init="true">
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="indexer"/>
        <constructor-arg index="2" ref="messageMapperFactory"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/tools/indexer/src/main/resources/META-INF/spring/mailbox-tools.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="indexer"/>
        <constructor-arg index="2" ref="messageMapperFactory"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'protocolhandlerloader'
in `server/protocols/protocols-lmtp/src/main/resources/META-INF/spring/lmtpserver-context.xml`
#### Snippet
```java

    <bean id="lmtpserver" class="org.apache.james.lmtpserver.netty.LMTPServerFactory">
        <constructor-arg index="0" ref="protocolhandlerloader"/>
        <constructor-arg index="1" ref="filesystem"/>
        <constructor-arg index="2" ref="metricFactory"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'filesystem'
in `server/protocols/protocols-lmtp/src/main/resources/META-INF/spring/lmtpserver-context.xml`
#### Snippet
```java
    <bean id="lmtpserver" class="org.apache.james.lmtpserver.netty.LMTPServerFactory">
        <constructor-arg index="0" ref="protocolhandlerloader"/>
        <constructor-arg index="1" ref="filesystem"/>
        <constructor-arg index="2" ref="metricFactory"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'metricFactory'
in `server/protocols/protocols-lmtp/src/main/resources/META-INF/spring/lmtpserver-context.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="protocolhandlerloader"/>
        <constructor-arg index="1" ref="filesystem"/>
        <constructor-arg index="2" ref="metricFactory"/>
    </bean>
    
```

### SpringXmlModelInspection
Cannot resolve bean 'metricFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/event-system.xml`
#### Snippet
```java
    </bean>
    <bean id="event-delivery" class="org.apache.james.events.delivery.InVmEventDelivery" lazy-init="true">
        <constructor-arg index="0" ref="metricFactory"/>
    </bean>
    <bean id="event-deadletters" class="org.apache.james.events.MemoryEventDeadLetters" lazy-init="true"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'entityManagerFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java

    <bean id="currentQuotaManager" class="org.apache.james.mailbox.jpa.quota.JpaCurrentQuotaManager">
        <constructor-arg index="0" ref="entityManagerFactory" />
    </bean>
    <bean id="defaultQuotaRootResolver" class="org.apache.james.mailbox.store.quota.DefaultUserQuotaRootResolver" lazy-init="true">
```

### SpringXmlModelInspection
Cannot resolve bean 'sessionProvider'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    </bean>
    <bean id="defaultQuotaRootResolver" class="org.apache.james.mailbox.store.quota.DefaultUserQuotaRootResolver" lazy-init="true">
        <constructor-arg index="0" ref="sessionProvider"/>
        <constructor-arg index="1" ref="messageMapperFactory"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    <bean id="defaultQuotaRootResolver" class="org.apache.james.mailbox.store.quota.DefaultUserQuotaRootResolver" lazy-init="true">
        <constructor-arg index="0" ref="sessionProvider"/>
        <constructor-arg index="1" ref="messageMapperFactory"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java

    <bean id="currentQuotaCalculator" class="org.apache.james.mailbox.store.quota.CurrentQuotaCalculator" lazy-init="true">
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="quotaRootResolver"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaRootResolver'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    <bean id="currentQuotaCalculator" class="org.apache.james.mailbox.store.quota.CurrentQuotaCalculator" lazy-init="true">
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="quotaRootResolver"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'sessionProvider'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    <bean id="inMemoryCurrentQuotaManager" class="org.apache.james.mailbox.inmemory.quota.InMemoryCurrentQuotaManager" lazy-init="true">
        <constructor-arg index="0" ref="currentQuotaCalculator"/>
        <constructor-arg index="1" ref="sessionProvider"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'maxQuotaManager'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    <bean id="storeQuotaManager" class="org.apache.james.mailbox.store.quota.StoreQuotaManager" lazy-init="true">
        <constructor-arg index="0" ref="currentQuotaManager"/>
        <constructor-arg index="1" ref="maxQuotaManager"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'quotaRootResolver'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    <bean id="eventQuotaUpdater" class="org.apache.james.mailbox.store.quota.ListeningCurrentQuotaUpdater" lazy-init="true">
        <constructor-arg index="0" ref="currentQuotaManager"/>
        <constructor-arg index="1" ref="quotaRootResolver"/>
        <constructor-arg index="2" ref="event-bus"/>
        <constructor-arg index="3" ref="storeQuotaManager"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="currentQuotaManager"/>
        <constructor-arg index="1" ref="quotaRootResolver"/>
        <constructor-arg index="2" ref="event-bus"/>
        <constructor-arg index="3" ref="storeQuotaManager"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'maxQuotaManager'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java

    <bean id="quotaComponents" class="org.apache.james.mailbox.store.quota.QuotaComponents">
        <constructor-arg index="0" ref="maxQuotaManager"/>
        <constructor-arg index="1" ref="quotaManager"/>
        <constructor-arg index="2" ref="quotaRootResolver"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaManager'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
    <bean id="quotaComponents" class="org.apache.james.mailbox.store.quota.QuotaComponents">
        <constructor-arg index="0" ref="maxQuotaManager"/>
        <constructor-arg index="1" ref="quotaManager"/>
        <constructor-arg index="2" ref="quotaRootResolver"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaRootResolver'
in `mailbox/spring/src/main/resources/META-INF/spring/quota.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="maxQuotaManager"/>
        <constructor-arg index="1" ref="quotaManager"/>
        <constructor-arg index="2" ref="quotaRootResolver"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java

    <bean id="storeMailboxAnnotationManager" class="org.apache.james.mailbox.store.StoreMailboxAnnotationManager">
        <constructor-arg index="0" ref="messageMapperFactory" />
        <constructor-arg index="1" ref="storeRightManager" />
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java

    <bean id="storeRightManager" class="org.apache.james.mailbox.store.StoreRightManager" >
        <constructor-arg index="0" ref="messageMapperFactory" />
        <constructor-arg index="1" ref="aclResolver" />
        <constructor-arg index="2" ref="event-bus" />
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="messageMapperFactory" />
        <constructor-arg index="1" ref="aclResolver" />
        <constructor-arg index="2" ref="event-bus" />
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'authenticator'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java

    <bean id="sessionProvider" class="org.apache.james.mailbox.store.SessionProviderImpl" >
        <constructor-arg index="0" ref="authenticator" />
        <constructor-arg index="1" ref="authorizator" />
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'authorizator'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
    <bean id="sessionProvider" class="org.apache.james.mailbox.store.SessionProviderImpl" >
        <constructor-arg index="0" ref="authenticator" />
        <constructor-arg index="1" ref="authorizator" />
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
    <bean id="mailbox-init" class="org.apache.james.mailbox.spring.MailboxInitializer" init-method="init">
        <constructor-arg index="0" ref="sessionProvider" />
        <constructor-arg index="1" ref="event-bus" />
        <constructor-arg index="2" ref="indexer" />
        <constructor-arg index="3" ref="quotaUpdater" />
```

### SpringXmlModelInspection
Cannot resolve bean 'indexer'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="sessionProvider" />
        <constructor-arg index="1" ref="event-bus" />
        <constructor-arg index="2" ref="indexer" />
        <constructor-arg index="3" ref="quotaUpdater" />
        <constructor-arg index="4" ref="mailboxmanager" />
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaUpdater'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="event-bus" />
        <constructor-arg index="2" ref="indexer" />
        <constructor-arg index="3" ref="quotaUpdater" />
        <constructor-arg index="4" ref="mailboxmanager" />
        <constructor-arg index="5" ref="messageMapperFactory" />
```

### SpringXmlModelInspection
Cannot resolve bean 'mailboxmanager'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
        <constructor-arg index="2" ref="indexer" />
        <constructor-arg index="3" ref="quotaUpdater" />
        <constructor-arg index="4" ref="mailboxmanager" />
        <constructor-arg index="5" ref="messageMapperFactory" />
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
        <constructor-arg index="3" ref="quotaUpdater" />
        <constructor-arg index="4" ref="mailboxmanager" />
        <constructor-arg index="5" ref="messageMapperFactory" />
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'metricFactory'
in `mailbox/spring/src/main/resources/META-INF/spring/spring-mailbox.xml`
#### Snippet
```java
    <bean id="preDeletionHooks" class="org.apache.james.mailbox.store.PreDeletionHooks">
        <constructor-arg index="0"><set/></constructor-arg>
        <constructor-arg index="1" ref="metricFactory" />
    </bean>
</beans>
```

### SpringXmlModelInspection
Cannot resolve class or package 'etm'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    console, HTTP console and JMX. Please see http://jetm.void.fm/doc.html for details
    -->
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
```

### SpringXmlModelInspection
Cannot resolve class or package 'core'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    console, HTTP console and JMX. Please see http://jetm.void.fm/doc.html for details
    -->
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
```

### SpringXmlModelInspection
Cannot resolve class or package 'monitor'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    console, HTTP console and JMX. Please see http://jetm.void.fm/doc.html for details
    -->
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
```

### SpringXmlModelInspection
Cannot resolve class 'NestedMonitor'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    console, HTTP console and JMX. Please see http://jetm.void.fm/doc.html for details
    -->
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
```

### SpringXmlModelInspection
Cannot resolve method 'start'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    -->
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>
```

### SpringXmlModelInspection
Cannot resolve method 'stop'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    -->
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'etm'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class or package 'contrib'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class or package 'console'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class 'HttpConsoleServer'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    <bean id="etmMonitor" class="etm.core.monitor.NestedMonitor"
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve method 'start'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

    <bean id="etmMethodCallInterceptor"
```

### SpringXmlModelInspection
Cannot resolve method 'stop'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
          init-method="start" destroy-method="stop" />
    <bean id="etmHttpConsole" class="etm.contrib.console.HttpConsoleServer"
          init-method="start" destroy-method="stop" autowire="constructor"/>

    <bean id="etmMethodCallInterceptor"
```

### SpringXmlModelInspection
Cannot resolve class or package 'etm'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmMethodCallInterceptor"
          class="etm.contrib.aop.aopalliance.EtmMethodCallInterceptor"
          autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class or package 'contrib'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmMethodCallInterceptor"
          class="etm.contrib.aop.aopalliance.EtmMethodCallInterceptor"
          autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class or package 'aop'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmMethodCallInterceptor"
          class="etm.contrib.aop.aopalliance.EtmMethodCallInterceptor"
          autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class or package 'aopalliance'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmMethodCallInterceptor"
          class="etm.contrib.aop.aopalliance.EtmMethodCallInterceptor"
          autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class 'EtmMethodCallInterceptor'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmMethodCallInterceptor"
          class="etm.contrib.aop.aopalliance.EtmMethodCallInterceptor"
          autowire="constructor"/>

```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmAutoProxy"
          class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="interceptorNames">
            <list>
```

### SpringXmlModelInspection
Cannot resolve class or package 'aop'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmAutoProxy"
          class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="interceptorNames">
            <list>
```

### SpringXmlModelInspection
Cannot resolve class or package 'framework'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmAutoProxy"
          class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="interceptorNames">
            <list>
```

### SpringXmlModelInspection
Cannot resolve class or package 'autoproxy'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmAutoProxy"
          class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="interceptorNames">
            <list>
```

### SpringXmlModelInspection
Cannot resolve class 'BeanNameAutoProxyCreator'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java

    <bean id="etmAutoProxy"
          class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="interceptorNames">
            <list>
```

### SpringXmlModelInspection
Cannot resolve property 'interceptorNames'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
    <bean id="etmAutoProxy"
          class="org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator">
        <property name="interceptorNames">
            <list>
                <value>etmMethodCallInterceptor</value>
```

### SpringXmlModelInspection
Cannot resolve property 'beanNames'
in `server/apps/spring-app/src/main/resources/jetm-monitoring.xml`
#### Snippet
```java
        </property>
        <!-- add the beans that you wish to monitor to the list bellow -->
        <property name="beanNames">
            <list>
                <value>usersrepository</value>
```

### SpringXmlModelInspection
Cannot resolve bean 'sessionProvider'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
    <bean id="memory-mailboxManager" class="org.apache.james.mailbox.inmemory.InMemoryMailboxManager">
        <constructor-arg index="0" ref="memory-sessionMapperFactory"/>
        <constructor-arg index="1" ref="sessionProvider"/>
        <constructor-arg index="2" ref="memory-locker"/>
        <constructor-arg index="3" ref="messageParser"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'memory-locker'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="memory-sessionMapperFactory"/>
        <constructor-arg index="1" ref="sessionProvider"/>
        <constructor-arg index="2" ref="memory-locker"/>
        <constructor-arg index="3" ref="messageParser"/>
        <constructor-arg index="4" ref="messageIdFactory" />
```

### SpringXmlModelInspection
Cannot resolve bean 'messageParser'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="sessionProvider"/>
        <constructor-arg index="2" ref="memory-locker"/>
        <constructor-arg index="3" ref="messageParser"/>
        <constructor-arg index="4" ref="messageIdFactory" />
        <constructor-arg index="5" ref="event-bus" />
```

### SpringXmlModelInspection
Cannot resolve bean 'messageIdFactory'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="2" ref="memory-locker"/>
        <constructor-arg index="3" ref="messageParser"/>
        <constructor-arg index="4" ref="messageIdFactory" />
        <constructor-arg index="5" ref="event-bus" />
        <constructor-arg index="6" ref="storeMailboxAnnotationManager" />
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="3" ref="messageParser"/>
        <constructor-arg index="4" ref="messageIdFactory" />
        <constructor-arg index="5" ref="event-bus" />
        <constructor-arg index="6" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="7" ref="storeRightManager" />
```

### SpringXmlModelInspection
Cannot resolve bean 'storeMailboxAnnotationManager'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="4" ref="messageIdFactory" />
        <constructor-arg index="5" ref="event-bus" />
        <constructor-arg index="6" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="7" ref="storeRightManager" />
        <constructor-arg index="8" ref="quotaComponents" />
```

### SpringXmlModelInspection
Cannot resolve bean 'storeRightManager'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="5" ref="event-bus" />
        <constructor-arg index="6" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="7" ref="storeRightManager" />
        <constructor-arg index="8" ref="quotaComponents" />
        <constructor-arg index="9" ref="indexer" />
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaComponents'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="6" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="7" ref="storeRightManager" />
        <constructor-arg index="8" ref="quotaComponents" />
        <constructor-arg index="9" ref="indexer" />
        <constructor-arg index="10" ref="preDeletionHooks" />
```

### SpringXmlModelInspection
Cannot resolve bean 'indexer'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="7" ref="storeRightManager" />
        <constructor-arg index="8" ref="quotaComponents" />
        <constructor-arg index="9" ref="indexer" />
        <constructor-arg index="10" ref="preDeletionHooks" />
        <constructor-arg index="11" ref="threadIdGuessingAlgorithm" />
```

### SpringXmlModelInspection
Cannot resolve bean 'preDeletionHooks'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="8" ref="quotaComponents" />
        <constructor-arg index="9" ref="indexer" />
        <constructor-arg index="10" ref="preDeletionHooks" />
        <constructor-arg index="11" ref="threadIdGuessingAlgorithm" />
        <constructor-arg index="12" ref="clock" />
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="memory-sessionMapperFactory"/>
        <constructor-arg index="1" ref="memory-sessionMapperFactory"/>
        <constructor-arg index="2" ref="event-bus"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'jvm-locker'
in `mailbox/memory/src/main/resources/META-INF/spring/mailbox-memory.xml`
#### Snippet
```java
    <bean id="clock" class="java.time.Clock" factory-method="systemUTC" />

    <alias name="jvm-locker" alias="memory-locker"/>

</beans>
```

### SpringXmlModelInspection
Cannot resolve bean 'filesystem'
in `server/protocols/protocols-managesieve/src/main/resources/META-INF/spring/managesieveserver-context.xml`
#### Snippet
```java

    <bean id="managesieveserver" class="org.apache.james.managesieveserver.netty.ManageSieveServerFactory">
        <property name="fileSystem" ref="filesystem"/>
        <property name="sieveRepository" ref="sieverepository"/>
        <property name="usersRepository" ref="usersrepository"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'sieverepository'
in `server/protocols/protocols-managesieve/src/main/resources/META-INF/spring/managesieveserver-context.xml`
#### Snippet
```java
    <bean id="managesieveserver" class="org.apache.james.managesieveserver.netty.ManageSieveServerFactory">
        <property name="fileSystem" ref="filesystem"/>
        <property name="sieveRepository" ref="sieverepository"/>
        <property name="usersRepository" ref="usersrepository"/>
        <property name="parser" ref="sieveparser"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'usersrepository'
in `server/protocols/protocols-managesieve/src/main/resources/META-INF/spring/managesieveserver-context.xml`
#### Snippet
```java
        <property name="fileSystem" ref="filesystem"/>
        <property name="sieveRepository" ref="sieverepository"/>
        <property name="usersRepository" ref="usersrepository"/>
        <property name="parser" ref="sieveparser"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'sieveparser'
in `server/protocols/protocols-managesieve/src/main/resources/META-INF/spring/managesieveserver-context.xml`
#### Snippet
```java
        <property name="sieveRepository" ref="sieverepository"/>
        <property name="usersRepository" ref="usersrepository"/>
        <property name="parser" ref="sieveparser"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'metricFactory'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="embeddedActiveMQ"/>
        <constructor-arg index="1" ref="rawMailQueueItemDecoratorFactory"/>
        <constructor-arg index="2" ref="metricFactory"/>
        <constructor-arg index="3" ref="gaugeRegistry"/>
        <constructor-arg index="4" ref="activeMQMetricCollector"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'gaugeRegistry'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="rawMailQueueItemDecoratorFactory"/>
        <constructor-arg index="2" ref="metricFactory"/>
        <constructor-arg index="3" ref="gaugeRegistry"/>
        <constructor-arg index="4" ref="activeMQMetricCollector"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'filesystem'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java

    <bean id="embeddedActiveMQ" class="org.apache.james.queue.activemq.EmbeddedActiveMQ">
        <constructor-arg index="0" ref="filesystem"/>
        <constructor-arg index="1" ref="persistenceAdapter"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'activemq'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java
    </bean>

    <bean id="persistenceAdapter" class="org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter"/>

    <bean id="activeMQMetricCollector" class="org.apache.james.queue.activemq.metric.ActiveMQMetricCollectorNoop"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'store'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java
    </bean>

    <bean id="persistenceAdapter" class="org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter"/>

    <bean id="activeMQMetricCollector" class="org.apache.james.queue.activemq.metric.ActiveMQMetricCollectorNoop"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'kahadb'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java
    </bean>

    <bean id="persistenceAdapter" class="org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter"/>

    <bean id="activeMQMetricCollector" class="org.apache.james.queue.activemq.metric.ActiveMQMetricCollectorNoop"/>
```

### SpringXmlModelInspection
Cannot resolve class 'KahaDBPersistenceAdapter'
in `server/queue/queue-activemq/src/main/resources/META-INF/spring/activemq-queue-context.xml`
#### Snippet
```java
    </bean>

    <bean id="persistenceAdapter" class="org.apache.activemq.store.kahadb.KahaDBPersistenceAdapter"/>

    <bean id="activeMQMetricCollector" class="org.apache.james.queue.activemq.metric.ActiveMQMetricCollectorNoop"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
     -->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <bean id="jpa-mailboxIdFactory" class="org.apache.james.mailbox.jpa.JPAId.Factory" />
```

### SpringXmlModelInspection
Cannot resolve class or package 'orm'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
     -->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <bean id="jpa-mailboxIdFactory" class="org.apache.james.mailbox.jpa.JPAId.Factory" />
```

### SpringXmlModelInspection
Cannot resolve class or package 'jpa'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
     -->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <bean id="jpa-mailboxIdFactory" class="org.apache.james.mailbox.jpa.JPAId.Factory" />
```

### SpringXmlModelInspection
Cannot resolve class or package 'support'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
     -->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <bean id="jpa-mailboxIdFactory" class="org.apache.james.mailbox.jpa.JPAId.Factory" />
```

### SpringXmlModelInspection
Cannot resolve class 'PersistenceAnnotationBeanPostProcessor'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
     -->

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <bean id="jpa-mailboxIdFactory" class="org.apache.james.mailbox.jpa.JPAId.Factory" />
```

### SpringXmlModelInspection
Cannot resolve bean 'sessionProvider'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    <bean id="jpa-mailboxmanager" class="org.apache.james.mailbox.jpa.openjpa.OpenJPAMailboxManager">
        <constructor-arg index="0" ref="jpa-sessionMapperFactory"/>
        <constructor-arg index="1" ref="sessionProvider"/>
        <constructor-arg index="2" ref="messageParser"/>
        <constructor-arg index="3" ref="messageIdFactory" />
```

### SpringXmlModelInspection
Cannot resolve bean 'messageParser'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="jpa-sessionMapperFactory"/>
        <constructor-arg index="1" ref="sessionProvider"/>
        <constructor-arg index="2" ref="messageParser"/>
        <constructor-arg index="3" ref="messageIdFactory" />
        <constructor-arg index="4" ref="event-bus" />
```

### SpringXmlModelInspection
Cannot resolve bean 'messageIdFactory'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="sessionProvider"/>
        <constructor-arg index="2" ref="messageParser"/>
        <constructor-arg index="3" ref="messageIdFactory" />
        <constructor-arg index="4" ref="event-bus" />
        <constructor-arg index="5" ref="storeMailboxAnnotationManager" />
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="2" ref="messageParser"/>
        <constructor-arg index="3" ref="messageIdFactory" />
        <constructor-arg index="4" ref="event-bus" />
        <constructor-arg index="5" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="6" ref="storeRightManager" />
```

### SpringXmlModelInspection
Cannot resolve bean 'storeMailboxAnnotationManager'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="3" ref="messageIdFactory" />
        <constructor-arg index="4" ref="event-bus" />
        <constructor-arg index="5" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="6" ref="storeRightManager" />
        <constructor-arg index="7" ref="quotaComponents" />
```

### SpringXmlModelInspection
Cannot resolve bean 'storeRightManager'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="4" ref="event-bus" />
        <constructor-arg index="5" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="6" ref="storeRightManager" />
        <constructor-arg index="7" ref="quotaComponents" />
        <constructor-arg index="8" ref="indexer" />
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaComponents'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="5" ref="storeMailboxAnnotationManager" />
        <constructor-arg index="6" ref="storeRightManager" />
        <constructor-arg index="7" ref="quotaComponents" />
        <constructor-arg index="8" ref="indexer" />
        <constructor-arg index="9" ref="threadIdGuessingAlgorithm" />
```

### SpringXmlModelInspection
Cannot resolve bean 'indexer'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="6" ref="storeRightManager" />
        <constructor-arg index="7" ref="quotaComponents" />
        <constructor-arg index="8" ref="indexer" />
        <constructor-arg index="9" ref="threadIdGuessingAlgorithm" />
        <constructor-arg index="10" ref="clock" />
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="jpa-sessionMapperFactory"/>
        <constructor-arg index="1" ref="jpa-sessionMapperFactory"/>
        <constructor-arg index="2" ref="event-bus"/>
    </bean>
    <bean id="jpa-sessionMapperFactory" class="org.apache.james.mailbox.jpa.JPAMailboxSessionMapperFactory">
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    -->
          
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'beans'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    -->
          
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'factory'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    -->
          
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'config'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    -->
          
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class 'PropertyPlaceholderConfigurer'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    -->
          
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve property 'ignoreUnresolvablePlaceholders'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
          
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'location'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name ="location" value="classpath:james-database.properties"/>
    </bean>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
```

### SpringXmlModelInspection
Cannot resolve class or package 'dbcp'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name ="location" value="classpath:james-database.properties"/>
    </bean>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
```

### SpringXmlModelInspection
Cannot resolve class 'BasicDataSource'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name ="location" value="classpath:james-database.properties"/>
    </bean>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
```

### SpringXmlModelInspection
Cannot resolve method 'close'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name ="location" value="classpath:james-database.properties"/>
    </bean>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
```

### SpringXmlModelInspection
Cannot resolve property 'driverClassName'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    </bean>
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
```

### SpringXmlModelInspection
Cannot resolve property 'url'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
```

### SpringXmlModelInspection
Cannot resolve property 'username'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="driverClassName" value="${database.driverClassName}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
```

### SpringXmlModelInspection
Cannot resolve property 'password'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
```

### SpringXmlModelInspection
Cannot resolve property 'testOnBorrow'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
```

### SpringXmlModelInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
```

### SpringXmlModelInspection
Cannot resolve property 'validationQueryTimeout'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property key
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="password" value="${database.password}" />
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'validationQuery'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'orm'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jpa'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve class 'LocalContainerEntityManagerFactoryBean'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve property 'dataSource'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
        <property name="persistenceUnitName" value="James"/>
```

### SpringXmlModelInspection
Cannot resolve property 'jpaVendorAdapter'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
        <property name="persistenceUnitName" value="James"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'persistenceUnitName'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
        <property name="persistenceUnitName" value="James"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="persistenceUnitName" value="James"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class or package 'orm'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="persistenceUnitName" value="James"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class or package 'jpa'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="persistenceUnitName" value="James"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class or package 'vendor'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="persistenceUnitName" value="James"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class 'OpenJpaVendorAdapter'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="persistenceUnitName" value="James"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve property 'database'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
        <property name="showSql" value="false"/>
```

### SpringXmlModelInspection
Cannot resolve property 'showSql'
in `mailbox/jpa/src/main/resources/META-INF/spring/mailbox-jpa.xml`
#### Snippet
```java
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
        <property name="showSql" value="false"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'protocolhandlerloader'
in `server/protocols/protocols-pop3/src/main/resources/META-INF/spring/pop3server-context.xml`
#### Snippet
```java

    <bean id="pop3server" class="org.apache.james.pop3server.netty.POP3ServerFactory">
        <property name="protocolHandlerLoader" ref="protocolhandlerloader"/>
        <property name="fileSystem" ref="filesystem"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'filesystem'
in `server/protocols/protocols-pop3/src/main/resources/META-INF/spring/pop3server-context.xml`
#### Snippet
```java
    <bean id="pop3server" class="org.apache.james.pop3server.netty.POP3ServerFactory">
        <property name="protocolHandlerLoader" ref="protocolhandlerloader"/>
        <property name="fileSystem" ref="filesystem"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'mailboxmanager'
in `server/protocols/protocols-pop3/src/main/resources/META-INF/spring/pop3server-context.xml`
#### Snippet
```java

    <bean id="mailboxAdapter" class="org.apache.james.pop3server.mailbox.DefaultMailboxAdapterFactory">
        <constructor-arg index="0" ref="mailboxmanager"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'managesieve'
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
    <bean id="filesystem" class="org.apache.james.container.spring.filesystem.ResourceLoaderFileSystem"/>

    <bean id="sieveparser" class="org.apache.james.managesieve.jsieve.Parser"/>

</beans>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jsieve'
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
    <bean id="filesystem" class="org.apache.james.container.spring.filesystem.ResourceLoaderFileSystem"/>

    <bean id="sieveparser" class="org.apache.james.managesieve.jsieve.Parser"/>

</beans>
```

### SpringXmlModelInspection
Cannot resolve class 'Parser'
in `server/container/spring/src/main/resources/META-INF/spring/loaders-context.xml`
#### Snippet
```java
    <bean id="filesystem" class="org.apache.james.container.spring.filesystem.ResourceLoaderFileSystem"/>

    <bean id="sieveparser" class="org.apache.james.managesieve.jsieve.Parser"/>

</beans>
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable Java Annotations processing. -->
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
        <property name="order" value="3"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'context'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable Java Annotations processing. -->
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
        <property name="order" value="3"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'annotation'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable Java Annotations processing. -->
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
        <property name="order" value="3"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class 'CommonAnnotationBeanPostProcessor'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable Java Annotations processing. -->
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
        <property name="order" value="3"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'order'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <!-- Enable Java Annotations processing. -->
    <bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
        <property name="order" value="3"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable support for Persistence Annotations processing. -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <import resource="classpath:META-INF/spring/loaders-context.xml"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'orm'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable support for Persistence Annotations processing. -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <import resource="classpath:META-INF/spring/loaders-context.xml"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jpa'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable support for Persistence Annotations processing. -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <import resource="classpath:META-INF/spring/loaders-context.xml"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'support'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable support for Persistence Annotations processing. -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <import resource="classpath:META-INF/spring/loaders-context.xml"/>
```

### SpringXmlModelInspection
Cannot resolve class 'PersistenceAnnotationBeanPostProcessor'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Enable support for Persistence Annotations processing. -->
    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>

    <import resource="classpath:META-INF/spring/loaders-context.xml"/>
```

### SpringXmlModelInspection
Cannot resolve method 'init'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    ===========================================================================
    -->
    <bean id="messageParser" class="org.apache.james.mailbox.store.mail.model.impl.MessageParser" init-method="init"/>

    <!-- Mailbox Managers -->
```

### SpringXmlModelInspection
Cannot resolve bean 'maxQuotaManager'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="quota" class="org.apache.james.container.spring.mailbox.MaxQuotaConfigurationReader">
        <constructor-arg index="0" ref="maxQuotaManager"/>
        <constructor-arg index="1" ref="quotaRootResolver"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaRootResolver'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="quota" class="org.apache.james.container.spring.mailbox.MaxQuotaConfigurationReader">
        <constructor-arg index="0" ref="maxQuotaManager"/>
        <constructor-arg index="1" ref="quotaRootResolver"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'tools'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Mailbox Copier -->
    <bean id="mailboxcopier" class="org.apache.james.mailbox.tools.copier.MailboxCopierImpl"/>

    <bean id="mailboxmanagerresolver" class="org.apache.james.container.spring.mailbox.SpringResolver" />
```

### SpringXmlModelInspection
Cannot resolve class or package 'copier'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Mailbox Copier -->
    <bean id="mailboxcopier" class="org.apache.james.mailbox.tools.copier.MailboxCopierImpl"/>

    <bean id="mailboxmanagerresolver" class="org.apache.james.container.spring.mailbox.SpringResolver" />
```

### SpringXmlModelInspection
Cannot resolve class 'MailboxCopierImpl'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Mailbox Copier -->
    <bean id="mailboxcopier" class="org.apache.james.mailbox.tools.copier.MailboxCopierImpl"/>

    <bean id="mailboxmanagerresolver" class="org.apache.james.container.spring.mailbox.SpringResolver" />
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'beans'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'factory'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'config'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class 'PropertyPlaceholderConfigurer'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
```

### SpringXmlModelInspection
Cannot resolve property 'ignoreUnresolvablePlaceholders'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'location'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:james-database.properties"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'dbcp'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
```

### SpringXmlModelInspection
Cannot resolve class 'BasicDataSource'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
```

### SpringXmlModelInspection
Cannot resolve method 'close'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
```

### SpringXmlModelInspection
Cannot resolve property 'driverClassName'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
```

### SpringXmlModelInspection
Cannot resolve property 'url'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
```

### SpringXmlModelInspection
Cannot resolve property 'username'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
```

### SpringXmlModelInspection
Cannot resolve property 'password'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="url" value="${database.url}"/>
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
```

### SpringXmlModelInspection
Cannot resolve property 'testOnBorrow'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
```

### SpringXmlModelInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="username" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
```

### SpringXmlModelInspection
Cannot resolve property 'validationQueryTimeout'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
        <!--The value for maxActive should always be larger than the number of spooler threads. The-->
```

### SpringXmlModelInspection
Cannot resolve property key
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="password" value="${database.password}"/>
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
        <!--The value for maxActive should always be larger than the number of spooler threads. The-->
```

### SpringXmlModelInspection
Cannot resolve property 'validationQuery'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="testOnBorrow" value="${datasource.testOnBorrow:false}" />
        <property name="validationQueryTimeout" value="${datasource.validationQueryTimeoutSec:-1}" />
        <property name="validationQuery" value="${datasource.validationQuery:#{null}}" />
        <!--The value for maxActive should always be larger than the number of spooler threads. The-->
        <!--reason is that a spooler thread normally requires 1 connection to process a mail, however-->
```

### SpringXmlModelInspection
Cannot resolve property 'maxActive'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <!--finish processing because each of them blocks waiting for OpenJPA which itself is waiting-->
        <!--for a connection. See https://issues.apache.org/jira/browse/JAMES-1317.-->
        <property name="maxActive" value="21"/>
        <!-- This lets a mail fail to be processed rather than the server freezing. -->
        <property name="maxWait" value="30000"/>
```

### SpringXmlModelInspection
Cannot resolve property 'maxWait'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="maxActive" value="21"/>
        <!-- This lets a mail fail to be processed rather than the server freezing. -->
        <property name="maxWait" value="30000"/>
        <!-- This keeps the number of connections in the pool low on average -->
        <property name="timeBetweenEvictionRunsMillis" value="300000"/>
```

### SpringXmlModelInspection
Cannot resolve property 'timeBetweenEvictionRunsMillis'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="maxWait" value="30000"/>
        <!-- This keeps the number of connections in the pool low on average -->
        <property name="timeBetweenEvictionRunsMillis" value="300000"/>
        <property name="minEvictableIdleTimeMillis" value="300000"/>
        <property name="removeAbandoned" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve property 'minEvictableIdleTimeMillis'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <!-- This keeps the number of connections in the pool low on average -->
        <property name="timeBetweenEvictionRunsMillis" value="300000"/>
        <property name="minEvictableIdleTimeMillis" value="300000"/>
        <property name="removeAbandoned" value="true"/>
        <property name="logAbandoned" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve property 'removeAbandoned'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="timeBetweenEvictionRunsMillis" value="300000"/>
        <property name="minEvictableIdleTimeMillis" value="300000"/>
        <property name="removeAbandoned" value="true"/>
        <property name="logAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="300"/>
```

### SpringXmlModelInspection
Cannot resolve property 'logAbandoned'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="minEvictableIdleTimeMillis" value="300000"/>
        <property name="removeAbandoned" value="true"/>
        <property name="logAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'removeAbandonedTimeout'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="removeAbandoned" value="true"/>
        <property name="logAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'orm'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jpa'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve class 'LocalContainerEntityManagerFactoryBean'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### SpringXmlModelInspection
Cannot resolve property 'dataSource'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
```

### SpringXmlModelInspection
Cannot resolve property 'jpaVendorAdapter'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'persistenceXmlLocation'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class or package 'orm'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class or package 'jpa'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class or package 'vendor'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve class 'OpenJpaVendorAdapter'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

### SpringXmlModelInspection
Cannot resolve property 'database'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
        <property name="showSql" value="false"/>
```

### SpringXmlModelInspection
Cannot resolve property 'showSql'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
        <property name="showSql" value="false"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Server  -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'beans'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Server  -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'factory'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Server  -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'config'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Server  -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
```

### SpringXmlModelInspection
Cannot resolve class 'PropertyPlaceholderConfigurer'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Server  -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
```

### SpringXmlModelInspection
Cannot resolve property 'ignoreUnresolvablePlaceholders'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <!-- JMX Server  -->
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'location'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true"/>
        <property name="location" value="classpath:jmx.properties"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="mbeanserver" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true"/>
        <property name="registerWithFactory" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jmx'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="mbeanserver" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true"/>
        <property name="registerWithFactory" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'support'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="mbeanserver" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true"/>
        <property name="registerWithFactory" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve class 'MBeanServerFactoryBean'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="mbeanserver" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true"/>
        <property name="registerWithFactory" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve property 'locateExistingServerIfPossible'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="mbeanserver" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true"/>
        <property name="registerWithFactory" value="true"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'registerWithFactory'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="mbeanserver" class="org.springframework.jmx.support.MBeanServerFactoryBean">
        <property name="locateExistingServerIfPossible" value="true"/>
        <property name="registerWithFactory" value="true"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean" depends-on="registry">
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
```

### SpringXmlModelInspection
Cannot resolve class or package 'jmx'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean" depends-on="registry">
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
```

### SpringXmlModelInspection
Cannot resolve class or package 'support'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean" depends-on="registry">
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
```

### SpringXmlModelInspection
Cannot resolve class 'ConnectorServerFactoryBean'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean" depends-on="registry">
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
```

### SpringXmlModelInspection
Cannot resolve property 'objectName'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean" depends-on="registry">
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
                  value="service:jmx:rmi://${jmx.address}/jndi/rmi://${jmx.address}:${jmx.port}/jmxrmi"/>
```

### SpringXmlModelInspection
Cannot resolve property 'serviceUrl'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="serverConnector" class="org.springframework.jmx.support.ConnectorServerFactoryBean" depends-on="registry">
        <property name="objectName" value="connector:name=rmi"/>
        <property name="serviceUrl"
                  value="service:jmx:rmi://${jmx.address}/jndi/rmi://${jmx.address}:${jmx.port}/jmxrmi"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'remoting'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'rmi'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
```

### SpringXmlModelInspection
Cannot resolve class 'RmiRegistryFactoryBean'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
```

### SpringXmlModelInspection
Cannot resolve property 'port'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
        <property name="clientSocketFactory" ref="restrictedRmiSocketFactory"/>
```

### SpringXmlModelInspection
Cannot resolve property 'serverSocketFactory'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="registry" class="org.springframework.remoting.rmi.RmiRegistryFactoryBean">
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
        <property name="clientSocketFactory" ref="restrictedRmiSocketFactory"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve property 'clientSocketFactory'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="port" value="${jmx.port}"/>
        <property name="serverSocketFactory" ref="restrictedRmiSocketFactory"/>
        <property name="clientSocketFactory" ref="restrictedRmiSocketFactory"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Export -->
    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="beans">
            <map>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jmx'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Export -->
    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="beans">
            <map>
```

### SpringXmlModelInspection
Cannot resolve class or package 'export'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Export -->
    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="beans">
            <map>
```

### SpringXmlModelInspection
Cannot resolve class 'MBeanExporter'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- JMX Export -->
    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="beans">
            <map>
```

### SpringXmlModelInspection
Cannot resolve property 'beans'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <!-- JMX Export -->
    <bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
        <property name="beans">
            <map>
                <entry key="org.apache.james:type=component,name=domainlist" value-ref="domainlistmanagement"/>
```

### SpringXmlModelInspection
Cannot resolve property 'assembler'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
            </map>
        </property>
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
```

### SpringXmlModelInspection
Cannot resolve class or package 'springframework'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        </property>
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
                          value="org.apache.james.fetchmail.FetchSchedulerMBean,org.apache.james.domainlist.api.DomainListManagementMBean,org.apache.james.dnsservice.api.DNSServiceMBean,org.apache.james.rrt.api.RecipientRewriteTableManagementMBean,org.apache.james.user.api.UsersRepositoryManagementMBean,org.apache.james.adapter.mailbox.MailboxManagerManagementMBean,org.apache.james.adapter.mailbox.MailboxCopierManagementMBean,org.apache.james.mailetcontainer.api.jmx.MailSpoolerMBean,org.apache.james.adapter.mailbox.QuotaManagementMBean,org.apache.james.adapter.mailbox.ReIndexerManagementMBean,org.apache.james.sieverepository.api.SieveRepositoryManagementMBean"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'jmx'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        </property>
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
                          value="org.apache.james.fetchmail.FetchSchedulerMBean,org.apache.james.domainlist.api.DomainListManagementMBean,org.apache.james.dnsservice.api.DNSServiceMBean,org.apache.james.rrt.api.RecipientRewriteTableManagementMBean,org.apache.james.user.api.UsersRepositoryManagementMBean,org.apache.james.adapter.mailbox.MailboxManagerManagementMBean,org.apache.james.adapter.mailbox.MailboxCopierManagementMBean,org.apache.james.mailetcontainer.api.jmx.MailSpoolerMBean,org.apache.james.adapter.mailbox.QuotaManagementMBean,org.apache.james.adapter.mailbox.ReIndexerManagementMBean,org.apache.james.sieverepository.api.SieveRepositoryManagementMBean"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'export'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        </property>
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
                          value="org.apache.james.fetchmail.FetchSchedulerMBean,org.apache.james.domainlist.api.DomainListManagementMBean,org.apache.james.dnsservice.api.DNSServiceMBean,org.apache.james.rrt.api.RecipientRewriteTableManagementMBean,org.apache.james.user.api.UsersRepositoryManagementMBean,org.apache.james.adapter.mailbox.MailboxManagerManagementMBean,org.apache.james.adapter.mailbox.MailboxCopierManagementMBean,org.apache.james.mailetcontainer.api.jmx.MailSpoolerMBean,org.apache.james.adapter.mailbox.QuotaManagementMBean,org.apache.james.adapter.mailbox.ReIndexerManagementMBean,org.apache.james.sieverepository.api.SieveRepositoryManagementMBean"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'assembler'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        </property>
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
                          value="org.apache.james.fetchmail.FetchSchedulerMBean,org.apache.james.domainlist.api.DomainListManagementMBean,org.apache.james.dnsservice.api.DNSServiceMBean,org.apache.james.rrt.api.RecipientRewriteTableManagementMBean,org.apache.james.user.api.UsersRepositoryManagementMBean,org.apache.james.adapter.mailbox.MailboxManagerManagementMBean,org.apache.james.adapter.mailbox.MailboxCopierManagementMBean,org.apache.james.mailetcontainer.api.jmx.MailSpoolerMBean,org.apache.james.adapter.mailbox.QuotaManagementMBean,org.apache.james.adapter.mailbox.ReIndexerManagementMBean,org.apache.james.sieverepository.api.SieveRepositoryManagementMBean"/>
```

### SpringXmlModelInspection
Cannot resolve class 'InterfaceBasedMBeanInfoAssembler'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        </property>
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
                          value="org.apache.james.fetchmail.FetchSchedulerMBean,org.apache.james.domainlist.api.DomainListManagementMBean,org.apache.james.dnsservice.api.DNSServiceMBean,org.apache.james.rrt.api.RecipientRewriteTableManagementMBean,org.apache.james.user.api.UsersRepositoryManagementMBean,org.apache.james.adapter.mailbox.MailboxManagerManagementMBean,org.apache.james.adapter.mailbox.MailboxCopierManagementMBean,org.apache.james.mailetcontainer.api.jmx.MailSpoolerMBean,org.apache.james.adapter.mailbox.QuotaManagementMBean,org.apache.james.adapter.mailbox.ReIndexerManagementMBean,org.apache.james.sieverepository.api.SieveRepositoryManagementMBean"/>
```

### SpringXmlModelInspection
Cannot resolve property 'managedInterfaces'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="assembler">
            <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
                <property name="managedInterfaces"
                          value="org.apache.james.fetchmail.FetchSchedulerMBean,org.apache.james.domainlist.api.DomainListManagementMBean,org.apache.james.dnsservice.api.DNSServiceMBean,org.apache.james.rrt.api.RecipientRewriteTableManagementMBean,org.apache.james.user.api.UsersRepositoryManagementMBean,org.apache.james.adapter.mailbox.MailboxManagerManagementMBean,org.apache.james.adapter.mailbox.MailboxCopierManagementMBean,org.apache.james.mailetcontainer.api.jmx.MailSpoolerMBean,org.apache.james.adapter.mailbox.QuotaManagementMBean,org.apache.james.adapter.mailbox.ReIndexerManagementMBean,org.apache.james.sieverepository.api.SieveRepositoryManagementMBean"/>
            </bean>
```

### SpringXmlModelInspection
Cannot resolve class 'Hostname'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java


    <bean id="hostname" class="org.apache.james.task.Hostname" factory-method="fromLocalHostname" />
    <bean id="taskManager" class="org.apache.james.task.MemoryTaskManager">
        <constructor-arg index="0" ref="hostname"/>
```

### SpringXmlModelInspection
Cannot resolve method 'fromLocalHostname'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java


    <bean id="hostname" class="org.apache.james.task.Hostname" factory-method="fromLocalHostname" />
    <bean id="taskManager" class="org.apache.james.task.MemoryTaskManager">
        <constructor-arg index="0" ref="hostname"/>
```

### SpringXmlModelInspection
Cannot resolve class 'MemoryTaskManager'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="hostname" class="org.apache.james.task.Hostname" factory-method="fromLocalHostname" />
    <bean id="taskManager" class="org.apache.james.task.MemoryTaskManager">
        <constructor-arg index="0" ref="hostname"/>
    </bean>
```

### SpringXmlModelInspection
Cannot find constructor with argument index 0
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    <bean id="hostname" class="org.apache.james.task.Hostname" factory-method="fromLocalHostname" />
    <bean id="taskManager" class="org.apache.james.task.MemoryTaskManager">
        <constructor-arg index="0" ref="hostname"/>
    </bean>
    <!--
```

### SpringXmlModelInspection
Cannot resolve class or package 'dropwizard'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean id="metricFactory" class="org.apache.james.metrics.dropwizard.DropWizardMetricFactory">
        <constructor-arg index="0" ref="metricRegistry"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class 'DropWizardMetricFactory'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean id="metricFactory" class="org.apache.james.metrics.dropwizard.DropWizardMetricFactory">
        <constructor-arg index="0" ref="metricRegistry"/>
    </bean>
```

### SpringXmlModelInspection
Cannot find constructor with argument index 0
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="metricFactory" class="org.apache.james.metrics.dropwizard.DropWizardMetricFactory">
        <constructor-arg index="0" ref="metricRegistry"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'dropwizard'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="gaugeRegistry" class="org.apache.james.metrics.dropwizard.DropWizardGaugeRegistry">
        <constructor-arg index="0" ref="metricRegistry"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class 'DropWizardGaugeRegistry'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="gaugeRegistry" class="org.apache.james.metrics.dropwizard.DropWizardGaugeRegistry">
        <constructor-arg index="0" ref="metricRegistry"/>
    </bean>
```

### SpringXmlModelInspection
Cannot find constructor with argument index 0
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <bean id="gaugeRegistry" class="org.apache.james.metrics.dropwizard.DropWizardGaugeRegistry">
        <constructor-arg index="0" ref="metricRegistry"/>
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'codahale'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="metricRegistry" class="com.codahale.metrics.MetricRegistry"/>

    <!--
```

### SpringXmlModelInspection
Cannot resolve class or package 'metrics'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="metricRegistry" class="com.codahale.metrics.MetricRegistry"/>

    <!--
```

### SpringXmlModelInspection
Cannot resolve class 'MetricRegistry'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="metricRegistry" class="com.codahale.metrics.MetricRegistry"/>

    <!--
```

### SpringXmlModelInspection
Cannot resolve class or package 'jspf'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean id="jspfDnsService" class="org.apache.james.jspf.impl.DNSServiceXBillImpl">
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class or package 'impl'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean id="jspfDnsService" class="org.apache.james.jspf.impl.DNSServiceXBillImpl">
    </bean>

```

### SpringXmlModelInspection
Cannot resolve class 'DNSServiceXBillImpl'
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    -->

    <bean id="jspfDnsService" class="org.apache.james.jspf.impl.DNSServiceXBillImpl">
    </bean>

```

### SpringXmlModelInspection
Cannot resolve bean 'dnsservice'
in `server/protocols/protocols-smtp/src/main/resources/META-INF/spring/smtpserver-context.xml`
#### Snippet
```java

    <bean id="smtpserver" class="org.apache.james.smtpserver.netty.SMTPServerFactory">
        <constructor-arg index="0" ref="dnsservice"/>
        <constructor-arg index="1" ref="protocolhandlerloader"/>
        <constructor-arg index="2" ref="filesystem"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'protocolhandlerloader'
in `server/protocols/protocols-smtp/src/main/resources/META-INF/spring/smtpserver-context.xml`
#### Snippet
```java
    <bean id="smtpserver" class="org.apache.james.smtpserver.netty.SMTPServerFactory">
        <constructor-arg index="0" ref="dnsservice"/>
        <constructor-arg index="1" ref="protocolhandlerloader"/>
        <constructor-arg index="2" ref="filesystem"/>
        <constructor-arg index="3" ref="metricFactory"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'filesystem'
in `server/protocols/protocols-smtp/src/main/resources/META-INF/spring/smtpserver-context.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="dnsservice"/>
        <constructor-arg index="1" ref="protocolhandlerloader"/>
        <constructor-arg index="2" ref="filesystem"/>
        <constructor-arg index="3" ref="metricFactory"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'metricFactory'
in `server/protocols/protocols-smtp/src/main/resources/META-INF/spring/smtpserver-context.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="protocolhandlerloader"/>
        <constructor-arg index="2" ref="filesystem"/>
        <constructor-arg index="3" ref="metricFactory"/>
    </bean>
    
```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
    <bean id="lazyIndex" class="org.apache.james.mailbox.store.search.LazyMessageSearchIndex">
        <constructor-arg index="0" ref="luceneIndex"/>
        <constructor-arg index="1" ref="messageMapperFactory"/>
        <constructor-arg index="2" ref="sessionProvider"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'sessionProvider'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="luceneIndex"/>
        <constructor-arg index="1" ref="messageMapperFactory"/>
        <constructor-arg index="2" ref="sessionProvider"/>
    </bean>
    <bean id="luceneIndex" class="org.apache.james.mailbox.lucene.search.LuceneMessageSearchIndex">
```

### SpringXmlModelInspection
Cannot resolve bean 'messageMapperFactory'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
    </bean>
    <bean id="luceneIndex" class="org.apache.james.mailbox.lucene.search.LuceneMessageSearchIndex">
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="mailboxIdFactory"/>
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'mailboxIdFactory'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
    <bean id="luceneIndex" class="org.apache.james.mailbox.lucene.search.LuceneMessageSearchIndex">
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="mailboxIdFactory"/>
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
        <constructor-arg index="3" ref="messageIdFactory"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'lucene'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="mailboxIdFactory"/>
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
        <constructor-arg index="3" ref="messageIdFactory"/>
        <constructor-arg index="4" ref="sessionProvider"/>
```

### SpringXmlModelInspection
Cannot resolve class or package 'store'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="mailboxIdFactory"/>
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
        <constructor-arg index="3" ref="messageIdFactory"/>
        <constructor-arg index="4" ref="sessionProvider"/>
```

### SpringXmlModelInspection
Cannot resolve class 'Directory'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="messageMapperFactory"/>
        <constructor-arg index="1" ref="mailboxIdFactory"/>
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
        <constructor-arg index="3" ref="messageIdFactory"/>
        <constructor-arg index="4" ref="sessionProvider"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'messageIdFactory'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <constructor-arg index="1" ref="mailboxIdFactory"/>
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
        <constructor-arg index="3" ref="messageIdFactory"/>
        <constructor-arg index="4" ref="sessionProvider"/>
        <property name="enableSuffixMatch" value="true"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'sessionProvider'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <constructor-arg index="2" type="org.apache.lucene.store.Directory" ref="fsDirectory"/>
        <constructor-arg index="3" ref="messageIdFactory"/>
        <constructor-arg index="4" ref="sessionProvider"/>
        <property name="enableSuffixMatch" value="true"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'lucene'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <property name="enableSuffixMatch" value="true"/>
    </bean>
    <bean id="fsDirectory"  class="org.apache.lucene.store.FSDirectory" factory-method="open">
        <constructor-arg index="0" value="../var/store/lucene"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'store'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <property name="enableSuffixMatch" value="true"/>
    </bean>
    <bean id="fsDirectory"  class="org.apache.lucene.store.FSDirectory" factory-method="open">
        <constructor-arg index="0" value="../var/store/lucene"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class 'FSDirectory'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <property name="enableSuffixMatch" value="true"/>
    </bean>
    <bean id="fsDirectory"  class="org.apache.lucene.store.FSDirectory" factory-method="open">
        <constructor-arg index="0" value="../var/store/lucene"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve method 'open'
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
        <property name="enableSuffixMatch" value="true"/>
    </bean>
    <bean id="fsDirectory"  class="org.apache.lucene.store.FSDirectory" factory-method="open">
        <constructor-arg index="0" value="../var/store/lucene"/>
    </bean>
```

### SpringXmlModelInspection
Cannot find constructor with argument index 0
in `mailbox/lucene/src/main/resources/META-INF/spring/mailbox-index-lucene.xml`
#### Snippet
```java
    </bean>
    <bean id="fsDirectory"  class="org.apache.lucene.store.FSDirectory" factory-method="open">
        <constructor-arg index="0" value="../var/store/lucene"/>
    </bean>
 
```

### SpringXmlModelInspection
Cannot resolve bean 'filesystem'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java

    <bean id="imapserver" class="org.apache.james.imapserver.netty.IMAPServerFactory">
        <constructor-arg index="0" ref="filesystem" />
        <constructor-arg index="1" ref="imapDecoder" />
        <constructor-arg index="2" ref="imapEncoder" />
```

### SpringXmlModelInspection
Cannot resolve bean 'metricFactory'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
        <constructor-arg index="2" ref="imapEncoder" />
        <constructor-arg index="3" ref="imapProcessor" />
        <constructor-arg index="4" ref="metricFactory" />
        <constructor-arg index="5" ref="gaugeRegistry" />
    </bean>
```

### SpringXmlModelInspection
Cannot resolve bean 'gaugeRegistry'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
        <constructor-arg index="3" ref="imapProcessor" />
        <constructor-arg index="4" ref="metricFactory" />
        <constructor-arg index="5" ref="gaugeRegistry" />
    </bean>

```

### SpringXmlModelInspection
Cannot resolve method 'createXListSupportingProcessor'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
    <!-- Temporary configuration - see IMAP-357 -->
    <bean id="imapProcessor" class="org.apache.james.imap.processor.main.DefaultImapProcessorFactory"
          factory-method="createXListSupportingProcessor">
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="event-bus"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'mailboxmanager'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
    <bean id="imapProcessor" class="org.apache.james.imap.processor.main.DefaultImapProcessorFactory"
          factory-method="createXListSupportingProcessor">
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="event-bus"/>
        <constructor-arg index="2" ref="subscriptionManager"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'event-bus'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
          factory-method="createXListSupportingProcessor">
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="event-bus"/>
        <constructor-arg index="2" ref="subscriptionManager"/>
        <!-- The mailboxTyper -->
```

### SpringXmlModelInspection
Cannot resolve bean 'subscriptionManager'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
        <constructor-arg index="0" ref="mailboxmanager"/>
        <constructor-arg index="1" ref="event-bus"/>
        <constructor-arg index="2" ref="subscriptionManager"/>
        <!-- The mailboxTyper -->
        <constructor-arg index="3" value="#{null}"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaManager'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
        <!-- The mailboxTyper -->
        <constructor-arg index="3" value="#{null}"/>
        <constructor-arg index="4" ref="quotaManager"/>
        <constructor-arg index="5" ref="quotaRootResolver"/>
        <constructor-arg index="6" ref="timeMetricFactory"/>
```

### SpringXmlModelInspection
Cannot resolve bean 'quotaRootResolver'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
        <constructor-arg index="3" value="#{null}"/>
        <constructor-arg index="4" ref="quotaManager"/>
        <constructor-arg index="5" ref="quotaRootResolver"/>
        <constructor-arg index="6" ref="timeMetricFactory"/>
    </bean>
```

### SpringXmlModelInspection
Cannot resolve class or package 'logger'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
    <bean id="imapEncoder" factory-bean="imapEncoderFactory" factory-method="buildImapEncoder"/>

    <bean id="timeMetricFactory" class="org.apache.james.metrics.logger.DefaultMetricFactory"/>

</beans>
```

### SpringXmlModelInspection
Cannot resolve class 'DefaultMetricFactory'
in `server/protocols/protocols-imap4/src/main/resources/META-INF/spring/imapserver-context.xml`
#### Snippet
```java
    <bean id="imapEncoder" factory-bean="imapEncoderFactory" factory-method="buildImapEncoder"/>

    <bean id="timeMetricFactory" class="org.apache.james.metrics.logger.DefaultMetricFactory"/>

</beans>
```

## RuleId[id=RedundantComparatorComparing]
### RedundantComparatorComparing
Comparator method can be simplified if 'min()' call is replaced with 'max()'
in `mailbox/plugin/quota-mailing/src/main/java/org/apache/james/mailbox/quota/mailing/subscribers/QuotaThresholdNotice.java`
#### Snippet
```java
        return Stream.of(countThreshold, sizeThreshold)
            .flatMap(Optional::stream)
            .min(Comparator.reverseOrder())
            .get();
    }
```

## RuleId[id=SwitchStatementWithTooFewBranches]
### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `backends-common/rabbitmq/src/main/java/org/apache/james/backends/rabbitmq/RabbitMQManagementAPI.java`
#### Snippet
```java

    private static HostnameVerifier getHostNameVerifier(RabbitMQConfiguration configuration) {
        switch (configuration.getSslConfiguration().getHostNameVerifier()) {
            case ACCEPT_ANY_HOSTNAME:
                return ((hostname, session) -> true);
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/InputStreamContent.java`
#### Snippet
```java
    @Override
    public Publisher<ByteBuffer> reactiveBytes() {
        switch (type) {
            case FULL:
                return m.getFullContentReactive();
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/InputStreamContent.java`
#### Snippet
```java
    public InputStream getInputStream() throws IOException {
        // wrap the streams in a BoundedInputStream to make sure it really match with the stored size.
        switch (type) {
        case FULL:
            return m.getFullContent();
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/streaming/InputStreamContent.java`
#### Snippet
```java
    @Override
    public long size() {
        switch (type) {
        case FULL:
            return m.getFullContentOctets();
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `server/container/util/src/main/java/org/apache/james/util/mime/MessageContentExtractor.java`
#### Snippet
```java

    private MessageContent parseMultipartContent(Entity entity, Multipart multipart) throws IOException {
        switch (entity.getMimeType()) {
        case MULTIPART_ALTERNATIVE:
            return retrieveHtmlAndPlainTextContent(multipart);
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `server/data/data-jpa/src/main/java/org/apache/james/user/jpa/model/JPAUser.java`
#### Snippet
```java

    private static PasswordHashFunction chooseHashFunction(String algorithm) {
        switch (algorithm) {
            case "NONE":
                return password -> password;
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `protocols/imap/src/main/java/org/apache/james/imap/decode/parser/SearchCommandParser.java`
#### Snippet
```java
    private SearchKey sen(ImapRequestLineReader request) throws DecodingException {
        final int next = consumeAndCap(request);
        switch (next) {
        case 'T':
            return sent(request);
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `protocols/imap/src/main/java/org/apache/james/imap/processor/SystemMessageProcessor.java`
#### Snippet
```java
    @Override
    protected Mono<Void> doProcess(SystemMessage message, Responder responder, ImapSession session) {
        switch (message) {
            case FORCE_LOGOUT:
                forceLogout(session);
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `mailbox/backup/src/main/java/org/apache/james/mailbox/backup/zip/ZippedMailAccountIterator.java`
#### Snippet
```java

    private MailArchiveEntry from(ZipEntry current, ZipEntryType currentEntryType) throws ZipException {
        switch (currentEntryType) {
            case MAILBOX:
                return fromMailboxEntry(current);
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `server/data/data-api/src/main/java/org/apache/james/rrt/lib/MappingSource.java`
#### Snippet
```java

    public static MappingSource parse(String mappingSource) {
        switch (mappingSource) {
            case WILDCARD:
                return wildCard();
```

## RuleId[id=CatchMayIgnoreException]
### CatchMayIgnoreException
'catch' parameter named `ignore` is used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                try {
                    insert.close();
                } catch (SQLException ignore) {
                    LOGGER.error("Failed to close statement after updating tokens.", ignore);
                }
```

### CatchMayIgnoreException
'catch' parameter named `ignore` is used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                try {
                    update.close();
                } catch (SQLException ignore) {
                    LOGGER.error("Failed to close statement after updating tokens.", ignore);
                }
```

### CatchMayIgnoreException
'catch' parameter named `ignore` is used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                try {
                    init.close();
                } catch (SQLException ignore) {
                    LOGGER.error("Failed to close statement after initializing message count.", ignore);
                }
```

### CatchMayIgnoreException
'catch' parameter named `ignore` is used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                try {
                    update.close();
                } catch (SQLException ignore) {
                    LOGGER.error("Failed to close statement after setting message count.", ignore);
                }
```

### CatchMayIgnoreException
'catch' parameter named `ignore` is used
in `mailet/ai/src/main/java/org/apache/james/ai/classic/JDBCBayesianAnalyzer.java`
#### Snippet
```java
                try {
                    delete.close();
                } catch (SQLException ignore) {
                    LOGGER.error("Failed to close statement after deleting ham statement. ", ignore);
                }
```

### CatchMayIgnoreException
Unexpected VM exception like 'java.lang.NullPointerException' might be ignored in a `catch` block
in `server/data/data-cassandra/src/main/java/org/apache/james/sieve/cassandra/CassandraSieveRepository.java`
#### Snippet
```java
       try {
           runnable.run();
       } catch (RuntimeException e) {
           if (e.getCause() instanceof QuotaExceededException) {
               throw (QuotaExceededException) e.getCause();
```

## RuleId[id=MismatchedJavadocCode]
### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/MailSizeEsmtpExtension.java`
#### Snippet
```java
     *            the sender specified in this mail command (for logging
     *            purpose)
     * @return true if further options should be processed, false otherwise
     */
    private HookResult doMailSize(SMTPSession session,
```

### MismatchedJavadocCode
Method is specified to return 'false' but its return type is not boolean
in `protocols/smtp/src/main/java/org/apache/james/protocols/smtp/core/esmtp/MailSizeEsmtpExtension.java`
#### Snippet
```java
     *            the sender specified in this mail command (for logging
     *            purpose)
     * @return true if further options should be processed, false otherwise
     */
    private HookResult doMailSize(SMTPSession session,
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `third-party/spamassassin/src/main/java/org/apache/james/spamassassin/SpamAssassinInvoker.java`
#### Snippet
```java
     * @param message
     *            The MimeMessage to scan
     * @return true if spam otherwise false
     * @throws MessagingException
     *             if an error on scanning is detected
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/MailboxMapper.java`
#### Snippet
```java
     * @param mailbox not null
     * @param delimiter path delimiter
     * @return true when the mailbox has children, false otherwise
     */
    Mono<Boolean> hasChildren(Mailbox mailbox, char delimiter);
```

### MismatchedJavadocCode
Method is specified to return array but the return type is list
in `mailbox/api/src/main/java/org/apache/james/mailbox/acl/MailboxACLResolver.java`
#### Snippet
```java
     *            the owner of the mailbox named in the LISTRIGHTS command. User
     *            name or group name.
     * @return an array of {@link MailboxACL.Rfc4314Rights}. The first element is the
     *         set of implicit (global) rights which does not need to be set
     *         explicitly for the given identifier. Further elements are groups
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `mailbox/api/src/main/java/org/apache/james/mailbox/MailboxManager.java`
#### Snippet
```java
     * @param session
     *            the context for this call, not null
     * @return true when the INBOX exists and is accessible for the given
     *            user, false otherwise
     */
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `mailet/crypto/src/main/java/org/apache/james/transport/KeyStoreHolder.java`
#### Snippet
```java
     *            list of trusted (usually self-signed) certificates.
     * 
     * @return true if the certificate's signature is valid and can be validated
     *         using a trustedCertficated, false otherwise.
     */
```

### MismatchedJavadocCode
Method is specified to return 'false' but its return type is not boolean
in `mailet/crypto/src/main/java/org/apache/james/transport/KeyStoreHolder.java`
#### Snippet
```java
     * 
     * @return true if the certificate's signature is valid and can be validated
     *         using a trustedCertficated, false otherwise.
     */
    private static CertPath verifyCertificate(X509Certificate cert, CertStore store, KeyStore trustedStore) 
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `mailet/base/src/main/java/org/apache/mailet/base/MailetUtil.java`
#### Snippet
```java
     * @param config not null
     * @param name name of the init parameter to be queried
     * @return true when the init parameter is <code>true</code> (ignoring case);
     * false when the init parameter is <code>false</code> (ignoring case);
     * otherwise the default value
```

### MismatchedJavadocCode
Method is specified to return list but the return type is array
in `server/data/data-api/src/main/java/org/apache/james/user/api/UsersRepositoryManagementMBean.java`
#### Snippet
```java
     * 
     * 
     * @return List of all user names
     * @throws UsersRepositoryException
     *             if error
```

## RuleId[id=UnnecessaryToStringCall]
### UnnecessaryToStringCall
Unnecessary `toString()` call
in `core/src/main/java/org/apache/james/core/MailAddress.java`
#### Snippet
```java
                        (pos + 1) + " in '" + address + "'", address, pos + 1);
            }
            dSB.append(snumSB.toString());
            if (address.charAt(pos) == ']') {
                if (octet < 3) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `mpt/core/src/main/java/org/apache/james/mpt/session/ExternalSession.java`
#### Snippet
```java
        if (first && shabang != null) {
            // fake shabang
            monitor.note("<-" + buffer.toString());
            result = shabang;
            first = false;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `mailet/amqp/src/main/java/org/apache/james/transport/mailets/AmqpForwardAttribute.java`
#### Snippet
```java
                .orElseThrow(() -> new MailetException("Invalid attribute found into attribute "
                    + this.attribute.asString() + "class Map or List or String expected but "
                    + attribute.toString() + " found."));
    }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/WhiteListManager.java`
#### Snippet
```java
            while (selectRS.next()) {
                MailAddress mailAddress = new MailAddress(selectRS.getString(1), selectRS.getString(2));
                out.println(mailAddress.toString());
            }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliverAllTask.java`
#### Snippet
```java
                break;
            default:
                throw new RuntimeException("Result case: " + result.toString() + " not recognized");
        }
        return result;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliverGroupTask.java`
#### Snippet
```java
                break;
            default:
                throw new RuntimeException("Result case: " + result.toString() + " not recognized");
        }
        return result;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/protocols/webadmin/webadmin-mailbox/src/main/java/org/apache/james/webadmin/service/EventDeadLettersRedeliverOneTask.java`
#### Snippet
```java
                break;
            default:
                throw new RuntimeException("Result case: " + result.toString() + " not recognized");
        }
        return result;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `protocols/imap/src/main/java/org/apache/james/imap/decode/DecoderUtils.java`
#### Snippet
```java
                message = "Expected a date-time but was nothing.";
            } else {
                message = new StringBuffer("Expected a date-time but was ").append(chars.toString()).toString();
            }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/container/core/src/main/java/org/apache/james/server/core/MimeMessageWrapper.java`
#### Snippet
```java
                    saved = true;
                } else {
                    MimeMessageInputStreamSource src = MimeMessageInputStreamSource.create("MailCopy-" + UUID.randomUUID().toString());
                    OutputStream out = src.getWritableOutputStream();
                    original.writeTo(out);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterOperator.java`
#### Snippet
```java
            + MoreObjects.toStringHelper(getClass())
                    .add("operator", operator)
                    .toString()
            + "\n"
            + conditionListToString(indentation + "  ");
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/protocols/jmap-draft/src/main/java/org/apache/james/jmap/draft/model/FilterCondition.java`
#### Snippet
```java
    @Override
    public String prettyPrint(String indentation) {
        return indentation + toString() + "\n";
    }
}
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/ServerTime.java`
#### Snippet
```java
        MimeMessage response = (MimeMessage)mail.getMessage().reply(false);
        response.setSubject("The time is now...");
        String textBuffer = "This mail server thinks it's " + (new java.util.Date()).toString() + ".";
        response.setText(textBuffer);

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `mailet/standard/src/main/java/org/apache/james/transport/mailets/OnlyText.java`
#### Snippet
```java
                    res.append(charMap.get(buffer.toString()));
                } else {
                    res.append("&").append(buffer.toString()).append(";");
                }
                lastAmp = -1;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `mailet/base/src/main/java/org/apache/mailet/base/FlowedMessageUtils.java`
#### Snippet
```java
                    result.append(RFC2646_CRLF);
                }
                result.append(resultLine.toString());
                resultLine = new StringBuffer();
                resultLineFlowed = false;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/task/task-distributed/src/main/java/org/apache/james/task/eventsourcing/distributed/TerminationQueueName.java`
#### Snippet
```java
public class TerminationQueueName {
    public static TerminationQueueName generate() {
        return new TerminationQueueName(RabbitMQTerminationSubscriber.QUEUE_NAME_PREFIX + UUID.randomUUID().toString());
    }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `server/task/task-distributed/src/main/java/org/apache/james/task/eventsourcing/distributed/CancelRequestQueueName.java`
#### Snippet
```java
public class CancelRequestQueueName {
    public static CancelRequestQueueName generate() {
        return new CancelRequestQueueName(CANCEL_REQUESTS_QUEUE_NAME_PREFIX + UUID.randomUUID().toString());
    }

```

## RuleId[id=SuspiciousMethodCalls]
### SuspiciousMethodCalls
Suspicious call to 'Set.contains()'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/RspamdListener.java`
#### Snippet
```java
            .next()
            .map(MessageManager::getId)
            .map(spamMailboxId -> event.getMessageMoves().removedMailboxIds().contains(spamMailboxId))
            .onErrorResume(e -> {
                LOGGER.warn("Could not resolve {} mailbox", role, e);
```

### SuspiciousMethodCalls
Suspicious call to 'Set.contains()'
in `third-party/rspamd/src/main/java/org/apache/james/rspamd/RspamdListener.java`
#### Snippet
```java
            .next()
            .map(MessageManager::getId)
            .map(spamMailboxId -> event.getMessageMoves().addedMailboxIds().contains(spamMailboxId))
            .onErrorResume(e -> {
                LOGGER.warn("Could not resolve {} mailbox", role, e);
```

### SuspiciousMethodCalls
Suspicious call to 'ImmutableList.contains()'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
            .map(ContentTypeField::getMimeType)
            .map(dispositionType -> dispositionType.toLowerCase(Locale.US))
            .map(ATTACHMENT_CONTENT_TYPES::contains)
            .orElse(false);
    }
```

### SuspiciousMethodCalls
Suspicious call to 'List.contains()'
in `mailbox/store/src/main/java/org/apache/james/mailbox/store/mail/model/impl/MessageParser.java`
#### Snippet
```java
            .map(ContentDispositionField::getDispositionType)
            .map(dispositionType -> dispositionType.toLowerCase(Locale.US))
            .map(ATTACHMENT_CONTENT_DISPOSITIONS::contains)
            .orElse(false);
    }
```

### SuspiciousMethodCalls
Suspicious call to 'ImmutableMap.containsKey()'
in `protocols/imap/src/main/java/org/apache/james/imap/processor/ListProcessor.java`
#### Snippet
```java
            return Flux.from(Throwing.supplier(() -> subscriptionManager.subscriptionsReactive(mailboxSession)).get())
                .collect(ImmutableMap.toImmutableMap(path -> path, path -> path))
                .flatMap(subscribed -> processWithoutSubscribed(session, request, responder, mailboxSession, isRelative, mailboxQuery, subscribed::containsKey));
        } else {
            return processWithoutSubscribed(session, request, responder, mailboxSession, isRelative, mailboxQuery, any -> false);
```

## RuleId[id=CopyConstructorMissesField]
### CopyConstructorMissesField
Copy constructor does not copy field 'id'
in `mailbox/jpa/src/main/java/org/apache/james/mailbox/jpa/mail/model/JPAUserFlag.java`
#### Snippet
```java
     * @param flag not null
     */
    public JPAUserFlag(JPAUserFlag flag) {
        this(flag.getName());
    }
```

## RuleId[id=RegExpUnnecessaryNonCapturingGroup]
### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-2][0-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-2][0-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-2][0-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-2][0-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Regular expression that matches and captures parts of an IP address */
    private static final String ipCap = "((" + octet + ")\\.(" + octet + ")\\.(" + octet + ")\\.(" + octet + "))$";

    /** Pre-compiled pattern that matches IP addresses */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:https?|ftp|mailto|javascript|file)`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String uricNoColon = escape(reservedNoColon) + unreserved + "%";

    private static final String schemeRE = "(?-xism:(?:https?|ftp|mailto|javascript|file))";

    private static final String schemelessRE = "(?-xism:(?<![.=])(?:(?i)www\\d*\\.|(?i)ftp\\.))";
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:(?>[^(\040)<>@,;:".\\\[\]\000-\037\x80-\xff]+)|"[^\\\x80-\xff\n\r"]*(?:\\[^\x80-\xff][^\\\x80-\xff\n\r"]*)*")`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String quoted_str = "\"" + qtext + "*(?:" + quoted_pair + qtext + "*)*\"";

    private static final String word = "(?:" + atom + "|" + quoted_str + ")";

    private static final String local_part = word + "(?:" + period + word + ")*";
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:https?|ftp|mailto|javascript|file)`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String schemelessRE = "(?-xism:(?<![.=])(?:(?i)www\\d*\\.|(?i)ftp\\.))";

    private static final String uriRE = "(?-xism:\\b(?:" + schemeRE + ":[" + uricNoColon + "]|" + schemelessRE + ")[" + uricSet + "#]*)";

    /** Pre-compiled pattern that matches URIs */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[A-Za-z\d](?:[A-Za-z\d-]*[A-Za-z\d])?(?:\.[A-Za-z\d](?:[A-Za-z\d-]*[A-Za-z\d])?)*|\[(?:[^\\\x80-\xff\n\r\[\]]|\\[^\x80-\xff])*\])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java
    private static final String domain_lit = open_br + "(?:" + dtext + "|" + quoted_pair + ")*" + close_br;

    private static final String domain = "(?:" + domain_ref + "|" + domain_lit + ")";

    private static final String Addr_spec_re = "(?-xism:" + local_part + "\\s*\\@\\s*" + domain + ")";
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:https?|ftp|mailto|javascript|file)`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Pre-compiled pattern that matches URI scheme strings */
    private static final Pattern schemePattern = Pattern.compile("^" + schemeRE + ":");

    /** Pre-compiled pattern used to cleanup a found URI string */
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-2][0-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Simple reqular expression to match an octet part of an IP address */
    private static final String octet = "(?:[1-2][0-9][0-9])|(?:[1-9][0-9])|(?:[0-9])";

    /**
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[1-9][0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Simple reqular expression to match an octet part of an IP address */
    private static final String octet = "(?:[1-2][0-9][0-9])|(?:[1-9][0-9])|(?:[0-9])";

    /**
```

### RegExpUnnecessaryNonCapturingGroup
Unnecessary non-capturing group `(?:[0-9])`
in `server/protocols/protocols-smtp/src/main/java/org/apache/james/smtpserver/fastfail/URIScanner.java`
#### Snippet
```java

    /** Simple reqular expression to match an octet part of an IP address */
    private static final String octet = "(?:[1-2][0-9][0-9])|(?:[1-9][0-9])|(?:[0-9])";

    /**
```

## RuleId[id=ThrowableNotThrown]
### ThrowableNotThrown
Runtime exception instance `new RuntimeException()` is not thrown
in `mailbox/cassandra/src/main/java/org/apache/james/mailbox/cassandra/mail/CassandraMessageMapper.java`
#### Snippet
```java
    private Mono<ModSeq> computeNewModSeq(CassandraId mailboxId) {
        return modSeqProvider.nextModSeqReactive(mailboxId)
            .switchIfEmpty(ReactorUtils.executeAndEmpty(() -> new RuntimeException("ModSeq generation failed for mailbox " + mailboxId.asUuid())));
    }

```

### ThrowableNotThrown
Result of `haltError()` not thrown
in `server/protocols/webadmin/webadmin-mailrepository/src/main/java/org/apache/james/webadmin/service/MailRepositoryStoreService.java`
#### Snippet
```java
                .type(ErrorResponder.ErrorType.NOT_FOUND)
                .message("%s does not exist", path.asString())
                .haltError();
        }

```

## RuleId[id=DuplicatedBeanNamesInspection]
### DuplicatedBeanNamesInspection
Bean name duplicated
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    ===========================================================================
    -->
    <bean id="messageParser" class="org.apache.james.mailbox.store.mail.model.impl.MessageParser" init-method="init"/>

    <!-- Mailbox Managers -->
```

### DuplicatedBeanNamesInspection
Bean name duplicated
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java

    <!-- Mailbox Copier -->
    <bean id="mailboxcopier" class="org.apache.james.mailbox.tools.copier.MailboxCopierImpl"/>

    <bean id="mailboxmanagerresolver" class="org.apache.james.container.spring.mailbox.SpringResolver" />
```

### DuplicatedBeanNamesInspection
Bean name duplicated
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
    </bean>

    <bean id="datasource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <property name="driverClassName" value="${database.driverClassName}"/>
        <property name="url" value="${database.url}"/>
```

### DuplicatedBeanNamesInspection
Bean name duplicated
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="removeAbandonedTimeout" value="300"/>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="datasource"/>
        <property name="jpaVendorAdapter" ref="vendorAdapter"/>
```

### DuplicatedBeanNamesInspection
Bean name duplicated
in `server/container/spring/src/main/resources/META-INF/org/apache/james/spring-server.xml`
#### Snippet
```java
        <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    </bean>
    <bean id="vendorAdapter" class="org.springframework.orm.jpa.vendor.OpenJpaVendorAdapter">
        <property name="database" value="${vendorAdapter.database}"/>
        <!-- set this to true for debugging purposes -->
```

## RuleId[id=CastCanBeRemovedNarrowingVariableType]
### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'obj' to 'ProtocolElement'
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
            Object obj = elementsIterator.next();
            if (obj instanceof ProtocolElement) {
                ProtocolElement test = (ProtocolElement) obj;
                test.testProtocol(sessions, continueAfterFailure);
            }
```

### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'obj' to 'ProtocolElement'
in `mpt/core/src/main/java/org/apache/james/mpt/protocol/ProtocolSession.java`
#### Snippet
```java
                    Object obj = elementsIterator.next();
                    if (obj instanceof ProtocolElement) {
                        nextTest = (ProtocolElement) obj;

                        if (!nextTest.isClient()) {
```

### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'strandedStream' to 'String'
in `server/data/data-file/src/main/java/org/apache/james/mailrepository/file/FileMailRepository.java`
#### Snippet
```java
            strandedStreams.removeAll(objectKeys);
            for (Object strandedStream : strandedStreams) {
                MailKey key = new MailKey((String) strandedStream);
                remove(key);
            }
```

### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'strandedObject' to 'String'
in `server/data/data-file/src/main/java/org/apache/james/mailrepository/file/FileMailRepository.java`
#### Snippet
```java
            strandedObjects.removeAll(streamKeys);
            for (Object strandedObject : strandedObjects) {
                MailKey key = new MailKey((String) strandedObject);
                remove(key);
            }
```

### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'aProcessed' to 'MailKey'
in `server/mailet/mailets/src/main/java/org/apache/james/transport/mailets/FromRepository.java`
#### Snippet
```java
        if (delete) {
            for (Object aProcessed : processed) {
                repository.remove((MailKey) aProcessed);
            }
        }
```

