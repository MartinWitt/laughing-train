# jackrabbit-oak 
 
# Bad smells
I found 3482 bad smells with 270 repairable:
| ruleID | number | fixable |
| --- | --- | --- |
| JavadocDeclaration | 541 | false |
| FieldMayBeFinal | 334 | false |
| JavadocReference | 232 | false |
| Deprecation | 171 | false |
| DuplicatedCode | 161 | false |
| DataFlowIssue | 151 | false |
| ConstantValue | 122 | false |
| UnusedAssignment | 94 | false |
| FieldCanBeLocal | 93 | false |
| UNCHECKED_WARNING | 92 | false |
| IgnoreResultOfCall | 81 | false |
| UNUSED_IMPORT | 67 | false |
| UnnecessaryToStringCall | 67 | true |
| DuplicateThrows | 56 | false |
| EmptyStatementBody | 52 | false |
| NullableProblems | 52 | false |
| ToArrayCallWithZeroLengthArrayArgument | 48 | true |
| RedundantTypeArguments | 48 | false |
| TrivialIf | 48 | false |
| StringEquality | 45 | false |
| AutoCloseableResource | 43 | false |
| UnnecessaryLocalVariable | 43 | true |
| ProtectedMemberInFinalClass | 39 | true |
| UnnecessaryModifier | 38 | true |
| FinalMethodInFinalClass | 35 | false |
| StringBufferReplaceableByString | 32 | false |
| RedundantCast | 30 | false |
| CharsetObjectCanBeUsed | 28 | false |
| IntegerMultiplicationImplicitCastToLong | 25 | false |
| OptionalUsedAsFieldOrParameterType | 24 | false |
| BusyWait | 23 | false |
| StringOperationCanBeSimplified | 22 | false |
| ArraysAsListWithZeroOrOneArgument | 21 | false |
| DuplicateBranchesInSwitch | 21 | false |
| StringConcatenationInsideStringBufferAppend | 19 | false |
| InnerClassMayBeStatic | 19 | true |
| TrivialStringConcatenation | 18 | false |
| DeprecatedIsStillUsed | 18 | false |
| RedundantMethodOverride | 17 | false |
| StringConcatenationInLoops | 17 | false |
| DanglingJavadoc | 17 | false |
| JavadocLinkAsPlainText | 17 | false |
| RedundantStringFormatCall | 17 | false |
| UnnecessarySemicolon | 16 | false |
| WebProperties | 16 | false |
| CommentedOutCode | 13 | false |
| RegExpRedundantEscape | 13 | false |
| CollectionAddAllCanBeReplacedWithConstructor | 13 | false |
| IfStatementWithIdenticalBranches | 12 | false |
| NonAtomicOperationOnVolatileField | 12 | false |
| ConditionCoveredByFurtherCondition | 12 | false |
| SuspiciousMethodCalls | 10 | false |
| UnnecessaryCallToStringValueOf | 9 | false |
| RedundantArrayCreation | 9 | true |
| ManualMinMaxCalculation | 9 | false |
| CStyleArrayDeclaration | 8 | false |
| ConditionalBreakInInfiniteLoop | 8 | false |
| SimplifiableConditionalExpression | 8 | false |
| UseBulkOperation | 7 | false |
| FinalStaticMethod | 6 | false |
| IntegerDivisionInFloatingPointContext | 6 | false |
| ThrowablePrintedToSystemOut | 6 | false |
| PointlessNullCheck | 6 | false |
| SwitchStatementWithTooFewBranches | 6 | false |
| MismatchedJavadocCode | 6 | false |
| CatchMayIgnoreException | 6 | false |
| MismatchedCollectionQueryUpdate | 5 | false |
| ThrowableNotThrown | 5 | false |
| WrapperTypeMayBePrimitive | 4 | false |
| SimplifyStreamApiCallChains | 4 | false |
| SynchronizationOnLocalVariableOrMethodParameter | 4 | false |
| UnpredictableBigDecimalConstructorCall | 4 | false |
| RedundantClassCall | 4 | false |
| NonFinalFieldInEnum | 4 | false |
| FuseStreamOperations | 4 | false |
| TypeParameterExtendsObject | 4 | false |
| SynchronizeOnNonFinalField | 4 | false |
| PointlessArithmeticExpression | 3 | false |
| SpringBootApplicationYaml | 3 | false |
| PointlessBitwiseExpression | 3 | false |
| ManualArrayToCollectionCopy | 3 | false |
| UnaryPlus | 3 | false |
| RefusedBequest | 3 | false |
| RegExpSimplifiable | 3 | false |
| UnnecessaryReturn | 3 | true |
| MalformedFormatString | 3 | false |
| ThrowFromFinallyBlock | 3 | false |
| InfiniteLoopStatement | 3 | false |
| SlowAbstractSetRemoveAll | 3 | false |
| OptionalIsPresent | 3 | false |
| UnnecessaryContinue | 3 | false |
| CopyConstructorMissesField | 3 | false |
| FinalPrivateMethod | 2 | false |
| SwitchStatementWithConfusingDeclaration | 2 | false |
| RedundantFileCreation | 2 | false |
| PointlessBooleanExpression | 2 | true |
| LoopStatementsThatDontLoop | 2 | false |
| UnnecessaryStringEscape | 2 | true |
| DuplicateExpressions | 2 | false |
| FinalizeNotProtected | 2 | false |
| CastCanBeRemovedNarrowingVariableType | 2 | false |
| MismatchedArrayReadWrite | 1 | false |
| SortedCollectionWithNonComparableKeys | 1 | false |
| ForLoopReplaceableByWhile | 1 | false |
| NumberEquality | 1 | false |
| RedundantEscapeInRegexReplacement | 1 | false |
| NewObjectEquality | 1 | false |
| ImplicitArrayToString | 1 | false |
| InstantiationOfUtilityClass | 1 | false |
| UnnecessaryUnicodeEscape | 1 | false |
| ManualArrayCopy | 1 | false |
| OctalLiteral | 1 | false |
| IfStatementMissingBreakInLoop | 1 | false |
| FunctionalExpressionCanBeFolded | 1 | false |
| SimplifyOptionalCallChains | 1 | false |
| SlowListContainsAll | 1 | false |
| RedundantCollectionOperation | 1 | false |
| ServletWithoutMappingInspection | 1 | false |
| EqualsWhichDoesntCheckParameterClass | 1 | false |
## RuleId[id=ToArrayCallWithZeroLengthArrayArgument]
### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[values.size()\]'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PropertiesUtil.java`
#### Snippet
```java
                }
            }
            return values.toArray(new String[values.size()]);

        } else if (propValue instanceof Collection<?>) {
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[valueList.size()\]'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PropertiesUtil.java`
#### Snippet
```java
                }
            }
            return valueList.toArray(new String[valueList.size()]);
        }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[stack.size()\]'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
            }
            if (stack.size() > 0) {
                String[] s = stack.toArray(new String[stack.size()]);
                list.add(s);
            }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[list.size()\]'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ResultImpl.java`
#### Snippet
```java
            }
        }
        return list.toArray(new String[list.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Value\[values.size()\]'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
        if (definition.isMultiple()) {
            List<Value> values = valueFactory.createValues(property);
            if (!nt.canSetProperty(property.getName(), values.toArray(new Value[values.size()]))) {
                throw new ConstraintViolationException("Cannot set property '" + property.getName() + "' to '" + values + '\'');
            }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new NodeDefinition\[definitions.size()\]'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeImpl.java`
#### Snippet
```java
    public NodeDefinition[] getChildNodeDefinitions() {
        Collection<NodeDefinition> definitions = internalGetChildDefinitions();
        return definitions.toArray(new NodeDefinition[definitions.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new PropertyDefinition\[definitions.size()\]'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeImpl.java`
#### Snippet
```java
    public PropertyDefinition[] getPropertyDefinitions() {
        Collection<PropertyDefinition> definitions = internalGetPropertyDefinitions();
        return definitions.toArray(new PropertyDefinition[definitions.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new PropertyTemplate\[templates.size()\]'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
        this.mixinTypes = mixins;
        this.properties =
                templates.toArray(new PropertyTemplate[templates.size()]);
        Arrays.sort(properties);

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Integer\[map.size()\]'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarFiles.java`
#### Snippet
```java

        Map<Integer, Map<Character, String>> map = collectFiles(archiveManager);
        Integer[] indices = map.keySet().toArray(new Integer[map.size()]);
        Arrays.sort(indices);

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new SegmentArchiveEntry\[entryList.size()\]'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarReader.java`
#### Snippet
```java
    SegmentArchiveEntry[] getEntries() {
        List<SegmentArchiveEntry> entryList = archive.listSegments();
        return entryList.toArray(new SegmentArchiveEntry[entryList.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[keys.size()\]'
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/descriptors/AggregatingDescriptors.java`
#### Snippet
```java
            Collections.addAll(keys, descriptors.getKeys());
        }
        return keys.toArray(new String[keys.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[keys.size()\]'
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/descriptors/GenericDescriptors.java`
#### Snippet
```java
            Collections.addAll(keys, base.getKeys());
        }
        return keys.toArray(new String[keys.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[rootPathList.size()\]'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java

                    List<String> rootPathList = options.valuesOf(verboseRootPath);
                    traverser.traverse((String[]) rootPathList.toArray(new String[rootPathList.size()]));

                    FileUtils.copyFile(traverser.references, register.createFile(refOp, dumpPath));
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[rootPathList.size()\]'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
                List<String> roothPathInclusionRegex = dataStoreOpts.getVerboseInclusionRegex();
                retriever = new NodeTraverserReferenceRetriever(fixture.getStore(),
                    rootPathList.toArray(new String[rootPathList.size()]),
                    roothPathInclusionRegex.toArray(new String[roothPathInclusionRegex.size()]),
                    dataStoreOpts.isUseDirListing());
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[roothPathInclusionRegex.size()\]'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
                retriever = new NodeTraverserReferenceRetriever(fixture.getStore(),
                    rootPathList.toArray(new String[rootPathList.size()]),
                    roothPathInclusionRegex.toArray(new String[roothPathInclusionRegex.size()]),
                    dataStoreOpts.isUseDirListing());
            } else {
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[includeCopy.size()\]'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/filter/PathFilter.java`
#### Snippet
```java
        checkState(!includeCopy.isEmpty(), "No valid include provided. Includes %s, " +
                "Excludes %s", includes, excludes);
        this.includedPaths = includeCopy.toArray(new String[includeCopy.size()]);
        this.excludedPaths = excludeCopy.toArray(new String[excludeCopy.size()]);
    }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[excludeCopy.size()\]'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/filter/PathFilter.java`
#### Snippet
```java
                "Excludes %s", includes, excludes);
        this.includedPaths = includeCopy.toArray(new String[includeCopy.size()]);
        this.excludedPaths = excludeCopy.toArray(new String[excludeCopy.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[tokens.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockManagerImpl.java`
#### Snippet
```java
            public String[] perform() {
                Set<String> tokens = sessionContext.getOpenScopedLocks();
                return tokens.toArray(new String[tokens.size()]);
            }
        });
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[list.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryManagerImpl.java`
#### Snippet
```java
        // create a new instance each time because the array is mutable
        // (the caller could modify it)
        return list.toArray(new String[list.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new RefreshStrategy\[strategies.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/RefreshStrategy.java`
#### Snippet
```java
                }
            }
            return new Composite(strategies.toArray(new RefreshStrategy[strategies.size()]));
        }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[prefixes.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/SessionNamespaces.java`
#### Snippet
```java
        prefixes.addAll(local.keySet());

        return prefixes.toArray(new String[prefixes.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Version\[successors.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionImpl.java`
#### Snippet
```java
                    successors.add(new VersionImpl(vMgr.getVersionByIdentifier(id), sessionContext));
                }
                return successors.toArray(new Version[successors.size()]);
            }
        });
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Version\[predecessors.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionImpl.java`
#### Snippet
```java
                    predecessors.add(new VersionImpl(vDelegate, sessionContext));
                }
                return predecessors.toArray(new Version[predecessors.size()]);
            }
        });
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[names.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/SessionImpl.java`
#### Snippet
```java
        Collections.addAll(names, sd.getAuthInfo().getAttributeNames());
        names.add(RepositoryImpl.BOUND_PRINCIPALS);
        return names.toArray(new String[names.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[labels.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
                    labels.add(sessionContext.getJcrName(label));
                }
                return labels.toArray(new String[labels.size()]);
            }
        });
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[labels.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
                    labels.add(sessionContext.getJcrName(label));
                }
                return labels.toArray(new String[labels.size()]);
            }
        });
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Value\[values.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/EventFactory.java`
#### Snippet
```java
        if (property.isArray()) {
            List<Value> values = valueFactory.createValues(property);
            return values.toArray(new Value[values.size()]);
        } else {
            return valueFactory.createValue(property);
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[combo.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/OakEventFilterImpl.java`
#### Snippet
```java
            combo.addAll(Arrays.asList(this.globPaths));
            combo.addAll(Arrays.asList(globPaths));
            this.globPaths = combo.toArray(new String[combo.size()]);
        }
        return this;
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new NodeType\[mixinTypes.size()\]'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
                        mixinTypes.add(ntMgr.getNodeType(sessionContext.getJcrName(mixinNames.next())));
                    }
                    return mixinTypes.toArray(new NodeType[mixinTypes.size()]);
                } else {
                    return new NodeType[0];
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[names.size()\]'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
                names.add(getOakName(supertype));
            }
            tmpl.setDeclaredSuperTypeNames(names.toArray(new String[names.size()]));
        }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[names.size()\]'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
            names.add(getOakName(type));
        }
        tmpl.setRequiredPrimaryTypeNames(names.toArray(new String[names.size()]));

        Name type = def.getDefaultPrimaryType();
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new NodeTypeTemplate\[templates.size()\]'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
            }
        }
        ntMgr.registerNodeTypes(templates.toArray(new NodeTypeTemplate[templates.size()]), true);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[aggrNames.size()\]'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
                        });
                if (allAggregatesRegistered(pMgr, aggrNames)) {
                    pMgr.registerPrivilege(aggrPriv.getName(), aggrPriv.isAbstract(), aggrNames.toArray(new String[aggrNames.size()]));
                    it.remove();
                    logger.info("- " + aggrPriv.getName());
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[orderedProps.size()\]'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/util/OakLuceneIndexUtils.java`
#### Snippet
```java
            if (!orderedProps.isEmpty()) {
                indexDef.setProperty(FulltextIndexConstants.ORDERED_PROP_NAMES,
                        orderedProps.toArray(new String[orderedProps.size()]),
                        PropertyType.NAME);
            }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[filter.getPrimaryTypes().size()\]'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java

        if (configuration.useForPrimaryTypes()) {
            String[] pts = filter.getPrimaryTypes().toArray(new String[filter.getPrimaryTypes().size()]);
            StringBuilder ptQueryBuilder = new StringBuilder();
            for (int i = 0; i < pts.length; i++) {
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[fieldNames.size()\]'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/MoreLikeThisHelper.java`
#### Snippet
```java
                            }
                        }
                        String[] docFields = fieldNames.toArray(new String[fieldNames.size()]);
                        mlt.setFieldNames(docFields);
                        moreLikeThisQuery = mlt.like(d.doc);
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[names.size()\]'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
            Arrays.fill(maxPassages, 1);
            try {
                Map<String, String[]> stringMap = postingsHighlighter.highlightFields(names.toArray(new String[names.size()]),
                        query, searcher, new int[]{docID}, maxPassages);
                for (Map.Entry<String, String[]> entry : stringMap.entrySet()) {
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[all.size()\]'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/BufferedOakDirectory.java`
#### Snippet
```java
        all.addAll(asList(buffered.listAll()));
        all.removeAll(bufferedForDelete);
        return all.toArray(new String[all.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[fileNames.size()\]'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakDirectory.java`
#### Snippet
```java
    @Override
    public String[] listAll() throws IOException {
        return fileNames.toArray(new String[fileNames.size()]);
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new Principal\[principals.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReadDeepTreeTest.java`
#### Snippet
```java

    protected void addPolicy(AccessControlManager acMgr, Node node, Privilege[] privileges, List<Principal> principals) throws RepositoryException {
        addPolicy(acMgr, node, privileges, principals.toArray(new Principal[principals.size()]));
    }

```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[ids.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AddUniqueMembersTest.java`
#### Snippet
```java
                    i++;
                }
                failed = group.addMembers(ids.toArray(new String[ids.size()]));
            }
            Assert.assertTrue("Group " + group.getID() + ": unable to add: " + failed, failed.isEmpty());
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[ids.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/RemoveMembersTest.java`
#### Snippet
```java
                    i++;
                }
                group.removeMembers(ids.toArray(new String[ids.size()]));
            }
            s.save();
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[ids.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/RemoveMembersTest.java`
#### Snippet
```java
                    ids.add(USER + j);
                }
                g.addMembers(ids.toArray(new String[ids.size()]));
                s.save();
            }
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[ids.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AddMembersTest.java`
#### Snippet
```java
                    i++;
                }
                group.addMembers(ids.toArray(new String[ids.size()]));
            }
            s.save();
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[supportedPaths.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CugTest.java`
#### Snippet
```java
        super(runAsAdmin, itemsToRead, false, singleSession);
        this.params = ConfigurationParameters.of(AuthorizationConfiguration.NAME, ConfigurationParameters.of(
                    "cugSupportedPaths", supportedPaths.toArray(new String[supportedPaths.size()]),
                    "cugEnabled", true));
        this.reverseOrder = reverseOrder;
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[memberIds.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/MemberBaseTest.java`
#### Snippet
```java
            }

            String[] idArray = memberIds.toArray(new String[memberIds.size()]);
            for (int i = 0, j = 1; i <= numberOfGroups; i++, j++) {
                Group g = userManager.createGroup(new PrincipalImpl(GROUP + i), REL_TEST_PATH);
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new String\[autoMembership.size()\]'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/AbstractExternalTest.java`
#### Snippet
```java
                .setMembershipNestingDepth(1)
                .setDynamicMembership(dynamicMembership)
                .setAutoMembership(autoMembership.toArray(new String[autoMembership.size()]))
                .setExpirationTime(expTime).setPathPrefix(PATH_PREFIX);
        syncConfig.group()
```

### ToArrayCallWithZeroLengthArrayArgument
Call to `toArray()` with pre-sized array argument 'new URL\[urls.size()\]'
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                reader.close();
            }
            return urls.toArray(new URL[urls.size()]);
        }
    }
```

## RuleId[id=WrapperTypeMayBePrimitive]
### WrapperTypeMayBePrimitive
Type may be primitive
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java
            // use 'findAndUpdate' with the condition that
            // the view id is still at the previousview one
            Long previousViewSeqNum = previousView.getViewSeqNum();
            updateOp.setNew(false); // change to false from true above
            updateOp.equals(VIEW_SEQ_NUM_KEY, null, previousViewSeqNum);
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
            if (split.length == 2) {
                try {
                    Integer id = Integer.parseInt(split[0]);
                    if (id == clusterNodeId) {
                        final Revision lastKnownRev = Revision.fromString(split[1]);
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarFiles.java`
#### Snippet
```java
                    dataFiles.put(index, files);
                }
                Character generation = 'a';
                if (matcher.group(4) != null) {
                    generation = matcher.group(4).charAt(0);
```

### WrapperTypeMayBePrimitive
Type may be primitive
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/NodeStateSolrServerConfigurationProvider.java`
#### Snippet
```java
            String coreName = getStringValueFor(Properties.CORE_NAME, SolrServerConfigurationDefaults.CORE_NAME);
            String context = getStringValueFor(Properties.CONTEXT, null);
            Integer httpPort = Integer.valueOf(getStringValueFor(Properties.HTTP_PORT, "0"));

            if (context != null && httpPort > 0) {
```

## RuleId[id=MismatchedArrayReadWrite]
### MismatchedArrayReadWrite
Contents of array `customAttributes` are read, but never written to
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
        private String idAttribute;

        private String[] customAttributes = {};

        private String extraFilter;
```

## RuleId[id=UnnecessaryModifier]
### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
     * @param num
     */
    public void updateNumBlobReferences(long num);

    /**
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
     * @param size
     */
    public void updateBlobReferencesSize(long size);
    
    /**
```

### UnnecessaryModifier
Modifier `static` is redundant for inner enums
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java

    /** describes the reason why the BackgroundWorker should be woken up **/
    private static enum WakeupReason {
        CLUSTER_STATE_CHANGED, BACKGROUND_READ_FINISHED
    }
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterStateChangeListener.java`
#### Snippet
```java
     * the clusterNodes collection.
     */
    public void handleClusterStateChange();

}
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevTracker.java`
#### Snippet
```java
     * @param path the path of the document to update.
     */
    public void track(Path path);
}

```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java
         */
        @NotNull
        public String getStatementComponent();

        /**
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java
         * @throws SQLException
         */
        public int setParameters(PreparedStatement stmt, int startIndex) throws SQLException;
    }

```

### UnnecessaryModifier
Modifier `static` is redundant for inner enums
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
    public static final String BROADCAST_LISTENER = "broadcastListener";

    public static enum ClusterNodeState {
        NONE,
        /**
```

### UnnecessaryModifier
Modifier `static` is redundant for inner enums
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
    public static final String REV_RECOVERY_LOCK = "recoveryLock";

    public static enum RecoverLockState {
        NONE,
        /**
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBCommonVendorSpecificCode.java`
#### Snippet
```java
    protected String description;

    private RDBCommonVendorSpecificCode() {
    }

```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStoreDB.java`
#### Snippet
```java
    protected RDBCommonVendorSpecificCode vendorCode = RDBCommonVendorSpecificCode.DEFAULT;

    private RDBBlobStoreDB(String description) {
        this.description = description;
        this.vendorCode = RDBCommonVendorSpecificCode.DEFAULT;
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStoreDB.java`
#### Snippet
```java
    }

    private RDBBlobStoreDB(String description, RDBCommonVendorSpecificCode vendorCode) {
        this.description = description;
        this.vendorCode = vendorCode;
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/spi/lease/LeaseFailureHandler.java`
#### Snippet
```java
     * and must be done by here in this LeaseFailureHandler.
     */
    public void handleLeaseFailure();
    
}
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
    }

    private RDBDocumentStoreDB(String description) {
        this.description = description;
        this.vendorCode = RDBCommonVendorSpecificCode.DEFAULT;
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
    }

    private RDBDocumentStoreDB(String description, RDBCommonVendorSpecificCode vendorCode) {
        this.description = description;
        this.vendorCode = vendorCode;
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/broadcast/Broadcaster.java`
#### Snippet
```java
     * A listener for new messages.
     */
    public interface Listener {
        
        /**
```

### UnnecessaryModifier
Modifier `static` is redundant for inner interfaces
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    }

    private static interface MyCloseableIterable<T> extends Closeable, Iterable<T> {
    }

```

### UnnecessaryModifier
Modifier `static` is redundant for inner enums
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java
     * optimisation.
     */
    public static enum QuerySelectionMode {
        
        /**
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java`
#### Snippet
```java
        
        private final String direction;
        private OrderDirection(String direction) {
            this.direction = direction;
        }
```

### UnnecessaryModifier
Modifier `static` is redundant for inner interfaces
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/aggregate/SimpleNodeAggregator.java`
#### Snippet
```java
    // ----- aggregation rules

    private static interface Rule {

    }
```

### UnnecessaryModifier
Modifier `static` is redundant for inner interfaces
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeEditor.java`
#### Snippet
```java
     */
    @ConsumerType
    public static interface ConstraintViolationCallback {
        /**
         * Invoked whenever a constraint violation is detected.
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/monitor/RemoteStoreMonitor.java`
#### Snippet
```java
    public void requestError();

    public void requestDuration(long duration, TimeUnit timeUnit);

}
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/monitor/RemoteStoreMonitor.java`
#### Snippet
```java
    public void requestCount();

    public void requestError();

    public void requestDuration(long duration, TimeUnit timeUnit);
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/monitor/RemoteStoreMonitor.java`
#### Snippet
```java
public interface RemoteStoreMonitor {

    public void requestCount();

    public void requestError();
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/AuthorizableType.java`
#### Snippet
```java
    private final int userType;

    private AuthorizableType(int jcrUserType) {
        this.userType = jcrUserType;
    }
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/state/ConflictType.java`
#### Snippet
```java
    private final boolean effectsNode;

    private ConflictType(String value, boolean node) {
        this.name = value;
        this.effectsNode = node;
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/fulltext/FullTextVisitor.java`
#### Snippet
```java
     * The base implementation of a full-text visitor.
     */
    public abstract static class FullTextVisitorBase implements FullTextVisitor {

        @Override
```

### UnnecessaryModifier
Modifier `static` is redundant for inner classes of interfaces
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/fulltext/FullTextVisitor.java`
#### Snippet
```java
     * The base implementation of a full-text visitor.
     */
    public abstract static class FullTextVisitorBase implements FullTextVisitor {

        @Override
```

### UnnecessaryModifier
Modifier `private` is redundant for enum constructors
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/ImpactOption.java`
#### Snippet
```java
    private final int value;

    private ImpactOption(int value) {
        this.value = value;
    }
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
    public long estimatedMemoryUsage();

    public int size();

    /**
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
     * Add an item at the tail of the list.
     */
    public void add(@NotNull NodeStateEntry item);

    /**
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
     * @return the removed item
     */
    public NodeStateEntry remove();

    public long estimatedMemoryUsage();
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
    public NodeStateEntry remove();

    public long estimatedMemoryUsage();

    public int size();
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
    public Iterator<NodeStateEntry> iterator();

    public boolean isEmpty();

    public void close();
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
    public boolean isEmpty();

    public void close();

}
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/NodeStateEntryList.java`
#### Snippet
```java
     * Get an iterator to iterate over the whole list
     */
    public Iterator<NodeStateEntry> iterator();

    public boolean isEmpty();
```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/JcrCreator.java`
#### Snippet
```java
    };

    public Jcr customize(Oak oak);
}

```

### UnnecessaryModifier
Modifier `public` is redundant for interface members
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/MountedNodeStoreChecker.java`
#### Snippet
```java
public interface MountedNodeStoreChecker<T> {
    
    public T createContext(NodeStore globalStore, MountInfoProvider mip);
    
    boolean check(MountedNodeStore mountedStore, Tree tree, ErrorHolder errorHolder, T context);
```

## RuleId[id=PointlessArithmeticExpression]
### PointlessArithmeticExpression
`1 * 1024 * 1024` can be replaced with '1024 \* 1024'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java`
#### Snippet
```java
    // we see the (approximate) updateOp size of the recovery journal entry grow above 1 MB
    // (1 MB being well within the 16 MB limit to account for 'approximate' nature of getting the size)
    private static final int PSEUDO_BRANCH_COMMIT_UPDATE_OP_THRESHOLD_BYTES = 1 * 1024 * 1024;

    // OAK-9535 : recalculate the journal entry size every 4096 elements
```

### PointlessArithmeticExpression
`1 * 1024 * 1024` can be replaced with '1024 \* 1024'
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticIndexDefinition.java`
#### Snippet
```java

    public static final String BULK_SIZE_BYTES = "bulkSizeBytes";
    public static final long BULK_SIZE_BYTES_DEFAULT = 1 * 1024 * 1024; // 1MB

    public static final String BULK_FLUSH_INTERVAL_MS = "bulkFlushIntervalMs";
```

### PointlessArithmeticExpression
`1 * MB` can be replaced with 'MB'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
            .withPort(port)
            .withFileStore(stores[i])
            .withBlobChunkSize(1 * MB)
            .withSecureConnection(secure)
            .build();
```

## RuleId[id=EmptyStatementBody]
### EmptyStatementBody
`while` statement has empty body
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
                        try {
                            reader = new LineNumberReader(new InputStreamReader(refRec.getStream()));
                            while (reader.readLine() != null) {
                            }
                            stat.setNumLines(reader.getLineNumber());
```

### EmptyStatementBody
`while` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DiffCache.java`
#### Snippet
```java
                    t.read(':');
                    t.read('{');
                    while (t.read() != '}') {
                        // skip properties
                    }
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Commit.java`
#### Snippet
```java
                        if (c.mark(store).equals(revision)) {
                            // our revision was marked
                            if (baseRevision.isBranch()) {
                                // this is a branch commit. do not fail immediately
                                // merging this branch will fail later.
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/MissingBcSweeper2.java`
#### Snippet
```java

                Revision cRev = getCommitRevision(doc, rev);
                if (cRev == null) {
                    // originally the uncommitted case
                    // however, sweep2 doesn't touch anything uncommitted
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/MissingBcSweeper2.java`
#### Snippet
```java
                    // originally the uncommitted case
                    // however, sweep2 doesn't touch anything uncommitted
                } else if (cRev.equals(rev)) {
                    // originally the committed case
                    // however, that was only logging and sweep2 is not about that,
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                    RevisionVector a = fromNode.getLastRevision();
                    RevisionVector b = toNode.getLastRevision();
                    if (a == null && b == null) {
                        // ok
                    } else if (a == null || b == null || !a.equals(b)) {
```

### EmptyStatementBody
`else` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                    // exists in toRev
                    w.tag('+').key(name).object().endObject();
                } else {
                    // does not exist in either revisions
                    // -> do nothing
```

### EmptyStatementBody
`else` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                    throw new ConflictException(msg, conflictRevs);
                }
            } else {
                // no commits in this branch -> do nothing
            }
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
                }
                c = key.charAt(++i);
                if (c == '\\') {
                    // ok
                } else if (c == 'd') {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
            } else if (o instanceof Map) {
                size += 8 + (long)estimateMemoryUsage((Map<String, Object>) o);
            } else if (o == null) {
                // zero
            } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                    // inspect the doc whether it can be used
                    long lastCheckTime = doc.getLastCheckTime();
                    if (lastCheckTime != 0 && (maxCacheAge == 0 || maxCacheAge == Integer.MAX_VALUE)) {
                        // we either just cleared the cache or the caller does
                        // not care;
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                        // we either just cleared the cache or the caller does
                        // not care;
                    } else if (lastCheckTime != 0 && (System.currentTimeMillis() - lastCheckTime < maxCacheAge)) {
                        // is new enough
                    } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    private static void continueIfStringOverflow(SQLException ex) throws SQLException {
        String state = ex.getSQLState();
        if ("22001".equals(state) /* everybody */|| ("72000".equals(state) && 1489 == ex.getErrorCode()) /* Oracle */
        		|| ("S0001".equals(state) && 2628 == ex.getErrorCode()) /* MSSQL update*/) {
            // ok
```

### EmptyStatementBody
`if` statement has empty body
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticIndexCommand.java`
#### Snippet
```java
    private static void setupDirectories(IndexOptions indexOpts) throws IOException {
        if (indexOpts.getOutDir().exists()) {
            if (indexOpts.isImportIndex() &&
                    FileUtils.directoryContains(indexOpts.getOutDir(), indexOpts.getIndexImportDir())) {
                //Do not clean directory in this case
```

### EmptyStatementBody
`while` statement has empty body
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentStoreMigrator.java`
#### Snippet
```java
        executor.shutdown();
        try {
            while (!executor.awaitTermination(100, TimeUnit.MILLISECONDS));
        } catch (InterruptedException e) {
            throw new IOException(e);
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/DescendantNodeJoinConditionImpl.java`
#### Snippet
```java
    @Override
    public void restrict(FilterImpl f) {
        if (f.getSelector().equals(ancestorSelector)) {
            // we ca not currently optimize this case,
            // as we would need a path restriction of type "ALL_PARENTS".
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/FullTextSearchImpl.java`
#### Snippet
```java
    private static void appendString(StringBuilder buff, PropertyValue p) {
        if (p.isArray()) {
            if (p.getType() == Type.BINARIES) {
                // OAK-2050: don't try to load binaries as this would 
                // run out of memory
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/FullTextSearchImpl.java`
#### Snippet
```java
            }
        } else {
            if (p.getType() == Type.BINARY) {
                // OAK-2050: don't try to load binaries as this would 
                // run out of memory
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/PropertyInexistenceImpl.java`
#### Snippet
```java
            if (p.equals("..")) {
                t = t.isRoot() ? null : t.getParent();
            } else if (p.equals(".")) {
                // same node
            } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
            if (parent.equals("..")) {
                t = t.isRoot() ? null : t.getParent();
            } else if (parent.equals(".")) {
                // same node
            } else if (parent.equals("*")) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
                throw e;
            }
            if (isParent) {
                // we must not check whether the _parent_ is readable
                // for joins of type
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
                if (p.equals("..")) {
                    t = t.isRoot() ? null : t.getParent();
                } else if (p.equals(".")) {
                    // same node
                } else {
```

### EmptyStatementBody
`while` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                throw getSyntaxError();
            }
            while (types[++i] == CHAR_VALUE) {
                // go until the first non-number
            }
```

### EmptyStatementBody
`while` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
                throw getSyntaxError();
            }
            while (types[++i] == CHAR_VALUE) {
                // go until the first non-number
            }
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            }
            int startParseIndex = parseIndex;
            if (shortcut) {
                // "*" and so on are not allowed now
            } else if (readIf("*")) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            }
        } else {
            if (!force && condition == null && joinCondition == null) {
                // a child node of a given path, such as "/test"
                // use the same selector for now, and extend the path
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
                    }
                    Set<String> values = ValuePatternUtil.getValues(restriction, new ValuePattern());
                    if (valuePattern.matchesAll()) {
                        // matches all values: not a problem
                    } else if (values == null) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionableState.java`
#### Snippet
```java
            if (action == COPY || action == VERSION || action == ABORT) {
                dest.removeProperty(propName);
            } else if (action == IGNORE) {
                // no action
            } else if (action == INITIALIZE) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionableState.java`
#### Snippet
```java
            if (action == COPY || action == VERSION || action == ABORT) {
                dest.getChildNode(name).remove();
            } else if (action == IGNORE) {
                // no action
            } else if (action == INITIALIZE) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/CommitRateLimiter.java`
#### Snippet
```java
    public void afterNonBlocking() {
        AtomicInteger value = NON_BLOCKING_LEVEL.get();
        if (value == null) {
            // TODO should not happen (log an error?)
        } else {
```

### EmptyStatementBody
`for` statement has empty body
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/QueryUtils.java`
#### Snippet
```java
        if (sb.charAt(position) == oldWildcard) {
            int escapeCount = 0;
            for (int m = position - 1; m >= 0 && sb.charAt(m) == WILDCARD_ESCAPE; m--, escapeCount++) ;
            if (escapeCount % 2 == 0) {
                sb.setCharAt(position, newWildcard);
```

### EmptyStatementBody
`while` statement has empty body
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/FunctionIndexProcessor.java`
#### Snippet
```java
    private String
    readCommaAndWhitespace() {
        while (match(" ")) {
        }
        match(",");
```

### EmptyStatementBody
`while` statement has empty body
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/FunctionIndexProcessor.java`
#### Snippet
```java
        }
        match(",");
        while (match(" ")) {
        }
        return "*";
```

### EmptyStatementBody
`if` statement has empty body
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/MapRecord.java`
#### Snippet
```java
        MapRecord[] afterBuckets = after.getBuckets();
        for (int i = 0; i < BUCKETS_PER_LEVEL; i++) {
            if (Objects.equal(beforeBuckets[i], afterBuckets[i])) {
                // these buckets are equal (or both empty), so no changes
            } else if (beforeBuckets[i] == null) {
```

### EmptyStatementBody
`while` statement has empty body
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/ImmutableRecordNumbers.java`
#### Snippet
```java
            @Override
            protected Entry computeNext() {
                while (++pos < offsets.length && offsets[pos] < 0) { }
                if (pos < offsets.length) {
                    return new Entry() {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/GuavaDeprecation.java`
#### Snippet
```java
                } else {
                    // still in class checked for?
                    if (cn.equals(className)) {
                        // go one
                    } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/benchmark/util/ElasticGlobalInitializer.java`
#### Snippet
```java
    @Override
    public void initialize(@NotNull NodeBuilder builder) {
        if (builder.hasChildNode(INDEX_DEFINITIONS_NAME)
                && builder.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(this.name)) {
            // do nothing
```

### EmptyStatementBody
`if` statement has empty body
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/namepath/JcrNameParser.java`
#### Snippet
```java
                    }
                    state = STATE_NAME_START;
                } else if (state == STATE_URI) {
                    // ignore -> validation of uri later on.
                } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/JsonIndexCommand.java`
#### Snippet
```java
            if (value == null) {
                value = v2;
            } else if (v2 == null) {
                // keep value
            } else if (v2 instanceof Long && value instanceof Long) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexCommand.java`
#### Snippet
```java
    private static void setupDirectories(IndexOptions indexOpts) throws IOException {
        if (indexOpts.getOutDir().exists()) {
            if (indexOpts.isImportIndex() &&
                    FileUtils.directoryContains(indexOpts.getOutDir(), indexOpts.getIndexImportDir())) {
                //Do not clean directory in this case
```

### EmptyStatementBody
`if` statement has empty body
in `oak-run/src/main/java/org/apache/jackrabbit/oak/threadDump/ThreadDumpCleaner.java`
#### Snippet
```java
            }
            if (line.startsWith("Full thread dump") || line.startsWith("Full Java thread dump")) {
                if (activeThreadCount > 0) {
                    // System.out.println("Active threads: " + activeThreadCount);
                }
```

### EmptyStatementBody
`if` statement has empty body
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/jcr/PartialValueFactory.java`
#### Snippet
```java
                case PropertyType.PATH:
                    String oakValue = value;
                    if (value.startsWith("[") && value.endsWith("]")) {
                        // identifier path; do no change
                    } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java
     */
    public void close() throws IOException {
        if (buffer != null) {
            // nop
        } else if (tmpFile != null) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/OakEventFilterImpl.java`
#### Snippet
```java
            // so more including is fine.
            for (String includePath : includePaths) {
                if (includePath.equals("**") || includePath.endsWith("/**")) {
                    // skip, this is fine
                } else if (includePath.endsWith("/")) {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/OakEventFilterImpl.java`
#### Snippet
```java
        // the relativeGlobPaths to all includePaths
        for (String includePath : includePaths) {
            if (includePath.equals("**") || includePath.endsWith("/*") || includePath.endsWith("/**")) {
                // this will include anything, so nothing to append in this case
            } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java
    @Override
    public boolean defines(@Nullable String absPath, @NotNull AccessControlPolicy accessControlPolicy) {
        if (Utils.isSupportedPath(supportedPath, absPath)) {
            // EXERCISE
        }
```

### EmptyStatementBody
`if` statement has empty body
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
        Analyzer analyzer = indexDefinition.getAnalyzer();
        FullTextExpression ft = filter.getFullTextConstraint();
        if (ft == null) {
            // there might be no full-text constraint
            // when using the LowCostLuceneIndexProvider
```

### EmptyStatementBody
`if` statement has empty body
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneInitializerHelper.java`
#### Snippet
```java
    @Override
    public void initialize(@NotNull NodeBuilder builder) {
        if (builder.hasChildNode(INDEX_DEFINITIONS_NAME)
                && builder.getChildNode(INDEX_DEFINITIONS_NAME).hasChildNode(name)) {
            // do nothing
```

### EmptyStatementBody
`if` statement has empty body
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/hybrid/NRTIndex.java`
#### Snippet
```java
                indexWriter.close();
            } else {
                if (RETAIN_DURING_CLOSE) {
                    // retain entries (old style behavior)
                } else {
```

### EmptyStatementBody
`if` statement has empty body
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
        LuceneIndexDefinition defn = (LuceneIndexDefinition) planResult.indexDefinition;
        Analyzer analyzer = defn.getAnalyzer();
        if (ft == null) {
            // there might be no full-text constraint
            // when using the LowCostLuceneIndexProvider
```

### EmptyStatementBody
`while` statement has empty body
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureJournalFile.java`
#### Snippet
```java
                    reader = new ReverseFileReader(blob);
                    if (firstLineReturned) {
                        while("".equals(reader.readLine())); // the first line was already returned, let's fast-forward it
                    }
                } catch (StorageException e) {
```

### EmptyStatementBody
`while` statement has empty body
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentStoreMigrator.java`
#### Snippet
```java
        executor.shutdown();
        try {
            while (!executor.awaitTermination(100, TimeUnit.MILLISECONDS));
        } catch (InterruptedException e) {
            throw new IOException(e);
```

## RuleId[id=SortedCollectionWithNonComparableKeys]
### SortedCollectionWithNonComparableKeys
Construction of sorted collection with non-comparable elements
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/osgi/OsgiWhiteboard.java`
#### Snippet
```java
                    services.values().iterator().next());
        default:
            SortedMap<ServiceReference, T> sorted = new TreeMap<>();
            sorted.putAll(services);
            return new ArrayList<>(sorted.values());
```

## RuleId[id=CommentedOutCode]
### CommentedOutCode
Commented out code (5 lines)
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticIndexProviderService.java`
#### Snippet
```java
        props.put("type", ElasticIndexDefinition.TYPE_ELASTICSEARCH);
        regs.add(bundleContext.registerService(IndexEditorProvider.class.getName(), editorProvider, props));
//        oakRegs.add(registerMBean(whiteboard,
//                TextExtractionStatsMBean.class,
//                editorProvider.getExtractedTextCache().getStatsMBean(),
```

### CommentedOutCode
Commented out code (2 lines)
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticIndexProviderService.java`
#### Snippet
```java
        whiteboard = new OsgiWhiteboard(bundleContext);

        //initializeTextExtractionDir(bundleContext, config);
        //initializeExtractedTextCache(config, statisticsProvider);

```

### CommentedOutCode
Commented out code (6 lines)
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticIndexHelper.java`
#### Snippet
```java
                                b2 -> b2.analyzer("oak_analyzer")));
        // TODO: the mapping below is for features currently not supported. These need to be reviewed
        // mappingBuilder.startObject(FieldNames.NOT_NULL_PROPS)
        //  .field("type", "keyword")
        //  .endObject();
```

### CommentedOutCode
Commented out code (2 lines)
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticIndexCommand.java`
#### Snippet
```java

        // TODO : See if we need to support dumpIndexStats and index defs for elastic - not needed for now
        //dumpIndexStats(indexOpts, indexHelper);
        //dumpIndexDefinitions(indexOpts, indexHelper);
        reindexOperation(indexOpts, indexHelper);
```

### CommentedOutCode
Commented out code (2 lines)
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java
    public Oak() {
        this(new MemoryNodeStore());
        // this(new DocumentMK.Builder().open());
        // this(new LogWrapper(new DocumentMK.Builder().open()));
    }
```

### CommentedOutCode
Commented out code (2 lines)
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveType.java`
#### Snippet
```java

// TODO: Fall back to residual definitions until we have consensus on OAK-713
//          throw new ConstraintViolationException(
//                  "Incorrect node type of child node " + nodeName);
        }
```

### CommentedOutCode
Commented out code (2 lines)
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveType.java`
#### Snippet
```java

// TODO: Fall back to residual definitions until we have consensus on OAK-713
//          throw new ConstraintViolationException(
//                "No matching definition found for property " + propertyName);
        }
```

### CommentedOutCode
Commented out code (4 lines)
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/FrozenNodeRefsByScanningCommand.java`
#### Snippet
```java
        System.setProperty("oak.queryLimitReads", String.valueOf(Long.MAX_VALUE));

        //		// disable the WARN of the TraversingCursor
        //		LoggerContext c = (LoggerContext) LoggerFactory.getILoggerFactory();
        //		Logger logger = c.getLogger("org.apache.jackrabbit.oak.plugins.index.Cursors$TraversingCursor");
```

### CommentedOutCode
Commented out code (3 lines)
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                        // ensure the path ends with the given
                        // relative path
                        // if (!path.endsWith("/" + parent)) {
                        // continue;
                        // }
```

### CommentedOutCode
Commented out code (3 lines)
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
            // the following instead:

            // throw new
            // IllegalStateException("Lucene index is used even when no full-text conditions are used for filter "
            // + filter);
```

### CommentedOutCode
Commented out code (2 lines)
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/hybrid/NRTIndex.java`
#### Snippet
```java

        //TODO Explore following for optimizing indexing speed
        //config.setUseCompoundFile(false);
        //config.setRAMBufferSizeMB(1024*1024*25);

```

### CommentedOutCode
Commented out code (3 lines)
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/GetGroupPrincipalsTest.java`
#### Snippet
```java
            Principal p = principalManager.getPrincipal(principalName);
            PrincipalIterator principals = principalManager.getGroupMembership(p);
//            while (principals.hasNext()) {
//                Principal groupPrincipal = principals.nextPrincipal();
//            }
```

### CommentedOutCode
Commented out code (4 lines)
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java

        private void performSomeRead(@Nullable Tree tree) {
//            Tree immutableTree = PermissionUtil.getImmutableTree(tree, immutableRoot);
//            if (immutableTree != null) {
//                immutableTree.hasChild(POLICY_NAME);
```

## RuleId[id=CStyleArrayDeclaration]
### CStyleArrayDeclaration
C-style array declaration of local variable `decodedParts`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadToken.java`
#### Snippet
```java

        String decoded = decodeBase64(toBeDecoded);
        String decodedParts[] = decoded.split("#");
        if (decodedParts.length < 2) {
            throw new IllegalArgumentException("Invalid upload token");
```

### CStyleArrayDeclaration
C-style array declaration of local variable `bytes`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                for (Document d : documents) {
                    String data = ser.asString(d, tmd.getColumnOnlyProperties());
                    byte bytes[] = asBytes(data);
                    if (bytes.length > longest) {
                        longest = bytes.length;
```

### CStyleArrayDeclaration
C-style array declaration of local variable `key`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenProviderImpl.java`
#### Snippet
```java
    private static String generateKey(int size) {
        SecureRandom random = new SecureRandom();
        byte key[] = new byte[size];
        random.nextBytes(key);

```

### CStyleArrayDeclaration
C-style array declaration of parameter `args`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
     * @throws IOException
     */
    public static void main(String args[]) throws IOException {
        String adminUser = "admin";
        String adminPwd = "";
```

### CStyleArrayDeclaration
C-style array declaration of local variable `elements`
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
    private static String createLogMessage(String operation) {
        boolean whitelistThisCall = false;
        StackTraceElement elements[] = Thread.currentThread().getStackTrace();
        StringBuilder b = new StringBuilder();
        b.append("operation '" + operation + "' called from:");
```

### CStyleArrayDeclaration
C-style array declaration of parameter `propTypes`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/util/NodeTypeUtils.java`
#### Snippet
```java
    @SuppressWarnings("unchecked")
    public static String createNodeType(Session session, String name,
            String[] properties, int propTypes[], String[] superTypes, String[] childrenTypes,
            String baseType, boolean isMixin)
            throws RepositoryException {
```

### CStyleArrayDeclaration
C-style array declaration of parameter `b`
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        }

        public int read(byte b[], int off, int len) throws IOException {
            int r = super.read(b, off, len);
            reportProgress(r);
```

### CStyleArrayDeclaration
C-style array declaration of parameter `b`
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        }

        public int read(byte b[]) throws IOException {
            int r = super.read(b);
            reportProgress(r);
```

## RuleId[id=RegExpRedundantEscape]
### RegExpRedundantEscape
Redundant character escape `\\]` in RegExp
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java`
#### Snippet
```java

    private static final Pattern SNS_PATTERN =
            Pattern.compile("(.+)\\[[1-9][0-9]*\\]$");

    private PathUtils() {
```

### RegExpRedundantEscape
Redundant character escape `\\]` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryRecorder.java`
#### Snippet
```java
        // (case insensitive)
        query = query.replaceAll(
                "(?i)(ISDESCENDANTNODE|ISCHILDNODE|ISSAMENODE)\\s*\\(.*,\\s*\\[/[^]]*\\]\\)",
                "$1('x')");
        query = query.replaceAll(
```

### RegExpRedundantEscape
Redundant character escape `\\]` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryRecorder.java`
#### Snippet
```java
                "$1('x')");
        query = query.replaceAll(
                "(?i)(ISDESCENDANTNODE|ISCHILDNODE|ISSAMENODE)\\s*\\(\\[/[^]]*\\]\\)",
                "$1('x')");

```

### RegExpRedundantEscape
Redundant character escape `\\/` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
        buff.append(" /* xpath: ");
        // the xpath query may contain the "end comment" marker
        String xpathEscaped = xpath.replaceAll("\\*\\/", "* /");
        buff.append(xpathEscaped);
        buff.append(" */");        
```

### RegExpRedundantEscape
Redundant character escape `\\\"` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/cursor/PrefetchCursor.java`
#### Snippet
```java
                    String regexPattern = f.substring("regex(\"".length(), f.length() - 2);
                    // un-escape: \" => "
                    regexPattern = regexPattern.replaceAll("\\\"", "\"");
                    String x = findMatch(path, regexPattern);
                    if (x == null) {
```

### RegExpRedundantEscape
Redundant character escape `\\}` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/cursor/PrefetchCursor.java`
#### Snippet
```java
    // match ${...} -- unfortunately it needs a lot of escaping. 
    // } inside {...} need to be escaped: ${...\}...} 
    private static final Pattern FUNCTION = Pattern.compile("\\$\\{((\\}|[^}])*)\\}");

    private final Cursor cursor;
```

### RegExpRedundantEscape
Redundant character escape `\\}` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/cursor/PrefetchCursor.java`
#### Snippet
```java
    // match ${...} -- unfortunately it needs a lot of escaping. 
    // } inside {...} need to be escaped: ${...\}...} 
    private static final Pattern FUNCTION = Pattern.compile("\\$\\{((\\}|[^}])*)\\}");

    private final Cursor cursor;
```

### RegExpRedundantEscape
Redundant character escape `\\(` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/NumericConstraint.java`
#### Snippet
```java
    protected NumericConstraint(String definition) {
        // format: '(<min>, <max>)',  '[<min>, <max>]', '(, <max>)' etc.
        Pattern pattern = Pattern.compile("([\\(\\[])([^,]*),([^\\)\\]]*)([\\)\\]])");
        Matcher matcher = pattern.matcher(definition);
        if (matcher.matches()) {
```

### RegExpRedundantEscape
Redundant character escape `\\)` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/NumericConstraint.java`
#### Snippet
```java
    protected NumericConstraint(String definition) {
        // format: '(<min>, <max>)',  '[<min>, <max>]', '(, <max>)' etc.
        Pattern pattern = Pattern.compile("([\\(\\[])([^,]*),([^\\)\\]]*)([\\)\\]])");
        Matcher matcher = pattern.matcher(definition);
        if (matcher.matches()) {
```

### RegExpRedundantEscape
Redundant character escape `\\)` in RegExp
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/NumericConstraint.java`
#### Snippet
```java
    protected NumericConstraint(String definition) {
        // format: '(<min>, <max>)',  '[<min>, <max>]', '(, <max>)' etc.
        Pattern pattern = Pattern.compile("([\\(\\[])([^,]*),([^\\)\\]]*)([\\)\\]])");
        Matcher matcher = pattern.matcher(definition);
        if (matcher.matches()) {
```

### RegExpRedundantEscape
Redundant character escape `\\:` in RegExp
in `oak-benchmarks-solr/src/main/java/org/apache/jackrabbit/oak/benchmark/FullTextSolrSearchTest.java`
#### Snippet
```java

    private void initializeProvider() throws Exception {
        if (server != null && (server.startsWith("http") || server.matches("\\w+\\:\\d{3,5}"))) {
            log.info("using remote Solr {}", server);
            RemoteSolrServerConfiguration remoteSolrServerConfiguration = new RemoteSolrServerConfiguration(
```

### RegExpRedundantEscape
Redundant character escape `\\*` in RegExp
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/ConfigInstaller.java`
#### Snippet
```java
                replaceAll("[)]", "\\\\)").
                replaceAll("[=]", "\\\\=").
                replaceAll("[\\*]", "\\\\*");
    }

```

### RegExpRedundantEscape
Redundant character escape `\\]` in RegExp
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/SameNameSiblingsEditor.java`
#### Snippet
```java
    private static final Logger logger = LoggerFactory.getLogger(SameNameSiblingsEditor.class);

    private static final Pattern SNS_REGEX = Pattern.compile("^(.+)\\[(\\d+)\\]$");

    private static final Predicate<NodeState> NO_SNS_PROPERTY = new Predicate<NodeState>() {
```

## RuleId[id=SpringBootApplicationYaml]
### SpringBootApplicationYaml
Cannot resolve configuration property 'repo.home'
in `oak-examples/standalone/src/main/resources/application.yml`
#### Snippet
```java

repo:
  home: oak
oak:
  mongo:
```

### SpringBootApplicationYaml
Cannot resolve configuration property 'oak.mongo.db'
in `oak-examples/standalone/src/main/resources/application.yml`
#### Snippet
```java
oak:
  mongo:
    db: oak
    uri: mongodb://localhost:27017
```

### SpringBootApplicationYaml
Cannot resolve configuration property 'oak.mongo.uri'
in `oak-examples/standalone/src/main/resources/application.yml`
#### Snippet
```java
  mongo:
    db: oak
    uri: mongodb://localhost:27017
```

## RuleId[id=FinalMethodInFinalClass]
### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final void dispose() {
        // this is debatable whether or not a lease check should be done on dispose.
        // I'd say the lease must still be valid as on dispose there could be
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> T findAndUpdate(Collection<T> collection,
            UpdateOp update) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> T find(Collection<T> collection, String key) {
        performLeaseCheck();
        return delegate.find(collection, key);
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> List<T> query(Collection<T> collection,
            String fromKey, String toKey, int limit) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> T createOrUpdate(Collection<T> collection,
            UpdateOp update) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> int remove(Collection<T> collection,
            Map<String, Long> toRemove) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> T find(Collection<T> collection, String key,
            int maxCacheAge) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> List<T> query(Collection<T> collection,
            String fromKey, String toKey, String indexedProperty,
            long startValue, int limit) {
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final Iterable<CacheStats> getCacheStats() {
        performLeaseCheck();
        return delegate.getCacheStats();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> void remove(Collection<T> collection,
            List<String> keys) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final CacheInvalidationStats invalidateCache() {
        performLeaseCheck();
        return delegate.invalidateCache();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> void remove(Collection<T> collection, String key) {
        performLeaseCheck();
        delegate.remove(collection, key);
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final CacheInvalidationStats invalidateCache(Iterable<String> keys) {
        performLeaseCheck();
        return delegate.invalidateCache(keys);
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final Map<String, String> getMetadata() {
        performLeaseCheck();
        return delegate.getMetadata();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final void setReadWriteMode(String readWriteMode) {
        performLeaseCheck();
        delegate.setReadWriteMode(readWriteMode);
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> void invalidateCache(Collection<T> collection,
            String key) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java
    }

    private final void performLeaseCheck() {
        if (clusterNodeInfo != null) {
            clusterNodeInfo.performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> T getIfCached(Collection<T> collection,
            String key) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java

    @Override
    public final <T extends Document> boolean create(Collection<T> collection,
            List<UpdateOp> updateOps) {
        performLeaseCheck();
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LogSilencer.java`
#### Snippet
```java
            new LinkedHashMap<String, Long>() {

        protected final boolean removeEldestEntry(Map.Entry<String, Long> eldest) {
            return size() > cacheSize;
        }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * Shortcut to {@code start(traceMsgOrNull, true)}
     */
    public final long startForInfoLog(String traceMsgOrNull) {
        if (canExitEarly(true)) {
            return -1;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * Shortcut to {@code start(null, true)}
     */
    public final long startForInfoLog() {
        if (canExitEarly(true)) {
            return -1;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * to the other end() method with a vararg.
     */
    public final void end(long start, long logAtDebugIfSlowerThanMs,
            String logMessagePrefix, Object arg1) {
        if (start < 0) {
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * Shortcut to {@code #start(null, false)}
     */
    public final long start() {
        if (canExitEarly()) {
            return -1;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * Shortcut to {@code start(traceMsgOrNull, false)}
     */
    public final long start(String traceMsgOrNull) {
        if (canExitEarly()) {
            return -1;
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * to the other end() method with a vararg.
     */
    public final void end(long start, long logAtDebugIfSlowerThanMs, long logAtInfoIfSlowerThanMs,
                          String logMessagePrefix, Object arg1) {
        if (start < 0) {
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * to the other end() method with a vararg.
     */
    public final void end(long start, long logAtDebugIfSlowerThanMs, long logAtInfoIfSlowerThanMs,
                          String logMessagePrefix, Object arg1, Object arg2) {
        if (start < 0) {
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java

    /** Whether or not the delegate has log level DEBUG configured **/
    public final boolean isDebugEnabled() {
        return delegate.isDebugEnabled();
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java
     * to the other end() method with a vararg.
     */
    public final void end(long start, long logAtDebugIfSlowerThanMs,
            String logMessagePrefix, Object arg1, Object arg2) {
        if (start < 0) {
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java

    /** Whether or not the delegate has log level INFO configured **/
    public final boolean isInfoEnabled() {
        return delegate.isInfoEnabled();
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PerfLogger.java`
#### Snippet
```java

    /** Whether or not the delegate has log level TRACE configured **/
    public final boolean isTraceEnabled() {
        return delegate.isTraceEnabled();
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/binary/BinaryDownloadOptions.java`
#### Snippet
```java
     */
    @Nullable
    public final String getMediaType() {
        return mediaType;
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/binary/BinaryDownloadOptions.java`
#### Snippet
```java
     */
    @Nullable
    public final String getCharacterEncoding() {
        return characterEncoding;
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/binary/BinaryDownloadOptions.java`
#### Snippet
```java
     */
    @Nullable
    public final String getFileName() {
        return fileName;
    }
```

### FinalMethodInFinalClass
Method declared `final` in 'final' class
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/binary/BinaryDownloadOptions.java`
#### Snippet
```java
     */
    @NotNull
    public final String getDispositionType() {
        return dispositionType;
    }
```

## RuleId[id=ForLoopReplaceableByWhile]
### ForLoopReplaceableByWhile
`for` loop statement may be replace by 'while' loop
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilityRunner.java`
#### Snippet
```java
                if (benchmarks != null) {
                    Iterator<String> iter = suite.getBenchmarks().keySet().iterator();
                    for (;iter.hasNext();) {
                        String availBenchmark = iter.next();
                        if (!benchmarks.contains(availBenchmark)) {
```

## RuleId[id=FinalPrivateMethod]
### FinalPrivateMethod
'private' method declared `final`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LeaseCheckDocumentStoreWrapper.java`
#### Snippet
```java
    }

    private final void performLeaseCheck() {
        if (clusterNodeInfo != null) {
            clusterNodeInfo.performLeaseCheck();
```

### FinalPrivateMethod
'private' method declared `final`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeBuilder.java`
#### Snippet
```java
    }

    private final String getSourcePath() {
        // Traverse up the hierarchy until we encounter the first builder
        // having a source path annotation or until we hit the root
```

## RuleId[id=Deprecation]
### Deprecation
'shaHex(java.io.InputStream)' is deprecated
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/migration/BlobMigrator.java`
#### Snippet
```java
        String id = blob.getContentIdentity();
        if (id == null) {
            id = DigestUtils.shaHex(blob.getNewStream());
        }
        return id;
```

### Deprecation
'closeQuietly(org.apache.commons.io.LineIterator)' is deprecated
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
            }
        } finally {
            LineIterator.closeQuietly(iterator);
            closeQuietly(removesWriter);
        }
```

### Deprecation
'newInstance()' is deprecated
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDataSourceFactory.java`
#### Snippet
```java
            try {
                Class<?> dsclazz = Class.forName(classname);
                DataSource ds = (DataSource) dsclazz.newInstance();
                dsclazz.getMethod("setDriverClassName", String.class).invoke(ds, d.getClass().getName());
                dsclazz.getMethod("setUsername", String.class).invoke(ds, username);
```

### Deprecation
Overrides deprecated method in 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java

    @Override
    protected void finalize() throws Throwable {
        if (!this.ch.isClosed() && this.callStack != null) {
            LOG.debug("finalizing RDBDocumentStore that was not disposed", this.callStack);
```

### Deprecation
'finalize()' is deprecated
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
            LOG.debug("finalizing RDBDocumentStore that was not disposed", this.callStack);
        }
        super.finalize();
    }

```

### Deprecation
Overrides deprecated method in 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

        @Override
        public void finalize() throws Throwable {
            try {
                if (this.connection != null) {
```

### Deprecation
'finalize()' is deprecated
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                }
            } finally {
                super.finalize();
            }
        }
```

### Deprecation
Overrides deprecated method in 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    @Override
    protected void finalize() throws Throwable {
        if (!this.ch.isClosed() && this.callStack != null) {
            LOG.debug("finalizing RDBDocumentStore that was not disposed", this.callStack);
```

### Deprecation
'finalize()' is deprecated
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
            LOG.debug("finalizing RDBDocumentStore that was not disposed", this.callStack);
        }
        super.finalize();
    }

```

### Deprecation
'getOldClient()' is deprecated
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticIndexWriter.java`
#### Snippet
```java
            LOG.debug("Updating Index Settings with request {}", requestMsg);
        }
        IndicesClient oldClient = elasticConnection.getOldClient().indices();
        AcknowledgedResponse response = oldClient.putSettings(request, RequestOptions.DEFAULT);
        LOG.info("Updated settings for index {}. Response acknowledged: {}", indexName, response.isAcknowledged());
```

### Deprecation
'getOldClient()' is deprecated
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticBulkProcessorHandler.java`
#### Snippet
```java
    protected BiConsumer<BulkRequest, ActionListener<BulkResponse>> requestConsumer() {
        // TODO: migrate to ES Java client https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/indexing-bulk.html
        return (request, bulkListener) -> elasticConnection.getOldClient().bulkAsync(request, RequestOptions.DEFAULT, bulkListener);
    }

```

### Deprecation
'getOldClient()' is deprecated
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticBulkProcessorHandler.java`
#### Snippet
```java
                    isDataSearchable.set(true);
                }
                elasticConnection.getOldClient().bulkAsync(request, RequestOptions.DEFAULT, bulkListener);
            };
        }
```

### Deprecation
Overrides deprecated method in 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java

    @Override
    public void finalize() throws Throwable {
        super.finalize();
        // TODO should not be needed, but it seems
```

### Deprecation
'finalize()' is deprecated
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
    @Override
    public void finalize() throws Throwable {
        super.finalize();
        // TODO should not be needed, but it seems
        // oak-jcr doesn't call dispose()
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticCustomAnalyzer.java`
#### Snippet
```java
        int i = 0;
        //Need to read children in order
        Tree tree = TreeFactory.createReadOnlyTree(state);
        for (Tree t : tree.getChildren()) {
            NodeState child = state.getChildNode(t.getName());
```

### Deprecation
'AmazonS3Client(com.amazonaws.ClientConfiguration)' is deprecated
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
                || StringUtils.isNullOrEmpty(secretKey)) {
            LOG.info("Configuring Amazon Client from environment");
            s3service = new AmazonS3Client(getClientConfiguration(prop));
        } else {
            LOG.info("Configuring Amazon Client from property file.");
```

### Deprecation
'AmazonS3Client(com.amazonaws.auth.AWSCredentials, com.amazonaws.ClientConfiguration)' is deprecated
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
            AWSCredentials credentials = new BasicAWSCredentials(accessKey,
                    secretKey);
            s3service = new AmazonS3Client(credentials,
                    getClientConfiguration(prop));
        }
```

### Deprecation
'setEndpoint(java.lang.String)' is deprecated
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
         * redirects it to correct location.
         */
        s3service.setEndpoint(endpoint);
        LOG.info("S3 service endpoint [{}] ", endpoint);
        return s3service;
```

### Deprecation
'TransferManager(com.amazonaws.services.s3.AmazonS3, java.util.concurrent.ExecutorService)' is deprecated
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
            }
            LOG.info("Using thread pool of [{}] threads in S3 transfer manager.", writeThreads);
            tmx = new TransferManager(s3service, Executors.newFixedThreadPool(writeThreads,
                new NamedThreadFactory("s3-transfer-manager-worker")));

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/InitialContent.java`
#### Snippet
```java
        NodeState base = squeeze(builder.getNodeState());
        NodeStore store = new MemoryNodeStore(base);
        registerBuiltIn(RootFactory.createSystemRoot(store, null, null, null, null));
        NodeState target = store.getRoot();
        target.compareAgainstBaseState(base, new ApplyDiff(builder));
```

### Deprecation
'LEVEL_1_SUPPORTED' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/ContentRepositoryImpl.java`
#### Snippet
```java
import static org.apache.jackrabbit.guava.common.base.Preconditions.checkNotNull;
import static javax.jcr.Repository.IDENTIFIER_STABILITY;
import static javax.jcr.Repository.LEVEL_1_SUPPORTED;
import static javax.jcr.Repository.LEVEL_2_SUPPORTED;
import static javax.jcr.Repository.NODE_TYPE_MANAGEMENT_AUTOCREATED_DEFINITIONS_SUPPORTED;
```

### Deprecation
'LEVEL_2_SUPPORTED' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/ContentRepositoryImpl.java`
#### Snippet
```java
import static javax.jcr.Repository.IDENTIFIER_STABILITY;
import static javax.jcr.Repository.LEVEL_1_SUPPORTED;
import static javax.jcr.Repository.LEVEL_2_SUPPORTED;
import static javax.jcr.Repository.NODE_TYPE_MANAGEMENT_AUTOCREATED_DEFINITIONS_SUPPORTED;
import static javax.jcr.Repository.NODE_TYPE_MANAGEMENT_INHERITANCE;
```

### Deprecation
'OPTION_QUERY_SQL_SUPPORTED' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/ContentRepositoryImpl.java`
#### Snippet
```java
import static javax.jcr.Repository.OPTION_NODE_TYPE_MANAGEMENT_SUPPORTED;
import static javax.jcr.Repository.OPTION_OBSERVATION_SUPPORTED;
import static javax.jcr.Repository.OPTION_QUERY_SQL_SUPPORTED;
import static javax.jcr.Repository.OPTION_RETENTION_SUPPORTED;
import static javax.jcr.Repository.OPTION_SHAREABLE_NODES_SUPPORTED;
```

### Deprecation
'QUERY_XPATH_DOC_ORDER' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/ContentRepositoryImpl.java`
#### Snippet
```java
import static javax.jcr.Repository.QUERY_LANGUAGES;
import static javax.jcr.Repository.QUERY_STORED_QUERIES_SUPPORTED;
import static javax.jcr.Repository.QUERY_XPATH_DOC_ORDER;
import static javax.jcr.Repository.QUERY_XPATH_POS_INDEX;
import static javax.jcr.Repository.REP_NAME_DESC;
```

### Deprecation
'QUERY_XPATH_POS_INDEX' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/ContentRepositoryImpl.java`
#### Snippet
```java
import static javax.jcr.Repository.QUERY_STORED_QUERIES_SUPPORTED;
import static javax.jcr.Repository.QUERY_XPATH_DOC_ORDER;
import static javax.jcr.Repository.QUERY_XPATH_POS_INDEX;
import static javax.jcr.Repository.REP_NAME_DESC;
import static javax.jcr.Repository.REP_VENDOR_DESC;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/SecureNodeBuilder.java`
#### Snippet
```java
            NodeState base = builder.getBaseState();
            if (parent == null) {
                Tree baseTree = TreeFactory.createReadOnlyTree(base);
                treePermission = permissionProvider.get().getTreePermission(baseTree, TreePermission.EMPTY);
                rootPermission = treePermission;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.counter.jmx.NodeCounterOld' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java
        if (NodeCounter.USE_OLD_COUNTER) {
            regs.add(registerMBean(whiteboard, NodeCounterMBean.class,
                    new NodeCounterOld(store), NodeCounterMBean.TYPE, "nodeCounter"));
        } else {
            regs.add(registerMBean(whiteboard, NodeCounterMBean.class,
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/RootProviderService.java`
#### Snippet
```java
    @Override
    public Root createReadOnlyRoot(@NotNull Root root) {
        return RootFactory.createReadOnlyRoot(root);
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/RootProviderService.java`
#### Snippet
```java
    @Override
    public Root createReadOnlyRoot(@NotNull NodeState rootState) {
        return RootFactory.createReadOnlyRoot(rootState);
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/RootProviderService.java`
#### Snippet
```java
    @Override
    public Root createSystemRoot(@NotNull NodeStore store, @Nullable CommitHook hook) {
        return RootFactory.createSystemRoot(store, hook, null, null, null);
    }
}
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/TreeProviderService.java`
#### Snippet
```java
    @Override
    public Tree createReadOnlyTree(@NotNull NodeState rootState) {
        return TreeFactory.createReadOnlyTree(rootState);
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/TreeProviderService.java`
#### Snippet
```java
    @Override
    public Tree createReadOnlyTree(@NotNull Tree readOnlyParent, @NotNull String childName, @NotNull NodeState childState) {
        return TreeFactory.createReadOnlyTree(readOnlyParent, childName, childState);
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.counter.NodeCounterEditorOld' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/NodeCounterEditorProvider.java`
#### Snippet
```java

        if (NodeCounter.USE_OLD_COUNTER) {
            NodeCounterEditorOld.NodeCounterRoot rootData = new NodeCounterEditorOld.NodeCounterRoot(
                    resolution, seed, definition, root, callback);
            return new NodeCounterEditorOld(rootData, null, "/", null);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.counter.NodeCounterEditorOld' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/NodeCounterEditorProvider.java`
#### Snippet
```java

        if (NodeCounter.USE_OLD_COUNTER) {
            NodeCounterEditorOld.NodeCounterRoot rootData = new NodeCounterEditorOld.NodeCounterRoot(
                    resolution, seed, definition, root, callback);
            return new NodeCounterEditorOld(rootData, null, "/", null);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.counter.NodeCounterEditorOld' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/NodeCounterEditorProvider.java`
#### Snippet
```java
            NodeCounterEditorOld.NodeCounterRoot rootData = new NodeCounterEditorOld.NodeCounterRoot(
                    resolution, seed, definition, root, callback);
            return new NodeCounterEditorOld(rootData, null, "/", null);
        } else {
            NodeCounterEditor.NodeCounterRoot rootData = new NodeCounterEditor.NodeCounterRoot(
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/IndexDefinitionUpdater.java`
#### Snippet
```java

        //Use Tree api to ensure that :childOrder property is properly updated
        Tree t = TreeFactory.createTree(indexBuilderParent);
        t.addChild(indexNodeName);

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.counter.jmx.NodeCounterOld' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounter.java`
#### Snippet
```java
    public static long getEstimatedNodeCount(NodeState root, String path, boolean max) {
        if (USE_OLD_COUNTER) {
            return NodeCounterOld.getEstimatedNodeCount(root, path, max);
        } else {
            return doGetEstimatedNodeCount(root, path, max);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/jmx/PropertyIndexStats.java`
#### Snippet
```java
        topLevel:
        for (ChildNodeEntry cne : values) {
            Tree t = TreeFactory.createReadOnlyTree(cne.getNodeState());
            TreeTraverser<Tree> traverser = new TreeTraverser<Tree>() {
                @Override
```

### Deprecation
'org.apache.jackrabbit.oak.spi.commit.PartialConflictHandler' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/ChildOrderConflictHandler.java`
#### Snippet
```java
 * @see TreeConstants#OAK_CHILD_ORDER
 */
public class ChildOrderConflictHandler implements PartialConflictHandler {

    @Override
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/Utils.java`
#### Snippet
```java
        return isFrozenNodeReferenceable(
                ReadOnlyNodeTypeManager.getInstance(
                        RootFactory.createReadOnlyRoot(root),
                        NamePathMapper.DEFAULT));
    }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadOnlyVersionManager.java`
#### Snippet
```java
        // not return the correct path for node after, but is
        // sufficient to check if it is versionable
        return isVersionable(TreeFactory.createReadOnlyTree(versionableCandidate));
    }
}
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionEditor.java`
#### Snippet
```java
    private int getOPV(PropertyState property) throws CommitFailedException {
        try {
            return this.vMgr.getNodeTypeManager().getDefinition(TreeFactory.createReadOnlyTree(this.node.getNodeState()),
                    property, false).getOnParentVersion();
        } catch (Exception e) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionEditor.java`
#### Snippet
```java
        if (this.parent != null) {
            try {
                NodeDefinition definition = this.vMgr.getNodeTypeManager().getDefinition(TreeFactory.createTree(parent.node), this.name);
                return definition.getOnParentVersion() == OnParentVersionAction.IGNORE;
            } catch (Exception e) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadWriteVersionManager.java`
#### Snippet
```java
    @Override
    protected Root getWorkspaceRoot() {
        return RootFactory.createReadOnlyRoot(workspaceRoot.getNodeState());
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadWriteVersionManager.java`
#### Snippet
```java
    @Override
    protected Tree getVersionStorage() {
        return TreeFactory.createReadOnlyTree(versionStorageNode.getNodeState());
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionableState.java`
#### Snippet
```java
            }
            if (opv == OnParentVersionAction.VERSION) {
                if (ntMgr.isNodeType(TreeFactory.createReadOnlyTree(child.getNodeState()), MIX_VERSIONABLE)) {
                    // create frozen versionable child
                    versionedChild(child, dest.child(name));
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionableState.java`
#### Snippet
```java
    private void resetToDefaultValue(NodeBuilder dest, PropertyState p)
            throws RepositoryException {
        Tree tree = TreeFactory.createReadOnlyTree(dest.getNodeState());
        PropertyDefinition def = ntMgr.getDefinition(tree, p, true);
        Value[] values = def.getDefaultValues();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionableState.java`
#### Snippet
```java
            return OnParentVersionAction.COPY;
        } else {
            return ntMgr.getDefinition(TreeFactory.createReadOnlyTree(node.getNodeState()),
                    property, false).getOnParentVersion();
        }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeEditorProvider.java`
#### Snippet
```java
        afterTypes.compareAgainstBaseState(beforeTypes, registration);
        if (registration.isModified()) {
            ReadOnlyNodeTypeManager ntBefore = ReadOnlyNodeTypeManager.getInstance(RootFactory.createReadOnlyRoot(before), NamePathMapper.DEFAULT);
            ReadOnlyNodeTypeManager ntAfter = ReadOnlyNodeTypeManager.getInstance(RootFactory.createReadOnlyRoot(after), NamePathMapper.DEFAULT);

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeEditorProvider.java`
#### Snippet
```java
        if (registration.isModified()) {
            ReadOnlyNodeTypeManager ntBefore = ReadOnlyNodeTypeManager.getInstance(RootFactory.createReadOnlyRoot(before), NamePathMapper.DEFAULT);
            ReadOnlyNodeTypeManager ntAfter = ReadOnlyNodeTypeManager.getInstance(RootFactory.createReadOnlyRoot(after), NamePathMapper.DEFAULT);

            afterTypes = registration.apply(builder);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/NodeObserver.java`
#### Snippet
```java
                long start = PERF_LOGGER.start();
                NamePathMapper namePathMapper = new NamePathMapperImpl(
                        new GlobalNameMapper(RootFactory.createReadOnlyRoot(root)));

                Set<String> oakPropertyNames = Sets.newHashSet();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/ACFilter.java`
#### Snippet
```java
            if (parentFilter == null) {
                tp = permissionProvider.getTreePermission(
                        TreeFactory.createReadOnlyTree((after.exists() ? after : before)), TreePermission.EMPTY);
            } else {
                tp = parentFilter.getTreePermission().getChildPermission(name, after);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/GlobalNameMapper.java`
#### Snippet
```java
import static org.apache.jackrabbit.oak.spi.namespace.NamespaceConstants.REP_URIS;
import static org.apache.jackrabbit.oak.plugins.name.Namespaces.encodeUri;
import static org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory.createReadOnlyRoot;
import static org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory.createReadOnlyTree;
import static org.apache.jackrabbit.oak.plugins.tree.TreeUtil.getString;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/GlobalNameMapper.java`
#### Snippet
```java
import static org.apache.jackrabbit.oak.plugins.name.Namespaces.encodeUri;
import static org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory.createReadOnlyRoot;
import static org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory.createReadOnlyTree;
import static org.apache.jackrabbit.oak.plugins.tree.TreeUtil.getString;
import static org.apache.jackrabbit.oak.plugins.tree.TreeUtil.getStrings;
```

### Deprecation
'NT_REP_MEMBERS' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserContext.java`
#### Snippet
```java
        } else if (NT_REP_MEMBER_REFERENCES.equals(ntName)) {
            return REP_MEMBERS.equals(propName);
        } else return NT_REP_MEMBERS.equals(ntName);
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/FilterBuilder.java`
#### Snippet
```java
        public EventFilter createFilter(NodeState before, NodeState after) {
            return new ACFilter(before, after,
                    permissionProviderFactory.create(RootFactory.createReadOnlyRoot(after)));
        }
    }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserInitializer.java`
#### Snippet
```java
        MemoryNodeStore store = new MemoryNodeStore(base);

        Root root = RootFactory.createSystemRoot(store, EmptyHook.INSTANCE, workspaceName,
                securityProvider,  queryIndexProvider);

```

### Deprecation
'XPATH' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserPrincipalProvider.java`
#### Snippet
```java
                    .append(" order by @rep:principalName");
            Result result = root.getQueryEngine().executeQuery(
                    statement.toString(), javax.jcr.query.Query.XPATH,
                    limit, offset, NO_BINDINGS, namePathMapper.getSessionLocalMappings());

```

### Deprecation
'XPATH' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/query/UserQueryManager.java`
#### Snippet
```java
        try {
            Result query = root.getQueryEngine().executeQuery(
                    statement, javax.jcr.query.Query.XPATH, limit, offset,
                    NO_BINDINGS, namePathMapper.getSessionLocalMappings());
            Iterable<? extends ResultRow> resultRows = query.getRows();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-search-mt/src/main/java/org/apache/jackrabbit/oak/plugins/index/mt/MTFulltextQueryTermsProviderFactory.java`
#### Snippet
```java
        policy = ConfigurationPolicy.REQUIRE
)
@Service(FulltextQueryTermsProvider.class)
public class MTFulltextQueryTermsProviderFactory implements FulltextQueryTermsProvider {

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-search-mt/src/main/java/org/apache/jackrabbit/oak/plugins/index/mt/MTFulltextQueryTermsProviderFactory.java`
#### Snippet
```java
)
@Service(FulltextQueryTermsProvider.class)
public class MTFulltextQueryTermsProviderFactory implements FulltextQueryTermsProvider {

    private static final float DEFAULT_MIN_SCORE = 0.5f;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-search-mt/src/main/java/org/apache/jackrabbit/oak/plugins/index/mt/MTFulltextQueryTermsProvider.java`
#### Snippet
```java

/**
 * {@link FulltextQueryTermsProvider} that performs machine translation on full text returning a query containing
 * translated tokens.
 */
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-search-mt/src/main/java/org/apache/jackrabbit/oak/plugins/index/mt/MTFulltextQueryTermsProvider.java`
#### Snippet
```java
 * translated tokens.
 */
public class MTFulltextQueryTermsProvider implements FulltextQueryTermsProvider {

    private final Logger log = LoggerFactory.getLogger(getClass());
```

### Deprecation
'checkpoint(long)' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/management/RepositoryManager.java`
#### Snippet
```java
            @Override
            public Status apply(FileStoreBackupRestoreMBean backupService) {
                String checkpoint = backupService.checkpoint(lifetime);
                return succeeded(checkpoint);
            }
```

### Deprecation
'INDEX_PATH' is deprecated
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/IndexInitializer.java`
#### Snippet
```java
        lucene.setProperty(IndexConstants.TYPE_PROPERTY_NAME, "lucene");
        lucene.setProperty(FulltextIndexConstants.EVALUATE_PATH_RESTRICTION, true);
        lucene.setProperty(LuceneIndexConstants.INDEX_PATH, indexPath);
        lucene.setProperty(FulltextIndexConstants.COMPAT_MODE, IndexFormatVersion.V2.getVersion());

```

### Deprecation
'newInstance()' is deprecated
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryAccessServlet.java`
#### Snippet
```java
        try {
            Class clazz = Class.forName(getServerFactoryDelegaterClass());
            cfd = (ClientFactoryDelegater) clazz.newInstance();
        } catch (Throwable e) {
            log.error("Unable to locate RMI ClientRepositoryFactory. Is jcr-rmi.jar missing?", e);
```

### Deprecation
'XPATH' is deprecated
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/accesscontrol/AccessControlManagerImpl.java`
#### Snippet
```java
            QueryEngine queryEngine = root.getQueryEngine();
            return queryEngine.executeQuery(
                    stmt.toString(), Query.XPATH,
                    QueryEngine.NO_BINDINGS, QueryEngine.NO_MAPPINGS);
        } catch (ParseException e) {
```

### Deprecation
'newInstance()' is deprecated
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
        try {
            Class<?> clazz = Class.forName(getRemoteFactoryDelegaterClass());
            RemoteFactoryDelegater rmf = (RemoteFactoryDelegater) clazz.newInstance();
            remote = rmf.createRemoteRepository(repository);
        } catch (RemoteException e) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/NodeStateCopyUtils.java`
#### Snippet
```java
        copyProps(state, tree);

        Tree src = TreeFactory.createReadOnlyTree(state);
        for (Tree srcChild : src.getChildren()){
            String childName = srcChild.getName();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/NodeStateCopyUtils.java`
#### Snippet
```java
        copyProps(state, node);

        Tree src = TreeFactory.createReadOnlyTree(state);
        for (Tree srcChild : src.getChildren()){
            String childName = srcChild.getName();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/IndexDefinitionBuilder.java`
#### Snippet
```java
        this.builder = nodeBuilder;
        this.initial = nodeBuilder.getNodeState();
        this.tree = TreeFactory.createTree(builder);
        tree.setProperty(FulltextIndexConstants.COMPAT_MODE, 2);
        tree.setProperty("async", "async");
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java

        Map<String, List<IndexingRule>> nt2rules = newHashMap();
        ReadOnlyNodeTypeManager ntReg = createNodeTypeManager(RootFactory.createReadOnlyRoot(root));

        //Use Tree API to read ordered child nodes
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java

        //Use Tree API to read ordered child nodes
        Tree ruleTree = TreeFactory.createReadOnlyTree(indexRules);
        final List<String> allNames = getAllNodeTypes(ntReg);
        for (Tree ruleEntry : ruleTree.getChildren()) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java

            //Include all immediate child nodes to 'properties' node by default
            Tree propTree = TreeFactory.createReadOnlyTree(propNode);
            for (Tree prop : propTree.getChildren()) {
                String propName = prop.getName();
```

### Deprecation
'javax.security.cert.X509Certificate' is deprecated
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/netty/SSLSubjectMatcher.java`
#### Snippet
```java
            final SslHandler ssl = (SslHandler) pipeline.get("ssl");
            final SSLSession session = ssl.engine().getSession();
            final X509Certificate x509Certificate = session.getPeerCertificateChain()[0];
            final Principal subjectDN = x509Certificate.getSubjectDN();
            final String subject = subjectDN.getName();
```

### Deprecation
'getPeerCertificateChain()' is deprecated
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/netty/SSLSubjectMatcher.java`
#### Snippet
```java
            final SslHandler ssl = (SslHandler) pipeline.get("ssl");
            final SSLSession session = ssl.engine().getSession();
            final X509Certificate x509Certificate = session.getPeerCertificateChain()[0];
            final Principal subjectDN = x509Certificate.getSubjectDN();
            final String subject = subjectDN.getName();
```

### Deprecation
'newInstance()' is deprecated
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/DefaultAuthorizableActionProvider.java`
#### Snippet
```java
                Class<? extends AuthorizableAction> cl = SUPPORTED_ACTIONS.get(className);
                if (cl != null) {
                    AuthorizableAction action = cl.newInstance();
                    action.init(securityProvider, config);
                    actions.add(action);
```

### Deprecation
'newInstance()' is deprecated
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexDefinitionUpdater.java`
#### Snippet
```java
        String initializerClassName = optionSet.valueOf("initializer").toString();
        Class<?> repoInitClazz = Class.forName(initializerClassName);
        Object obj = repoInitClazz.newInstance();
        Preconditions.checkArgument(obj instanceof RepositoryInitializer, repoInitClazz + " is not a RepositoryInitializer");

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/NodeStoreBinaryResourceProvider.java`
#### Snippet
```java

import static org.apache.jackrabbit.guava.common.base.Predicates.notNull;
import static org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory.createReadOnlyTree;
import static org.apache.jackrabbit.oak.spi.state.NodeStateUtils.getNode;

```

### Deprecation
'LINE_SEPARATOR' is deprecated
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/state/NodeStateUtils.java`
#### Snippet
```java
        }
        for (ChildNodeEntry c : ns.getChildNodeEntries()) {
            node.append(IOUtils.LINE_SEPARATOR);
            node.append(toString(c.getNodeState(), level + 1, prepend,
                    c.getName()));
```

### Deprecation
'getUUID()' is deprecated
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/jcr/PartialValueFactory.java`
#### Snippet
```java
        }
        return weak
                ? newValue(GenericPropertyState.weakreferenceProperty("", value.getUUID()), namePathMapper, getBlobAccessProvider())
                : newValue(GenericPropertyState.referenceProperty("", value.getUUID()), namePathMapper, getBlobAccessProvider());
    }
```

### Deprecation
'getUUID()' is deprecated
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/jcr/PartialValueFactory.java`
#### Snippet
```java
        return weak
                ? newValue(GenericPropertyState.weakreferenceProperty("", value.getUUID()), namePathMapper, getBlobAccessProvider())
                : newValue(GenericPropertyState.referenceProperty("", value.getUUID()), namePathMapper, getBlobAccessProvider());
    }

```

### Deprecation
'getStream()' is deprecated
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/jcr/ValueImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Value#getStream()
     */
    @Override
```

### Deprecation
'withAsyncIndexing()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/osgi/RepositoryManager.java`
#### Snippet
```java
                .with(indexProvider)
                .withFailOnMissingIndexProvider()
                .withAsyncIndexing();

        for(RepositoryInitializer initializer : initializers.getServices()){
```

### Deprecation
'save()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/ItemImpl.java`
#### Snippet
```java
     * {@link javax.jcr.UnsupportedRepositoryOperationException}
     *
     * @see javax.jcr.Item#save()
     *
     *
```

### Deprecation
'toString(java.io.InputStream)' is deprecated
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/CliUtils.java`
#### Snippet
```java
        InputStream is = CliUtils.class.getClassLoader().getResourceAsStream("upgrade_usage.txt");
        try {
            return IOUtils.toString(is);
        } finally {
            IOUtils.closeQuietly(is);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
            @Override
            protected Tree createValue() {
                return RootFactory.createReadOnlyRoot(sessionDelegate.getRoot()).getTree(tree.getPath());
            }
        };
```

### Deprecation
'doneMerge(javax.jcr.version.Version)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#doneMerge(javax.jcr.version.Version)
     */
    @Override
```

### Deprecation
'getUUID()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#getUUID()
     */
    @Override
```

### Deprecation
'getBaseVersion()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#getBaseVersion()
     */
    @Override
```

### Deprecation
'restore(javax.jcr.version.Version, boolean)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#restore(javax.jcr.version.Version, boolean)
     */
    @Override
```

### Deprecation
'checkin()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#checkin()
     */
    @Override
```

### Deprecation
'getVersionHistory()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#getVersionHistory()
     */
    @Override
```

### Deprecation
'restore(javax.jcr.version.Version, java.lang.String, boolean)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#restore(Version, String, boolean)
     */
    @Override
```

### Deprecation
'restore(javax.jcr.version.Version, boolean)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
        if (hasNode(relPath)) {
            // node at 'relPath' exists -> call restore on the target Node
            getNode(relPath).restore(version, removeExisting);
        } else {
            String absPath = PathUtils.concat(getPath(), relPath);
```

### Deprecation
'merge(java.lang.String, boolean)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#merge(String, boolean)
     */
    @Override
```

### Deprecation
'restore(java.lang.String, boolean)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#restore(String, boolean)
     */
    @Override
```

### Deprecation
'restoreByLabel(java.lang.String, boolean)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#restoreByLabel(String, boolean)
     */
    @Override
```

### Deprecation
'checkout()' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#checkout()
     */
    @Override
```

### Deprecation
'cancelMerge(javax.jcr.version.Version)' is deprecated
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java

    /**
     * @see javax.jcr.Node#cancelMerge(javax.jcr.version.Version)
     */
    @Override
```

### Deprecation
'closeQuietly(org.apache.commons.io.LineIterator)' is deprecated
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/blob/LengthCachingDataStore.java`
#### Snippet
```java
            log.info("Total {} mapping entries found", mapping.size());
        } finally {
            LineIterator.closeQuietly(itr);
        }
        return mapping;
```

### Deprecation
'newInstance()' is deprecated
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/blob/LengthCachingDataStore.java`
#### Snippet
```java
        checkNotNull(delegateClass, "No delegate DataStore class defined via 'delegateClass' property");
        try {
            delegate = (DataStore) getClass().getClassLoader().loadClass(delegateClass).newInstance();
        } catch (InstantiationException e) {
            throw new RepositoryException("Cannot load delegate class " + delegateClass, e);
```

### Deprecation
'getFulltextConditions()' is deprecated
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
            queryBuilder.append(parseFullTextExpression(ft, configuration));
            queryBuilder.append(' ');
        } else if (filter.getFulltextConditions() != null) {
            Collection<String> fulltextConditions = filter.getFulltextConditions();
            for (String fulltextCondition : fulltextConditions) {
```

### Deprecation
'getFulltextConditions()' is deprecated
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
            queryBuilder.append(' ');
        } else if (filter.getFulltextConditions() != null) {
            Collection<String> fulltextConditions = filter.getFulltextConditions();
            for (String fulltextCondition : fulltextConditions) {
                queryBuilder.append(fulltextCondition).append(" ");
```

### Deprecation
'XPATH' is deprecated
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/MultiFilterSplitOrderBySearcher.java`
#### Snippet
```java
        LOG.debug("{}", statement);

        return qm.createQuery(statement.toString(), Query.XPATH);
    }

```

### Deprecation
'XPATH' is deprecated
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/AggregateNodeSearcher.java`
#### Snippet
```java
        LOG.debug("{}", statement);

        return qm.createQuery(statement.toString(), Query.XPATH);
    }

```

### Deprecation
'NullOutputStream()' is deprecated
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
                session.refresh(false);
                JcrUtils.readFile(
                        session.getNode(path), new NullOutputStream());
            } catch (Exception e) {
                LOG.error("Exception in reader execution ", e);
```

### Deprecation
'XPATH' is deprecated
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/SplitOrderBySearcher.java`
#### Snippet
```java
        LOG.debug("{}", statement);

        return qm.createQuery(statement.toString(), Query.XPATH);
    }

```

### Deprecation
'getFulltextConditions()' is deprecated
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java

        // full text expressions OR full text conditions defined
        if (filter.getFullTextConstraint() != null || (filter.getFulltextConditions() != null
                && filter.getFulltextConditions().size() > 0)) {
            match++; // full text queries have usually a significant recall
```

### Deprecation
'getFulltextConditions()' is deprecated
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
        // full text expressions OR full text conditions defined
        if (filter.getFullTextConstraint() != null || (filter.getFulltextConditions() != null
                && filter.getFulltextConditions().size() > 0)) {
            match++; // full text queries have usually a significant recall
        }
```

### Deprecation
'withAsyncIndexing()' is deprecated
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeSuite.java`
#### Snippet
```java
                    if (!Strings.isNullOrEmpty(ASYNC_INDEX) && ASYNC_INDEX
                        .equals(IndexConstants.ASYNC_PROPERTY_NAME)) {
                        oak.withAsyncIndexing();
                    }

```

### Deprecation
'getExecutionTime()' is deprecated
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeSuite.java`
#### Snippet
```java

            LOG.info("Execution Count {}", indexStatsMBean.getExecutionCount());
            LOG.info("Execution Time {}", indexStatsMBean.getExecutionTime());
            LOG.info("Consolidated Execution Stats {}", indexStatsMBean.getConsolidatedExecutionStats());
        }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/NodeStateAnalyzerFactory.java`
#### Snippet
```java

        //Need to read children in order
        Tree tree = TreeFactory.createReadOnlyTree(charFiltersState);
        for (Tree t : tree.getChildren()){
            NodeState state = charFiltersState.getChildNode(t.getName());
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/NodeStateAnalyzerFactory.java`
#### Snippet
```java
        List<TokenFilterFactory> result = newArrayList();

        Tree tree = TreeFactory.createReadOnlyTree(tokenFiltersState);
        for (Tree t : tree.getChildren()){
            NodeState state = tokenFiltersState.getChildNode(t.getName());
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

        private final String nodeType;
        private final List<FulltextQueryTermsProvider> providers;

        CompositeFulltextQueryTermsProvider(String nodeType, List<FulltextQueryTermsProvider> providers) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

    @NotNull
    public FulltextQueryTermsProvider getFulltextQueryTermsProvider(String nodeType) {
        FulltextQueryTermsProvider provider = fulltextQueryTermsProviderMap.get(nodeType);
        return (provider != null) ? provider : FulltextQueryTermsProvider.DEFAULT;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    @NotNull
    public FulltextQueryTermsProvider getFulltextQueryTermsProvider(String nodeType) {
        FulltextQueryTermsProvider provider = fulltextQueryTermsProviderMap.get(nodeType);
        return (provider != null) ? provider : FulltextQueryTermsProvider.DEFAULT;
    }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    public FulltextQueryTermsProvider getFulltextQueryTermsProvider(String nodeType) {
        FulltextQueryTermsProvider provider = fulltextQueryTermsProviderMap.get(nodeType);
        return (provider != null) ? provider : FulltextQueryTermsProvider.DEFAULT;
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    class CompositeFulltextQueryTermsProvider implements FulltextQueryTermsProvider {

        private final String nodeType;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    class CompositeIndexFieldProvider implements IndexFieldProvider {

        private final String nodeType;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
                policy = ReferencePolicy.DYNAMIC,
                cardinality = ReferenceCardinality.OPTIONAL_MULTIPLE,
                referenceInterface = IndexFieldProvider.class),
        @Reference(name = "FulltextQueryTermsProvider",
                policy = ReferencePolicy.DYNAMIC,
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
                policy = ReferencePolicy.DYNAMIC,
                cardinality = ReferenceCardinality.OPTIONAL_MULTIPLE,
                referenceInterface = FulltextQueryTermsProvider.class)
})
public class IndexAugmentorFactory {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    synchronized void unbindFulltextQueryTermsProvider(FulltextQueryTermsProvider fulltextQueryTermsProvider) {
        fulltextQueryTermsProviders.remove(fulltextQueryTermsProvider);
        refreshFulltextQueryTermsProviders();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        private final List<IndexFieldProvider> providers;

        CompositeIndexFieldProvider(String nodeType, List<IndexFieldProvider> providers) {
            this.nodeType = nodeType;
            this.providers = ImmutableList.copyOf(providers);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        public Query getQueryTerm(final String text, final Analyzer analyzer, NodeState indexDefinition) {
            List<Query> subQueries = Lists.newArrayList();
            for (FulltextQueryTermsProvider fulltextQueryTermsProvider : providers) {
                final long start = PERFLOG.start();
                Query subQuery = fulltextQueryTermsProvider.getQueryTerm(text, analyzer, indexDefinition);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        private final List<FulltextQueryTermsProvider> providers;

        CompositeFulltextQueryTermsProvider(String nodeType, List<FulltextQueryTermsProvider> providers) {
            this.nodeType = nodeType;
            this.providers = ImmutableList.copyOf(providers);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

        private final String nodeType;
        private final List<IndexFieldProvider> providers;

        CompositeIndexFieldProvider(String nodeType, List<IndexFieldProvider> providers) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

    private final Set<IndexFieldProvider> indexFieldProviders;
    private final Set<FulltextQueryTermsProvider> fulltextQueryTermsProviders;

    private volatile Map<String, CompositeIndexFieldProvider> indexFieldProviderMap;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    synchronized void bindIndexFieldProvider(IndexFieldProvider indexFieldProvider) {
        indexFieldProviders.add(indexFieldProvider);
        refreshIndexFieldProviders();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
                                              final NodeState document, final NodeState indexDefinition) {
            List<Field> fields = Lists.newArrayList();
            for (IndexFieldProvider indexFieldProvider : providers) {
                final long start = PERFLOG.start();
                Iterable<Field> providedFields = indexFieldProvider.getAugmentedFields(path, document, indexDefinition);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    synchronized void bindFulltextQueryTermsProvider(FulltextQueryTermsProvider fulltextQueryTermsProvider) {
        fulltextQueryTermsProviders.add(fulltextQueryTermsProvider);
        refreshFulltextQueryTermsProviders();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

    private void refreshIndexFieldProviders() {
        ListMultimap<String, IndexFieldProvider> providerMultimap =
                LinkedListMultimap.create();
        for (IndexFieldProvider provider : indexFieldProviders) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        ListMultimap<String, IndexFieldProvider> providerMultimap =
                LinkedListMultimap.create();
        for (IndexFieldProvider provider : indexFieldProviders) {
            Set<String> supportedNodeTypes = provider.getSupportedTypes();
            for (String nodeType : supportedNodeTypes) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        Map<String, CompositeIndexFieldProvider> providerMap = Maps.newHashMap();
        for (String nodeType : providerMultimap.keySet()) {
            List<IndexFieldProvider> providers = providerMultimap.get(nodeType);
            CompositeIndexFieldProvider compositeIndexFieldProvider =
                    new CompositeIndexFieldProvider(nodeType, providers);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

    @NotNull
    public IndexFieldProvider getIndexFieldProvider(String nodeType) {
        IndexFieldProvider provider = indexFieldProviderMap.get(nodeType);
        return (provider != null) ? provider : IndexFieldProvider.DEFAULT;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    @NotNull
    public IndexFieldProvider getIndexFieldProvider(String nodeType) {
        IndexFieldProvider provider = indexFieldProviderMap.get(nodeType);
        return (provider != null) ? provider : IndexFieldProvider.DEFAULT;
    }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    public IndexFieldProvider getIndexFieldProvider(String nodeType) {
        IndexFieldProvider provider = indexFieldProviderMap.get(nodeType);
        return (provider != null) ? provider : IndexFieldProvider.DEFAULT;
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    synchronized void unbindIndexFieldProvider(IndexFieldProvider indexFieldProvider) {
        indexFieldProviders.remove(indexFieldProvider);
        refreshIndexFieldProviders();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java

    private void refreshFulltextQueryTermsProviders() {
        ListMultimap<String, FulltextQueryTermsProvider> providerMultimap =
                LinkedListMultimap.create();
        for (FulltextQueryTermsProvider provider : fulltextQueryTermsProviders) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        ListMultimap<String, FulltextQueryTermsProvider> providerMultimap =
                LinkedListMultimap.create();
        for (FulltextQueryTermsProvider provider : fulltextQueryTermsProviders) {
            Set<String> supportedNodeTypes = provider.getSupportedTypes();
            for (String nodeType : supportedNodeTypes) {
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
        Map<String, CompositeFulltextQueryTermsProvider> providerMap = Maps.newHashMap();
        for (String nodeType : providerMultimap.keySet()) {
            List<FulltextQueryTermsProvider> providers = providerMultimap.get(nodeType);
            CompositeFulltextQueryTermsProvider compositeFulltextQueryTermsProvider =
                    new CompositeFulltextQueryTermsProvider(nodeType, providers);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.IndexFieldProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
            LoggerFactory.getLogger(IndexAugmentorFactory.class.getName() + ".perf"));

    private final Set<IndexFieldProvider> indexFieldProviders;
    private final Set<FulltextQueryTermsProvider> fulltextQueryTermsProviders;

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.util.TapeSampling' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/StatisticalSortedSetDocValuesFacetCounts.java`
#### Snippet
```java
    private Iterator<Integer> getSampledMatchingDocIterator(Iterator<Integer> matchingDocs,
                                                            long randomdSeed, int hitCount, int sampleSize) {
        TapeSampling<Integer> tapeSampling = new TapeSampling<>(new Random(randomdSeed), matchingDocs, hitCount, sampleSize);

        return tapeSampling.getSamples();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.util.TapeSampling' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/StatisticalSortedSetDocValuesFacetCounts.java`
#### Snippet
```java
    private Iterator<Integer> getSampledMatchingDocIterator(Iterator<Integer> matchingDocs,
                                                            long randomdSeed, int hitCount, int sampleSize) {
        TapeSampling<Integer> tapeSampling = new TapeSampling<>(new Random(randomdSeed), matchingDocs, hitCount, sampleSize);

        return tapeSampling.getSamples();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java

    static Query getFullTextQuery(final IndexPlan plan, FullTextExpression ft,
                                  final Analyzer analyzer, final FulltextQueryTermsProvider augmentor) {
        final PlanResult pr = getPlanResult(plan);
        // a reference to the query, so it can be set in the visitor
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
    }

    private static FulltextQueryTermsProvider getIndexAgumentor(IndexPlan plan, IndexAugmentorFactory augmentorFactory) {
        PlanResult planResult = getPlanResult(plan);

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
     */
    private static LuceneRequestFacade getLuceneRequest(IndexPlan plan, IndexAugmentorFactory augmentorFactory, IndexReader reader) {
        FulltextQueryTermsProvider augmentor = getIndexAgumentor(plan, augmentorFactory);
        List<Query> qs = new ArrayList<>();
        Filter filter = plan.getFilter();
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.index.lucene.spi.FulltextQueryTermsProvider' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java

    private static Query tokenToQuery(String text, String fieldName, PlanResult pr, Analyzer analyzer,
                                      FulltextQueryTermsProvider augmentor) {
        Query ret;
        IndexingRule indexingRule = pr.indexingRule;
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexConsistencyChecker.java`
#### Snippet
```java

    private void checkBlobs(Result result) {
        Root root = RootFactory.createReadOnlyRoot(rootState);
        Tree idx = root.getTree(indexPath);
        PropertyState type = idx.getProperty("type");
```

### Deprecation
'closeQuietly(org.apache.commons.io.LineIterator)' is deprecated
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/ActiveDeletedBlobCollectorFactory.java`
#### Snippet
```java
                        LOG.warn("Couldn't read deleted blob list file - " + deletedBlobListFile, ioe);
                    } finally {
                        LineIterator.closeQuietly(blobLineIter);
                    }

```

### Deprecation
'closeQuietly(org.apache.commons.io.LineIterator)' is deprecated
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileStore.java`
#### Snippet
```java

                //End of iterator then close it
                LineIterator.closeQuietly(itr);
                return endOfData();
            }
```

### Deprecation
'TransferManager(com.amazonaws.services.s3.AmazonS3)' is deprecated
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/DataStoreUtils.java`
#### Snippet
```java
        props.putAll(map);
        AmazonS3Client s3service = Utils.openService(props);
        TransferManager tmx = new TransferManager(s3service);
        if (s3service.doesBucketExist(bucket)) {
            for (int i = 0; i < 4; i++) {
```

### Deprecation
'newInstance()' is deprecated
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java
                checkNotNull(className, "No system property named 'dataStore' defined");
                try {
                    dataStore = Class.forName(className).asSubclass(DataStore.class).newInstance();
                    config = getConfig();
                    configure(dataStore, config);
```

### Deprecation
'setNodeCachePredicate(Predicate)' is deprecated
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/OakFixture.java`
#### Snippet
```java
                System.out.println("Configuring persistent cache to only cache nodes under paths " + paths);
                Predicate<String> cachePredicate = path -> path != null && pf.filter(path) == PathFilter.Result.INCLUDE;
                builder.setNodeCachePredicate(cachePredicate);
            }
        }
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/NodeStoreChecksService.java`
#### Snippet
```java
        
        T context = c.createContext(globalStore, mip);
        Tree mountRoot = TreeFactory.createReadOnlyTree(mountedStore.getNodeStore().getRoot());
        
        visit(mountRoot, mountedStore,  errorHolder, context, c);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/NamespacePrefixNodestoreChecker.java`
#### Snippet
```java
    public Context createContext(NodeStore globalStore, MountInfoProvider mip) {

        Root root = RootFactory.createReadOnlyRoot(globalStore.getRoot());
        
        ReadOnlyNamespaceRegistry registry = new ReadOnlyNamespaceRegistry(root);
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/NodeTypeMountedNodeStoreChecker.java`
#### Snippet
```java
    public Context createContext(NodeStore globalStore, MountInfoProvider mip) {
        
        Root globalRoot = RootFactory.createReadOnlyRoot(globalStore.getRoot());
        ReadOnlyNodeTypeManager typeManager = ReadOnlyNodeTypeManager.getInstance(globalRoot, NamePathMapper.DEFAULT);
    
```

### Deprecation
'XPATH' is deprecated
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/PrincipalBasedAccessControlManager.java`
#### Snippet
```java
            // run query on persisted content omitting any transient modifications
            QueryEngine queryEngine = getLatestRoot().getQueryEngine();
            Result result = queryEngine.executeQuery(stmt.toString(), Query.XPATH, QueryEngine.NO_BINDINGS, QueryEngine.NO_MAPPINGS);

            Map<Principal, List<AbstractEntry>> m = new HashMap<>();
```

### Deprecation
'NT_REP_MEMBERS' is deprecated
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/principal/DynamicGroupUtil.java`
#### Snippet
```java

    private static final Set<String> MEMBER_NODE_NAMES = ImmutableSet.of(UserConstants.REP_MEMBERS, UserConstants.REP_MEMBERS_LIST);
    private static final Set<String> MEMBERS_TYPES = ImmutableSet.of(UserConstants.NT_REP_MEMBER_REFERENCES, UserConstants.NT_REP_MEMBER_REFERENCES_LIST, UserConstants.NT_REP_MEMBERS);

    private DynamicGroupUtil() {}
```

### Deprecation
'createValue(java.io.InputStream)' is deprecated
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/basic/DefaultSyncContext.java`
#### Snippet
```java
            return valueFactory.createValue((Binary) v);
        } else if (v instanceof InputStream) {
            return valueFactory.createValue((InputStream) v);
        } else if (v instanceof char[]) {
            return valueFactory.createValue(new String((char[]) v));
```

### Deprecation
'XPATH' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java

    protected String queryType() {
        return Query.XPATH;
    }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java
        public void initialize(final @NotNull NodeBuilder builder) {
            if (!isAlreadyThere(builder)) {
                Tree t = TreeFactory.createTree(builder.child(INDEX_DEFINITIONS_NAME));
                t.setProperty("jcr:primaryType", "nt:unstructured", NAME);

```

### Deprecation
'NullOutputStream()' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentFileWriteTest.java`
#### Snippet
```java
                session.refresh(false);
                JcrUtils.readFile(
                        session.getNode(path), new NullOutputStream());
            } catch (Exception e) {
                e.printStackTrace();
```

### Deprecation
'setProperty(java.lang.String, java.io.InputStream)' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SmallFileReadTest.java`
#### Snippet
```java
            content.setProperty("jcr:mimeType", "application/octet-stream");
            content.setProperty("jcr:lastModified", Calendar.getInstance());
            content.setProperty(
                    "jcr:data", new TestInputStream(FILE_SIZE * 1024));
        }
```

### Deprecation
'getStream()' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SmallFileReadTest.java`
#### Snippet
```java
            Node file = root.getNode("file" + i);
            Node content = file.getNode("jcr:content");
            InputStream stream = content.getProperty("jcr:data").getStream();
            try {
                ByteStreams.copy(stream, ByteStreams.nullOutputStream());
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        @Override
        public void refresh() {
            immutableRoot = RootFactory.createReadOnlyRoot(root);
        }

```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.RootFactory' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        private TmpPermissionProvider(Root root) {
            this.root = root;
            immutableRoot = RootFactory.createReadOnlyRoot(root);
        }
        @Override
```

### Deprecation
'org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory' is deprecated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
        public void initialize(@NotNull NodeBuilder builder) {
            if (!isAlreadyThere(builder)) {
                Tree t = TreeFactory.createTree(builder.child(INDEX_DEFINITIONS_NAME));
                t.setProperty("jcr:primaryType", "nt:unstructured", NAME);

```

### Deprecation
'XPATH' is deprecated
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
                stmt = "//element(*, nt:file)[jcr:contains(jcr:content, '" + q + "')]/rep:excerpt(.) order by @jcr:score descending";
            }
            Query query = jcrSession.getWorkspace().getQueryManager().createQuery(stmt, Query.XPATH);
            long time = System.currentTimeMillis();
            rows = query.execute().getRows();
```

### Deprecation
'XPATH' is deprecated
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
                    RowIterator spellResultItr = jcrSession.getWorkspace().getQueryManager().createQuery(
                            "/jcr:root[rep:spellcheck('" + q + "')]/(rep:spellcheck())",
                            Query.XPATH).execute().getRows();
                    if (spellResultItr.hasNext()){
                        Value v = spellResultItr.nextRow().getValue("rep:spellcheck()");
```

### Deprecation
'setProperty(java.lang.String, java.io.InputStream)' is deprecated
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                                                in = new ProgressInputStream(in, length, info, "dp", fOut);
                                            }
                                            resource.setProperty("jcr:data", in);
                                            String mimeType = URLConnection.guessContentTypeFromName(fileName);
                                            if (mimeType == null) {
```

## RuleId[id=FinalStaticMethod]
### FinalStaticMethod
'static' method declared `final`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsData.java`
#### Snippet
```java
    }
    
    public static final String getTimeString(long timeMillis) {
        return String.format("%tF %tT", timeMillis, timeMillis);
    }
```

### FinalStaticMethod
'static' method declared `final`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/ConflictHook.java`
#### Snippet
```java
    }

    public static final ConflictHook of(ThreeWayConflictHandler handler) {
        return new ConflictHook(handler);
    }
```

### FinalStaticMethod
'static' method declared `final`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/ConflictHook.java`
#### Snippet
```java
     */
    @Deprecated
    public static final ConflictHook of(ConflictHandler handler) {
        return of(ConflictHandlers.wrap(handler));
    }
```

### FinalStaticMethod
'static' method declared `final`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/RecordCache.java`
#### Snippet
```java
        private long weight = 0;

        static final <K> Supplier<RecordCache<K>> defaultFactory(final int size, @NotNull final Weigher<K, RecordId> weigher) {
            return new Supplier<RecordCache<K>>() {
                @Override
```

### FinalStaticMethod
'static' method declared `final`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/RecordCache.java`
#### Snippet
```java

    private static class Empty<T> extends RecordCache<T> {
        static final <T> Supplier<RecordCache<T>> emptyFactory() {
            return  new Supplier<RecordCache<T>>() {
                @Override
```

### FinalStaticMethod
'static' method declared `final`
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
    }

    public final static boolean isLockingSupported() {
        return ISLOCKINGSUPPORTED;
    }
```

## RuleId[id=TrivialStringConcatenation]
### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentBroadcastConfig.java`
#### Snippet
```java
        ClusterNodeInfo info = documentNodeStore.getClusterInfo();
        info.setInfo(clientInfo);
        return "" + info.getId();
    }

```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
        // synchronized, because renewLease is also synchronized 
        synchronized(this) {
            UpdateOp update = new UpdateOp("" + id, false);
            for(Entry<String, String> e : info.entrySet()) {
                update.set(e.getKey(), e.getValue());
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
        }

        UpdateOp update = new UpdateOp("" + id, false);
        // Update the field only if the newer value is higher (or doesn't exist)
        update.max(LEASE_END_KEY, updatedLeaseEndTime);
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
                // try to add more diagnostics
                try {
                    ClusterNodeInfoDocument current = store.find(Collection.CLUSTER_NODES, "" + id);
                    if (current != null) {
                        Object leaseEnd = current.get(LEASE_END_KEY);
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
            }
        }
        UpdateOp update = new UpdateOp("" + id, true);
        update.set(LEASE_END_KEY, null);
        update.set(STATE, null);
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java

            Long leaseEnd = (Long) doc.get(LEASE_END_KEY);
            String mId = "" + doc.get(MACHINE_ID_KEY);
            String iId = "" + doc.get(INSTANCE_ID_KEY);

```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
            Long leaseEnd = (Long) doc.get(LEASE_END_KEY);
            String mId = "" + doc.get(MACHINE_ID_KEY);
            String iId = "" + doc.get(INSTANCE_ID_KEY);

            // handle active clusterId with valid lease and no recovery lock
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticIndexHelper.java`
#### Snippet
```java
                                "    \"L\": " + pd.getSimilaritySearchParameters().getL() + "," +
                                "    \"k\": " + pd.getSimilaritySearchParameters().getK() + "," +
                                "    \"w\": " + pd.getSimilaritySearchParameters().getW() + "" +
                                "  }" +
                                "}");
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
    private static List<Object[]> readRunnableStackTraces(int pid) {
        try {
            String jstack = exec("jstack", "" + pid);
            LineNumberReader r = new LineNumberReader(
                    new StringReader(jstack));
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
        }
        if (force || condition != null || joinCondition != null) {
            String nextSelectorName = "" + (char) (currentSelector.name.charAt(0) + 1);
            if (nextSelectorName.compareTo("x") > 0) {
                throw getSyntaxError("too many joins");
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/Aggregate.java`
#### Snippet
```java
            //For supporting jcr:contains(jcr:content, 'foo')
            if (!(include instanceof NodeInclude)) {
                throw new IllegalArgumentException("" + include);
            }
            NodeInclude rootInclude = (NodeInclude) include;
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/DebugTars.java`
#### Snippet
```java
            System.out.println("Tar graph:");
            for (Map.Entry<UUID, Set<UUID>> entry : graph.entrySet()) {
                System.out.println("" + entry.getKey() + '=' + entry.getValue());
            }
        } catch (IOException e) {
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/PersistentCacheCommand.java`
#### Snippet
```java
                v = v.length() + "," + v.replace(',', '#');
            } else {
                v = "" + v.length();
            }
            key = key.replace(',', '#');
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ChangeProcessor.java`
#### Snippet
```java
        executor.start(whiteboard);
        final FilteringObserver filteringObserver = createObserver(executor);
        listenerId = COUNTER.incrementAndGet() + "";
        Map<String, String> attrs = ImmutableMap.of(LISTENER_ID, listenerId);
        String name = tracker.toString();
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MultithreadedTraverseWithSortStrategy.java`
#### Snippet
```java

        static void setLastModifiedUpperLimit(File sortWorkDir, long lastModifiedUpperLimit) throws IOException {
            Files.write(Paths.get(sortWorkDir.getAbsolutePath() + "/" + LAST_MODIFIED_UPPER_LIMIT), ("" + lastModifiedUpperLimit).getBytes(),
                    StandardOpenOption.CREATE, StandardOpenOption.WRITE, StandardOpenOption.TRUNCATE_EXISTING);
        }
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/CanReadNonExisting.java`
#### Snippet
```java
        Node extras = s.getNode("/").addNode("extras");
        for (int i = 0; i < extraPolicies; i++) {
            extras.addNode(i + "");
        }
        s.save();
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/CanReadNonExisting.java`
#### Snippet
```java
            Node content = s.getNode("/").addNode("content");
            for (int i = 0; i < contentNodes; i++) {
                String p = content.addNode(i + "").getPath();
                addAccessControlEntry(s, p, eye.getPrincipal(), new String[] { JCR_READ }, true);
            }
```

### TrivialStringConcatenation
Empty string used in concatenation
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/AceCreationTest.java`
#### Snippet
```java

        for (int i = 0; i < count; i++) {
            ImmutableMap<String, Value> restrictions = ImmutableMap.of(AccessControlConstants.REP_GLOB, session.getValueFactory().createValue(i + ""));
            acl.addEntry(EveryonePrincipal.getInstance(), AccessControlUtils.privilegesFromNames(acManager, Privilege.JCR_ADD_CHILD_NODES), true, restrictions);
        }
```

## RuleId[id=NumberEquality]
### NumberEquality
Number objects are compared using `!=`, not 'equals()'
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/editor/FulltextIndexEditorContext.java`
#### Snippet
```java
          Long clonedRandom = getLongPropertyOrNull(clonedState.getProperty(PROP_RANDOM_SEED));

          if (clonedRandom == null || clonedRandom != defRandom) {
            definition.getChildNode(INDEX_DEFINITION_NODE).setProperty(PROP_RANDOM_SEED, defRandom);
          }
```

## RuleId[id=RedundantTypeArguments]
### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevs.java`
#### Snippet
```java

    LastRevs(RevisionVector readRevision) {
        this(Collections.<Integer, Revision>emptyMap(), readRevision, null);
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeState.java`
#### Snippet
```java
                      @NotNull Path path,
                      @NotNull RevisionVector rootRevision) {
        this(store, path, rootRevision, Collections.<PropertyState>emptyList(), false, null);
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/bundlor/BundledTypesRegistry.java`
#### Snippet
```java
    private static Iterable<String> getMixinNames(NodeState nodeState, String typePropName) {
        PropertyState ps = nodeState.getProperty(typePropName);
        return (ps == null) ? Collections.<String>emptyList() : ps.getValue(Type.NAMES);
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/secondary/SecondaryStoreBuilder.java`
#### Snippet
```java
public class SecondaryStoreBuilder {
    private final NodeStore store;
    private PathFilter pathFilter = new PathFilter(singletonList("/"), Collections.<String>emptyList());
    private NodeStateDiffer differ = NodeStateDiffer.DEFAULT_DIFFER;
    private StatisticsProvider statsProvider = StatisticsProvider.NOOP;
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/secondary/SecondaryStoreCacheService.java`
#### Snippet
```java
        //store it assumes that complete subtree is in same store. With exclude it would need to
        //check for each child access and route to primary
        pathFilter = new PathFilter(asList(includedPaths), Collections.<String>emptyList());

        SecondaryStoreBuilder builder = new SecondaryStoreBuilder(secondaryStoreProvider.getNodeStore())
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/core/MutableRoot.java`
#### Snippet
```java
    @Override
    public void commit() throws CommitFailedException {
        commit(Collections.<String, Object>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadWriteVersionManager.java`
#### Snippet
```java
        String versionPath = getIdentifierManager().getPath(versionUUID);
        NodeBuilder history = getOrCreateVersionHistory(versionable,
                Collections.<String, Object>emptyMap());
        NodeBuilder version = null;
        if (versionPath != null) {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadWriteVersionManager.java`
#### Snippet
```java
        version.setProperty(JCR_CREATED, ISO8601.format(Calendar.getInstance()), Type.DATE);
        version.setProperty(JCR_PREDECESSORS, predecessors, Type.REFERENCES);
        version.setProperty(JCR_SUCCESSORS, Collections.<String>emptyList(), Type.REFERENCES);

        // update successors of versions identified by predecessors
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadWriteVersionManager.java`
#### Snippet
```java
            throws CommitFailedException {
        NodeBuilder history = getOrCreateVersionHistory(versionable,
                Collections.<String, Object>emptyMap());
        createVersion(history, versionable);
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionableState.java`
#### Snippet
```java
                uuidFromNode(version), Type.REFERENCE);
        versionable.setProperty(JCR_PREDECESSORS,
                Collections.<String>emptyList(), Type.REFERENCES);
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeRegistration.java`
#### Snippet
```java
            return property.getValue(NAMES);
        } else {
            return Collections.<String>emptyList();
        }
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java

        private ChildNodeDefDiffs(final List<NodeDefinition> defs1, final List<NodeDefinition> defs2) {
            this.defs1 = defs1 != null ? defs1 : Collections.<NodeDefinition>emptyList();
            this.defs2 = defs2 != null ? defs2 : Collections.<NodeDefinition>emptyList();
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
        private ChildNodeDefDiffs(final List<NodeDefinition> defs1, final List<NodeDefinition> defs2) {
            this.defs1 = defs1 != null ? defs1 : Collections.<NodeDefinition>emptyList();
            this.defs2 = defs2 != null ? defs2 : Collections.<NodeDefinition>emptyList();
        }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/version/VersionableEditor.java`
#### Snippet
```java

    private void createEmptyHistory(NodeBuilder versionable) throws CommitFailedException {
        vMgr.getOrCreateVersionHistory(versionable, Collections.<String,Object>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/CommitMarker.java`
#### Snippet
```java
    @NotNull
    static Map<String, Object> asCommitAttributes() {
        return Collections.<String, Object>singletonMap(CommitMarker.KEY, CommitMarker.INSTANCE);
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/Aggregate.java`
#### Snippet
```java

    Aggregate(String nodeTypeName) {
       this(nodeTypeName, Collections.<Include>emptyList());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/editor/FulltextIndexEditor.java`
#### Snippet
```java

  static class MatcherState {
    final static MatcherState NONE = new MatcherState(Collections.<Aggregate.Matcher>emptyList(),
        Collections.<Aggregate.Matcher>emptyList());

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/editor/FulltextIndexEditor.java`
#### Snippet
```java
  static class MatcherState {
    final static MatcherState NONE = new MatcherState(Collections.<Aggregate.Matcher>emptyList(),
        Collections.<Aggregate.Matcher>emptyList());

    final List<Aggregate.Matcher> matched;
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java
    @Override @NotNull
    public synchronized String checkpoint(long lifetime) {
        return checkpoint(lifetime, Collections.<String, String>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/RecordWriters.java`
#### Snippet
```java

        protected RecordWriter(RecordType type, int size) {
            this(type, size, Collections.<RecordId> emptyList());
        }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/DebugStore.java`
#### Snippet
```java
                bulkCount++;
                bulkSize += id.getSegment().size();
                idmap.put(id, Collections.<SegmentId>emptyList());
            }
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/xml/NodeInfo.java`
#### Snippet
```java
        this.name = name;
        this.primaryTypeName = primaryTypeName;
        this.mixinTypeNames = (mixinTypeNames == null) ? Collections.<String>emptyList() : mixinTypeNames;
        this.uuid = uuid;
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/accesscontrol/AbstractAccessControlList.java`
#### Snippet
```java
    @Override
    public boolean addEntry(@NotNull Principal principal, @NotNull Privilege[] privileges, boolean isAllow) throws RepositoryException {
        return addEntry(principal, privileges, isAllow, Collections.<String, Value>emptyMap());
    }
    
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/accesscontrol/AbstractAccessControlList.java`
#### Snippet
```java
    @Override
    public boolean addAccessControlEntry(Principal principal, Privilege[] privileges) throws RepositoryException {
        return addEntry(principal, privileges, true, Collections.<String, Value>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/SystemSubject.java`
#### Snippet
```java
    private static Subject createSystemSubject() {
        Set<? extends Principal> principals = Collections.singleton(SystemPrincipal.INSTANCE);
        return new Subject(true, principals, Collections.<Object>emptySet(), Collections.<Object>emptySet());
    }
}
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/SystemSubject.java`
#### Snippet
```java
    private static Subject createSystemSubject() {
        Set<? extends Principal> principals = Collections.singleton(SystemPrincipal.INSTANCE);
        return new Subject(true, principals, Collections.<Object>emptySet(), Collections.<Object>emptySet());
    }
}
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/ConfigurationUtil.java`
#### Snippet
```java
            @Override
            public AppConfigurationEntry[] getAppConfigurationEntry(String applicationName) {
                Map<String, ?> options = loginConfiguration.getConfigValue(applicationName, Collections.<String, Object>emptyMap());
                return new AppConfigurationEntry[]{new DefaultEntry(options)};
            }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/ConfigurationUtil.java`
#### Snippet
```java
            @Override
            public AppConfigurationEntry[] getAppConfigurationEntry(String applicationName) {
                Map<String, ?> options = loginConfiguration.getConfigValue(applicationName, Collections.<String, Object>emptyMap());
                return new AppConfigurationEntry[]{
                        new GuestEntry(options),
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/token/CompositeTokenProvider.java`
#### Snippet
```java
    @NotNull
    public static TokenProvider newInstance(@NotNull TokenProvider... providers) {
        return newInstance(Arrays.<TokenProvider>asList(providers));
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/mount/Mounts.java`
#### Snippet
```java

        DefaultMount() {
            this(Collections.<Mount> emptySet());
        }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/whiteboard/WhiteboardUtils.java`
#### Snippet
```java
            Whiteboard whiteboard, Runnable runnable, long delayInSeconds, boolean runOnSingleClusterNode,
            boolean useDedicatedPool) {
        return scheduleWithFixedDelay(whiteboard, runnable, Collections.<String, Object>emptyMap(),
                delayInSeconds, runOnSingleClusterNode, useDedicatedPool);
    }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/whiteboard/WhiteboardUtils.java`
#### Snippet
```java
            Whiteboard whiteboard,
            Class<T> iface, T bean, String type, String name) {
        return registerMBean(whiteboard, iface, bean, type, name, Collections.<String, String>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/osgi/OsgiWhiteboard.java`
#### Snippet
```java
        Objects.requireNonNull(type);
        final AtomicReference<List<T>> list =
                new AtomicReference<List<T>>(Collections.<T>emptyList());
        final ServiceTrackerCustomizer customizer =
                new ServiceTrackerCustomizer() {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/CommitInfo.java`
#### Snippet
```java
    public CommitInfo(
            @NotNull String sessionId, @Nullable String userId) {
        this(sessionId, userId, Collections.<String, Object>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/CommitInfo.java`
#### Snippet
```java
     */
    public static final CommitInfo EMPTY_EXTERNAL =
            new CommitInfo(OAK_UNKNOWN, OAK_UNKNOWN, Collections.<String, Object>emptyMap(), true);

    private final String sessionId;
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/filter/PathFilter.java`
#### Snippet
```java
        return new PathFilter(getStrings(defn, PROP_INCLUDED_PATHS,
                INCLUDE_ROOT), getStrings(defn, PROP_EXCLUDED_PATHS,
                Collections.<String> emptyList()));
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/filter/PathFilter.java`
#### Snippet
```java
    }

    private static final PathFilter ALL = new PathFilter(INCLUDE_ROOT, Collections.<String>emptyList()) {
        @Override
        public Result filter(@NotNull String path) {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeStore.java`
#### Snippet
```java
    @Override @NotNull
    public synchronized String checkpoint(long lifetime) {
        return checkpoint(lifetime, Collections.<String, String>emptyMap());
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
                // check for existing nodes
                List<NodeDelegate> existing = getExisting(version,
                        Collections.<String>emptySet());
                boolean success = false;
                try {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/NodeDelegate.java`
#### Snippet
```java
        Set<String> existingMixins = newLinkedHashSet(getNames(tree, JCR_MIXINTYPES));
        if (existingMixins.isEmpty()) {
            updateMixins(mixinNames, Collections.<String>emptySet());
        } else {
            Set<String> toRemove = newLinkedHashSet();
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authentication/UserIDTestLoginModule.java`
#### Snippet
```java
            // and finally add the one that produces the desired result:
            String userID = null;
            subject.getPublicCredentials().add(new AuthInfoImpl(userID, Collections.<String, Object>emptyMap(), Collections.<Principal>emptySet()));
            return true;
        } else {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authentication/UserIDTestLoginModule.java`
#### Snippet
```java
            // and finally add the one that produces the desired result:
            String userID = null;
            subject.getPublicCredentials().add(new AuthInfoImpl(userID, Collections.<String, Object>emptyMap(), Collections.<Principal>emptySet()));
            return true;
        } else {
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
            Filter filter = plan.getFilter();
            final Set<String> relPaths = filter.getFullTextConstraint() != null ? getRelativePaths(filter.getFullTextConstraint())
                    : Collections.<String>emptySet();
            final String parent = relPaths.size() == 0 ? "" : relPaths.iterator().next();

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexNodeManager.java`
#### Snippet
```java

    private List<LuceneIndexReader> getNRTReaders() {
        return nrtIndex != null ? nrtIndex.getReaders() : Collections.<LuceneIndexReader>emptyList();
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/reader/DefaultIndexReaderFactory.java`
#### Snippet
```java
            LuceneIndexReader reader = createReader(definition, defnState, indexPath,
                    FulltextIndexConstants.INDEX_DATA_CHILD_NAME, SUGGEST_DATA_CHILD_NAME);
            return reader != null ? ImmutableList.of(reader) : Collections.<LuceneIndexReader>emptyList();
        } else {
            return createMountedReaders(definition, defnState, indexPath);
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexRootDirectory.java`
#### Snippet
```java
    public List<LocalIndexDir> getLocalIndexes(String jcrPath) throws IOException {
        List<LocalIndexDir> result = getIndexesPerPath().get(jcrPath);
        return result == null ? Collections.<LocalIndexDir>emptyList() : result;
    }

```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexRootDirectory.java`
#### Snippet
```java
        for (Map.Entry<String, Collection<LocalIndexDir>> e : pathToDirMap.asMap().entrySet()){
            List<LocalIndexDir> sortedDirs = new ArrayList<>(e.getValue());
            Collections.sort(sortedDirs, Collections.<LocalIndexDir>reverseOrder());
            result.put(e.getKey(), sortedDirs);
        }
```

### RedundantTypeArguments
Explicit type arguments can be inferred
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
    @Override
    public String checkpoint(long lifetime) {
        return checkpoint(lifetime, Collections. <String, String> emptyMap());
    }

```

## RuleId[id=NullableProblems]
### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/BlobStoreInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        int l;
        try {
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevs.java`
#### Snippet
```java

    @Override
    public Iterator<Revision> iterator() {
        return revs.values().iterator();
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Path.java`
#### Snippet
```java

    @Override
    public int compareTo(@NotNull Path other) {
        if (this == other) {
            return 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/NamePathRev.java`
#### Snippet
```java
    //---------------------------< Comparable >---------------------------------

    public int compareTo(@NotNull NamePathRev other) {
        if (this == other) {
            return 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/FormatVersion.java`
#### Snippet
```java

    @Override
    public int compareTo(@NotNull FormatVersion other) {
        checkNotNull(other);
        return ComparisonChain.start()
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/RevisionVector.java`
#### Snippet
```java

    @Override
    public Iterator<Revision> iterator() {
        return new AbstractIterator<Revision>() {
            int i = 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/PathRev.java`
#### Snippet
```java
    //---------------------------< Comparable >---------------------------------

    public int compareTo(@NotNull PathRev other) {
        if (this == other) {
            return 0;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/MemoryDiffCache.java`
#### Snippet
```java

        @Override
        public int compareTo(@NotNull MemoryDiffCache.Key other) {
            if (this == other) {
                return 0;
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ValueMap.java`
#### Snippet
```java
            @Override
            @NotNull
            public Iterator<Map.Entry<Revision, String>> iterator() {

                final Comparator<? super Revision> c = map.comparator();
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/MultiGenerationMap.java`
#### Snippet
```java

    @Override
    public void putAll(Map<? extends K, ? extends V> m) {
        throw new UnsupportedOperationException();
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/io/LazyInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) throws IOException {
        ensureOpen();
        return super.read(b, off, len);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/io/LazyInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b) throws IOException {
        ensureOpen();
        return super.read(b);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java

            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread thread = new Thread(r, createName());
                thread.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java

            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread thread = new Thread(r, createName());
                thread.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/ExtractedTextCache.java`
#### Snippet
```java
            };
            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread thread = new Thread(r, createName());
                thread.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/RecordId.java`
#### Snippet
```java

    @Override
    public int compareTo(@NotNull RecordId that) {
        checkNotNull(that);
        int diff = segmentId.compareTo(that.segmentId);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/PropertyTemplate.java`
#### Snippet
```java

    @Override
    public int compareTo(@NotNull PropertyTemplate template) {
        checkNotNull(template);
        return ComparisonChain.start()
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentStream.java`
#### Snippet
```java

    @Override
    public int read(@NotNull byte[] b, int off, int len) {
        checkNotNull(b);
        checkPositionIndexes(off, off + len, b.length);
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/RecordNumbers.java`
#### Snippet
```java
        @NotNull
        @Override
        public Iterator<Entry> iterator() {
            return Collections.emptyIterator();
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java

        @Override
        public Thread newThread(@NotNull Runnable runnable) {
            Thread thread = threadFactory.newThread(runnable);
            thread.setName(name);
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/ConfigurationParameters.java`
#### Snippet
```java
    @NotNull
    @Override
    public Set<String> keySet() {
        return options.keySet();
    }
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/ConfigurationParameters.java`
#### Snippet
```java
    @NotNull
    @Override
    public Collection<Object> values() {
        return options.values();
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/ConfigurationParameters.java`
#### Snippet
```java
     */
    @Override
    public void putAll(@NotNull Map<? extends String, ?> m) {
        throw new UnsupportedOperationException();
    }
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/ConfigurationParameters.java`
#### Snippet
```java
    @NotNull
    @Override
    public Set<Entry<String,Object>> entrySet() {
        return options.entrySet();
    }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/whiteboard/WhiteboardExecutor.java`
#### Snippet
```java

    @Override
    public void execute(@NotNull Runnable command) {
        for (Executor executor : getServices()) {
            // use the first executor to run the command
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public V replace(K key, V value) {
                return CacheLIRS.this.replace(key, value);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public V replace(K key, V value) {
                return CacheLIRS.this.replace(key, value);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public V putIfAbsent(K key, V value) {
                return CacheLIRS.this.putIfAbsent(key, value);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public boolean remove(Object key, Object value) {
                return CacheLIRS.this.remove(key, value);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public boolean replace(K key, V oldValue, V newValue) {
                return CacheLIRS.this.replace(key, oldValue, newValue);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public boolean replace(K key, V oldValue, V newValue) {
                return CacheLIRS.this.replace(key, oldValue, newValue);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public boolean replace(K key, V oldValue, V newValue) {
                return CacheLIRS.this.replace(key, oldValue, newValue);
            }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java

            @Override
            public void putAll(Map<? extends K, ? extends V> m) {
                for (Map.Entry<? extends K, ? extends V> e : m.entrySet()) {
                    put(e.getKey(), e.getValue());
```

### NullableProblems
Not annotated method overrides method annotated with @NotNull
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
        @NotNull
        @Override
        public Condition newCondition() {
            return lock.newCondition();
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java

        @Override
        public boolean tryLock(long time, @NotNull TimeUnit unit) throws InterruptedException {
            if (lock.tryLock(time, unit)) {
                holderTrace = null;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java

            @Override
            public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command, long initialDelay,
                    long delay, TimeUnit unit) {
                purge();
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            @Override
            public ScheduledFuture<?> scheduleWithFixedDelay(Runnable command, long initialDelay,
                    long delay, TimeUnit unit) {
                purge();
                return super.scheduleWithFixedDelay(command, initialDelay, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java

            @Override
            public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
                purge();
                return super.schedule(command, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java

            @Override
            public ScheduledFuture<?> schedule(Runnable command, long delay, TimeUnit unit) {
                purge();
                return super.schedule(command, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            private final AtomicLong counter = new AtomicLong();
            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread t = new Thread(r, newName());
                t.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java

            @Override
            public ScheduledFuture<?> scheduleAtFixedRate(Runnable command, long initialDelay,
                    long period, TimeUnit unit) {
                purge();
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            @Override
            public ScheduledFuture<?> scheduleAtFixedRate(Runnable command, long initialDelay,
                    long period, TimeUnit unit) {
                purge();
                return super.scheduleAtFixedRate(command, initialDelay, period, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java

            @Override
            public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
                purge();
                return super.schedule(callable, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java

            @Override
            public <V> ScheduledFuture<V> schedule(Callable<V> callable, long delay, TimeUnit unit) {
                purge();
                return super.schedule(callable, delay, unit);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
            private final Thread.UncaughtExceptionHandler handler = (t, e) -> log.warn("Error occurred in asynchronous processing ", e);
            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread thread = new Thread(r, createName());
                thread.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakStreamingIndexFile.java`
#### Snippet
```java

            @Override
            public int read(@NotNull byte[] target, int off, int len) throws IOException {
                if (available() <= 0) {
                    return -1;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakStreamingIndexFile.java`
#### Snippet
```java

            @Override
            public int read(@NotNull byte[] b, int off, int len) throws IOException {
                if (bytesLeftToRead == 0) {
                    return -1;
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/IndexHelper.java`
#### Snippet
```java
                    (t, e) -> log.warn("Error occurred in asynchronous processing ", e);
            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread thread = new Thread(r, createName());
                thread.setDaemon(true);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/TestInputStream.java`
#### Snippet
```java

    @Override
    public int read(byte[] b, int off, int len) {
        if (i < n) {
            byte[] data = new byte[Math.min(len, n - i)];
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureUtilities.java`
#### Snippet
```java

        @Override
        public void write(@NotNull byte[] bytes, int offset, int length) {
            buffer.put(bytes, offset, length);
        }
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        }

        public int read(byte b[], int off, int len) throws IOException {
            int r = super.read(b, off, len);
            reportProgress(r);
```

### NullableProblems
Not annotated parameter overrides @NotNull parameter
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        }

        public int read(byte b[]) throws IOException {
            int r = super.read(b);
            reportProgress(r);
```

## RuleId[id=IgnoreResultOfCall]
### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUtils.java`
#### Snippet
```java
        file = new File(file, id.substring(2, 4));
        file = new File(file, id.substring(4, 6));
        file.mkdirs();
        return new File(file, id);
    }
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
                LOG.trace("Pending upload upgrade absolute path " + newUpload.getAbsolutePath());

                newUpload.getParentFile().mkdirs();

                if (upload.exists()) {
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
                    File newDownload = new File(newDownloadDir,
                            download.getAbsolutePath().substring(path.getAbsolutePath().length()));
                    newDownload.getParentFile().mkdirs();
                    LOG.trace("Downloaded cache file absolute post-upgrade path {}", newDownload);

```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
        List<File> files;
        try {
            uploadCacheSpace.mkdirs();
            files = java.nio.file.Files.find(uploadCacheSpace.toPath(), Integer.MAX_VALUE, (path, basicFileAttributes) -> basicFileAttributes.isRegularFile())
                    .map(Path::toFile)
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java

                File parent = dest.getParentFile();
                parent.mkdirs();
                synchronized (this) {
                    if (tmpFile.renameTo(dest)) {
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
            } finally {
                if (tmpFile != null) {
                    tmpFile.delete();
                }
            }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java

                    if (toBeRemoved != null) {
                        toBeRemoved.delete();
                    }
                }
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
        if (!f.exists()) {
            File old = getFile(id.digest, true);
            f.getParentFile().mkdir();
            old.renameTo(f);
            f = getFile(id.digest, false);
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
            File old = getFile(id.digest, true);
            f.getParentFile().mkdir();
            old.renameTo(f);
            f = getFile(id.digest, false);
        }
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
            if (!f.exists()) {
                File old = getFile(digest, true);
                f.getParentFile().mkdir();
                old.renameTo(f);
                f = getFile(digest, false);
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                File old = getFile(digest, true);
                f.getParentFile().mkdir();
                old.renameTo(f);
                f = getFile(digest, false);
            }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
            if ((maxLastModifiedTime <= 0)
                    || FileUtils.isFileOlder(f, maxLastModifiedTime)) {
                f.delete();
                count++;
            }
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                            String name = p.getName();
                            File newName = new File(old, name);
                            p.renameTo(newName);
                        }
                    } else {
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                        }
                    } else {
                        d.renameTo(old);
                    }
                }
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
    public FileBlobStore(String dir) {
        baseDir = new File(dir);
        baseDir.mkdirs();
    }

```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                        String name = p.getName();
                        File file = new File(old, name);
                        file.delete();
                        count++;
                    }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                        count++;
                    }
                    old.delete();
                }
            }
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
        File parent = f.getParentFile();
        if (!parent.exists()) {
            parent.mkdirs();
        }
        File temp = new File(parent, f.getName() + ".temp");
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
        out.write(data);
        out.close();
        temp.renameTo(f);
    }

```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
        File f = getFile(digest, false);
        if (f.exists()) {
            file.delete();
        } else {
            File parent = f.getParentFile();
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
            File parent = f.getParentFile();
            if (!parent.exists()) {
                parent.mkdirs();
            }
            file.renameTo(f);
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                parent.mkdirs();
            }
            file.renameTo(f);
        }
        IOUtils.writeVarInt(idStream, digest.length);
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
        if (!f.exists()) {
            File old = getFile(id.digest, true);
            f.getParentFile().mkdir();
            old.renameTo(f);
            f = getFile(id.digest, false);
```

### IgnoreResultOfCall
Result of `File.renameTo()` is ignored
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
            File old = getFile(id.digest, true);
            f.getParentFile().mkdir();
            old.renameTo(f);
            f = getFile(id.digest, false);
        }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java

                    if (candTemp != null) {
                        candTemp.delete();
                    }
                }
```

### IgnoreResultOfCall
Result of `Semaphore.tryAcquire()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/CommitQueue.java`
#### Snippet
```java
        }
        try {
            s.tryAcquire(addedRevisions, suspendTimeoutMillis, TimeUnit.MILLISECONDS);
        } finally {
            synchronized (suspendedCommits) {
```

### IgnoreResultOfCall
Result of `Thread.interrupted()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java`
#### Snippet
```java
                clock.waitUntil(time);
            } catch (InterruptedException e) {
                Thread.interrupted();
                String msg = "Interrupted while waiting for _lastRev recovery to finish.";
                throw new DocumentStoreException(msg, e);
```

### IgnoreResultOfCall
Result of `Thread.interrupted()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMap.java`
#### Snippet
```java
        }
        // clear the interrupt flag, to avoid re-opening many times
        Thread.interrupted();
        if (i == 0) {
            LOG.warn("Re-opening map " + name, e);
```

### IgnoreResultOfCall
Result of `Thread.interrupted()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
                    }
                    // clear the interrupted flag, if set
                    Thread.interrupted();
                    store.close();
                } catch (Exception e) {
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
            if (oldRead != null) {
                oldRead.closeStore();
                new File(getFileName(oldReadGeneration)).delete();
            }
        }
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
        File dr = new File(dir);
        if (!dr.exists()) {
            dr.mkdirs();
        }
        if (dr.exists() && !dr.isDirectory()) {
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
            } else {
                LOG.info("Removing old generation " + oldFile.getAbsolutePath());
                oldFile.delete();
            }
            generations.remove(oldest);
```

### IgnoreResultOfCall
Result of `CountDownLatch.await()` is ignored
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/facets/ElasticInsecureFacetAsyncProvider.java`
#### Snippet
```java
        LOG.trace("Requested facets for {} - Latch count: {}", columnName, latch.getCount());
        try {
            latch.await(15, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            throw new IllegalStateException("Error while waiting for facets", e);
```

### IgnoreResultOfCall
Result of `CountDownLatch.await()` is ignored
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/facets/ElasticStatisticalFacetAsyncProvider.java`
#### Snippet
```java
            LOG.trace("Requested facets for {} - Latch count: {}", columnName, latch.getCount());
            try {
                latch.await(15, TimeUnit.SECONDS);
            } catch (InterruptedException e) {
                throw new IllegalStateException("Error while waiting for facets", e);
```

### IgnoreResultOfCall
Result of `CountDownLatch.await()` is ignored
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/facets/ElasticSecureFacetAsyncProvider.java`
#### Snippet
```java
        LOG.trace("Requested facets for {} - Latch count: {}", columnName, latch.getCount());
        try {
            latch.await(15, TimeUnit.SECONDS);
        } catch (InterruptedException e) {
            throw new IllegalStateException("Error while waiting for facets", e);
```

### IgnoreResultOfCall
Result of `Semaphore.tryAcquire()` is ignored
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/ElasticResultRowAsyncIterator.java`
#### Snippet
```java

            LOG.trace("Kicking initial search for query {}", searchReq);
            semaphore.tryAcquire();

            searchStartTime = System.currentTimeMillis();
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
            if (delete) {
                for (File f : files) {
                    f.delete();
                }
            }
```

### IgnoreResultOfCall
Result of `UUID.fromString()` is ignored
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/UUIDUtils.java`
#### Snippet
```java
    public static boolean isValidUUID(String uuid) {
        try {
            UUID.fromString(uuid);
            return true;
        } catch (IllegalArgumentException e) {
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/concurrent/ExecutorCloser.java`
#### Snippet
```java
        try {
            executorService.shutdown();
            executorService.awaitTermination(timeout, timeUnit);
        } catch (InterruptedException e) {
            LOG.error("Error while shutting down the ExecutorService", e);
```

### IgnoreResultOfCall
Result of `File.createNewFile()` is ignored
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticIndexerSupport.java`
#### Snippet
```java
            FileUtils.forceMkdir(dir);
            File infoFile = new File(dir, IndexerInfo.INDEX_METADATA_FILE_NAME);
            infoFile.createNewFile();
            Properties p = new Properties();
            p.setProperty("indexPath", indexPath);
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
            }
            for (File f : files) {
                f.delete();
            }
        }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
                for (File f : files) {
                    if (f.exists()) {
                        f.delete();
                    }
                }
```

### IgnoreResultOfCall
Result of `ImportBehavior.nameFromValue()` is ignored
in `oak-authorization-cug/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/cug/impl/CugPolicyImpl.java`
#### Snippet
```java
                  @NotNull PrincipalManager principalManager, int importBehavior,
                  @NotNull CugExclude cugExclude, @NotNull Iterable<Principal> principals, boolean immutable) {
        ImportBehavior.nameFromValue(importBehavior);
        this.oakPath = oakPath;
        this.namePathMapper = namePathMapper;
```

### IgnoreResultOfCall
Result of `Iterator.hasNext()` is ignored
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
        if (orderBy != null) {
            // this will force the rows to be read, so that the size is known
            it.hasNext();
            // we need the size, and there is no other way to get it right now
            // but we also have to take limit and offset into account
```

### IgnoreResultOfCall
Result of `OnParentVersionAction.nameFromValue()` is ignored
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/ItemDefinitionTemplate.java`
#### Snippet
```java

    public void setOnParentVersion(int onParentVersion) {
        OnParentVersionAction.nameFromValue(onParentVersion); // validate
        this.onParentVersion = onParentVersion;
    }
```

### IgnoreResultOfCall
Result of `PropertyType.nameFromValue()` is ignored
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/PropertyDefinitionTemplateImpl.java`
#### Snippet
```java
    @Override
    public void setRequiredType(int type) {
        PropertyType.nameFromValue(type); // validation
        this.requiredType = type;
    }
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/Installer.java`
#### Snippet
```java
            }
            log.info("Creating new repository home '{}'", repHome);
            home.mkdirs();

            try {
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/Installer.java`
#### Snippet
```java
        in.close();
        if (!dest.getParentFile().exists()) {
            dest.getParentFile().mkdirs();
        }
        OutputStream out = new FileOutputStream(dest);
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/ExtractedTextCache.java`
#### Snippet
```java
            executorService.shutdown();
            try {
                executorService.awaitTermination(1, TimeUnit.MINUTES);
            } catch (InterruptedException e) {
                log.warn("Interrupted", e);
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreRegistrar.java`
#### Snippet
```java
            if (cfg.hasSplitPersistence()) {
                cfg.getLogger().info("Initializing SegmentNodeStore with custom persistence [{}] and local writes", customPersistence);
                cfg.getSplitPersistenceDirectory().mkdirs();
                SegmentNodeStorePersistence rwPersistence = new TarPersistence(cfg.getSplitPersistenceDirectory());
                SegmentNodeStorePersistence persistence = new SplitPersistence(customPersistence, rwPersistence);
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
        checkState(!built, "Cannot re-use builder");
        built = true;
        directory.mkdirs();
        TarRevisions revisions = new TarRevisions(persistence);
        LOG.info("Creating file store {}", this);
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/LocalGCJournalFile.java`
#### Snippet
```java
    @Override
    public void truncate() throws IOException {
        file.delete();
    }
}
```

### IgnoreResultOfCall
Result of `BlockingQueue.offer()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/GetBlobResponseHandler.java`
#### Snippet
```java
    @Override
    protected void channelRead0(ChannelHandlerContext ctx, GetBlobResponse msg) throws Exception {
        queue.offer(msg);
    }

```

### IgnoreResultOfCall
Result of `BlockingQueue.offer()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/GetSegmentResponseHandler.java`
#### Snippet
```java
    @Override
    protected void channelRead0(ChannelHandlerContext ctx, GetSegmentResponse msg) throws Exception {
        queue.offer(msg);
    }

```

### IgnoreResultOfCall
Result of `BlockingQueue.offer()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/GetHeadResponseHandler.java`
#### Snippet
```java
    @Override
    protected void channelRead0(ChannelHandlerContext ctx, GetHeadResponse msg) throws Exception {
        queue.offer(msg);
    }

```

### IgnoreResultOfCall
Result of `InputStream.read()` is ignored
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/RemoteBlobProcessor.java`
#### Snippet
```java

        try {
            data.read();
        } catch (Exception e) {
            logger.warn("Unable to read the content for blob {}, the blob will be downloaded", blobId, e);
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/persistentcache/PersistentDiskCache.java`
#### Snippet
```java
                        File segment = segmentCacheEntry.getPath().toFile();
                        cacheSize.addAndGet(-segment.length());
                        segment.delete();
                        evictionCount.incrementAndGet();
                    } else {
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/persistentcache/PersistentDiskCache.java`
#### Snippet
```java
        this.tempFilesCleanupWaitTimeMs = tempFilesCleanupWaitTimeMs;
        if (!directory.exists()) {
            directory.mkdirs();
        }

```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/SegmentPropertyIndexEditorProvider.java`
#### Snippet
```java
    private NodeBuilder createRootBuilder() {
        try {
            indexStoreDir.mkdirs();
            fixture = NodeStoreFixtureProvider.create(createSegmentOptions(indexStoreDir), false);
        } catch (Exception e) {
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
                List<String> data = getMetadata(fixture);
                File outDir = opts.getOptionBean(DataStoreOptions.class).getOutDir();
                outDir.mkdirs();
                FileIOUtils.writeStrings(data.iterator(), new File(outDir, "metadata"), false);
            } else {
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractor.java`
#### Snippet
```java
                executorService.shutdown();
                //Wait long enough
                executorService.awaitTermination(10, TimeUnit.DAYS);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDiff.java`
#### Snippet
```java

    static void extractAll(String extractFile, String extractTargetDirectory) {
        new File(extractTargetDirectory).mkdirs();
        JsonObject indexDefs = parseIndexDefinitions(extractFile);
        removeUninterestingIndexProperties(indexDefs);
```

### IgnoreResultOfCall
Result of `BlockingQueue.remove()` is ignored
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/BackgroundObserver.java`
#### Snippet
```java

            //TODO - Support for merging ChangeSet for external changes
            queue.remove(last);
        }

```

### IgnoreResultOfCall
Result of `BlockingQueue.remove()` is ignored
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/BackgroundObserver.java`
#### Snippet
```java
            // when the change can't be added to the queue because it's full
            // remove the last entry and add an explicit overflow entry instead.
            queue.remove(last);

            // by removing the last entry we have to drop the possible
```

### IgnoreResultOfCall
Result of `BlockingQueue.offer()` is ignored
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/BackgroundObserver.java`
#### Snippet
```java
            // no longer represents an individual commit
            change = new ContentChange(root, CommitInfo.EMPTY_EXTERNAL);
            queue.offer(change);
        }
        // Keep track of the last change added, so we can do the
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java
            try {
                writer.close();
                tmpFile.delete();
                tmpFile = null;
                writer = null;
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentFactory.java`
#### Snippet
```java
    private void createDirectoryIfMissing(File directory) {
        if (!directory.exists()) {
            directory.mkdirs();
        }
    }
```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentTarFactory.java`
#### Snippet
```java
    private void createDirectoryIfMissing(File directory) {
        if (!directory.exists()) {
            directory.mkdirs();
        }
    }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentAzureFactory.java`
#### Snippet
```java
            throw new IOException(e);
        } finally {
            tmpDir.delete();
        }
    }
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/LuceneFacetSearchTest.java`
#### Snippet
```java
        super.afterSuite();
        executorService.shutdown();
        executorService.awaitTermination(1, TimeUnit.MINUTES);
        FileUtils.deleteDirectory(indexCopierDir);
    }
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/LuceneFacetSearchTest.java`
#### Snippet
```java
            throw new RuntimeException(e);
        }
        createdFolder.delete();
        createdFolder.mkdir();
        return createdFolder;
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/LuceneFacetSearchTest.java`
#### Snippet
```java
        }
        createdFolder.delete();
        createdFolder.mkdir();
        return createdFolder;
    }
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
        if (executorService != null){
            executorService.shutdown();
            executorService.awaitTermination(1, TimeUnit.MINUTES);
        }

```

### IgnoreResultOfCall
Result of `File.mkdirs()` is ignored
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/DefaultDirectoryFactory.java`
#### Snippet
```java
            // try {
            File file = new File(path);
            file.mkdirs();
            // TODO: no locking used
            // --> using the FS backend for the index is in any case
```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileSplitter.java`
#### Snippet
```java
        if (deleteOriginal) {
            LOG.info("removing original flat file {} after splitting into {} files", flatFile.getAbsolutePath(), splitFlatFiles);
            flatFile.delete();
        }

```

### IgnoreResultOfCall
Result of `File.delete()` is ignored
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java
            throw new RuntimeException(e);
        }
        createdFolder.delete();
        createdFolder.mkdir();
        return createdFolder;
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java
        }
        createdFolder.delete();
        createdFolder.mkdir();
        return createdFolder;
    }
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java
    protected void afterSuite() throws Exception {
        executorService.shutdown();
        executorService.awaitTermination(1, TimeUnit.MINUTES);
        FileUtils.deleteDirectory(indexCopierDir);
    }
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ObservationTest.java`
#### Snippet
```java
            }
            service.shutdown();
            service.awaitTermination(1, TimeUnit.MINUTES);
        }
    }
```

### IgnoreResultOfCall
Result of `ExecutorService.awaitTermination()` is ignored
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureRepositoryLock.java`
#### Snippet
```java
        executor.shutdown();
        try {
            executor.awaitTermination(1, TimeUnit.MINUTES);
        } catch (InterruptedException e) {
            throw new IOException(e);
```

### IgnoreResultOfCall
Result of `File.mkdir()` is ignored
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentCopy.java`
#### Snippet
```java

                    File directory = new File(destination);
                    directory.mkdir();

                    for (Future<Segment> future : futures) {
```

## RuleId[id=RedundantMethodOverride]
### RedundantMethodOverride
Method `remove()` is identical to its super method
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java`
#### Snippet
```java

                    @Override
                    public void remove() {
                        throw new UnsupportedOperationException("remove");
                    }
```

### RedundantMethodOverride
Method `requiresFullTextIndex()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/NotFullTextSearchImpl.java`
#### Snippet
```java

    @Override
    public boolean requiresFullTextIndex() {
        return true;
    }
```

### RedundantMethodOverride
Method `isName()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        
        @Override
        boolean isName() {
            return false;
        }
```

### RedundantMethodOverride
Method `isName()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        
        @Override
        boolean isName() {
            return false;
        }
```

### RedundantMethodOverride
Method `isName()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java

        @Override
        boolean isName() {
            return false;
        }
```

### RedundantMethodOverride
Method `optimize()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        
        @Override
        Expression optimize() {
            return this;
        }
```

### RedundantMethodOverride
Method `isName()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java

        @Override
        boolean isName() {
            return false;
        }
```

### RedundantMethodOverride
Method `isCondition()` is identical to its super method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
    
        @Override
        boolean isCondition() {
            return false;
        }
```

### RedundantMethodOverride
Method `getNamePathMapper()` is identical to its super method
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java
            @NotNull
            @Override
            protected NamePathMapper getNamePathMapper() {
                return NamePathMapper.DEFAULT;
            }
```

### RedundantMethodOverride
Method `getMembershipPrincipals()` is identical to its super method
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/principal/EmptyPrincipalProvider.java`
#### Snippet
```java
    @NotNull
    @Override
    public Set<Principal> getMembershipPrincipals(@NotNull Principal principal) {
        return Collections.emptySet();
    }
```

### RedundantMethodOverride
Method `equals()` is identical to its super method
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/Type.java`
#### Snippet
```java

    @Override
    public boolean equals(Object other) {
        return this == other;
    }
```

### RedundantMethodOverride
Method `getRepositoryInitializer()` is identical to its super method
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/readonly/ReadOnlyAuthorizationConfiguration.java`
#### Snippet
```java
    @NotNull
    @Override
    public RepositoryInitializer getRepositoryInitializer() {
        return RepositoryInitializer.DEFAULT;
    }
```

### RedundantMethodOverride
Method `getWorkspaceInitializer()` is identical to its super method
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/readonly/ReadOnlyAuthorizationConfiguration.java`
#### Snippet
```java
    @NotNull
    @Override
    public WorkspaceInitializer getWorkspaceInitializer() {
        return WorkspaceInitializer.DEFAULT;
    }
```

### RedundantMethodOverride
Method `getContext()` is identical to its super method
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/readonly/ReadOnlyAuthorizationConfiguration.java`
#### Snippet
```java
    @NotNull
    @Override
    public Context getContext() {
        return Context.DEFAULT;
    }
```

### RedundantMethodOverride
Method `enter()` is identical to its super method
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CrossMountReferenceValidator.java`
#### Snippet
```java

    @Override
    public void enter(NodeState before, NodeState after)
            throws CommitFailedException {
    }
```

### RedundantMethodOverride
Method `getCommitHooks()` is identical to its super method
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/PrincipalBasedAuthorizationConfiguration.java`
#### Snippet
```java
    @NotNull
    @Override
    public List<? extends CommitHook> getCommitHooks(@NotNull String workspaceName) {
        return Collections.emptyList();
    }
```

### RedundantMethodOverride
Method `afterSuite()` is identical to its super method
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java

    @Override
    protected void afterSuite() throws Exception {

    }
```

## RuleId[id=IntegerMultiplicationImplicitCastToLong]
### IntegerMultiplicationImplicitCastToLong
(revisions.length + 1 \>\> 1) \<\< 3: integer shift implicitly cast to long
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/RevisionVector.java`
#### Snippet
```java

    private long revisionArrayMemory() {
        return 16 + ((revisions.length + 1 >> 1) << 3);
    }

```

### IntegerMultiplicationImplicitCastToLong
revisions.length \* Revision.SHALLOW_MEMORY_USAGE: integer multiplication implicitly cast to long
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/RevisionVector.java`
#### Snippet
```java
        long size = 24 // shallow size
                + revisionArrayMemory()
                + revisions.length * Revision.SHALLOW_MEMORY_USAGE;
        if (size > Integer.MAX_VALUE) {
            log.debug("Estimated memory footprint larger than Integer.MAX_VALUE: {}.", size);
```

### IntegerMultiplicationImplicitCastToLong
store.getMaxBackOffMillis() \* MAX_LOCK_TRY_TIME_MULTIPLIER: integer multiplication implicitly cast to long
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBranch.java`
#### Snippet
```java
        this.branchState = new Unmodified(checkNotNull(base));
        this.maximumBackoff = Math.max((long) store.getMaxBackOffMillis(), MIN_BACKOFF);
        this.maxLockTryTimeMS = (long) (store.getMaxBackOffMillis() * MAX_LOCK_TRY_TIME_MULTIPLIER);
        this.mergeLock = mergeLock;
        this.updateLimit = store.getUpdateLimit();
```

### IntegerMultiplicationImplicitCastToLong
s.length() \* 2: integer multiplication implicitly cast to long
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/StringSizeEstimator.java`
#### Snippet
```java
     */
    public static long estimatedSizeOf(String s) {
        return (s.length() * 2) + OBJ_OVERHEAD;
    }

```

### IntegerMultiplicationImplicitCastToLong
100 \* tries: integer multiplication implicitly cast to long
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
            if (bucketExists) break;
            try {
                Thread.sleep(100 * tries);
            }
            catch (InterruptedException e) { }
```

### IntegerMultiplicationImplicitCastToLong
expirySeconds \* 1000: integer multiplication implicitly cast to long
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
        try {
            final Date expiration = new Date();
            expiration.setTime(expiration.getTime() + expirySeconds * 1000);

            GeneratePresignedUrlRequest request = s3ReqDecorator.decorate(new GeneratePresignedUrlRequest(bucket, key)
```

### IntegerMultiplicationImplicitCastToLong
intervalSec \* 1000: integer multiplication implicitly cast to long
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentStoreMigrator.java`
#### Snippet
```java
            }
            try {
                Thread.sleep(intervalSec * 1000);
            } catch (InterruptedException e) {
                log.error("Interrupted", e);
```

### IntegerMultiplicationImplicitCastToLong
resolution \* 10: integer multiplication implicitly cast to long
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/ApproximateCounter.java`
#### Snippet
```java
            return -oldCount;
        }
        if (resolution <= 10 || oldCount < resolution * 10) {
            return calculatedOffset;
        }
```

### IntegerMultiplicationImplicitCastToLong
EXTRACTION_TIMEOUT_SECONDS \* 1000: integer multiplication implicitly cast to long
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/ExtractedTextCache.java`
#### Snippet
```java
    private volatile ExecutorService executorService;
    private volatile int timeoutCount;
    private long extractionTimeoutMillis = EXTRACTION_TIMEOUT_SECONDS * 1000;

    public ExtractedTextCache(long maxWeight, long expiryTimeInSecs){
```

### IntegerMultiplicationImplicitCastToLong
builder.getMaxFileSize() \* MB: integer multiplication implicitly cast to long
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStore.java`
#### Snippet
```java
                .withRemoteStoreMonitor(remoteStoreMonitor)
                .withFileStoreMonitor(stats)
                .withMaxFileSize(builder.getMaxFileSize() * MB)
                .withPersistence(builder.getPersistence())
                .withReaderCountStats(readerCountStats)
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ServerCommand.java`
#### Snippet
```java
        if (fix.startsWith(OakFixture.OAK_MEMORY)) {
            if (OakFixture.OAK_MEMORY_NS.equals(fix)) {
                oakFixture = OakFixture.getMemoryNS(cacheSize * MB);
            } else {
                oakFixture = OakFixture.getMemory(cacheSize * MB);
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ServerCommand.java`
#### Snippet
```java
                oakFixture = OakFixture.getMemoryNS(cacheSize * MB);
            } else {
                oakFixture = OakFixture.getMemory(cacheSize * MB);
            }
        } else if (fix.startsWith(OakFixture.OAK_MONGO)) {
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ServerCommand.java`
#### Snippet
```java
                        host.value(options), port.value(options),
                        db, false,
                        cacheSize * MB, throttlingEnabled.value(options));
            } else {
                oakFixture = OakFixture.getMongo(
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ServerCommand.java`
#### Snippet
```java
                oakFixture = OakFixture.getMongo(
                        host.value(options), port.value(options),
                        db, false, cacheSize * MB, throttlingEnabled.value(options));
            }
        } else if (fix.equals(OakFixture.OAK_SEGMENT_TAR)) {
```

### IntegerMultiplicationImplicitCastToLong
page \* LIMIT: integer multiplication implicitly cast to long
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/PaginationEnabledSearcher.java`
#### Snippet
```java
            Query query = getQuery(qm, context);
            query.setLimit(LIMIT);
            query.setOffset(page * LIMIT);

            iterate(query);
```

### IntegerMultiplicationImplicitCastToLong
24 \* COUNT: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ISO8601FormatterTest.java`
#### Snippet
```java
            }
        }
        if (chars != 24 * COUNT && chars != 28 * COUNT) {
            System.err.println("formatted strings did not have the expected length: " + chars);
        }
```

### IntegerMultiplicationImplicitCastToLong
28 \* COUNT: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ISO8601FormatterTest.java`
#### Snippet
```java
            }
        }
        if (chars != 24 * COUNT && chars != 28 * COUNT) {
            System.err.println("formatted strings did not have the expected length: " + chars);
        }
```

### IntegerMultiplicationImplicitCastToLong
numNodes \* 1000: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentCreateNodesTest.java`
#### Snippet
```java
                time = System.currentTimeMillis() - time;
                if (this == writer && VERBOSE) {
                    long perSecond = numNodes * 1000 / time;
                    System.out.println("Created " + numNodes + " in " + time + " ms. (" + perSecond + " nodes/sec)");
                }
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
        RepositoryFixture[] allFixtures = new RepositoryFixture[]{
                new JackrabbitRepositoryFixture(benchmarkOptions.getBase().value(options), cacheSize),
                OakRepositoryFixture.getMemoryNS(cacheSize * MB),
                OakRepositoryFixture.getMongo(uri, benchmarkOptions.getDropDBAfterTest().value(options),
                        cacheSize * MB, benchmarkOptions.isThrottlingEnabled().value(options)),
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                OakRepositoryFixture.getMemoryNS(cacheSize * MB),
                OakRepositoryFixture.getMongo(uri, benchmarkOptions.getDropDBAfterTest().value(options),
                        cacheSize * MB, benchmarkOptions.isThrottlingEnabled().value(options)),
                OakRepositoryFixture.getMongoWithDS(uri,
                        benchmarkOptions.getDropDBAfterTest().value(options),
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                OakRepositoryFixture.getMongoWithDS(uri,
                        benchmarkOptions.getDropDBAfterTest().value(options),
                        cacheSize * MB,
                        benchmarkOptions.getBase().value(options),
                        benchmarkOptions.getFdsCache().value(options), benchmarkOptions.isThrottlingEnabled().value(options)),
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                OakRepositoryFixture.getMongoNS(uri,
                        benchmarkOptions.getDropDBAfterTest().value(options),
                        cacheSize * MB, benchmarkOptions.isThrottlingEnabled().value(options)),
                OakRepositoryFixture.getSegmentTar(benchmarkOptions.getBase().value(options), 256, cacheSize,
                        benchmarkOptions.getMmap().value(options), benchmarkOptions.getBinariesInlineThreshold().value(options)),
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                        benchmarkOptions.getRdbjdbcuser().value(options),
                        benchmarkOptions.getRdbjdbcpasswd().value(options), benchmarkOptions.getRdbjdbctableprefix().value(options),
                        benchmarkOptions.getDropDBAfterTest().value(options), cacheSize * MB, benchmarkOptions.getVgcMaxAge().value(options)),
                OakRepositoryFixture.getRDBWithDS(benchmarkOptions.getRdbjdbcuri().value(options),
                        benchmarkOptions.getRdbjdbcuser().value(options),
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                        benchmarkOptions.getRdbjdbcuser().value(options),
                        benchmarkOptions.getRdbjdbcpasswd().value(options), benchmarkOptions.getRdbjdbctableprefix().value(options),
                        benchmarkOptions.getDropDBAfterTest().value(options), cacheSize * MB, benchmarkOptions.getBase().value(options),
                        benchmarkOptions.getFdsCache().value(options), benchmarkOptions.getVgcMaxAge().value(options)),
                OakRepositoryFixture.getCompositeStore(benchmarkOptions.getBase().value(options), 256, cacheSize,
```

### IntegerMultiplicationImplicitCastToLong
cacheSize \* MB: integer multiplication implicitly cast to long
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                        benchmarkOptions.getMmap().value(options), benchmarkOptions.getBinariesInlineThreshold().value(options)),
                OakRepositoryFixture.getCompositeMemoryStore(),
                OakRepositoryFixture.getCompositeMongoStore(uri, cacheSize * MB,
                        benchmarkOptions.getDropDBAfterTest().value(options), benchmarkOptions.isThrottlingEnabled().value(options))
        };
```

## RuleId[id=UNUSED_IMPORT]
### UNUSED_IMPORT
Unused import `import javax.management.openmbean.CompositeData;`
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/CheckpointMBean.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.api.jmx;

import javax.management.openmbean.CompositeData;
import javax.management.openmbean.TabularData;

```

### UNUSED_IMPORT
Unused import `import javax.management.openmbean.TabularData;`
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/CopyOnWriteStoreMBean.java`
#### Snippet
```java
import org.osgi.annotation.versioning.ProviderType;

import javax.management.openmbean.TabularData;

/**
```

### UNUSED_IMPORT
Unused import `import java.util.HashSet;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
import javax.jcr.query.QueryResult;
import javax.jcr.security.Privilege;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
```

### UNUSED_IMPORT
Unused import `import java.util.Collection;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReadDeepTreeTest.java`
#### Snippet
```java
import java.security.Principal;
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
```

### UNUSED_IMPORT
Unused import `import java.util.HashSet;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReadDeepTreeTest.java`
#### Snippet
```java
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
```

### UNUSED_IMPORT
Unused import `import java.util.Set;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReadDeepTreeTest.java`
#### Snippet
```java
import java.util.HashSet;
import java.util.List;
import java.util.Set;

/**
```

### UNUSED_IMPORT
Unused import `import java.util.List;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/util/OakIndexUtils.java`
#### Snippet
```java

import java.util.Arrays;
import java.util.List;
import java.util.Map;

```

### UNUSED_IMPORT
Unused import `import java.util.Map;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/util/OakIndexUtils.java`
#### Snippet
```java
import java.util.Arrays;
import java.util.List;
import java.util.Map;

/**
```

### UNUSED_IMPORT
Unused import `import static org.apache.jackrabbit.oak.commons.IOUtils.closeQuietly;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/run/Main.java`
#### Snippet
```java

import static java.util.Arrays.copyOfRange;
import static org.apache.jackrabbit.oak.commons.IOUtils.closeQuietly;

public final class Main {
```

### UNUSED_IMPORT
Unused import `import java.util.ArrayList;`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilityRunner.java`
#### Snippet
```java
import java.io.IOException;
import java.io.PrintStream;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
```

### UNUSED_IMPORT
Unused import `import java.io.IOException;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Files;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Path;
import java.util.HashMap;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Path;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Path;
import java.util.HashMap;
import java.util.Iterator;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Path;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Path;
import java.util.Iterator;
import java.util.List;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Files;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
import java.io.InputStream;
import java.io.RandomAccessFile;
import java.nio.file.Files;
import java.nio.file.Path;
import java.util.ArrayList;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Path;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
import java.io.RandomAccessFile;
import java.nio.file.Files;
import java.nio.file.Path;
import java.util.ArrayList;
import java.util.Iterator;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Files;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java
import java.io.InputStream;
import java.lang.ref.WeakReference;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Path;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java
import java.lang.ref.WeakReference;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.AbstractMap;
```

### UNUSED_IMPORT
Unused import `import java.nio.file.Paths;`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.util.AbstractMap;
import java.util.ArrayList;
```

### UNUSED_IMPORT
Unused import `import java.util.ArrayList;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/BranchNodeStore.java`
#### Snippet
```java
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;
```

### UNUSED_IMPORT
Unused import `import java.util.stream.Collectors;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/BranchNodeStore.java`
#### Snippet
```java
import java.util.UUID;
import java.util.concurrent.TimeUnit;
import java.util.stream.Collectors;
import java.util.stream.StreamSupport;
import static org.apache.jackrabbit.guava.common.collect.Iterables.addAll;
```

### UNUSED_IMPORT
Unused import `import java.util.stream.StreamSupport;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/BranchNodeStore.java`
#### Snippet
```java
import java.util.concurrent.TimeUnit;
import java.util.stream.Collectors;
import java.util.stream.StreamSupport;
import static org.apache.jackrabbit.guava.common.collect.Iterables.addAll;
import static org.apache.jackrabbit.guava.common.collect.Lists.newArrayList;
```

### UNUSED_IMPORT
Unused import `import static java.util.stream.Collectors.toList;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/BranchNodeStore.java`
#### Snippet
```java
import static java.util.Collections.emptyMap;
import static java.util.Collections.singletonMap;
import static java.util.stream.Collectors.toList;
import static java.util.stream.StreamSupport.stream;

```

### UNUSED_IMPORT
Unused import `import static java.util.stream.StreamSupport.stream;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/BranchNodeStore.java`
#### Snippet
```java
import static java.util.Collections.singletonMap;
import static java.util.stream.Collectors.toList;
import static java.util.stream.StreamSupport.stream;

public class BranchNodeStore implements NodeStore, Observable {
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexMBeanRegistration.java`
#### Snippet
```java

import org.apache.jackrabbit.guava.common.collect.Lists;
import org.apache.jackrabbit.oak.spi.whiteboard.WhiteboardUtils;

public class IndexMBeanRegistration implements Registration {
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.spi.state.ChildNodeEntry;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexPathServiceImpl.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.spi.query.IndexRow;
import org.apache.jackrabbit.oak.spi.query.QueryIndex;
import org.apache.jackrabbit.oak.spi.state.ChildNodeEntry;
import org.apache.jackrabbit.oak.spi.state.NodeState;
import org.apache.jackrabbit.oak.spi.state.NodeStateUtils;
```

### UNUSED_IMPORT
Unused import `import java.util.Optional;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
import java.util.Collections;
import java.util.List;
import java.util.Optional;
import java.util.Set;
import java.util.concurrent.TimeUnit;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.query.index.FilterImpl;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/plan/SelectorExecutionPlan.java`
#### Snippet
```java

import org.apache.jackrabbit.oak.query.ast.SelectorImpl;
import org.apache.jackrabbit.oak.query.index.FilterImpl;
import org.apache.jackrabbit.oak.spi.query.QueryIndex;
import org.apache.jackrabbit.oak.spi.query.QueryIndex.AdvancedQueryIndex;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.spi.query.QueryIndex.AdvancedQueryIndex;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/plan/SelectorExecutionPlan.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.query.index.FilterImpl;
import org.apache.jackrabbit.oak.spi.query.QueryIndex;
import org.apache.jackrabbit.oak.spi.query.QueryIndex.AdvancedQueryIndex;
import org.apache.jackrabbit.oak.spi.query.QueryIndex.IndexPlan;

```

### UNUSED_IMPORT
Unused import `import java.util.Iterator;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/ChildOrderDiff.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.security.authorization.permission;

import java.util.Iterator;
import java.util.Set;

```

### UNUSED_IMPORT
Unused import `import static org.apache.jackrabbit.oak.api.CommitFailedException.ACCESS;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/MoveAwarePermissionValidator.java`
#### Snippet
```java
import org.jetbrains.annotations.Nullable;

import static org.apache.jackrabbit.oak.api.CommitFailedException.ACCESS;

public class MoveAwarePermissionValidator extends PermissionValidator {
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.api.Type;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/query/ResultRowToAuthorizable.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.api.Root;
import org.apache.jackrabbit.oak.api.Tree;
import org.apache.jackrabbit.oak.api.Type;
import org.apache.jackrabbit.oak.security.user.UserManagerImpl;
import org.apache.jackrabbit.oak.spi.query.QueryConstants;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.spi.query.QueryConstants;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/query/ResultRowToAuthorizable.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.api.Type;
import org.apache.jackrabbit.oak.security.user.UserManagerImpl;
import org.apache.jackrabbit.oak.spi.query.QueryConstants;
import org.apache.jackrabbit.oak.spi.security.user.AuthorizableType;
import org.apache.jackrabbit.oak.spi.security.user.util.UserUtil;
```

### UNUSED_IMPORT
Unused import `import java.io.IOException;`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexEditorContext.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.plugins.index.lucene;

import java.io.IOException;

import org.apache.jackrabbit.oak.plugins.index.IndexUpdateCallback;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.api.Type;`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneIndexDefinitionBuilder.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.plugins.index.lucene.util;

import org.apache.jackrabbit.oak.api.Type;
import org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexConstants;
import org.apache.jackrabbit.oak.plugins.index.search.FulltextIndexConstants;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexConstants;`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneIndexDefinitionBuilder.java`
#### Snippet
```java

import org.apache.jackrabbit.oak.api.Type;
import org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexConstants;
import org.apache.jackrabbit.oak.plugins.index.search.FulltextIndexConstants;
import org.apache.jackrabbit.oak.plugins.index.search.util.IndexDefinitionBuilder;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.index.search.FulltextIndexConstants;`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneIndexDefinitionBuilder.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.api.Type;
import org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexConstants;
import org.apache.jackrabbit.oak.plugins.index.search.FulltextIndexConstants;
import org.apache.jackrabbit.oak.plugins.index.search.util.IndexDefinitionBuilder;
import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
```

### UNUSED_IMPORT
Unused import `import java.util.Arrays;`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneIndexDefinitionBuilder.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.spi.state.NodeBuilder;

import java.util.Arrays;

import static org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexConstants.TYPE_LUCENE;
```

### UNUSED_IMPORT
Unused import `import java.util.zip.ZipInputStream;`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ThreadDumpCommand.java`
#### Snippet
```java
import java.util.zip.GZIPInputStream;
import java.util.zip.ZipException;
import java.util.zip.ZipInputStream;

import joptsimple.OptionParser;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexEditorProvider;`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldIndexVersion.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.plugins.index.IndexUpdateProvider;
import org.apache.jackrabbit.oak.plugins.index.counter.NodeCounterEditorProvider;
import org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexEditorProvider;
import org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexEditorProvider;
import org.apache.jackrabbit.oak.plugins.index.reference.ReferenceEditorProvider;
```

### UNUSED_IMPORT
Unused import `import java.util.UUID;`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/BlobStoreFixtureProvider.java`
#### Snippet
```java
import java.util.Map;
import java.util.Properties;
import java.util.UUID;

import org.apache.jackrabbit.guava.common.collect.Maps;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.index.search.ReindexOperations;`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticIndexImporter.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.api.CommitFailedException;
import org.apache.jackrabbit.oak.plugins.index.importer.IndexImporterProvider;
import org.apache.jackrabbit.oak.plugins.index.search.ReindexOperations;
import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
import org.apache.jackrabbit.oak.spi.state.NodeState;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.api.stats.RepositoryStatistics;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java

import org.apache.jackrabbit.guava.common.io.Closer;
import org.apache.jackrabbit.api.stats.RepositoryStatistics;
import org.apache.jackrabbit.api.stats.TimeSeries;
import org.apache.jackrabbit.oak.osgi.OsgiUtil;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.api.stats.TimeSeries;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java
import org.apache.jackrabbit.guava.common.io.Closer;
import org.apache.jackrabbit.api.stats.RepositoryStatistics;
import org.apache.jackrabbit.api.stats.TimeSeries;
import org.apache.jackrabbit.oak.osgi.OsgiUtil;
import org.apache.jackrabbit.oak.osgi.OsgiWhiteboard;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.stats.CounterStats;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.spi.whiteboard.Registration;
import org.apache.jackrabbit.oak.spi.whiteboard.Whiteboard;
import org.apache.jackrabbit.oak.stats.CounterStats;
import org.apache.jackrabbit.oak.stats.HistogramStats;
import org.apache.jackrabbit.oak.stats.MeterStats;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.stats.HistogramStats;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.spi.whiteboard.Whiteboard;
import org.apache.jackrabbit.oak.stats.CounterStats;
import org.apache.jackrabbit.oak.stats.HistogramStats;
import org.apache.jackrabbit.oak.stats.MeterStats;
import org.apache.jackrabbit.oak.stats.StatisticsProvider;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.stats.MeterStats;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.stats.CounterStats;
import org.apache.jackrabbit.oak.stats.HistogramStats;
import org.apache.jackrabbit.oak.stats.MeterStats;
import org.apache.jackrabbit.oak.stats.StatisticsProvider;
import org.apache.jackrabbit.oak.stats.StatsOptions;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.stats.StatsOptions;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.stats.MeterStats;
import org.apache.jackrabbit.oak.stats.StatisticsProvider;
import org.apache.jackrabbit.oak.stats.StatsOptions;
import org.apache.jackrabbit.oak.stats.TimerStats;
import org.osgi.framework.BundleContext;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.stats.TimerStats;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.stats.StatisticsProvider;
import org.apache.jackrabbit.oak.stats.StatsOptions;
import org.apache.jackrabbit.oak.stats.TimerStats;
import org.osgi.framework.BundleContext;
import org.osgi.service.component.ComponentContext;
```

### UNUSED_IMPORT
Unused import `import java.util.concurrent.TimeUnit;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/cancel/ConditionCanceller.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.segment.file.cancel;

import java.util.concurrent.TimeUnit;
import java.util.function.BooleanSupplier;

```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/proc/CommitNode.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.api.PropertyState;
import org.apache.jackrabbit.oak.api.Type;
import org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState;
import org.apache.jackrabbit.oak.plugins.memory.MemoryChildNodeEntry;
import org.apache.jackrabbit.oak.plugins.memory.PropertyStates;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.spi.state.NodeState;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/proc/CommitNode.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.segment.file.proc.Proc.Backend.Commit;
import org.apache.jackrabbit.oak.spi.state.ChildNodeEntry;
import org.apache.jackrabbit.oak.spi.state.NodeState;
import org.jetbrains.annotations.NotNull;

```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.segment.file.tar.index.IndexEntry;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/GCGeneration.java`
#### Snippet
```java

import org.apache.jackrabbit.guava.common.base.Objects;
import org.apache.jackrabbit.oak.segment.file.tar.index.IndexEntry;
import org.apache.jackrabbit.oak.segment.spi.persistence.SegmentArchiveEntry;
import org.jetbrains.annotations.NotNull;
```

### UNUSED_IMPORT
Unused import `import java.util.concurrent.Callable;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveWriter.java`
#### Snippet
```java

import java.io.IOException;
import java.util.concurrent.Callable;
import java.util.function.BiConsumer;

```

### UNUSED_IMPORT
Unused import `import java.util.function.BiConsumer;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveWriter.java`
#### Snippet
```java
import java.io.IOException;
import java.util.concurrent.Callable;
import java.util.function.BiConsumer;

import org.apache.jackrabbit.oak.commons.Buffer;
```

### UNUSED_IMPORT
Unused import `import java.io.IOException;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/StandbyDiff.java`
#### Snippet
```java
import static org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState.EMPTY_NODE;

import java.io.IOException;
import java.io.InputStream;

```

### UNUSED_IMPORT
Unused import `import java.io.InputStream;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/StandbyDiff.java`
#### Snippet
```java

import java.io.IOException;
import java.io.InputStream;

import org.apache.jackrabbit.guava.common.base.Supplier;
```

### UNUSED_IMPORT
Unused import `import io.netty.handler.codec.marshalling.DefaultMarshallerProvider;`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/store/CommunicationObserver.java`
#### Snippet
```java
import javax.management.StandardMBean;

import io.netty.handler.codec.marshalling.DefaultMarshallerProvider;
import org.apache.jackrabbit.oak.segment.standby.jmx.ObservablePartnerMBean;
import org.apache.jackrabbit.oak.segment.standby.jmx.StandbyStatusMBean;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.memory.MemoryNodeBuilder;`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeBuilder.java`
#### Snippet
```java
import org.apache.jackrabbit.oak.commons.PathUtils;
import org.apache.jackrabbit.oak.plugins.memory.EmptyNodeState;
import org.apache.jackrabbit.oak.plugins.memory.MemoryNodeBuilder;
import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
import org.apache.jackrabbit.oak.spi.state.NodeState;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.commons.PathUtils;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ExternalChange.java`
#### Snippet
```java
import java.util.function.Consumer;

import org.apache.jackrabbit.oak.commons.PathUtils;
import org.apache.jackrabbit.oak.commons.sort.StringSort;
import org.apache.jackrabbit.oak.plugins.document.util.Utils;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.document.util.Utils;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/PathComparator.java`
#### Snippet
```java
import java.util.Comparator;

import org.apache.jackrabbit.oak.plugins.document.util.Utils;

/**
```

### UNUSED_IMPORT
Unused import `import java.util.Arrays;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.plugins.document.mongo;

import java.util.Arrays;
import java.util.Set;
import java.util.stream.Collectors;
```

### UNUSED_IMPORT
Unused import `import java.util.stream.Collectors;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
import java.util.Arrays;
import java.util.Set;
import java.util.stream.Collectors;

import org.apache.jackrabbit.guava.common.collect.Sets;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.plugins.document.DocumentStore;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/package-info.java`
#### Snippet
```java
package org.apache.jackrabbit.oak.plugins.document.rdb;

import org.apache.jackrabbit.oak.plugins.document.DocumentStore;
import org.apache.jackrabbit.oak.spi.blob.BlobStore;

```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.spi.blob.BlobStore;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/package-info.java`
#### Snippet
```java

import org.apache.jackrabbit.oak.plugins.document.DocumentStore;
import org.apache.jackrabbit.oak.spi.blob.BlobStore;


```

### UNUSED_IMPORT
Unused import `import java.util.Collection;`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/json/JsonSerializer.java`
#### Snippet
```java
import static org.apache.jackrabbit.oak.api.Type.STRING;

import java.util.Collection;
import java.util.Collections;
import java.util.List;
```

### UNUSED_IMPORT
Unused import `import org.apache.jackrabbit.oak.commons.PathUtils;`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/nodestate/MetadataExposingNodeState.java`
#### Snippet
```java

import org.apache.jackrabbit.oak.api.PropertyState;
import org.apache.jackrabbit.oak.commons.PathUtils;
import org.apache.jackrabbit.oak.plugins.document.AbstractDocumentNodeState;
import org.apache.jackrabbit.oak.plugins.migration.AbstractDecoratedNodeState;
```

## RuleId[id=MismatchedCollectionQueryUpdate]
### MismatchedCollectionQueryUpdate
Contents of collection `available` are updated, but never queried
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
        // use a greedy algorithm
        SourceImpl result = null;
        Set<SourceImpl> available = new HashSet<SourceImpl>();
        // the query is only slow if all possible join orders are slow
        // (in theory, due to using the greedy algorithm, a query might be considered
```

### MismatchedCollectionQueryUpdate
Contents of collection `throwables` are updated, but never queried
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MergeRunner.java`
#### Snippet
```java
    private final Comparator<NodeStateHolder> comparator;
    private final BlockingQueue<File> sortedFiles;
    private final ConcurrentLinkedQueue<Throwable> throwables;

    /**
```

### MismatchedCollectionQueryUpdate
Contents of collection `indexerPaths` are updated, but never queried
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/DocumentStoreIndexerBase.java`
#### Snippet
```java
    protected List<NodeStateIndexerProvider> indexerProviders;
    protected final IndexerSupport indexerSupport;
    private final Set<String> indexerPaths = new HashSet<>();
    private static final int MAX_DOWNLOAD_ATTEMPTS = Integer.parseInt(System.getProperty("oak.indexer.maxDownloadRetries", "5")) + 1;

```

### MismatchedCollectionQueryUpdate
Contents of collection `userPaths` are updated, but never queried
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/RemoveMemberTest.java`
#### Snippet
```java
public class RemoveMemberTest extends RemoveMembersTest {

    private final List<String> userPaths;

    public RemoveMemberTest(int numberOfMembers, int batchSize) {
```

### MismatchedCollectionQueryUpdate
Contents of collection `assets` are queried, but never updated
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java
        final int assetSampleSize = 50;
        final EvictingQueue<String> buffer = EvictingQueue.create(assetSampleSize);
        private List<String> assets;
        private int assetCount = 0;

```

## RuleId[id=PointlessBitwiseExpression]
### PointlessBitwiseExpression
`~(boundary - 1)` can be replaced with '-boundary'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Segment.java`
#### Snippet
```java
     */
    static int align(int address, int boundary) {
        return (address + boundary - 1) & ~(boundary - 1);
    }

```

### PointlessBitwiseExpression
`1 << 0` can be replaced with '1'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/codec/ResponseDecoder.java`
#### Snippet
```java

        // START_CHUNK flag enabled
        if ((mask & (1 << 0)) != 0) {
            blobChunkSize = in.readableBytes() - 8;
            if (Files.deleteIfExists(tempFile.toPath())) {
```

### PointlessBitwiseExpression
`1 << 0` can be replaced with '1'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/codec/ChunkedBlobStream.java`
#### Snippet
```java
        byte mask = 0;
        if (offset == 0) {
            mask = (byte) (mask | (1 << 0));
        }

```

## RuleId[id=DuplicateThrows]
### DuplicateThrows
There is a more general exception, 'java.io.IOException', in the throws list already.
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/BlobIdSet.java`
#### Snippet
```java
    }

    private boolean isPresentInStore(String blobId) throws FileNotFoundException, IOException {
        if (!store.exists()) {
            return false;
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/composite/CompositeAccessControlManager.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull Set<Principal> principals, @Nullable String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        ImmutableList.Builder<Iterator<AccessControlPolicy>> iterators = ImmutableList.builder();
        for (AccessControlManager acMgr : acMgrs) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.security.AccessControlException', in the throws list already.
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/composite/CompositeAccessControlManager.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull Set<Principal> principals, @Nullable String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        ImmutableList.Builder<Iterator<AccessControlPolicy>> iterators = ImmutableList.builder();
        for (AccessControlManager acMgr : acMgrs) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/composite/CompositeAccessControlManager.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull Set<Principal> principals, @Nullable String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        ImmutableList.Builder<Iterator<AccessControlPolicy>> iterators = ImmutableList.builder();
        for (AccessControlManager acMgr : acMgrs) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/composite/CompositeAccessControlManager.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull Set<Principal> principals, @Nullable String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        ImmutableList.Builder<Iterator<AccessControlPolicy>> iterators = ImmutableList.builder();
        for (AccessControlManager acMgr : acMgrs) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/restriction/RestrictionProvider.java`
#### Snippet
```java
        @NotNull
        @Override
        public Restriction createRestriction(@Nullable String oakPath, @NotNull String oakName, @NotNull Value value) throws AccessControlException, RepositoryException {
            throw new AccessControlException("This implementation doesn't support any restrictions");
        }
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/restriction/RestrictionProvider.java`
#### Snippet
```java
        @NotNull
        @Override
        public Restriction createRestriction(@Nullable String oakPath, @NotNull String oakName, @NotNull Value... values) throws AccessControlException, RepositoryException {
            throw new AccessControlException("This implementation doesn't support any restrictions");
        }
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryImpl.java`
#### Snippet
```java
    }

    private void parse() throws InvalidQueryException, RepositoryException {
        if (parsed) {
            return;
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public Version getVersion(final String versionName)
            throws VersionException, RepositoryException {
        return perform(new SessionOperation<Version>("getVersion") {
            @NotNull
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
                                final String label,
                                final boolean moveLabel)
            throws LabelExistsVersionException, VersionException,
            RepositoryException {
        sessionDelegate.performVoid(new SessionOperation<Void>("addVersionLabel", true) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.version.VersionException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
                                final String label,
                                final boolean moveLabel)
            throws LabelExistsVersionException, VersionException,
            RepositoryException {
        sessionDelegate.performVoid(new SessionOperation<Void>("addVersionLabel", true) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
                                final String label,
                                final boolean moveLabel)
            throws LabelExistsVersionException, VersionException,
            RepositoryException {
        sessionDelegate.performVoid(new SessionOperation<Void>("addVersionLabel", true) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public void removeVersionLabel(final String label)
            throws VersionException, RepositoryException {
        sessionDelegate.performVoid(new SessionOperation<Void>("removeVersionLabel", true) {
            @Override
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public void removeVersion(final String versionName)
            throws ReferentialIntegrityException, AccessDeniedException,
            UnsupportedRepositoryOperationException, VersionException,
            RepositoryException {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public void removeVersion(final String versionName)
            throws ReferentialIntegrityException, AccessDeniedException,
            UnsupportedRepositoryOperationException, VersionException,
            RepositoryException {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    public void removeVersion(final String versionName)
            throws ReferentialIntegrityException, AccessDeniedException,
            UnsupportedRepositoryOperationException, VersionException,
            RepositoryException {

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    public void removeVersion(final String versionName)
            throws ReferentialIntegrityException, AccessDeniedException,
            UnsupportedRepositoryOperationException, VersionException,
            RepositoryException {

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public Version getVersionByLabel(final String label)
            throws VersionException, RepositoryException {
        return perform(new SessionOperation<Version>("getVersionByLabel") {
            @NotNull
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public String[] getVersionLabels(final Version version)
            throws VersionException, RepositoryException {
        if (!version.getContainingHistory().getPath().equals(getPath())) {
            throw new VersionException("Version is not contained in this " +
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionHistoryImpl.java`
#### Snippet
```java
    @Override
    public boolean hasVersionLabel(Version version, String label)
            throws VersionException, RepositoryException {
        return Arrays.asList(getVersionLabels(version)).contains(label);
    }
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/VersionHistoryDelegate.java`
#### Snippet
```java
                                @NotNull String oakVersionLabel,
                                boolean moveLabel)
            throws LabelExistsVersionException, VersionException, RepositoryException {
        VersionManagerDelegate vMgr = VersionManagerDelegate.create(sessionDelegate);
        vMgr.addVersionLabel(this, version, oakVersionLabel, moveLabel);
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.version.VersionException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/VersionHistoryDelegate.java`
#### Snippet
```java
                                @NotNull String oakVersionLabel,
                                boolean moveLabel)
            throws LabelExistsVersionException, VersionException, RepositoryException {
        VersionManagerDelegate vMgr = VersionManagerDelegate.create(sessionDelegate);
        vMgr.addVersionLabel(this, version, oakVersionLabel, moveLabel);
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/VersionHistoryDelegate.java`
#### Snippet
```java
                                @NotNull String oakVersionLabel,
                                boolean moveLabel)
            throws LabelExistsVersionException, VersionException, RepositoryException {
        VersionManagerDelegate vMgr = VersionManagerDelegate.create(sessionDelegate);
        vMgr.addVersionLabel(this, version, oakVersionLabel, moveLabel);
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/VersionHistoryDelegate.java`
#### Snippet
```java
    @NotNull
    public VersionDelegate getVersionByLabel(@NotNull String label)
            throws VersionException, RepositoryException {
        checkNotNull(label);
        Tree versionLabels = getVersionLabelsTree();
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/VersionHistoryDelegate.java`
#### Snippet
```java

    public void removeVersionLabel(@NotNull String oakVersionLabel)
            throws VersionException, RepositoryException {
        VersionManagerDelegate vMgr = VersionManagerDelegate.create(sessionDelegate);
        vMgr.removeVersionLabel(this, oakVersionLabel);
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
    public void restore(final Version[] versions,
                        final boolean removeExisting)
            throws ItemExistsException,
            UnsupportedRepositoryOperationException, VersionException,
            LockException, InvalidItemStateException, RepositoryException {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
                        final boolean removeExisting)
            throws ItemExistsException,
            UnsupportedRepositoryOperationException, VersionException,
            LockException, InvalidItemStateException, RepositoryException {
        if (versions.length > 1) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
                        final boolean removeExisting)
            throws ItemExistsException,
            UnsupportedRepositoryOperationException, VersionException,
            LockException, InvalidItemStateException, RepositoryException {
        if (versions.length > 1) {
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
            throws ItemExistsException,
            UnsupportedRepositoryOperationException, VersionException,
            LockException, InvalidItemStateException, RepositoryException {
        if (versions.length > 1) {
            throw new UnsupportedRepositoryOperationException("OAK-168: Restore of multiple versions not implemented.");
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
            throws ItemExistsException,
            UnsupportedRepositoryOperationException, VersionException,
            LockException, InvalidItemStateException, RepositoryException {
        if (versions.length > 1) {
            throw new UnsupportedRepositoryOperationException("OAK-168: Restore of multiple versions not implemented.");
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/JackrabbitAccessControlManagerDelegator.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull final Set<Principal> principals, @Nullable final String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        return delegate.perform(new SessionOperation<>("getEffectivePolicies(Set,String...)") {
            @Override
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.security.AccessControlException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/JackrabbitAccessControlManagerDelegator.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull final Set<Principal> principals, @Nullable final String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        return delegate.perform(new SessionOperation<>("getEffectivePolicies(Set,String...)") {
            @Override
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/JackrabbitAccessControlManagerDelegator.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull final Set<Principal> principals, @Nullable final String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        return delegate.perform(new SessionOperation<>("getEffectivePolicies(Set,String...)") {
            @Override
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/JackrabbitAccessControlManagerDelegator.java`
#### Snippet
```java

    @Override
    public @NotNull Iterator<AccessControlPolicy> getEffectivePolicies(@NotNull final Set<Principal> principals, @Nullable final String... absPaths) throws AccessDeniedException, AccessControlException, UnsupportedRepositoryOperationException, RepositoryException {
        return delegate.perform(new SessionOperation<>("getEffectivePolicies(Set,String...)") {
            @Override
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void setPolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void setPolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void setPolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.security.AccessControlException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void setPolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void setPolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void setPolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public Privilege[] getPrivileges(String absPath) throws PathNotFoundException, RepositoryException {
        // EXERCISE
        return new Privilege[0];
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public Privilege[] getSupportedPrivileges(String absPath) throws PathNotFoundException, RepositoryException {
        // EXERCISE
        return new Privilege[0];
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java
     */
    @Override
    public AccessControlPolicy[] getPolicies(String absPath) throws PathNotFoundException, AccessDeniedException, RepositoryException {
        // EXERCISE
        return new AccessControlPolicy[0];
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java
     */
    @Override
    public AccessControlPolicy[] getPolicies(String absPath) throws PathNotFoundException, AccessDeniedException, RepositoryException {
        // EXERCISE
        return new AccessControlPolicy[0];
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public AccessControlPolicyIterator getApplicablePolicies(String absPath) throws PathNotFoundException, AccessDeniedException, RepositoryException {
        // EXERCISE
        return new AccessControlPolicyIteratorAdapter(ImmutableList.of());
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public AccessControlPolicyIterator getApplicablePolicies(String absPath) throws PathNotFoundException, AccessDeniedException, RepositoryException {
        // EXERCISE
        return new AccessControlPolicyIteratorAdapter(ImmutableList.of());
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public Privilege privilegeFromName(String privilegeName) throws AccessControlException, RepositoryException {
        // EXERCISE
        return null;
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void removePolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void removePolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void removePolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.security.AccessControlException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void removePolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void removePolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public void removePolicy(String absPath, AccessControlPolicy policy) throws PathNotFoundException, AccessControlException, AccessDeniedException, LockException, VersionException, RepositoryException {
        // EXERCISE

```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public boolean hasPrivileges(String absPath, Privilege[] privileges) throws PathNotFoundException, RepositoryException {
        // EXERCISE
        return false;
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public AccessControlPolicy[] getEffectivePolicies(String absPath) throws PathNotFoundException, AccessDeniedException, RepositoryException {
        // EXERCISE
        return new AccessControlPolicy[0];
```

### DuplicateThrows
There is a more general exception, 'javax.jcr.RepositoryException', in the throws list already.
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAccessControlManager.java`
#### Snippet
```java

    @Override
    public AccessControlPolicy[] getEffectivePolicies(String absPath) throws PathNotFoundException, AccessDeniedException, RepositoryException {
        // EXERCISE
        return new AccessControlPolicy[0];
```

## RuleId[id=StringConcatenationInLoops]
### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java
        for (Revision r : revisions) {
            if (value.length() > 0) {
                value += ",";
            }
            value += asId(r.asBranchRevision());
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java
                value += ",";
            }
            value += asId(r.asBranchRevision());
        }
        put(INVALIDATE_ONLY, value);
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java
        for (Revision r : revisions) {
            if (branchCommits.length() > 0) {
                branchCommits += ",";
            }
            branchCommits += asId(r.asBranchRevision());
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java
                branchCommits += ",";
            }
            branchCommits += asId(r.asBranchRevision());
            hasBranchCommits = true;
        }
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
                        stmt.close();
                        con.commit();
                        dropped += tname + " ";
                    } catch (SQLException ex) {
                        LOG.debug("attempting to drop: " + tname, ex);
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                        stmt.close();
                        con.commit();
                        dropped += tname + " ";
                    } catch (SQLException ex) {
                        LOG.debug("attempting to drop: " + tname, ex);
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
                compress = false;
            } else if (p.endsWith("time")) {
                dir += "-" + System.currentTimeMillis() + "-" + COUNTER.getAndIncrement();
            } else if (p.startsWith("size=")) {
                maxSizeMB = Integer.parseInt(p.split("=")[1]);
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                        result = statement.substring(begin, i);
                    } else {
                        result += statement.substring(begin - 1, i);
                    }
                    break;
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            } else if (readIf("/")) {
                // "//" was read
                pathPattern += "%";
                if (currentSelector.isDescendant) {
                    // the query started with "//", and now "//" was read
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            } else {
                // the token "/" was read
                pathPattern += "/";
                if (startOfQuery) {
                    currentSelector.path = "/";
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
                        result = statement.substring(begin, i);
                    } else {
                        result += statement.substring(begin - 1, i);
                    }
                    break;
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
        for (Iterator<? extends ChildItemDefDiff> iter = childItemDefDiffs.iterator(); iter.hasNext();) {
            ChildItemDefDiff propDefDiff = iter.next();
            result += "\t\t" + propDefDiff;
            if (iter.hasNext()) {
                result += ",";
```

### StringConcatenationInLoops
String concatenation `+` in loop
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/OakServlet.java`
#### Snippet
```java
                        return;
                    }
                    tail = "/" + tree.getName() + tail;
                    tree = tree.getParent();
                }
```

### StringConcatenationInLoops
String concatenation `+` in loop
in `oak-run/src/main/java/org/apache/jackrabbit/oak/threadDump/ThreadDumpConverter.java`
#### Snippet
```java
                        index + 4 + state.toString().length());
                firstLine = firstLine.substring(0, index) + "\n";
                remainingText = "   java.lang.Thread.State: "+ stateName + 
                        remainingText;
            }
```

### StringConcatenationInLoops
String concatenation `+=` in loop
in `oak-run/src/main/java/org/apache/jackrabbit/oak/explorer/NodeStoreTree.java`
#### Snippet
```java

            for (Entry<UUID, String> e : backend.getBulkSegmentIds(b).entrySet()) {
                info += newline + "        Bulk Segment Id " + e.getKey();
                if (e.getValue() != null && !e.getValue().equals(tarFile)) {
                    info += " in " + e.getValue();
```

### StringConcatenationInLoops
String concatenation `+` in loop
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/QueueingHandler.java`
#### Snippet
```java
            String name = after.getName();
            for(int i=0; i<aggregationLevel; i++) {
                name = handler.name + "/" + name;
                handler = handler.parent;
            }
```

### StringConcatenationInLoops
String concatenation `+` in loop
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/QueueingHandler.java`
#### Snippet
```java
            for(int i=0; i<aggregationLevel; i++) {
                if (i > 0) {
                    name = childName + "/" + name;
                }
                tracker = handler.identifierTracker;
```

## RuleId[id=UnusedAssignment]
### UnusedAssignment
Variable `length` initializer `0` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/AbstractSharedCachingDataStore.java`
#### Snippet
```java
            MessageDigest digest = MessageDigest.getInstance(DIGEST);
            OutputStream output = new DigestOutputStream(new FileOutputStream(tmpFile), digest);
            long length = 0;
            try {
                length = IOUtils.copyLarge(inputStream, output);
```

### UnusedAssignment
Variable `domainOverrideIgnored` initializer `false` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordDownloadOptions.java`
#### Snippet
```java
    private final String fileName;
    private final String dispositionType;
    private boolean domainOverrideIgnored = false;

    private String contentTypeHeader = null;
```

### UnusedAssignment
The value `getFile(id.digest, false)` assigned to `f` is never used
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
            f.getParentFile().mkdir();
            old.renameTo(f);
            f = getFile(id.digest, false);
        }
    }
```

### UnusedAssignment
Variable `blobsCount` initializer `0` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
                GarbageCollectorFileState fs, int batchCount) throws Exception {
            LOG.debug("Starting retrieve of all blobs");
            int blobsCount = 0;
            Iterator<String> idsIter = null;
            try {
```

### UnusedAssignment
Variable `repoId` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreService.java`
#### Snippet
```java
        // If a shared data store register the repo id in the data store
        if (SharedDataStoreUtils.isShared(blobStore)) {
            String repoId = null;
            try {
                repoId = ClusterRepositoryInfo.getOrCreateId(nodeStore);
```

### UnusedAssignment
Variable `vendorCode` initializer `RDBCommonVendorSpecificCode.DEFAULT` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStoreDB.java`
#### Snippet
```java
    protected String description;

    protected RDBCommonVendorSpecificCode vendorCode = RDBCommonVendorSpecificCode.DEFAULT;

    private RDBBlobStoreDB(String description) {
```

### UnusedAssignment
Variable `value` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentSerializer.java`
#### Snippet
```java
        String key = op.get(1).toString();
        Revision rev = null;
        Object value = null;
        if (op.size() == 3) {
            value = op.get(2);
```

### UnusedAssignment
Variable `vendorCode` initializer `RDBCommonVendorSpecificCode.DEFAULT` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
    protected String description;

    protected RDBCommonVendorSpecificCode vendorCode = RDBCommonVendorSpecificCode.DEFAULT;

    protected String extractFields(ResultSet rs, String indexStats) throws SQLException {
```

### UnusedAssignment
Variable `count` initializer `0` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/ThrottlingDocumentStoreWrapper.java`
#### Snippet
```java
    public <T extends Document> int remove(final Collection<T> collection, final Map<String, Long> toRemove) {
        long throttlingTime = performThrottling(collection);
        int count = 0;
        try {
            count = store.remove(collection, toRemove);
```

### UnusedAssignment
Variable `oldDoc` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/ThrottlingDocumentStoreWrapper.java`
#### Snippet
```java
    public <T extends Document> T findAndUpdate(final Collection<T> collection, final UpdateOp update) {
        long throttlingTime = performThrottling(collection);
        T oldDoc = null;
        try {
            oldDoc = store.findAndUpdate(collection, update);
```

### UnusedAssignment
Variable `count` initializer `0` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/ThrottlingDocumentStoreWrapper.java`
#### Snippet
```java
                                           final long startValue, final long endValue) throws DocumentStoreException {
        long throttlingTime = performThrottling(collection);
        int count = 0;
        try {
            count = store.remove(collection, indexedProperty, startValue, endValue);
```

### UnusedAssignment
Variable `results` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/ThrottlingDocumentStoreWrapper.java`
#### Snippet
```java
    public <T extends Document> List<T> createOrUpdate(final Collection<T> collection, final List<UpdateOp> updateOps) {
        long throttlingTime = performThrottling(collection);
        List<T> results = null;
        try {
            results = store.createOrUpdate(collection, updateOps);
```

### UnusedAssignment
Variable `asyncDelay` initializer `1000` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * cache update).
     */
    private int asyncDelay = 1000;

    /**
```

### UnusedAssignment
Variable `readStats` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
    /** OAK-2624 : background read operations are split from background update ops */
    private void internalRunBackgroundReadOperations() {
        BackgroundReadStats readStats = null;
        synchronized (backgroundReadMonitor) {
            long start = clock.getTime();
```

### UnusedAssignment
The value changed at `si++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

            if (oldmodcount != null) {
                stmt.setObject(si++, oldmodcount, Types.BIGINT);
            }
            int result = stmt.executeUpdate();
```

### UnusedAssignment
The value changed at `field++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                long sdMaxRevTime = tmd.hasSplitDocs() ? readLongFromResultSet(rs, field++) : RDBRow.LONG_UNSET;
                String data = rs.getString(field++);
                byte[] bdata = rs.getBytes(field++);
                result.add(new RDBRow(id, hasBinary, deletedOnce, modified, modcount, cmodcount, schemaVersion, sdType,
                        sdMaxRevTime, data, bdata));
```

### UnusedAssignment
The value changed at `field++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                long sdMaxRevTime = tmd.hasSplitDocs() ? readLongFromResultSet(rs, field++) : RDBRow.LONG_UNSET;
                String data = rs.getString(field++);
                byte[] bdata = rs.getBytes(field++);
                PERFLOG.end(pstart, 10,
                        "read: table={}, id={}, lastmodcount={}, lastmodified={} -> modcount={}, modified={}, data={}, bdata={}",
```

### UnusedAssignment
Variable `message` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        private Exception callstack = null;
        private long elapsed = 0;
        private String message = null;
        private long cnt = 0;
        private long pstart;
```

### UnusedAssignment
The value changed at `si++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                if (data.length() < tmd.getDataLimitInOctets() / CHAR2OCTETRATIO) {
                    setDataInStatement(tmd, stmt, si++, data);
                    stmt.setBinaryStream(si++, null, 0);
                } else {
                    setDataInStatement(tmd, stmt, si++, "\"blob\"");
```

### UnusedAssignment
The value changed at `si++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                    setDataInStatement(tmd, stmt, si++, "\"blob\"");
                    byte[] bytes = asBytes(data);
                    stmt.setBytes(si++, bytes);
                }
                stmt.addBatch();
```

### UnusedAssignment
The value changed at `si++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

            if (oldmodcount != null) {
                stmt.setObject(si++, oldmodcount, Types.BIGINT);
            }
            int result = stmt.executeUpdate();
```

### UnusedAssignment
The value changed at `field++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                    long sdMaxRevTime = tmd.hasSplitDocs() ? readLongFromResultSet(rs, field++) : RDBRow.LONG_UNSET;
                    String data = this.rs.getString(field++);
                    byte[] bdata = this.rs.getBytes(field++);
                    PERFLOG.end(pstart, 10, "queried: table={} -> id={}, modcount={}, modified={}, data={}, bdata={}",
                            tmd.getName(), id, modcount, modified, (data == null ? 0 : data.length()),
```

### UnusedAssignment
Variable `next` initializer `null` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        private PreparedStatement stmt;
        private ResultSet rs;
        private RDBRow next = null;
        private Exception callstack = null;
        private long elapsed = 0;
```

### UnusedAssignment
The value changed at `field++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                    long sdMaxRevTime = tmd.hasSplitDocs() ? readLongFromResultSet(rs, field++) : RDBRow.LONG_UNSET;
                    String data = rs.getString(field++);
                    byte[] bdata = rs.getBytes(field++);
                    RDBRow row = new RDBRow(id, hasBinary, deletedOnce, modified, modcount, cmodcount, schemaVersion, sdType,
                            sdMaxRevTime, data, bdata);
```

### UnusedAssignment
The value changed at `si++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

                setIdInStatement(tmd, stmt, si++, document.getId());
                stmt.setObject(si++, modcount - 1, Types.BIGINT);
                stmt.addBatch();
                updatedKeys.add(document.getId());
```

### UnusedAssignment
The value changed at `i++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
        int numAttempts = queryRetries + 1;
        MongoException ex = null;
        for (int i = 0; i < numAttempts; i++) {
            if (i > 0) {
                LOG.warn("Retrying read of " + key);
```

### UnusedAssignment
The value `e` assigned to `ex` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
                return findUncached(collection, key, docReadPref);
            } catch (MongoException e) {
                ex = e;
                LOG.warn("findUncachedWithRetry : read fails with an exception" + e, e);
            }
```

### UnusedAssignment
The value changed at `i++` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
        int numAttempts = queryRetries + 1;
        MongoException ex = null;
        for (int i = 0; i < numAttempts; i++) {
            if (i > 0) {
                LOG.warn("Retrying query, fromKey={}, toKey={}", fromKey, toKey);
```

### UnusedAssignment
The value `e` assigned to `ex` is never used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
                        indexedProperty, startValue, limit, projection, maxQueryTime);
            } catch (MongoException e) {
                ex = e;
            }
        }
```

### UnusedAssignment
Variable `n` initializer `0` is redundant
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/IOUtils.java`
#### Snippet
```java
        byte[] buffer = new byte[4096];
        long count = 0;
        int n = 0;
        while (-1 != (n = input.read(buffer))) {
            output.write(buffer, 0, n);
```

### UnusedAssignment
Variable `line` initializer `null` is redundant
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
        try {
            reader = new BufferedReader(new InputStreamReader(stream, UTF_8));
            String line  = null;
            while ((line = reader.readLine()) != null) {
                if (unescape) {
```

### UnusedAssignment
The value `jsop.charAt(++pos)` assigned to `ch` is never used
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/json/JsopTokenizer.java`
#### Snippet
```java
                        ch = jsop.charAt(++pos);
                        if (ch == '+' || ch == '-') {
                            ch = jsop.charAt(++pos);
                        }
                        while (pos < length) {
```

### UnusedAssignment
Variable `s3service` initializer `null` is redundant
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
        String accessKey = prop.getProperty(S3Constants.ACCESS_KEY);
        String secretKey = prop.getProperty(S3Constants.SECRET_KEY);
        AmazonS3Client s3service = null;
        if (StringUtils.isNullOrEmpty(accessKey)
                || StringUtils.isNullOrEmpty(secretKey)) {
```

### UnusedAssignment
Variable `endpoint` initializer `null` is redundant
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
        }
        String region = prop.getProperty(S3Constants.S3_REGION);
        String endpoint = null;
        String propEndPoint = prop.getProperty(S3Constants.S3_END_POINT);
        if ((propEndPoint != null) & !"".equals(propEndPoint)) {
```

### UnusedAssignment
Variable `persistence` initializer `null` is redundant
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsToolUtils.java`
#### Snippet
```java
    public static SegmentNodeStorePersistence newSegmentNodeStorePersistence(SegmentStoreType storeType,
            String pathOrUri) throws IOException {
        SegmentNodeStorePersistence persistence = null;

        switch (storeType) {
```

### UnusedAssignment
Variable `record` initializer `null` is redundant
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
        DataIdentifier blobId = new DataIdentifier(getIdentifierName(key));

        DataRecord record = null;
        try {
            record = getRecord(blobId);
```

### UnusedAssignment
The value `p.substring(2)` assigned to `p` is never used
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ValueConverter.java`
#### Snippet
```java
                        String p = uri.getPath();
                        if (p.startsWith("./")) {
                            p = p.substring(2);
                        }
                        return PropertyValues.newPath(v);
```

### UnusedAssignment
The value `p.substring(2)` assigned to `p` is never used
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ValueConverter.java`
#### Snippet
```java
                        String p = uri.getPath();
                        if (p.startsWith("./")) {
                            p = p.substring(2);
                        }
                        return PropertyValues.newName(getOakPath(v, mapper));
```

### UnusedAssignment
Variable `startLoop` initializer `0` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        query.getChars(0, len, command, 0);
        command[len] = ' ';
        int startLoop = 0;
        for (int i = 0; i < len; i++) {
            char c = command[i];
```

### UnusedAssignment
Variable `tds` initializer `null` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsMBeanImpl.java`
#### Snippet
```java
    
    private TabularData asTabularData(ArrayList<QueryStatsData> list) {
        TabularDataSupport tds = null;
        try {
            CompositeType ct = QueryStatsCompositeTypeFactory.getCompositeType();
```

### UnusedAssignment
The value `true` assigned to `init` is never used
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/cursor/ConcatCursor.java`
#### Snippet
```java
        if (!init) {
            fetchNext();
            init = true;
        }
        IndexRow result = current;
```

### UnusedAssignment
Variable `startLoop` initializer `0` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
        query.getChars(0, len, command, 0);
        command[len] = ' ';
        int startLoop = 0;
        for (int i = 0; i < len; i++) {
            char c = command[i];
```

### UnusedAssignment
Variable `editor` initializer `null` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUpdate.java`
#### Snippet
```java
                }

                Editor editor = null;
                try {
                    editor = rootState.provider.getIndexEditor(type, definition, rootState.root,
```

### UnusedAssignment
Variable `updatePostRunStatus` initializer `true` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
                                  AtomicReference<String> checkpointToReleaseRef) throws CommitFailedException {
        Stopwatch watch = Stopwatch.createStarted();
        boolean updatePostRunStatus = true;
        boolean progressLogged = false;
        // prepare the update callback for tracking index updates
```

### UnusedAssignment
Variable `mixinType` initializer `null` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
        }

        NodeType mixinType = null;
        try {
            mixinType = ntMgr.internalGetNodeType(mixin);
```

### UnusedAssignment
Variable `msg` initializer `"Internal error while retrieving principal: " + e.getMessage()` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/AbstractGroupPrincipal.java`
#### Snippet
```java
                return authorizable.getPrincipal();
            } catch (RepositoryException e) {
                String msg = "Internal error while retrieving principal: " + e.getMessage();
                log.error(msg);
                throw new IllegalStateException(msg, e);
```

### UnusedAssignment
Variable `line` initializer `null` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/JournalReader.java`
#### Snippet
```java
    protected JournalEntry computeNext() {
        try {
            String line = null;
            while ((line = reader.readLine()) != null) {
                if (line.indexOf(' ') != -1) {
```

### UnusedAssignment
Variable `random` initializer `null` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/SegmentTarManager.java`
#### Snippet
```java
                }

                FileAccess random = null;
                if (offHeapAccess) {
                    random = new FileAccess.RandomOffHeap(access);
```

### UnusedAssignment
Variable `forceTimeout` initializer `FORCE_TIMEOUT_DEFAULT` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
    private int retryCount = RETRY_COUNT_DEFAULT;

    private int forceTimeout = FORCE_TIMEOUT_DEFAULT;

    private int retainedGenerations = RETAINED_GENERATIONS_DEFAULT;
```

### UnusedAssignment
Variable `paused` initializer `PAUSE_DEFAULT` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
    public static final int MEMORY_THRESHOLD_DEFAULT = 15;

    private boolean paused = PAUSE_DEFAULT;

    /**
```

### UnusedAssignment
Variable `retryCount` initializer `RETRY_COUNT_DEFAULT` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
    private boolean estimationDisabled = DISABLE_ESTIMATION_DEFAULT;

    private int retryCount = RETRY_COUNT_DEFAULT;

    private int forceTimeout = FORCE_TIMEOUT_DEFAULT;
```

### UnusedAssignment
Variable `credentials` initializer `null` is redundant
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/OakServlet.java`
#### Snippet
```java
            throws ServletException, IOException {
        try {
            Credentials credentials = null;

            String authorization = request.getHeader("Authorization");
```

### UnusedAssignment
Variable `record` initializer `null` is redundant
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
        DataIdentifier blobId = new DataIdentifier(getIdentifierName(key));

        DataRecord record = null;
        try {
            record = getRecord(blobId);
```

### UnusedAssignment
Variable `uploadId` initializer `null` is redundant
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
        DataIdentifier newIdentifier = generateSafeRandomIdentifier();
        String blobId = getKeyName(newIdentifier);
        String uploadId = null;

        if (httpUploadURIExpirySeconds > 0) {
```

### UnusedAssignment
Variable `numParts` initializer `0L` is redundant
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
            uploadId = Base64.encode(UUID.randomUUID().toString());

            long numParts = 0L;
            if (maxNumberOfURIs > 0) {
                long requestedPartSize = (long) Math.ceil(((double) maxUploadSizeInBytes) / ((double) maxNumberOfURIs));
```

### UnusedAssignment
Variable `patternChar` initializer `0` is redundant
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/mount/FragmentMatcher.java`
#### Snippet
```java
    public static Result startsWith(String pattern, String subject) {
        int i = 0, j = 0;
        char patternChar = 0, subjectChar;

        while (i < pattern.length() && j < subject.length()) {
```

### UnusedAssignment
Variable `dns` initializer `null` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
        String h = "mongodb://host:port/database|jdbc:...";

        DocumentNodeStore dns = null;
        try {
            DocumentNodeStoreBuilder<?> builder = Utils.createDocumentMKBuilder(args, closer, h);
```

### UnusedAssignment
Variable `options` initializer `null` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCacheUpgradeCommand.java`
#### Snippet
```java
            OptionSpec<?> help = parser.acceptsAll(asList("h", "?", "help"), "show help").forHelp();

            OptionSet options = null;
            try {
                options = parser.parse(args);
```

### UnusedAssignment
The value `small` assigned to `entries` is never used
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
            @SuppressWarnings("unchecked")
            Entry<K, V>[] small = new Entry[1];
            entries = small;
            @SuppressWarnings("unchecked")
            Entry<K, V>[] e = new Entry[len];
```

### UnusedAssignment
Variable `code` initializer `0` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/CompactCommand.java`
#### Snippet
```java
        }

        int code = 0;

        if (path.startsWith("az:")) {
```

### UnusedAssignment
Variable `options` initializer `null` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
            trackOverride.availableIf(idOp, consistencyOp);

            OptionSet options = null;
            try {
                options = parser.parse(args);
```

### UnusedAssignment
The value `JsopBuilder.encode(clear)` assigned to `v` is never used
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDiff.java`
#### Snippet
```java
                    String base64 = v.substring(9, v.length() - 1);
                    String clear = new String(java.util.Base64.getDecoder().decode(base64), StandardCharsets.UTF_8);
                    v = JsopBuilder.encode(clear);
                    // we don't update the property, otherwise importing the index
                    // would change the type
```

### UnusedAssignment
Variable `id` initializer `null` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/explorer/NodeStoreTree.java`
#### Snippet
```java
            return;
        }
        UUID id = null;
        try {
            id = UUID.fromString(sid.trim());
```

### UnusedAssignment
Variable `compare` initializer `-1` is redundant
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/PropertyStateValue.java`
#### Snippet
```java
                Calendar c1 = ISO8601.parse(v1);
                Calendar c2 = ISO8601.parse(v2);
                int compare = -1;
                if (c1 != null && c2 != null) {
                    compare = c1.compareTo(c2);
```

### UnusedAssignment
The value `findLock(lock.getParent(), true)` assigned to `lock` is never used
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/NodeDelegate.java`
#### Snippet
```java
                return null;
            } else {
                lock = findLock(lock.getParent(), true);
            }
        }
```

### UnusedAssignment
Variable `predicateMatches` initializer `false` is redundant
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/OakEventFilterImpl.java`
#### Snippet
```java
        @Override
        public EventFilter create(String name, NodeState before, NodeState after) {
            boolean predicateMatches = false;
            if (after.exists()) {
                predicateMatches = predicate.test(after);
```

### UnusedAssignment
Variable `azPersistence` initializer `null` is redundant
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentAzureFactory.java`
#### Snippet
```java
    @Override
    public boolean hasExternalBlobReferences() throws IOException {
        AzurePersistence azPersistence = null;
        try {
            azPersistence = createAzurePersistence();
```

### UnusedAssignment
Variable `azPersistence` initializer `null` is redundant
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentAzureFactory.java`
#### Snippet
```java
    @Override
    public NodeStore create(BlobStore blobStore, Closer closer) throws IOException {
        AzurePersistence azPersistence = null;
        try {
            azPersistence = createAzurePersistence();
```

### UnusedAssignment
Variable `domainOverrideIgnored` initializer `false` is redundant
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/blob/BlobUploadOptions.java`
#### Snippet
```java
@ProviderType
public class BlobUploadOptions {
    private boolean domainOverrideIgnored = false;

    public static final BlobUploadOptions DEFAULT = new BlobUploadOptions();
```

### UnusedAssignment
Variable `domainOverrideIgnored` initializer `false` is redundant
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/blob/BlobDownloadOptions.java`
#### Snippet
```java
    private final String fileName;
    private final String dispositionType;
    private boolean domainOverrideIgnored = false;

    public static final BlobDownloadOptions DEFAULT = new BlobDownloadOptions();
```

### UnusedAssignment
Variable `c` initializer `null` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/NodeStateAnalyzerFactory.java`
#### Snippet
```java
            }
        }
        Constructor<? extends Analyzer> c = null;

        try {
```

### UnusedAssignment
Variable `byteRef` initializer `null` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexMBeanImpl.java`
#### Snippet
```java
        }
        TermsEnum iterator = terms.iterator(null);
        BytesRef byteRef = null;
        class Entry implements Comparable<Entry> {
            String term;
```

### UnusedAssignment
Variable `hashSetSize` initializer `DEFAULT_HASH_SET_SIZE` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/MinHashFilter.java`
#### Snippet
```java
  private final List<List<FixedSizeTreeSet<LongPair>>> minHashSets;

  private int hashSetSize = DEFAULT_HASH_SET_SIZE;

  private int bucketCount = DEFAULT_BUCKET_COUNT;
```

### UnusedAssignment
Variable `hashCount` initializer `DEFAULT_HASH_COUNT` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/MinHashFilter.java`
#### Snippet
```java
  private int bucketCount = DEFAULT_BUCKET_COUNT;

  private int hashCount = DEFAULT_HASH_COUNT;

  private boolean requiresInitialisation = true;
```

### UnusedAssignment
Variable `bucketCount` initializer `DEFAULT_BUCKET_COUNT` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/MinHashFilter.java`
#### Snippet
```java
  private int hashSetSize = DEFAULT_HASH_SET_SIZE;

  private int bucketCount = DEFAULT_BUCKET_COUNT;

  private int hashCount = DEFAULT_HASH_COUNT;
```

### UnusedAssignment
Variable `remoteLength` initializer `0` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexSanityChecker.java`
#### Snippet
```java
        for (String fileName : remote.listAll()) {
            long localLength = DirectoryUtils.getFileLength(local, fileName);
            long remoteLength = 0;
            try {
                /*
```

### UnusedAssignment
Variable `pathPredicate` initializer `path -> true` is redundant
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MultithreadedTraverseWithSortStrategy.java`
#### Snippet
```java
    private final Compression algorithm;

    private Predicate<String> pathPredicate = path -> true;

    /**
```

### UnusedAssignment
Variable `pathPredicate` initializer `path -> true` is redundant
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseAndSortTask.java`
#### Snippet
```java
    private String registrationID;
    private final long dumpThreshold;
    private Predicate<String> pathPredicate = path -> true;

    TraverseAndSortTask(TraversingRange range, Comparator<NodeStateHolder> comparator,
```

### UnusedAssignment
Variable `port` initializer `0` is redundant
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
            .build();
        
        int port = 0;
        try (ServerSocket socket = new ServerSocket(0)) {
            port = socket.getLocalPort();
```

### UnusedAssignment
The value `ctx.getGlobalStore().getNodeStore().checkpointInfo(checkpoint)` assigned to `props` is never used
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
        boolean result;
        if (checkpointExists(ctx.getGlobalStore().getNodeStore(), checkpoint)) {
            props = ctx.getGlobalStore().getNodeStore().checkpointInfo(checkpoint);
            result = ctx.getGlobalStore().getNodeStore().release(checkpoint);
        } else {
```

### UnusedAssignment
The value `Collections.emptyMap()` assigned to `props` is never used
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
            result = ctx.getGlobalStore().getNodeStore().release(checkpoint);
        } else {
            props = Collections.emptyMap();
            result = true;
        }
```

### UnusedAssignment
Variable `status` initializer `Status.NOP` is redundant
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/basic/DefaultSyncResultImpl.java`
#### Snippet
```java
    private final DefaultSyncedIdentity id;

    private Status status = Status.NOP;

    public DefaultSyncResultImpl(@Nullable DefaultSyncedIdentity id, @NotNull Status status) {
```

### UnusedAssignment
Variable `downloadDomainIgnored` initializer `false` is redundant
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/binary/BinaryDownloadOptions.java`
#### Snippet
```java
    private final String fileName;
    private final String dispositionType;
    private boolean downloadDomainIgnored = false;

    private BinaryDownloadOptions(final String mediaType,
```

### UnusedAssignment
Variable `createdFolder` initializer `null` is redundant
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java

    private File createTemporaryFolder(File parentFolder) {
        File createdFolder = null;
        try {
            createdFolder = File.createTempFile("oak", "", parentFolder);
```

### UnusedAssignment
Variable `session` initializer `null` is redundant
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReplicaCrashResilienceTest.java`
#### Snippet
```java
                long level1Pointer = 1;
                long level2Pointer = 1;
                Session session = null;
                try {
                    session = repository.login(
```

### UnusedAssignment
Variable `added` initializer `false` is redundant
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/principalbased/PrinicipalBasedReadTest.java`
#### Snippet
```java

    private static boolean addEntry(@NotNull JackrabbitAccessControlManager acMgr, @NotNull Principal principal, @NotNull String path, @NotNull Privilege[] privileges, boolean useDefault) throws RepositoryException {
        boolean added = false;
        JackrabbitAccessControlList acl = null;
        if (useDefault) {
```

### UnusedAssignment
Variable `archiveManager` initializer `null` is redundant
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java

    public static SegmentArchiveManager createArchiveManager(SegmentNodeStorePersistence persistence) {
        SegmentArchiveManager archiveManager = null;
        try {
            archiveManager = persistence.createArchiveManager(false, false, new IOMonitorAdapter(),
```

### UnusedAssignment
Variable `persistence` initializer `null` is redundant
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java
    public static SegmentNodeStorePersistence newSegmentNodeStorePersistence(SegmentStoreType storeType,
            String pathOrUri) {
        SegmentNodeStorePersistence persistence = null;

        switch (storeType) {
```

### UnusedAssignment
Variable `persistence` initializer `null` is redundant
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java
    public static SegmentNodeStorePersistence newSegmentNodeStorePersistence(SegmentStoreType storeType,
            String pathOrUri, String persistentCachePath, Integer persistentCacheSize) {
        SegmentNodeStorePersistence persistence = null;

        switch (storeType) {
```

### UnusedAssignment
The value `RepositoryAccessServlet.getRepository(pageContext.getServletContext())` assigned to `rep` is never used
in `oak-examples/webapp/src/main/webapp/welcome.jsp`
#### Snippet
```java
Repository rep;
try {
    rep = RepositoryAccessServlet.getRepository(pageContext.getServletContext());
} catch (Throwable e) {
    %><jsp:forward page="bootstrap/missing.jsp"/><%
```

### UnusedAssignment
Variable `total` initializer `0` is redundant
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
        long from = 0;
        long to = 10;
        long total = 0;
        long maxPage = 0;
        long minPage = 0;
```

### UnusedAssignment
Variable `minPage` initializer `0` is redundant
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
        long total = 0;
        long maxPage = 0;
        long minPage = 0;
        long currentPageIndex = 0;
        List indexes = new ArrayList();
```

### UnusedAssignment
The value `" class=\"t n bt\""` assigned to `tableClass` is never used
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
    String tableClass = "";
    if (rows != null && rows.getSize() == 0) {
        tableClass = " class=\"t n bt\"";
    }
  %>
```

### UnusedAssignment
The value `"/default/jcr:root"` assigned to `href` is never used
in `oak-examples/webapp/src/main/webapp/remoting/read.jsp`
#### Snippet
```java
    + JcrRemotingServlet.getPathPrefix(pageContext.getServletContext());
href = Text.encodeIllegalXMLCharacters(href);
href += "/default/jcr:root";
    
%><jsp:include page="header.jsp"/>
```

## RuleId[id=JavadocReference]
### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     * @param stream the stream
     * @param name the name of the root record
     * @throws DataStoreException the data store exception
     */
    void addMetadataRecord(InputStream stream, String name)
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     * @param f the file
     * @param name the name of the root record
     * @throws DataStoreException the data store exception
     */
    void addMetadataRecord(File f, String name)
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     * Sets the repository id to identify repository in the DataStore
     * @param repositoryId
     * @throws DataStoreException
     */
    default void setRepositoryId(String repositoryId) throws DataStoreException {}
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataRecord`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ExtendedBlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * a call to {@link SharedDataStore#getRecordForId(DataIdentifier)}.
     *
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ExtendedBlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * a call to {@link SharedDataStore#getRecordForId(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ExtendedBlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link SharedDataStore#getRecordForId(DataIdentifier)} is completed
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ExtendedBlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link SharedDataStore#getRecordForId(DataIdentifier)} fails
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.CachingDataStore`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
/**
 * Utility methods to upgrade Old DataStore cache
 * {@link org.apache.jackrabbit.core.data.CachingDataStore}.
 */
public class DataStoreCacheUpgradeUtils {
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.CachingDataStore`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java

    /**
     * Upgrades the {@link org.apache.jackrabbit.core.data.CachingDataStore}.
     *
     * @param homeDir the repository home directory
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.AsyncUploadCache`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java

    /**
     * De-serialize the pending uploads map from {@link org.apache.jackrabbit.core.data.AsyncUploadCache}.
     *
     * @param homeDir the directory where the serialized file is maintained
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/AbstractSharedCachingDataStore.java`
#### Snippet
```java
     *
     * @return Iterator over all ids available
     * @throws DataStoreException
     */
    @Override
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/TypedDataStore.java`
#### Snippet
```java

/**
 * Interface to provide ability to the {@link org.apache.jackrabbit.core.data.DataStore}
 * to add records with {@link BlobOptions}.
 */
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/TypedDataStore.java`
#### Snippet
```java
     * @param options
     * @return
     * @throws DataStoreException
     */
    DataRecord addRecord(InputStream input, BlobOptions options) throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataRecord`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordAccessProvider.java`
#### Snippet
```java
     *        object resulting from a call to {@link
     *        #initiateDataRecordUpload(long, int)}.
     * @return A {@link DataRecord} for the uploaded binary.
     * @throws IllegalArgumentException if the {@code uploadToken} is null,
     *         empty, or otherwise invalid.
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordAccessProvider.java`
#### Snippet
```java
     * @throws DataRecordUploadException if the object written can't be found by
     *         the service provider.
     * @throws DataStoreException if the object written can't be found by the
     *         DataStore.
     */
```

### JavadocReference
Cannot resolve symbol `DataRecord`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordAccessProvider.java`
#### Snippet
```java
    /**
     * Return a URI for directly reading the binary associated with the provided
     * {@link DataRecord}.
     * <p>
     * The caller must provide a {@link DataRecordDownloadOptions} instance that
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordAccessProvider.java`
#### Snippet
```java
     * use {@link DataRecordDownloadOptions#DEFAULT}.
     *
     * @param identifier The {@link DataIdentifier} for the {@link DataRecord}
     *         containing the binary to be read via direct download.
     * @param downloadOptions A {@link DataRecordDownloadOptions} instance used
```

### JavadocReference
Cannot resolve symbol `DataRecord`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordAccessProvider.java`
#### Snippet
```java
     * use {@link DataRecordDownloadOptions#DEFAULT}.
     *
     * @param identifier The {@link DataIdentifier} for the {@link DataRecord}
     *         containing the binary to be read via direct download.
     * @param downloadOptions A {@link DataRecordDownloadOptions} instance used
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
     * @param file the file
     * @return the last modified date
     * @throws DataStoreException if reading fails
     */
    private static long getLastModified(File file) throws DataStoreException {
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
     * @param file the file
     * @param time the new last modified date
     * @throws DataStoreException if the file is writable but modifying the date
     *                            fails
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataIdentifier`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadToken.java`
#### Snippet
```java
     *
     * @param blobId The blob ID, usually a {@link
     *        org.apache.jackrabbit.core.data.DataIdentifier}.
     * @param uploadId A free-form string used to identify this upload.  This
     *        may be provided by the service provider; if not a free-form
```

### JavadocReference
Cannot resolve symbol `DataRecord`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractDataRecord.java`
#### Snippet
```java

/**
 * Implements {@link DataRecord}
 */
public abstract class AbstractDataRecord implements DataRecord {
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *
     * @param identifier
     * @throws DataStoreException
     */
    void deleteRecord(DataIdentifier identifier) throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *            identifier to be checked.
     * @return true if records exists else false.
     * @throws DataStoreException
     */
    boolean exists(DataIdentifier identifier) throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *            identifier of record.
     * @return inputstream of the record.
     * @throws DataStoreException
     *             if record not found or any error.
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * @param input the record file
     * @param name the name
     * @throws org.apache.jackrabbit.core.data.DataStoreException
     */
    void addMetadataRecord(final File input, final String name) throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *
     * @return iterator over DataRecords
     * @throws DataStoreException
     */
    Iterator<DataRecord> getAllRecords() throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * Close backend and release resources like database connection if any.
     *
     * @throws DataStoreException
     */
    void close() throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * @param input the record input stream
     * @param name the name
     * @throws org.apache.jackrabbit.core.data.DataStoreException
     */
    void addMetadataRecord(final InputStream input, final String name) throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *
     * @return iterator consisting of all identifiers
     * @throws DataStoreException
     */
    Iterator<DataIdentifier> getAllIdentifiers() throws DataStoreException;
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * @param file
     *            file that would be stored in backend.
     * @throws DataStoreException
     *             for any error.
     */
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractSharedBackend.java`
#### Snippet
```java
     *
     * @return reference key
     * @throws DataStoreException if the key is not available
     */
    private synchronized byte[] getReferenceKey() throws DataStoreException {
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractSharedBackend.java`
#### Snippet
```java
     *
     * @return reference key
     * @throws DataStoreException if the key is not available
     */
    public byte[] getOrCreateReferenceKey() throws DataStoreException {
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)} fails.
     *
     * @param reference reference of the record
```

### JavadocReference
Cannot resolve symbol `getRecordFromReference(String)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)} fails.
     *
     * @param reference reference of the record
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a binary is added via {@link org.apache.jackrabbit.core.data.DataStore#addRecord(InputStream)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `addRecord(InputStream)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a binary is added via {@link org.apache.jackrabbit.core.data.DataStore#addRecord(InputStream)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)} is completed.
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `getRecord(DataIdentifier)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)} is completed.
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)} is completed.
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#addRecord(InputStream)} is completed.
     *
     * @param blobId id of the record which was added
```

### JavadocReference
Cannot resolve symbol `addRecord(InputStream)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#addRecord(InputStream)} is completed.
     *
     * @param blobId id of the record which was added
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataRecord`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)}.
     *
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `getRecord(DataIdentifier)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)} fails.
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `getRecordIfStored(DataIdentifier)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)} fails.
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)} fails.
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link org.apache.jackrabbit.core.data.DataStore#deleteAllOlderThan(long)} fails.
     *
     * @param min time used for determining what to delete
```

### JavadocReference
Cannot resolve symbol `deleteAllOlderThan(long)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link org.apache.jackrabbit.core.data.DataStore#deleteAllOlderThan(long)} fails.
     *
     * @param min time used for determining what to delete
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when deleting binaries older than a specified date, via
     * {@link org.apache.jackrabbit.core.data.DataStore#deleteAllOlderThan(long)}.
     *
     * @param timeTaken time taken to perform the deletion
```

### JavadocReference
Cannot resolve symbol `deleteAllOlderThan(long)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when deleting binaries older than a specified date, via
     * {@link org.apache.jackrabbit.core.data.DataStore#deleteAllOlderThan(long)}.
     *
     * @param timeTaken time taken to perform the deletion
```

### JavadocReference
Cannot resolve symbol `DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link DataStore#getAllIdentifiers()} is called.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `getAllIdentifiers()`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link DataStore#getAllIdentifiers()} is called.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)} is completed.
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `getRecordIfStored(DataIdentifier)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)} is completed.
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)} is completed.
     *
     * @param blobId id of the record retrieved
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)} fails.
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `getRecord(DataIdentifier)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)} fails.
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecord(DataIdentifier)} fails.
     *
     * @param blobId id of the record
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#addRecord(InputStream)} fails.
     */
    void addRecordFailed();
```

### JavadocReference
Cannot resolve symbol `addRecord(InputStream)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#addRecord(InputStream)} fails.
     */
    void addRecordFailed();
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link org.apache.jackrabbit.core.data.DataStore#deleteAllOlderThan(long)} is completed.
     *
     * @param deletedCount count of records deleted
```

### JavadocReference
Cannot resolve symbol `deleteAllOlderThan(long)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link org.apache.jackrabbit.core.data.DataStore#deleteAllOlderThan(long)} is completed.
     *
     * @param deletedCount count of records deleted
```

### JavadocReference
Cannot resolve symbol `DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link DataStore#getAllIdentifiers()} fails.
     */
    void getAllIdentifiersFailed();
```

### JavadocReference
Cannot resolve symbol `getAllIdentifiers()`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link DataStore#getAllIdentifiers()} fails.
     */
    void getAllIdentifiersFailed();
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)} is completed.
     *
     * @param reference reference of the record retrieved
```

### JavadocReference
Cannot resolve symbol `getRecordFromReference(String)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a call to {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)} is completed.
     *
     * @param reference reference of the record retrieved
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataRecord`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)}.
     *
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `getRecordFromReference(String)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordFromReference(String)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataRecord`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)}.
     *
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `getRecordIfStored(DataIdentifier)`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `DataIdentifier`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java
    /**
     * Called when a {@link org.apache.jackrabbit.core.data.DataRecord} is retrieved via
     * {@link org.apache.jackrabbit.core.data.DataStore#getRecordIfStored(DataIdentifier)}.
     *
     * @param timeTaken time taken to perform the operation
```

### JavadocReference
Cannot resolve symbol `DataStore`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link DataStore#getAllIdentifiers()} is completed.
     */
    void getAllIdentifiersCompleted();
```

### JavadocReference
Cannot resolve symbol `getAllIdentifiers()`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/stats/BlobStatsCollector.java`
#### Snippet
```java

    /**
     * Called when {@link DataStore#getAllIdentifiers()} is completed.
     */
    void getAllIdentifiersCompleted();
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.core.data.DataStore`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
 * BlobStore wrapper for DataStore. Wraps Jackrabbit 2 DataStore and expose them as BlobStores
 * It also handles inlining binaries if there size is smaller than
 * {@link org.apache.jackrabbit.core.data.DataStore#getMinRecordLength()}
 */
public class DataStoreBlobStore
```

### JavadocReference
Cannot resolve symbol `getMinRecordLength()`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
 * BlobStore wrapper for DataStore. Wraps Jackrabbit 2 DataStore and expose them as BlobStores
 * It also handles inlining binaries if there size is smaller than
 * {@link org.apache.jackrabbit.core.data.DataStore#getMinRecordLength()}
 */
public class DataStoreBlobStore
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
             * @param repoId the repo id
             * @param uniqueSuffix the unique session suffix
             * @throws DataStoreException the data store exception
             * @throws IOException Signals that an I/O exception has occurred.
             */
```

### JavadocReference
Cannot resolve symbol `DataStoreException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
             * @return the long the earliest time of the available references
             * @throws IOException Signals that an I/O exception has occurred.
             * @throws DataStoreException the data store exception
             */
            @Override
```

### JavadocReference
Symbol `DELETED` is inaccessible from here
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/VersionGCSupport.java`
#### Snippet
```java
    /**
     * Returns documents that have a {@link NodeDocument#MODIFIED_IN_SECS} value
     * within the given range and the {@link NodeDocument#DELETED} set to
     * {@code true}. The two passed modified timestamps are in milliseconds
     * since the epoch and the implementation will convert them to seconds at
```

### JavadocReference
Cannot resolve symbol `UncheckedExecutionException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreService.java`
#### Snippet
```java
        /**
         * Returns the result of the last revision GC run. This method throws
         * an {@link UncheckedExecutionException} if the last run failed with an
         * exception.
         *
```

### JavadocReference
Cannot resolve symbol `Predicate`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBuilder.java`
#### Snippet
```java

    /**
     * @deprecated Use {@link #setNodeCachePathPredicate(Predicate)} instead.
     */
    @Deprecated
```

### JavadocReference
Symbol `PREVIOUS` is inaccessible from here
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Range.java`
#### Snippet
```java

/**
* A revision range for {@link NodeDocument#PREVIOUS} documents.
*/
final class Range {
```

### JavadocReference
Symbol `createOrUpdateNode(DocumentStore, UpdateOp)` is inaccessible from here
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Collision.java`
#### Snippet
```java
 * Other collisions like concurrent commits to trunk are handled earlier and
 * do not require collision marking.
 * See {@link Commit#createOrUpdateNode(DocumentStore, UpdateOp)}.
 */
class Collision {
```

### JavadocReference
Cannot resolve symbol `revision`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/UpdateOp.java`
#### Snippet
```java
     *
     * @param property the property name
     * @param revision the revision
     */
    void contains(@NotNull String property, boolean exists) {
```

### JavadocReference
Cannot resolve symbol `DocumentStore`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/package-info.java`
#### Snippet
```java

/**
 * Implementations of {@link DocumentStore} and {@link BlobStore} for relational databases.
 */
package org.apache.jackrabbit.oak.plugins.document.rdb;
```

### JavadocReference
Cannot resolve symbol `BlobStore`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/package-info.java`
#### Snippet
```java

/**
 * Implementations of {@link DocumentStore} and {@link BlobStore} for relational databases.
 */
package org.apache.jackrabbit.oak.plugins.document.rdb;
```

### JavadocReference
Cannot resolve symbol `Source`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDataSourceFactory.java`
#### Snippet
```java

    /**
     * A {@link Closeable} {@link DataSource} based on a generic {@link Source}
     * .
     */
```

### JavadocReference
Cannot resolve symbol `MongoDatabase`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java

    /**
     * Returns the {@link MongoDatabase} as passed in the URI of the
     * constructor.
     *
```

### JavadocReference
Cannot resolve symbol `MongoDatabase`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * constructor.
     *
     * @return the {@link MongoDatabase}.
     */
    public MongoDatabase getDatabase() {
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * @param uri the connection URI.
     * @param builder the client option defaults.
     * @throws MongoException if there are failures
     */
    public MongoConnection(String uri, MongoClientOptions.Builder builder)
```

### JavadocReference
Cannot resolve symbol `ReadConcern`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * Returns the default read concern depending on MongoDB deployment.
     * <ul>
     *     <li>{@link ReadConcern#MAJORITY}: for a MongoDB replica set with w=majority</li>
     *     <li>{@link ReadConcern#LOCAL}: for other cases</li>
     * </ul>
```

### JavadocReference
Cannot resolve symbol `MAJORITY`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * Returns the default read concern depending on MongoDB deployment.
     * <ul>
     *     <li>{@link ReadConcern#MAJORITY}: for a MongoDB replica set with w=majority</li>
     *     <li>{@link ReadConcern#LOCAL}: for other cases</li>
     * </ul>
```

### JavadocReference
Cannot resolve symbol `ReadConcern`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * <ul>
     *     <li>{@link ReadConcern#MAJORITY}: for a MongoDB replica set with w=majority</li>
     *     <li>{@link ReadConcern#LOCAL}: for other cases</li>
     * </ul>
     *
```

### JavadocReference
Cannot resolve symbol `LOCAL`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * <ul>
     *     <li>{@link ReadConcern#MAJORITY}: for a MongoDB replica set with w=majority</li>
     *     <li>{@link ReadConcern#LOCAL}: for other cases</li>
     * </ul>
     *
```

### JavadocReference
Cannot resolve symbol `MongoDatabase`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java

    /**
     * Returns the {@link MongoDatabase} with the given name.
     *
     * @return The {@link MongoDatabase}.
```

### JavadocReference
Cannot resolve symbol `MongoDatabase`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * Returns the {@link MongoDatabase} with the given name.
     *
     * @return The {@link MongoDatabase}.
     */
    public MongoDatabase getDatabase(@NotNull String name) {
```

### JavadocReference
Cannot resolve symbol `MongoClient`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java

    /**
     * @return the {@link MongoClient} for this connection.
     */
    public MongoClient getMongoClient() {
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * @param port The port.
     * @param database The database name.
     * @throws MongoException if there are failures
     */
    public MongoConnection(String host, int port, String database)
```

### JavadocReference
Cannot resolve symbol `WriteConcern`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * Returns the default write concern depending on MongoDB deployment.
     * <ul>
     *     <li>{@link WriteConcern#MAJORITY}: for a MongoDB replica set</li>
     *     <li>{@link WriteConcern#ACKNOWLEDGED}: for single MongoDB instance</li>
     * </ul>
```

### JavadocReference
Cannot resolve symbol `MAJORITY`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * Returns the default write concern depending on MongoDB deployment.
     * <ul>
     *     <li>{@link WriteConcern#MAJORITY}: for a MongoDB replica set</li>
     *     <li>{@link WriteConcern#ACKNOWLEDGED}: for single MongoDB instance</li>
     * </ul>
```

### JavadocReference
Cannot resolve symbol `WriteConcern`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * <ul>
     *     <li>{@link WriteConcern#MAJORITY}: for a MongoDB replica set</li>
     *     <li>{@link WriteConcern#ACKNOWLEDGED}: for single MongoDB instance</li>
     * </ul>
     *
```

### JavadocReference
Cannot resolve symbol `ACKNOWLEDGED`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     * <ul>
     *     <li>{@link WriteConcern#MAJORITY}: for a MongoDB replica set</li>
     *     <li>{@link WriteConcern#ACKNOWLEDGED}: for single MongoDB instance</li>
     * </ul>
     *
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
     *
     * @param uri the MongoDB URI
     * @throws MongoException if there are failures
     */
    public MongoConnection(String uri) throws MongoException {
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
     *                              descending index.
     * @param filter the filter expression for the partial index.
     * @throws MongoException if the operation fails.
     */
    static void createPartialIndex(MongoCollection<?> collection,
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
     * @param fields the fields of an index.
     * @return {@code true} if the index exists, {@code false} otherwise.
     * @throws MongoException if the operation fails.
     */
    static boolean hasIndex(MongoCollection<?> collection, String... fields)
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
     * @throws IllegalArgumentException if {@code fields} and {@code ascending}
     *          arrays have different lengths.
     * @throws MongoException if the operation fails.
     */
    static void createIndex(MongoCollection<?> collection,
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
     * @param unique whether values are unique.
     * @param sparse whether the index should be sparse.
     * @throws MongoException if the operation fails.
     */
    static void createIndex(MongoCollection<?> collection,
```

### JavadocReference
Cannot resolve symbol `ServerMonitorListener`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/CompositeServerMonitorListener.java`
#### Snippet
```java

/**
 * A composite {@link ServerMonitorListener}.
 */
class CompositeServerMonitorListener implements ServerMonitorListener {
```

### JavadocReference
Cannot resolve symbol `Cache`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/cache/NodeDocumentCache.java`
#### Snippet
```java
     * outside the critical section.
     *
     * @see Cache#get(Object, Callable)
     * @param key document key
     * @param valueLoader object used to retrieve the document
```

### JavadocReference
Cannot resolve symbol `get(Object, Callable)`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/cache/NodeDocumentCache.java`
#### Snippet
```java
     * outside the critical section.
     *
     * @see Cache#get(Object, Callable)
     * @param key document key
     * @param valueLoader object used to retrieve the document
```

### JavadocReference
Cannot resolve symbol `ClientSession`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoSessionFactory.java`
#### Snippet
```java

/**
 * Factory for {@link ClientSession}s.
 */
class MongoSessionFactory {
```

### JavadocReference
Cannot resolve symbol `org.apache.commons.pool2.impl.GenericObjectPool`
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
     * Defines the configuration of a connection pool. Currently we do not support all
     * available configuration options of the pool implementation.
     * (documentation copied from {@link org.apache.commons.pool2.impl.GenericObjectPool})
     */
    public static class PoolConfig {
```

### JavadocReference
Cannot resolve symbol `BulkRequest`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticBulkProcessorHandler.java`
#### Snippet
```java
     * Coordinates communication between bulk processes. It has a main controller registered at creation time and
     * de-registered on {@link ElasticIndexWriter#close(long)}. Each bulk request register a new party in
     * this Phaser in {@link OakBulkProcessorListener#beforeBulk(long, BulkRequest)} and de-register itself when
     * the request returns.
     */
```

### JavadocReference
Cannot resolve symbol `sendBulkUpdate(Collection, java.util.Collection, Map)`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
    /**
     * A conflicting ID assignment on insert. Used by
     * {@link #sendBulkUpdate(Collection, java.util.Collection, Map)} for
     * {@code UpdateOp} with {@code isNew == false}. An upsert with this
     * operation will always fail when there is no existing document.
```

### JavadocReference
Cannot resolve symbol `ClientSession`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java

    /**
     * Execute a callable with an optional {@link ClientSession}. A client
     * session is passed to {@link DocumentStoreCallable#call(ClientSession)} if
     * the connected MongoDB servers support client sessions, otherwise the
```

### JavadocReference
Cannot resolve symbol `ClientSession`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
    /**
     * Execute a callable with an optional {@link ClientSession}. A client
     * session is passed to {@link DocumentStoreCallable#call(ClientSession)} if
     * the connected MongoDB servers support client sessions, otherwise the
     * session is {@code null}. The client session must only be used within
```

### JavadocReference
Cannot resolve symbol `ClientSession`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
     * the connected MongoDB servers support client sessions, otherwise the
     * session is {@code null}. The client session must only be used within
     * the scope of the {@link DocumentStoreCallable#call(ClientSession)}.
     * 
     * @param callable the callable.
```

### JavadocReference
Cannot resolve symbol `MongoException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
     * @param keys the keys of the documents.
     * @return map with key to modification stamp mapping.
     * @throws MongoException if the call fails
     */
    @NotNull
```

### JavadocReference
Cannot resolve symbol `Stopwatch`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
/**
 * Format a time duration as human-readable string, inspired by
 * {@link Stopwatch#toString()}.
 */
public class TimeDurationFormatter {
```

### JavadocReference
Cannot resolve symbol `toString()`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
/**
 * Format a time duration as human-readable string, inspired by
 * {@link Stopwatch#toString()}.
 */
public class TimeDurationFormatter {
```

### JavadocReference
Cannot resolve symbol `org.osgi.annotation.versioning.Version`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/annotations/Internal.java`
#### Snippet
```java
 * Note that Oak APIs are considered internal use by default, unless the package
 * they appear in is annotated with a
 * {@link org.osgi.annotation.versioning.Version} annotation with a value
 * greater than "1.0.0".
 */
```

### JavadocReference
Cannot resolve symbol `Level`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/properties/SystemPropertySupplier.java`
#### Snippet
```java

    /**
     * Specify {@link Level} to use for "success" message.
     */
    public SystemPropertySupplier<T> logSuccessAs(Level successLogLevel) {
```

### JavadocReference
Cannot resolve symbol `Logger`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/properties/SystemPropertySupplier.java`
#### Snippet
```java

    /**
     * Specify the {@link Logger} to log to (defaults to this classes logger otherwise).
     */
    public SystemPropertySupplier<T> loggingTo(@NotNull Logger log) {
```

### JavadocReference
Symbol `TABLE_ATTR_FILENAME` is inaccessible from here
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         journal and gc. The table will be created if it
     *                         doesn't already exist. It should have a partition key
     *                         on "{@link DynamoDBClient#TABLE_ATTR_FILENAME}" and sort key on
     *                         "{@link DynamoDBClient#TABLE_ATTR_TIMESTAMP}".
     * @param lockTableName    Name of table used for managing the distributed lock.
```

### JavadocReference
Symbol `TABLE_ATTR_TIMESTAMP` is inaccessible from here
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         doesn't already exist. It should have a partition key
     *                         on "{@link DynamoDBClient#TABLE_ATTR_FILENAME}" and sort key on
     *                         "{@link DynamoDBClient#TABLE_ATTR_TIMESTAMP}".
     * @param lockTableName    Name of table used for managing the distributed lock.
     *                         The table will be created if it doesn't already
```

### JavadocReference
Symbol `LOCKTABLE_KEY` is inaccessible from here
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         The table will be created if it doesn't already
     *                         exist. It should have a partition key on
     *                         "{@link DynamoDBClient#LOCKTABLE_KEY}".
     * @param provisioningData DynamoDB provisioning data
     * @return The context.
```

### JavadocReference
Symbol `TABLE_ATTR_FILENAME` is inaccessible from here
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         journal and gc. The table will be created if it
     *                         doesn't already exist. It should have a partition key
     *                         on "{@link DynamoDBClient#TABLE_ATTR_FILENAME}" and sort key on
     *                         "{@link DynamoDBClient#TABLE_ATTR_TIMESTAMP}".
     * @param lockTableName    Name of table used for managing the distributed lock.
```

### JavadocReference
Symbol `TABLE_ATTR_TIMESTAMP` is inaccessible from here
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         doesn't already exist. It should have a partition key
     *                         on "{@link DynamoDBClient#TABLE_ATTR_FILENAME}" and sort key on
     *                         "{@link DynamoDBClient#TABLE_ATTR_TIMESTAMP}".
     * @param lockTableName    Name of table used for managing the distributed lock.
     *                         The table will be created if it doesn't already
```

### JavadocReference
Symbol `LOCKTABLE_KEY` is inaccessible from here
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         The table will be created if it doesn't already
     *                         exist. It should have a partition key on
     *                         "{@link DynamoDBClient#LOCKTABLE_KEY}".
     * @return The context.
     * @throws IOException
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.JcrConstants`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditor.java`
#### Snippet
```java
     * <p>
     * The passed in {@code NodeBuilder} must have
     * {@link org.apache.jackrabbit.JcrConstants#JCR_MIXINTYPES JCR_MIXINTYPES} with
     * {@link NodeTypeConstants#MIX_ATOMIC_COUNTER MIX_ATOMIC_COUNTER}.
     * If not it will be silently ignored.
```

### JavadocReference
Cannot resolve symbol `JCR_MIXINTYPES`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditor.java`
#### Snippet
```java
     * <p>
     * The passed in {@code NodeBuilder} must have
     * {@link org.apache.jackrabbit.JcrConstants#JCR_MIXINTYPES JCR_MIXINTYPES} with
     * {@link NodeTypeConstants#MIX_ATOMIC_COUNTER MIX_ATOMIC_COUNTER}.
     * If not it will be silently ignored.
```

### JavadocReference
Cannot resolve symbol `Logger`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/report/LoggingReporter.java`
#### Snippet
```java

    /**
     * Like {@link #LoggingReporter(Logger, int, int)}, however this constructor allow
     * to customize the verb of the log message.
     * <br>
```

### JavadocReference
Symbol `org.apache.jackrabbit.oak.security.authentication.token.TokenValidatorProvider.TokenValidator` is inaccessible from here
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/CommitMarker.java`
#### Snippet
```java

/**
 * Marker object to help the {@link org.apache.jackrabbit.oak.security.authentication.token.TokenValidatorProvider.TokenValidator}
 * identifying if login tokens have been issued and updated by the {@code TokenProvider}
 * implementation provided by this package and not through regular write
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/ServletExceptionWithCause.java`
#### Snippet
```java

/**
 * Utility class that links {@link ServletException} with support for
 * the exception chaining mechanism in {@link Throwable}.
 *
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/Installer.java`
#### Snippet
```java
     * @return the installation return code
     *
     * @throws ServletException if a servlet error occurs.
     * @throws IOException if an I/O error occurs.
     */
```

### JavadocReference
Cannot resolve symbol `ServletContext`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/SimpleWebdavServlet.java`
#### Snippet
```java
     *
     * @return repository
     * @see RepositoryAccessServlet#getRepository(ServletContext)
     */
    public Repository getRepository() {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryAccessServlet.java`
#### Snippet
```java
     * Checks if the repository is available via JNDI and returns it.
     * @return the repository or <code>null</code>
     * @throws ServletException if this servlet is not properly configured.
     */
    private Repository getRepositoryByJNDI() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryAccessServlet.java`
#### Snippet
```java
     * webapp. it registers itself as context attribute and acts as singleton.
     *
     * @throws ServletException if a same servlet is already registered or of
     * another initialization error occurs.
     */
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryAccessServlet.java`
#### Snippet
```java
     * Returns the bootstrap config
     * @return the bootstrap config
     * @throws ServletException if the config is not valid
     */
    private BootstrapConfig getConfig() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryAccessServlet.java`
#### Snippet
```java
     * Checks if the repository is available via RMI and returns it.
     * @return the repository or <code>null</code>
     * @throws ServletException if this servlet is not properly configured.
     */
    private Repository getRepositoryByRMI() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ByteSource`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/binary/BlobByteSource.java`
#### Snippet
```java

/**
 * {@link ByteSource} extension to work with Oak {@link Blob}s
 */
public final class BlobByteSource extends ByteSource {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * @param resp the response
     * @param loc the location for the redirect
     * @throws ServletException if an servlet error occurs.
     * @throws IOException if an I/O error occurs.
     */
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
    /**
     * Binds the repository to the JNDI context
     * @throws ServletException if an error occurs.
     */
    private void registerJNDI() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * Configures and starts the repository. It registers it then to the
     * RMI registry and bind is to the JNDI context if so configured.
     * @throws ServletException if an error occurs.
     */
    public void startup() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * {@link #repository} field if successful.
     *
     * @throws ServletException if an error occurs
     */
    private void initRepository() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * class documentation for a description of the algorithms used to register
     * the repository with an RMI registry.
     * @throws ServletException if an error occurs.
     */
    private void registerRMI() {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
    /**
     * Restarts the repository.
     * @throws ServletException if an error occurs.
     * @see #shutdown()
     * @see #startup()
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * Reads the configuration and initializes the {@link #config} field if
     * successful.
     * @throws ServletException if an error occurs.
     */
    private boolean configure() throws ServletException {
```

### JavadocReference
Cannot resolve symbol `ServletException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * webapp. it registers itself as context attribute and acts as singleton.
     *
     * @throws ServletException if a same servlet is already registered or of
     * another initialization error occurs.
     */
```

### JavadocReference
Cannot resolve symbol `stats()`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentCache.java`
#### Snippet
```java
        /**
         * Statistics of this cache. Do to the special access patter (see class
         * comment), we cannot rely on {@link Cache#stats()}.
         */
        @NotNull
```

### JavadocReference
Cannot resolve symbol `Function`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
 * by calling {@link #tryFlush(Flusher)}.
 * <p>
 * The {@link #setHead(Function, Option...)} method supports a timeout
 * {@link Option}, which can be retrieved through factory methods of this class.
 * <p>
```

### JavadocReference
Cannot resolve symbol `Supplier`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
 * {@link Option}, which can be retrieved through factory methods of this class.
 * <p>
 * Instance of this class must be {@link #bind(SegmentStore, SegmentIdProvider, Supplier)} bound} to
 * a {@code SegmentStore} otherwise its method throw {@code IllegalStateException}s.
 */
```

### JavadocReference
Cannot resolve symbol `Function`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
    /**
     * This implementation blocks if a concurrent call to
     * {@link #setHead(Function, Option...)} is already in
     * progress.
     *
```

### JavadocReference
Cannot resolve symbol `Predicate`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarReader.java`
#### Snippet
```java
     * in this TAR file.
     * <p>
     * The user-provided {@link Predicate} determines if entries belonging to a
     * specific generation should be inspected for binary references of not.
     * Given a generation number as input, if the predicate returns {@code
```

### JavadocReference
Cannot resolve symbol `Predicate`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarReader.java`
#### Snippet
```java
     *
     * @param collector      An instance of {@link Consumer}.
     * @param skipGeneration An instance of {@link Predicate}.
     */
    void collectBlobReferences(@NotNull Consumer<String> collector, Predicate<GCGeneration> skipGeneration) {
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.util.Text`
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/AuthorizableNodeName.java`
#### Snippet
```java
     * Default implementation of the {@code AuthorizableNodeName} interface
     * that uses the specified authorizable identifier as node name
     * {@link org.apache.jackrabbit.util.Text#escapeIllegalJcrChars(String) escaping}
     * any illegal JCR chars.
     */
```

### JavadocReference
Cannot resolve symbol `escapeIllegalJcrChars(String)`
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/AuthorizableNodeName.java`
#### Snippet
```java
     * Default implementation of the {@code AuthorizableNodeName} interface
     * that uses the specified authorizable identifier as node name
     * {@link org.apache.jackrabbit.util.Text#escapeIllegalJcrChars(String) escaping}
     * any illegal JCR chars.
     */
```

### JavadocReference
Symbol `getSupportedCredentials()` is inaccessible from here
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/credentials/CredentialsSupport.java`
#### Snippet
```java
 * custom {@link Credentials} implementations during authentication.
 *
 * @see org.apache.jackrabbit.oak.spi.security.authentication.AbstractLoginModule#getSupportedCredentials()
 * @see SimpleCredentialsSupport
 */
```

### JavadocReference
Cannot resolve symbol `JcrConstants`
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/plugins/tree/TreeUtil.java`
#### Snippet
```java
     * This method is a shortcut for calling {@link Tree#addChild(String)} and
     * {@link Tree#setProperty(String, Object, org.apache.jackrabbit.oak.api.Type)}
     * where the property name is {@link JcrConstants#JCR_PRIMARYTYPE}.
     * Note, that this method in addition verifies if the created tree exists
     * and is accessible in order to avoid {@link IllegalStateException} upon
```

### JavadocReference
Cannot resolve symbol `JCR_PRIMARYTYPE`
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/plugins/tree/TreeUtil.java`
#### Snippet
```java
     * This method is a shortcut for calling {@link Tree#addChild(String)} and
     * {@link Tree#setProperty(String, Object, org.apache.jackrabbit.oak.api.Type)}
     * where the property name is {@link JcrConstants#JCR_PRIMARYTYPE}.
     * Note, that this method in addition verifies if the created tree exists
     * and is accessible in order to avoid {@link IllegalStateException} upon
```

### JavadocReference
Cannot resolve symbol `JcrConstants`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/nodetype/NodeTypeConstants.java`
#### Snippet
```java
    
    /**
     * adding such mixin will allow the {@link JcrConstants#NT_UNSTRUCTURED} type under restricting
     * nodes such {@link JcrConstants#NT_FOLDER}
     */
```

### JavadocReference
Cannot resolve symbol `NT_UNSTRUCTURED`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/nodetype/NodeTypeConstants.java`
#### Snippet
```java
    
    /**
     * adding such mixin will allow the {@link JcrConstants#NT_UNSTRUCTURED} type under restricting
     * nodes such {@link JcrConstants#NT_FOLDER}
     */
```

### JavadocReference
Cannot resolve symbol `JcrConstants`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/nodetype/NodeTypeConstants.java`
#### Snippet
```java
    /**
     * adding such mixin will allow the {@link JcrConstants#NT_UNSTRUCTURED} type under restricting
     * nodes such {@link JcrConstants#NT_FOLDER}
     */
    String MIX_INDEXABLE = "mix:indexable";
```

### JavadocReference
Cannot resolve symbol `NT_FOLDER`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/nodetype/NodeTypeConstants.java`
#### Snippet
```java
    /**
     * adding such mixin will allow the {@link JcrConstants#NT_UNSTRUCTURED} type under restricting
     * nodes such {@link JcrConstants#NT_FOLDER}
     */
    String MIX_INDEXABLE = "mix:indexable";
```

### JavadocReference
Cannot resolve symbol `Filter`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/osgi/OsgiUtil.java`
#### Snippet
```java

    /**
     * Create a {@link Filter} using the passed Class as an objectClass and the map
     * as the filter attributes.
     * @param clazz the target objectClass
```

### JavadocReference
Cannot resolve symbol `customLog`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * convenience method for tracking the messages
     * 
     * @param customLog a potential custom logger. If null the static instance will be used
     * @param clock the clock used for tracking.
     * @param clazz the class to be used during the tracking of times
```

### JavadocReference
Cannot resolve symbol `clock`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * 
     * @param customLog a potential custom logger. If null the static instance will be used
     * @param clock the clock used for tracking.
     * @param clazz the class to be used during the tracking of times
     * @param message a custom message for the tracking.
```

### JavadocReference
Cannot resolve symbol `clazz`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * @param customLog a potential custom logger. If null the static instance will be used
     * @param clock the clock used for tracking.
     * @param clazz the class to be used during the tracking of times
     * @param message a custom message for the tracking.
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.stats.QueryStatCore`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StatisticManager.java`
#### Snippet
```java
     * @param statement  the query
     * @param millis     time it took to evaluate the query in milli seconds.
     * @see org.apache.jackrabbit.stats.QueryStatCore#logQuery(java.lang.String, java.lang.String, long)
     */
    public void logQueryEvaluationTime(String language, String statement, long millis) {
```

### JavadocReference
Cannot resolve symbol `logQuery(java.lang.String, java.lang.String, long)`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StatisticManager.java`
#### Snippet
```java
     * @param statement  the query
     * @param millis     time it took to evaluate the query in milli seconds.
     * @see org.apache.jackrabbit.stats.QueryStatCore#logQuery(java.lang.String, java.lang.String, long)
     */
    public void logQueryEvaluationTime(String language, String statement, long millis) {
```

### JavadocReference
Cannot resolve symbol `UncheckedExecutionException`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
     * @param key the key
     * @return the value
     * @throws UncheckedExecutionException
     */
    @Override
```

### JavadocReference
Cannot resolve symbol `evicted`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
         * @param stackMoveDistance the number of other entries to be moved to
         *        the top of the stack before moving an entry to the top
         * @param evicted  the eviction listener of this segment or {@code null} if none.
         */
        Segment(CacheLIRS<K, V> cache, long maxMemory, int averageMemory, int stackMoveDistance) {
```

### JavadocReference
Cannot resolve symbol `org.apache.jackrabbit.commons.xml.Exporter`
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/DocViewImportHandler.java`
#### Snippet
```java
     * {@inheritDoc}
     * <p>
     * See also {@link org.apache.jackrabbit.commons.xml.Exporter#exportProperties(Node)}
     * regarding special handling of multi-valued properties on export.
     */
```

### JavadocReference
Cannot resolve symbol `exportProperties(Node)`
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/DocViewImportHandler.java`
#### Snippet
```java
     * {@inheritDoc}
     * <p>
     * See also {@link org.apache.jackrabbit.commons.xml.Exporter#exportProperties(Node)}
     * regarding special handling of multi-valued properties on export.
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java

/**
 * Provider of {@link org.apache.solr.client.solrj.SolrClient}s instances
 */
public interface SolrServerProvider extends Closeable {
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java

    /**
     * provides an already initialized {@link org.apache.solr.client.solrj.SolrClient} specifically configured to be
     * used for searching.
     *
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java
     * used for searching.
     *
     * @return a {@link org.apache.solr.client.solrj.SolrClient} instance
     * @throws Exception if anything goes wrong while initializing the {@link org.apache.solr.client.solrj.SolrClient}
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java
     *
     * @return a {@link org.apache.solr.client.solrj.SolrClient} instance
     * @throws Exception if anything goes wrong while initializing the {@link org.apache.solr.client.solrj.SolrClient}
     */
    @Nullable
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java

    /**
     * provides an already initialized {@link org.apache.solr.client.solrj.SolrClient} specifically configured to be
     * used for indexing.
     *
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java
     * used for indexing.
     *
     * @return a {@link org.apache.solr.client.solrj.SolrClient} instance
     * @throws Exception if anything goes wrong while initializing the {@link org.apache.solr.client.solrj.SolrClient}
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java
     *
     * @return a {@link org.apache.solr.client.solrj.SolrClient} instance
     * @throws Exception if anything goes wrong while initializing the {@link org.apache.solr.client.solrj.SolrClient}
     */
    @Nullable
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java

    /**
     * provides an already initialized {@link org.apache.solr.client.solrj.SolrClient} to be used for either searching or
     * indexing, or both.
     *
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java
     * indexing, or both.
     *
     * @return a {@link org.apache.solr.client.solrj.SolrClient} instance
     * @throws Exception if anything goes wrong while initializing the {@link org.apache.solr.client.solrj.SolrClient}
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerProvider.java`
#### Snippet
```java
     *
     * @return a {@link org.apache.solr.client.solrj.SolrClient} instance
     * @throws Exception if anything goes wrong while initializing the {@link org.apache.solr.client.solrj.SolrClient}
     */
    @Nullable
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/OakSolrServer.java`
#### Snippet
```java

/**
 * An Oak {@link org.apache.solr.client.solrj.SolrClient}, caching a {@link org.apache.jackrabbit.oak.plugins.index.solr.server.SolrServerProvider}
 * for dispatching requests to indexing or searching specialized {@link org.apache.solr.client.solrj.SolrClient}s.
 */
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/OakSolrServer.java`
#### Snippet
```java
/**
 * An Oak {@link org.apache.solr.client.solrj.SolrClient}, caching a {@link org.apache.jackrabbit.oak.plugins.index.solr.server.SolrServerProvider}
 * for dispatching requests to indexing or searching specialized {@link org.apache.solr.client.solrj.SolrClient}s.
 */
public class OakSolrServer extends SolrClient {
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/SolrServerConfigurationProvider.java`
#### Snippet
```java
    /**
     * Provide a {@link SolrServerConfiguration} to be used to initialize a specific
     * {@link org.apache.solr.client.solrj.SolrClient} implementation.
     *
     * @return the {@link org.apache.jackrabbit.oak.plugins.index.solr.configuration.SolrServerConfiguration} holding the configuration parameters
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/SolrServerConfigurationProvider.java`
#### Snippet
```java

/**
 * {@link org.apache.solr.client.solrj.SolrClient} configuration provider.
 */
public interface SolrServerConfigurationProvider<S extends SolrServerProvider> {
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/SolrServerRegistry.java`
#### Snippet
```java

/**
 * A registry for {@link org.apache.solr.client.solrj.SolrClient}s
 */
public class SolrServerRegistry {
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/OakSolrConfiguration.java`
#### Snippet
```java

    /**
     * Provide the commit policy to be used by a given {@link org.apache.solr.client.solrj.SolrClient}
     *
     * @return a {@link org.apache.jackrabbit.oak.plugins.index.solr.configuration.OakSolrConfiguration.CommitPolicy}
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/SolrServerConfiguration.java`
#### Snippet
```java

/**
 * Configuration parameters for starting a {@link org.apache.solr.client.solrj.SolrClient}
 */
public abstract class SolrServerConfiguration<S extends SolrServerProvider> {
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrClient`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/NodeStateSolrServersObserver.java`
#### Snippet
```java
/**
 * An {@link org.apache.jackrabbit.oak.spi.commit.Observer} looking for changes on persisted Solr server configuration nodes.
 * If any change is done there, the related {@link org.apache.solr.client.solrj.SolrClient}s are shutdown and unregistered
 * from the {@link org.apache.jackrabbit.oak.plugins.index.solr.server.SolrServerRegistry}
 */
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.client.solrj.SolrQuery`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
/**
 * the {@link FilterQueryParser} can parse {@link org.apache.jackrabbit.oak.spi.query.Filter}s
 * and transform them into {@link org.apache.solr.client.solrj.SolrQuery}s and / or Solr query {@code String}s.
 */
class FilterQueryParser {
```

### JavadocReference
Cannot resolve symbol `org.apache.solr.common.SolrDocument`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
    /**
     * A cursor over Solr results. The result includes the path and the jcr:score pseudo-property as returned by Solr,
     * plus, eventually, the returned stored values if {@link org.apache.solr.common.SolrDocument} is included in the
     * {@link org.apache.jackrabbit.oak.plugins.index.solr.query.SolrQueryIndex.SolrResultRow}.
     */
```

### JavadocReference
Cannot resolve symbol `IndexReader`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexStatistics.java`
#### Snippet
```java

    /**
     * @param reader {@link IndexReader} for which statistics need to be collected.
     */
    LuceneIndexStatistics(IndexReader reader) {
```

### JavadocReference
Cannot resolve symbol `WordDelimiterFilter`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/OakAnalyzer.java`
#### Snippet
```java
     * @param matchVersion Lucene version to match See {@link #matchVersion above}
     * @param indexOriginalTerm flag to setup analyzer such that
     *                              {@link WordDelimiterFilter#PRESERVE_ORIGINAL}
     *                              is set to configure word delimiter
     */
```

### JavadocReference
Cannot resolve symbol `PRESERVE_ORIGINAL`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/OakAnalyzer.java`
#### Snippet
```java
     * @param matchVersion Lucene version to match See {@link #matchVersion above}
     * @param indexOriginalTerm flag to setup analyzer such that
     *                              {@link WordDelimiterFilter#PRESERVE_ORIGINAL}
     *                              is set to configure word delimiter
     */
```

### JavadocReference
Cannot resolve symbol `org.apache.lucene.codecs.Codec`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/OakCodec.java`
#### Snippet
```java

/**
 * Oak specific {@link org.apache.lucene.codecs.Codec}.
 *
 * It simply mimics {@link Lucene46Codec} but
```

### JavadocReference
Cannot resolve symbol `Lucene46Codec`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/OakCodec.java`
#### Snippet
```java
 * Oak specific {@link org.apache.lucene.codecs.Codec}.
 *
 * It simply mimics {@link Lucene46Codec} but
 * with uncompressed {@link StoredFieldsFormat}.
 */
```

### JavadocReference
Cannot resolve symbol `StoredFieldsFormat`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/OakCodec.java`
#### Snippet
```java
 *
 * It simply mimics {@link Lucene46Codec} but
 * with uncompressed {@link StoredFieldsFormat}.
 */
public class OakCodec extends FilterCodec {
```

### JavadocReference
Cannot resolve symbol `FacetsConfig`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/NodeStateFacetsConfig.java`
#### Snippet
```java

/**
 * {@link FacetsConfig} persisted extension.
 */
class NodeStateFacetsConfig extends FacetsConfig {
```

### JavadocReference
Cannot resolve symbol `DirectSpellChecker`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/SpellcheckHelper.java`
#### Snippet
```java

/**
 * Helper class for getting spellcheck results for a given term, calling a {@link DirectSpellChecker}
 * under the hood.
 */
```

### JavadocReference
Cannot resolve symbol `Lookup`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/SuggestHelper.java`
#### Snippet
```java

/**
 * Helper class for getting suggest results for a given term, calling a {@link Lookup}
 * implementation under the hood.
 */
```

### JavadocReference
Cannot resolve symbol `FSDirectory`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
     * This method would return the latest modification timestamp from the set of file{@code names}
     * on the file system.
     * The parameter {@code localDir} is expected to be an instance of {@link FSDirectory} (or wrapped one in
     * {@link FilterDirectory}. If this assumption doesn't hold, the method would return -1.
     * Each of file names are expected to be existing in {@code localDir}. If this fails the method shall return -1.
```

### JavadocReference
Cannot resolve symbol `FilterDirectory`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
     * on the file system.
     * The parameter {@code localDir} is expected to be an instance of {@link FSDirectory} (or wrapped one in
     * {@link FilterDirectory}. If this assumption doesn't hold, the method would return -1.
     * Each of file names are expected to be existing in {@code localDir}. If this fails the method shall return -1.
     * In case of any error while computing modified timestamps on the file system, the method shall return -1.
```

### JavadocReference
Cannot resolve symbol `Directory`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
     * In case of any error while computing modified timestamps on the file system, the method shall return -1.
     * @param names file names to evaluate on local FS
     * @param localDir {@link Directory} implementation to be used to get the files
     * @return latest timestamp or -1 (with logs) in case of any doubt
     */
```

### JavadocReference
Cannot resolve symbol `Directory`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
    /**
     * @param name file name to evaluate on local FS
     * @param localDir {@link Directory} implementation to be used to get the file
     * @param millis timestamp to compare file's modified timestamp against
     * @return {@code true} if file referred to be {@code name} is modified before {@code millis}; false otherwise
```

### JavadocReference
Cannot resolve symbol `SortedSetDocValuesFacetCounts`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/SecureSortedSetDocValuesFacetCounts.java`
#### Snippet
```java

/**
 * ACL filtered version of {@link SortedSetDocValuesFacetCounts}
 */
class SecureSortedSetDocValuesFacetCounts extends SortedSetDocValuesFacetCounts {
```

### JavadocReference
Cannot resolve symbol `CharTokenizer`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/CRTokenizer.java`
#### Snippet
```java

/**
 * A {@link CharTokenizer} dividing tokens at <code>\n</code>.
 *
 * This should be deprecated if / once LUCENE-5833 fix gets included in the Lucene version we ship.
```

### JavadocReference
Cannot resolve symbol `SortedSetDocValuesFacetCounts`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/StatisticalSortedSetDocValuesFacetCounts.java`
#### Snippet
```java

/**
 * ACL filtered version of {@link SortedSetDocValuesFacetCounts}
 */
class StatisticalSortedSetDocValuesFacetCounts extends SortedSetDocValuesFacetCounts {
```

### JavadocReference
Cannot resolve symbol `TokenFilter`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/TruncateTokenFilter.java`
#### Snippet
```java

/**
 * {@link TokenFilter} which truncates a token bigger than {#length}.
 */
class TruncateTokenFilter extends TokenFilter {
```

### JavadocReference
Cannot resolve symbol `Version`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/CompoundWordTokenFilterBase.java`
#### Snippet
```java
 * Base class for decomposition token filters.
 * <p id="version">
 * You must specify the required {@link Version} compatibility when creating
 * CompoundWordTokenFilterBase:
 * <ul>
```

### JavadocReference
Cannot resolve symbol `TokenFilter`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/FeaturePositionTokenFilter.java`
#### Snippet
```java

/**
 * {@link TokenFilter} which prepends the token / feature position plus underscore to the token itself
 */
final class FeaturePositionTokenFilter extends TokenFilter {
```

### JavadocReference
Cannot resolve symbol `Analyzer`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/LSHAnalyzer.java`
#### Snippet
```java

/**
 * {@link Analyzer} for LSH search
 */
public class LSHAnalyzer extends Analyzer {
```

### JavadocReference
Cannot resolve symbol `CharTokenizer`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/FVTokenizer.java`
#### Snippet
```java

/**
 * {@link CharTokenizer} which splits at whitespaces and commas
 */
class FVTokenizer extends CharTokenizer {
```

### JavadocReference
Cannot resolve symbol `org.apache.lucene.queries.mlt.MoreLikeThisQuery`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/MoreLikeThisHelper.java`
#### Snippet
```java

/**
 * Helper class for generating a {@link org.apache.lucene.queries.mlt.MoreLikeThisQuery} from the native query <code>String</code>
 */
public class MoreLikeThisHelper {
```

### JavadocReference
Cannot resolve symbol `org.apache.lucene.document.Document`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/IndexFieldProvider.java`
#### Snippet
```java
     * @param document {@link NodeState} of the document being indexed
     * @param indexDefinition {@link NodeState} of index definition
     * @return {@link Iterable} of fields that are to be added to {@link org.apache.lucene.document.Document} being prepared
     */
    @NotNull
```

### JavadocReference
Cannot resolve symbol `MergePolicy`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java

/**
 *  This {@link MergePolicy} extends Lucene's {@link org.apache.lucene.index.TieredMergePolicy} by providing mitigation
 *  to the aggressiveness of merges in case the index is under high commit load.
 *  That's because in the case of Oak we currently have that we store Lucene indexes in storage systems which require
```

### JavadocReference
Cannot resolve symbol `org.apache.lucene.index.TieredMergePolicy`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java

/**
 *  This {@link MergePolicy} extends Lucene's {@link org.apache.lucene.index.TieredMergePolicy} by providing mitigation
 *  to the aggressiveness of merges in case the index is under high commit load.
 *  That's because in the case of Oak we currently have that we store Lucene indexes in storage systems which require
```

### JavadocReference
Cannot resolve symbol `MergePolicy`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
 *  themselves some garbage collection task to be executed to get rid of deleted / unused files, similarly to what Lucene's
 *  merge does.
 *  So the bottom line is that with this {@link MergePolicy} we should have less but bigger merges, only after commit rate
 *  is under a certain threshold (in terms of added docs per sec and MBs per sec).
 *
```

### JavadocReference
Cannot resolve symbol `MergePolicy`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
    /** Default noCFSRatio.  If a merge's size is &gt;= 10% of
     *  the index, then we disable compound file for it.
     *  @see MergePolicy#setNoCFSRatio */
    public static final double DEFAULT_NO_CFS_RATIO = 0.1;

```

### JavadocReference
Cannot resolve symbol `setNoCFSRatio`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
    /** Default noCFSRatio.  If a merge's size is &gt;= 10% of
     *  the index, then we disable compound file for it.
     *  @see MergePolicy#setNoCFSRatio */
    public static final double DEFAULT_NO_CFS_RATIO = 0.1;

```

### JavadocReference
Cannot resolve symbol `Analyzer`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/FulltextQueryTermsProvider.java`
#### Snippet
```java
     * field.
     * @param text full text term
     * @param analyzer {@link Analyzer} being used while forming the query. Can be used to analyze text consistently.
     * @param indexDefinition {@link NodeState} of index definition
     * @return {@link Query} object to be OR'ed with query being prepared. {@code null}, if nothing is to be added.
```

### JavadocReference
Cannot resolve symbol `Query`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/FulltextQueryTermsProvider.java`
#### Snippet
```java
     * @param analyzer {@link Analyzer} being used while forming the query. Can be used to analyze text consistently.
     * @param indexDefinition {@link NodeState} of index definition
     * @return {@link Query} object to be OR'ed with query being prepared. {@code null}, if nothing is to be added.
     */
    @Nullable
```

### JavadocReference
Cannot resolve symbol `Directory`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakDirectory.java`
#### Snippet
```java

/**
 * Implementation of the Lucene {@link Directory} (a flat list of files)
 * based on an Oak {@link NodeBuilder}.
 */
```

### JavadocReference
Cannot resolve symbol `DataInput`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexFile.java`
#### Snippet
```java

    /**
     * @return if the file implementation supports copying data from {@link DataInput} directly.
     */
    boolean supportsCopyFromDataInput();
```

### JavadocReference
Symbol `getContributingStores(java.lang.String, java.util.function.Function)` is inaccessible from here
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/package-info.java`
#### Snippet
```java
 *  <p>The current implementation naively queries all stores whenever the child node list is prepared.
 *  This is obviously correct but may be slow.
 *  {@link org.apache.jackrabbit.oak.composite.CompositionContext#getContributingStores(java.lang.String, java.util.function.Function)}
 */
@Version("0.5.0")
```

### JavadocReference
Symbol `ACTIONS` is inaccessible from here
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentHasPermissionTest2.java`
#### Snippet
```java
 *
 * - the path argument a random path out of the deep tree
 * - the actions are randomly selected from the combinations listed in {@link #ACTIONS}
 */
public class ConcurrentHasPermissionTest2 extends ConcurrentHasPermissionTest {
```

## RuleId[id=ManualArrayToCollectionCopy]
### ManualArrayToCollectionCopy
Manual array to collection copy
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
                String[] vca1 = getOldDef().getValueConstraints();
                Set<String> set1 = new HashSet<String>();
                for (String aVca1 : vca1) {
                    set1.add(aVca1);
                }
```

### ManualArrayToCollectionCopy
Manual array to collection copy
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
                String[] vca2 = getNewDef().getValueConstraints();
                Set<String> set2 = new HashSet<String>();
                for (String aVca2 : vca2) {
                    set2.add(aVca2);
                }
```

### ManualArrayToCollectionCopy
Manual array to collection copy
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/NamespacePrefixNodestoreChecker.java`
#### Snippet
```java
        
        public Context(String[] prefixes) {
            for (String prefix : prefixes ) {
                validPrefixes.add(prefix);
            }
```

## RuleId[id=UnnecessarySemicolon]
### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
    public enum FETCHFIRSTSYNTAX {
        FETCHFIRST, LIMIT, TOP
    };

    /**
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
    private enum Format {
        JSON, JSONARRAY, CSV
    };

    private static final RDBJSONSupport JSON = new RDBJSONSupport(false);
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3RequestDecorator.java`
#### Snippet
```java
        ObjectMetadata metadata = request.getObjectMetadata() == null
                                      ? new ObjectMetadata()
                                      : request.getObjectMetadata();;
        switch (getDataEncryption()) {
            case SSE_S3:
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3RequestDecorator.java`
#### Snippet
```java
     */
    private enum DataEncryption {
        SSE_S3, SSE_KMS, SSE_C, NONE;
    }

```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3RequestDecorator.java`
#### Snippet
```java
        ObjectMetadata metadata = request.getNewObjectMetadata() == null
                                      ? new ObjectMetadata()
                                      : request.getNewObjectMetadata();;
        switch (getDataEncryption()) {
            case SSE_S3:
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryOptions.java`
#### Snippet
```java
        // the default setting
        DEFAULT
    };

    public QueryOptions() {
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java

        Iterator<ResultRowImpl> it;
        final Iterator<ResultRowImpl> leftRows = facetMerger.getLeftIterator();;
        final Iterator<ResultRowImpl> rightRows = facetMerger.getRightIterator();
        Iterator<ResultRowImpl> leftIter = leftRows;
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java`
#### Snippet
```java
            return ASC.equals(fromIndexMeta(indexMeta));
        }
    };
    
    String TYPE = "ordered";
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/inventory/IndexDefinitionPrinter.java`
#### Snippet
```java
    private NodeStore nodeStore;
    
    private String filter = "{\"properties\":[\"*\", \"-:childOrder\"],\"nodes\":[\"*\", \"-:*\"]}";;

    public IndexDefinitionPrinter() {
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/credentials/SimpleCredentialsSupport.java`
#### Snippet
```java
    private static final SimpleCredentialsSupport INSTANCE = new SimpleCredentialsSupport();

    private SimpleCredentialsSupport() {};

    public static CredentialsSupport getInstance() {
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/Clock.java`
#### Snippet
```java
            return "Clock.Virtual";
        }
    };
}

```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/CheckpointsCommand.java`
#### Snippet
```java
    public void execute(String... args) throws Exception {

        CheckpointsOptions options = new CheckpointsOptions("checkpoints {<path>|<mongo-uri>|<jdbc-uri>} [list|rm-all|rm-unreferenced|rm <checkpoint>|info <checkpoint>|set <checkpoint> <name> [<value>]] [--segment]").parse(args);;
        if (options.isHelp()) {
            options.printHelpOn(System.out);
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authentication/external/CustomExternalIdentityProvider.java`
#### Snippet
```java
    private Set<String> groupIds = new HashSet<>();

    public CustomExternalIdentityProvider() {};


```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/monitor/ExternalIdentityMonitor.java`
#### Snippet
```java
     * @param retryCount The number of retries needed to complete the sync.
     */
    default void doneSyncExternalIdentity(long timeTakenNanos, @NotNull SyncResult result, int retryCount) {};

    /**
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/monitor/ExternalIdentityMonitor.java`
#### Snippet
```java
     * @param result The result of the sync operation.
     */
    default void doneSyncId(long timeTakenNanos, @NotNull SyncResult result) {};

    /**
```

### UnnecessarySemicolon
Unnecessary semicolon `;`
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/monitor/ExternalIdentityMonitor.java`
#### Snippet
```java
     * @param syncException The sync exception.
     */
    default void syncFailed(@NotNull SyncException syncException) {};

    @Override
```

## RuleId[id=UnaryPlus]
### UnaryPlus
Unary `+` operator
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGC.java`
#### Snippet
```java
                    return "Consistency check completed in "
                        + formatTime(nanoTime() - t0) + ". " +
                        + missing + " missing blobs found (details in the log).";
                }
            });
```

### UnaryPlus
Unary `+` operator
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
            
            LOG.debug("S3 Backend initialized in [{}] ms",
                +(System.currentTimeMillis() - startTime.getTime()));
        } catch (Exception e) {
            LOG.error("Error ", e);
```

### UnaryPlus
Unary `+` operator
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
                }
                LOG.debug("Backend initialized. duration={}",
                          +(System.currentTimeMillis() - start));

                // settings pertaining to DataRecordAccessProvider functionality
```

## RuleId[id=SimplifyStreamApiCallChains]
### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/COWNodeStore.java`
#### Snippet
```java
        branchStore.merge(b, EmptyHook.INSTANCE, CommitInfo.EMPTY);

        branchStore.addObserver((root, info) -> observers.stream().forEach(o -> o.contentChanged(root, info)));
        this.branchStore = branchStore;
    }
```

### SimplifyStreamApiCallChains
The 'filter().findFirst().isPresent()' chain can be replaced with 'anyMatch()'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/IndexVersionOperation.java`
#### Snippet
```java

    private static boolean isSameProductVersionBaseIndexPresent(List<IndexName> reverseSortedIndexNameList, IndexName activeIndexNameObject) {
        return reverseSortedIndexNameList.stream().filter(n -> (n.getBaseName().equals(activeIndexNameObject.getBaseName())
                && n.getProductVersion() == activeIndexNameObject.getProductVersion()
                && n.getCustomerVersion() == 0)).findFirst().isPresent();
    }

```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStoreStats.java`
#### Snippet
```java
        if (newValue == 1) {
            if (nodePathCounts.size() >= nodePathCountSizeLimit) {
                nodePathCounts.entrySet().stream().forEach(e -> nodePathCounts.put(e.getKey(), e.getValue() - 1));
                maxNodePathCount--;
                removeZeros = true;
```

### SimplifyStreamApiCallChains
''stream().forEach()'' can be replaced with 'forEach()'' (may change semantics)
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStoreStats.java`
#### Snippet
```java
            maxNodePathCount = newValue;
            if (maxNodePathCount >= nodePathCountValueLimit) {
                nodePathCounts.entrySet().stream().forEach(e -> nodePathCounts.put(e.getKey(), e.getValue() / 2));
                maxNodePathCount /= 2;
                removeZeros = true;
```

## RuleId[id=StringOperationCanBeSimplified]
### StringOperationCanBeSimplified
`new String()` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/StringCache.java`
#### Snippet
```java
        String cached = STRING_CACHE[index];
        if (!s.equals(cached)) {
            cached = new String(s); // avoid referring to 
            STRING_CACHE[index] = cached;
        }
```

### StringOperationCanBeSimplified
Call to `toString()` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
                        while (rs.next()) {
                            String data = extractFields(rs, tableStats);
                            result.put("_data", data.toString());
                        }
                    }
```

### StringOperationCanBeSimplified
Call to `toString()` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
                        while (rs.next()) {
                            String data = extractFields(rs, tableStats);
                            result.put("_data", data.toString());
                        }
                    }
```

### StringOperationCanBeSimplified
Unnecessary empty string argument
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
    private static void printHelp() {
        System.err.println("Export Apache OAK RDB data to JSON files");
        System.err.println("");
        System.err.println("Generic options:");
        System.err.println("  --help                             produce this help message");
```

### StringOperationCanBeSimplified
Unnecessary empty string argument
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
        System.err.println("  --help                             produce this help message");
        System.err.println("  --version                          show version information");
        System.err.println("");
        System.err.println("JDBC options:");
        System.err.println("  -j/--jdbc-url JDBC-URL             JDBC URL of database to connect to");
```

### StringOperationCanBeSimplified
Unnecessary empty string argument
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
        System.err.println("  -c/--collection table              table name (defaults to 'nodes')");
        System.err.println("  -q/--query query                   SQL where clause (minus 'where')");
        System.err.println("");
        System.err.println("Dump file options:");
        System.err.println("  --columns column-names             column names (comma separated)");
```

### StringOperationCanBeSimplified
Unnecessary empty string argument
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
        System.err.println("  --lobdir dir                       name of DB2 DEL export file LOB directory");
        System.err.println("                                     (defaults to ./lobdir under the dump file)");
        System.err.println("");
        System.err.println("Output options:");
        System.err.println("  -o/--out file                      Output to name file (instead of stdout)");
```

### StringOperationCanBeSimplified
Unnecessary string length argument
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
            broadcaster = InMemoryBroadcaster.INSTANCE;
        } else if (broadcast.startsWith("udp:")) {
            String config = broadcast.substring("udp:".length(), broadcast.length());
            broadcaster = new UDPBroadcaster(config);
        } else if (broadcast.startsWith("tcp:")) {
```

### StringOperationCanBeSimplified
Unnecessary string length argument
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
            broadcaster = new UDPBroadcaster(config);
        } else if (broadcast.startsWith("tcp:")) {
            String config = broadcast.substring("tcp:".length(), broadcast.length());
            broadcaster = new TCPBroadcaster(config);
        } else {
```

### StringOperationCanBeSimplified
Call to `substring()` is redundant
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
                if (sb == null) {
                    sb = new StringBuilder(value.length() * 2);
                    sb.append(value.substring(0, i));
                }
                sb.append(replace);
```

### StringOperationCanBeSimplified
Call to `substring()` is redundant
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PathUtils.java`
#### Snippet
```java
                        result.append('/');
                    }
                    result.append(path.substring(i0, i1));
                }
            }
```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
            copyInThread(p.getErrorStream(), err);
            p.waitFor();
            String e = new String(err.toByteArray(), "UTF-8");
            if (e.length() > 0) {
                throw new RuntimeException(e);
```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
                throw new RuntimeException(e);
            }
            String output = new String(out.toByteArray(), "UTF-8");
            return output;
        } catch (Exception e) {
```

### StringOperationCanBeSimplified
Unnecessary string length argument
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryRecorder.java`
#### Snippet
```java
                }
            }
            String newQuery = query.substring(0, pathIndex) + "/jcr:root/" + path + query.substring(end, query.length());
            query = newQuery;
        }
```

### StringOperationCanBeSimplified
Call to `substring()` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
            recomputed.append(original);
        } else {
            recomputed.append(original.substring(0, origUpper.indexOf(where) + whereOffset));
            recomputed.append(query.getConstraint());
            if (origUpper.indexOf(orderBy) > -1) {
```

### StringOperationCanBeSimplified
Call to `substring()` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsMBeanImpl.java`
#### Snippet
```java
        if (statement.length() > MAX_QUERY_SIZE) {
            statement = new StringBuilder().append("Truncated query: ")
                    .append(statement.substring(0, MAX_QUERY_SIZE >> 1))
                    .append(" ...... ")
                    .append(statement.substring(statement.length() - (MAX_QUERY_SIZE >> 1)))
```

### StringOperationCanBeSimplified
Unnecessary string length argument
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/PersistentCacheCommand.java`
#### Snippet
```java
         for (String n : meta.keySet()) {
             if (n.startsWith("name.")) {
                 String mapName = n.substring(5, n.length());
                 if (map.length() > 0 && !map.equalsIgnoreCase(mapName)) {
                     continue;
```

### StringOperationCanBeSimplified
Call to `toString()` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/JsonIndexCommand.java`
#### Snippet
```java
            value = "$" + getValueOrVariable("\"" + value.substring(1) + "\"");
        }
        return data.get(value.toString());
    }

```

### StringOperationCanBeSimplified
Inefficient conversion from ByteArrayOutputStream
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            Base64.decode(value, out);
            value = new String(out.toByteArray(), "UTF-8");
        }
        return value;
```

### StringOperationCanBeSimplified
`toString()` call can be replaced with 'contentEquals()'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/JackrabbitNodeState.java`
#### Snippet
```java
        for (Path.Element element : path.getElements()) {
            if (builder.length() > 1
                    || (builder.length() == 1 && !"/".equals(builder.toString()))) {
                builder.append('/');
            }
```

### StringOperationCanBeSimplified
Unnecessary empty string argument
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/AggregateNodeSearcher.java`
#### Snippet
```java
        // /jcr:root//element(*, ActivityType)[((id = 1234 or id = '1354'))] order by jcr:created
        // descending
        StringBuilder statement = new StringBuilder("");
        statement.append("/jcr:root")
            .append("//element(*, ")
```

### StringOperationCanBeSimplified
`new String()` is redundant
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeState.java`
#### Snippet
```java
    // the root store will be ignored

    static final String STOP_COUNTING_CHILDREN = new String(CompositeNodeState.class.getName() + ".stopCountingChildren");

    private final NodeMap<NodeState> nodeStates;
```

## RuleId[id=UnnecessaryCallToStringValueOf]
### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
        String encodedValue() {
            if (hasLengthInfo()) {
                return blobId + SEP + String.valueOf(length);
            } else {
                return blobId;
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/ReadWriteVersionManager.java`
#### Snippet
```java
            checkState(history.hasChildNode(JCR_ROOTVERSION));
            NodeBuilder v = history.getChildNode(JCR_ROOTVERSION);
            return String.valueOf(v.getProperty(JCR_SUCCESSORS).count() + 1) + ".0";
        }
    }
```

### UnnecessaryCallToStringValueOf
Unnecessary `Long.toString()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ClusterNodesCommand.java`
#### Snippet
```java
            e.put(sStarted, start <= 0 ? "-" : df.format(new Date(start)));
            e.put(sLeaseEnd, leaseEnd == 0 ? "-" : df.format(new Date(leaseEnd)));
            e.put(sLeft, (left < -999) ? "-" : (Long.toString(left) + "s"));
            e.put(sRecoveryBy,
                    c.getRecoveryBy() == null ? (c.isRecoveryNeeded(now) ? "!" : "-") : Long.toString(c.getRecoveryBy()));
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                    File trackingFileParent = new File(FilenameUtils.concat(trackPath, "blobids"));
                    File trackingFile = new File(trackingFileParent,
                        "blob-" + String.valueOf(System.currentTimeMillis()) + ".gen");
                    FileUtils.copyFile(idTemp, trackingFile);
                }
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
        for (int i = 0; i < WRITERS; i++) {
            /* Each writer will write to a directory of the form load-b-i */
            addBackgroundJob(new BlobWriter(String.valueOf(context.getIncrement() + "-b-" + i), 1,
                    null));
        }
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeRelationshipSuite.java`
#### Snippet
```java
                    // check if last bucket has enough space
                    if (maxNum < 0 || numChildNodes(parentNode) >= BUCKET_SIZE) {
                        parentNode = dayNode.addNode("@" + String.valueOf(maxNum + 1),
                            NodeTypeConstants.NT_OAK_UNSTRUCTURED);
                    }
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeRelationshipSuite.java`
#### Snippet
```java
        // Add users
        for (int idx = 0; idx < NUM_USERS * context.getIncrement(); idx++) {
            String name = String.valueOf((char) (random.nextInt(26) + 'a')) + CTX_USER + context
                .getIncrement() + "_" + idx;
            User user = userMgr.createUser(name, name);
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeRelationshipSuite.java`
#### Snippet
```java
        // Add groups and include random number of members
        for (int idx = 0; idx < NUM_GROUPS * context.getIncrement(); idx++) {
            String name = String.valueOf((char) (random.nextInt(26) + 'a')) + CTX_GROUP + context
                .getIncrement() + idx;
            Group group = userMgr.createGroup(name);
```

### UnnecessaryCallToStringValueOf
Unnecessary `String.valueOf()` call
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
          if (resource.hasProperty("jcr:data")) {
              double length = resource.getProperty("jcr:data").getLength();
              size = String.valueOf(Math.round(Math.ceil(length / 1000d))) + "k";
          }
          DateFormat df = SimpleDateFormat.getDateInstance(SimpleDateFormat.LONG);
```

## RuleId[id=WebProperties]
### WebProperties
Cannot resolve class or package 'felix'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java

    <listener>
        <listener-class>org.apache.felix.http.proxy.ProxyListener</listener-class>
    </listener>

```

### WebProperties
Cannot resolve class or package 'http'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java

    <listener>
        <listener-class>org.apache.felix.http.proxy.ProxyListener</listener-class>
    </listener>

```

### WebProperties
Cannot resolve class or package 'proxy'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java

    <listener>
        <listener-class>org.apache.felix.http.proxy.ProxyListener</listener-class>
    </listener>

```

### WebProperties
Cannot resolve class 'ProxyListener'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java

    <listener>
        <listener-class>org.apache.felix.http.proxy.ProxyListener</listener-class>
    </listener>

```

### WebProperties
'org.apache.jackrabbit.j2ee.RepositoryStartupServlet' is not assignable to 'javax.servlet.Servlet,jakarta.servlet.Servlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            or if its accessible via RMI, you do not need to use this servlet.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryStartupServlet</servlet-class>

        <init-param>
```

### WebProperties
'org.apache.jackrabbit.j2ee.RepositoryAccessServlet' is not assignable to 'javax.servlet.Servlet,jakarta.servlet.Servlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>

        <init-param>
```

### WebProperties
'org.apache.jackrabbit.j2ee.SimpleWebdavServlet' is not assignable to 'javax.servlet.Servlet,jakarta.servlet.Servlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            The webdav servlet that connects HTTP request to the repository.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.SimpleWebdavServlet</servlet-class>

        <init-param>
```

### WebProperties
'org.apache.jackrabbit.j2ee.JcrRemotingServlet' is not assignable to 'javax.servlet.Servlet,jakarta.servlet.Servlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            The servlet used to remote JCR calls over HTTP.
        </description>
        <servlet-class>org.apache.jackrabbit.j2ee.JcrRemotingServlet</servlet-class>
        <init-param>
            <param-name>missing-auth-mapping</param-name>
```

### WebProperties
Cannot resolve class or package 'servlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

```

### WebProperties
Cannot resolve class or package 'remote'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

```

### WebProperties
Cannot resolve class 'RemoteBindingServlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
    <servlet>
      <servlet-name>RMI</servlet-name>
      <servlet-class>org.apache.jackrabbit.servlet.remote.RemoteBindingServlet</servlet-class>
    </servlet>

```

### WebProperties
Cannot resolve class or package 'felix'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            routes the call to /osgi/* to servlets running withing OSGi
        </description>
        <servlet-class>org.apache.felix.http.proxy.ProxyServlet</servlet-class>
    </servlet>
    <!-- ====================================================================== -->
```

### WebProperties
Cannot resolve class or package 'http'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            routes the call to /osgi/* to servlets running withing OSGi
        </description>
        <servlet-class>org.apache.felix.http.proxy.ProxyServlet</servlet-class>
    </servlet>
    <!-- ====================================================================== -->
```

### WebProperties
Cannot resolve class or package 'proxy'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            routes the call to /osgi/* to servlets running withing OSGi
        </description>
        <servlet-class>org.apache.felix.http.proxy.ProxyServlet</servlet-class>
    </servlet>
    <!-- ====================================================================== -->
```

### WebProperties
Cannot resolve class 'ProxyServlet'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
            routes the call to /osgi/* to servlets running withing OSGi
        </description>
        <servlet-class>org.apache.felix.http.proxy.ProxyServlet</servlet-class>
    </servlet>
    <!-- ====================================================================== -->
```

### WebProperties
'org.apache.jackrabbit.j2ee.JcrApiNotFoundException' is not assignable to 'java.lang.Throwable'
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java

    <error-page>
        <exception-type>org.apache.jackrabbit.j2ee.JcrApiNotFoundException</exception-type>
        <location>/error/classpath.jsp</location>
    </error-page>
```

## RuleId[id=DuplicatedCode]
### DuplicatedCode
Duplicated code
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/ExternalLoginModule.java`
#### Snippet
```java
        Credentials creds;
        if (credentials instanceof ImpersonationCredentials) {
            creds = ((ImpersonationCredentials) credentials).getBaseCredentials();
        } else {
            creds = credentials;
        }
        Map<String, Object> attributes = new HashMap<>();
        Object shared = sharedState.get(SHARED_KEY_ATTRIBUTES);
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/run/ElasticMain.java`
#### Snippet
```java
        Command c = MODES.getCommand("benchmark");
        if (args.length > 0) {
            c = MODES.getCommand(args[0]);

            if (c == null) {
                c = MODES.getCommand("benchmark");
            }

            args = copyOfRange(args, 1, args.length);
        }

        c.execute(args);
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/MultiFilterSplitOrderBySearcher.java`
#### Snippet
```java
        searchCommon(qm, context);

        Query q = getQuery(qm, context);
        QueryResult r = q.execute();
        RowIterator it = r.getRows();

        for (int rows = 0; it.hasNext() && rows < LIMIT; rows++) {
            Node node = it.nextRow().getNode();
            LOG.debug(node.getPath());
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/SearchScalabilityBenchmark.java`
#### Snippet
```java
        Query q = getQuery(qm, context);
        QueryResult r = q.execute();
        RowIterator it = r.getRows();
        for (int rows = 0; it.hasNext() && rows < MAX_RESULTS; rows++) {
            Node node = it.nextRow().getNode();
            LOG.debug(node.getPath());
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/MultiFilterSplitOrderBySearcher.java`
#### Snippet
```java
        Query stdQuery = getStandardQuery(qm, context);
        stdQuery.setLimit(LIMIT);
        QueryResult stdResult = stdQuery.execute();
        RowIterator stdIt = stdResult.getRows();

        // Iterate the standard shown first
        for (int rows = 0; stdIt.hasNext() && rows < LIMIT; rows++) {
            Node node = stdIt.nextRow().getNode();
            LOG.debug(node.getPath());
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeRelationshipSuite.java`
#### Snippet
```java
        createLoad(context);
        long loadFinish = System.currentTimeMillis();

        context.getMap().put(CTX_ROOT_NODE_NAME_PROP, ROOT_NODE_NAME);
        context.getMap().put(CTX_USER, users);
        context.getMap().put(CTX_GROUP, groups);

        waitBeforeIterationFinish(loadFinish);

        if (LOG.isDebugEnabled()) {
            LOG.debug("Finished beforeIteration()");
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
        afterSuite();

        for (Session session : sessions) {
            if (session.isLive()) {
                session.logout();
            }
        }

        this.threads = null;
        this.sessions = null;
        this.credentials = null;
        this.repository = null;
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BasicWriteTest.java`
#### Snippet
```java
        byte[] data = new byte[blobSize];
        new Random().nextBytes(data);

        Node content = file.addNode("jcr:content", "nt:resource");
        content.setProperty("jcr:mimeType", "application/octet-stream");
        content.setProperty("jcr:lastModified", Calendar.getInstance());
        content.setProperty("jcr:data", new ByteArrayInputStream(data));
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentHasPermissionTest.java`
#### Snippet
```java
            int allows = 0;
            int denies = 0;
            long start = System.currentTimeMillis();
            for (int i = 0; i < cnt; i++) {
                String path = getRandom(allPaths);

                String actions = getRandom(ACTIONS);
                if (testSession.hasPermission(path, actions)) {
                    allows++;
                } else {
                    denies++;
                }
            }
            long end = System.currentTimeMillis();
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentHasPermissionTest2.java`
#### Snippet
```java
        UserManager uMgr = ((JackrabbitSession) adminSession).getUserManager();
        for (int i = 0; i < 100; i++) {
            Authorizable a = uMgr.getAuthorizable("group" + i);
            if (a == null) {
                a = uMgr.createGroup("group" + i);
                principals.add(a.getPrincipal());
            }
        }
        super.createDeepTree();
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentHasPermissionTest2.java`
#### Snippet
```java
        super.visitingNode(node, i);

        AccessControlManager acMgr = node.getSession().getAccessControlManager();
        Privilege[] privileges = new Privilege[] {
                acMgr.privilegeFromName(Privilege.JCR_READ),
                acMgr.privilegeFromName(Privilege.JCR_READ_ACCESS_CONTROL)
        };
        if (!node.getPath().contains("rep:policy")) {
            if (++counter == 100) {
                addPolicy(acMgr, node, privileges, principals);
                counter = 0;
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ContinuousRevisionGCTest.java`
#### Snippet
```java
                    for (int j = 0; j < 1000; j++) {
                        n.addNode("child-" + j, NODE_TYPE);
                    }
                    s.save();
                    if (rand.nextFloat() <= GARBAGE_RATIO) {
                        n.remove();
                        s.save();
                    }
                    System.out.print(".");
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/DescendantSearchTest.java`
#### Snippet
```java
        for (int i = 0; i < NODE_COUNT; i++) {
            Node node = root.addNode("node" + i, "nt:unstructured");
            for (int j = 0; j < NODE_COUNT; j++) {
                Node child = node.addNode("node" + j, "nt:unstructured");
                child.setProperty("testcount", j);
            }
            session.save();
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/DescendantSearchTest.java`
#### Snippet
```java
        QueryManager manager = session.getWorkspace().getQueryManager();
        for (int i = 0; i < NODE_COUNT; i++) {
            Query query = createQuery(manager, i);
            NodeIterator iterator = query.execute().getNodes();
            while (iterator.hasNext()) {
                Node node = iterator.nextNode();
                if (node.getProperty("testcount").getLong() != i) {
                    throw new Exception("Invalid test result: " + node.getPath());
                }
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
                Tree t = TreeFactory.createTree(builder.child(INDEX_DEFINITIONS_NAME));
                t.setProperty("jcr:primaryType", "nt:unstructured", NAME);

                NodeBuilder uuid = IndexUtils.createIndexDefinition(builder.child(INDEX_DEFINITIONS_NAME), "uuid", true, true,
                        ImmutableList.<String>of("jcr:uuid"), null);
                uuid.setProperty("info",
                        "Oak index for UUID lookup (direct lookup of nodes with the mixin 'mix:referenceable').");

                t = t.addChild(name);
                t.setProperty("jcr:primaryType", INDEX_DEFINITIONS_NODE_TYPE, NAME);
                t.setProperty(COMPAT_MODE, 2L, LONG);
                t.setProperty(TYPE_PROPERTY_NAME, type, STRING);
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
                t = t.addChild(INDEX_RULES);
                t.setOrderableChildren(true);
                t.setProperty("jcr:primaryType", "nt:unstructured", NAME);

                t = t.addChild("nt:base");
                t.setProperty("jcr:primaryType", "nt:unstructured", NAME);

                Tree propnode = t.addChild(PROP_NODE);
                propnode.setOrderableChildren(true);
                propnode.setProperty("jcr:primaryType", "nt:unstructured", NAME);
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/GetGroupPrincipalsTest.java`
#### Snippet
```java
        Group gr = userManager.createGroup(new PrincipalImpl(GROUP), "test");
        gr.addMember(user);

        for (int i = 1; i < numberOfGroups; i++) {
            Group g = userManager.createGroup(new PrincipalImpl(GROUP + i), "test");
            if (!nestedGroups) {
                g.addMember(user);
            } else {
                g.addMember(gr);
            }
            gr = g;
        }
        session.save();
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/LoginWithMembershipTest.java`
#### Snippet
```java
            for (int i = 1; i < numberOfGroups; i++) {
                Group g = userManager.createGroup(new PrincipalImpl(GROUP + i), "test");
                if (!nestedGroups) {
                    g.addMember(user);
                } else {
                    g.addMember(gr);
                }
                gr = g;
            }
            s.save();
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/GetURITest.java`
#### Snippet
```java
            Node file = root.addNode("file" + i, "nt:file");
            Node content = file.addNode("jcr:content", "nt:resource");
            content.setProperty("jcr:mimeType", "application/octet-stream");
            content.setProperty("jcr:lastModified", Calendar.getInstance());
            content.setProperty(
                "jcr:data", new TestInputStream(FILE_SIZE * 1024));
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/IsMemberTest.java`
#### Snippet
```java
        Session s = loginAdministrative();
        try {
            Authorizable authorizable = ((JackrabbitSession) s).getUserManager().getAuthorizable(GROUP + "0");
            if (authorizable != null) {
                Node n = s.getNode(Text.getRelativeParent(authorizable.getPath(), 1));
                n.remove();
            }
            authorizable = ((JackrabbitSession) s).getUserManager().getAuthorizable(USER + "0");
            if (authorizable != null) {
                Node n = s.getNode(Text.getRelativeParent(authorizable.getPath(), 1));
                n.remove();
            }
            s.save();
        } finally {
            s.logout();
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/IsMemberTest.java`
#### Snippet
```java
        if (fixture instanceof OakRepositoryFixture) {
            return ((OakRepositoryFixture) fixture).setUpCluster(1, new JcrCreator() {
                @Override
                public Jcr customize(Oak oak) {
                    ConfigurationParameters conf = ConfigurationParameters.of(UserConfiguration.NAME,
                            ConfigurationParameters.of(ProtectedItemImporter.PARAM_IMPORT_BEHAVIOR,
                                    ImportBehavior.NAME_BESTEFFORT));
                    SecurityProvider sp = SecurityProviderBuilder.newBuilder().with(conf).build();
                    return new Jcr(oak).with(sp);
                }
            });
        } else {
            return super.createRepository(fixture);
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/LoginWithMembersTest.java`
#### Snippet
```java
        Session s = loginAdministrative();
        try {
            Authorizable authorizable = ((JackrabbitSession) s).getUserManager().getAuthorizable(GROUP);
            if (authorizable != null) {
                Node n = s.getNode(Text.getRelativeParent(authorizable.getPath(), 1));
                n.remove();
            }
            s.save();
        } finally {
            s.logout();
        }
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SmallFileReadTest.java`
#### Snippet
```java
        for (int i = 0; i < FILE_COUNT; i++) {
            Node file = root.addNode("file" + i, "nt:file");
            Node content = file.addNode("jcr:content", "nt:resource");
            content.setProperty("jcr:mimeType", "application/octet-stream");
            content.setProperty("jcr:lastModified", Calendar.getInstance());
            content.setProperty(
                    "jcr:data", new TestInputStream(FILE_SIZE * 1024));
        }
        session.save();
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/AbstractHasItemGetItemTest.java`
#### Snippet
```java
            int nodeCnt = 0;
            int propertyCnt = 0;
            int addCnt = 0;
            int noAccess = 0;
            int size = allPaths.size();

            AccessControlManager acMgr = testSession.getAccessControlManager();

            long start = System.currentTimeMillis();
```

### DuplicatedCode
Duplicated code
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/permission/EagerCacheSizeTest.java`
#### Snippet
```java
        super.beforeSuite();

        // populate subject
        subject = new Subject();
        UserManager userManager = ((JackrabbitSession) adminSession).getUserManager();
        for (int i = 0; i < subjectSize; i++) {
            User user = userManager.createSystemUser("system_" +i, null);
            subject.getPrincipals().add(user.getPrincipal());
        }
        adminSession.save();

        JackrabbitAccessControlManager acMgr = (JackrabbitAccessControlManager) adminSession.getAccessControlManager();

        // grant read at the root
        Principal principal = subject.getPrincipals().iterator().next();
        Privilege[] readPrivs = AccessControlUtils.privilegesFromNames(acMgr, Privilege.JCR_READ);
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AbstractAzureDataStoreService.java`
#### Snippet
```java
        dataStore.setStatisticsProvider(getStatisticsProvider());
        dataStore.setProperties(properties);

        Dictionary<String, Object> props = new Hashtable<String, Object>();
        props.put(Constants.SERVICE_PID, dataStore.getClass().getName());
        props.put(DESCRIPTION, getDescription());

        delegateReg = context.getBundleContext().registerService(new String[] {
                AbstractSharedCachingDataStore.class.getName(),
                AbstractSharedCachingDataStore.class.getName()
        }, dataStore , props);

        return dataStore;
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FileDataStoreService.java`
#### Snippet
```java
        dataStore.setProperties(props);
        Dictionary<String, Object> config = new Hashtable<String, Object>();
        config.put(Constants.SERVICE_PID, dataStore.getClass().getName());
        config.put(DESCRIPTION, getDescription());

        delegateReg = context.getBundleContext().registerService(new String[] {
            AbstractSharedCachingDataStore.class.getName(),
            AbstractSharedCachingDataStore.class.getName()
        }, dataStore , config);
        return dataStore;
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
                if (presignedDownloadURIVerifyExists) {
                    // Check if this identifier exists.  If not, we want to return null
                    // even if the identifier is in the download URI cache.
                    try {
                        if (!exists(identifier)) {
                            LOG.warn("Cannot create download URI for nonexistent blob {}; returning null", getKeyName(identifier));
                            return null;
                        }
                    } catch (DataStoreException e) {
                        LOG.warn("Cannot create download URI for blob {} (caught DataStoreException); returning null", getKeyName(identifier), e);
                        return null;
                    }
                }
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
        List<URI> uploadPartURIs = Lists.newArrayList();
        long minPartSize = MIN_MULTIPART_UPLOAD_PART_SIZE;
        long maxPartSize = MAX_MULTIPART_UPLOAD_PART_SIZE;

        if (0L >= maxUploadSizeInBytes) {
            throw new IllegalArgumentException("maxUploadSizeInBytes must be > 0");
        }
        else if (0 == maxNumberOfURIs) {
            throw new IllegalArgumentException("maxNumberOfURIs must either be > 0 or -1");
        }
        else if (-1 > maxNumberOfURIs) {
            throw new IllegalArgumentException("maxNumberOfURIs must either be > 0 or -1");
        }
        else if (maxUploadSizeInBytes > MAX_SINGLE_PUT_UPLOAD_SIZE &&
                maxNumberOfURIs == 1) {
            throw new IllegalArgumentException(
                    String.format("Cannot do single-put upload with file size %d - exceeds max single-put upload size of %d",
                            maxUploadSizeInBytes,
                            MAX_SINGLE_PUT_UPLOAD_SIZE)
            );
        }
        else if (maxUploadSizeInBytes > MAX_BINARY_UPLOAD_SIZE) {
            throw new IllegalArgumentException(
                    String.format("Cannot do upload with file size %d - exceeds max upload size of %d",
                            maxUploadSizeInBytes,
                            MAX_BINARY_UPLOAD_SIZE)
            );
        }

        DataIdentifier newIdentifier = generateSafeRandomIdentifier();
        String blobId = getKeyName(newIdentifier);
        String uploadId = null;
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
                long requestedPartSize = (long) Math.ceil(((double) maxUploadSizeInBytes) / ((double) maxNumberOfURIs));
                if (requestedPartSize <= maxPartSize) {
                    numParts = Math.min(
                            maxNumberOfURIs,
                            Math.min(
                                    (long) Math.ceil(((double) maxUploadSizeInBytes) / ((double) minPartSize)),
                                    MAX_ALLOWABLE_UPLOAD_URIS
                            )
                    );
                } else {
                    throw new IllegalArgumentException(
                            String.format("Cannot do multi-part upload with requested part size %d", requestedPartSize)
                    );
                }
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
            try {
                byte[] secret = getOrCreateReferenceKey();
                String uploadToken = new DataRecordUploadToken(blobId, uploadId).getEncodedToken(secret);
                return new DataRecordUpload() {
                    @Override
                    @NotNull
                    public String getUploadToken() {
                        return uploadToken;
                    }

                    @Override
                    public long getMinPartSize() {
                        return minPartSize;
                    }

                    @Override
                    public long getMaxPartSize() {
                        return maxPartSize;
                    }

                    @Override
                    @NotNull
                    public Collection<URI> getUploadURIs() {
                        return uploadPartURIs;
                    }
                };
            } catch (DataStoreException e) {
                LOG.warn("Unable to obtain data store key");
            }
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
        if (Strings.isNullOrEmpty(uploadTokenStr)) {
            throw new IllegalArgumentException("uploadToken required");
        }

        DataRecordUploadToken uploadToken = DataRecordUploadToken.fromEncodedToken(uploadTokenStr, getOrCreateReferenceKey());
        String key = uploadToken.getBlobId();
        DataIdentifier blobId = new DataIdentifier(getIdentifierName(key));

        DataRecord record = null;
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
            List<DeleteObjectsRequest.KeyVersion> deleteList = new ArrayList<DeleteObjectsRequest.KeyVersion>();
            for (S3ObjectSummary s3ObjSumm : metaList.getObjectSummaries()) {
                deleteList.add(new DeleteObjectsRequest.KeyVersion(s3ObjSumm.getKey()));
            }
            if (deleteList.size() > 0) {
                DeleteObjectsRequest delObjsReq = new DeleteObjectsRequest(bucket);
                delObjsReq.setKeys(deleteList);
                s3service.deleteObjects(delObjsReq);
            }
```

### DuplicatedCode
Duplicated code
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3RequestDecorator.java`
#### Snippet
```java
        switch (getDataEncryption()) {
            case SSE_S3:
                metadata.setSSEAlgorithm(ObjectMetadata.AES_256_SERVER_SIDE_ENCRYPTION);
                break;
            case SSE_KMS:
                metadata.setSSEAlgorithm(SSEAlgorithm.KMS.getAlgorithm());
                /*Set*/
                request.withSSEAwsKeyManagementParams(sseParams);
                break;
            case SSE_C:
                request.withSSECustomerKey(sseCustomerKey);
                break;
            case NONE:
                break;
        }
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java
        if (memWeigher == null) {
            return -1;
        }
        long size = 0;
        for (Map.Entry<?, ?> e : cache.asMap().entrySet()) {
            Object k = e.getKey();
            Object v = e.getValue();
            size += memWeigher.weigh(k, v);
        }
        return size;
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/cloud/CloudBlobStore.java`
#### Snippet
```java
        if (blockId.getPos() == 0) {
            return data;
        }
        int len = (int) (data.length - blockId.getPos());
        if (len < 0) {
            return new byte[0];
        }
        byte[] d2 = new byte[len];
        System.arraycopy(data, (int) blockId.getPos(), d2, 0, len);
        return d2;
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
        checkNotNull(encodedBlobId);
        String blobId = extractBlobId(encodedBlobId);
        //Reference are not created for in memory record
        if (InMemoryDataRecord.isInstance(blobId)) {
            return null;
        }

        DataRecord record;
        try {
            record = delegate.getRecordIfStored(new DataIdentifier(blobId));
            if (record != null) {
                return record.getReference();
            } else {
                log.debug("No blob found for id [{}]", blobId);
            }
        } catch (DataStoreException e) {
            log.warn("Unable to access the blobId for  [{}]", blobId, e);
        }
        return  null;
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
        if (delegate instanceof SharedDataStore) {
            try {
                long start = System.nanoTime();

                ((SharedDataStore) delegate).addMetadataRecord(stream, name);

                if (stats instanceof ExtendedBlobStatsCollector) {
                    ((ExtendedBlobStatsCollector) stats).metadataRecordAdded(System.nanoTime() - start, TimeUnit.NANOSECONDS);
                    ((ExtendedBlobStatsCollector) stats).addMetadataRecordCompleted(name);
                }
            }
            catch (DataStoreException e) {
                if (stats instanceof ExtendedBlobStatsCollector) {
                    ((ExtendedBlobStatsCollector) stats).addMetadataRecordFailed(name);
                }
                throw e;
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
        for (File file : FileFilterUtils
            .filterList(FileFilterUtils.nameFileFilter(name), fsPathDir.listFiles())) {
            if (!file.isDirectory()) { // skip directories which are actual data store files
                if (!file.delete()) {
                    LOG.warn("Failed to delete root record {} ",
                        new Object[] {file.getAbsolutePath()});
                } else {
                    return true;
                }
            }
        }
        return false;
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
        for (File file : FileFilterUtils
            .filterList(FileFilterUtils.nameFileFilter(name), fsPathDir.listFiles())) {
            if (!file.isDirectory()) { // skip directories which are actual data store files
                if (!file.exists()) {
                    LOG.debug("File does not exist {} ",
                        new Object[] {file.getAbsolutePath()});
                } else {
                    return true;
                }
            }
        }
        return false;
```

### DuplicatedCode
Duplicated code
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
        File file = root;
        file = new File(file, string.substring(0, 2));
        file = new File(file, string.substring(2, 4));
        file = new File(file, string.substring(4, 6));
        return new File(file, string);
```

### DuplicatedCode
Duplicated code
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
                int level = IOUtils.readVarInt(idStream);
                // level = 0: size (size of this block)
                // level > 0: total size (size of all sub-blocks)
                // (see class level javadoc for details)
                IOUtils.readVarLong(idStream);
                if (level > 0) {
                    // block length (ignored)
                    IOUtils.readVarLong(idStream);
                }
                byte[] digest = new byte[IOUtils.readVarInt(idStream)];
                IOUtils.readFully(idStream, digest, 0, digest.length);
```

### DuplicatedCode
Duplicated code
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
        File f = getFile(id.digest, false);
        if (!f.exists()) {
            File old = getFile(id.digest, true);
            f.getParentFile().mkdir();
            old.renameTo(f);
            f = getFile(id.digest, false);
        }
```

### DuplicatedCode
Duplicated code
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Buffer.java`
#### Snippet
```java
        int result = 0;
        while (buffer.remaining() > 0) {
            int count = channel.read(buffer, position);
            if (count < 0) {
                break;
            }
            result += count;
            position += count;
        }
        return result;
```

### DuplicatedCode
Duplicated code
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
        while (map.size() > MAX_ELEMENTS) {
            for (Iterator<Map.Entry<String, Integer>> ei =
                    map.entrySet().iterator(); ei.hasNext();) {
                Map.Entry<String, Integer> e = ei.next();
                if (e.getValue() <= minCount) {
                    ei.remove();
                }
            }
            if (map.size() > MAX_ELEMENTS) {
                minCount++;
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/NamePathMapperImpl.java`
#### Snippet
```java
        StringBuilder oakPath = new StringBuilder();
        for (String element : listener.elements) {
            if (element.isEmpty()) {
                // root
                oakPath.append('/');
            }
            else {
                oakPath.append(element);
                oakPath.append('/');
            }
        }

        // root path is special-cased early on so it does not need to
        // be considered here
        oakPath.deleteCharAt(oakPath.length() - 1);
        return oakPath.toString();
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/NodeCounterEditor.java`
#### Snippet
```java
        if (hash != null) {
            return hash;
        }
        SipHash h;
        if (parent == null) {
            h = new SipHash(root.seed);
        } else {
            h = new SipHash(parent.getHash(), name.hashCode());
        }
        this.hash = h;
        return h;
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounter.java`
#### Snippet
```java
        NodeState s = child(root,
                PathUtils.elements(path));
        if (s == null || !s.exists()) {
            // node not found
            return 0;
        }
        if (!max) {
            long syncCount = ApproximateCounter.getCountSync(s);
            if (syncCount != -1) {
                return syncCount;
            }
        }
        if (COUNT_HASH) {
            return getCombinedCount(root, path, s, max);
        }
        return getEstimatedNodeCountOld(root, s, path, max);
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounter.java`
#### Snippet
```java
        PropertyState p = s.getProperty(NodeCounterEditor.COUNT_PROPERTY_NAME);
        if (p != null) {
            long x = p.getValue(Type.LONG);
            if (max) {
                // in the node itself, we just add the resolution
                x += ApproximateCounter.COUNT_RESOLUTION;
            }
            return x;
        }
        // check in the counter index (if it exists)
        s = child(root,
                IndexConstants.INDEX_DEFINITIONS_NAME,
                "counter");
        if (s == null || !s.exists()) {
            // no index
            return -1;
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounter.java`
#### Snippet
```java
        Long value = getCombinedCountIfAvailable(s);
        if (value != null) {
            return value + (max ? ApproximateCounter.COUNT_RESOLUTION : 0);
        }
        // check in the counter index (if it exists)
        s = child(root,
                IndexConstants.INDEX_DEFINITIONS_NAME,
                "counter");
        if (s == null || !s.exists()) {
            // no index
            return -1;
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounter.java`
#### Snippet
```java
        boolean found = false;
        long x = 0;
        PropertyState p = s.getProperty(NodeCounterEditor.COUNT_HASH_PROPERTY_NAME);
        if (p != null) {
            found = true;
            x = p.getValue(Type.LONG);
        }
        p = s.getProperty(NodeCounterEditor.COUNT_PROPERTY_NAME);
        if (p != null) {
            found = true;
            x += p.getValue(Type.LONG);
        }
        return found ? x : null;
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounter.java`
#### Snippet
```java
        ArrayList<String> names = new ArrayList<String>();
        for (ChildNodeEntry c : s.getChildNodeEntries()) {
            names.add(c.getName());
        }
        Collections.sort(names);
        for (String cn : names) {
            s.getChildNode(cn);
            String child = PathUtils.concat(path, cn);
            collectCounts(buff, child, level - 1);
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndex.java`
#### Snippet
```java
            if (tags == null) {
                // no tag
                return true;
            }
            String tag = indexTag.first.getValue(Type.STRING);
            for(String t : tags) {
                if (t.equals(tag)) {
                    // tag matches
                    return false;
                }
            }
            // no tag matches
            return true;
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndex.java`
#### Snippet
```java
        if (useIfExists == null) {
            return true;
        }
        if (!PathUtils.isValid(useIfExists)) {
            return false;
        }
        NodeState nodeState = root;
        for (String element : PathUtils.elements(useIfExists)) {
            if (element.startsWith("@")) {
                return nodeState.hasProperty(element.substring(1));
            }
            nodeState = nodeState.getChildNode(element);
            if (!nodeState.exists()) {
                return false;
            }
        }
        return true;
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/jmx/PropertyIndexStats.java`
#### Snippet
```java
        if (maxPathLimitBreachedAtLevel < 0) {
            return Iterables.toArray(paths, String.class);
        }

        //If max limit for path is reached then we can safely
        //say about includedPaths upto depth = level at which limit reached - 1
        //As for that level we know *all* the path roots
        Set<String> result = Sets.newHashSet();
        int safeDepth = maxPathLimitBreachedAtLevel - 1;
        if (safeDepth > 0) {
            for (String path : intermediatePaths) {
                int pathDepth = PathUtils.getDepth(path);
                if (pathDepth == safeDepth) {
                    result.add(path);
                }
            }
        }
        return Iterables.toArray(result, String.class);
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/reference/ReferenceEditor.java`
#### Snippet
```java
            for (Entry<String, Set<String>> ref : rmRefs.entrySet()) {
                String uuid = ref.getKey();
                Set<String> rm = ref.getValue();
                Set<String> add = emptySet();
                if (newRefs.containsKey(uuid)) {
                    add = newRefs.remove(uuid);
                }
                update(refStores, definition, REF_NAME, uuid, add, rm);
            }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/reference/ReferenceEditor.java`
#### Snippet
```java
        if (before != null) {
            if (before.getType().tag() == REFERENCE) {
                if (!isVersionStorePath(getPath())) {
                    put(rmRefs, before.getValue(STRINGS),
                            concat(getPath(), before.getName()));
                }
            }
            if (before.getType().tag() == WEAKREFERENCE) {
                put(rmWeakRefs, before.getValue(STRINGS),
                        concat(getPath(), before.getName()));
            }
            if (JCR_UUID.equals(before.getName())) {
                // node remove + add -> changed uuid
                rmIds.add(before.getValue(STRING));
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveType.java`
#### Snippet
```java
        String escapedName;
        if (JCR_PRIMARYTYPE.equals(propertyName)) {
            escapedName = NodeTypeConstants.REP_PRIMARY_TYPE;
        } else if (JCR_MIXINTYPES.equals(propertyName)) {
            escapedName = NodeTypeConstants.REP_MIXIN_TYPES;
        } else if (JCR_UUID.equals(propertyName)) {
            escapedName = NodeTypeConstants.REP_UUID;
        } else {
            escapedName = propertyName;
        }

        String definedType = propertyType.toString();
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/NodeDefinitionTemplateImpl.java`
#### Snippet
```java
        if (isAutoCreated()) {
            builder.append(" a");
        }
        if (isProtected()) {
            builder.append(" p");
        }
        if (isMandatory()) {
            builder.append(" m");
        }
        if (getOnParentVersion() != OnParentVersionAction.COPY) {
            builder.append(" ");
            builder.append(OnParentVersionAction.nameFromValue(getOnParentVersion()));
        }
        return builder.toString();
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/OrphanedVersionCleaner.java`
#### Snippet
```java
            if (!builder.hasChildNode(JCR_SYSTEM)) {
                return null;
            }
            NodeBuilder system = builder.child(JCR_SYSTEM);
            if (!system.hasChildNode(JCR_VERSIONSTORAGE)) {
                return null;
            }
            NodeBuilder versionStorage = system.child(JCR_VERSIONSTORAGE);
            ReadWriteVersionManager vMgr = new ReadWriteVersionManager(versionStorage, builder);
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                String name = readName();
                if (readIf(".")) {
                    if (readIf("*")) {
                        read(",");
                        c = factory.fullTextSearch(
                                name, null, parseStaticOperand());
                    } else {
                        String selector = name;
                        name = readName();
                        read(",");
                        c = factory.fullTextSearch(
                                selector, name, parseStaticOperand());
                    }
                } else {
                    read(",");
                    c = factory.fullTextSearch(
                            getOnlySelectorName(), name,
                            parseStaticOperand());
                }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        if (query == null) {
            query = "";
        }
        statement = query;
        int len = query.length() + 1;
        char[] command = new char[len];
        int[] types = new int[len];
        len--;
        query.getChars(0, len, command, 0);
        command[len] = ' ';
        int startLoop = 0;
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                if (c >= 'a' && c <= 'z') {
                    type = CHAR_NAME;
                } else if (c >= 'A' && c <= 'Z') {
                    type = CHAR_NAME;
                } else if (c >= '0' && c <= '9') {
                    type = CHAR_VALUE;
                } else {
                    if (Character.isJavaIdentifierPart(c)) {
                        type = CHAR_NAME;
                    }
                }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        currentTokenQuoted = false;
        if (expected != null) {
            expected.clear();
        }
        int[] types = characterTypes;
        int i = parseIndex;
        int type = types[i];
        while (type == 0) {
            type = types[++i];
        }
        int start = i;
        char[] chars = statementChars;
        char c = chars[i++];
        currentToken = "";
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        char[] chars = statementChars;
        String result = null;
        while (true) {
            for (int begin = i;; i++) {
                if (chars[i] == end) {
                    if (result == null) {
                        result = statement.substring(begin, i);
                    } else {
                        result += statement.substring(begin - 1, i);
                    }
                    break;
                }
            }
            if (chars[++i] != end) {
                break;
            }
            i++;
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        char[] chars = statementChars;
        int[] types = characterTypes;
        while (true) {
            int t = types[i];
            if (t != CHAR_DECIMAL && t != CHAR_VALUE) {
                break;
            }
            i++;
        }
        if (chars[i] == 'E' || chars[i] == 'e') {
            i++;
            if (chars[i] == '+' || chars[i] == '-') {
                i++;
            }
            if (types[i] != CHAR_VALUE) {
                throw getSyntaxError();
            }
            while (types[++i] == CHAR_VALUE) {
                // go until the first non-number
            }
        }
        parseIndex = i;
        String sub = statement.substring(start, i);
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        if (expected == null || expected.isEmpty()) {
            return getSyntaxError(null);
        } else {
            StringBuilder buff = new StringBuilder();
            for (String exp : expected) {
                if (buff.length() > 0) {
                    buff.append(", ");
                }
                buff.append(exp);
            }
            return getSyntaxError(buff.toString());
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/EquiJoinConditionImpl.java`
#### Snippet
```java
            PropertyValue p2 = selector2.currentProperty(property2Name);
            if (p2 == null && f.isPreparing() && f.isPrepared(selector2)) {
                // during the prepare phase, if the selector is already
                // prepared, then we would know the value
                p2 = PropertyValues.newString(KNOWN_VALUE);
            }
            if (p2 != null) {
                if (p2.isArray()) {
                    // TODO support join on multi-valued properties
                    p2 = null;
                }
            }
            String p1n = normalizePropertyName(property1Name);
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/LowerCaseImpl.java`
#### Snippet
```java
        operand.restrict(f, Operator.NOT_EQUAL, null);
        if (operator == Operator.NOT_EQUAL && v != null) {
            // not supported
            return;
        }
        String fn = getFunction(f.getSelector());
        if (fn != null) {
            f.restrictProperty(QueryConstants.FUNCTION_RESTRICTION_PREFIX + fn, 
                    operator, v, PropertyType.STRING);
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SimilarImpl.java`
#### Snippet
```java
        if (f.getSelector().equals(selector)) {
            PropertyValue p = pathExpression.currentValue();
            String path = p.getValue(Type.STRING);
            String query = MORE_LIKE_THIS_PREFIX + path;
            PropertyValue v = PropertyValues.newString(query);
            f.restrictProperty(NativeFunctionImpl.NATIVE_PREFIX + NATIVE_LUCENE_LANGUAGE, Operator.EQUAL, v);
        }
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsMBeanImpl.java`
#### Snippet
```java
        ArrayList<QueryStatsData> list = new ArrayList<QueryStatsData>(statistics.values());
        Collections.sort(list, new Comparator<QueryStatsData>() {
            @Override
            public int compare(QueryStatsData o1, QueryStatsData o2) {
                return -Long.compare(o1.getTotalTimeNanos(), o2.getTotalTimeNanos());
            }
        });
```

### DuplicatedCode
Duplicated code
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenProviderImpl.java`
#### Snippet
```java
        StringBuilder res = new StringBuilder(key.length * 2);
        for (byte b : key) {
            res.append(Text.hexTable[(b >> 4) & 15]);
            res.append(Text.hexTable[b & 15]);
        }
        return res.toString();
```

### DuplicatedCode
Duplicated code
in `oak-examples/standalone/src/main/java/org/apache/jackrabbit/oak/standalone/WebConsoleSupport.java`
#### Snippet
```java
            final Credentials creds = new SimpleCredentials(userName,
                    (password == null) ? new char[0] : password.toCharArray());
            Session session = null;
            try {
                session = repository.login(creds);

                if ("admin".equals(userName)){
                    return userName;
                }

            } catch (LoginException re) {
                log.info("authenticate: User {} failed to authenticate with the repository " +
                        "for Web Console access", userName, re);
            } catch (RepositoryException re) {
                log.info("authenticate: Generic problem trying grant User {} access to the Web Console", userName, re);
            } finally {
                if (session != null) {
                    session.logout();
                }
            }
            return null;
```

### DuplicatedCode
Duplicated code
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/NodeDelegate.java`
#### Snippet
```java
        Tree typeRoot = sessionDelegate.getRoot().getTree(NODE_TYPES_PATH);
        List<Tree> types = TreeUtil.getEffectiveType(parent, typeRoot);

        boolean protectedResidual = false;
        for (Tree type : types) {
            if (contains(TreeUtil.getNames(type, REP_PROTECTED_CHILD_NODES), name)) {
                return true;
            } else if (!protectedResidual) {
                protectedResidual = TreeUtil.getBoolean(
                        type, REP_HAS_PROTECTED_RESIDUAL_CHILD_NODES);
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/NodeDelegate.java`
#### Snippet
```java
        Tree parent = tree;
        String name = relPath;

        int slash = relPath.lastIndexOf('/');
        if (slash != -1) {
            parent = getTree(relPath.substring(0, slash));
            name = relPath.substring(slash + 1);
        }
```

### DuplicatedCode
Duplicated code
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
        return perform(new NodeOperation<NodeIterator>(dlg, "getNodes") {
            @NotNull
            @Override
            public NodeIterator perform() throws RepositoryException {
                Iterator<NodeDelegate> children = Iterators.filter(
                        node.getChildren(),
                        new Predicate<NodeDelegate>() {
                            @Override
                            public boolean apply(NodeDelegate state) {
                                // TODO: use Oak names
                                return ItemNameMatcher.matches(toJcrPath(state.getName()), namePattern);
                            }
                        });
                return new NodeIteratorAdapter(nodeIterator(children));
            }
            @Override
            public String toString() {
                return format("getNodes [%s]", dlg.getPath());
            }
        });
```

### DuplicatedCode
Duplicated code
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
        return perform(new NodeOperation<PropertyIterator>(dlg, "getProperties") {
            @NotNull
            @Override
            public PropertyIterator perform() throws RepositoryException {
                final PropertyIteratorDelegate delegate = new PropertyIteratorDelegate(node, new Predicate<PropertyDelegate>() {
                    @Override
                    public boolean apply(PropertyDelegate entry) {
                        // TODO: use Oak names
                        return ItemNameMatcher.matches(toJcrPath(entry.getName()), namePattern);
                    }
                });
                return new PropertyIteratorAdapter(propertyIterator(delegate.iterator())){
                    @Override
                    public long getSize() {
                        return delegate.getSize();
                    }
                };
            }
        });
```

### DuplicatedCode
Duplicated code
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
        return perform(new ItemWriteOperation<Property>("internalSetProperty") {
            @Override
            public void checkPreconditions() throws RepositoryException {
                super.checkPreconditions();
                if (!internalIsCheckedOut() && getOPV(dlg.getTree(), state) != OnParentVersionAction.IGNORE) {
                    throw new VersionException(format(
                            "Cannot set property. Node [%s] is checked in.", getNodePath()));
                }
            }
            @NotNull
            @Override
            public Property perform() throws RepositoryException {
                return new PropertyImpl(
                        dlg.setProperty(state, exactTypeMatch, false),
                        sessionContext);
            }

            @Override
            public String toString() {
                return format("setProperty [%s/%s]", dlg.getPath(), jcrName);
            }
        });
```

### DuplicatedCode
Duplicated code
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/version/VersionManagerImpl.java`
#### Snippet
```java
                    if (!existing.isEmpty()) {
                        if (removeExisting) {
                            removeExistingNodes(existing);
                        } else {
                            List<String> paths = new ArrayList<String>();
                            for (NodeDelegate nd : existing) {
                                paths.add(nd.getPath());
                            }
                            throw new ItemExistsException("Unable to restore with " +
                                    "removeExisting=false. Existing nodes in " +
                                    "workspace: " + paths);
                        }
                    }
                    // ready for restore
                    VersionDelegate vd = versionManagerDelegate.getVersionByIdentifier(
                            version.getIdentifier());
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                    if (luceneRequestFacade.getLuceneRequest() instanceof Query) {
                        Query query = (Query) luceneRequestFacade.getLuceneRequest();
                        TotalHitCountCollector collector = new TotalHitCountCollector();
                        searcher.search(query, collector);
                        int totalHits =  collector.getTotalHits();
                        LOG.debug("Estimated size for query {} is {}", query, totalHits);
                        return totalHits;
                    }
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
        final HashSet<String> relPaths = new HashSet<String>();
        ft.accept(new FullTextVisitor.FullTextVisitorBase() {

            @Override
            public boolean visit(FullTextTerm term) {
                String p = term.getPropertyName();
                if (p == null) {
                    relPaths.add("");
                } else if (p.startsWith("../") || p.startsWith("./")) {
                    throw new IllegalArgumentException("Relative parent is not supported:" + p);
                } else if (getDepth(p) > 1) {
                    String parent = getParentPath(p);
                    relPaths.add(parent);
                } else {
                    relPaths.add("");
                }
                return true;
            }
        });
        return relPaths;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
        if (reader == null) {
            // getPlan call
            qs.add(new TermQuery(new Term("*", uuid)));
            return;
        }

        // reference query
        BooleanQuery bq = new BooleanQuery();
        Collection<String> fields = MultiFields.getIndexedFields(reader);
        for (String f : fields) {
            bq.add(new TermQuery(new Term(f, uuid)), SHOULD);
        }
        qs.add(bq);
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                if (q == null) {
                    return false;
                }
                if (boost != null) {
                    q.setBoost(Float.parseFloat(boost));
                }
                if (not) {
                    BooleanQuery bq = new BooleanQuery();
                    bq.add(q, MUST_NOT);
                    result.set(bq);
                } else {
                    result.set(q);
                }
                return true;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
                new LinkedBlockingQueue<>(), new ThreadFactory() {
            private final AtomicInteger counter = new AtomicInteger();
            private final Thread.UncaughtExceptionHandler handler = (t, e) -> log.warn("Error occurred in asynchronous processing ", e);
            @Override
            public Thread newThread(@NotNull Runnable r) {
                Thread thread = new Thread(r, createName());
                thread.setDaemon(true);
                thread.setPriority(Thread.MIN_PRIORITY);
                thread.setUncaughtExceptionHandler(handler);
                return thread;
            }

            private String createName() {
                return "oak-lucene-" + counter.getAndIncrement();
            }
        });
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                if (facets != null) {
                    try {
                        ImmutableList.Builder<Facet> res = new ImmutableList.Builder<>();
                        FacetResult topChildren = facets.getTopChildren(numberOfFacets, facetFieldName);
                        if (topChildren != null) {
                            for (LabelAndValue lav : topChildren.labelValues) {
                                res.add(new Facet(
                                        lav.label, lav.value.intValue()
                                ));
                            }
                            return res.build();
                        }
                    } catch (IllegalArgumentException iae) {
                        LOG.debug(iae.getMessage(), iae);
                        LOG.warn("facets for {} not yet indexed: " + iae, facetFieldName);
                    }
                }
                return null;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
        Set<String> currTags = Collections.emptySet();
        if (tree.hasProperty(INDEX_TAGS)) {
            currTags = Sets.newHashSet(tree.getProperty(INDEX_TAGS).getValue(STRINGS));
        }
        Set<String> tagVals = Sets.newHashSet(Iterables.concat(currTags, asList(additionalTagVals)));
        boolean noAdditionalTags = currTags.containsAll(tagVals);
        if (!noAdditionalTags) {
            tree.removeProperty(INDEX_TAGS);
            tree.setProperty(INDEX_TAGS, asList(Iterables.toArray(tagVals, String.class)), STRINGS);
        }
        return this;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            PropertyRule propRule = props.get(name);
            if (propRule == null){
                Tree propTree = findExisting(name);
                if (propTree == null){
                    if (propDefnNodeName == null){
                        propDefnNodeName = createPropNodeName(name, regex);
                    }
                    propTree = getOrCreateChild(getPropsTree(), propDefnNodeName);
                }
                propRule = new PropertyRule(this, propTree, name, regex);
                props.put(name != null ? name : propDefnNodeName, propRule);
            }
            return propRule;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            if (!indexRule.hasChild(FulltextIndexConstants.PROP_NAME)) {
                return;
            }

            for (Tree tree : getPropsTree().getChildren()){
                if (!tree.hasProperty(FulltextIndexConstants.PROP_NAME)){
                    continue;
                }
                String name = tree.getProperty(FulltextIndexConstants.PROP_NAME).getValue(Type.STRING);
                boolean regex = false;
                if (tree.hasProperty(FulltextIndexConstants.PROP_IS_REGEX)) {
                    regex = tree.getProperty(FulltextIndexConstants.PROP_IS_REGEX).getValue(Type.BOOLEAN);
                }
                PropertyRule pr = new PropertyRule(this, tree, name, regex);
                props.put(name, pr);
            }
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            for (Tree tree : getPropsTree().getChildren()){
                String treeName = tree.getName();
                PropertyState ps = tree.getProperty(FulltextIndexConstants.PROP_NAME);
                if(ps != null) {
                    treeName = ps.getValue(Type.STRING);
                }

                if (name.equals(treeName)) {
                    return tree;
                }
            }
            return null;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            name = regex ? "prop" : getSafePropName(name);
            if (name.isEmpty()){
                name = "prop";
            }
            if (propNodeNames.contains(name)){
                name = name + "_" + propNodeNames.size();
            }
            propNodeNames.add(name);
            return name;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
        if (aggregatesTree == null){
            aggregatesTree = getOrCreateChild(tree, FulltextIndexConstants.AGGREGATES);
        }
        AggregateRule rule = aggRules.get(type);
        if (rule == null){
            rule = new AggregateRule(getOrCreateChild(aggregatesTree, type));
            aggRules.put(type, rule);
        }
        return rule;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            Include include = includes.get(includePath);
            if (include == null){
                Tree includeTree = findExisting(includePath);
                if (includeTree == null){
                    includeTree = getOrCreateChild(aggregate, "include" + includes.size());
                }
                include = new Include(this, includeTree);
                includes.put(includePath, include);
            }
            include.path(includePath);
            return include;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            if (IndexConstants.ASYNC_PROPERTY_NAME.equals(before.getName())){
                Set<String> asyncBefore = getAsyncValuesWithoutNRT(before);
                Set<String> asyncAfter = getAsyncValuesWithoutNRT(after);
                return asyncBefore.equals(asyncAfter);
            } else if (ignorablePropertiesList.contains(before.getName()) || ignorableFacetConfigProps.contains(before.getName())) {
                return true;
            }
            return false;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            if(name.equals(FulltextIndexConstants.PROP_FACETS)) {
                // This here makes sure any new property under FACETS that might be added in future and if so might require
                // reindexing - then addition of  facet node (/facet/foo) with such property lead to auto set of reindex flag
                for(PropertyState property : after.getProperties()) {
                    if(!ignorableFacetConfigProps.contains(property.getName())) {
                        return super.childNodeAdded(name, after);
                    }
                }
                return true;
            }
            return super.childNodeAdded(name, after);
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            if (name.equals(FulltextIndexConstants.PROP_FACETS)) {
                // This here makes sure any new property under FACETS that might be added in future and if so might require
                // reindexing - then deletion of facet node  with such property lead to auto set of reindex flag
                for(PropertyState property : before.getProperties()) {
                    if(!ignorableFacetConfigProps.contains(property.getName())) {
                        return super.childNodeAdded(name, before);
                    }
                }
                return true;
            }
            return super.childNodeDeleted(name, before);
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneIndexHelper.java`
#### Snippet
```java
        if (index.hasChildNode(name)) {
            return index.child(name);
        }
        index = index.child(name);
        index.setProperty(JCR_PRIMARYTYPE, INDEX_DEFINITIONS_NODE_TYPE, NAME)
                .setProperty(TYPE_PROPERTY_NAME, TYPE_LUCENE)
                .setProperty(REINDEX_PROPERTY_NAME, true);
        if (async != null) {
            index.setProperty(ASYNC_PROPERTY_NAME, async);
        }
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneIndexHelper.java`
#### Snippet
```java
        if (async != null) {
            index.setProperty(ASYNC_PROPERTY_NAME, async);
        }
        if (propertyTypes != null && !propertyTypes.isEmpty()) {
            index.setProperty(createProperty(FulltextIndexConstants.INCLUDE_PROPERTY_TYPES,
                    propertyTypes, STRINGS));
        }
        if (excludes != null && !excludes.isEmpty()) {
            index.setProperty(createProperty(FulltextIndexConstants.EXCLUDE_PROPERTY_NAMES, excludes,
                    STRINGS));
        }
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/SecureSortedSetDocValuesFacetCounts.java`
#### Snippet
```java
            if (numZeros > 0) {
                newValues = new LabelAndValue[labelAndValues.length - numZeros];
                int i = 0;
                for (LabelAndValue lv : labelAndValues) {
                    if (lv.value.longValue() > 0) {
                        newValues[i++] = lv;
                    }
                }
            } else {
                newValues = labelAndValues;
            }

            return newValues;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/TapeSampling.java`
#### Snippet
```java
        return new AbstractIterator<T>() {
            int sampled = 0;
            int seen = 0;

            @Override
            protected T computeNext() {
                if (sampled == k) {
                    return endOfData();
                }

                while (true) {
                    Preconditions.checkArgument(input.hasNext(),
                            "Not enough input items provided. Declared: " + N + "; got " + seen + "; sampled: " + sampled);

                    T i = input.next();

                    int r = rGen.nextInt(N - seen) + 1;
                    seen++;

                    if (r <= k - sampled) {
                        sampled++;
                        return i;
                    }
                }
            }
        };
```

### DuplicatedCode
Duplicated code
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/util/ElasticIndexUtils.java`
#### Snippet
```java
        int capacity = array.length / blockSize;
        List<Double> doubles = new ArrayList<>(capacity);
        for (int i = 0; i < capacity; i++) {
            double e = wrap.getDouble(i * blockSize);
            doubles.add(e);
        }
        return doubles;
```

### DuplicatedCode
Duplicated code
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/SimSearchUtils.java`
#### Snippet
```java
        List<Double> doubles = new ArrayList<>(capacity);
        for (int i = 0; i < capacity; i++) {
            double e = wrap.getDouble(i * blockSize);
            doubles.add(e);
        }
        return doubles;
```

### DuplicatedCode
Duplicated code
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/DefaultMemoryManager.java`
#### Snippet
```java
        long maxSize = 0;
        MemoryPoolMXBean maxPool = null;
        for (MemoryPoolMXBean pool : getMemoryPoolMXBeans()) {
            if (HEAP == pool.getType()
                    && pool.isCollectionUsageThresholdSupported()) {
                // Get usage after a GC, which is more stable, if available
                long poolSize = pool.getCollectionUsage().getMax();
                // Keep the pool with biggest size, by default it should be Old Gen Space
                if (poolSize > maxSize) {
                    maxPool = pool;
                }
            }
        }
        return maxPool;
```

### DuplicatedCode
Duplicated code
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MergeRunner.java`
#### Snippet
```java
            Function<String, NodeStateHolder> func1 = (line) -> line == null ? null : new SimpleNodeStateHolder(line);
            Function<NodeStateHolder, String> func2 = holder -> holder == null ? null : holder.getLine();
            ExternalSort.mergeSortedFiles(files,
                    writer,
                    comparator,
                    charset,
                    true, //distinct
                    algorithm,
                    func2,
                    func1
            );
```

### DuplicatedCode
Duplicated code
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/PathElementComparator.java`
#### Snippet
```java
            boolean pe1Preferred = preferred.contains(pe1);
            boolean pe2Preferred = preferred.contains(pe2);

            if (pe1Preferred && !pe2Preferred) {
                return -1;
            }

            if (pe2Preferred && !pe1Preferred) {
                return 1;
            }

            int compare = pe1.compareTo(pe2);
            if (compare != 0) {
                return compare;
            }
```

### DuplicatedCode
Duplicated code
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                            StringBuilder summary = new StringBuilder();
                            for (Map.Entry<String, Integer> entry : exceptions.entrySet()) {
                                summary.append("\n\t").append(entry.getValue()).append("x: ").append(entry.getKey());
                            }
                            throw new RetryException(retryDuringSeconds, summary.toString(), e);
```

### DuplicatedCode
Duplicated code
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/BlobStoreFixtureProvider.java`
#### Snippet
```java
        Dictionary dict = ConfigurationHandler.read(new FileInputStream(cfgPath));
        Properties props = new Properties();
        Enumeration keys = dict.keys();
        while (keys.hasMoreElements()) {
            String key = (String) keys.nextElement();
            props.put(key, dict.get(key));
        }
        return props;
```

### DuplicatedCode
Duplicated code
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticDocumentStoreIndexer.java`
#### Snippet
```java
        final ElasticConnection.Builder.BuildStep buildStep = ElasticConnection.newBuilder()
                .withIndexPrefix(indexPrefix)
                .withConnectionParameters(
                        scheme,
                        host,
                        port
                );
        final ElasticConnection coordinate;
        if (apiKeyId != null && apiSecretId != null) {
            coordinate = buildStep.withApiKeys(apiKeyId, apiSecretId).build();
        } else {
            coordinate = buildStep.build();
        }
        closer.register(coordinate);
```

### DuplicatedCode
Duplicated code
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticPurgeOldIndexVersionCommand.java`
#### Snippet
```java
        opts = new Options();
        opts.setCommandName(NAME);
        opts.setSummary(summary);
        opts.setConnectionString(CommonOptions.DEFAULT_CONNECTION_STRING);
        opts.registerOptionsFactory(ElasticIndexOptions.FACTORY);
        opts.parseAndConfigure(parser, args);

        indexOpts = opts.getOptionBean(ElasticIndexOptions.class);
```

### DuplicatedCode
Duplicated code
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticIndexCommand.java`
#### Snippet
```java
        Set<String> indexPaths = new LinkedHashSet<>(indexOpts.getIndexPaths());
        File definitions = indexOpts.getIndexDefinitionsFile();
        if (definitions != null) {
            IndexDefinitionUpdater updater = new IndexDefinitionUpdater(definitions);
            Set<String> indexPathsFromJson = updater.getIndexPaths();
            Set<String> diff = Sets.difference(indexPathsFromJson, indexPaths);
            if (!diff.isEmpty()) {
                log.info("Augmenting the indexPaths with {} which are present in {}", diff, definitions);
            }
            indexPaths.addAll(indexPathsFromJson);
        }
        return new ArrayList<>(indexPaths);
```

### DuplicatedCode
Duplicated code
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/run/Main.java`
#### Snippet
```java
        Command command = MODES.getCommand("help");

        if (args.length > 0) {
            command = MODES.getCommand(args[0].toLowerCase(Locale.ENGLISH));

            if (command == null) {
                command = MODES.getCommand("help");
            }

            args = copyOfRange(args, 1, args.length);
        }

        command.execute(args);
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/explorer/Explorer.java`
#### Snippet
```java
        menuBar.add(menuReopen);
        menuBar.add(new JSeparator(JSeparator.VERTICAL));
        menuBar.add(menuCompaction);
        menuBar.add(new JSeparator(JSeparator.VERTICAL));
        menuBar.add(menuRefs);
        menuBar.add(new JSeparator(JSeparator.VERTICAL));
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/document/SweepHelper.java`
#### Snippet
```java
                JournalEntry inv = JOURNAL.newDocument(store);
                inv.modified(updates.keySet());
                Revision r = context.newRevision().asBranchRevision();
                UpdateOp invOp = inv.asUpdateOp(r);
                // and reference it from a regular entry
                JournalEntry entry = JOURNAL.newDocument(store);
                entry.invalidate(Collections.singleton(r));
                Revision jRev = context.newRevision();
                UpdateOp jOp = entry.asUpdateOp(jRev);
                if (!store.create(JOURNAL, newArrayList(invOp, jOp))) {
                    String msg = "Unable to create journal entries for " +
                            "document invalidation.";
                    throw new DocumentStoreException(msg);
                }
                sweepRev.set(Utils.max(sweepRev.get(), jRev));
                // now that journal entry is in place, perform the actual
                // updates on the documents
                store.createOrUpdate(NODES, newArrayList(updates.values()));
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/CompositePrepareCommand.java`
#### Snippet
```java
        OptionSet options = parser.parse(args);

        if (options.has(help)) {
            parser.printHelpOn(System.out);
            System.exit(0);
        }

        File store = storeO.value(options);

        if (store == null) {
            parser.printHelpOn(System.out);
            System.exit(1);
        }
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
        System.out.println("Starting dump of blob ids");
        Stopwatch watch = createStarted();

        Iterator<String> blobIter = blobStore.getAllChunkIds(0);
        int count = writeStrings(blobIter, blob, false);

        sort(blob);
        System.out.println(count + " blob ids found");
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/FrozenNodeRefsByScanningCommand.java`
#### Snippet
```java
        if (nodeStore == null) {
            return null;
        }
        StatisticsProvider statisticsProvider = StatisticsProvider.NOOP;
        Oak oak = new Oak(nodeStore).with(ManagementFactory.getPlatformMBeanServer());
        oak.getWhiteboard().register(StatisticsProvider.class, statisticsProvider, Collections.emptyMap());
        LuceneIndexProvider provider = /*JsonIndexCommand.*/createLuceneIndexProvider();
        oak.with((QueryIndexProvider) provider).with((Observer) provider).with(/*JsonIndexCommand.*/createLuceneIndexEditorProvider());
        Jcr jcr = new Jcr(oak);
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/FrozenNodeRefsByScanningCommand.java`
#### Snippet
```java
        LuceneIndexEditorProvider ep = new LuceneIndexEditorProvider();
        ScheduledExecutorService executorService = MoreExecutors
                .getExitingScheduledExecutorService((ScheduledThreadPoolExecutor) Executors.newScheduledThreadPool(5));
        StatisticsProvider statsProvider = StatisticsProvider.NOOP;
        int queueSize = Integer.getInteger("queueSize", 1000);
        long queueTimeout = Long.getLong("queueTimeoutMillis", 100);
        IndexTracker tracker = new IndexTracker();
        DocumentQueue queue = new DocumentQueue(queueSize, queueTimeout, tracker, executorService, statsProvider);
        ep.setIndexingQueue(queue);
        return ep;
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/PrintingDiff.java`
#### Snippet
```java
        StringBuilder val = new StringBuilder();
        val.append(ps.getName()).append("<").append(ps.getType()).append(">");
        if (ps.getType() == BINARY) {
            String v = BLOB_LENGTH.apply(ps.getValue(BINARY));
            val.append(" = {").append(v).append("}");
        } else if (ps.getType() == BINARIES) {
            String v = transform(ps.getValue(BINARIES), BLOB_LENGTH).toString();
            val.append("[").append(ps.count()).append("] = ").append(v);
        } else if (ps.isArray()) {
            val.append("[").append(ps.count()).append("] = ").append(ps.getValue(STRINGS));
        } else {
            val.append(" = ").append(ps.getValue(STRING));
        }
        return ps.getName() + "<" + ps.getType() + ">" + val.toString();
```

### DuplicatedCode
Duplicated code
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/RecoverJournalCommand.java`
#### Snippet
```java
        OptionSpec<?> help = options.acceptsAll(asList("h", "help"), "Prints help and exits");
        OptionSpec<File> dir = options.nonOptions()
            .describedAs("path")
            .ofType(File.class);
        OptionSet parsed = options.parse(args);

        if (parsed.has(help)) {
            options.printHelpOn(System.out);
            System.exit(0);
        }

        if (parsed.valuesOf(dir).size() == 0) {
            System.err.println("Segment Store path not specified");
            System.exit(1);
        }

        if (parsed.valuesOf(dir).size() > 1) {
            System.err.println("Too many Segment Store paths specified");
            System.exit(1);
        }
```

### DuplicatedCode
Duplicated code
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexLookup.java`
#### Snippet
```java
        Set<String> paths = Sets.newHashSet();

        collectIndexNodePaths(root, "/", paths);

        if (recurse) {
            StringBuilder sb = new StringBuilder();
            NodeState nodeState = root;
            for (String element : PathUtils.elements(filter.getPath())) {
                nodeState = nodeState.getChildNode(element);
                collectIndexNodePaths(nodeState,
                        sb.append("/").append(element).toString(),
                        paths);
            }
        }

        return paths;
```

### DuplicatedCode
Duplicated code
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/IndexDefinitionUtils.java`
#### Snippet
```java
        if (index.hasChildNode(name)) {
            return index.child(name);
        }
        index = index.child(name);
        index.setProperty(JCR_PRIMARYTYPE, INDEX_DEFINITIONS_NODE_TYPE, NAME)
                .setProperty(TYPE_PROPERTY_NAME, type)
                .setProperty(PERSISTENCE_NAME, PERSISTENCE_FILE)
                .setProperty(PERSISTENCE_PATH, path)
                .setProperty(REINDEX_PROPERTY_NAME, true);
        if (async != null) {
            index.setProperty(ASYNC_PROPERTY_NAME, async);
        }
        if (propertyTypes != null && !propertyTypes.isEmpty()) {
            index.setProperty(createProperty(INCLUDE_PROPERTY_TYPES,
                    propertyTypes, STRINGS));
        }
        if (excludes != null && !excludes.isEmpty()) {
            index.setProperty(createProperty(EXCLUDE_PROPERTY_NAMES, excludes,
                    STRINGS));
        }
        return index;
```

### DuplicatedCode
Duplicated code
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/IndexDefinitionUtils.java`
#### Snippet
```java
        checkArgument(!includes.isEmpty(), "Fulltext property index " +
                "requires explicit list of property names to be indexed");

        index = index.child(name);
        index.setProperty(JCR_PRIMARYTYPE, INDEX_DEFINITIONS_NODE_TYPE, NAME)
                .setProperty(TYPE_PROPERTY_NAME, type)
                .setProperty(REINDEX_PROPERTY_NAME, true);
        index.setProperty(FulltextIndexConstants.FULL_TEXT_ENABLED, false);
        index.setProperty(createProperty(INCLUDE_PROPERTY_NAMES, includes, STRINGS));

        if (async != null) {
            index.setProperty(ASYNC_PROPERTY_NAME, async);
        }
        return index;
```

### DuplicatedCode
Duplicated code
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/restriction/CompositeRestrictionProvider.java`
#### Snippet
```java
        List<RestrictionPattern> patterns = new ArrayList<>();
        for (RestrictionProvider rp : providers) {
            RestrictionPattern pattern = rp.getPattern(oakPath, tree);
            if (pattern != RestrictionPattern.EMPTY) {
                patterns.add(pattern);
            }
        }
        return CompositePattern.create(patterns);
```

### DuplicatedCode
Duplicated code
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/principal/CompositePrincipalProvider.java`
#### Snippet
```java
        Spliterator<? extends Principal> spliterator = Spliterators.spliteratorUnknownSize(principals, 0);
        Stream<? extends Principal> stream = StreamSupport.stream(spliterator, false);
        if (offset > 0) {
            stream = stream.skip(offset);
        }
        if (limit >= 0) {
            stream = stream.limit(limit);
        }
        return stream.iterator();
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsArchiveManager.java`
#### Snippet
```java
        Collections.sort(entryList);

        int i = 0;
        for (RecoveredEntry e : entryList) {
            if (e.position != i) {
                log.warn("Missing entry {}.??? when recovering {}. No more segments will be read.",
                        String.format("%04X", i), archiveName);
                break;
            }
            log.info("Recovering segment {}/{}", archiveName, e.fileName);
            entries.put(e.uuid, e.data);
            i++;
        }
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java
        System.out.printf("    before\n");
        List<String> beforeArchives = Collections.emptyList();
        try {
            beforeArchives = archiveManager.listArchives();
        } catch (IOException e) {
            System.err.println(e);
        }

        printArchives(System.out, beforeArchives);
        System.out.printf("    -> compacting\n");
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java
            String head;
            try (JournalReader journalReader = new JournalReader(journal)) {
                head = String.format("%s root %s\n", journalReader.next().getRevision(), System.currentTimeMillis());
            }

            try (JournalFileWriter journalWriter = journal.openJournalWriter()) {
                System.out.printf("    -> writing new %s: %s\n", journal.getName(), head);
                journalWriter.truncate();
                journalWriter.writeLine(head);
            }
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java
        watch.stop();
        System.out.printf("    after\n");
        List<String> afterArchives = Collections.emptyList();
        try {
            afterArchives = archiveManager.listArchives();
        } catch (IOException e) {
            System.err.println(e);
        }
        printArchives(System.out, afterArchives);
        System.out.printf("Compaction succeeded in %s.\n", printableStopwatch(watch));
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentCopy.java`
#### Snippet
```java
            if (srcPersistence == null || destPersistence == null) {
                srcPersistence = newSegmentNodeStorePersistence(srcType, source);
                destPersistence = newSegmentNodeStorePersistence(destType, destination);
            }

            printMessage(outWriter, "Started segment-copy transfer!");
            printMessage(outWriter, "Source: {0}", srcDescription);
            printMessage(outWriter, "Destination: {0}", destDescription);
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentStoreMigrator.java`
#### Snippet
```java
        List<String> journal = new ArrayList<>();

        try (JournalFileReader reader = source.getJournalFile().openJournalReader()) {
            String line;
            while ((line = reader.readLine()) != null) {
                if (line.length() > 0 && !line.trim().equals("")) {
                    journal.add(line);
                }
                if (journal.size() == revisionCount) {
                    break;
                }
            }
        }
        Collections.reverse(journal);

        try (JournalFileWriter writer = target.getJournalFile().openJournalWriter()) {
            writer.truncate();
            for (String line : journal) {
                writer.writeLine(line);
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentStoreMigrator.java`
#### Snippet
```java
        if (!source.segmentFilesExist()) {
            log.info("No segment archives at {}; skipping.", sourceName);
            return;
        }
        SegmentArchiveManager sourceManager = source.createArchiveManager(false, false, new IOMonitorAdapter(),
                new FileStoreMonitorAdapter(), new RemoteStoreMonitorAdapter());
        SegmentArchiveManager targetManager = target.createArchiveManager(false, false, new IOMonitorAdapter(),
                new FileStoreMonitorAdapter(), new RemoteStoreMonitorAdapter());
        List<String> targetArchives = targetManager.listArchives();

        if (appendMode && !targetArchives.isEmpty()) {
            //last archive can be updated since last copy and needs to be recopied
            String lastArchive = targetArchives.get(targetArchives.size() - 1);
            targetArchives.remove(lastArchive);
        }

        for (String archiveName : sourceManager.listArchives()) {
            log.info("{}/{} -> {}", sourceName, archiveName, targetName);
            if (appendMode && targetArchives.contains(archiveName)) {
                log.info("Already exists, skipping.");
                continue;
            }
            try (SegmentArchiveReader reader = sourceManager.forceOpen(archiveName)) {
                SegmentArchiveWriter writer = targetManager.create(archiveName);
                try {
                    migrateSegments(reader, writer);
                    migrateBinaryRef(reader, writer);
                    migrateGraph(reader, writer);
                } catch (Exception e) {
                    log.error("Can't write archive", e);
                    throw e;
                } finally {
                    writer.close();
                }
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentCopy.java`
#### Snippet
```java
                    List<Future<Segment>> futures = new ArrayList<>();
                    for (SegmentArchiveEntry entry : reader.listSegments()) {
                        futures.add(executor.submit(() -> RETRIER.execute(() -> {
                            Segment segment = new Segment(entry);
                            segment.read(reader);
                            return segment;
                        })));
                    }
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/MapRecord.java`
#### Snippet
```java
            int bitmap = segment.readInt(getRecordNumber(), 4);
            int mask = (1 << BITS_PER_LEVEL) - 1;
            int shift = 32 - (level + 1) * BITS_PER_LEVEL;
            int index = (hash >> shift) & mask;
            int bit = 1 << index;
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Segment.java`
#### Snippet
```java
        boolean hasPrimaryType = (head & (1 << 31)) != 0;
        boolean hasMixinTypes = (head & (1 << 30)) != 0;
        boolean zeroChildNodes = (head & (1 << 29)) != 0;
        boolean manyChildNodes = (head & (1 << 28)) != 0;
        int mixinCount = (head >> 18) & ((1 << 10) - 1);
        int propertyCount = head & ((1 << 18) - 1);
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/CleanupFirstCompactionStrategy.java`
#### Snippet
```java
            @Override
            public Collection<UUID> initialReferences() {
                Set<UUID> references = newHashSet();
                for (SegmentId id : context.getSegmentTracker().getReferencedSegmentIds()) {
                    if (id.isBulkSegmentId()) {
                        references.add(id.asUUID());
                    }
                }
                return references;
            }
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/binaries/BinaryReferencesIndexLoaderV1.java`
#### Snippet
```java
        Buffer meta = reader.readAtEnd(FOOTER_SIZE, FOOTER_SIZE);

        int crc32 = meta.getInt();
        int count = meta.getInt();
        int size = meta.getInt();
        int magic = meta.getInt();

        if (magic != MAGIC) {
            throw new InvalidBinaryReferencesIndexException("Invalid magic number");
        }
        if (count < 0) {
            throw new InvalidBinaryReferencesIndexException("Invalid count");
        }
        if (size < count * 22 + 16) {
            throw new InvalidBinaryReferencesIndexException("Invalid size");
        }

        return reader.readAtEnd(size, size);
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/binaries/BinaryReferencesIndexLoaderV1.java`
#### Snippet
```java
        Buffer data = buffer.slice();
        data.limit(data.limit() - FOOTER_SIZE);

        buffer.position(buffer.limit() - FOOTER_SIZE);
        Buffer meta = buffer.slice();

        int crc32 = meta.getInt();
        int count = meta.getInt();
        int size = meta.getInt();
        int magic = meta.getInt();

        if (magic != MAGIC) {
            throw new InvalidBinaryReferencesIndexException("Invalid magic number");
        }
        if (count < 0) {
            throw new InvalidBinaryReferencesIndexException("Invalid count");
        }
        if (size < count * 22 + 16) {
            throw new InvalidBinaryReferencesIndexException("Invalid size");
        }

        CRC32 checksum = new CRC32();
        data.mark();
        data.update(checksum);
        data.reset();

        if ((int) (checksum.getValue()) != crc32) {
            throw new InvalidBinaryReferencesIndexException("Invalid checksum");
        }

        return new BinaryReferencesIndex(parseBinaryReferencesIndex(count, data));
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/binaries/BinaryReferencesIndexLoaderV1.java`
#### Snippet
```java
        Map<Generation, Map<UUID, Set<String>>> result = new HashMap<>(count);
        for (int i = 0; i < count; i++) {
            Generation k = parseGeneration(buffer);
            Map<UUID, Set<String>> v = parseEntriesBySegment(buffer);
            result.put(k, v);
        }
        return result;
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/binaries/BinaryReferencesIndexLoaderV1.java`
#### Snippet
```java
        Map<UUID, Set<String>> result = new HashMap<>(count);
        for (int i = 0; i < count; i++) {
            UUID k = parseUUID(buffer);
            Set<String> v = parseEntries(buffer);
            result.put(k, v);
        }
        return result;
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/index/IndexLoaderV1.java`
#### Snippet
```java
        int crc32 = meta.getInt();
        int count = meta.getInt();
        int bytes = meta.getInt();
        int magic = meta.getInt();

        if (magic != MAGIC) {
            throw new InvalidIndexException("Magic number mismatch");
        }
        if (count < 1) {
            throw new InvalidIndexException("Invalid entry count");
        }
        if (bytes < count * IndexEntryV1.SIZE + IndexV1.FOOTER_SIZE) {
            throw new InvalidIndexException("Invalid size");
        }
        if (bytes % blockSize != 0) {
            throw new InvalidIndexException("Invalid size alignment");
        }
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/index/IndexLoaderV1.java`
#### Snippet
```java
        CRC32 checksum = new CRC32();
        entries.mark();
        entries.update(checksum);
        entries.reset();
        if (crc32 != (int) checksum.getValue()) {
            throw new InvalidIndexException("Invalid checksum");
        }

        long lastMsb = Long.MIN_VALUE;
        long lastLsb = Long.MIN_VALUE;
```

### DuplicatedCode
Duplicated code
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/index/IndexLoaderV1.java`
#### Snippet
```java
        entries.mark();
        for (int i = 0; i < count; i++) {
            entries.get(entry);

            Buffer buffer = wrap(entry);
            long msb = buffer.getLong();
            long lsb = buffer.getLong();
            int offset = buffer.getInt();
            int size = buffer.getInt();

            if (lastMsb > msb || (lastMsb == msb && lastLsb > lsb)) {
                throw new InvalidIndexException("Incorrect entry ordering");
            }
            if (lastMsb == msb && lastLsb == lsb && i > 0) {
                throw new InvalidIndexException("Duplicate entry");
            }
            if (offset < 0) {
                throw new InvalidIndexException("Invalid entry offset");
            }
            if (offset % blockSize != 0) {
                throw new InvalidIndexException("Invalid entry offset alignment");
            }
            if (size < 1) {
                throw new InvalidIndexException("Invalid entry size");
            }

            lastMsb = msb;
            lastLsb = lsb;
        }
        entries.reset();
```

### DuplicatedCode
Duplicated code
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/OakSolrNodeStateConfiguration.java`
#### Snippet
```java
            for (String typeMapping : typeMappings) {
                String[] mapping = typeMapping.split("=");
                if (mapping.length == 2 && mapping[0] != null && mapping[1] != null) {
                    Type<?> type = Type.fromString(mapping[0]);
                    if (type != null && type.tag() == propertyType.tag()) {
                        return mapping[1];
                    }
                }
            }
```

### DuplicatedCode
Duplicated code
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/InitialContentMigrator.java`
#### Snippet
```java
        Map<String, String> nameToRevision = new LinkedHashMap<>();
        Map<String, String> checkpointSegmentToDoc = new LinkedHashMap<>();

        NodeState initialRoot = targetNodeStore.getRoot();
        NodeState targetRoot = initialRoot;
        NodeState previousRoot = initialRoot;
```

### DuplicatedCode
Duplicated code
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/InitialContentMigrator.java`
#### Snippet
```java
        LOG.info("Rewriting checkpoint names in /:async {}", nameToRevision);
        NodeBuilder targetBuilder = targetRoot.builder();
        NodeBuilder async = targetBuilder.getChildNode(":async");
        for (Map.Entry<String, String> e : nameToRevision.entrySet()) {
            async.setProperty(e.getKey(), e.getValue(), Type.STRING);

            PropertyState temp = async.getProperty(e.getKey() + "-temp");
            if (temp == null) {
                continue;
            }
            List<String> tempValues = Lists.newArrayList(temp.getValue(Type.STRINGS));
            for (Map.Entry<String, String> sToD : checkpointSegmentToDoc.entrySet()) {
                if (tempValues.contains(sToD.getKey())) {
                    tempValues.set(tempValues.indexOf(sToD.getKey()), sToD.getValue());
                }
            }
            async.setProperty(e.getKey() + "-temp", tempValues, Type.STRINGS);
        }

        targetNodeStore.merge(targetBuilder, EmptyHook.INSTANCE, CommitInfo.EMPTY);
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
        String template = "%s (mode: %s, leaseEndTime: %d (%s), leaseTime: %d, leaseFailureMargin: %d, "
                + "lease check end time (leaseEndTime - leaseFailureMargin): %d (%s), now: %d (%s), remaining: %d)"
                + " Need to stop oak-store-document/DocumentNodeStoreService.";
        String errorMsg = String.format(template, LEASE_CHECK_FAILED_MSG, leaseCheckMode.name(), leaseEndTime,
                asISO8601(leaseEndTime), leaseTime, leaseFailureMargin, leaseEndTime - leaseFailureMargin,
                asISO8601(leaseEndTime - leaseFailureMargin), now, asISO8601(now), (leaseEndTime - leaseFailureMargin) - now);

        LOG.error(errorMsg);
        handleLeaseFailure(errorMsg);
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
        Map<Integer, ClusterNodeInfoDocument> allNodeIds = new HashMap<Integer, ClusterNodeInfoDocument>();
        Map<Integer, ClusterNodeInfoDocument> activeNotTimedOutNodes = new HashMap<Integer, ClusterNodeInfoDocument>();
        Map<Integer, ClusterNodeInfoDocument> activeButTimedOutNodes = new HashMap<Integer, ClusterNodeInfoDocument>();
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Revision.java`
#### Snippet
```java
        int comp = timestamp < other.timestamp ? -1 : timestamp > other.timestamp ? 1 : 0;
        if (comp == 0) {
            comp = counter < other.counter ? -1 : counter > other.counter ? 1 : 0;
        }
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
        if (maxCacheAge > 0 || preferCached) {
            // first try without lock
            doc = nodesCache.getIfPresent(key);
            if (doc != null) {
                if (preferCached ||
                        getTime() - doc.getCreated() < maxCacheAge) {
                    stats.doneFindCached(collection, key);
                    if (doc == NodeDocument.NULL) {
                        return null;
                    }
                    return (T) doc;
                }
            }
        }
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
            long memory = 0L;
            memory += (key == null ? 0L: keyType.getMemory(key));
            memory += (value == null ? 0L: valueType.getMemory(value));
            stats.markBytesWritten(memory);
            stats.markPut();
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
            stmt.setObject(si++, hasBinaryAsNullOrInteger(hasBinary), Types.SMALLINT);
            stmt.setObject(si++, deletedOnceAsNullOrInteger(deletedOnce), Types.SMALLINT);
            stmt.setObject(si++, modcount, Types.BIGINT);
            stmt.setObject(si++, cmodcount == null ? Long.valueOf(0) : cmodcount, Types.BIGINT);
            stmt.setObject(si++, appendDataWithComma.length(), Types.BIGINT);
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                if (data.length() < tmd.getDataLimitInOctets() / CHAR2OCTETRATIO) {
                    setDataInStatement(tmd, stmt, si++, data);
                    stmt.setBinaryStream(si++, null, 0);
                } else {
                    setDataInStatement(tmd, stmt, si++, "\"blob\"");
                    byte[] bytes = asBytes(data);
                    stmt.setBytes(si++, bytes);
                }
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                stmt.setObject(si++, modcount, Types.BIGINT);
                stmt.setObject(si++, cmodcount == null ? Long.valueOf(0) : cmodcount, Types.BIGINT);
                stmt.setObject(si++, data.length(), Types.BIGINT);

                if (data.length() < tmd.getDataLimitInOctets() / CHAR2OCTETRATIO) {
                    setDataInStatement(tmd, stmt, si++, data);
                    stmt.setBinaryStream(si++, null, 0);
                } else {
                    setDataInStatement(tmd, stmt, si++, "\"blob\"");
                    byte[] bytes = asBytes(data);
                    stmt.setBytes(si++, bytes);
                }
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                long modified = readLongFromResultSet(rs, field++);
                long modcount = readLongFromResultSet(rs, field++);
                long cmodcount = readLongFromResultSet(rs, field++);
                Long hasBinary = readLongOrNullFromResultSet(rs, field++);
                Boolean deletedOnce = readBooleanOrNullFromResultSet(rs, field++);
                long schemaVersion = tmd.hasVersion() ? readLongFromResultSet(rs, field++) : 0;
                long sdType = tmd.hasSplitDocs() ? readLongFromResultSet(rs, field++) : RDBRow.LONG_UNSET;
                long sdMaxRevTime = tmd.hasSplitDocs() ? readLongFromResultSet(rs, field++) : RDBRow.LONG_UNSET;
                String data = rs.getString(field++);
                byte[] bdata = rs.getBytes(field++);
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBVersionGCSupport.java`
#### Snippet
```java
                    @Override
                    protected NodeDocument computeNext() {
                        // read next batch if necessary
                        if (!batch.hasNext()) {
                            batch = nextBatch();
                        }

                        NodeDocument doc;
                        if (batch.hasNext()) {
                            doc = batch.next();
                            // remember current id
                            startId = doc.getId();
                        } else {
                            doc = endOfData();
                        }
                        return doc;
                    }
```

### DuplicatedCode
Duplicated code
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/TimingDocumentStoreWrapper.java`
#### Snippet
```java
        try {
            long start = now();
            base.remove(collection, key);
            updateAndLogTimes("remove", start, 0, 0);
            if (logCommonCall()) {
                logCommonCall(start, "remove " + collection + " " + key);
            }
        } catch (Exception e) {
            throw convert(e);
        }
```

### DuplicatedCode
Duplicated code
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/EditorDiff.java`
#### Snippet
```java
            if (childEditor != null) {
                childEditor.enter(before, after);

                EditorDiff diff = new EditorDiff(childEditor);
                if (!after.compareAgainstBaseState(before, diff)) {
                    exception = diff.exception;
                    return false;
                }

                childEditor.leave(before, after);
            }
            return true;
```

### DuplicatedCode
Duplicated code
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
        Name name = def.getName();
        if (name != null) {
            tmpl.setName(getOakName(name));
        }
        tmpl.setAutoCreated(def.isAutoCreated());
        tmpl.setMandatory(def.isMandatory());
        tmpl.setOnParentVersion(def.getOnParentVersion());
        tmpl.setProtected(def.isProtected());
```

### DuplicatedCode
Duplicated code
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/MigrationFactory.java`
#### Snippet
```java
        upgrade.setCopyVersions(options.getCopyVersions());
        upgrade.setCopyOrphanedVersions(options.getCopyOrphanedVersions());
        if (options.getIncludePaths() != null) {
            upgrade.setIncludes(options.getIncludePaths());
        }
        if (options.getExcludePaths() != null) {
            upgrade.setExcludes(options.getExcludePaths());
        }
        if (options.getMergePaths() != null) {
            upgrade.setMerges(options.getMergePaths());
        }
```

### DuplicatedCode
Duplicated code
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/AzureDataStoreFactory.java`
#### Snippet
```java
        final ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        StatisticsProvider statsProvider = new DefaultStatisticsProvider(executor);
        delegate.setStatisticsProvider(statsProvider);
        // Reduce staging purge interval to 60 seconds
        delegate.setStagingPurgeInterval(60);

        try {
            delegate.init(tempHomeDir.getPath());
        } catch (RepositoryException e) {
            throw new IOException(e);
        }
        closer.register(asCloseable(delegate));
        closer.register(new Closeable() {
            @Override
            public void close() throws IOException {
                executor.shutdown();
                try {
                    if (!executor.awaitTermination(30, TimeUnit.SECONDS)) {
                        throw new IOException("Can't shut down the executor");
                    }
                } catch (InterruptedException e) {
                    throw new IOException(e);
                }
            }
        });
        if (ignoreMissingBlobs) {
            return new SafeDataStoreBlobStore(delegate);
        } else {
            return new DataStoreBlobStore(delegate);
        }
```

### DuplicatedCode
Duplicated code
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/AzureDataStoreFactory.java`
#### Snippet
```java
        return new Closeable() {
            @Override
            public void close() throws IOException {
                try {
                    while (store.getStats().get(1).getElementCount() > 0) {
                        Thread.sleep(100);
                    }
                } catch (InterruptedException e) {
                    throw new IOException(e);
                } finally {
                    try {
                        store.close();
                    } catch (DataStoreException e) {
                        throw new IOException(e);
                    }
                }
            }
        };
```

### DuplicatedCode
Duplicated code
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentAzureFactory.java`
#### Snippet
```java
        try {
            if (readOnly) {
                final ReadOnlyFileStore fs;
                builder.withSegmentCacheSize(segmentCacheSize > 0 ? segmentCacheSize : DEFAULT_SEGMENT_CACHE_MB);
                fs = builder.buildReadOnly();
                closer.register(asCloseable(fs));
                return SegmentNodeStoreBuilders.builder(fs).build();
            } else {
                final FileStore fs;
                fs = builder.build();
                closer.register(asCloseable(fs));
                return new NodeStoreWithFileStore(SegmentNodeStoreBuilders.builder(fs).build(), fs);
            }
        } catch (InvalidFileStoreVersionException e) {
            throw new IllegalStateException(e);
        }
```

## RuleId[id=ProtectedMemberInFinalClass]
### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/MemoryBlobStore.java`
#### Snippet
```java
        return new AbstractIterator<String>() {
            @Override
            protected String computeNext() {
                if (iter.hasNext()) {
                    BlockId blockId = iter.next();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/PropertyHistory.java`
#### Snippet
```java

            @Override
            protected NodeDocument computeNext() {
                refillQueue();
                if (queue.isEmpty()) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/RevisionVector.java`
#### Snippet
```java
            int i = 0;
            @Override
            protected Revision computeNext() {
                if (i >= revisions.length) {
                    return endOfData();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java

                    @Override
                    protected JournalEntry computeNext() {
                        if (!it.hasNext()) {
                            return endOfData();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java`
#### Snippet
```java
                    Queues.newArrayDeque(getPreviousRanges().entrySet());
            @Override
            protected NodeDocument computeNext() {
                if(!previousRanges.isEmpty()){
                    Map.Entry<Revision, Range> e = previousRanges.remove();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java`
#### Snippet
```java
        return new AbstractIterator<NodeDocument>() {
            @Override
            protected NodeDocument computeNext() {
                NodeDocument next;
                for (;;) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBVersionGCSupport.java`
#### Snippet
```java

                    @Override
                    protected NodeDocument computeNext() {
                        // read next batch if necessary
                        if (!batch.hasNext()) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * The commit queue to coordinate the commits.
     */
    protected final CommitQueue commitQueue;

    /**
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
            return new AbstractIterator<T>() {
                @Override
                protected T computeNext() {
                    if (it.hasNext()) {
                        T next = it.next();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java

                    @Override
                    protected NodeDocument computeNext() {
                        // read next batch if necessary
                        if (!batch.hasNext()) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoBlobStore.java`
#### Snippet
```java
        return new AbstractIterator<String>() {
            @Override
            protected String computeNext() {
                if (cur.hasNext()) {
                    MongoBlob blob = cur.next();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapIdentityProvider.java`
#### Snippet
```java

                @Override
                protected ExternalGroup getNext() {
                    while (iter.hasNext()) {
                        try {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapIdentityProvider.java`
#### Snippet
```java

                @Override
                protected ExternalUser getNext() {
                    while (iter.hasNext()) {
                        try {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/NodeBuilderTree.java`
#### Snippet
```java
    }

    protected NodeBuilderTree(@Nullable NodeBuilderTree parent, @NotNull NodeBuilder nodeBuilder,
           @NotNull String name) {
        this.parent = parent;
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
    final class AsyncIndexStats extends AnnotatedStandardMBean implements  IndexStatsMBean {

        protected AsyncIndexStats(String name, StatisticsProvider statsProvider) {
            super(IndexStatsMBean.class);
            this.execStats = new ExecutionStats(name, statsProvider);
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/PermissionEntryProviderImpl.java`
#### Snippet
```java

        @Override
        protected PermissionEntry getNext() {
            PermissionEntry next = null;
            while (next == null) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissionImpl.java`
#### Snippet
```java
        @Nullable
        @Override
        protected PermissionEntry getNext() {
            PermissionEntry next = null;
            while (next == null) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/user/LoginModuleImpl.java`
#### Snippet
```java
    private static final Logger log = LoggerFactory.getLogger(LoginModuleImpl.class);

    protected static final Set<Class> SUPPORTED_CREDENTIALS = new HashSet<>(3);
    static {
        SUPPORTED_CREDENTIALS.add(SimpleCredentials.class);
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/TapeSampling.java`
#### Snippet
```java

            @Override
            protected T computeNext() {
                if (sampled == k) {
                    return endOfData();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/MutableRecordNumbers.java`
#### Snippet
```java

            @Override
            protected Entry computeNext() {
                if (index < entries.length) {
                    return new Entry() {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/ImmutableRecordNumbers.java`
#### Snippet
```java
            private int pos = -1;
            @Override
            protected Entry computeNext() {
                while (++pos < offsets.length && offsets[pos] < 0) { }
                if (pos < offsets.length) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Segment.java`
#### Snippet
```java

                    @Override
                    protected SegmentId computeNext() {
                        if (reference <= referencedSegmentIdCount) {
                            return getSegmentId(reference++);
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/JournalReader.java`
#### Snippet
```java
     */
    @Override
    protected JournalEntry computeNext() {
        try {
            String line = null;
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/HttpServer.java`
#### Snippet
```java
        ServletHolder jcrremote = new ServletHolder(new JcrRemotingServlet() {
            @Override
            protected Repository getRepository() {
                return jcrRepository;
            }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/SpringBootSupport.java`
#### Snippet
```java
            return Iterators.asEnumeration(new AbstractIterator<String>() {
                @Override
                protected String computeNext() {
                    if (e.hasMoreElements()){
                        return e.nextElement().getName();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java

            @Override
            protected SolrResultRow computeNext() {
                if (!queue.isEmpty() || loadDocs()) {
                    return queue.remove();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/TokenizerChain.java`
#### Snippet
```java

    @Override
    protected TokenStreamComponents createComponents(String fieldName, Reader reader) {
        Tokenizer tk = tokenizer.create(reader);
        TokenStream ts = tk;
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java

            @Override
            protected LuceneResultRow computeNext() {
                while (!queue.isEmpty() || loadDocs()) {
                    return queue.remove();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/TapeSampling.java`
#### Snippet
```java

            @Override
            protected T computeNext() {
                if (sampled == k) {
                    return endOfData();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/SuggestHelper.java`
#### Snippet
```java
    private static final Analyzer analyzer = new Analyzer() {
        @Override
        protected TokenStreamComponents createComponents(String fieldName, Reader reader) {
            return new TokenStreamComponents(new CRTokenizer(Version.LUCENE_47, reader));
        }
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/SuggestHelper.java`
#### Snippet
```java
        return new AnalyzingInfixSuggester(Version.LUCENE_47, tempDir, analyzer, analyzer, 3) {
            @Override
            protected Directory getDirectory(File path) throws IOException {
                if (tempDir == null || tempDir.getAbsolutePath().equals(path.getAbsolutePath())) {
                    return suggestDirectory; // use oak directory for writing suggest index
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/StatisticalSortedSetDocValuesFacetCounts.java`
#### Snippet
```java
            int nextDocId = NO_MORE_DOCS;
            @Override
            protected Integer computeNext() {
                try {
                    loadNextMatchingDocsIfRequired();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java

            @Override
            protected FulltextResultRow computeNext() {
                while (!queue.isEmpty() || loadDocs()) {
                    return queue.remove();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileStoreIterator.java`
#### Snippet
```java
        return new AbstractIterator<NodeStateEntry>() {
            @Override
            protected NodeStateEntry computeNext() {
                //If queue is empty try to append by getting entry from base
                if (!qitr.hasNext() && baseItr.hasNext()) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/ChildNodeStateProvider.java`
#### Snippet
```java
        return new AbstractIterator<NodeStateEntry>() {
            @Override
            protected NodeStateEntry computeNext() {
                while (pitr.hasNext() && isAncestor(path, pitr.peek().getPath())) {
                    NodeStateEntry nextEntry = pitr.next();
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileStore.java`
#### Snippet
```java
        return new AbstractIterator<NodeStateEntry>() {
            @Override
            protected NodeStateEntry computeNext() {
                if (itr.hasNext()) {
                   return convert(itr.nextLine());
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/EntryIterator.java`
#### Snippet
```java

    @Override
    protected PermissionEntry getNext() {
        PermissionEntry next = null;
        while (next == null) {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/DefaultSyncHandler.java`
#### Snippet
```java

            @Override
            protected @Nullable SyncedIdentity getNext() {
                while (iter.hasNext()) {
                    try {
```

### ProtectedMemberInFinalClass
Class member declared `protected` in 'final' class
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/principal/ExternalGroupPrincipalProvider.java`
#### Snippet
```java

        @Override
        protected @Nullable Principal getNext() {
            if (!propValues.hasNext()) {
                if (rows.hasNext()) {
```

## RuleId[id=RedundantEscapeInRegexReplacement]
### RedundantEscapeInRegexReplacement
Redundant escape of '\['
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDiff.java`
#### Snippet
```java
                    child.getProperties().put(p, v);
                } else if (v.startsWith("[") && v.contains("\"nam:")) {
                    v = v.replaceAll("\\[\"nam:", "\\[\"");
                    v = v.replaceAll(", \"nam:", ", \"");
                    child.getProperties().put(p, v);
```

## RuleId[id=DanglingJavadoc]
### DanglingJavadoc
Dangling Javadoc comment
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/StringSizeEstimator.java`
#### Snippet
```java
    }

    /**
     * Class initializations.
     */
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/StringSizeEstimator.java`
#### Snippet
```java
 * limitations under the License.
 */
/**
 * 
 */
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3DataStore.java`
#### Snippet
```java
    }

    /**------------------------------------------- Getters & Setters-----------------------------**/

    /**
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java

    private static long estimateBestSizeOfBlocks(long sizeoffile, int maxtmpfiles, long maxMemory) {
        /**
         * We multiply by two because later on someone insisted on counting the memory usage as 2
         * bytes per character. By this model, loading a file with 1 character will use 2 bytes.
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
        protected void init() {
            super.init();
            /**
             * only need to do comparison if base class implementation
             * detected a non-MAJOR (i.e. TRIVIAL) modification;
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
                type = MAJOR;
            } else {
                /**
                 * neither added nor removed => has to be either identical
                 * or modified
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
        }

        /**
         * walk through defs1 and process all entries found in
         * both defs1 & defs2 and those found only in defs1
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
        }

        /**
         * defs2 by now only contains entries found in defs2 only;
         * walk through defs2 and process all remaining entries
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
        protected void init() {
            super.init();
            /**
             * only need to do comparison if base class implementation
             * detected a non-MAJOR (i.e. TRIVIAL) modification;
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/DocViewImportHandler.java`
#### Snippet
```java
    public void ignorableWhitespace(char[] ch, int start, int length)
            throws SAXException {
        /**
         * buffer data reported by the ignorableWhitespace event;
         * will be processed on the next endElement or startElement event.
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/DocViewImportHandler.java`
#### Snippet
```java
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        /**
         * buffer data reported by the characters event;
         * will be processed on the next endElement or startElement event.
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/ImporterImpl.java`
#### Snippet
```java
    @Override
    public void end() throws RepositoryException {
        /**
         * adjust references that refer to uuids which have been mapped to
         * newly generated uuids on import
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/ImporterImpl.java`
#### Snippet
```java
                    log.debug("Skipping protected node: {}", existing);
                    parents.push(existing);
                    /**
                     * let ProtectedPropertyImporters handle the properties
                     * associated with the imported node. this may include overwriting,
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAuthorizationConfiguration.java`
#### Snippet
```java
    @Override
    public Context getContext() {
        /**
         * Simplified implementation of the Context interface that just tests
         * item names without every evaluating node type information.
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/MultiFilterSplitOrderBySearcher.java`
#### Snippet
```java
    protected void searchCommon(QueryManager qm, ExecutionContext
        context) throws RepositoryException {
        /** Execute standard query */
        Query stdQuery = getStandardQuery(qm, context);
        stdQuery.setLimit(LIMIT);
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/SplitOrderBySearcher.java`
#### Snippet
```java
    protected void searchCommon(QueryManager qm, ExecutionContext context)
        throws RepositoryException {
        /** Execute standard query */
        Query stdQuery = getStandardQuery(qm, context);
        stdQuery.setLimit(LIMIT);
```

### DanglingJavadoc
Dangling Javadoc comment
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/stats/QueryStat.java`
#### Snippet
```java
    void clearPopularQueriesQueue();

    /** -- GENERAL OPS -- **/

    /**
```

## RuleId[id=SwitchStatementWithConfusingDeclaration]
### SwitchStatementWithConfusingDeclaration
Local variable `parent` declared in one 'switch' branch and used in another
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/composite/CompositeTreePermission.java`
#### Snippet
```java
            case 0: return TreePermission.EMPTY;
            case 1:
                TreePermission parent = null;
                for (TreePermission tp : parentPermission.treePermissions) {
                    if (isValid(tp)) {
```

### SwitchStatementWithConfusingDeclaration
Local variable `path` declared in one 'switch' branch and used in another
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/PropertyImpl.java`
#### Snippet
```java
                    case PropertyType.PATH:
                    case PropertyType.NAME:
                        String path = value.getString();
                        if (path.startsWith("[") && path.endsWith("]")) {
                            // identifier path
```

## RuleId[id=TrivialIf]
### TrivialIf
`if` statement can be simplified
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/cloud/CloudBlobStore.java`
#### Snippet
```java
                loadElements(set);

                if (!queue.isEmpty()) {
                    return true;
                }
```

### TrivialIf
`if` statement can be simplified
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
        private boolean skip() {
            File snapshotMarker = getSnapshotMarkerFile();
            if (snapshotMarker.exists() &&
                (snapshotMarker.lastModified() > (clock.getTime() - interval))) {
                return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
            }
            // Check now if ids are available
            if (!queue.isEmpty()) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
            @Override
            public boolean apply(@Nullable DataRecord input) {
                if (input != null && (maxLastModifiedTime <= 0
                        || input.getLastModified() < maxLastModifiedTime)) {
                    return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java
            return false;
        }
        if (!matches(this.inactiveIds, inactiveIds)) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
        @Override
        public boolean isStandardDescriptor(String key) {
            if (!OAK_DISCOVERYLITE_CLUSTERVIEW.equals(key)) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
        @Override
        public boolean isSingleValueDescriptor(String key) {
            if (!OAK_DISCOVERYLITE_CLUSTERVIEW.equals(key)) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/bundlor/BundledDocumentDiffer.java`
#### Snippet
```java

        //If all child nodes are bundled then diff is complete
        if (fromDocState.hasOnlyBundledChildren()
                && toDocState.hasOnlyBundledChildren()){
            return false;
```

### TrivialIf
`if` statement can be simplified
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
    boolean needSwitch() {
        long size = writeStore.getFileSize();
        if (size / 1024 / 1024 <= maxSizeMB) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ValueConverter.java`
#### Snippet
```java
                break;
        }
        if (sourceType == PropertyType.STRING ||
                sourceType == PropertyType.BINARY) {
            return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/FullTextSearchImpl.java`
#### Snippet
```java
        }
        // OAK-2050
        if (!query.getSettings().getFullTextComparisonWithoutIndex()) {
            return true;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/FullTextSearchImpl.java`
#### Snippet
```java
    boolean enforcePropertyExistence(String propertyName, SelectorImpl selector) {
        PropertyValue p = selector.currentProperty(propertyName);
        if (p == null) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SimilarImpl.java`
#### Snippet
```java
        }
        if (propertyName != null) {
            if (selector.currentProperty(propertyName) == null) {
                // property not found
                return false;
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/EquiJoinConditionImpl.java`
#### Snippet
```java
        if (!p1.isArray() && p2.isArray()) {
            p1 = convertValueToType(p1, p2);
            if (p1 != null && PropertyValues.match(p1, p2)) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/EquiJoinConditionImpl.java`
#### Snippet
```java
        } else if (p1.isArray() && !p2.isArray()) {
            p2 = convertValueToType(p2, p1);
            if (p2 != null && PropertyValues.match(p1, p2)) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
            }
        }
        if (joinCondition != null && !joinCondition.evaluate()) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/strategy/IndexEntry.java`
#### Snippet
```java
            return false;
        if (propertyValue == null) {
            if (other.propertyValue != null)
                return false;
        } else if (!propertyValue.equals(other.propertyValue))
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/strategy/IndexEntry.java`
#### Snippet
```java
            if (other.propertyValue != null)
                return false;
        } else if (!propertyValue.equals(other.propertyValue))
            return false;
        return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/diffindex/BaseDiffCollector.java`
#### Snippet
```java
            if (collector.match(nodeState, filter)) {
                results.add(concat(path, currentPath));
                if (collector.isUnique()) {
                    return false;
                }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditor.java`
#### Snippet
```java
        long rValue = revision.getValue(Type.LONG);
        
        if (brValue >= rValue) {
            return true;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypePredicate.java`
#### Snippet
```java
                return true;
            }
            if (mixinTypes != null
                    && any(TreeUtil.getNames(input, JCR_MIXINTYPES), in(mixinTypes))) {
                return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypePredicate.java`
#### Snippet
```java
            return true;
        }
        if (mixinTypes != null && any(mixins, in(mixinTypes))) {
            return true;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypePredicate.java`
#### Snippet
```java
                return true;
            }
            if (mixinTypes != null
                    && any(input.getNames(JCR_MIXINTYPES), in(mixinTypes))) {
                return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
       for (NodeDefinition def : getNamedNodeDefinitions(childName)) {
           boolean match = true;
           if (childEffective != null && !childEffective.includesNodeTypes(def.getRequiredPrimaryTypeNames())) {
               match = false;
           }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
       for (NodeDefinition def : getResidualNodeDefinitions()) {
           boolean match = true;
           if (childEffective != null && !childEffective.includesNodeTypes(def.getRequiredPrimaryTypeNames())) {
               match = false;
           }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/NumericConstraint.java`
#### Snippet
```java
            if (upperBound != null) {
                if (upperInclusive) {
                    if (greater(t, upperBound)) {
                        return false;
                    }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/NumericConstraint.java`
#### Snippet
```java
                    }
                } else {
                    if (greaterOrEqual(t, upperBound)) {
                        return false;
                    }
```

### TrivialIf
`if` statement can be simplified
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/ChangeSetFilterImpl.java`
#### Snippet
```java
            // and a 3rd time, if we can't find any nodeName match
            // here, then we're filtering out
            if (disjoint(changeSet.getParentNodeNames(), this.parentNodeNames)) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/IndexDefinitionBuilder.java`
#### Snippet
```java
                Set<String> asyncAfter = getAsyncValuesWithoutNRT(after);
                return asyncBefore.equals(asyncAfter);
            } else if (ignorablePropertiesList.contains(before.getName()) || ignorableFacetConfigProps.contains(before.getName())) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
            }
            if (beforeChildRemoved) {
                if (!diff.childNodeDeleted(beforeChildName, beforeChild)) {
                    return false;
                }
```

### TrivialIf
`if` statement can be simplified
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        }

        if (a instanceof SegmentNodeState && b instanceof SegmentNodeState
            && ((SegmentNodeState) a).getStableId().equals(((SegmentNodeState) b).getStableId())) {
                return true;
```

### TrivialIf
`if` statement can be simplified
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentBlob.java`
#### Snippet
```java
    public String getContentIdentity() {
        String blobId = getBlobId();
        if (blobId != null){
            return blobId;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/GCJournal.java`
#### Snippet
```java
                return false;
            }
            if (!root.equals(other.root)) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/osgi/OsgiUtil.java`
#### Snippet
```java
        String fromComponent = lookup(context, nameInComponent);

        if (fromComponent != null) {
            return fromComponent;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/osgi/OsgiUtil.java`
#### Snippet
```java
        String fromFramework = lookup(context.getBundleContext(), nameInFramework);

        if (fromFramework != null) {
            return fromFramework;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/FrozenNodeRef.java`
#### Snippet
```java
        }
        boolean containsJcrFrozenNodeName = Iterables.contains(PathUtils.elements(uuidRefPath), "jcr:frozenNode");
        if (!containsJcrFrozenNodeName) {
            // TODO: we could consider NOT continuing here, as we might opt to store frozenNodes
            // under another parent than 'jcr:frozenNode' - but so far that's how it is and it's faster
```

### TrivialIf
`if` statement can be simplified
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TikaHelper.java`
#### Snippet
```java
        }
        p = unwrap(p);
        if (p instanceof EmptyParser){
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/Filter.java`
#### Snippet
```java
                return false;
            }
            if (propertyType != other.propertyType) {
                return false;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/NodeDelegate.java`
#### Snippet
```java
        if (protectedResidual) {
            Tree definition = findMatchingResidualPropertyDefinition(types, propertyType);
            if (definition != null && TreeUtil.getBoolean(definition, JCR_PROTECTED)) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/nodestate/NameFilteringNodeState.java`
#### Snippet
```java
            return false;
        }
        if (path.getBytes(Charsets.UTF_8).length < Utils.PATH_LONG) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
            return false;
        }
        if (name.getBytes(Charsets.UTF_8).length <= Utils.NODE_NAME_LIMIT) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
            return false;
        }
        if (parentPath.getBytes(Charsets.UTF_8).length < Utils.PATH_LONG) {
            return false;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexStatsUpdateCallback.java`
#### Snippet
```java
    private boolean shouldUpdateStats() {
        boolean timeToUpdate = false;
        if (indexingContext.isAsync()
                && asyncIndexesSizeStatsUpdate != null
                && asyncIndexesSizeStatsUpdate.getScheduleTimeInMillis() >= 0
```

### TrivialIf
`if` statement can be simplified
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
        }
        if (type != null) {
            if (!includePropertyType(type, rule)) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/hybrid/ExternalIndexObserver.java`
#### Snippet
```java
        }

        if (indexedPaths.isEmpty()){
            return true;
        }
```

### TrivialIf
`if` statement can be simplified
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
                Set<String> asyncAfter = getAsyncValuesWithoutNRT(after);
                return asyncBefore.equals(asyncAfter);
            } else if (ignorablePropertiesList.contains(before.getName()) || ignorableFacetConfigProps.contains(before.getName())) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java
    public static boolean isIndexChildNode(String commandlineIndexPath, String repositoryIndexPath) {
        if (PathUtils.getName(commandlineIndexPath).equals(OAK_INDEX)) {
            if (repositoryIndexPath.startsWith(commandlineIndexPath)) {
                return true;
            }
```

### TrivialIf
`if` statement can be simplified
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java
            String commandlineIndexBaseName = IndexName.parse(commandlineIndexPath).getBaseName();
            String repositoryIndexBaseName = IndexName.parse(repositoryIndexPath).getBaseName();
            if (commandlineIndexBaseName.equals(repositoryIndexBaseName)) {
                return true;
            }
```

## RuleId[id=OptionalUsedAsFieldOrParameterType]
### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'uploadId'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadToken.java`
#### Snippet
```java

    private String blobId;
    private Optional<String> uploadId;

    /**
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'offset'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryOptions.java`
#### Snippet
```java
    public String indexTag;
    public Optional<Long> limit = Optional.empty();
    public Optional<Long> offset = Optional.empty();
    public List<String> prefetch = Collections.emptyList();
    public Optional<Integer> prefetchCount = Optional.empty();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'prefetchCount'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryOptions.java`
#### Snippet
```java
    public Optional<Long> offset = Optional.empty();
    public List<String> prefetch = Collections.emptyList();
    public Optional<Integer> prefetchCount = Optional.empty();
    
    public enum Traversal {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryOptions.java`
#### Snippet
```java
    public String indexName;
    public String indexTag;
    public Optional<Long> limit = Optional.empty();
    public Optional<Long> offset = Optional.empty();
    public List<String> prefetch = Collections.emptyList();
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'value'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java
    }

    private static long getValue(List<Query> queries, Optional<Long> value, Function<Query, Optional<Long>> getter, Long defaultValue) {
        if (!value.isPresent()) {
            return queries.stream().map(getter::apply).filter(Optional::isPresent).map(Optional::get).findFirst()
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
    private boolean explain;
    private boolean measure;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private long size = -1;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'offset'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
    private boolean measure;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private long size = -1;
    private final QueryEngineSettings settings;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
    private boolean explain, measure;
    private boolean distinct;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private long size = -1;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'offset'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
    private boolean distinct;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private long size = -1;
    private boolean prepared;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lastRoJournalEntry'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitJournalFile.java`
#### Snippet
```java
    private final Optional<String> lastRoJournalEntry;

    public SplitJournalFile(JournalFile roJournalFile, JournalFile rwJournalFile, Optional<String> lastRoJournalEntry) {
        this.roJournalFile = roJournalFile;
        this.rwJournalFile = rwJournalFile;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastRoJournalEntry'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitJournalFile.java`
#### Snippet
```java
    private final JournalFile rwJournalFile;

    private final Optional<String> lastRoJournalEntry;

    public SplitJournalFile(JournalFile roJournalFile, JournalFile rwJournalFile, Optional<String> lastRoJournalEntry) {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'lastRoJournalEntry'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitJournalFileReader.java`
#### Snippet
```java
    private boolean roJournalReaderHasFinished;

    public SplitJournalFileReader(JournalFileReader roJournalReader, JournalFileReader rwJournalReader, Optional<String> lastRoJournalEntry) {
        this.roJournalReader = roJournalReader;
        this.rwJournalReader = rwJournalReader;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastRoJournalEntry'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitJournalFileReader.java`
#### Snippet
```java
    private final JournalFileReader rwJournalReader;

    private final Optional<String> lastRoJournalEntry;

    private boolean rwJournalReaderHasFinished;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastRoJournalEntry'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitPersistence.java`
#### Snippet
```java
    private final Optional<String> lastRoArchive;

    private final Optional<String> lastRoJournalEntry;

    public SplitPersistence(SegmentNodeStorePersistence roPersistence, SegmentNodeStorePersistence rwPersistence) throws IOException {
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'lastRoArchive'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitPersistence.java`
#### Snippet
```java
    private final SegmentNodeStorePersistence rwPersistence;

    private final Optional<String> lastRoArchive;

    private final Optional<String> lastRoJournalEntry;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'queue'
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/AbstractRemoteSegmentArchiveWriter.java`
#### Snippet
```java
    protected final FileStoreMonitor monitor;

    protected final Optional<SegmentWriteQueue> queue;

    protected Map<UUID, RemoteSegmentArchiveEntry> index = Collections.synchronizedMap(new LinkedHashMap<>());
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryImpl.java`
#### Snippet
```java
    private final String language;
    private final String statement;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private boolean parsed;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'offset'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryImpl.java`
#### Snippet
```java
    private final String statement;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private boolean parsed;
    private String storedQueryPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryManagerImpl.java`
#### Snippet
```java

    public QueryResult executeQuery(String statement, String language,
        Optional<Long> limit, Optional<Long> offset, HashMap<String, Value> bindVariableMap) throws RepositoryException {
        try {
            Map<String, PropertyValue> bindMap = convertMap(bindVariableMap);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'offset'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryManagerImpl.java`
#### Snippet
```java

    public QueryResult executeQuery(String statement, String language,
        Optional<Long> limit, Optional<Long> offset, HashMap<String, Value> bindVariableMap) throws RepositoryException {
        try {
            Map<String, PropertyValue> bindMap = convertMap(bindVariableMap);
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'limit'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/qom/QueryObjectModelImpl.java`
#### Snippet
```java
    private final Ordering[] orderings;
    private final Column[] columns;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private boolean parsed;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for field 'offset'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/qom/QueryObjectModelImpl.java`
#### Snippet
```java
    private final Column[] columns;
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private boolean parsed;
    private String storedQueryPath;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'limit'
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/QueryEngine.java`
#### Snippet
```java
     */
    Result executeQuery(
            String statement, String language, Optional<Long> limit, Optional<Long> offset,
            Map<String, ? extends PropertyValue> bindings,
            Map<String, String> mappings) throws ParseException;
```

### OptionalUsedAsFieldOrParameterType
`Optional` used as type for parameter 'offset'
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/QueryEngine.java`
#### Snippet
```java
     */
    Result executeQuery(
            String statement, String language, Optional<Long> limit, Optional<Long> offset,
            Map<String, ? extends PropertyValue> bindings,
            Map<String, String> mappings) throws ParseException;
```

## RuleId[id=CharsetObjectCanBeUsed]
### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractSharedBackend.java`
#### Snippet
```java
            Mac mac = Mac.getInstance(ALGORITHM);
            mac.init(new SecretKeySpec(getReferenceKey(), ALGORITHM));
            byte[] hash = mac.doFinal(id.getBytes("UTF-8"));

            return id + ':' + encodeHexString(hash);
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
            Mac mac = Mac.getInstance(ALGORITHM);
            mac.init(new SecretKeySpec(getReferenceKey(), ALGORITHM));
            byte[] hash = mac.doFinal(blobId.getBytes("UTF-8"));
            return blobId + ':' + BaseEncoding.base32Hex().encode(hash);
        } catch (NoSuchAlgorithmException e) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentSerializer.java`
#### Snippet
```java
                // GZIP
                try (GZIPInputStream gis = new GZIPInputStream(new ByteArrayInputStream(bdata), 65536)) {
                    return IOUtils.toString(gis, "UTF-8");
                }
            } else {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
    public static final int NODE_NAME_LIMIT = Integer.getInteger("oak.nodeNameLimit", 150);

    private static final Charset UTF_8 = Charset.forName("UTF-8");

    private static final char[] HEX_DIGITS = "0123456789abcdef".toCharArray();
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        if (tmd.isIdBinary()) {
            try {
                return new String(rs.getBytes(idx), "UTF-8");
            } catch (UnsupportedEncodingException ex) {
                LOG.error("UTF-8 not supported", ex);
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
                } else if ("-o".equals(param) || "--out".equals(param)) {
                    OutputStream os = new FileOutputStream(args[++i]);
                    out = new PrintStream(os, true, "UTF-8");
                } else if ("--from-db2-dump".equals(param)) {
                    dumpfile = args[++i];
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
public class RDBExport {

    private static final Charset UTF8 = Charset.forName("UTF-8");

    private enum Format {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
        byte[] bytes;
        try {
            bytes = data.getBytes("UTF-8");
        } catch (UnsupportedEncodingException ex) {
            LOG.error("UTF-8 not supported??", ex);
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/broadcast/TCPBroadcaster.java`
#### Snippet
```java
    private static final int MAX_BUFFER_SIZE = 64;
    private static final AtomicInteger NEXT_ID = new AtomicInteger();
    private static final Charset UTF8 = Charset.forName("UTF-8");

    private final int id = NEXT_ID.incrementAndGet();
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/IOUtils.java`
#### Snippet
```java
     */
    public static String readString(InputStream in) throws IOException {
        return new String(readBytes(in), "UTF-8");
    }

```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/IOUtils.java`
#### Snippet
```java
     */
    public static void writeString(OutputStream out, String s) throws IOException {
        writeBytes(out, s.getBytes("UTF-8"));
    }

```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
            copyInThread(p.getErrorStream(), err);
            p.waitFor();
            String e = new String(err.toByteArray(), "UTF-8");
            if (e.length() > 0) {
                throw new RuntimeException(e);
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
                throw new RuntimeException(e);
            }
            String output = new String(out.toByteArray(), "UTF-8");
            return output;
        } catch (Exception e) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/util/SafeEncode.java`
#### Snippet
```java
     */
    public static String safeEncode(String s) throws UnsupportedEncodingException {
        return URLEncoder.encode(s, "UTF-8").replace("%2F", "/").replace("%3A", ":");
    }

```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java
            ByteArrayOutputStream out = new ByteArrayOutputStream();
            Base64.decode(value, out);
            value = new String(out.toByteArray(), "UTF-8");
        }
        return value;
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java

    private Reader openReader() throws IOException {
        return new InputStreamReader(openStream(), "UTF-8");
    }

```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java
                tmpFile = fileFactory.createTransientFile("txt", null, null);
                BufferedOutputStream fout = new BufferedOutputStream(new FileOutputStream(tmpFile));
                writer = new OutputStreamWriter(fout, "UTF-8");
                writer.write(buffer.toString());
                writer.write(chars, start, len);
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/BufferedStringValue.java`
#### Snippet
```java
            return new Base64ReaderInputStream(reader());
        } else if (buffer != null) {
            return new ByteArrayInputStream(retrieve().getBytes("UTF-8"));
        } else if (tmpFile != null) {
            // close writer first
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/util/NodeTypeIndexingUtils.java`
#### Snippet
```java
        }
        FileOutputStream fileOutputStream = new FileOutputStream(file);
        fileOutputStream.write(stringWriter.toString().getBytes("UTF-8"));
        fileOutputStream.flush();
        fileOutputStream.close();
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_16LE can be used instead
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/MinHashFilter.java`
#### Snippet
```java

        for (int i = 0; i < hashCount; i++) {
          byte[] bytes = current.getBytes("UTF-16LE");
          LongPair hash = new LongPair();
          murmurhash3_x64_128(bytes, 0, bytes.length, 0, hash);
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-examples/webapp/src/main/webapp/about.jsp`
#### Snippet
```java
        InputStream input = getServletContext().getResourceAsStream(path);
        try {
            Reader reader = new InputStreamReader(input, "UTF-8");
            for (int ch = reader.read(); ch != -1; ch = reader.read()) {
                if (ch == '<') {
```

### CharsetObjectCanBeUsed
StandardCharsets.ISO_8859_1 can be used instead
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
            q = "";
        } else {
            q = new String(q.getBytes("ISO-8859-1"), "UTF-8");
        }
        if (request.getParameter("as_q") != null) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
            q = "";
        } else {
            q = new String(q.getBytes("ISO-8859-1"), "UTF-8");
        }
        if (request.getParameter("as_q") != null) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
      <table border=0 cellpadding=0 cellspacing=0>
        <tr><td><font><%= r.getValue("rep:excerpt(jcr:content)").getString() %>
          <%= Text.encodeIllegalXMLCharacters(file.getPath()) %> - <%= size %> - <%= lastModified %> - <nobr><a href="<%= Text.encodeIllegalXMLCharacters(request.getContextPath()) %>/search.jsp?q=related:<%= Text.encodeIllegalXMLCharacters(URLEncoder.encode(file.getPath(), "UTF-8")) %>">Similar pages</a></nobr></font></td>
        </tr>
      </table>
```

### CharsetObjectCanBeUsed
StandardCharsets.ISO_8859_1 can be used instead
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        String seedWord = request.getParameter("seed");
        if (seedWord != null) {
            seedWord = new String(seedWord.getBytes("ISO-8859-1"), "UTF-8");
        }
        int numDocs = 0;
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        String seedWord = request.getParameter("seed");
        if (seedWord != null) {
            seedWord = new String(seedWord.getBytes("ISO-8859-1"), "UTF-8");
        }
        int numDocs = 0;
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                        Collections.reverse(folderNames);
                        folderNames.addAll(Arrays.asList(path.split("/", 0)));
                        final String fileName = URLDecoder.decode((String) folderNames.remove(folderNames.size() - 1), "UTF-8").replaceAll(":", "_");
                        Node node = root;
                        for (Iterator fn = folderNames.iterator(); fn.hasNext(); ) {
```

### CharsetObjectCanBeUsed
StandardCharsets.UTF_8 can be used instead
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                        Node node = root;
                        for (Iterator fn = folderNames.iterator(); fn.hasNext(); ) {
                            String name = URLDecoder.decode((String) fn.next(), "UTF-8");
                            name = name.replaceAll(":", "_");
                            if (name.length() == 0) {
```

## RuleId[id=NewObjectEquality]
### NewObjectEquality
New object is compared using '!='
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeBuilder.java`
#### Snippet
```java
            NodeState state = super.getNodeState();
            SegmentNodeState sState = new SegmentNodeState(reader, writer, blobStore, writer.writeNode(state), readStats);
            if (state != sState) {
                set(sState);
                if(!isChildBuilder()) {
```

## RuleId[id=ImplicitArrayToString]
### ImplicitArrayToString
Implicit call to 'toString()' on array `enabledProtocols`
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
        sb.append(", useTLS=").append(useTLS);
        sb.append(", noCertCheck=").append(noCertCheck);
        sb.append(", enabledProtocols=").append(enabledProtocols);
        sb.append(", bindDN='").append(bindDN).append('\'');
        sb.append(", bindPassword='***'");
```

## RuleId[id=AutoCloseableResource]
### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
                @Override public Integer call() throws Exception {
                    try {
                        final TimerStats.Context uploadContext = cacheStats.startUpLoaderTimer();

                        uploader.write(id, upload);
```

### AutoCloseableResource
'Stream' used without 'try'-with-resources statement
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
        try {
            uploadCacheSpace.mkdirs();
            files = java.nio.file.Files.find(uploadCacheSpace.toPath(), Integer.MAX_VALUE, (path, basicFileAttributes) -> basicFileAttributes.isRegularFile())
                    .map(Path::toFile)
                    .collect(Collectors.toList());
```

### AutoCloseableResource
'BlobStore' used without 'try'-with-resources statement
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/DefaultSplitBlobStore.java`
#### Snippet
```java
    @Override
    public InputStream getInputStream(String blobId) throws IOException {
        return chooseBlobStoreByBlobId(blobId).getInputStream(blobId);
    }

```

### AutoCloseableResource
'BlobStore' used without 'try'-with-resources statement
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/DefaultSplitBlobStore.java`
#### Snippet
```java
    @Override
    public long getBlobLength(String blobId) throws IOException {
        return chooseBlobStoreByBlobId(blobId).getBlobLength(blobId);
    }

```

### AutoCloseableResource
'BlobStore' used without 'try'-with-resources statement
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/DefaultSplitBlobStore.java`
#### Snippet
```java
    @Override
    public int readBlob(String blobId, long pos, byte[] buff, int off, int length) throws IOException {
        return chooseBlobStoreByBlobId(blobId).readBlob(blobId, pos, buff, off, length);
    }

```

### AutoCloseableResource
'BackgroundObserver' used without 'try'-with-resources statement
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/secondary/SecondaryStoreCacheService.java`
#### Snippet
```java
        int  queueSize = config.observerQueueSize();
        if (enableAsyncObserver){
            BackgroundObserver bgObserver = new BackgroundObserver(observer, executor, queueSize);
            oakRegs.add(registerMBean(whiteboard,
                    BackgroundObserverMBean.class,
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
    private V syncReadIfPresent(K key) {
        cache.switchGenerationIfNeeded();
        TimerStats.Context ctx = stats.startReadTimer();
        V v = map.get(key);
        ctx.stop();
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
        
        // Track entry load time
        TimerStats.Context ctx = stats.startLoaderTimer();
        try {
            memCacheMetadata.increment(key);
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java

    private V asyncReadIfPresent(K key) {
        TimerStats.Context ctx = stats.startReadTimer();
        try {
            MultiGenerationMap.ValueWithGenerationInfo<V> v = map.readValue(key);
```

### AutoCloseableResource
'Socket' used without 'try'-with-resources statement
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/broadcast/TCPBroadcaster.java`
#### Snippet
```java
                return;
            }
            Socket socket = new Socket();
            try {
                socket.connect(new InetSocketAddress(address, port), TIMEOUT);
```

### AutoCloseableResource
'JournalFileReader' used without 'try'-with-resources statement
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsJournalFile.java`
#### Snippet
```java
    public boolean exists() {
        try {
            return openJournalReader().readLine() != null;
        } catch (IOException e) {
            log.error("Can't check if the file exists", e);
```

### AutoCloseableResource
'AwsSegmentStoreMigrator' used without 'try'-with-resources statement
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentCopy.java`
#### Snippet
```java
                    .withTargetPersistence(destPersistence, destDescription)
                    .withRevisionCount(revisionCount)
                    .build();

            migrator.migrate();
```

### AutoCloseableResource
'ContentSession' used without 'try'-with-resources statement
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java
     */
    public Root createRoot() {
        return createContentSession().getLatestRoot();
    }

```

### AutoCloseableResource
'Closeable' used without 'try'-with-resources statement
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/COWNodeStore.java`
#### Snippet
```java
        branchStore.merge(b, EmptyHook.INSTANCE, CommitInfo.EMPTY);

        branchStore.addObserver((root, info) -> observers.stream().forEach(o -> o.contentChanged(root, info)));
        this.branchStore = branchStore;
    }
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/binary/FulltextBinaryTextExtractor.java`
#### Snippet
```java
                TimerStats textExtractionTimerMetricStats = stats
                        .getTimer(TEXT_EXTRACTION_TIMER_METRIC_NAME, StatsOptions.METRICS_ONLY);
                TimerStats.Context context = textExtractionTimerMetricStats.time();
                text = parseStringValue0(v, metadata, path);
                context.stop();
```

### AutoCloseableResource
'RandomAccessFile' used without 'try'-with-resources statement
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarPersistence.java`
#### Snippet
```java
    @Override
    public RepositoryLock lockRepository() throws IOException {
        RandomAccessFile lockFile = new RandomAccessFile(new File(directory, LOCK_FILE_NAME), "rw");
        try {
            FileLock lock = lockFile.getChannel().lock();
```

### AutoCloseableResource
'FileLock' used without 'try'-with-resources statement
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarPersistence.java`
#### Snippet
```java
        RandomAccessFile lockFile = new RandomAccessFile(new File(directory, LOCK_FILE_NAME), "rw");
        try {
            FileLock lock = lockFile.getChannel().lock();
            return () -> {
                lock.release();
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStore.java`
#### Snippet
```java
        TimerStats flushTimer = statsProvider.getTimer("oak.segment.flush", METRICS_ONLY);
        fileStoreScheduler.scheduleWithFixedDelay(format("TarMK flush [%s]", directory), 5, SECONDS, () -> {
            Context timer = flushTimer.time();
            try {
                tryFlush();
```

### AutoCloseableResource
'PrintWriter' used without 'try'-with-resources statement
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/TextRepresentation.java`
#### Snippet
```java
    public void render(PropertyState property, HttpServletResponse response)
            throws IOException {
        PrintWriter writer = startResponse(response);
        if (property.isArray()) {
            for (String value : property.getValue(Type.STRINGS)) {
```

### AutoCloseableResource
'PrintWriter' used without 'try'-with-resources statement
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/TextRepresentation.java`
#### Snippet
```java
    public void render(Tree tree, HttpServletResponse response)
            throws IOException {
        PrintWriter writer = startResponse(response);

        for (PropertyState property : tree.getProperties()) {
```

### AutoCloseableResource
'Stream' used without 'try'-with-resources statement
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/persistentcache/PersistentDiskCache.java`
#### Snippet
```java
    @NotNull
    private Stream<SegmentCacheEntry> getSegmentCacheEntryStream() throws IOException {
        return Files.walk(directory.toPath())
            .filter(path -> !path.toFile().isDirectory())
            .map(SegmentCacheEntry::fromPath)
```

### AutoCloseableResource
'FileOutputStream' used without 'try'-with-resources statement
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/persistentcache/PersistentDiskCache.java`
#### Snippet
```java
                try {
                    int fileSize;
                    try (FileChannel channel = new FileOutputStream(tempSegmentFile).getChannel()) {
                        fileSize = bufferCopy.write(channel);
                    }
```

### AutoCloseableResource
'Stream' used without 'try'-with-resources statement
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDiff.java`
#### Snippet
```java
    private static Stream<Path> indexFiles(Path indexPath) {
        try {
            return Files.walk(indexPath).
            filter(path -> Files.isRegularFile(path)).
            filter(path -> path.toString().endsWith(".json")).
```

### AutoCloseableResource
'RunnableJobTracker' used without 'try'-with-resources statement
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/OakOSGiRepositoryFactory.java`
#### Snippet
```java
        SettableFuture<Repository> repoFuture = SettableFuture.create();

        new RunnableJobTracker(registry.getBundleContext());

        int timeoutInSecs = PropertiesUtil.toInteger(config.get(REPOSITORY_TIMEOUT_IN_SECS), DEFAULT_TIMEOUT);
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/QueryManagerImpl.java`
#### Snippet
```java
        try {
            Map<String, PropertyValue> bindMap = convertMap(bindVariableMap);
            TimerStats.Context context = queryDuration.time();
            Result r = queryEngine.executeQuery(
                    statement, language, limit, offset, bindMap,
```

### AutoCloseableResource
'MongoBlobStore' used without 'try'-with-resources statement
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/MongoFactory.java`
#### Snippet
```java
        Closer closer = Closer.create();
        try {
            MongoBlobStore mongoBlobStore = new MongoBlobStore(createClient(closer).getDatabase(getDBName()));
            return !mongoBlobStore.getAllChunkIds(0).hasNext();
        } catch(Throwable e) {
```

### AutoCloseableResource
'RDBBlobStore' used without 'try'-with-resources statement
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/JdbcFactory.java`
#### Snippet
```java
        try {
            DataSource ds = getDataSource(closer);
            RDBBlobStore blobStore = new RDBBlobStore(ds);
            return !blobStore.getAllChunkIds(0).hasNext();
        } catch(Throwable e) {
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/hybrid/ExternalIndexObserver.java`
#### Snippet
```java
        int droppedCount = 0;
        int indexedCount = 0;
        TimerStats.Context ctx = timer.time();
        Set<String> indexPaths = Sets.newHashSet();
        for (IndexedPathInfo indexData : indexedPaths) {
```

### AutoCloseableResource
'Context' used without 'try'-with-resources statement
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/hybrid/NRTIndex.java`
#### Snippet
```java
        DirectoryReader result = dirReader;
        try {
            TimerStats.Context ctx = refreshTimer.time();
            //applyDeletes is false as layers above would take care of
            //stale result
```

### AutoCloseableResource
'ConsoleReporter' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/NodeStoreFixtureProvider.java`
#### Snippet
```java
                    return true;
                })
                .build()
                .report();
    }
```

### AutoCloseableResource
'NodeStateEntryTraverser' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/DocumentStoreIndexerBase.java`
#### Snippet
```java
            //As first traversal is for dumping change the message prefix
            progressReporterPerTask.setMessagePrefix("Dumping from " + entryTraverserID);
            return new NodeStateEntryTraverser(entryTraverserID, rootRevision,
                    documentNodeStore, documentStore, traversingRange)
                    .withProgressCallback((id) -> {
```

### AutoCloseableResource
'BlobStoreFixture' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
                builder.withBlobStore(blobStore);
            } else {
                blobStoreFixtures[n + i] = BlobStoreFixture.create(parentPath, true, dsCacheSize, statsProvider);
                builder.withBlobStore(blobStoreFixtures[n + i].setUp());
            }
```

### AutoCloseableResource
'FileStore' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
            .withMemoryMapping(memoryMapping)
            .withSnfeListener(IGNORE_SNFE)
            .build();
        
        int port = 0;
```

### AutoCloseableResource
'StandbyServerSync' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
            .withBlobChunkSize(1 * MB)
            .withSecureConnection(secure)
            .build();
        clientSyncs[i] = StandbyClientSync.builder()
            .withHost("127.0.0.1")
```

### AutoCloseableResource
'StandbyClientSync' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
            .withAutoClean(false)
            .withSpoolFolder(new File(StandardSystemProperty.JAVA_IO_TMPDIR.value()))
            .build();

        if (!oneShotRun) {
```

### AutoCloseableResource
'BlobStoreFixture' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
            BlobStore blobStore = null;
            if (useBlobStore) {
                blobStoreFixtures[i] = BlobStoreFixture.create(parentPath, true, dsCacheSize, statsProvider);
                blobStore = blobStoreFixtures[i].setUp();
            }
```

### AutoCloseableResource
'FileStore' used without 'try'-with-resources statement
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
                    .withStrictVersionCheck(true)
                    .withBinariesInlineThreshold(binariesInlineThreshold)
                    .build();
            
            if (withColdStandby) {
```

### AutoCloseableResource
'Closeable' used without 'try'-with-resources statement
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
        if (globalStore instanceof Observable) {
            Observable globalStoreObservable = (Observable) globalStore;
            globalStoreObservable.addObserver((root, info) -> dispatcher.contentChanged(ctx.createRootNodeState(root), info));
        }
    }
```

### AutoCloseableResource
'Slf4jReporter' used without 'try'-with-resources statement
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReadPropertyTest.java`
#### Snippet
```java
                                })
                                .convertDurationsTo(TimeUnit.MICROSECONDS)
                                .build();
                        reporter.start(30, TimeUnit.SECONDS);
                    }
```

### AutoCloseableResource
'ConsoleReporter' used without 'try'-with-resources statement
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
                        }
                    })
                    .build()
                    .report();
        }
```

### AutoCloseableResource
'SegmentArchiveReader' used without 'try'-with-resources statement
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentCopy.java`
#### Snippet
```java
                    printMessage(outWriter, "{0}/{1} -> {2}", source, archiveName, destination);

                    SegmentArchiveReader reader = sourceManager.forceOpen(archiveName);

                    List<Future<Segment>> futures = new ArrayList<>();
```

### AutoCloseableResource
'FileOutputStream' used without 'try'-with-resources statement
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentCopy.java`
#### Snippet
```java

                            try {
                                try (FileChannel channel = new FileOutputStream(tempSegmentFile).getChannel()) {
                                    bufferCopy.write(channel);
                                }
```

### AutoCloseableResource
'SegmentStoreMigrator' used without 'try'-with-resources statement
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentCopy.java`
#### Snippet
```java
                }

                migratorBuilder.build().migrate();

            } catch (Exception e) {
```

## RuleId[id=RedundantCast]
### RedundantCast
Casting `memWeigher` to `Weigher` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java
        long maxWeight) {
        super(cache, "DataStore-DownloadCache", weigher, maxWeight);
        this.memWeigher = (Weigher<Object, Object>) memWeigher;
        this.weigher = (Weigher<Object, Object>) weigher;
        this.cache = (Cache<Object, Object>) cache;
```

### RedundantCast
Casting `weigher` to `Weigher` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java
        super(cache, "DataStore-DownloadCache", weigher, maxWeight);
        this.memWeigher = (Weigher<Object, Object>) memWeigher;
        this.weigher = (Weigher<Object, Object>) weigher;
        this.cache = (Cache<Object, Object>) cache;
    }
```

### RedundantCast
Casting `cache` to `Cache` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java
        this.memWeigher = (Weigher<Object, Object>) memWeigher;
        this.weigher = (Weigher<Object, Object>) weigher;
        this.cache = (Cache<Object, Object>) cache;
    }

```

### RedundantCast
Casting `localClusterId` to `long` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java
        updateOp.set(INACTIVE_KEY, setToCsv(inactiveIds));
        updateOp.set(CREATED_KEY, ISO8601.format(now));
        updateOp.set(CREATOR_KEY, (long)localClusterId);
        if (previousView != null) {
            Map<Object, String> previousHistory = previousView.getHistory();
```

### RedundantCast
Casting `nodeStore` to `DocumentNodeStore` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java

        // set the ClusterStateChangeListener with the DocumentNodeStore
        this.documentNodeStore = (DocumentNodeStore) nodeStore;
        documentNodeStore.setClusterStateChangeListener(this);

```

### RedundantCast
Casting `store.getMaxBackOffMillis()` to `long` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBranch.java`
#### Snippet
```java
        this.store = checkNotNull(store);
        this.branchState = new Unmodified(checkNotNull(base));
        this.maximumBackoff = Math.max((long) store.getMaxBackOffMillis(), MIN_BACKOFF);
        this.maxLockTryTimeMS = (long) (store.getMaxBackOffMillis() * MAX_LOCK_TRY_TIME_MULTIPLIER);
        this.mergeLock = mergeLock;
```

### RedundantCast
Casting `(store.getMaxBackOffMillis() * MAX_LOCK_TRY_TIME_MULTIPLIER)` to `long` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBranch.java`
#### Snippet
```java
        this.branchState = new Unmodified(checkNotNull(base));
        this.maximumBackoff = Math.max((long) store.getMaxBackOffMillis(), MIN_BACKOFF);
        this.maxLockTryTimeMS = (long) (store.getMaxBackOffMillis() * MAX_LOCK_TRY_TIME_MULTIPLIER);
        this.mergeLock = mergeLock;
        this.updateLimit = store.getUpdateLimit();
```

### RedundantCast
Casting `key` to `K` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
            ctx.stop();
            if (!async) {
                write((K) key, value);
            }
            broadcast(key, value);
```

### RedundantCast
Casting `key` to `K` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
        memCache.put(key, value);
        if (!async) {
            write((K) key, value);
        }
        broadcast(key, value);
```

### RedundantCast
Casting `plan` to `IndexPlan` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/aggregate/AggregateIndex.java`
#### Snippet
```java
            return Collections.emptyList();
        }
        return Collections.singletonList((IndexPlan) plan);
    }

```

### RedundantCast
Casting `everyoneGroup` to `Group` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/EveryoneMembershipProvider.java`
#### Snippet
```java
        Authorizable everyoneGroup = userManager.getAuthorizable(EveryonePrincipal.getInstance());
        if (everyoneGroup instanceof Group) {
            return new RangeIteratorAdapter(Collections.singleton((Group) everyoneGroup));
        } else {
            return RangeIteratorAdapter.EMPTY;
```

### RedundantCast
Casting `null` to `WeakReference` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentIdTable.java`
#### Snippet
```java
            rebuildCount++;
            references.clear();
            references.addAll(nCopies(size, (WeakReference<SegmentId>) null));

            for (Map.Entry<SegmentId, WeakReference<SegmentId>> entry
```

### RedundantCast
Casting `null` to `WeakReference` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentIdTable.java`
#### Snippet
```java
     */
    private final ArrayList<WeakReference<SegmentId>> references =
            newArrayList(nCopies(1024, (WeakReference<SegmentId>) null));

    private static final Logger LOG = LoggerFactory.getLogger(SegmentIdTable.class);
```

### RedundantCast
Casting `NOOP_WEIGHER` to `Weigher` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/CacheWeights.java`
#### Snippet
```java
    @SuppressWarnings("unchecked")
    public static <K, V> Weigher<K, V> noopWeigher() {
        return (Weigher<K, V>) NOOP_WEIGHER;
    }

```

### RedundantCast
Casting `null` to `List` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java

            List<List<MapEntry>> buckets =
                    newArrayList(nCopies(MapRecord.BUCKETS_PER_LEVEL, (List<MapEntry>) null));
            for (MapEntry entry : entries) {
                int index = (entry.getHash() >> shift) & mask;
```

### RedundantCast
Casting `weigher` to `Weigher` is redundant
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheStats.java`
#### Snippet
```java
        super(name);
        this.cache = (Cache<Object, Object>) Objects.requireNonNull(cache);
        this.weigher = (Weigher<Object, Object>) weigher;
        this.maxWeight = maxWeight;
    }
```

### RedundantCast
Casting `el` to `JsonObject` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexMerge.java`
#### Snippet
```java
            JsonObject el = e.getValue();
            log(linePrefix + "child " + k);
            build(linePrefix + "  ", builder.child(k), (JsonObject) el);
            childOrder.add(k);
        }
```

### RedundantCast
Casting `((input) -> {...})` to `java.util.function.Function` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
            // Read and write the converted ids
            FileIOUtils.writeStrings(idIterator, longIdTemp, false,
                    (java.util.function.Function<String, String>) ((input) -> encodeId(input, dsType)), null, null);
            FileUtils.copyFile(longIdTemp, writeFile);
        } finally {
```

### RedundantCast
Casting `rootPathList.toArray(...)` to `String[]` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java

                    List<String> rootPathList = options.valuesOf(verboseRootPath);
                    traverser.traverse((String[]) rootPathList.toArray(new String[rootPathList.size()]));

                    FileUtils.copyFile(traverser.references, register.createFile(refOp, dumpPath));
```

### RedundantCast
Casting `input -> {...}` to `Function` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java

        try (BurnOnCloseFileIterator<String> iterator = new BurnOnCloseFileIterator<String>(idIterator, readFile,
            (Function<String, String>) input -> VerboseIdLogger.encodeId(input, blobOpts.getBlobStoreType()))) {
            writeStrings(iterator, writeFile, true, log, "Transformed to verbose ids - ");
        }
```

### RedundantCast
Casting `input -> {...}` to `Function` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
                try (BurnOnCloseFileIterator<String> iterator = new BurnOnCloseFileIterator<String>(
                    FileUtils.lineIterator(tempFile, UTF_8.toString()), tempFile,
                    (Function<String, String>) input -> encodeId(input, blobStoreType))) {
                    writeStrings(iterator, outFile, true, log, "Transformed to verbose ids - ");
                }
```

### RedundantCast
Casting `Boolean.valueOf(...)` to `Object` is redundant
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            return emptyMap();
        } else if (refreshInterval == null) {
            return singletonMap(RELAXED_LOCKING, (Object) Boolean.valueOf(relaxedLocking));
        } else if (!relaxedLocking) {
            return singletonMap(REFRESH_INTERVAL, (Object) refreshInterval);
```

### RedundantCast
Casting `refreshInterval` to `Object` is redundant
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            return singletonMap(RELAXED_LOCKING, (Object) Boolean.valueOf(relaxedLocking));
        } else if (!relaxedLocking) {
            return singletonMap(REFRESH_INTERVAL, (Object) refreshInterval);
        } else {
            return ImmutableMap.of(
```

### RedundantCast
Casting `null` to `String` is redundant
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAuthorizationConfiguration.java`
#### Snippet
```java
    @Activate
    private void activate(Map<String, Object> properties) {
        supportedPath = PropertiesUtil.toString(properties.get(PARAM_SUPPORTED_PATHS), (String) null);
    }

```

### RedundantCast
Casting `null` to `String` is redundant
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/simplifiedroles/ThreeRolesAuthorizationConfiguration.java`
#### Snippet
```java
    @Modified
    private void modified(Map<String, Object> properties) {
        supportedPath = PropertiesUtil.toString(properties.get(PARAM_SUPPORTED_PATHS), (String) null);
    }

```

### RedundantCast
Casting `context.getMap().get(...)` to `String` is redundant
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/NodeTypeSearcher.java`
#### Snippet
```java
    protected Query getQuery(@NotNull final QueryManager qm, ExecutionContext context) throws RepositoryException {
        return qm.createQuery(
                "/jcr:root/" + ((String) context.getMap().get(ScalabilityBlobSearchSuite.CTX_ROOT_NODE_NAME_PROP)) + "//element(*, "
                        + context.getMap().get(ScalabilityBlobSearchSuite.CTX_FILE_NODE_TYPE_PROP) + ")",
                Query.XPATH);
```

### RedundantCast
Casting `len` to `long` is redundant
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakStreamingIndexFile.java`
#### Snippet
```java
                }

                int read = (int)Math.min((long)len, bytesLeftToRead);
                input.readBytes(b, off, read);

```

### RedundantCast
Casting `idp` to `TestIdentityProvider` is redundant
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/AbstractExternalTest.java`
#### Snippet
```java

    protected String getRandomUserId() {
        int index = random.nextInt(((TestIdentityProvider) idp).numberOfUsers);
        return "u" + index;
    }
```

### RedundantCast
Casting `idp` to `TestIdentityProvider` is redundant
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/AbstractExternalTest.java`
#### Snippet
```java

    protected String getRandomGroupId() {
        int index = random.nextInt(((TestIdentityProvider) idp).membershipSize);
        return "g" + index;
    }
```

### RedundantCast
Casting `idp` to `TestIdentityProvider` is redundant
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/AbstractExternalTest.java`
#### Snippet
```java
        @Override
        public Iterable<ExternalIdentityRef> getDeclaredGroups() {
            return ((TestIdentityProvider) idp).getDeclaredGroupRefs(userId);
        }

```

## RuleId[id=JavadocDeclaration]
### JavadocDeclaration
`@param tracker` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobTrackingStore.java`
#### Snippet
```java
    /**
     * Registers a tracker in the data store.
     * @param tracker
     */
    void addTracker(BlobTracker tracker);
```

### JavadocDeclaration
`@param num` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
    /**
     * Update the number of blob references
     * @param num
     */
    public void updateNumBlobReferences(long num);
```

### JavadocDeclaration
`@param num` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
    /**
     * Update the number deleted
     * @param num
     */
    void updateNumDeleted(long num);
```

### JavadocDeclaration
`@param num` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
    /**
     * Update the number of candidates found
     * @param num
     */
    void updateNumCandidates(long num);
```

### JavadocDeclaration
`@param size` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
    /**
     * Update the size of blob references
     * @param size
     */
    public void updateBlobReferencesSize(long size);
```

### JavadocDeclaration
`@param size` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationStatsCollector.java`
#### Snippet
```java
    /**
     * Update the size deleted
     * @param size
     */
    void updateTotalSizeDeleted(long size);
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGarbageCollector.java`
#### Snippet
```java
     * @param markOnly whether to only mark references and not sweep in the mark and sweep operation.
     * @param forceBlobRetrieve whether to force retrieve of blob ids from datastore
     * @throws Exception
     */
    void collectGarbage(boolean markOnly, boolean forceBlobRetrieve) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGarbageCollector.java`
#### Snippet
```java
     *
     * @return stats object
     * @throws Exception
     */
    OperationsStatsMBean getOperationStats() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGarbageCollector.java`
#### Snippet
```java
     * 
     * @return stats
     * @throws Exception
     */
    List<GarbageCollectionRepoStats> getStats() throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGarbageCollector.java`
#### Snippet
```java
     * 
     * @return number of inconsistencies
     * @throws Exception
     */
    long checkConsistency() throws Exception;
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGarbageCollector.java`
#### Snippet
```java
     * Adds relevant metrics.
     * 
     * @return
     * @throws Exception
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobGarbageCollector.java`
#### Snippet
```java
     * 
     * @return
     * @throws Exception
     */
    long checkConsistency(boolean markOnly) throws Exception;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/BlobReferenceRetriever.java`
#### Snippet
```java
     * 
     * @param collector the collector to collect all references
     * @throws IOException
     */
    void collectReferences(ReferenceCollector collector) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUtils.java`
#### Snippet
```java
     *
     * @param f the file to be deleted
     * @throws IOException
     */
    public static void recursiveDelete(File f, File root) throws IOException {
```

### JavadocDeclaration
`@param reference` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ReferenceCollector.java`
#### Snippet
```java
     * Adds the reference detected with the node Id.
     * 
     * @param reference
     * @param nodeId
     */
```

### JavadocDeclaration
`@param nodeId` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ReferenceCollector.java`
#### Snippet
```java
     * 
     * @param reference
     * @param nodeId
     */
    void addReference(String reference, @Nullable String nodeId);
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
     * Returns the finish error count
     *
     * @return
     */
    long getFailureCount();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
    /**
     * Returns the size deleted.
     * @return
     */
    long sizeDeleted();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
    /**
     * Returns the duration of the mark operation
     * @return
     */
    long markDuration();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
    /**
     * Returns the duration of the operation
     * @return
     */
    long duration();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
    /**
     * Returns the cumulative size of the blob references
     * @return
     */
    long getBlobReferencesSize();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
    /**
     * Returns the number deleted.
     * @return
     */
    long numDeleted();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
     * Returns the start counts of the operation
     *
     * @return
     */
    long getStartCount();
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/OperationsStatsMBean.java`
#### Snippet
```java
    /**
     * Returns the number of blob references
     * @return
     */
    long getNumBlobReferences();
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     * Checks if the metadata record with the name exists
     *
     * @param name
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     *
     * @param name
     * @return
     */
    boolean metadataRecordExists(String name);
```

### JavadocDeclaration
`@param repositoryId` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
    /**
     * Sets the repository id to identify repository in the DataStore
     * @param repositoryId
     * @throws DataStoreException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     * Sets the repository id to identify repository in the DataStore
     * @param repositoryId
     * @throws DataStoreException
     */
    default void setRepositoryId(String repositoryId) throws DataStoreException {}
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/SharedDataStore.java`
#### Snippet
```java
     *
     * @param name the name of the record
     * @return
     */
    DataRecord getMetadataRecord(String name);
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/AbstractSharedCachingDataStore.java`
#### Snippet
```java
     *
     * @return Iterator over all ids available
     * @throws DataStoreException
     */
    @Override
```

### JavadocDeclaration
`@param input` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/TypedDataStore.java`
#### Snippet
```java
     * Add a record with specified options.
     *
     * @param input
     * @param options
     * @return
```

### JavadocDeclaration
`@param options` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/TypedDataStore.java`
#### Snippet
```java
     *
     * @param input
     * @param options
     * @return
     * @throws DataStoreException
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/TypedDataStore.java`
#### Snippet
```java
     * @param input
     * @param options
     * @return
     * @throws DataStoreException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/TypedDataStore.java`
#### Snippet
```java
     * @param options
     * @return
     * @throws DataStoreException
     */
    DataRecord addRecord(InputStream input, BlobOptions options) throws DataStoreException;
```

### JavadocDeclaration
`@param id` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/SharedDataStoreUtils.java`
#### Snippet
```java
         * references-id_prefix.
         *
         * @param id
         * @param prefix
         * @return
```

### JavadocDeclaration
`@param prefix` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/SharedDataStoreUtils.java`
#### Snippet
```java
         *
         * @param id
         * @param prefix
         * @return
         */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/SharedDataStoreUtils.java`
#### Snippet
```java
         * @param id
         * @param prefix
         * @return
         */
        public String getNameFromIdPrefix(String id, String prefix) {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * Fetches an iterator of records available.
     *
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @return
     * @throws IOException
     */
    Iterator<String> get() throws IOException;
```

### JavadocDeclaration
`@param recs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * Adds the given ids.
     *
     * @param recs
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @param recs
     * @throws IOException
     */
    void add(Iterator<String> recs) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @param id the record id to be tracked
     * @throws IOException
     */
    void add(String id) throws IOException;
```

### JavadocDeclaration
`@param recs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * Adds the ids in the given file.
     *
     * @param recs
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @param recs
     * @throws IOException
     */
    void add(File recs) throws IOException;
```

### JavadocDeclaration
`@param recs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * Remove the given ids.
     *
     * @param recs
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @param recs
     * @throws IOException
     */
    void remove(Iterator<String> recs) throws IOException;
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * The lifecycle of the returned {@link File} handle is the responsibility of the handler.
     *
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @return
     * @throws IOException
     */
    File get(String path) throws IOException;
```

### JavadocDeclaration
`@param recs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * Remove the ids in the given file and deletes the file.
     *
     * @param recs
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @param recs
     * @throws IOException
     */
    void remove(File recs, Options options) throws IOException;
```

### JavadocDeclaration
`@param recs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     * Remove the ids in the given file and deletes the file.
     *
     * @param recs
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobTracker.java`
#### Snippet
```java
     *
     * @param recs
     * @throws IOException
     */
    void remove(File recs) throws IOException;
```

### JavadocDeclaration
`@param id` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
     * Returns an optional SettableFuture if staged for upload otherwise empty.
     *
     * @param id
     * @param input
     * @param ignoreSize
```

### JavadocDeclaration
`@param input` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
     *
     * @param id
     * @param input
     * @param ignoreSize
     * @return
```

### JavadocDeclaration
`@param ignoreSize` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
     * @param id
     * @param input
     * @param ignoreSize
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
     * @param input
     * @param ignoreSize
     * @return
     */
    private Optional<SettableFuture<Integer>> putOptionalDisregardingSize(String id, File input,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
     * @param key to delete
     * @param toBeDeleted file to delete
     * @throws IOException
     */
    private void deleteInternal(String key, File toBeDeleted) throws IOException {
```

### JavadocDeclaration
Javadoc pointing to itself
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUpload.java`
#### Snippet
```java
     * for clients who wish to tune uploads to match network conditions;
     * however, the only guarantee offered by the API is that using parts of
     * the size returned by {@link #getMaxPartSize()} will work without using
     * more URIs than those available in the Collection returned by {@link
     * #getUploadURIs()};
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @param recs File of records to add
         * @throws IOException
         */
        protected void addRecords(File recs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @return record iterator
         * @throws IOException
         */
        protected Iterator<String> getRecords() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
     * Closes the tracker and the underlying store.
     *
     * @throws IOException
     */
    @Override public void close() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @param recs file of records to delete
         * @throws IOException
         */
        protected void removeRecords(File recs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @param id id to track
         * @throws IOException
         */
        protected synchronized void addRecord(String id) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         * Opens a new generation file and a writer over it.
         *
         * @throws IOException
         */
        private synchronized void nextGeneration() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
     * to other cluster nodes/repositories connected to the DataStore.
     *
     * @throws IOException
     */
    private void snapshot(boolean skipStoreSnapshot) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @param recs iterator over records to add
         * @throws IOException
         */
        protected void addRecords(Iterator<String> recs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
     *
     * @return iterator over all the blob ids available
     * @throws IOException
     */
    @Override public Iterator<String> get() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @return blob reference file
         * @throws IOException
         */
        protected File getBlobRecordsFile() throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @param recs the file to search for ids existing in the deletions here
         * @return
         */
        public Iterator<String> filter(File recs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
     * instances sharing the DataStore (cluster nodes/different repositories).
     *
     * @throws IOException
     */
    private void globalMerge() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         * and merges all generations available.
         *
         * @throws IOException
         */
        protected void snapshot() throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         *
         * @param recs iterator over records to remove
         * @throws IOException
         */
        protected void removeRecords(Iterator<String> recs) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         * @param path path of the file
         * @return File containing tracked file ids
         * @throws IOException
         */
        protected File getRecords(String path) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
         * @param refFiles files to merge
         * @param doSort whether to sort while merging
         * @throws IOException
         */
        protected void merge(List<File> refFiles, boolean doSort) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractDataRecord.java`
#### Snippet
```java
     * Delegates the call to the backend to retrieve reference.
     *
     * @return
     */
    public String getReference() {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/BlobStore.java`
#### Snippet
```java
     * @param in the input stream to write
     * @param options the options to use
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/BlobStore.java`
#### Snippet
```java
     * @param options the options to use
     * @return
     * @throws IOException
     */
    String writeBlob(InputStream in, BlobOptions options) throws IOException;
```

### JavadocDeclaration
`@param identifier` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * Delete record identified by identifier. No-op if identifier not found.
     *
     * @param identifier
     * @throws DataStoreException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *
     * @param identifier
     * @throws DataStoreException
     */
    void deleteRecord(DataIdentifier identifier) throws DataStoreException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *            identifier to be checked.
     * @return true if records exists else false.
     * @throws DataStoreException
     */
    boolean exists(DataIdentifier identifier) throws DataStoreException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * @param input the record file
     * @param name the name
     * @throws org.apache.jackrabbit.core.data.DataStoreException
     */
    void addMetadataRecord(final File input, final String name) throws DataStoreException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *
     * @return iterator over DataRecords
     * @throws DataStoreException
     */
    Iterator<DataRecord> getAllRecords() throws DataStoreException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * Close backend and release resources like database connection if any.
     *
     * @throws DataStoreException
     */
    void close() throws DataStoreException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     * @param input the record input stream
     * @param name the name
     * @throws org.apache.jackrabbit.core.data.DataStoreException
     */
    void addMetadataRecord(final InputStream input, final String name) throws DataStoreException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/SharedBackend.java`
#### Snippet
```java
     *
     * @return iterator consisting of all identifiers
     * @throws DataStoreException
     */
    Iterator<DataIdentifier> getAllIdentifiers() throws DataStoreException;
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/WrappingSplitBlobStore.java`
#### Snippet
```java
     * @param in the input stream to write
     * @param options the options to use
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/WrappingSplitBlobStore.java`
#### Snippet
```java
     * @param options the options to use
     * @return
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/DefaultSplitBlobStore.java`
#### Snippet
```java
     * @param in the input stream to write
     * @param options the options to use
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/split/DefaultSplitBlobStore.java`
#### Snippet
```java
     * @param options the options to use
     * @return
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@param options` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
     *
     * @param in the input stream
     * @param options
     * @return the value
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
     * @param in the input stream to write
     * @param options the options to use
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
     * @param options the options to use
     * @return
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
     * @param whiteboard whiteboard instance
     * @param statisticsProvider statistics provider instance
     * @throws IOException
     */
    public MarkSweepGarbageCollector(
```

### JavadocDeclaration
`@param forceBlobRetrieve` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
     * @param fs the garbage collector file state
     * @param markStart the start time of mark to take as reference for deletion
     * @param forceBlobRetrieve
     */
    protected long sweep(GarbageCollectorFileState fs, long markStart, boolean forceBlobRetrieve) throws Exception {
```

### JavadocDeclaration
`@param blobStore` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * Tracker may want to track this file
         *
         * @param blobStore
         * @param fs
         */
```

### JavadocDeclaration
`@param fs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         *
         * @param blobStore
         * @param fs
         */
        void track(GarbageCollectableBlobStore blobStore, GarbageCollectorFileState fs) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
     *
     * @return a list of GarbageCollectionRepoStats objects
     * @throws Exception
     */
    @Override
```

### JavadocDeclaration
`@param maxLastModifiedInterval` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
             * @param blobStore the blob store
             * @param fs the fs
             * @param maxLastModifiedInterval
             * @param sweepIfRefsPastRetention
             * @return the long the earliest time of the available references
```

### JavadocDeclaration
`@param sweepIfRefsPastRetention` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
             * @param fs the fs
             * @param maxLastModifiedInterval
             * @param sweepIfRefsPastRetention
             * @return the long the earliest time of the available references
             * @throws IOException Signals that an I/O exception has occurred.
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
     *
     * @return the missing blobs
     * @throws Exception
     */
    @Override
```

### JavadocDeclaration
`@param blobStore` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * Retrieve the put the list of available blobs in the file.
         *
         * @param blobStore
         * @param fs
         * @param batchCount
```

### JavadocDeclaration
`@param fs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         *
         * @param blobStore
         * @param fs
         * @param batchCount
         * @throws Exception
```

### JavadocDeclaration
`@param batchCount` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * @param blobStore
         * @param fs
         * @param batchCount
         * @throws Exception
         */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * @param fs
         * @param batchCount
         * @throws Exception
         */
        void retrieve(GarbageCollectableBlobStore blobStore,
```

### JavadocDeclaration
`@param blobStore` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * Hook to handle all the removed ids.
         *
         * @param blobStore
         * @param removedIds
         * @param markedRefs
```

### JavadocDeclaration
`@param removedIds` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         *
         * @param blobStore
         * @param removedIds
         * @param markedRefs
         * @throws IOException
```

### JavadocDeclaration
`@param markedRefs` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * @param blobStore
         * @param removedIds
         * @param markedRefs
         * @throws IOException
         */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
         * @param removedIds
         * @param markedRefs
         * @throws IOException
         */
        void handleRemoves(GarbageCollectableBlobStore blobStore, File removedIds, File markedRefs) throws IOException {
```

### JavadocDeclaration
`@param documentStore` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Sweep2StatusDocument.java`
#### Snippet
```java
     * Note that the clusterId is only for recording purpose - this method
     * makes no checks on the current owner of the lock
     * @param documentStore
     * @param clusterId
     * @return true if the sweep2 status is now marked swept(2) - false if that failed
```

### JavadocDeclaration
`@param clusterId` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Sweep2StatusDocument.java`
#### Snippet
```java
     * makes no checks on the current owner of the lock
     * @param documentStore
     * @param clusterId
     * @return true if the sweep2 status is now marked swept(2) - false if that failed
     * (in the latter case the caller can consider retrying the acquire/sweep2/release sequence)
```

### JavadocDeclaration
`@param documentStore` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Sweep2StatusDocument.java`
#### Snippet
```java
    /**
     * Acquires the sweep2 lock.
     * @param documentStore
     * @param clusterId
     * @param forceSweepingStatus if false uses the default way to set the sweep2-status,
```

### JavadocDeclaration
`@param clusterId` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Sweep2StatusDocument.java`
#### Snippet
```java
     * Acquires the sweep2 lock.
     * @param documentStore
     * @param clusterId
     * @param forceSweepingStatus if false uses the default way to set the sweep2-status,
     * if set to true (force-)sets sweep2-status to 'sweeping'.
```

### JavadocDeclaration
`@param historyMap` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java
     * limited to HISTORY_LIMIT)
     * 
     * @param historyMap
     */
    private static Revision oldestRevision(Map<Object, String> historyMap) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java
         *            of first parameter to set
         * @return index of next parameter to set
         * @throws SQLException
         */
        public int setParameters(PreparedStatement stmt, int startIndex) throws SQLException;
```

### JavadocDeclaration
`@param tableName` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
     * Table creation statement string
     *
     * @param tableName
     * @return the table creation string
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * all clusterIds if this list is empty or null.
     * @return number of documents swept
     * @throws DocumentStoreException
     */
    int forceBackgroundSweep2(List<Integer> includedClusterIds) throws DocumentStoreException {
```

### JavadocDeclaration
`@param blobGcMaxAgeInSecs` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * supports garbage collection
     *
     * @param blobGcMaxAgeInSecs
     * @param repositoryId
     * @param whiteboard
```

### JavadocDeclaration
`@param repositoryId` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     *
     * @param blobGcMaxAgeInSecs
     * @param repositoryId
     * @param whiteboard
     * @param statisticsProvider
```

### JavadocDeclaration
`@param whiteboard` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * @param blobGcMaxAgeInSecs
     * @param repositoryId
     * @param whiteboard
     * @param statisticsProvider
     * @return garbage collector of the BlobStore supports GC otherwise null
```

### JavadocDeclaration
`@param statisticsProvider` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * @param repositoryId
     * @param whiteboard
     * @param statisticsProvider
     * @return garbage collector of the BlobStore supports GC otherwise null
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * @param sweep2Lock the lock value originally acquired
     * @return true if sweep2 is done or no longer needed, false otherwise (in which case it should be retried)
     * @throws DocumentStoreException
     */
    boolean backgroundSweep2(long sweep2Lock) throws DocumentStoreException {
```

### JavadocDeclaration
`@param a` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
     * for cluster nodes that are not present in {@code a}, return false.
     *
     * @param a
     * @param b
     * @return true if all the revisions in the {@code a} are at least
```

### JavadocDeclaration
`@param b` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
     *
     * @param a
     * @param b
     * @return true if all the revisions in the {@code a} are at least
     * as recent as their counterparts in the {@code b}
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
     * @param upsert Insert new documents
     * @return set containing ids of successfully updated documents
     * @throws SQLException
     */
    public <T extends Document> Set<String> update(Connection connection, RDBTableMetaData tmd, List<T> documents, boolean upsert)
```

### JavadocDeclaration
`@param mongoStorageOptions` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDBConfig.java`
#### Snippet
```java
     * storage options for collection to be created
     *
     * @param mongoStorageOptions
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDBConfig.java`
#### Snippet
```java
     *
     * @param mongoStorageOptions
     * @return
     */
    public static Bson getCollectionStorageOptions(
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/MapFactory.java`
#### Snippet
```java
     * @param name the map name
     * @param builder the map builder
     * @return
     */
    abstract <K, V> Map<K, V> openMap(String name, MVMap.Builder<K, V> builder);
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param source the input stream source
     * @param destination the file to write to
     * @throws IOException
     */
    public static void copyInputStreamToFile(final InputStream source, final File destination) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param logger logger to log progress
     * @param message message to log
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param message message to log
     * @return
     * @throws IOException
     */
    public static int writeStrings(Iterator<String> iterator, File f, boolean escape,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param files files to merge
     * @param output merge output file
     * @throws IOException
     */
    public static void merge(List<File> files, File output, Comparator<String> comparator) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param file file whose contents needs to be sorted
     * @param comparator to compare
     * @throws IOException
     */
    public static void sort(File file, Comparator<String> comparator) throws IOException {
```

### JavadocDeclaration
`@param files` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * ensured that the files are written with {@link #writeAsLine(BufferedWriter, String, boolean)}
     * with true to escape line break characters.
     * @param files
     * @param appendTo
     * @throws IOException
```

### JavadocDeclaration
`@param appendTo` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * with true to escape line break characters.
     * @param files
     * @param appendTo
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param files
     * @param appendTo
     * @throws IOException
     */
    public static void append(List<File> files, File appendTo, boolean delete) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param files files to merge
     * @param output merge output file
     * @throws IOException
     */
    public static void merge(List<File> files, File output) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param escape whether to escape for line breaks
     * @return count
     * @throws IOException
     */
    public static int writeStrings(Iterator<String> iterator, File f, boolean escape)
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param unescape whether to unescape for line breaks
     * @return set
     * @throws IOException
     */
    public static Set<String> readStringsAsSet(InputStream stream, boolean unescape) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param str the string to write
     * @param escape whether to escape string for line breaks
     * @throws IOException
     */
    public static void writeAsLine(BufferedWriter writer, String str, boolean escape) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     *
     * @param stream steam to copy
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param stream steam to copy
     * @return
     * @throws IOException
     */
    public static File copy(InputStream stream) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param logger logger to log progress
     * @param message message to log
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     * @param message message to log
     * @return
     * @throws IOException
     */
    public static int writeStrings(Iterator<String> iterator, File f, boolean escape,
```

### JavadocDeclaration
`@param executorService` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/concurrent/ExecutorCloser.java`
#### Snippet
```java
     * will attempt a graceful close in 5 seconds
     * 
     * @param executorService
     */
    public ExecutorCloser(@Nullable ExecutorService executorService) {
```

### JavadocDeclaration
`@param files` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
     * This merges a bunch of temporary flat files
     *
     * @param files
     * @param outputfile
     *            file
```

### JavadocDeclaration
`@param files` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
     * This merges a bunch of temporary flat files
     *
     * @param files
     * @param outputfile
     *            file
```

### JavadocDeclaration
`@param files` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
     * This merges a bunch of temporary flat files
     *
     * @param files
     * @param outputfile
     *            file
```

### JavadocDeclaration
`@param distinct` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
     * @param tmpdirectory
     *            location of the temporary files (set to null for default location)
     * @param distinct
     * @param usegzip
     *            assumes we used gzip compression for temporary files
```

### JavadocDeclaration
`@param distinct` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
     * @param tmpdirectory
     *            location of the temporary files (set to null for default location)
     * @param distinct
     * @param algorithm
     *            compression algorithm to use for the temporary files
```

### JavadocDeclaration
`@param files` tag description is missing
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
     * This merges a bunch of temporary flat files
     *
     * @param files
     * @param outputfile
     *            file
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     * @param provisioningData DynamoDB provisioning data
     * @return The context.
     * @throws IOException
     */
    public static AwsContext create(AmazonS3 s3, String bucketName, String rootDirectory, AmazonDynamoDB ddb,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     *                         "{@link DynamoDBClient#LOCKTABLE_KEY}".
     * @return The context.
     * @throws IOException
     */
    public static AwsContext create(AmazonS3 s3, String bucketName, String rootDirectory, AmazonDynamoDB ddb,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsContext.java`
#### Snippet
```java
     * @param configuration The configuration used to initialize the context.
     * @return The context.
     * @throws IOException
     */
    public static AwsContext create(Configuration configuration) throws IOException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsArchiveManager.java`
#### Snippet
```java
     * @param archiveName The name of the archive
     * @return true if the archive is empty (no 0000.* segment)
     * @throws IOException
     */
    private boolean isArchiveEmpty(String archiveName) throws IOException {
```

### JavadocDeclaration
`@param table` tag description is missing
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/DynamoDBClient.java`
#### Snippet
```java
     * Updates table billing mode.
     *
     * @param table
     * @return true if billing mode has changed
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/Query.java`
#### Snippet
```java
     * </p>
     * @return a clone of self
     * @throws IllegalStateException
     */
    @Nullable
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java
     * @param mappings namespace prefix mappings
     * @return the list of bind variable names
     * @throws ParseException
     */
    @Override
```

### JavadocDeclaration
Javadoc pointing to itself
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/ConstraintImpl.java`
#### Snippet
```java
     * If it is not possible to convert to a union, it must return an empty set.
     * <p>
     * The default implementation in {@link ConstraintImpl#convertToUnion()}
     * always return an empty set.
     * 
```

### JavadocDeclaration
`@param c` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java
     * Define the current repository as being a {@link Clusterable} one.
     *
     * @param c
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/Oak.java`
#### Snippet
```java
     *
     * @param c
     * @return
     */
    @NotNull
```

### JavadocDeclaration
`@param propertyName` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/FullTextSearchImpl.java`
#### Snippet
```java
     * {@code property IS NOT NULL}
     * 
     * @param propertyName
     * @param f
     */
```

### JavadocDeclaration
`@param f` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/FullTextSearchImpl.java`
#### Snippet
```java
     * 
     * @param propertyName
     * @param f
     */
    void restrictPropertyOnFilter(String propertyName, FilterImpl f) {
```

### JavadocDeclaration
`@param s` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/DynamicOperandImpl.java`
#### Snippet
```java
    /**
     *
     * @param s
     * @return the property name as defined in the OrderEntry for the DynamicOperand
     */
```

### JavadocDeclaration
`@param allowTextLiterals` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
     * Enable or disable support for text literals in queries. The default is enabled.
     *
     * @param allowTextLiterals
     */
    public void setAllowTextLiterals(boolean allowTextLiterals) {
```

### JavadocDeclaration
`@param query` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
     * as {@link #parse(String, boolean)} by providing {@code true} to the initialisation flag.
     * 
     * @param query
     * @return the parsed query
     * @throws ParseException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
     * @param query
     * @return the parsed query
     * @throws ParseException
     */
    public Query parse(final String query) throws ParseException {
```

### JavadocDeclaration
`@param uri` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/name/Namespaces.java`
#### Snippet
```java
     * encodes the uri value to be used as a property
     * 
     * @param uri
     * @return encoded uri
     */
```

### JavadocDeclaration
`@param callback` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexingContext.java`
#### Snippet
```java
     * registers {@code IndexCommitCallback} instance which can then be
     * notified of how indexing commit progresses.
     * @param callback
     */
    void registerIndexCommitCallback(IndexCommitCallback callback);
```

### JavadocDeclaration
`@param declaringNodeTypeNames` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param unique                    true if uniqueness
     * @param propertyNames             the list of properties to be indexed
     * @param declaringNodeTypeNames
     * @param propertyIndexType         the type of the PropertyIndex
     * @param properties                any additional property to be added to the index definition.
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param propertyIndexType         the type of the PropertyIndex
     * @param properties                any additional property to be added to the index definition.
     * @throws RepositoryException
     */
    public static NodeBuilder createIndexDefinition(@NotNull NodeBuilder indexNode, 
```

### JavadocDeclaration
`@param indexNode` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * {@code propertyIndexType}.
     *
     * @param indexNode
     * @param indexDefName
     * @param unique
```

### JavadocDeclaration
`@param indexDefName` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     *
     * @param indexNode
     * @param indexDefName
     * @param unique
     * @param propertyNames
```

### JavadocDeclaration
`@param unique` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param indexNode
     * @param indexDefName
     * @param unique
     * @param propertyNames
     * @param declaringNodeTypeNames
```

### JavadocDeclaration
`@param propertyNames` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param indexDefName
     * @param unique
     * @param propertyNames
     * @param declaringNodeTypeNames
     * @param propertyIndexType
```

### JavadocDeclaration
`@param declaringNodeTypeNames` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param unique
     * @param propertyNames
     * @param declaringNodeTypeNames
     * @param propertyIndexType
     * @param properties any additional property to be added to the index definition.
```

### JavadocDeclaration
`@param propertyIndexType` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param propertyNames
     * @param declaringNodeTypeNames
     * @param propertyIndexType
     * @param properties any additional property to be added to the index definition.
     * @throws RepositoryException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param propertyIndexType
     * @param properties any additional property to be added to the index definition.
     * @throws RepositoryException
     */
    public static Tree createIndexDefinition(@NotNull Tree indexNode,
```

### JavadocDeclaration
`@param indexNode` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * Create a new property2 index definition below the given {@code indexNode}.
     *
     * @param indexNode
     * @param indexDefName
     * @param unique
```

### JavadocDeclaration
`@param indexDefName` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     *
     * @param indexNode
     * @param indexDefName
     * @param unique
     * @param propertyNames
```

### JavadocDeclaration
`@param unique` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param indexNode
     * @param indexDefName
     * @param unique
     * @param propertyNames
     * @param declaringNodeTypeNames
```

### JavadocDeclaration
`@param propertyNames` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param indexDefName
     * @param unique
     * @param propertyNames
     * @param declaringNodeTypeNames
     */
```

### JavadocDeclaration
`@param declaringNodeTypeNames` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
     * @param unique
     * @param propertyNames
     * @param declaringNodeTypeNames
     */
    public static Tree createIndexDefinition(@NotNull Tree indexNode,
```

### JavadocDeclaration
`@param t` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexProvider.java`
#### Snippet
```java
     * used only for testing purposes. Not thread safe.
     * 
     * @param t
     */
    static void setThreshold(int t) {
```

### JavadocDeclaration
`@param t` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexEditorProvider.java`
#### Snippet
```java
   /**
    * used for testing purposes. Not thread safe.
    * @param t
    */
   static void setThreshold(int t) {
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/progress/IndexingProgressReporter.java`
#### Snippet
```java
     * Invoked to indicate that reindexing phase has started in current
     * indexing cycle
     * @param path
     */
    public void reindexingTraversalStart(String path) {
```

### JavadocDeclaration
`@param indexMeta` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java`
#### Snippet
```java
         * convenience method that tells if the provided index definition is descending
         * 
         * @param indexMeta
         * @return true if descending
         */
```

### JavadocDeclaration
`@param indexMeta` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java`
#### Snippet
```java
         * convenience method that tells if the provided index definition is ascending
         * 
         * @param indexMeta
         * @return true if ascending
         */
```

### JavadocDeclaration
`@param indexMeta` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java`
#### Snippet
```java
         * tells whether the provided index definition is ascending or descending
         * 
         * @param indexMeta
         * @return the direction
         */
```

### JavadocDeclaration
`@param async` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/jmx/PropertyIndexAsyncReindex.java`
#### Snippet
```java

    /**
     * @param async
     * @param executor
     *            executor for running the garbage collection task
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
     * convenience method wrapping logic around {@link AtomicReference}
     * 
     * @return
     */
    private ScheduledExecutorService getScheduler() {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
     * convenience method wrapping logic around {@link AtomicReference}
     * 
     * @return
     */
    private String getInstanceId() {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
     * Convenience method wrapping logic around {@link AtomicReference}
     * 
     * @return
     */
    private Whiteboard getBoard() {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
     * convenience method wrapping logic around {@link AtomicReference}
     * 
     * @return
     */
    private NodeStore getStore() {
```

### JavadocDeclaration
`@param builder` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditor.java`
#### Snippet
```java
     * If {@code builder} does not contain the property it will always return false.
     * 
     * @param builder
     * @param revision
     * @return
```

### JavadocDeclaration
`@param revision` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditor.java`
#### Snippet
```java
     * 
     * @param builder
     * @param revision
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditor.java`
#### Snippet
```java
     * @param builder
     * @param revision
     * @return
     */
    static boolean checkRevision(@NotNull NodeBuilder builder, @Nullable PropertyState revision) {
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/itemsave/ItemSaveValidator.java`
#### Snippet
```java
     * Create a new validator that only throws a {@link CommitFailedException} whenever
     * there are changes not contained in the subtree rooted at {@code path}.
     * @param path
     */
    public ItemSaveValidator(String path) {
```

### JavadocDeclaration
`@param childEffective` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
     *
     * @param childName The internal oak name of the target node.
     * @param childEffective
     * @return the node definition
     * @throws ConstraintViolationException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
     * @param childEffective
     * @return the node definition
     * @throws ConstraintViolationException
     */
    @NotNull
```

### JavadocDeclaration
`@param types` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeRegistration.java`
#### Snippet
```java
     * having to traverse up the type hierarchy.
     *
     * @param types
     * @param type
     * @return
```

### JavadocDeclaration
`@param type` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeRegistration.java`
#### Snippet
```java
     *
     * @param types
     * @param type
     * @return
     * @throws CommitFailedException
```

### JavadocDeclaration
Tag `return` is not allowed here
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeRegistration.java`
#### Snippet
```java
     * @param types
     * @param type
     * @return
     * @throws CommitFailedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeRegistration.java`
#### Snippet
```java
     * @param type
     * @return
     * @throws CommitFailedException
     */
    private void mergeSupertypes(NodeBuilder types, NodeBuilder type)
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/NodeObserver.java`
#### Snippet
```java
    /**
     * Create a new instance for observing the given path.
     * @param path
     * @param propertyNames  names of properties to report even without a change
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/PermissionProviderFactory.java`
#### Snippet
```java
    /**
     * Create a new {@code PermissionProvider} instance.
     * @return
     */
    @NotNull
```

### JavadocDeclaration
Javadoc pointing to itself
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/EventGenerator.java`
#### Snippet
```java
     * on the content changes that have yet to be processed. Further processing
     * (even if no callbacks were made) may be postponed to a future
     * {@link #generate()} call, until the {@link #isDone()} method finally
     * return {@code true}.
     */
```

### JavadocDeclaration
`@param eventTypes` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/FilterBuilder.java`
#### Snippet
```java
    /**
     * A condition that holds for matching event types.
     * @param eventTypes
     * @return event type condition
     * @see EventTypeFilter
```

### JavadocDeclaration
`@param pathPattern` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/FilterBuilder.java`
#### Snippet
```java
    /**
     * A condition that holds on the paths matching a certain pattern.
     * @param pathPattern
     * @return  path condition
     * @see GlobbingPathFilter
```

### JavadocDeclaration
`@param paths` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/FilterBuilder.java`
#### Snippet
```java
    /**
     * Adds paths to the FilterConfigMBean's getPaths set
     * @param paths
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/FilterBuilder.java`
#### Snippet
```java
     * Adds paths to the FilterConfigMBean's getPaths set
     * @param paths
     * @return
     */
    public FilterBuilder addPathsForMBean(@NotNull Set<String> paths) {
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param tree The tree for which to retrieve the granted privileges.
     * @return the set of privileges or an empty set if no privileges are granted.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionProvider#getPrivileges(org.apache.jackrabbit.oak.api.Tree)}
     */
    @NotNull
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param permissions The permissions to be tested.
     * @return {@code true} if granted.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionProvider#isGranted(org.apache.jackrabbit.oak.api.Tree, org.apache.jackrabbit.oak.api.PropertyState, long)}
     */
    boolean isGranted(@NotNull Tree tree, @Nullable PropertyState property, long permissions);
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param parentPermission The permissions as present with the parent.
     * @return The permissions for the specified tree.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.TreePermission#getChildPermission(String, org.apache.jackrabbit.oak.spi.state.NodeState)}
     */
    @NotNull
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param permissions The permissions to be tested.
     * @return {@code true} if granted.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionProvider#isGranted(String, String)}
     */
    boolean isGranted(@NotNull String path, long permissions);
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param permissions The permissions to be tested.
     * @return {@code true} if granted.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionProvider#isGranted(String, String)}
     */
    boolean isGranted(@NotNull String path, boolean isProperty, long permissions);
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param root The root
     * @param workspaceName The workspace name.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionProvider#refresh()}
     */
    void refresh(@NotNull Root root, @NotNull String workspaceName);
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     *
     * @return an instance of {@code RepositoryPermission}.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.PermissionProvider#getRepositoryPermission()}
     */
    @NotNull
```

### JavadocDeclaration
Class/method reference, quoted text, or HTML link are expected after @see tag
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissions.java`
#### Snippet
```java
     * @param parentPermission The permissions as present with the parent.
     * @return The permissions for the specified tree.
     * @see {@link org.apache.jackrabbit.oak.spi.security.authorization.permission.TreePermission#getChildPermission(String, org.apache.jackrabbit.oak.spi.state.NodeState)}
     */
    @NotNull
```

### JavadocDeclaration
`@param before` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/ChildOrderDiff.java`
#### Snippet
```java
     * property.
     *
     * @param before
     * @param after
     * @return {@code true} if any user-supplied node
```

### JavadocDeclaration
`@param after` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/ChildOrderDiff.java`
#### Snippet
```java
     *
     * @param before
     * @param after
     * @return {@code true} if any user-supplied node
     * reorder happened; {@code false} otherwise.
```

### JavadocDeclaration
`@param pOff` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/restriction/GlobPattern.java`
#### Snippet
```java
         *
         * @param pattern The pattern
         * @param pOff
         * @param s
         * @param sOff
```

### JavadocDeclaration
`@param s` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/restriction/GlobPattern.java`
#### Snippet
```java
         * @param pattern The pattern
         * @param pOff
         * @param s
         * @param sOff
         * @return {@code true} if matches, {@code false} otherwise
```

### JavadocDeclaration
`@param sOff` tag description is missing
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/restriction/GlobPattern.java`
#### Snippet
```java
         * @param pOff
         * @param s
         * @param sOff
         * @return {@code true} if matches, {@code false} otherwise
         */
```

### JavadocDeclaration
`@param repository` tag description is missing
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/SimpleWebdavServlet.java`
#### Snippet
```java
     * Sets the <code>Repository</code>.
     *
     * @param repository
     */
    public void setRepository(Repository repository) {
```

### JavadocDeclaration
`@param bundleContext` tag description is missing
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryStartupServlet.java`
#### Snippet
```java
     * Felix Proxy Servlet. Kept the type as object to allow logic to work in
     * absence of OSGi classes also.
     * @param bundleContext
     */
    private void registerOSGi(Object bundleContext) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriteOperationHandler.java`
#### Snippet
```java
     * Flush any pending changes on any {@link SegmentBufferWriter} managed by this instance.
     * @param store  the {@code SegmentStore} instance to write the {@code Segment} to
     * @throws IOException
     */
    void flush(@NotNull SegmentStore store) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriteOperationHandler.java`
#### Snippet
```java
     * @param writeOperation  {@link WriteOperation} to execute
     * @return                {@code RecordId} that resulted from persisting the changes.
     * @throws IOException
     */
    @NotNull
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriteOperationHandler.java`
#### Snippet
```java
         * @param writer  writer which must be used to persist any changes
         * @return        {@code RecordId} that resulted from persisting the changes.
         * @throws IOException
         */
        @NotNull
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/ClassicCompactor.java`
#### Snippet
```java
     * @param onto     the node state compacted onto
     * @return         the compacted node state or {@code null} if cancelled.
     * @throws IOException
     */
    @Nullable
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/ClassicCompactor.java`
#### Snippet
```java
     * @param state  the node state to compact
     * @return       the compacted node state or {@code null} if cancelled.
     * @throws IOException
     */
    @Nullable
```

### JavadocDeclaration
`@param msb` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/ReaderCache.java`
#### Snippet
```java
         *
         * @param hash the hash
         * @param msb
         * @param lsb
         * @param offset the offset
```

### JavadocDeclaration
`@param lsb` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/ReaderCache.java`
#### Snippet
```java
         * @param hash the hash
         * @param msb
         * @param lsb
         * @param offset the offset
         * @return the string, or null
```

### JavadocDeclaration
`@param revisions` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentReader.java`
#### Snippet
```java
    /**
     * Read the current head state based on the head of {@code revisions}
     * @param revisions
     * @throws SegmentNotFoundException  see class comment for exception semantics
     */
```

### JavadocDeclaration
`@param buffer` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentBufferMonitor.java`
#### Snippet
```java
    /**
     * Track the allocation of a {@code buffer} and update the exposed statistics.
     * @param buffer
     */
    public void trackAllocation(@NotNull Buffer buffer) {
```

### JavadocDeclaration
`@param statisticsProvider` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentBufferMonitor.java`
#### Snippet
```java
     * Create a new instance using the passed {@code statisticsProvider} to expose
     * buffer allocations.
     * @param statisticsProvider
     */
    public SegmentBufferMonitor(@NotNull StatisticsProvider statisticsProvider) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/CheckpointCompactor.java`
#### Snippet
```java
     *                     {@code uncompacted}
     * @return  compacted clone of {@code uncompacted} or {@code null} if cancelled.
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@param store` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentId.java`
#### Snippet
```java
    /**
     * Determine whether this instance belongs to the passed {@code store}
     * @param store
     * @return  {@code true} iff this instance belongs to {@code store}
     */
```

### JavadocDeclaration
`@param mapId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a map record
     * @param parentId  parent of this map or {@code null} if none
     * @param mapId
     * @param map
     * @return
```

### JavadocDeclaration
`@param map` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param parentId  parent of this map or {@code null} if none
     * @param mapId
     * @param map
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param mapId
     * @param map
     * @return
     */
    public MapInfo parseMap(RecordId parentId, RecordId mapId, MapRecord map) {
```

### JavadocDeclaration
`@param blobId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a blob record
     * @param blobId
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a blob record
     * @param blobId
     * @return
     */
    public BlobInfo parseBlob(RecordId blobId) {
```

### JavadocDeclaration
`@param templateId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a template record
     * @param templateId
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a template record
     * @param templateId
     * @return
     */
    public TemplateInfo parseTemplate(RecordId templateId) {
```

### JavadocDeclaration
`@param listId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a list record
     * @param parentId  parent of the list, {@code null} if none
     * @param listId
     * @param count
     * @return
```

### JavadocDeclaration
`@param count` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param parentId  parent of the list, {@code null} if none
     * @param listId
     * @param count
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param listId
     * @param count
     * @return
     */
    public ListInfo parseList(RecordId parentId, RecordId listId, int count) {
```

### JavadocDeclaration
`@param listId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse item of list buckets
     * @param listId
     * @param index      index of the first item to parse
     * @param count      number of items to parse
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param count      number of items to parse
     * @param capacity   total number of items
     * @return
     */
    public ListBucketInfo parseListBucket(RecordId listId, int index, int count, int capacity) {
```

### JavadocDeclaration
`@param stringId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a string record
     * @param stringId
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a string record
     * @param stringId
     * @return
     */
    public BlobInfo parseString(RecordId stringId) {
```

### JavadocDeclaration
`@param mapId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a map diff record
     * @param mapId
     * @param map
     * @return
```

### JavadocDeclaration
`@param map` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a map diff record
     * @param mapId
     * @param map
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param mapId
     * @param map
     * @return
     */
    public MapInfo parseMapDiff(RecordId mapId, MapRecord map) {
```

### JavadocDeclaration
`@param nodeId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a node record
     * @param nodeId
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a node record
     * @param nodeId
     * @return
     */
    public NodeInfo parseNode(RecordId nodeId) {
```

### JavadocDeclaration
`@param mapId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a map leaf record
     * @param mapId
     * @param map
     * @return
```

### JavadocDeclaration
`@param map` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a map leaf record
     * @param mapId
     * @param map
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param mapId
     * @param map
     * @return
     */
    public MapInfo parseMapLeaf(RecordId mapId, MapRecord map) {
```

### JavadocDeclaration
`@param mapId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a map branch record
     * @param mapId
     * @param map
     * @return
```

### JavadocDeclaration
`@param map` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a map branch record
     * @param mapId
     * @param map
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param mapId
     * @param map
     * @return
     */
    public MapInfo parseMapBranch(RecordId mapId, MapRecord map) {
```

### JavadocDeclaration
`@param valueId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a value record
     * @param parentId  parent of the value record, {@code null} if none
     * @param valueId
     * @param type
     * @return
```

### JavadocDeclaration
`@param type` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param parentId  parent of the value record, {@code null} if none
     * @param valueId
     * @param type
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param valueId
     * @param type
     * @return
     */
    public ValueInfo parseValue(RecordId parentId, RecordId valueId, Type<?> type) {
```

### JavadocDeclaration
`@param parentId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
    /**
     * Parse a property
     * @param parentId
     * @param propertyId
     * @param template
```

### JavadocDeclaration
`@param propertyId` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * Parse a property
     * @param parentId
     * @param propertyId
     * @param template
     * @return
```

### JavadocDeclaration
`@param template` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param parentId
     * @param propertyId
     * @param template
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
     * @param propertyId
     * @param template
     * @return
     */
    public PropertyInfo parseProperty(RecordId parentId, RecordId propertyId, PropertyTemplate template) {
```

### JavadocDeclaration
`@param property` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java

        /**
         * @param property
         * @return {@code true} iff {@code property} is a {@code
         * SegmentPropertyState} and originates from the same segment store.
```

### JavadocDeclaration
`@param node` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java

        /**
         * @param node
         * @return {@code true} iff {@code node} originates from the same
         * segment store.
```

### JavadocDeclaration
`@param blob` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java

        /**
         * @param blob
         * @return {@code true} iff {@code blob} is a {@code SegmentBlob} and
         * originates from the same segment store.
```

### JavadocDeclaration
`@param generation` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriterCacheManager.java`
#### Snippet
```java

    /**
     * @param generation
     * @return  cache for template records of the given {@code generation} and {@code operation}.
     */
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriterCacheManager.java`
#### Snippet
```java
     * this method delegates back to this instance and adds access statistics
     * via the passed {@code statisticsProvider}.
     * @param name
     * @param statisticsProvider
     * @return  an instance of this cache with access statistics enabled.
```

### JavadocDeclaration
`@param statisticsProvider` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriterCacheManager.java`
#### Snippet
```java
     * via the passed {@code statisticsProvider}.
     * @param name
     * @param statisticsProvider
     * @return  an instance of this cache with access statistics enabled.
     */
```

### JavadocDeclaration
`@param generations` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/WriterCacheManager.java`
#### Snippet
```java
        /**
         * Remove all cache generations matching the passed {@code generations} predicate.
         * @param generations
         */
        protected final void evictCaches(Predicate<Integer> generations) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentWriter.java`
#### Snippet
```java
     * @param blob blob to write
     * @return the record id of the blob written
     * @throws IOException
     */
    @NotNull
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentWriter.java`
#### Snippet
```java
     * @param stableIdBytes the stableId that should be assigned to the node or {@code null}.
     * @return the record id of the segment node state written
     * @throws IOException
     */
    @NotNull
```

### JavadocDeclaration
`@param statisticsProvider` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java
        /**
         * {@link StatisticsProvider} for collecting statistics related to SegmentStore
         * @param statisticsProvider
         * @return this instance
         */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/RepositoryLock.java`
#### Snippet
```java
     * Unlocks the repository, so that it can be used by another SegmentNodeStore.
     *
     * @throws IOException
     */
    void unlock() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFileReader.java`
#### Snippet
```java
     * Read the line from the journal, using LIFO strategy (last in, first out).
     * @return the journal record
     * @throws IOException
     */
    String readLine() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveWriter.java`
#### Snippet
```java
     * @param fullGeneration the segment full generation, see {@link SegmentArchiveEntry#getFullGeneration()}
     * @param isCompacted the segment compaction property, see {@link SegmentArchiveEntry#isCompacted()}
     * @throws IOException
     */
    @NotNull
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveWriter.java`
#### Snippet
```java
     * one or more processes in read-only mode.
     *
     * @return
     */
    boolean isRemote();
```

### JavadocDeclaration
`@param offset` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Segment.java`
#### Snippet
```java
    /**
     * Convert an offset into an address.
     * @param offset
     * @return  the address corresponding the {@code offset}
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/ManifestFile.java`
#### Snippet
```java
     * Store the properties to the manifest file.
     * @param properties describing the segmentstore
     * @throws IOException
     */
    void save(Properties properties) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/ManifestFile.java`
#### Snippet
```java
     * Load the properties from the manifest file.
     * @return properties describing the segmentstore
     * @throws IOException
     */
    Properties load() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFileWriter.java`
#### Snippet
```java
     * concurrent environment.
     *
     * @throws IOException
     */
    void truncate() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFileWriter.java`
#### Snippet
```java
     *
     * @param lines List of journal records to be written
     * @throws IOException
     */
    void batchWriteLines(List<String> lines) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFileWriter.java`
#### Snippet
```java
     *
     * @param line the journal record to be written
     * @throws IOException
     */
    void writeLine(String line) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/GCJournalFile.java`
#### Snippet
```java
     * @param line the line to write. It should contain neither special characters
     *             nor the newline {@code \n}.
     * @throws IOException
     */
    void writeLine(String line) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/GCJournalFile.java`
#### Snippet
```java
     *
     * @return the list of all written lines
     * @throws IOException
     */
    List<String> readLines() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentNodeStorePersistence.java`
#### Snippet
```java
     * required to run the process again.
     * @return the acquired repository lock
     * @throws IOException
     */
    RepositoryLock lockRepository() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentNodeStorePersistence.java`
#### Snippet
```java
     * @param fileStoreMonitor object used to monitor the general IO usage.
     * @return segment archive manager
     * @throws IOException
     */
    SegmentArchiveManager createArchiveManager(boolean memoryMapping, boolean offHeapAccess, IOMonitor ioMonitor,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentNodeStorePersistence.java`
#### Snippet
```java
     * Create the {@link ManifestFile}.
     * @return object representing the manifest file
     * @throws IOException
     */
    ManifestFile getManifestFile() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentNodeStorePersistence.java`
#### Snippet
```java
     * Create the {@link GCJournalFile}.
     * @return object representing the GC journal file
     * @throws IOException
     */
    GCJournalFile getGCJournalFile() throws IOException;
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveReader.java`
#### Snippet
```java
     * one or more processes in read-only mode.
     *
     * @return
     */
    boolean isRemote();
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFile.java`
#### Snippet
```java
     *
     * @return the reader representing the current state of the journal
     * @throws IOException
     */
    JournalFileReader openJournalReader() throws IOException;
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFile.java`
#### Snippet
```java
    /**
     * Opens the journal file for writing.
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/JournalFile.java`
#### Snippet
```java
     * Opens the journal file for writing.
     * @return
     * @throws IOException
     */
    JournalFileWriter openJournalWriter() throws IOException;
```

### JavadocDeclaration
`@param archiveName` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * should be deleted or modified.
     *
     * @param archiveName
     * @param backupArchiveName
     * @param recoveredEntries
```

### JavadocDeclaration
`@param backupArchiveName` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     *
     * @param archiveName
     * @param backupArchiveName
     * @param recoveredEntries
     * @throws IOException
```

### JavadocDeclaration
`@param recoveredEntries` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * @param archiveName
     * @param backupArchiveName
     * @param recoveredEntries
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * @param backupArchiveName
     * @param recoveredEntries
     * @throws IOException
     */
    void backup(@NotNull String archiveName, @NotNull String backupArchiveName, @NotNull Set<UUID> recoveredEntries) throws IOException;
```

### JavadocDeclaration
`@param archiveName` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * Creates a new archive.
     *
     * @param archiveName
     * @return the archive writer
     */
```

### JavadocDeclaration
`@param archiveName` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * Opens a given archive for reading.
     *
     * @param archiveName
     * @return the archive reader or null if the archive doesn't exist or doesn't
     * have a valid index
```

### JavadocDeclaration
`@param archiveName` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * Opens an archive that wasn't closed correctly.
     *
     * @param archiveName
     * @return the archive reader or null if the implementation doesn't support
     * opening an unclosed archive
```

### JavadocDeclaration
`@param archiveName` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/SegmentArchiveManager.java`
#### Snippet
```java
     * Deletes the archive if exists.
     *
     * @param archiveName
     * @return true if the archive was removed, false otherwise
     */
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * Create a new instance with the given {@code name}. The name is used to
     * derive the default name of the background thread from..
     * @param name
     */
    public Scheduler(@Nullable String name) {
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * Run {@code task} regularly after a fixed delay. The background thread's name is
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param delay
     * @param unit
```

### JavadocDeclaration
`@param delay` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param delay
     * @param unit
     * @param task
```

### JavadocDeclaration
`@param unit` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * @param name
     * @param delay
     * @param unit
     * @param task
     * @see ScheduledExecutorService#scheduleWithFixedDelay(Runnable, long, long, TimeUnit)
```

### JavadocDeclaration
`@param task` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * @param delay
     * @param unit
     * @param task
     * @see ScheduledExecutorService#scheduleWithFixedDelay(Runnable, long, long, TimeUnit)
     */
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * Run {@code task} regularly at a given interval. The background thread's name is
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param period
     * @param unit
```

### JavadocDeclaration
`@param period` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param period
     * @param unit
     * @param task
```

### JavadocDeclaration
`@param unit` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * @param name
     * @param period
     * @param unit
     * @param task
     * @see ScheduledExecutorService#scheduleAtFixedRate(Runnable, long, long, TimeUnit)
```

### JavadocDeclaration
`@param task` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * @param period
     * @param unit
     * @param task
     * @see ScheduledExecutorService#scheduleAtFixedRate(Runnable, long, long, TimeUnit)
     */
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * Run {@code task} once after some delay. The background thread's name is
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param delay
     * @param unit
```

### JavadocDeclaration
`@param delay` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param delay
     * @param unit
     * @param task
```

### JavadocDeclaration
`@param unit` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * @param name
     * @param delay
     * @param unit
     * @param task
     * @see ScheduledExecutorService#schedule(Runnable, long, TimeUnit)
```

### JavadocDeclaration
`@param task` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * @param delay
     * @param unit
     * @param task
     * @see ScheduledExecutorService#schedule(Runnable, long, TimeUnit)
     */
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * Immediately execute {@code task}. The background thread's name is
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param task
     * @see ScheduledExecutorService#execute(Runnable)
```

### JavadocDeclaration
`@param task` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/Scheduler.java`
#### Snippet
```java
     * set to {@code name} during execution of {@code task}.
     * @param name
     * @param task
     * @see ScheduledExecutorService#execute(Runnable)
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
     * @param idProvider         {@code SegmentIdProvider} of the {@code store}
     * @param writeInitialNode   provider for the initial node in case the journal is empty.
     * @throws IOException
     */
    synchronized void bind(@NotNull SegmentStore store,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/ReadOnlyRevisions.java`
#### Snippet
```java
     * @param store store to bind to
     * @param idProvider  {@code SegmentIdProvider} of the {@code store}
     * @throws IOException
     */
    synchronized void bind(@NotNull SegmentStore store, @NotNull SegmentIdProvider idProvider)
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java

     * @param options  zero or one timeout options specifying how long to block
     * @throws InterruptedException
     * @throws IllegalArgumentException  on any non recognised {@code option}.
     * @see #timeout(long, TimeUnit)
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
    /**
     * Close the underlying journal file.
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
     * {@code directory}.
     * @param persistence object representing the segment persistence
     * @throws IOException
     */
    public TarRevisions(SegmentNodeStorePersistence persistence) throws IOException {
```

### JavadocDeclaration
`@param revision` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/ReadOnlyFileStore.java`
#### Snippet
```java
     * Go to the specified {@code revision}
     *
     * @param revision
     */
    public void setRevision(String revision) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     *
     * @return a new file store instance
     * @throws IOException
     */
    @NotNull
```

### JavadocDeclaration
`@param offHeapAccess` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * Turn off heap access on or off
     *
     * @param offHeapAccess
     * @return this instance
     */
```

### JavadocDeclaration
`@param memoryMapping` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * Turn memory mapping on or off
     *
     * @param memoryMapping
     * @return this instance
     */
```

### JavadocDeclaration
`@param statisticsProvider` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * {@link StatisticsProvider} for collecting statistics related to FileStore
     *
     * @param statisticsProvider
     * @return this instance
     */
```

### JavadocDeclaration
`@param gcMonitor` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * {@link GCMonitor} for monitoring this files store's gc process.
     *
     * @param gcMonitor
     * @return this instance
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     *
     * @return a new file store instance
     * @throws IOException
     */
    @NotNull
```

### JavadocDeclaration
`@param maxFileSize` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * Maximal size of the generated tar files in MB.
     *
     * @param maxFileSize
     * @return this instance
     */
```

### JavadocDeclaration
`@param blobStore` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * Specify the {@link BlobStore}.
     *
     * @param blobStore
     * @return this instance
     */
```

### JavadocDeclaration
`@param gcOptions` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/FileStoreBuilder.java`
#### Snippet
```java
     * {@link SegmentGCOptions} the garbage collection options of the store
     *
     * @param gcOptions
     * @return this instance
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/ShutDown.java`
#### Snippet
```java
     * Initiate a shutdown of the store. The shutdown is complete once the returned
     * {@link ShutDownCloser} is {@link ShutDownCloser#close() closed}.
     * @return
     */
    ShutDownCloser shutDown() {
```

### JavadocDeclaration
`@param purge` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/PriorityCache.java`
#### Snippet
```java
     * Purge all keys from this cache whose entry's generation matches the
     * passed {@code purge} predicate.
     * @param purge
     */
    public synchronized void purgeGenerations(@NotNull Predicate<Integer> purge) {
```

### JavadocDeclaration
`@param size` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/PriorityCache.java`
#### Snippet
```java
    /**
     * Round {@code size} up to the next power of two or 1 for negative values.
     * @param size
     * @return the next power of two starting from {@code size}.
     */
```

### JavadocDeclaration
`@param recoveredEntries` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarReader.java`
#### Snippet
```java
     *
     * @param file File to backup.
     * @param recoveredEntries
     */
    private static void backupSafely(SegmentArchiveManager archiveManager, String file, Set<UUID> recoveredEntries) throws IOException {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/BasicReadOnlyBlobStore.java`
#### Snippet
```java
     * @param in the input stream to write
     * @param options the options to use
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/BasicReadOnlyBlobStore.java`
#### Snippet
```java
     * @param options the options to use
     * @return
     * @throws IOException
     */
    @Override
```

### JavadocDeclaration
`@param depth` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
        /**
         * Serialise this element to JSON up to the given {@code depth}.
         * @param depth
         * @return
         */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
         * Serialise this element to JSON up to the given {@code depth}.
         * @param depth
         * @return
         */
        public String toString(int depth) {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
        /**
         * Node at given revision
         * @return
         */
        @Nullable
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
        /**
         * Revision of the node
         * @return
         */
        @NotNull
```

### JavadocDeclaration
`@param journal` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
     * {@code journal}.
     *
     * @param journal
     * @param path
     * @return
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
     *
     * @param journal
     * @param path
     * @return
     * @throws IOException
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
     * @param journal
     * @param path
     * @return
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
     * @param path
     * @return
     * @throws IOException
     */
    public Iterator<HistoryElement> getHistory(@NotNull JournalFile journal, @NotNull final String path)
```

### JavadocDeclaration
`@param directory` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
     * Create a new instance for a {@link ReadOnlyFileStore} in the given {@code directory}.
     *
     * @param directory
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tooling/RevisionHistory.java`
#### Snippet
```java
     *
     * @param directory
     * @throws IOException
     */
    public RevisionHistory(@NotNull File directory) throws IOException, InvalidFileStoreVersionException {
```

### JavadocDeclaration
`@param trace` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/IOTracer.java`
#### Snippet
```java
    /**
     * Collect a IO trace.
     * @param trace
     */
    public void collectTrace(@NotNull Trace trace) {
```

### JavadocDeclaration
`@param context` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/IOTracer.java`
#### Snippet
```java
     * of values needs to match the context specification passed to
     * {@link IOTracer#newIOTracer(Function, Writer, String)}.
     * @param context
     */
    public void setContext(@NotNull List<String> context) {
```

### JavadocDeclaration
`@param node` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/Trace.java`
#### Snippet
```java
    /**
     * Run this trace on the passed {@code node}.
     * @param node
     */
    void run(@NotNull NodeState node);
```

### JavadocDeclaration
`@param writer` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/DefaultIOTraceWriter.java`
#### Snippet
```java
     * It is the callers responsibility to close the {@code writer} when
     * not needed anymore.
     * @param writer
     */
    public DefaultIOTraceWriter(@NotNull Writer writer) {
```

### JavadocDeclaration
`@param header` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/IOTraceWriter.java`
#### Snippet
```java
    /**
     * Persist a {@code header}
     * @param header
     */
    void writeHeader(@NotNull String header);
```

### JavadocDeclaration
`@param entry` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/IOTraceWriter.java`
#### Snippet
```java
    /**
     * Persist a {@code entry}
     * @param entry
     */
    void writeEntry(@NotNull String entry);
```

### JavadocDeclaration
`@param log` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/iotrace/IOTraceLogWriter.java`
#### Snippet
```java
    /**
     * Create a new instance persisting to {@code log}.
     * @param log
     */
    public IOTraceLogWriter(@NotNull Logger log) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/util/SafeEncode.java`
#### Snippet
```java
     * @param s A UTF-8 string.
     * @return The encoded string.
     * @throws UnsupportedEncodingException
     */
    public static String safeEncode(String s) throws UnsupportedEncodingException {
```

### JavadocDeclaration
`@param retryCount` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentRevisionGC.java`
#### Snippet
```java
     * Set the number of tries to compact concurrent commits on top of already
     * compacted commits
     * @param retryCount
     */
    void setRetryCount(int retryCount);
```

### JavadocDeclaration
`@param memoryThreshold` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentRevisionGC.java`
#### Snippet
```java
     * {@code 100} is expected. Setting this to {@code 0} will disable the
     * check.
     * @param memoryThreshold
     */
    void setMemoryThreshold(int memoryThreshold);
```

### JavadocDeclaration
`@param disabled` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentRevisionGC.java`
#### Snippet
```java
    /**
     * Disables the estimation phase, thus allowing GC to run every time.
     * @param disabled
     */
    void setEstimationDisabled(boolean disabled);
```

### JavadocDeclaration
`@param paused` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentRevisionGC.java`
#### Snippet
```java
    /**
     * Set revision gc to paused.
     * @param paused
     */
    void setPausedCompaction(boolean paused);
```

### JavadocDeclaration
`@param compactorType` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
    /**
     * Sets the compactor type to be used for compaction
     * @param compactorType
     */
    public SegmentGCOptions setCompactorType(CompactorType compactorType) {
```

### JavadocDeclaration
`@param memoryThreshold` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
     * {@code 100} is expected. Setting this to {@code 0} will disable the
     * check.
     * @param memoryThreshold
     * @return this instance
     */
```

### JavadocDeclaration
`@param paused` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
    /**
     * Set revision gc to paused.
     * @param paused
     * @return this instance
     */
```

### JavadocDeclaration
`@param retryCount` tag description is missing
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/compaction/SegmentGCOptions.java`
#### Snippet
```java
     * Set the number of tries to compact concurrent commits on top of already
     * compacted commits
     * @param retryCount
     * @return this instance
     */
```

### JavadocDeclaration
`@param ` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/SecurityProvider.java`
#### Snippet
```java
     *
     * @param configClass The class of the configuration to retrieve.
     * @param <T>
     * @return The desired security configuration.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/AuthorizableAction.java`
#### Snippet
```java
     * @param authorizable The authorizable to be removed.
     * @param root The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/AuthorizableAction.java`
#### Snippet
```java
     * @param newPassword The new password as specified in {@link org.apache.jackrabbit.api.security.user.User#changePassword}
     * @param root The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an exception or error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/AuthorizableAction.java`
#### Snippet
```java
     * e.g. the associated tree is still 'NEW'.
     * @param root The root associated with the user manager.
     * @param namePathMapper
     * @throws javax.jcr.RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/AuthorizableAction.java`
#### Snippet
```java
     * @param password The password that was specified upon user creation.
     * @param root The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/GroupAction.java`
#### Snippet
```java
     * @param memberIds      An {@link Iterable} of the member IDs.
     * @param root           The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/GroupAction.java`
#### Snippet
```java
     * @param member         The {@link Authorizable} added.
     * @param root           The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/GroupAction.java`
#### Snippet
```java
     * @param member         The {@link Authorizable} removed.
     * @param root           The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/GroupAction.java`
#### Snippet
```java
     * @param memberContentIds An {@link Iterable} of the member content IDs (UUIDs).
     * @param root             The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param namePathMapper` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/action/GroupAction.java`
#### Snippet
```java
     * @param memberIds      An {@link Iterable} of the member IDs.
     * @param root           The root associated with the user manager.
     * @param namePathMapper
     * @throws RepositoryException If an error occurs.
     */
```

### JavadocDeclaration
`@param simpleFilter` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/principal/PrincipalQueryManager.java`
#### Snippet
```java
     * An implementation may limit the number of principals returned.
     * If there are no matching principals, an empty iterator is returned.
     * @param simpleFilter
     * @param fullText
     * @param searchType Any of the following constants:
```

### JavadocDeclaration
`@param fullText` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/principal/PrincipalQueryManager.java`
#### Snippet
```java
     * If there are no matching principals, an empty iterator is returned.
     * @param simpleFilter
     * @param fullText
     * @param searchType Any of the following constants:
     * <ul>
```

### JavadocDeclaration
`@param a` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/util/PasswordUtil.java`
#### Snippet
```java
     * make sure an attacker can not use a timing attack.
     *
     * @param a
     * @param b
     * @return true if both parameters contain the same data.
```

### JavadocDeclaration
`@param b` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/util/PasswordUtil.java`
#### Snippet
```java
     *
     * @param a
     * @param b
     * @return true if both parameters contain the same data.
     */
```

### JavadocDeclaration
`@param a` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/privilege/PrivilegeBits.java`
#### Snippet
```java
         * Add the diff between the specified Data a and b.
         *
         * @param a
         * @param b
         */
```

### JavadocDeclaration
`@param b` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/privilege/PrivilegeBits.java`
#### Snippet
```java
         *
         * @param a
         * @param b
         */
        private void addDifference(Data a, Data b) {
```

### JavadocDeclaration
`@param other` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/privilege/PrivilegeBits.java`
#### Snippet
```java
         * Subtract the other Data from this instance.
         *
         * @param other
         */
        private void diff(Data other) {
```

### JavadocDeclaration
`@param other` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/privilege/PrivilegeBits.java`
#### Snippet
```java
         * Add the other Data to this instance.
         *
         * @param other
         */
        private void add(Data other) {
```

### JavadocDeclaration
`@param otherBits` tag description is missing
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/privilege/PrivilegeBits.java`
#### Snippet
```java
     * {@code otherBits} are present in this instance.
     *
     * @param otherBits
     * @return {@code true} if all privileges defined by the specified
     *         {@code otherBits} are included in this instance; {@code false}
```

### JavadocDeclaration
Javadoc pointing to itself
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/AbstractLoginModule.java`
#### Snippet
```java
     * Note, that this implementation is not able to only remove those principals/credentials that have been added
     * by {@code this} very login module instance. Therefore subclasses should overwrite this method to provide a fully
     * compliant solution of {@link #logout()}. They may however take advantage of {@link #logout(Set, Set)}
     * in order to simplify the implementation of a logout that is compatible with the {@link LoginModule#logout()}
     * contract incorporating the additional recommendations highlighted at
```

### JavadocDeclaration
`@param arguments` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/GCMonitor.java`
#### Snippet
```java
     * Informal notification on the progress of garbage collection.
     * @param message  The message with {} place holders for the {@code arguments}
     * @param arguments
     */
    void info(String message, Object... arguments);
```

### JavadocDeclaration
`@param arguments` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/GCMonitor.java`
#### Snippet
```java
     * A garbage collection cycle is skipped for a specific {@code reason}.
     * @param reason  The reason with {} place holders for the {@code arguments}
     * @param arguments
     */
    void skipped(String reason, Object... arguments);
```

### JavadocDeclaration
`@param arguments` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/GCMonitor.java`
#### Snippet
```java
     * garbage collection process but does not prevent the process from running.
     * @param message  The message with {} place holders for the {@code arguments}
     * @param arguments
     */
    void warn(String message, Object... arguments);
```

### JavadocDeclaration
`@param message` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/GCMonitor.java`
#### Snippet
```java
    /**
     * An error caused the garbage collection process to terminate prematurely.
     * @param message
     * @param exception
     */
```

### JavadocDeclaration
`@param exception` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/GCMonitor.java`
#### Snippet
```java
     * An error caused the garbage collection process to terminate prematurely.
     * @param message
     * @param exception
     */
    void error(String message, Exception exception);
```

### JavadocDeclaration
`@param log` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/LoggingGCMonitor.java`
#### Snippet
```java
    /**
     * New instance logging to {@code log}
     * @param log
     */
    public LoggingGCMonitor(Logger log) {
```

### JavadocDeclaration
`@param gcMonitors` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/DelegatingGCMonitor.java`
#### Snippet
```java
    /**
     * New instance with an initial set of delegates (which cannot be unregistered).
     * @param gcMonitors
     */
    public DelegatingGCMonitor(@NotNull Collection<? extends GCMonitor> gcMonitors) {
```

### JavadocDeclaration
`@param gcMonitor` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/gc/DelegatingGCMonitor.java`
#### Snippet
```java
    /**
     * Register a {@link GCMonitor}.
     * @param gcMonitor
     * @return  a {@link Registration} instance, which removes the registered
     *          {@code GCMonitor} instance when called.
```

### JavadocDeclaration
`@param async` tag description is missing
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/benchmark/util/ElasticGlobalInitializer.java`
#### Snippet
```java
     * will set the {@code async} property to the provided value
     *
     * @param async
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/benchmark/util/ElasticGlobalInitializer.java`
#### Snippet
```java
     *
     * @param async
     * @return
     */
    public ElasticGlobalInitializer async(@NotNull final String async) {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/benchmark/util/ElasticGlobalInitializer.java`
#### Snippet
```java
     * set the {@code async} property to "async".
     *
     * @return
     */
    public ElasticGlobalInitializer async() {
```

### JavadocDeclaration
`@param name` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/AbstractCacheStats.java`
#### Snippet
```java
    /**
     * Create a new {@code CacheStatsMBean} for a cache with the given {@code name}.
     * @param name
     */
    protected AbstractCacheStats(@NotNull String name) {
```

### JavadocDeclaration
`@param customLog` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * null, will be then used for tracking down times
     *
     * @param customLog
     * @param clazz
     */
```

### JavadocDeclaration
`@param clazz` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     *
     * @param customLog
     * @param clazz
     */
    public StopwatchLogger(@Nullable final Logger customLog, @NotNull final String clazz) {
```

### JavadocDeclaration
`@param message` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * track of an intermediate time without stopping the ticking.
     * 
     * @param message
     */
    public void split(@Nullable final String message) {
```

### JavadocDeclaration
`@param message` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * track the time and stop the clock.
     * 
     * @param message
     */
    public void stop(@Nullable final String message) {
```

### JavadocDeclaration
`@param customLog` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * null, will be then used for tracking down times
     * 
     * @param customLog
     * @param clazz
     */
```

### JavadocDeclaration
`@param clazz` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * 
     * @param customLog
     * @param clazz
     */
    public StopwatchLogger(@Nullable final Logger customLog, @NotNull final Class<?> clazz) {
```

### JavadocDeclaration
`@param clazz` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * Create a class with the provided class.
     * 
     * @param clazz
     */
    public StopwatchLogger(@NotNull final String clazz) {
```

### JavadocDeclaration
`@param clazz` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/stats/StopwatchLogger.java`
#### Snippet
```java
     * instantiate a class with the provided class
     * 
     * @param clazz
     */
    public StopwatchLogger(@NotNull final Class<?> clazz) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/commons/jmx/AbstractCheckpointMBean.java`
#### Snippet
```java
     * @return composite data representation of the fields associated with the
     * checkpoint
     * @throws OpenDataException
     */
    protected final CompositeDataSupport toCompositeData(String id, String created, String expires,
```

### JavadocDeclaration
`@param tab` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/commons/jmx/AbstractCheckpointMBean.java`
#### Snippet
```java
     * format.
     *
     * @param tab
     * @throws OpenDataException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/commons/jmx/AbstractCheckpointMBean.java`
#### Snippet
```java
     *
     * @param tab
     * @throws OpenDataException
     */
    protected abstract void collectCheckpoints(TabularDataSupport tab) throws OpenDataException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
     *             - Repository admin username (optional)
     *             - Repository admin password
     * @throws IOException
     */
    public static void main(String args[]) throws IOException {
```

### JavadocDeclaration
`@param seed` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Traces.java`
#### Snippet
```java
    /**
     * Set the seed used to randomly pick paths
     * @param seed
     */
    void setSeed(long seed) {}
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Traces.java`
#### Snippet
```java
    /**
     * Set the path to the node from where to start tracing.
     * @param path
     * @see BreadthFirstTrace
     * @see DepthFirstTrace
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Traces.java`
#### Snippet
```java
     * @param segmentCacheSize   size of the segment cache in MB
     * @param output             output file where the trace is written to
     * @throws IOException
     */
    abstract void collectIOTrace(
```

### JavadocDeclaration
`@param depth` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Traces.java`
#### Snippet
```java
    /**
     * Set the maximal depth
     * @param depth
     * @see BreadthFirstTrace
     * @see DepthFirstTrace
```

### JavadocDeclaration
`@param count` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Traces.java`
#### Snippet
```java
    /**
     * Set the number of paths to trace
     * @param count
     */
    void setCount(int count) {}
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Traces.java`
#### Snippet
```java
     * Set the paths to trace
     * @param paths  file containing a paths per line
     * @throws IOException
     * @see RandomAccessTrace
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
     * @param key the key
     * @return the value
     * @throws ExecutionException
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
     * @param key the key
     * @return the value
     * @throws UncheckedExecutionException
     */
    @Override
```

### JavadocDeclaration
`@param dsType` tag description is missing
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
         * @param line   can be either of the format b47b...#12311,/a/b/c or
         *               b47b...#12311
         * @param dsType
         * @return In case of ref dump, concatanated encoded blob ref in a
         * format understood by backing datastore impl and the path
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/BackgroundObserver.java`
#### Snippet
```java
    
    /** FOR TESTING ONLY 
     * @throws InterruptedException **/
    boolean waitUntilStopped(int timeout, TimeUnit unit) throws InterruptedException {
        long done = System.currentTimeMillis() + unit.toMillis(timeout);
```

### JavadocDeclaration
`@param handler` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/CompositeConflictHandler.java`
#### Snippet
```java
     * Add a new backing conflict handler. The new handler takes precedence
     * over all currently installed handlers.
     * @param handler
     * @return this
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/Conversions.java`
#### Snippet
```java
     * @param value  The string to convert
     * @return  A converter for {@code value}
     * @throws NumberFormatException
     */
    public static Converter convert(final String value) {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/Conversions.java`
#### Snippet
```java
         * Convert to double. This default implementation is based on {@code Double.parseDouble(String)}.
         * @return  double representation of the converted value
         * @throws NumberFormatException
         */
        public double toDouble() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/Conversions.java`
#### Snippet
```java
         * Convert to long. This default implementation is based on {@code Long.parseLong(String)}.
         * @return  long representation of the converted value
         * @throws NumberFormatException
         */
        public long toLong() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/Conversions.java`
#### Snippet
```java
         * Convert to decimal. This default implementation is based on {@code new BigDecimal(String)}.
         * @return  decimal representation of the converted value
         * @throws NumberFormatException
         */
        public BigDecimal toDecimal() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeStore.java`
#### Snippet
```java
     * @param commitHook the commit hook to apply while merging changes
     * @return the node state resulting from the merge.
     * @throws CommitFailedException
     * @throws IllegalArgumentException if the builder is not acquired from a root state of
     *                                  this store
```

### JavadocDeclaration
`@param other` tag description is missing
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/AbstractBlob.java`
#### Snippet
```java
     * To {@code Blob} instances are considered equal iff they have the
     * same SHA-256 hash code  are equal.
     * @param other
     */
    @Override
```

### JavadocDeclaration
Javadoc pointing to itself
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeBuilder.java`
#### Snippet
```java
     * added, changed or removed, or a child node is added or removed. Changes
     * inside child nodes or the subtrees below are not reported. The default
     * implementation triggers an {@link #updated()} call on the root builder
     * (unless this is already the root builder), which subclasses can use
     * to capture aggregate update information across the whole tree.
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/DocViewImportHandler.java`
#### Snippet
```java
     * @return the decoded and valid jcr name or the original name if it is
     *         not encoded or if the resulting decoded name would be illegal.
     * @throws javax.jcr.RepositoryException
     */
    private NameInfo processName(NameInfo nameInfo) throws RepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/ItemDelegate.java`
#### Snippet
```java
     * Save the subtree rooted at this item.
     *
     * @throws RepositoryException
     */
    public void save() throws RepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/WorkspaceDelegate.java`
#### Snippet
```java
     * @param srcPath  oak path to the source node to copy
     * @param destPath  oak path to the destination
     * @throws RepositoryException
     */
    public void copy(@NotNull String srcPath, @NotNull String destPath) throws RepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     * @param destPath  oak path to the destination
     * @param transientOp  whether or not to perform the move in transient space
     * @throws RepositoryException
     */
    public void move(String srcPath, String destPath, boolean transientOp)
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     * @param <T>  return type of {@code sessionOperation}
     * @return  the result of {@code sessionOperation.perform()}
     * @throws RepositoryException
     * @see #getRoot()
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     *
     * @param sessionOperation  the {@code SessionOperation} to perform.
     * @throws RepositoryException
     * @see #perform(org.apache.jackrabbit.oak.jcr.session.operation.SessionOperation)
     */
```

### JavadocDeclaration
`@param ` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     * all access to the underlying session.
     * @param iterator  iterator to synchronized
     * @param <T>
     * @return  synchronized iterator
     */
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     * {@link javax.jcr.UnsupportedRepositoryOperationException} otherwise.
     *
     * @param path
     * @throws RepositoryException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     *
     * @param path
     * @throws RepositoryException
     */
    public void save(String path) throws RepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/delegate/SessionDelegate.java`
#### Snippet
```java
     * @return  the result of {@code sessionOperation.performNullable()}, which
     * might also be {@code null}.
     * @throws RepositoryException
     * @see #perform(org.apache.jackrabbit.oak.jcr.session.operation.SessionOperation)
     */
```

### JavadocDeclaration
`@param filter` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ChangeProcessor.java`
#### Snippet
```java
    /**
     * Set the filter for the events this change processor will generate.
     * @param filter
     */
    public void setFilterProvider(FilterProvider filter) {
```

### JavadocDeclaration
`@param info` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ChangeProcessor.java`
#### Snippet
```java
    /**
     * Utility method that extracts the ChangeSet from a CommitInfo if possible.
     * @param info
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ChangeProcessor.java`
#### Snippet
```java
     * Utility method that extracts the ChangeSet from a CommitInfo if possible.
     * @param info
     * @return
     */
    public static ChangeSet getChangeSet(CommitInfo info) {
```

### JavadocDeclaration
`@param changeSet` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ChangeProcessor.java`
#### Snippet
```java
    /**
     * Evaluate the prefilter for a given commit.
     * @param changeSet 
     * 
     * @return a FilterResult indicating either inclusion, exclusion or
```

### JavadocDeclaration
`@param whiteboard` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ObservationManagerImpl.java`
#### Snippet
```java
     *                         operates.
     * @param nodeTypeManager  node type manager for the content session
     * @param whiteboard
     * @throws IllegalArgumentException if {@code contentSession} doesn't implement {@code Observable}.
     */
```

### JavadocDeclaration
`@param parent` tag description is missing
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/SameNameSiblingsEditor.java`
#### Snippet
```java
     * Filter children of the given node using predicate and return the list of matching child names.
     *
     * @param parent
     * @param predicate
     * @return a list of names of children accepting the predicate
```

### JavadocDeclaration
`@param predicate` tag description is missing
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/SameNameSiblingsEditor.java`
#### Snippet
```java
     *
     * @param parent
     * @param predicate
     * @return a list of names of children accepting the predicate
     */
```

### JavadocDeclaration
`@param parent` tag description is missing
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/SameNameSiblingsEditor.java`
#### Snippet
```java
     * Check if there are SNS nodes under the given parent.
     *
     * @param parent
     * @return {@code true} if there are SNS children
     */
```

### JavadocDeclaration
`@param mixinNames` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
     * and adjusted the set of child items accordingly.
     *
     * @param mixinNames
     * @throws RepositoryException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/NodeImpl.java`
#### Snippet
```java
     *
     * @param mixinNames
     * @throws RepositoryException
     */
    @Override
```

### JavadocDeclaration
`@param index` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyState.java`
#### Snippet
```java
     * in the {@code org.apache.jackrabbit.oak.plugins.value.Conversions} class.
     * @param type target type
     * @param index
     * @param <T>
     * @return the value of this property at the given {@code index}
```

### JavadocDeclaration
`@param ` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyState.java`
#### Snippet
```java
     * @param type target type
     * @param index
     * @param <T>
     * @return the value of this property at the given {@code index}
     * @throws IndexOutOfBoundsException  if {@code index} is less than {@code 0} or
```

### JavadocDeclaration
`@param index` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyState.java`
#### Snippet
```java
    /**
     * The size of the value at the given {@code index}.
     * @param index
     * @return size of the value at the given {@code index}.
     * @throws IndexOutOfBoundsException  if {@code index} is less than {@code 0} or
```

### JavadocDeclaration
`@param ` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyState.java`
#### Snippet
```java
     * in the {@code org.apache.jackrabbit.oak.plugins.value.Conversions} class.
     * @param type target type
     * @param <T>
     * @return the value of this property
     * @throws IllegalStateException  if {@code type.isArray() == false} and
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/Root.java`
#### Snippet
```java
     * @return the associated ContentSession
     * 
     * @throws UnsupportedOperationException
     */
    @NotNull
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/QueryEngine.java`
#### Snippet
```java
     * @param mappings namespace prefix mappings
     * @return the list of bind variable names
     * @throws ParseException
     */
    List<String> getBindVariableNames(
```

### JavadocDeclaration
`@param index` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyValue.java`
#### Snippet
```java
     * exception is thrown.
     * @param type target type
     * @param index
     * @param <T>
     * @return the value of this object at the given {@code index}
```

### JavadocDeclaration
`@param ` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyValue.java`
#### Snippet
```java
     * @param type target type
     * @param index
     * @param <T>
     * @return the value of this object at the given {@code index}
     * @throws IndexOutOfBoundsException  if {@code index} is less than {@code 0} or
```

### JavadocDeclaration
`@param ` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyValue.java`
#### Snippet
```java
     * exception is thrown.
     * @param type target type
     * @param <T>
     * @return the value of this property
     * @throws IllegalStateException  if {@code type.isArray() == false} and
```

### JavadocDeclaration
`@param index` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/PropertyValue.java`
#### Snippet
```java
    /**
     * The size of the value at the given {@code index}.
     * @param index
     * @return size of the value at the given {@code index}.
     * @throws IndexOutOfBoundsException  if {@code index} is less than {@code 0} or
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/Blob.java`
#### Snippet
```java
    /**
     * Checks if the external blob is inlined in the id itself
     * @return
     */
    default boolean isInlined() {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
     * @param targetRoot root builder of the target store
     * @param uriToPrefix namespace URI to prefix mapping
     * @throws RepositoryException
     */
    private void copyNamespaces(
```

### JavadocDeclaration
`@param lifetime` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/CheckpointMBean.java`
#### Snippet
```java
     * Create a new checkpoint with the given {@code lifetime}.
     * See {@code org.apache.jackrabbit.oak.spi.state.NodeStore#checkpoint}
     * @param lifetime
     * @return the id of the newly created checkpoint
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/CheckpointMBean.java`
#### Snippet
```java
     * List the checkpoints that are currently present along with
     * its id, creation time and expiry time.
     * @return
     */
    TabularData listCheckpoints();
```

### JavadocDeclaration
`@param id` tag description is missing
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/CheckpointMBean.java`
#### Snippet
```java
     * Release the checkpoint with the given {@code id}.
     * See {@code org.apache.jackrabbit.oak.spi.state.NodeStore#checkpoint}
     * @param id
     * @return  {@code true} on success, {@code false} otherwise.
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/AggregateNodeSearcher.java`
#### Snippet
```java
     * @param context the execution context
     * @return the query object
     * @throws RepositoryException
     */
    protected Query getQuery(@NotNull QueryManager qm,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * 
         * @return the type
         * @throws RepositoryException
         */
        protected String getType() throws RepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * @param parentDir the parent dir of the file
         * @return the node
         * @throws RepositoryException
         * @throws UnsupportedRepositoryOperationException
         * @throws ValueFormatException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * @return the node
         * @throws RepositoryException
         * @throws UnsupportedRepositoryOperationException
         * @throws ValueFormatException
         * @throws VersionException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * @throws RepositoryException
         * @throws UnsupportedRepositoryOperationException
         * @throws ValueFormatException
         * @throws VersionException
         * @throws LockException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * @throws UnsupportedRepositoryOperationException
         * @throws ValueFormatException
         * @throws VersionException
         * @throws LockException
         * @throws ConstraintViolationException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * @throws ValueFormatException
         * @throws VersionException
         * @throws LockException
         * @throws ConstraintViolationException
         */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityBlobSearchSuite.java`
#### Snippet
```java
         * @throws VersionException
         * @throws LockException
         * @throws ConstraintViolationException
         */
        private Node putFile(String fileNamePrefix, String parentDir) throws RepositoryException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeRelationshipSuite.java`
#### Snippet
```java
         * @param user                 the user for who activities are to be created
         * @param activitiesParentNode the parent node for all the user activities
         * @throws RepositoryException
         */
        private void createActivities(Authorizable user, Node activitiesParentNode)
```

### JavadocDeclaration
`@param text` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
     *
     *
     * @param text
     * @param analyzer
     * @return
```

### JavadocDeclaration
`@param analyzer` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
     *
     * @param text
     * @param analyzer
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
     * @param text
     * @param analyzer
     * @return
     */
    static List<String> tokenize(String text, Analyzer analyzer) {
```

### JavadocDeclaration
`@param file` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
     * The method can return before {@code timeoutMillis} if it got interrupted. So, if required then the
     * caller should check using {@code isCopyInProgress} and wait again.
     * @param file
     * @param timeoutMillis
     */
```

### JavadocDeclaration
`@param timeoutMillis` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
     * caller should check using {@code isCopyInProgress} and wait again.
     * @param file
     * @param timeoutMillis
     */
    public void waitForCopyCompletion(LocalIndexFile file, long timeoutMillis) {
```

### JavadocDeclaration
`@param async` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneInitializerHelper.java`
#### Snippet
```java
     * will set the {@code async} property to the provided value
     *
     * @param async
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneInitializerHelper.java`
#### Snippet
```java
     *
     * @param async
     * @return
     */
    public LuceneInitializerHelper async(@NotNull final String async) {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneInitializerHelper.java`
#### Snippet
```java
    /**
     * set the {@code async} property to "async".
     * @return
     */
    public LuceneInitializerHelper async() {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
     *
     * @param oe order entry
     * @return
     */
    private static boolean isNativeSort(OrderEntry oe) {
```

### JavadocDeclaration
`@param bytes` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexSanityChecker.java`
#### Snippet
```java
        /**
         * Record the size of an index considered
         * @param bytes
         */
        public void addIndexSize (long bytes) {
```

### JavadocDeclaration
`@param pos` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexFile.java`
#### Snippet
```java
    /**
     * Seek current location of access to {@code pos}
     * @param pos
     * @throws IOException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexFile.java`
#### Snippet
```java
     * Seek current location of access to {@code pos}
     * @param pos
     * @throws IOException
     */
    void seek(long pos) throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexFile.java`
#### Snippet
```java
     * @param offset index into {@code b} where the copy begins
     * @param len numeber of bytes to be read from storage
     * @throws IOException
     */
    void readBytes(byte[] b, int offset, int len)
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexFile.java`
#### Snippet
```java
     * @param offset index into {@code b} where the copy begins
     * @param len numeber of bytes to be written to storage
     * @throws IOException
     */
    void writeBytes(byte[] b, int offset, int len)
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexFile.java`
#### Snippet
```java
     * Flushes the content into storage. Before calling this method, written
     * content only exist in memory
     * @throws IOException
     */
    void flush() throws IOException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileNodeStoreBuilder.java`
#### Snippet
```java
     * 
     * @return list of flat files
     * @throws IOException 
     * @throws CompositeException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileNodeStoreBuilder.java`
#### Snippet
```java
     * @return list of flat files
     * @throws IOException 
     * @throws CompositeException
     */
    private List<File> createdSortedStoreFiles() throws IOException, CompositeException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/DocumentStoreIndexerBase.java`
#### Snippet
```java
     *
     * @return an Instance of FlatFileStore, whose getFlatFileStorePath() method can be used to get the absolute path to this store.
     * @throws IOException
     * @throws CommitFailedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/DocumentStoreIndexerBase.java`
#### Snippet
```java
     * @return an Instance of FlatFileStore, whose getFlatFileStorePath() method can be used to get the absolute path to this store.
     * @throws IOException
     * @throws CommitFailedException
     */
    public FlatFileStore buildFlatFileStore() throws IOException, CommitFailedException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/DataStoreUtils.java`
#### Snippet
```java
     * @param config the datastore config
     * @param bucket the S3 bucket name / Azure container name
     * @throws Exception
     */
    public static void cleanup(File storeDir, Map<String, ?> config, String bucket) throws Exception {
```

### JavadocDeclaration
`@param store` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java

    /**
     * @param store
     * @param path
     * @throws CommitFailedException recursively deletes child nodes under path
```

### JavadocDeclaration
`@param path` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java
    /**
     * @param store
     * @param path
     * @throws CommitFailedException recursively deletes child nodes under path
     */
```

### JavadocDeclaration
`@param commandlineIndexPath` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java

    /**
     * @param commandlineIndexPath
     * @param repositoryIndexPath
     * @return true if repositoryIndexPath is child of commandlineIndexPath
```

### JavadocDeclaration
`@param repositoryIndexPath` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java
    /**
     * @param commandlineIndexPath
     * @param repositoryIndexPath
     * @return true if repositoryIndexPath is child of commandlineIndexPath
     */
```

### JavadocDeclaration
`@param nodeBuilder` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java

    /**
     * @param nodeBuilder
     * @param path        Path of node whose nodeBuilder object should be returned.
     * @return nodeBuilder object of node at @param{path}
```

### JavadocDeclaration
`@param commandlineIndexPath` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java

    /**
     * @param commandlineIndexPath
     * @param repositoryIndexPath
     * @return true if baseIndexName at  commandlineIndexPath and repositoryIndexPath are equal
```

### JavadocDeclaration
`@param repositoryIndexPath` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldVersionUtils.java`
#### Snippet
```java
    /**
     * @param commandlineIndexPath
     * @param repositoryIndexPath
     * @return true if baseIndexName at  commandlineIndexPath and repositoryIndexPath are equal
     */
```

### JavadocDeclaration
`@param reverseSortedIndexNameList` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/IndexVersionOperation.java`
#### Snippet
```java
    /**
     *
     * @param reverseSortedIndexNameList
     * @param parentPath
     * @param rootNode
```

### JavadocDeclaration
`@param parentPath` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/IndexVersionOperation.java`
#### Snippet
```java
     *
     * @param reverseSortedIndexNameList
     * @param parentPath
     * @param rootNode
     * @return Highest versioned active index's IndexName
```

### JavadocDeclaration
`@param rootNode` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/IndexVersionOperation.java`
#### Snippet
```java
     * @param reverseSortedIndexNameList
     * @param parentPath
     * @param rootNode
     * @return Highest versioned active index's IndexName
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldIndexVersion.java`
#### Snippet
```java
     * @param indexPaths            the index path or parent path
     * @param shouldPurgeBaseIndex  If set to true, will apply purge operations on active base index i.e. DELETE or DELETE_HIDDEN_AND_DISABLE
     * @throws IOException
     * @throws CommitFailedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldIndexVersion.java`
#### Snippet
```java
     * @param shouldPurgeBaseIndex  If set to true, will apply purge operations on active base index i.e. DELETE or DELETE_HIDDEN_AND_DISABLE
     * @throws IOException
     * @throws CommitFailedException
     */
    public void execute(NodeStore nodeStore, boolean isReadWriteRepository, long purgeThresholdMillis, List<String> indexPaths, boolean shouldPurgeBaseIndex) throws
```

### JavadocDeclaration
`@param indexPathSet` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldIndexVersion.java`
#### Snippet
```java

    /**
     * @param indexPathSet
     * @return a map with baseIndexName as key and a set of indexpaths having same baseIndexName
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldIndexVersion.java`
#### Snippet
```java
     * @param purgeThresholdMillis  the threshold of time length since last time index time to determine, will purge if exceed that
     * @param indexPaths            the index path or parent path
     * @throws IOException
     * @throws CommitFailedException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/PurgeOldIndexVersion.java`
#### Snippet
```java
     * @param indexPaths            the index path or parent path
     * @throws IOException
     * @throws CommitFailedException
     */
    public void execute(NodeStore nodeStore, boolean isReadWriteRepository, long purgeThresholdMillis, List<String> indexPaths) throws
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/PrincipalPolicyImporter.java`
#### Snippet
```java
         * @param prop The prop info containing the effective path.
         * @return An empty string if the text value of the given property info is "." or the text value otherwise.
         * @throws RepositoryException
         */
        private String extractEffectivePath(@NotNull PropInfo prop) throws RepositoryException {
```

### JavadocDeclaration
`@param mixinNames` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
    /**
     *
     * @param mixinNames
     * @throws NoSuchNodeTypeException
     * @throws VersionException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
     *
     * @param mixinNames
     * @throws NoSuchNodeTypeException
     * @throws VersionException
     * @throws ConstraintViolationException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
     * @param mixinNames
     * @throws NoSuchNodeTypeException
     * @throws VersionException
     * @throws ConstraintViolationException
     * @throws LockException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
     * @throws NoSuchNodeTypeException
     * @throws VersionException
     * @throws ConstraintViolationException
     * @throws LockException
     * @throws RepositoryException
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
     * @throws VersionException
     * @throws ConstraintViolationException
     * @throws LockException
     * @throws RepositoryException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
     * @throws ConstraintViolationException
     * @throws LockException
     * @throws RepositoryException
     */
    void setMixins(String[] mixinNames)
```

### JavadocDeclaration
`@param newName` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
    /**
     * 
     * @param newName
     * @throws javax.jcr.RepositoryException
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/JackrabbitNode.java`
#### Snippet
```java
     * 
     * @param newName
     * @throws javax.jcr.RepositoryException
     */
    void rename(String newName) throws RepositoryException;
```

### JavadocDeclaration
`@param enabled` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/stats/QueryStat.java`
#### Snippet
```java
     * Enables/Disables the service
     * 
     * @param enabled
     */
    void setEnabled(boolean enabled);
```

### JavadocDeclaration
`@param domainOverrideIgnored` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/binary/BinaryDownloadOptions.java`
#### Snippet
```java
         * (e.g. CDN domain).
         *
         * @param domainOverrideIgnored
         * @return The calling instance.
         */
```

### JavadocDeclaration
`@param simpleFilter` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/security/principal/PrincipalManager.java`
#### Snippet
```java
     * If there are no matching principals, an empty iterator is returned.
     *
     * @param simpleFilter
     * @param searchType Any of the following constants:
     * <ul>
```

### JavadocDeclaration
`@param simpleFilter` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/security/principal/PrincipalManager.java`
#### Snippet
```java
     * If there are no matching principals, an empty iterator is returned.
     *
     * @param simpleFilter
     * @return a <code>PrincipalIterator</code> over the <code>Principal</code>s
     * matching the given filter.
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/management/DataStoreGarbageCollector.java`
#### Snippet
```java
     * collector scans the repository using the JCR API starting from the root node.
     *
     * @throws RepositoryException
     */
    void mark() throws RepositoryException;
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/management/DataStoreGarbageCollector.java`
#### Snippet
```java
     *
     * @return the number of deleted items
     * @throws RepositoryException
     */
    int sweep() throws RepositoryException;
```

### JavadocDeclaration
`@param numberOfNodes` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/OrderedIndexBaseTest.java`
#### Snippet
```java
     * insert a {@code numberOfNode} random nodes in the repository
     * 
     * @param numberOfNodes
     */
    void insertRandomNodes(int numberOfNodes) {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/util/MimeType.java`
#### Snippet
```java
    /**
     * retrieve the string representation of the current Mime-Type
     * @return
     */
    public String getValue() {
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/util/MimeType.java`
#### Snippet
```java
    /**
     * retrieve a random Mime-Type from the available collection
     * @return
     */
    public static MimeType randomMimeType() {
```

### JavadocDeclaration
`@param benchmarks` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilitySuite.java`
#### Snippet
```java
     * Adds the benchmarks to run.
     *
     * @param benchmarks
     * @return
     */
```

### JavadocDeclaration
`@return` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilitySuite.java`
#### Snippet
```java
     *
     * @param benchmarks
     * @return
     */
    ScalabilitySuite addBenchmarks(ScalabilityBenchmark... benchmarks);
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/ScalabilityBenchmark.java`
#### Snippet
```java
     * @param credentials the credentials
     * @param context the execution context
     * @throws Exception
     */
    public abstract void execute(Repository repository, Credentials credentials,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/AbstractExternalTest.java`
#### Snippet
```java
     * Remove any user/group accounts that have been synchronized into the repo.
     *
     * @throws Exception
     */
    @Override
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * Setup any options before the benchmarks.
     * 
     * @throws Exception
     */
    protected void beforeSuite() throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * 
     * @param benchmark the benchmark to execute
     * @throws Exception 
     */
    protected abstract void executeBenchmark(ScalabilityBenchmark benchmark,
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * Cleanup after the benchmarks are run.
     * 
     * @throws Exception
     */
    protected void afterSuite() throws Exception {}
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * Shutdown the background threads.
     * 
     * @throws InterruptedException
     */
    protected void shutdownBackgroundJobs() throws InterruptedException {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * 
     * @param increment the current iteration's increment
     * @throws Exception
     */
    private void setupIteration(String increment) throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * 
     * @param context the execution context
     * @throws Exception 
     */
    private void runIteration(ExecutionContext context) throws Exception {
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * Post processing for the iteration.
     * 
     * @throws InterruptedException
     * @throws Exception
     */
```

### JavadocDeclaration
`@throws` tag description is missing
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
     * 
     * @throws InterruptedException
     * @throws Exception
     */
    private void tearDownIteration() throws Exception {
```

### JavadocDeclaration
`@param archiveName` tag description is missing
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureArchiveManager.java`
#### Snippet
```java
    /**
     * Check if there's a valid 0000. segment in the archive
     * @param archiveName
     * @return true if the archive is empty (no 0000.* segment)
     */
```

## RuleId[id=FieldMayBeFinal]
### FieldMayBeFinal
Field `queue` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/cloud/CloudBlobStore.java`
#### Snippet
```java

        private PageSet<? extends StorageMetadata> set;
        private ArrayDeque<String> queue;

        public CloudStoreIterator(org.jclouds.blobstore.BlobStore store,
```

### FieldMayBeFinal
Field `maxLastModifiedTime` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/cloud/CloudBlobStore.java`
#### Snippet
```java

        private org.jclouds.blobstore.BlobStore store;
        private long maxLastModifiedTime;

        private PageSet<? extends StorageMetadata> set;
```

### FieldMayBeFinal
Field `store` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/cloud/CloudBlobStore.java`
#### Snippet
```java
        private static final int BATCH = 1000;

        private org.jclouds.blobstore.BlobStore store;
        private long maxLastModifiedTime;

```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FileDataStoreService.java`
#### Snippet
```java
    private ServiceRegistration delegateReg;

    private Logger log = LoggerFactory.getLogger(getClass());

    @Override
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/AbstractDataStoreService.java`
#### Snippet
```java
    private Registration mbeanReg;

    private Logger log = LoggerFactory.getLogger(getClass());

    @Reference
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/InMemoryDataRecord.java`
#### Snippet
```java
     * Logger instance for this class
     */
    private static Logger log = LoggerFactory.getLogger(InMemoryDataRecord.class);

    /**
```

### FieldMayBeFinal
Field `domainOverrideIgnored` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadOptions.java`
#### Snippet
```java

public class DataRecordUploadOptions {
    private boolean domainOverrideIgnored;

    public static DataRecordUploadOptions fromBlobUploadOptions(@NotNull final BlobUploadOptions options) {
```

### FieldMayBeFinal
Field `length` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
     */
    class FSBackendDataRecord extends AbstractDataRecord {
        private long length;
        private long lastModified;
        private File file;
```

### FieldMayBeFinal
Field `lastModified` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
    class FSBackendDataRecord extends AbstractDataRecord {
        private long length;
        private long lastModified;
        private File file;

```

### FieldMayBeFinal
Field `file` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
        private long length;
        private long lastModified;
        private File file;

        public FSBackendDataRecord(AbstractSharedBackend backend,
```

### FieldMayBeFinal
Field `instanceId` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java

    /* Local instance identifier */
    private String instanceId = randomUUID().toString();

    private SharedDataStore datastore;
```

### FieldMayBeFinal
Field `interval` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
     */
    class SnapshotJob implements Runnable {
        private long interval;
        private Clock clock;

```

### FieldMayBeFinal
Field `clock` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
    class SnapshotJob implements Runnable {
        private long interval;
        private Clock clock;

        public SnapshotJob() {
```

### FieldMayBeFinal
Field `LOG` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadToken.java`
#### Snippet
```java
 */
public class DataRecordUploadToken {
    private static Logger LOG = LoggerFactory.getLogger(DataRecordUploadToken.class);

    private String blobId;
```

### FieldMayBeFinal
Field `uploadId` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadToken.java`
#### Snippet
```java

    private String blobId;
    private Optional<String> uploadId;

    /**
```

### FieldMayBeFinal
Field `blobId` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/directaccess/DataRecordUploadToken.java`
#### Snippet
```java
    private static Logger LOG = LoggerFactory.getLogger(DataRecordUploadToken.class);

    private String blobId;
    private Optional<String> uploadId;

```

### FieldMayBeFinal
Field `executor` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/migration/BlobMigration.java`
#### Snippet
```java
    private NodeStore nodeStore;

    private Executor executor = Executors.newSingleThreadExecutor();

    private BlobMigrator migrator;
```

### FieldMayBeFinal
Field `timestamps` may be 'final'
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/MemoryBlobStore.java`
#### Snippet
```java
    private HashMap<BlockId, byte[]> map = new HashMap<BlockId, byte[]>();
    private HashMap<BlockId, byte[]> old = new HashMap<BlockId, byte[]>();
    private HashMap<BlockId, Long> timestamps = new HashMap<BlockId, Long>();
    private boolean mark;

```

### FieldMayBeFinal
Field `LOG` may be 'final'
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractSharedBackend.java`
#### Snippet
```java
 */
public abstract class AbstractSharedBackend implements SharedBackend {
    private static Logger LOG = LoggerFactory.getLogger(AbstractSharedBackend.class);

    private static final String ALGORITHM = "HmacSHA1";
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/osgi/FileBlobStoreService.java`
#### Snippet
```java
    private ServiceRegistration reg;

    private Logger log = LoggerFactory.getLogger(getClass());

    @Activate
```

### FieldMayBeFinal
Field `blockBuffer` may be 'final'
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
     * large byte array each time a (potentially very small) binary is stored.
     */
    private AtomicReference<byte[]> blockBuffer = new AtomicReference<byte[]>();

    /**
```

### FieldMayBeFinal
Field `recoveryWaitTimeoutMS` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/RecoveryHandlerImpl.java`
#### Snippet
```java
     * another cluster node.
     */
    private long recoveryWaitTimeoutMS =
            Long.getLong("oak.recoveryWaitTimeoutMS", 60000);

```

### FieldMayBeFinal
Field `queue` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/PropertyHistory.java`
#### Snippet
```java
            PeekingIterator<Map.Entry<Revision, NodeDocument>> input
                    = Iterators.peekingIterator(docs.iterator());
            TreeMap<Revision, NodeDocument> queue =
                    new TreeMap<Revision, NodeDocument>(StableRevisionComparator.INSTANCE);

```

### FieldMayBeFinal
Field `input` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/PropertyHistory.java`
#### Snippet
```java
    private Iterator<NodeDocument> ensureOrder(final Iterable<Map.Entry<Revision, NodeDocument>> docs) {
        return new AbstractIterator<NodeDocument>() {
            PeekingIterator<Map.Entry<Revision, NodeDocument>> input
                    = Iterators.peekingIterator(docs.iterator());
            TreeMap<Revision, NodeDocument> queue =
```

### FieldMayBeFinal
Field `numCandidatesCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private CounterStats numDeletedCounter;
        private CounterStats totalSizeDeletedCounter;
        private CounterStats numCandidatesCounter;
        private CounterStats numBlobReferencesCounter;
        private CounterStats blobReferencesSizeCounter;
```

### FieldMayBeFinal
Field `finishFailureCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java

        private CounterStats startCounter;
        private CounterStats finishFailureCounter;
        private CounterStats numDeletedCounter;
        private CounterStats totalSizeDeletedCounter;
```

### FieldMayBeFinal
Field `numDeletedCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private CounterStats startCounter;
        private CounterStats finishFailureCounter;
        private CounterStats numDeletedCounter;
        private CounterStats totalSizeDeletedCounter;
        private CounterStats numCandidatesCounter;
```

### FieldMayBeFinal
Field `duration` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private CounterStats numBlobReferencesCounter;
        private CounterStats blobReferencesSizeCounter;
        private TimerStats duration;
        private final TimerStats markDuration;
        private final TimerStats sweepDuration;
```

### FieldMayBeFinal
Field `blobReferencesSizeCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private CounterStats numCandidatesCounter;
        private CounterStats numBlobReferencesCounter;
        private CounterStats blobReferencesSizeCounter;
        private TimerStats duration;
        private final TimerStats markDuration;
```

### FieldMayBeFinal
Field `checkConsistencyAfterGc` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java

    /** Flag to enable low cost consistency check after DSGC */
    private boolean checkConsistencyAfterGc;

    /* Flag to stop sweep if references not old enough */
```

### FieldMayBeFinal
Field `totalSizeDeletedCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private CounterStats finishFailureCounter;
        private CounterStats numDeletedCounter;
        private CounterStats totalSizeDeletedCounter;
        private CounterStats numCandidatesCounter;
        private CounterStats numBlobReferencesCounter;
```

### FieldMayBeFinal
Field `numBlobReferencesCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private CounterStats totalSizeDeletedCounter;
        private CounterStats numCandidatesCounter;
        private CounterStats numBlobReferencesCounter;
        private CounterStats blobReferencesSizeCounter;
        private TimerStats duration;
```

### FieldMayBeFinal
Field `startCounter` may be 'final'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        private final String typeName;

        private CounterStats startCounter;
        private CounterStats finishFailureCounter;
        private CounterStats numDeletedCounter;
```

### FieldMayBeFinal
Field `idx` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/BatchCommit.java`
#### Snippet
```java
                ops.add(op);
                result = new Callable<NodeDocument>() {
                    int idx = ops.size() - 1;
                    @Override
                    public NodeDocument call() throws Exception {
```

### FieldMayBeFinal
Field `journalPropertyHandlerFactory` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreService.java`
#### Snippet
```java
    private DocumentNodeStore nodeStore;
    private ObserverTracker observerTracker;
    private JournalPropertyHandlerFactory journalPropertyHandlerFactory = new JournalPropertyHandlerFactory();
    private Feature prefetchFeature;
    private Feature docStoreThrottlingFeature;
```

### FieldMayBeFinal
Field `persistentCacheStats` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBuilder.java`
#### Snippet
```java
    private ThrottlingStatsCollector throttlingStatsCollector;
    private DocumentNodeStoreStatsCollector nodeStoreStatsCollector;
    private Map<String, PersistentCacheStats> persistentCacheStats = new HashMap<>();
    private boolean bundlingDisabled;
    private JournalPropertyHandlerFactory journalPropertyHandlerFactory =
```

### FieldMayBeFinal
Field `sealed` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Document.java`
#### Snippet
```java
     * Whether this document is sealed (immutable data).
     */
    private AtomicBoolean sealed = new AtomicBoolean(false);

    /**
```

### FieldMayBeFinal
Field `localDiffMisses` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/TieredDiffCache.java`
#### Snippet
```java
     * the same revision vector range.
     */
    private Cache<RevisionsKey, RevisionsKey> localDiffMisses
            = CacheBuilder.newBuilder().maximumSize(128).build();

```

### FieldMayBeFinal
Field `stats` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalDiffLoader.java`
#### Snippet
```java
        private String changes = "";
        private final DiffCache cache;
        private Stats stats;

        WrappedDiffCache(Path path,
```

### FieldMayBeFinal
Field `longTimeInactives` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
     * anymore, so no need to check for backlog every time
     **/
    private Set<Integer> longTimeInactives = new HashSet<Integer>();

    /**
```

### FieldMayBeFinal
Field `MAX_ENTRY_SIZE` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LocalDiffCache.java`
#### Snippet
```java
     * Limit is arbitrary for now i.e. 16 MB. Same as in MongoDiffCache
     */
    private static int MAX_ENTRY_SIZE = 16 * 1024 * 1024;

    private final Cache<RevisionsKey, Diff> diffCache;
```

### FieldMayBeFinal
Field `nodeExistsAtHeadRevision` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/SplitOperations.java`
#### Snippet
```java
    private int numValues;
    private boolean hasBinaryToSplit;
    private Supplier<Boolean> nodeExistsAtHeadRevision;
    private Map<String, NavigableMap<Revision, String>> committedChanges;
    private Set<Revision> changes;
```

### FieldMayBeFinal
Field `concurrent` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java
    private boolean hasBranchCommits = false;

    private boolean concurrent;

    JournalEntry(DocumentStore store) {
```

### FieldMayBeFinal
Field `previousRanges` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java`
#### Snippet
```java
        //on property that all prevDoc id would starts <depth+2>:p/path/to/node
        return new AbstractIterator<NodeDocument>(){
            private Queue<Map.Entry<Revision, Range>> previousRanges =
                    Queues.newArrayDeque(getPreviousRanges().entrySet());
            @Override
```

### FieldMayBeFinal
Field `ds` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDataSourceFactory.java`
#### Snippet
```java
    private static class CloseableDataSource implements DataSource, Closeable {

        private DataSource ds;

        public CloseableDataSource(DataSource ds) {
```

### FieldMayBeFinal
Field `invisible` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
     * Flag to indicate this node is invisible to cluster view and thus recovery.
     */
    private boolean invisible;

    /**
```

### FieldMayBeFinal
Field `leaseFailureMargin` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
     * of 20sec then things are not good and we have to give up.
     */
    private long leaseFailureMargin = DEFAULT_LEASE_FAILURE_MARGIN_MILLIS;

    /**
```

### FieldMayBeFinal
Field `newEntry` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
     * reused
     */
    private boolean newEntry;

    /**
```

### FieldMayBeFinal
Field `store` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBVersionGCSupport.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(RDBVersionGCSupport.class);

    private RDBDocumentStore store;

    // 1: seek using historical, paging mode
```

### FieldMayBeFinal
Field `DATABASES` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBHelper.java`
#### Snippet
```java
public class RDBHelper {

    private static String[] DATABASES = { "Apache Derby", "DB2", "H2", "Microsoft SQL Server", "MySQL", "Oracle", "PostgreSQL",
            "default" };

```

### FieldMayBeFinal
Field `tablesToBeDropped` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
    protected String tnData;
    protected String tnMeta;
    private Set<String> tablesToBeDropped = new HashSet<String>();
    private boolean readOnly;

```

### FieldMayBeFinal
Field `results` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
        private RDBConnectionHandler ch;
        private static int BATCHSIZE = 1024 * 64;
        private List<String> results = new LinkedList<String>();
        private String lastId = null;
        private String metaTable;
```

### FieldMayBeFinal
Field `BATCHSIZE` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
        private long maxLastModifiedTime;
        private RDBConnectionHandler ch;
        private static int BATCHSIZE = 1024 * 64;
        private List<String> results = new LinkedList<String>();
        private String lastId = null;
```

### FieldMayBeFinal
Field `ch` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java

        private long maxLastModifiedTime;
        private RDBConnectionHandler ch;
        private static int BATCHSIZE = 1024 * 64;
        private List<String> results = new LinkedList<String>();
```

### FieldMayBeFinal
Field `maxLastModifiedTime` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
    private static class ChunkIdIterator extends AbstractIterator<String> {

        private long maxLastModifiedTime;
        private RDBConnectionHandler ch;
        private static int BATCHSIZE = 1024 * 64;
```

### FieldMayBeFinal
Field `metaTable` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
        private List<String> results = new LinkedList<String>();
        private String lastId = null;
        private String metaTable;

        public ChunkIdIterator(RDBConnectionHandler ch, long maxLastModifiedTime, String metaTable) {
```

### FieldMayBeFinal
Field `connectionMap` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBConnectionHandler.java`
#### Snippet
```java
    private final int LOGTHRESHOLD = 20;

    private ConcurrentMap<WeakReference<Connection>, ConnectionHolder> connectionMap = new ConcurrentHashMap<>();

    private void dumpConnectionMap(long ts) {
```

### FieldMayBeFinal
Field `GZIPSIG` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentSerializer.java`
#### Snippet
```java
    // low level operations

    private static byte[] GZIPSIG = { 31, -117 };

    private static String fromBlobData(byte[] bdata) {
```

### FieldMayBeFinal
Field `CSE` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/UTF8Encoder.java`
#### Snippet
```java
     * internals of {@link String#getBytes(String)}.
     */
    private static ThreadLocal<CharsetEncoder> CSE = new ThreadLocal<CharsetEncoder>() {
        @Override
        protected CharsetEncoder initialValue() {
```

### FieldMayBeFinal
Field `backgroundSweepThread` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * Sweep thread cleaning up uncommitted changes.
     */
    private Thread backgroundSweepThread;

    /**
```

### FieldMayBeFinal
Field `persistentCache` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
    private final boolean disableBranches;

    private PersistentCache persistentCache;

    private PersistentCache journalCache;
```

### FieldMayBeFinal
Field `fairBackgroundOperationLock` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * Use fair mode for background operation lock.
     */
    private boolean fairBackgroundOperationLock = SystemPropertySupplier.create("oak.fairBackgroundOperationLock", Boolean.TRUE)
            .loggingTo(LOG).get();

```

### FieldMayBeFinal
Field `purgeUncommittedRevisions` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * Batch size to purge uncommitted revisions & collisions on boot-up. The default value is 50.
     */
    private int purgeUncommittedRevisions = SystemPropertySupplier.create("oak.document.purgeUncommittedRevisions.batchSize", 50).loggingTo(LOG).get();

    private int changeSetMaxDepth = SystemPropertySupplier.create("oak.document.changeSet.maxDepth", 9).loggingTo(LOG).get();
```

### FieldMayBeFinal
Field `collisionGarbageBatchSize` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * How many collision entries to collect in a single call.
     */
    private int collisionGarbageBatchSize = SystemPropertySupplier.create("oak.documentMK.collisionGarbageBatchSize", 1000)
            .loggingTo(LOG).get();

```

### FieldMayBeFinal
Field `clusterUpdateThread` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     */
    @NotNull
    private Thread clusterUpdateThread;

    /**
```

### FieldMayBeFinal
Field `leaseUpdateThread` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     */
    @NotNull
    private Thread leaseUpdateThread;

    /**
```

### FieldMayBeFinal
Field `backgroundPurgeThread` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * Background thread performing purging of unmerged branch commits & collision markers
     */
    private Thread backgroundPurgeThread;

    /**
```

### FieldMayBeFinal
Field `INTERVAL_MS` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
        private long elapsedForPreviousRenewal  = -1;

        private static int INTERVAL_MS = 1000;
        private static int TOLERANCE_FOR_WARNING_MS = 2000;

```

### FieldMayBeFinal
Field `TOLERANCE_FOR_WARNING_MS` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java

        private static int INTERVAL_MS = 1000;
        private static int TOLERANCE_FOR_WARNING_MS = 2000;

        BackgroundLeaseUpdate(DocumentNodeStore nodeStore,
```

### FieldMayBeFinal
Field `disableSweep2` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java

    public static final String SYS_PROP_DISABLE_SWEEP2 = "oak.documentMK.disableSweep2";
    private boolean disableSweep2 = SystemPropertySupplier.create(SYS_PROP_DISABLE_SWEEP2, Boolean.FALSE).loggingTo(LOG)
            .get();

```

### FieldMayBeFinal
Field `disableJournalDiff` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * Feature flag to disable the journal diff mechanism. See OAK-4528.
     */
    private boolean disableJournalDiff = SystemPropertySupplier.create(SYS_PROP_DISABLE_JOURNAL, Boolean.FALSE).loggingTo(LOG)
            .get();

```

### FieldMayBeFinal
Field `cacheWarming` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
    private final Feature prefetchFeature;

    private CacheWarming cacheWarming;

    public DocumentNodeStore(DocumentNodeStoreBuilder<?> builder) {
```

### FieldMayBeFinal
Field `backgroundUpdateThread` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
     * Background thread performing updates of _lastRev entries.
     */
    private Thread backgroundUpdateThread;

    /**
```

### FieldMayBeFinal
Field `journalCache` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
    private PersistentCache persistentCache;

    private PersistentCache journalCache;

    private final DocumentNodeStoreMBean mbean;
```

### FieldMayBeFinal
Field `backgroundReadThread` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
    private volatile DocumentNodeState root;

    private Thread backgroundReadThread;

    /**
```

### FieldMayBeFinal
Field `DEFAULT` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MapFactory.java`
#### Snippet
```java
 */
public abstract class MapFactory {
    private static MapFactory DEFAULT = new MapFactory() {
        @Override
        public ConcurrentMap<Path, Revision> create() {
```

### FieldMayBeFinal
Field `pstart` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        private String message = null;
        private long cnt = 0;
        private long pstart;

        public ResultSetIterator(RDBConnectionHandler ch, RDBTableMetaData tmd, String minId, String maxId,
```

### FieldMayBeFinal
Field `tmd` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        private RDBConnectionHandler ch;
        private Connection connection;
        private RDBTableMetaData tmd;
        private PreparedStatement stmt;
        private ResultSet rs;
```

### FieldMayBeFinal
Field `ch` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
    private class ResultSetIterator implements Iterator<RDBRow>, Closeable {

        private RDBConnectionHandler ch;
        private Connection connection;
        private RDBTableMetaData tmd;
```

### FieldMayBeFinal
Field `changeDetector` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/bundlor/BundlingConfigHandler.java`
#### Snippet
```java
    private volatile BundledTypesRegistry registry = BundledTypesRegistry.NOOP;

    private Editor changeDetector = new SubtreeEditor(new DefaultEditor() {
        @Override
        public void leave(NodeState before, NodeState after) throws CommitFailedException {
```

### FieldMayBeFinal
Field `read` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/MultiGenerationMap.java`
#### Snippet
```java
    
    private volatile CacheMap<K, V> write;
    private ConcurrentSkipListMap<Integer, CacheMap<K, V>> read = 
            new ConcurrentSkipListMap<Integer, CacheMap<K, V>>();
    
```

### FieldMayBeFinal
Field `clusterNodes` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/memory/MemoryDocumentStore.java`
#### Snippet
```java
     * The 'clusterNodes' collection.
     */
    private ConcurrentSkipListMap<String, Document> clusterNodes =
            new ConcurrentSkipListMap<String, Document>();

```

### FieldMayBeFinal
Field `settings` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/memory/MemoryDocumentStore.java`
#### Snippet
```java
     * The 'settings' collection.
     */
    private ConcurrentSkipListMap<String, Document> settings =
            new ConcurrentSkipListMap<String, Document>();

```

### FieldMayBeFinal
Field `externalChanges` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/memory/MemoryDocumentStore.java`
#### Snippet
```java
     * The 'externalChanges' collection.
     */
    private ConcurrentSkipListMap<String, JournalEntry> externalChanges =
            new ConcurrentSkipListMap<String, JournalEntry>();

```

### FieldMayBeFinal
Field `nodes` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/memory/MemoryDocumentStore.java`
#### Snippet
```java
     * The 'nodes' collection.
     */
    private ConcurrentSkipListMap<String, NodeDocument> nodes =
            new ConcurrentSkipListMap<String, NodeDocument>();

```

### FieldMayBeFinal
Field `tsB` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCacheStats.java`
#### Snippet
```java
    private static class DifferenceTimeSeries implements TimeSeries {

        private TimeSeries tsA, tsB;

        DifferenceTimeSeries(TimeSeries tsA, TimeSeries tsB) {
```

### FieldMayBeFinal
Field `hit` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCacheStats.java`
#### Snippet
```java
    private static class PercentageTimeSeries implements TimeSeries {

        private TimeSeries hit, total;

        PercentageTimeSeries(TimeSeries hit, TimeSeries total) {
```

### FieldMayBeFinal
Field `tsA` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCacheStats.java`
#### Snippet
```java
    private static class DifferenceTimeSeries implements TimeSeries {

        private TimeSeries tsA, tsB;

        DifferenceTimeSeries(TimeSeries tsA, TimeSeries tsB) {
```

### FieldMayBeFinal
Field `total` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCacheStats.java`
#### Snippet
```java
    private static class PercentageTimeSeries implements TimeSeries {

        private TimeSeries hit, total;

        PercentageTimeSeries(TimeSeries hit, TimeSeries total) {
```

### FieldMayBeFinal
Field `config` may be 'final'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/PoolableUnboundConnectionFactory.java`
#### Snippet
```java
     * configuration object for the connection
     */
    private LdapConnectionConfig config;

    /**
```

### FieldMayBeFinal
Field `cnUpdates` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    // keeping track of CLUSTER_NODES updates
    private Map<String, Long> cnUpdates = new ConcurrentHashMap<String, Long>();

    private <T extends Document> void maintainUpdateStats(Collection<T> collection, String key) {
```

### FieldMayBeFinal
Field `returned` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
        return new MyCloseableIterable<T>() {

            Set<Iterator<RDBRow>> returned = Sets.newHashSet();

            @Override
```

### FieldMayBeFinal
Field `TABLENAMES` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    // table names
    private static Map<Collection<? extends Document>, String> TABLEMAP;
    private static List<String> TABLENAMES;
    static {
        Map<Collection<? extends Document>, String> tmp = new HashMap<Collection<? extends Document>, String>();
```

### FieldMayBeFinal
Field `TABLEMAP` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    // table names
    private static Map<Collection<? extends Document>, String> TABLEMAP;
    private static List<String> TABLENAMES;
    static {
```

### FieldMayBeFinal
Field `tablesToBeDropped` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    // from options
    private Set<String> tablesToBeDropped = new HashSet<String>();

    // ratio between Java characters and UTF-8 encoding
```

### FieldMayBeFinal
Field `columnOnlyProperties` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
        private String schemaInfo = "";
        private String indexInfo = "";
        private Set<String> columnOnlyProperties = Collections.unmodifiableSet(COLUMNPROPERTIES);
        private Set<String> columnProperties = Collections.unmodifiableSet(COLUMNPROPERTIES);

```

### FieldMayBeFinal
Field `MINIMALBULKUPDATESIZE` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    }

    private static int MINIMALBULKUPDATESIZE = 3;

    private <T extends Document> List<T> internalCreateOrUpdate(Collection<T> collection, List<UpdateOp> updateOps) {
```

### FieldMayBeFinal
Field `caches` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
    private boolean asyncCache = true;
    private boolean asyncDiffCache = false;
    private HashMap<CacheType, GenerationCache> caches = 
            new HashMap<CacheType, GenerationCache>();
    
```

### FieldMayBeFinal
Field `writeBuffer` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
    private boolean manualCommit;
    private Broadcaster broadcaster;
    private ThreadLocal<WriteBuffer> writeBuffer = new ThreadLocal<WriteBuffer>();
    private final byte[] broadcastId;
    private DynamicBroadcastConfig broadcastConfig;
```

### FieldMayBeFinal
Field `ownKeyUUID` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/broadcast/TCPBroadcaster.java`
#### Snippet
```java
    private Thread sendThread;
    private String ownListener;
    private String ownKeyUUID = UUID.randomUUID().toString();
    private byte[] ownKey = ownKeyUUID.getBytes(UTF8);
    
```

### FieldMayBeFinal
Field `customAttributes` may be 'final'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
        private String idAttribute;

        private String[] customAttributes = {};

        private String extraFilter;
```

### FieldMayBeFinal
Field `bulkRetries` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
     * Default is 0 (no retries).
     */
    private int bulkRetries =
            Integer.getInteger("oak.mongo.bulkRetries", 0);

```

### FieldMayBeFinal
Field `bulkSize` may be 'final'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
     * Default is 30.
     */
    private int bulkSize =
            Integer.getInteger("oak.mongo.bulkSize", 30);

```

### FieldMayBeFinal
Field `func` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
    public static class TransformingComparator implements Comparator<String> {
        private Comparator<String> delegate;
        private Function<String, String> func;

        public TransformingComparator(Comparator<String> delegate, Function<String, String> func) {
```

### FieldMayBeFinal
Field `delegate` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/FileIOUtils.java`
#### Snippet
```java
     */
    public static class TransformingComparator implements Comparator<String> {
        private Comparator<String> delegate;
        private Function<String, String> func;

```

### FieldMayBeFinal
Field `UNITS` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
    private final Locale locale;

    private static TimeUnit[] UNITS = { TimeUnit.DAYS, TimeUnit.HOURS, TimeUnit.MINUTES, TimeUnit.SECONDS, TimeUnit.MILLISECONDS,
            TimeUnit.MICROSECONDS, TimeUnit.NANOSECONDS };
    private static Map<TimeUnit, String> DISPLAYUNIT;
```

### FieldMayBeFinal
Field `FOR_LOGGING` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
    }

    private static TimeDurationFormatter FOR_LOGGING = new TimeDurationFormatter(Locale.US, 2, false);

    /**
```

### FieldMayBeFinal
Field `DISPLAYUNIT` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
    private static TimeUnit[] UNITS = { TimeUnit.DAYS, TimeUnit.HOURS, TimeUnit.MINUTES, TimeUnit.SECONDS, TimeUnit.MILLISECONDS,
            TimeUnit.MICROSECONDS, TimeUnit.NANOSECONDS };
    private static Map<TimeUnit, String> DISPLAYUNIT;
    private static Map<TimeUnit, String> DISPLAYUNIT_ASCII;

```

### FieldMayBeFinal
Field `DISPLAYUNIT_ASCII` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
            TimeUnit.MICROSECONDS, TimeUnit.NANOSECONDS };
    private static Map<TimeUnit, String> DISPLAYUNIT;
    private static Map<TimeUnit, String> DISPLAYUNIT_ASCII;

    static {
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/PropertiesUtil.java`
#### Snippet
```java
public final class PropertiesUtil {

    private static Logger log = LoggerFactory.getLogger(PropertiesUtil.class);

    private PropertiesUtil() {}
```

### FieldMayBeFinal
Field `timestamps` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/DebugTimer.java`
#### Snippet
```java
    private static String[] units = {"ns", "us", "ms", "s"};

    private List<TimeStamp> timestamps = new LinkedList<TimeStamp>();

    private long now;
```

### FieldMayBeFinal
Field `units` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/DebugTimer.java`
#### Snippet
```java
public class DebugTimer {

    private static String[] units = {"ns", "us", "ms", "s"};

    private List<TimeStamp> timestamps = new LinkedList<TimeStamp>();
```

### FieldMayBeFinal
Field `props` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/json/JsonObject.java`
#### Snippet
```java
public class JsonObject {

    private Map<String, String> props;
    private Map<String, JsonObject> children;

```

### FieldMayBeFinal
Field `children` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/json/JsonObject.java`
#### Snippet
```java

    private Map<String, String> props;
    private Map<String, JsonObject> children;

    /**
```

### FieldMayBeFinal
Field `buff` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/json/JsopBuilder.java`
#### Snippet
```java
    private static final boolean JSON_NEWLINES = false;

    private StringBuilder buff = new StringBuilder();
    private boolean needComma;
    private int lineLength, previous;
```

### FieldMayBeFinal
Field `openedIterators` may be 'final'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/StringSort.java`
#### Snippet
```java
        private File sortedFile;
        private BufferedWriter writer;
        private List<CloseableIterator> openedIterators = new ArrayList<>();

        public PersistentState(Comparator<String> comparator) {
```

### FieldMayBeFinal
Field `billingMode` may be 'final'
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/DynamoDBProvisioningData.java`
#### Snippet
```java
    public static final DynamoDBProvisioningData DEFAULT = new DynamoDBProvisioningData(BillingMode.PAY_PER_REQUEST);

    private BillingMode billingMode;
    private Long journalTableProvisionedWcu;
    private Long journalTableProvisionedRcu;
```

### FieldMayBeFinal
Field `type` may be 'final'
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsToolUtils.java`
#### Snippet
```java
        TAR("TarMK Segment Store"), AWS("AWS Segment Store");

        private String type;

        SegmentStoreType(String type) {
```

### FieldMayBeFinal
Field `bucket` may be 'final'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
        private long length;
        private long lastModified;
        private String bucket;
        private boolean isMeta;
        private final S3RequestDecorator s3ReqDecorator;
```

### FieldMayBeFinal
Field `lastModified` may be 'final'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
        private AmazonS3Client s3service;
        private long length;
        private long lastModified;
        private String bucket;
        private boolean isMeta;
```

### FieldMayBeFinal
Field `isMeta` may be 'final'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
        private long lastModified;
        private String bucket;
        private boolean isMeta;
        private final S3RequestDecorator s3ReqDecorator;

```

### FieldMayBeFinal
Field `oldKey` may be 'final'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
    private class KeyRenameThread implements Runnable {

        private String oldKey;

        public void run() {
```

### FieldMayBeFinal
Field `length` may be 'final'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
    static class S3DataRecord extends AbstractDataRecord {
        private AmazonS3Client s3service;
        private long length;
        private long lastModified;
        private String bucket;
```

### FieldMayBeFinal
Field `s3service` may be 'final'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
     */
    static class S3DataRecord extends AbstractDataRecord {
        private AmazonS3Client s3service;
        private long length;
        private long lastModified;
```

### FieldMayBeFinal
Field `executor` may be 'final'
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsSegmentStoreMigrator.java`
#### Snippet
```java
    private final Integer revisionCount;

    private ExecutorService executor = Executors.newFixedThreadPool(READ_THREADS + 1);

    private AwsSegmentStoreMigrator(Builder builder) {
```

### FieldMayBeFinal
Field `provisioningData` may be 'final'
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/DynamoDBClient.java`
#### Snippet
```java
    private final Table journalTable;
    private final String lockTableName;
    private DynamoDBProvisioningData provisioningData;

    public DynamoDBClient(AmazonDynamoDB ddb, String journalTableName, String lockTableName) {
```

### FieldMayBeFinal
Field `cacheStatsMBeans` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/cache/impl/CacheStatsMetrics.java`
#### Snippet
```java
            REQUEST, HIT, MISS, EVICTION, ELEMENT, LOAD_TIME);

    private Map<String, CacheStatsMBean> cacheStatsMBeans = Maps.newHashMap();
    private MetricRegistry registry = new MetricRegistry();

```

### FieldMayBeFinal
Field `maxFragmentSize` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SimpleExcerptProvider.java`
#### Snippet
```java
    private static final boolean CASE_SENSITIVE_HIGHLIGHT = Boolean.getBoolean("oak.query.caseSensitiveHighlight");

    private static int maxFragmentSize = 150;

    private SimpleExcerptProvider() {
```

### FieldMayBeFinal
Field `sql2Optimisation` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineSettings.java`
#### Snippet
```java
            DEFAULT_FULL_TEXT_COMPARISON_WITHOUT_INDEX;
    
    private boolean sql2Optimisation = 
            Boolean.parseBoolean(System.getProperty(SQL2_OPTIMISATION_FLAG, "true"));

```

### FieldMayBeFinal
Field `constraint` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/NotImpl.java`
#### Snippet
```java
public class NotImpl extends ConstraintImpl {

    private ConstraintImpl constraint;

    public NotImpl(ConstraintImpl constraint) {
```

### FieldMayBeFinal
Field `right` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
            it = new MeasuringIterator(this, it) {
                MeasuringIterator left = (MeasuringIterator) leftRows;
                MeasuringIterator right = (MeasuringIterator) rightRows;

                @Override
```

### FieldMayBeFinal
Field `size` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private long size = -1;
    private final QueryEngineSettings settings;
    private boolean isInternal;
```

### FieldMayBeFinal
Field `left` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
            // return the measuring iterator for the union
            it = new MeasuringIterator(this, it) {
                MeasuringIterator left = (MeasuringIterator) leftRows;
                MeasuringIterator right = (MeasuringIterator) rightRows;

```

### FieldMayBeFinal
Field `allJoinConditions` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
     * The join conditions are added during the init phase.
     */
    private ArrayList<JoinConditionImpl> allJoinConditions =
            new ArrayList<JoinConditionImpl>();

```

### FieldMayBeFinal
Field `namePathMapper` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
    private boolean supportSQL1;

    private NamePathMapper namePathMapper;
    
    private final QueryEngineSettings settings;
```

### FieldMayBeFinal
Field `delegate` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
     */
    abstract static class MeasuringIterator extends AbstractIterator<ResultRowImpl> {
        private Iterator<ResultRowImpl> delegate;
        private Query query;
        private List<ResultRowImpl> results;
```

### FieldMayBeFinal
Field `results` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
        private Iterator<ResultRowImpl> delegate;
        private Query query;
        private List<ResultRowImpl> results;
        private boolean init;

```

### FieldMayBeFinal
Field `query` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
    abstract static class MeasuringIterator extends AbstractIterator<ResultRowImpl> {
        private Iterator<ResultRowImpl> delegate;
        private Query query;
        private List<ResultRowImpl> results;
        private boolean init;
```

### FieldMayBeFinal
Field `jcrSystemNS` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/name/NamespaceEditor.java`
#### Snippet
```java
    }

    private static Set<String> jcrSystemNS = ImmutableSet.of(PREFIX_JCR,
            PREFIX_NT, PREFIX_MIX, NamespaceConstants.PREFIX_SV);

```

### FieldMayBeFinal
Field `editorProvider` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexerMBeanImpl.java`
#### Snippet
```java
    private AsyncIndexInfoService asyncIndexInfoService;

    private WhiteboardIndexEditorProvider editorProvider = new WhiteboardIndexEditorProvider();
    private Registration mbeanReg;
    private Tracker<IndexImporterProvider> providerTracker;
```

### FieldMayBeFinal
Field `selectors` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
    private ArrayList<String> expected;
    private Selector currentSelector = new Selector();
    private ArrayList<Selector> selectors = new ArrayList<Selector>();

    private final QueryEngineSettings settings;
```

### FieldMayBeFinal
Field `matchesAllTypes` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
    private final Filter filter;

    private boolean matchesAllTypes;

    private boolean matchesNodeTypes;
```

### FieldMayBeFinal
Field `matchesNodeTypes` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
    private boolean matchesAllTypes;

    private boolean matchesNodeTypes;

    private final double cost;
```

### FieldMayBeFinal
Field `statisticsProvider` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
            private final HistogramStats indexedNodePerCycleHisto;
            private final CounterStats lastIndexedTime;
            private StatisticsProvider statisticsProvider;

            private final String[] names = {"Executions", "Nodes"};
```

### FieldMayBeFinal
Field `ERROR_WARN_INTERVAL` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
     * will be logged at 'debug' level
     */
    private static long ERROR_WARN_INTERVAL = TimeUnit.MINUTES.toMillis(Integer
            .getInteger("oak.async.warn.interval", 30));

```

### FieldMayBeFinal
Field `registeredTasks` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
        private String lastReferencedCp;

        private Set<String> registeredTasks = newHashSet();

        void registerSplit(Set<String> paths, String newIndexTaskName) {
```

### FieldMayBeFinal
Field `seenPaths` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/aggregate/AggregationCursor.java`
#### Snippet
```java
     * should enforce uniqueness of the aggregated paths
     */
    private Set<String> seenPaths = new HashSet<String>();

    public AggregationCursor(Cursor cursor, QueryIndex.NodeAggregator aggregator,
```

### FieldMayBeFinal
Field `it` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/strategy/UniqueEntryStoreStrategy.java`
#### Snippet
```java
                    return new Iterator<T>() {
                        
                        Iterator<? extends ChildNodeEntry> it = index.getChildNodeEntries().iterator();
                        
                        @Override
```

### FieldMayBeFinal
Field `dataStoreBlobId` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/datastore/DataStoreTextWriter.java`
#### Snippet
```java
     * stripped of
     */
    private boolean dataStoreBlobId = true;

    private final boolean readOnlyMode;
```

### FieldMayBeFinal
Field `directory` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/datastore/DataStoreTextWriter.java`
#### Snippet
```java

    private static final Logger log = LoggerFactory.getLogger(DataStoreTextWriter.class);
    private File directory;

    private final SetHolder emptyBlobsHolder;
```

### FieldMayBeFinal
Field `pathPrefix` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/strategy/ContentMirrorStoreStrategy.java`
#### Snippet
```java
        private boolean closed;
        private String filterPath;
        private String pathPrefix;
        private String parentPath;
        private String currentPath;
```

### FieldMayBeFinal
Field `store` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
    private AtomicReference<Clusterable> cluster = new AtomicReference<Clusterable>();

    private volatile AtomicReference<NodeStore> store = new AtomicReference<NodeStore>();    

    private volatile AtomicReference<ScheduledExecutorService> scheduler = new AtomicReference<ScheduledExecutorService>();
```

### FieldMayBeFinal
Field `cluster` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(AtomicCounterEditorProvider.class);

    private AtomicReference<Clusterable> cluster = new AtomicReference<Clusterable>();

    private volatile AtomicReference<NodeStore> store = new AtomicReference<NodeStore>();    
```

### FieldMayBeFinal
Field `scheduler` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java
    private volatile AtomicReference<NodeStore> store = new AtomicReference<NodeStore>();    

    private volatile AtomicReference<ScheduledExecutorService> scheduler = new AtomicReference<ScheduledExecutorService>();
    private volatile AtomicReference<Whiteboard> whiteboard = new AtomicReference<Whiteboard>();
    
```

### FieldMayBeFinal
Field `whiteboard` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/atomic/AtomicCounterEditorProvider.java`
#### Snippet
```java

    private volatile AtomicReference<ScheduledExecutorService> scheduler = new AtomicReference<ScheduledExecutorService>();
    private volatile AtomicReference<Whiteboard> whiteboard = new AtomicReference<Whiteboard>();
    
    private final Supplier<Clusterable> clusterSupplier;
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/ConflictValidator.java`
#### Snippet
```java
 */
public class ConflictValidator extends DefaultValidator {
    private static Logger log = LoggerFactory.getLogger(ConflictValidator.class);

    /**
```

### FieldMayBeFinal
Field `regs` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/metric/StatisticsProviderFactory.java`
#### Snippet
```java
    
    private StatisticsProvider statisticsProvider;
    private List<ServiceRegistration> regs = Lists.newArrayList();
    private ScheduledExecutorService executor;
    private BundleContext bundleContext;
```

### FieldMayBeFinal
Field `commitInfo` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/version/VersionEditor.java`
#### Snippet
```java
    private NodeState after;
    private boolean isReadOnly;
    private CommitInfo commitInfo;

    public VersionEditor(@NotNull NodeBuilder versionStore,
```

### FieldMayBeFinal
Field `nodes` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/report/PeriodicReporter.java`
#### Snippet
```java
    private final int propertyLogInterval;

    private AtomicLong nodes = new AtomicLong(0);

    private AtomicLong properties = new AtomicLong(0);
```

### FieldMayBeFinal
Field `properties` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/report/PeriodicReporter.java`
#### Snippet
```java
    private AtomicLong nodes = new AtomicLong(0);

    private AtomicLong properties = new AtomicLong(0);

    protected PeriodicReporter(final int nodeLogInterval, final int propertyLogInterval) {
```

### FieldMayBeFinal
Field `nodeState` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/AbstractDecoratedNodeState.java`
#### Snippet
```java
        private final NodeStateDiff diff;

        private AbstractDecoratedNodeState nodeState;

        private DecoratingDiff(final NodeStateDiff diff, final AbstractDecoratedNodeState nodeState) {
```

### FieldMayBeFinal
Field `EXCEPTION_ON_BLOCK` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/CommitRateLimiter.java`
#### Snippet
```java
            new ThreadLocal<AtomicInteger>();
    
    private static boolean EXCEPTION_ON_BLOCK = 
            Boolean.getBoolean("oak.commitRateLimiter.exceptionOnBlock");

```

### FieldMayBeFinal
Field `NON_BLOCKING_LEVEL` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/CommitRateLimiter.java`
#### Snippet
```java
    // (only updated by the current thread, so technically isn't necessary that
    // this is an AtomicInteger, but it's simpler to use it)
    private static ThreadLocal<AtomicInteger> NON_BLOCKING_LEVEL = 
            new ThreadLocal<AtomicInteger>();
    
```

### FieldMayBeFinal
Field `configuration` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/SecurityProviderImpl.java`
#### Snippet
```java
    private final WhiteboardUserAuthenticationFactory userAuthenticationFactory = new WhiteboardUserAuthenticationFactory(UserConfigurationImpl.getDefaultAuthenticationFactory());

    private ConfigurationParameters configuration;

    private Whiteboard whiteboard;
```

### FieldMayBeFinal
Field `repoPermission` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/RepoPolicyTreePermission.java`
#### Snippet
```java
final class RepoPolicyTreePermission implements TreePermission {

    private RepositoryPermission repoPermission;
    private ReadStatus readStatus;

```

### FieldMayBeFinal
Field `statisticsProvider` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/SecurityProviderRegistration.java`
#### Snippet
```java

    @Reference
    private StatisticsProvider statisticsProvider = StatisticsProvider.NOOP;
    private Closer closer;

```

### FieldMayBeFinal
Field `entries` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/PrincipalPermissionEntries.java`
#### Snippet
```java
     * map of permission entries, accessed by path
     */
    private Map<String, Collection<PermissionEntry>> entries = new HashMap<>();
    private final Map<String, Boolean> emptyPaths;

```

### FieldMayBeFinal
Field `MAX_SIZE` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/PrincipalPermissionEntries.java`
#### Snippet
```java
     * max size of the emptyPaths cache.
     */
    private static int MAX_SIZE = Integer.getInteger("oak.PrincipalPermissionEntries.maxSize", 1000);

    private final long expectedSize;
```

### FieldMayBeFinal
Field `deleted` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/PermissionHook.java`
#### Snippet
```java

    private Map<String, PermissionStoreEditor> modified = new HashMap<>();
    private Map<String, PermissionStoreEditor> deleted = new HashMap<>();

    public PermissionHook(@NotNull String workspaceName, @NotNull RestrictionProvider restrictionProvider,
```

### FieldMayBeFinal
Field `modified` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/PermissionHook.java`
#### Snippet
```java
    private TypePredicate isGrantACE;

    private Map<String, PermissionStoreEditor> modified = new HashMap<>();
    private Map<String, PermissionStoreEditor> deleted = new HashMap<>();

```

### FieldMayBeFinal
Field `restrictions` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/accesscontrol/AccessControlImporter.java`
#### Snippet
```java
        private Principal principal;
        private List<Privilege> privileges = new ArrayList<>();
        private Map<String, Value> restrictions = new HashMap<>();
        private Map<String, Value[]> mvRestrictions = new HashMap<>();

```

### FieldMayBeFinal
Field `mvRestrictions` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/accesscontrol/AccessControlImporter.java`
#### Snippet
```java
        private List<Privilege> privileges = new ArrayList<>();
        private Map<String, Value> restrictions = new HashMap<>();
        private Map<String, Value[]> mvRestrictions = new HashMap<>();

        private boolean ignore;
```

### FieldMayBeFinal
Field `privileges` may be 'final'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/accesscontrol/AccessControlImporter.java`
#### Snippet
```java

        private Principal principal;
        private List<Privilege> privileges = new ArrayList<>();
        private Map<String, Value> restrictions = new HashMap<>();
        private Map<String, Value[]> mvRestrictions = new HashMap<>();
```

### FieldMayBeFinal
Field `jndiConfig` may be 'final'
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/BootstrapConfig.java`
#### Snippet
```java
    private int startupTimeout = (int) TimeUnit.MINUTES.toSeconds(5); //Default 5 minute timeout

    private JNDIConfig jndiConfig = new JNDIConfig(this);

    private RMIConfig rmiConfig = new RMIConfig(this);
```

### FieldMayBeFinal
Field `rmiConfig` may be 'final'
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/BootstrapConfig.java`
#### Snippet
```java
    private JNDIConfig jndiConfig = new JNDIConfig(this);

    private RMIConfig rmiConfig = new RMIConfig(this);

    public void init(Properties props) throws ServletException {
```

### FieldMayBeFinal
Field `map` may be 'final'
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/AbstractConfig.java`
#### Snippet
```java
    protected boolean valid;

    private BeanMap map = new BeanMap(this);

    /**
```

### FieldMayBeFinal
Field `jndiEnv` may be 'final'
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/JNDIConfig.java`
#### Snippet
```java
    private final BootstrapConfig parentConfig;

    private Properties jndiEnv = new Properties();


```

### FieldMayBeFinal
Field `indexSimilarityStrings` may be 'final'
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java

    private boolean indexSimilarityBinaries;
    private boolean indexSimilarityStrings;

    /**
```

### FieldMayBeFinal
Field `indexSimilarityBinaries` may be 'final'
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java
            OrderEntry.Order.DESCENDING);

    private boolean indexSimilarityBinaries;
    private boolean indexSimilarityStrings;

```

### FieldMayBeFinal
Field `statisticsProvider` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreFactory.java`
#### Snippet
```java

    @Reference
    private StatisticsProvider statisticsProvider = StatisticsProvider.NOOP;

    private final Closer registrations = Closer.create();
```

### FieldMayBeFinal
Field `statisticsProvider` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreService.java`
#### Snippet
```java

    @Reference
    private StatisticsProvider statisticsProvider = StatisticsProvider.NOOP;

    private final Closer closer = Closer.create();
```

### FieldMayBeFinal
Field `archiveManager` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarFiles.java`
#### Snippet
```java
    private final long maxFileSize;

    private SegmentArchiveManager archiveManager;

    /**
```

### FieldMayBeFinal
Field `matchers` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/SearchNodes.java`
#### Snippet
```java
        private File path;

        private List<Matcher> matchers = new ArrayList<>();

        private Output output = Output.TEXT;
```

### FieldMayBeFinal
Field `CSE` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/util/CharsetEncodingUtils.java`
#### Snippet
```java
    }

    private static ThreadLocal<CharsetEncoder> CSE = new ThreadLocal<CharsetEncoder>() {
        @Override
        protected CharsetEncoder initialValue() {
```

### FieldMayBeFinal
Field `repoStatistics` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/Check.java`
#### Snippet
```java
    private final boolean ioStatistics;

    private RepositoryStatistics repoStatistics;

    private final PrintWriter out;
```

### FieldMayBeFinal
Field `storeProvider` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/store/StandbyStoreService.java`
#### Snippet
```java

    @Reference(policy = STATIC, policyOption = GREEDY)
    private SegmentStoreProvider storeProvider = null;

    private final Closer closer = Closer.create();
```

### FieldMayBeFinal
Field `statisticsProvider` may be 'final'
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/persistentcache/RemotePersistentCacheService.java`
#### Snippet
```java

    @Reference
    private StatisticsProvider statisticsProvider = StatisticsProvider.NOOP;

    @Activate
```

### FieldMayBeFinal
Field `server` may be 'final'
in `oak-benchmarks-solr/src/main/java/org/apache/jackrabbit/oak/benchmark/FullTextSolrSearchTest.java`
#### Snippet
```java

    private SolrServerProvider serverProvider;
    private String server;

    public FullTextSolrSearchTest(File dump, boolean flat, boolean doReport, Boolean storageEnabled, String server) {
```

### FieldMayBeFinal
Field `channel` may be 'final'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/client/StandbyClient.java`
#### Snippet
```java
    private final String clientId;

    private Channel channel;

    StandbyClient(Builder builder) throws InterruptedException {
```

### FieldMayBeFinal
Field `CORRECTIONFORTYPEANDSUBTYPEMATCH` may be 'final'
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/MediaRange.java`
#### Snippet
```java
    private static final int QRESOLUTION = 1000;
    private static double CORRECTIONFORSUBTYPEMATCH = 1f / (10 * QRESOLUTION);
    private static double CORRECTIONFORTYPEANDSUBTYPEMATCH = 2f / (10 * QRESOLUTION);
    
    public static MediaRange parse(String range, MediaTypeRegistry registry) {
```

### FieldMayBeFinal
Field `CORRECTIONFORSUBTYPEMATCH` may be 'final'
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/MediaRange.java`
#### Snippet
```java

    private static final int QRESOLUTION = 1000;
    private static double CORRECTIONFORSUBTYPEMATCH = 1f / (10 * QRESOLUTION);
    private static double CORRECTIONFORTYPEANDSUBTYPEMATCH = 2f / (10 * QRESOLUTION);
    
```

### FieldMayBeFinal
Field `m` may be 'final'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/CompositeConfiguration.java`
#### Snippet
```java
    private static final class Ranking {

        private Map<SecurityConfiguration, Integer> m = new ConcurrentHashMap<>();

        private int get(@NotNull SecurityConfiguration configuration) {
```

### FieldMayBeFinal
Field `LOGLEVEL` may be 'final'
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/GuavaDeprecation.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(GuavaDeprecation.class);

    private static String LOGLEVEL = "error";

    private GuavaDeprecation() {
```

### FieldMayBeFinal
Field `storageEnabled` may be 'final'
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/benchmark/util/ElasticGlobalInitializer.java`
#### Snippet
```java
    private String async = null;

    private Boolean storageEnabled;


```

### FieldMayBeFinal
Field `DEFAULT_MOUNT` may be 'final'
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/mount/Mounts.java`
#### Snippet
```java
     * given path
     */
    private static Mount DEFAULT_MOUNT = new DefaultMount();

    static final class DefaultMount implements Mount {
```

### FieldMayBeFinal
Field `PROGRESS_WAITING_TIME_MILLIS` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java

    private static String VERSION_STORAGE_PATH = "/jcr:system/jcr:versionStorage";
    private static int PROGRESS_WAITING_TIME_MILLIS = 20 * 1000;

    private volatile int count = 0;
```

### FieldMayBeFinal
Field `VERSION_STORAGE_PATH` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
public class GenerateVersionInconsistencyReport {

    private static String VERSION_STORAGE_PATH = "/jcr:system/jcr:versionStorage";
    private static int PROGRESS_WAITING_TIME_MILLIS = 20 * 1000;

```

### FieldMayBeFinal
Field `type` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/MetricsExporterFixtureProvider.java`
#### Snippet
```java
        pushgateway("Prometheus Push Gateway");

        private String type;

        ExporterType(String type) {
```

### FieldMayBeFinal
Field `sweepIfRefsPastRetention` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreOptions.java`
#### Snippet
```java
    private OptionSpec<String> exportMetrics;
    private static final String DELIM = ",";
    private OptionSpec<Boolean> sweepIfRefsPastRetention;

    public DataStoreOptions(OptionParser parser) {
```

### FieldMayBeFinal
Field `exportMetrics` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreOptions.java`
#### Snippet
```java
    private final OptionSpec<Void> useDirListing;
    private final OptionSpec<Boolean> resetLoggingConfig;
    private OptionSpec<String> exportMetrics;
    private static final String DELIM = ",";
    private OptionSpec<Boolean> sweepIfRefsPastRetention;
```

### FieldMayBeFinal
Field `type` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/MetricsExporterFixture.java`
#### Snippet
```java
        pushgateway("Prometheus Push Gateway");

        private String type;

        ExporterType(String type) {
```

### FieldMayBeFinal
Field `useDirListing` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
        private final String[] paths;
        private final String[] inclusionRegex;
        private boolean useDirListing;

        public NodeTraverserReferenceRetriever(NodeStore nodeStore) {
```

### FieldMayBeFinal
Field `USE_PRODUCT_CHILD_LEVEL_0` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDefMergerUtils.java`
#### Snippet
```java
    private static HashSet<String> USE_PRODUCT_PROPERTY = new HashSet<>(Arrays.asList(
            "jcr:created", "jcr:lastModified", "jcr:uuid", "jcr:createdBy", "jcr:lastModifiedBy", "jcr:createdBy"));
    private static HashSet<String> USE_PRODUCT_CHILD_LEVEL_0 = new HashSet<>(Arrays.asList(
            "tika"));

```

### FieldMayBeFinal
Field `USE_PRODUCT_PROPERTY` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDefMergerUtils.java`
#### Snippet
```java
    private static HashSet<String> IGNORE_LEVEL_0 = new HashSet<>(Arrays.asList(
            "reindex", "refresh", "seed", "reindexCount"));
    private static HashSet<String> USE_PRODUCT_PROPERTY = new HashSet<>(Arrays.asList(
            "jcr:created", "jcr:lastModified", "jcr:uuid", "jcr:createdBy", "jcr:lastModifiedBy", "jcr:createdBy"));
    private static HashSet<String> USE_PRODUCT_CHILD_LEVEL_0 = new HashSet<>(Arrays.asList(
```

### FieldMayBeFinal
Field `IGNORE_LEVEL_0` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDefMergerUtils.java`
#### Snippet
```java
public class IndexDefMergerUtils {

    private static HashSet<String> IGNORE_LEVEL_0 = new HashSet<>(Arrays.asList(
            "reindex", "refresh", "seed", "reindexCount"));
    private static HashSet<String> USE_PRODUCT_PROPERTY = new HashSet<>(Arrays.asList(
```

### FieldMayBeFinal
Field `supportedTypesLogged` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TikaHelper.java`
#### Snippet
```java
    private final AutoDetectParser parser;
    private final Set<MediaType> supportedMediaTypes;
    private static AtomicBoolean supportedTypesLogged = new AtomicBoolean();

    public TikaHelper(@Nullable File tikaConfig) throws IOException {
```

### FieldMayBeFinal
Field `outFile` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/CSVFileGenerator.java`
#### Snippet
```java
public class CSVFileGenerator {
    private final Logger log = LoggerFactory.getLogger(getClass());
    private File outFile;

    public CSVFileGenerator(File outFile) {
```

### FieldMayBeFinal
Field `size` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MapDBMapFactory.java`
#### Snippet
```java
            Serializable {
        private static final long serialVersionUID = 8648365575103098316L;
        private int size = 8 + 4 + 4 + 1;
        public void serialize(DataOutput o, Revision r) throws IOException {
            o.writeLong(r.getTimestamp());
```

### FieldMayBeFinal
Field `maxExtractedLength` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractor.java`
#### Snippet
```java
    private final AtomicLong totalSizeRead = new AtomicLong();

    private int maxExtractedLength = MAX_EXTRACT_LENGTH;
    private File tikaConfig;
    private TikaHelper tika;
```

### FieldMayBeFinal
Field `queueSize` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractor.java`
#### Snippet
```java
    private ExecutorService executorService;
    private int threadPoolSize = Runtime.getRuntime().availableProcessors();
    private int queueSize = 100;

    private final AtomicInteger errorCount = new AtomicInteger();
```

### FieldMayBeFinal
Field `indent` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/exporter/CNDStreamWriter.java`
#### Snippet
```java
    private int depth = 0;
    private String deferredName;
    private String indent = "  ";

    public CNDStreamWriter(PrintWriter w) {
```

### FieldMayBeFinal
Field `defaultFilter` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/exporter/ExportOptions.java`
#### Snippet
```java
    public static final OptionsBeanFactory FACTORY = ExportOptions::new;

    private String defaultFilter = "{\"properties\":[\"*\", \"-:childOrder\"]}";
    private final OptionSpec<File> filterFileOpt;
    private final OptionSpec<File> outDirOpt;
```

### FieldMayBeFinal
Field `PATTERNS` may be 'final'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/threadDump/ThreadDumpCleaner.java`
#### Snippet
```java
    };

    private static ArrayList<Pattern> PATTERNS = new ArrayList<Pattern>();

    static {
```

### FieldMayBeFinal
Field `dict` may be 'final'
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/DictionaryAsMap.java`
#### Snippet
```java
class DictionaryAsMap<U, V> extends AbstractMap<U, V> {

    private Dictionary<U, V> dict;

    public DictionaryAsMap(Dictionary<U, V> dict) {
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/SpringBootSupport.java`
#### Snippet
```java
 */
class SpringBootSupport {
    private static Logger log = LoggerFactory.getLogger(SpringBootSupport.class);

    public static final String SPRING_BOOT_PACKAGE = "org.springframework.boot.loader.jar";
```

### FieldMayBeFinal
Field `log` may be 'final'
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/OakOSGiRepositoryFactory.java`
#### Snippet
```java
public class OakOSGiRepositoryFactory implements RepositoryFactory {

    private static Logger log = LoggerFactory.getLogger(OakOSGiRepositoryFactory.class);

    /**
```

### FieldMayBeFinal
Field `task` may be 'final'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/BackgroundObserver.java`
#### Snippet
```java
     */
    private final Runnable completionHandler = new Runnable() {
        Callable<Void> task = new Callable<Void>() {
            @Override
            public Void call() throws Exception {
```

### FieldMayBeFinal
Field `parentSourcePaths` may be 'final'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/MoveTracker.java`
#### Snippet
```java
    private List<MoveEntry> entries = new ArrayList<MoveEntry>();

    private Set<String> parentSourcePaths = new HashSet<String>();
    private Set<String> parentDestPaths = new HashSet<String>();

```

### FieldMayBeFinal
Field `parentDestPaths` may be 'final'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/MoveTracker.java`
#### Snippet
```java

    private Set<String> parentSourcePaths = new HashSet<String>();
    private Set<String> parentDestPaths = new HashSet<String>();

    /**
```

### FieldMayBeFinal
Field `destPath` may be 'final'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/MoveTracker.java`
#### Snippet
```java

        private final String sourcePath;
        private String destPath;

        private MoveEntry(@NotNull String sourcePath,
```

### FieldMayBeFinal
Field `entries` may be 'final'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/MoveTracker.java`
#### Snippet
```java
public class MoveTracker {

    private List<MoveEntry> entries = new ArrayList<MoveEntry>();

    private Set<String> parentSourcePaths = new HashSet<String>();
```

### FieldMayBeFinal
Field `NOTWARNEDYET` may be 'final'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
    private static final int LOGDEPTH = 5;

    private static AtomicBoolean NOTWARNEDYET = new AtomicBoolean(true);

    // classes that we don't want to include in the stack trace elements in the
```

### FieldMayBeFinal
Field `mountInfoProvider` may be 'final'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/SessionContext.java`
#### Snippet
```java
    private final int observationQueueLength;
    private final CommitRateLimiter commitRateLimiter;
    private MountInfoProvider mountInfoProvider;

    private final NamePathMapper namePathMapper;
```

### FieldMayBeFinal
Field `blobAccessProvider` may be 'final'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/SessionContext.java`
#### Snippet
```java
    private PrivilegeManager privilegeManager;
    private ObservationManagerImpl observationManager;
    private BlobAccessProvider blobAccessProvider;

    /** Paths (tokens) of all open scoped locks held by this session. */
```

### FieldMayBeFinal
Field `principals` may be 'final'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ObservationManagerImpl.java`
#### Snippet
```java
        this.blobAccessProvider = sessionContext.getBlobAccessProvider();
        this.permissionProviderFactory = new PermissionProviderFactory() {
            Set<Principal> principals = sessionDelegate.getAuthInfo().getPrincipals();
            @NotNull
            @Override
```

### FieldMayBeFinal
Field `mbean` may be 'final'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ConsolidatedListenerMBeanImpl.java`
#### Snippet
```java

        private final int index;
        private BackgroundObserverMBean mbean;

        public ObserverStatsData(int i, BackgroundObserverMBean observer){
```

### FieldMayBeFinal
Field `segmentCacheSize` may be 'final'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentTarFactory.java`
#### Snippet
```java
    private final boolean disableMmap;

    private int segmentCacheSize;

    private final boolean readOnly;
```

### FieldMayBeFinal
Field `segmentCacheSize` may be 'final'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/SegmentAzureFactory.java`
#### Snippet
```java
    private final String dir;

    private int segmentCacheSize;
    private final boolean readOnly;

```

### FieldMayBeFinal
Field `newMappings` may be 'final'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/blob/LengthCachingDataStore.java`
#### Snippet
```java
    //some off heap map
    private Map<String, Long> existingMappings = Collections.emptyMap();
    private Map<String, Long> newMappings = Maps.newConcurrentMap();

    private String mappingFilePath = "datastore-list.txt";
```

### FieldMayBeFinal
Field `progress` may be 'final'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java

                return new IndexUpdate(editorProviders, null, after, builder, new IndexUpdateCallback() {
                    String progress = "Updating indexes ";
                    long t0;
                    @Override
```

### FieldMayBeFinal
Field `regs` may be 'final'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/osgi/NodeStateSolrServersObserverService.java`
#### Snippet
```java
    private BackgroundObserver backgroundObserver;

    private List<ServiceRegistration> regs = new ArrayList<ServiceRegistration>();

    @Property(boolValue = false, label = "enabled", description = "enable persisted configuration observer")
```

### FieldMayBeFinal
Field `groupIds` may be 'final'
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authentication/external/CustomExternalIdentityProvider.java`
#### Snippet
```java

    private Map<String, Set<String>> userGroupMap = new HashMap<>();
    private Set<String> groupIds = new HashSet<>();

    public CustomExternalIdentityProvider() {};
```

### FieldMayBeFinal
Field `userGroupMap` may be 'final'
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authentication/external/CustomExternalIdentityProvider.java`
#### Snippet
```java
    private static final Logger log = LoggerFactory.getLogger(CustomExternalIdentityProvider.class);

    private Map<String, Set<String>> userGroupMap = new HashMap<>();
    private Set<String> groupIds = new HashSet<>();

```

### FieldMayBeFinal
Field `queueTimeout` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private int cleanerIntervalInSecs = Integer.getInteger("cleanerIntervalInSecs", 10);
    private int queueSize = Integer.getInteger("queueSize", 1000);
    private long queueTimeout = Long.getLong("queueTimeout", 100);
    private boolean hybridIndexEnabled = Boolean.getBoolean("hybridIndexEnabled");
    private boolean dumpStats = Boolean.getBoolean("dumpStats");
```

### FieldMayBeFinal
Field `asyncInterval` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private int numOfIndexes = Integer.getInteger("numOfIndexes", 10);
    private int refreshDeltaMillis = Integer.getInteger("refreshDeltaMillis", 1000);
    private int asyncInterval = Integer.getInteger("asyncInterval", 5);
    private int cleanerIntervalInSecs = Integer.getInteger("cleanerIntervalInSecs", 10);
    private int queueSize = Integer.getInteger("queueSize", 1000);
```

### FieldMayBeFinal
Field `queueSize` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private int asyncInterval = Integer.getInteger("asyncInterval", 5);
    private int cleanerIntervalInSecs = Integer.getInteger("cleanerIntervalInSecs", 10);
    private int queueSize = Integer.getInteger("queueSize", 1000);
    private long queueTimeout = Long.getLong("queueTimeout", 100);
    private boolean hybridIndexEnabled = Boolean.getBoolean("hybridIndexEnabled");
```

### FieldMayBeFinal
Field `refreshDeltaMillis` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private int nodesPerIteration = Status.values().length;
    private int numOfIndexes = Integer.getInteger("numOfIndexes", 10);
    private int refreshDeltaMillis = Integer.getInteger("refreshDeltaMillis", 1000);
    private int asyncInterval = Integer.getInteger("asyncInterval", 5);
    private int cleanerIntervalInSecs = Integer.getInteger("cleanerIntervalInSecs", 10);
```

### FieldMayBeFinal
Field `searcherEnabled` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private String indexingMode = System.getProperty("indexingMode", "nrt");

    private boolean searcherEnabled = Boolean.parseBoolean(System.getProperty("searcherEnabled", "true"));
    private File indexCopierDir;
    private IndexCopier copier;
```

### FieldMayBeFinal
Field `hybridIndexEnabled` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private int queueSize = Integer.getInteger("queueSize", 1000);
    private long queueTimeout = Long.getLong("queueTimeout", 100);
    private boolean hybridIndexEnabled = Boolean.getBoolean("hybridIndexEnabled");
    private boolean dumpStats = Boolean.getBoolean("dumpStats");
    private boolean useOakCodec = Boolean.parseBoolean(System.getProperty("useOakCodec", "true"));
```

### FieldMayBeFinal
Field `syncIndexing` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private boolean dumpStats = Boolean.getBoolean("dumpStats");
    private boolean useOakCodec = Boolean.parseBoolean(System.getProperty("useOakCodec", "true"));
    private boolean syncIndexing = Boolean.parseBoolean(System.getProperty("syncIndexing", "false"));
    private String indexingMode = System.getProperty("indexingMode", "nrt");

```

### FieldMayBeFinal
Field `cleanerIntervalInSecs` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private int refreshDeltaMillis = Integer.getInteger("refreshDeltaMillis", 1000);
    private int asyncInterval = Integer.getInteger("asyncInterval", 5);
    private int cleanerIntervalInSecs = Integer.getInteger("cleanerIntervalInSecs", 10);
    private int queueSize = Integer.getInteger("queueSize", 1000);
    private long queueTimeout = Long.getLong("queueTimeout", 100);
```

### FieldMayBeFinal
Field `indexedPropName` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java

    private final Random random = new Random(42); //fixed seed
    private String indexedPropName = "foo";
    private int nodesPerIteration = Status.values().length;
    private int numOfIndexes = Integer.getInteger("numOfIndexes", 10);
```

### FieldMayBeFinal
Field `numOfIndexes` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private String indexedPropName = "foo";
    private int nodesPerIteration = Status.values().length;
    private int numOfIndexes = Integer.getInteger("numOfIndexes", 10);
    private int refreshDeltaMillis = Integer.getInteger("refreshDeltaMillis", 1000);
    private int asyncInterval = Integer.getInteger("asyncInterval", 5);
```

### FieldMayBeFinal
Field `dumpStats` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private long queueTimeout = Long.getLong("queueTimeout", 100);
    private boolean hybridIndexEnabled = Boolean.getBoolean("hybridIndexEnabled");
    private boolean dumpStats = Boolean.getBoolean("dumpStats");
    private boolean useOakCodec = Boolean.parseBoolean(System.getProperty("useOakCodec", "true"));
    private boolean syncIndexing = Boolean.parseBoolean(System.getProperty("syncIndexing", "false"));
```

### FieldMayBeFinal
Field `contexts` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private Mutator mutator;
    private final AtomicInteger indexedNodeCount = new AtomicInteger();
    private List<TestContext> contexts = new ArrayList<>();
    private final StatisticsProvider statsProvider;
    private final Logger log = LoggerFactory.getLogger(getClass());
```

### FieldMayBeFinal
Field `useOakCodec` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private boolean hybridIndexEnabled = Boolean.getBoolean("hybridIndexEnabled");
    private boolean dumpStats = Boolean.getBoolean("dumpStats");
    private boolean useOakCodec = Boolean.parseBoolean(System.getProperty("useOakCodec", "true"));
    private boolean syncIndexing = Boolean.parseBoolean(System.getProperty("syncIndexing", "false"));
    private String indexingMode = System.getProperty("indexingMode", "nrt");
```

### FieldMayBeFinal
Field `nodesPerIteration` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private final Random random = new Random(42); //fixed seed
    private String indexedPropName = "foo";
    private int nodesPerIteration = Status.values().length;
    private int numOfIndexes = Integer.getInteger("numOfIndexes", 10);
    private int refreshDeltaMillis = Integer.getInteger("refreshDeltaMillis", 1000);
```

### FieldMayBeFinal
Field `indexingMode` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private boolean useOakCodec = Boolean.parseBoolean(System.getProperty("useOakCodec", "true"));
    private boolean syncIndexing = Boolean.parseBoolean(System.getProperty("syncIndexing", "false"));
    private String indexingMode = System.getProperty("indexingMode", "nrt");

    private boolean searcherEnabled = Boolean.parseBoolean(System.getProperty("searcherEnabled", "true"));
```

### FieldMayBeFinal
Field `facetFields` may be 'final'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
                                                        final LMSEstimator estimator) {
        return new AbstractIterator<SolrResultRow>() {
            public Collection<FacetField> facetFields = new LinkedList<FacetField>();
            private final Set<String> seenPaths = Sets.newHashSet();
            private final Deque<SolrResultRow> queue = Queues.newArrayDeque();
```

### FieldMayBeFinal
Field `MIN_COST` may be 'final'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
    static final String NATIVE_LUCENE_QUERY = "native*lucene";

    private static double MIN_COST = 2.3;

    private final Logger log = LoggerFactory.getLogger(SolrQueryIndex.class);
```

### FieldMayBeFinal
Field `startIdx` may be 'final'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeRelationshipSuite.java`
#### Snippet
```java
     */
    class ActivityWriter extends Writer {
        private int startIdx;

        ActivityWriter(String id, int numUsers, int startIdx,
```

### FieldMayBeFinal
Field `whiteboard` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/ActiveDeletedBlobCollectorMBeanImpl.java`
#### Snippet
```java

    @NotNull
    private Whiteboard whiteboard;

    @NotNull
```

### FieldMayBeFinal
Field `openedCoWDirectories` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexEditorProvider.java`
#### Snippet
```java
        private static final Logger LOG = LoggerFactory.getLogger(COWDirectoryCleanupCallback.class);

        private List<CopyOnWriteDirectory> openedCoWDirectories = Lists.newArrayList();
        private List<File> reindexingLocalDirectories = Lists.newArrayList();

```

### FieldMayBeFinal
Field `reindexingLocalDirectories` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexEditorProvider.java`
#### Snippet
```java

        private List<CopyOnWriteDirectory> openedCoWDirectories = Lists.newArrayList();
        private List<File> reindexingLocalDirectories = Lists.newArrayList();


```

### FieldMayBeFinal
Field `fulltextTokens` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
    }

    private static char[] fulltextTokens = new char[] { '*', '?' };

    /**
```

### FieldMayBeFinal
Field `MIN_COST` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
            .getLogger(LuceneIndex.class);
    public static final String NATIVE_QUERY_FUNCTION = "native*lucene";
    private static double MIN_COST = 2.2;

    /**
```

### FieldMayBeFinal
Field `storageEnabled` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/LuceneInitializerHelper.java`
#### Snippet
```java
    private String async = null;

    private Boolean storageEnabled;

    public LuceneInitializerHelper(String name) {
```

### FieldMayBeFinal
Field `released` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
     */
    static class LazyLuceneIndexNode implements LuceneIndexNode {
        private AtomicBoolean released = new AtomicBoolean();
        private IndexTracker tracker;
        private String indexPath;
```

### FieldMayBeFinal
Field `timeSeriesLength` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
     * length of time series analysis for commit rate and no. of segments
     */
    private double timeSeriesLength = 50d;

    /**
```

### FieldMayBeFinal
Field `alpha` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
     * values close to 1 weigh recent values more
     */
    private double alpha = 0.7;

    /** Sole constructor, setting all settings to their
```

### FieldMayBeFinal
Field `task` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/CopyOnWriteDirectory.java`
#### Snippet
```java
     */
    private final Runnable completionHandler = new Runnable() {
        Callable<Void> task = new Callable<Void>() {
            @SuppressWarnings("ThrowableResultOfMethodCallIgnored")
            @Override
```

### FieldMayBeFinal
Field `DEFAULT_PURGE_THRESHOLD` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/PurgeOldIndexVersionCommand.java`
#### Snippet
```java
    private long threshold;
    private List<String> indexPaths;
    private long DEFAULT_PURGE_THRESHOLD = TimeUnit.DAYS.toMillis(5); // 5 days in millis
    private final static String DEFAULT_INDEX_PATH = "/oak:index";
    private boolean shouldPurgeBaseIndex;
```

### FieldMayBeFinal
Field `indexerSupport` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/OutOfBandIndexerBase.java`
#### Snippet
```java
    private final IndexHelper indexHelper;
    private NodeStore copyOnWriteStore;
    private IndexerSupport indexerSupport;

    /**
```

### FieldMayBeFinal
Field `LOG` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/ActiveDeletedBlobCollectorFactory.java`
#### Snippet
```java
        private static PerfLogger PERF_LOG = new PerfLogger(
                LoggerFactory.getLogger(ActiveDeletedBlobCollectorImpl.class.getName() + ".perf"));
        private static Logger LOG = LoggerFactory.getLogger(ActiveDeletedBlobCollectorImpl.class.getName());

        private final Clock clock;
```

### FieldMayBeFinal
Field `PERF_LOG` may be 'final'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/ActiveDeletedBlobCollectorFactory.java`
#### Snippet
```java
     */
    static class ActiveDeletedBlobCollectorImpl implements ActiveDeletedBlobCollector {
        private static PerfLogger PERF_LOG = new PerfLogger(
                LoggerFactory.getLogger(ActiveDeletedBlobCollectorImpl.class.getName() + ".perf"));
        private static Logger LOG = LoggerFactory.getLogger(ActiveDeletedBlobCollectorImpl.class.getName());
```

### FieldMayBeFinal
Field `checkpoint` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/IndexerSupport.java`
#### Snippet
```java
    private File localIndexDir;
    private File indexDefinitions;
    private String checkpoint;
    private File existingDataDumpDir;

```

### FieldMayBeFinal
Field `sortedFile` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/NodeStateEntrySorter.java`
#### Snippet
```java
    private final Charset charset = UTF_8;
    private final Comparator<Iterable<String>> pathComparator;
    private File sortedFile;
    private boolean deleteOriginal;
    private long maxMemory = ONE_GB * 5;
```

### FieldMayBeFinal
Field `deleteOriginal` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/StoreAndSortStrategy.java`
#### Snippet
```java
    private final Compression algorithm;
    private long entryCount;
    private boolean deleteOriginal = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_DELETE_ORIGINAL, "true"));
    private int maxMemory = Integer.getInteger(OAK_INDEXER_MAX_SORT_MEMORY_IN_GB, OAK_INDEXER_MAX_SORT_MEMORY_IN_GB_DEFAULT);
    private long textSize;
```

### FieldMayBeFinal
Field `maxMemory` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/StoreAndSortStrategy.java`
#### Snippet
```java
    private long entryCount;
    private boolean deleteOriginal = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_DELETE_ORIGINAL, "true"));
    private int maxMemory = Integer.getInteger(OAK_INDEXER_MAX_SORT_MEMORY_IN_GB, OAK_INDEXER_MAX_SORT_MEMORY_IN_GB_DEFAULT);
    private long textSize;
    private Predicate<String> pathPredicate;
```

### FieldMayBeFinal
Field `pathPredicate` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/StoreAndSortStrategy.java`
#### Snippet
```java
    private int maxMemory = Integer.getInteger(OAK_INDEXER_MAX_SORT_MEMORY_IN_GB, OAK_INDEXER_MAX_SORT_MEMORY_IN_GB_DEFAULT);
    private long textSize;
    private Predicate<String> pathPredicate;


```

### FieldMayBeFinal
Field `pathPredicate` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseWithSortStrategy.java`
#### Snippet
```java
    private List<File> sortedFiles = new ArrayList<>();
    private ArrayList<NodeStateHolder> entryBatch = new ArrayList<>();
    private Predicate<String> pathPredicate;


```

### FieldMayBeFinal
Field `sortedFiles` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseWithSortStrategy.java`
#### Snippet
```java
    private long memoryUsed;
    private File sortWorkDir;
    private List<File> sortedFiles = new ArrayList<>();
    private ArrayList<NodeStateHolder> entryBatch = new ArrayList<>();
    private Predicate<String> pathPredicate;
```

### FieldMayBeFinal
Field `entryBatch` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseWithSortStrategy.java`
#### Snippet
```java
    private File sortWorkDir;
    private List<File> sortedFiles = new ArrayList<>();
    private ArrayList<NodeStateHolder> entryBatch = new ArrayList<>();
    private Predicate<String> pathPredicate;

```

### FieldMayBeFinal
Field `useLZ4` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileSplitter.java`
#### Snippet
```java
    private Set<String> splitNodeTypeNames;
    private boolean useCompression = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_ZIP, "true"));
    private boolean useLZ4 = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_LZ4, "false"));
    
    static Predicate<File> IS_SPLIT = path -> path.getParent().endsWith(SPLIT_DIR_NAME);
```

### FieldMayBeFinal
Field `useCompression` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileSplitter.java`
#### Snippet
```java
    private final Set<IndexDefinition> indexDefinitions;
    private Set<String> splitNodeTypeNames;
    private boolean useCompression = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_ZIP, "true"));
    private boolean useLZ4 = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_LZ4, "false"));
    
```

### FieldMayBeFinal
Field `head` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/FlatFileBufferLinkedList.java`
#### Snippet
```java
public class FlatFileBufferLinkedList implements NodeStateEntryList {

    private ListNode head = new ListNode();
    private ListNode tail = head;

```

### FieldMayBeFinal
Field `database` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/CompositeStoreFixture.java`
#### Snippet
```java
        return new CompositeStoreFixture(name) {

            private String database = new MongoClientURI(uri).getDatabase();
            private DocumentNodeStore ns;

```

### FieldMayBeFinal
Field `S3` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/DataStoreUtils.java`
#### Snippet
```java
    private static final Logger log = LoggerFactory.getLogger(DataStoreUtils.class);

    private static Class S3 = S3DataStore.class;
    private static Class AZURE = AzureDataStore.class;

```

### FieldMayBeFinal
Field `AZURE` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/DataStoreUtils.java`
#### Snippet
```java

    private static Class S3 = S3DataStore.class;
    private static Class AZURE = AzureDataStore.class;

    public static boolean isS3DataStore(String dsName) {
```

### FieldMayBeFinal
Field `mbs` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java
    public static BlobStoreFixture getMemoryBlobStore() {
        return new BlobStoreFixture("MEM") {
            private MemoryBlobStore mbs = new MemoryBlobStore();

            @Override
```

### FieldMayBeFinal
Field `indexName` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/indexversion/IndexVersionOperation.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(IndexVersionOperation.class);

    private IndexName indexName;
    private Operation operation;

```

### FieldMayBeFinal
Field `nodeStores` may be 'final'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/OakFixture.java`
#### Snippet
```java
        private final boolean throttlingEnabled;

        private List<DocumentNodeStore> nodeStores = new ArrayList<>();
        private BlobStoreFixture blobStoreFixture;
        private BlobStore blobStore;
```

### FieldMayBeFinal
Field `nodeStores` may be 'final'
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStoreService.java`
#### Snippet
```java

    @Reference(cardinality = ReferenceCardinality.MANDATORY_MULTIPLE, policy = ReferencePolicy.DYNAMIC, bind = "bindNodeStore", unbind = "unbindNodeStore", referenceInterface = NodeStoreProvider.class, target="(!(service.pid=org.apache.jackrabbit.oak.composite.CompositeNodeStore))")
    private List<NodeStoreWithProps> nodeStores = new ArrayList<>();
    
    @Reference
```

### FieldMayBeFinal
Field `statisticsProvider` may be 'final'
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStoreService.java`
#### Snippet
```java

    @Reference
    private StatisticsProvider statisticsProvider = StatisticsProvider.NOOP;

    @Property(label = "Enable node store checks",
```

### FieldMayBeFinal
Field `random` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/GetURITest.java`
#### Snippet
```java
    private List<Binary> binariesAdded = Lists.newArrayList();

    private Random random = new Random(29);

    /**
```

### FieldMayBeFinal
Field `binariesAdded` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/GetURITest.java`
#### Snippet
```java
    private Node root;

    private List<Binary> binariesAdded = Lists.newArrayList();

    private Random random = new Random(29);
```

### FieldMayBeFinal
Field `map` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SetPropertyTest.java`
#### Snippet
```java
     * and warm-up in {@link AbstractTest} are done from the same thread (re-using it between fixtures).
     */
    private Map<String, Map<Thread,Node>> map = new HashMap<>();
    
    String testNodeName = "test" + TEST_ID;
```

### FieldMayBeFinal
Field `noIterations` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractLoginTest.java`
#### Snippet
```java
    private String runAsUser;
    private boolean runWithToken;
    private int noIterations;
    private long expiration;

```

### FieldMayBeFinal
Field `runWithToken` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractLoginTest.java`
#### Snippet
```java

    private String runAsUser;
    private boolean runWithToken;
    private int noIterations;
    private long expiration;
```

### FieldMayBeFinal
Field `runAsUser` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractLoginTest.java`
#### Snippet
```java
    public final static long NO_CACHE = -1;

    private String runAsUser;
    private boolean runWithToken;
    private int noIterations;
```

### FieldMayBeFinal
Field `expiration` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractLoginTest.java`
#### Snippet
```java
    private boolean runWithToken;
    private int noIterations;
    private long expiration;

    public AbstractLoginTest() {
```

### FieldMayBeFinal
Field `maxSampleSize` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java
            Pattern.compile("\\p{LD}{3,}");

    private int maxSampleSize = 100;

    private final WikipediaImport importer;
```

### FieldMayBeFinal
Field `maxRowsToFetch` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java
    private int count = 0;

    private int maxRowsToFetch = Integer.getInteger("maxRowsToFetch", 100);

    private TestContext defaultContext;
```

### FieldMayBeFinal
Field `timestamp` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PersistentCacheTest.java`
#### Snippet
```java
    private DocumentNodeStore dns;

    private AtomicLong timestamp = new AtomicLong(1000);

    public PersistentCacheTest(StatisticsProvider statsProvider) {
```

### FieldMayBeFinal
Field `testNodeName` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SetPropertyTransientTest.java`
#### Snippet
```java
    private static final String NT_UNSTRUCTURED = "nt:unstructured";

    private String testNodeName = "test" + TEST_ID;

    private Node testNode;
```

### FieldMayBeFinal
Field `importer` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java

    private static final Logger LOG = LoggerFactory.getLogger(PropertyFullTextTest.class);
    private WikipediaImport importer;
    private Thread asyncImporter;
    private boolean benchmarkCompleted, importerCompleted;
```

### FieldMayBeFinal
Field `count` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java
    Reference to the count of pages ingested and committed to repo by WikiPediaImport
     */
    private AtomicReference<Integer> count = new AtomicReference<Integer>();

    public String getCurrentFixtureName() {
```

### FieldMayBeFinal
Field `type` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java
        private String name;
        private Set<String> properties;
        private String type;
        private boolean nodeScope;
        private boolean async;
```

### FieldMayBeFinal
Field `properties` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java
    static class FullTextPropertyInitialiser implements RepositoryInitializer {
        private String name;
        private Set<String> properties;
        private String type;
        private boolean nodeScope;
```

### FieldMayBeFinal
Field `name` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java
     */
    static class FullTextPropertyInitialiser implements RepositoryInitializer {
        private String name;
        private Set<String> properties;
        private String type;
```

### FieldMayBeFinal
Field `lastTitle` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/PropertyFullTextTest.java`
#### Snippet
```java
     * reference to the last added title. Used for looking up with queries.
     */
    private AtomicReference<String> lastTitle = new AtomicReference<String>();


```

### FieldMayBeFinal
Field `index` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AddUniqueMembersTest.java`
#### Snippet
```java
public class AddUniqueMembersTest extends AddMembersTest {

    private static AtomicLong index = new AtomicLong();

    public AddUniqueMembersTest(int numberOfMembers, int batchSize) {
```

### FieldMayBeFinal
Field `gPaths` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/IsMemberTest.java`
#### Snippet
```java
    private final boolean nestedGroups;

    private List<String> gPaths = new ArrayList<String>();
    private List<String> uPaths = new ArrayList<String>();

```

### FieldMayBeFinal
Field `uPaths` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/IsMemberTest.java`
#### Snippet
```java

    private List<String> gPaths = new ArrayList<String>();
    private List<String> uPaths = new ArrayList<String>();

    public IsMemberTest(int numberOfUsers, boolean nestedGroups) {
```

### FieldMayBeFinal
Field `testNodeName` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/IsNodeTypeTest.java`
#### Snippet
```java
    private final boolean runAsAdmin;

    private String testNodeName = "test" + TEST_ID;

    private Node testNode;
```

### FieldMayBeFinal
Field `readerEnabled` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java
    private boolean bundlingEnabled = Boolean.parseBoolean(System.getProperty("bundlingEnabled", "false"));
    private boolean oakResourceEnabled = Boolean.parseBoolean(System.getProperty("oakResourceEnabled", "false"));
    private boolean readerEnabled = Boolean.parseBoolean(System.getProperty("readerEnabled", "true"));
    private BundlingMode bundlingMode = BundlingMode.valueOf(System.getProperty("bundlingMode", "all").toUpperCase());
    private RepositoryInitializer bundlingInitializer = new BundlingConfigInitializer();
```

### FieldMayBeFinal
Field `bundlingEnabled` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java
    private int nodesPerFolder = 10;

    private boolean bundlingEnabled = Boolean.parseBoolean(System.getProperty("bundlingEnabled", "false"));
    private boolean oakResourceEnabled = Boolean.parseBoolean(System.getProperty("oakResourceEnabled", "false"));
    private boolean readerEnabled = Boolean.parseBoolean(System.getProperty("readerEnabled", "true"));
```

### FieldMayBeFinal
Field `bundlingInitializer` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java
    private boolean readerEnabled = Boolean.parseBoolean(System.getProperty("readerEnabled", "true"));
    private BundlingMode bundlingMode = BundlingMode.valueOf(System.getProperty("bundlingMode", "all").toUpperCase());
    private RepositoryInitializer bundlingInitializer = new BundlingConfigInitializer();
    private TestContext defaultContext;
    private Reader reader;
```

### FieldMayBeFinal
Field `nodesPerFolder` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java

    private final Random random = new Random(42); //fixed seed
    private int nodesPerFolder = 10;

    private boolean bundlingEnabled = Boolean.parseBoolean(System.getProperty("bundlingEnabled", "false"));
```

### FieldMayBeFinal
Field `bundlingMode` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java
    private boolean oakResourceEnabled = Boolean.parseBoolean(System.getProperty("oakResourceEnabled", "false"));
    private boolean readerEnabled = Boolean.parseBoolean(System.getProperty("readerEnabled", "true"));
    private BundlingMode bundlingMode = BundlingMode.valueOf(System.getProperty("bundlingMode", "all").toUpperCase());
    private RepositoryInitializer bundlingInitializer = new BundlingConfigInitializer();
    private TestContext defaultContext;
```

### FieldMayBeFinal
Field `contexts` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java
    private Mutator mutator;
    private final AtomicInteger assetCount = new AtomicInteger();
    private List<TestContext> contexts = new ArrayList<>();
    private String contentNodeType = NT_RESOURCE;

```

### FieldMayBeFinal
Field `oakResourceEnabled` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java

    private boolean bundlingEnabled = Boolean.parseBoolean(System.getProperty("bundlingEnabled", "false"));
    private boolean oakResourceEnabled = Boolean.parseBoolean(System.getProperty("oakResourceEnabled", "false"));
    private boolean readerEnabled = Boolean.parseBoolean(System.getProperty("readerEnabled", "true"));
    private BundlingMode bundlingMode = BundlingMode.valueOf(System.getProperty("bundlingMode", "all").toUpperCase());
```

### FieldMayBeFinal
Field `runAsAdmin` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/GetParentNodeTest.java`
#### Snippet
```java
    private String childNodePath;

    private boolean runAsAdmin;

    public static Benchmark withNodeAPIAndParentVisible(boolean runAsAdmin) {
```

### FieldMayBeFinal
Field `numItems` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentWriteACLTest.java`
#### Snippet
```java
    protected static final String ROOT_NODE_NAME = "test" + TEST_ID;

    private int numItems;

    public ConcurrentWriteACLTest(int numItems) {
```

### FieldMayBeFinal
Field `TZ` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ISO8601FormatterTest.java`
#### Snippet
```java
    private static int COUNT = 1000000;

    private static TimeZone TZ = TimeZone.getTimeZone("UTC");

    private static final DateFormat DTF7 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
```

### FieldMayBeFinal
Field `COUNT` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ISO8601FormatterTest.java`
#### Snippet
```java
    private static final String TYPE = System.getProperty("ISO8601FormatterTest", "jcr-commons-cal");

    private static int COUNT = 1000000;

    private static TimeZone TZ = TimeZone.getTimeZone("UTC");
```

### FieldMayBeFinal
Field `lookupByQuery` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/UUIDLookupTest.java`
#### Snippet
```java

    private int noOfIndex = Integer.getInteger("noOfIndex", 60);
    private boolean lookupByQuery = Boolean.getBoolean("lookupByQuery");

    private Session session;
```

### FieldMayBeFinal
Field `noOfIndex` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/UUIDLookupTest.java`
#### Snippet
```java
    private static final int NODE_COUNT = 100;

    private int noOfIndex = Integer.getInteger("noOfIndex", 60);
    private boolean lookupByQuery = Boolean.getBoolean("lookupByQuery");

```

### FieldMayBeFinal
Field `root` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        private static final String POLICY_NAME = "customPolicy";

        private Root root;
        private Root immutableRoot;

```

### FieldMayBeFinal
Field `cnt` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
public class CompositeAuthorizationTest extends ReadDeepTreeTest {

    private int cnt;

    protected CompositeAuthorizationTest(boolean runAsAdmin, int cntConfigurations) {
```

### FieldMayBeFinal
Field `facetMode` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
        private Map<String, Boolean> props;
        private String type;
        private String facetMode;

        public FacetIndexInitializer(@NotNull final String name, @NotNull final Map<String, Boolean> props, @NotNull String type, @NotNull String facetMode) {
```

### FieldMayBeFinal
Field `name` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
    static class FacetIndexInitializer implements RepositoryInitializer {

        private String name;
        private Map<String, Boolean> props;
        private String type;
```

### FieldMayBeFinal
Field `type` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java
        private String name;
        private Map<String, Boolean> props;
        private String type;
        private String facetMode;

```

### FieldMayBeFinal
Field `props` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FacetSearchTest.java`
#### Snippet
```java

        private String name;
        private Map<String, Boolean> props;
        private String type;
        private String facetMode;
```

### FieldMayBeFinal
Field `parser` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
    protected static StatisticsProvider statsProvider = null;

    private static OptionParser parser = new OptionParser();
    protected static BenchmarkOptions benchmarkOptions = null;
    protected static OptionSet options;
```

### FieldMayBeFinal
Field `parser` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilityRunner.java`
#### Snippet
```java

    protected static List<ScalabilitySuite> allSuites = Lists.newArrayList();
    private static OptionParser parser = new OptionParser();
    protected static ScalabilityOptions scalabilityOptions = null;
    protected static OptionSet options;
```

### FieldMayBeFinal
Field `jobs` may be 'final'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/ConcurrentReader.java`
#### Snippet
```java

    private boolean running;
    private List<Thread> jobs = Lists.newArrayList();

    @Override
```

### FieldMayBeFinal
Field `bufferSize` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/ReverseFileReader.java`
#### Snippet
```java
    private static final int BUFFER_SIZE = 16 * 1024;

    private int bufferSize;

    private final CloudBlob blob;
```

### FieldMayBeFinal
Field `INTERVAL` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureRepositoryLock.java`
#### Snippet
```java
    private static final int TIMEOUT_SEC = Integer.getInteger("oak.segment.azure.lock.timeout", 0);

    private static int INTERVAL = 60;

    private final Runnable shutdownHook;
```

### FieldMayBeFinal
Field `type` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java
        TAR("TarMK Segment Store"), AZURE("Azure Segment Store");

        private String type;

        SegmentStoreType(String type) {
```

### FieldMayBeFinal
Field `persistentCacheSizeGb` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java
    private String persistentCachePath;

    private Integer persistentCacheSizeGb;

    private AzureCompact(Builder builder) {
```

### FieldMayBeFinal
Field `persistentCachePath` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java
    private final CompactorType compactorType;

    private String persistentCachePath;

    private Integer persistentCacheSizeGb;
```

### FieldMayBeFinal
Field `executor` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentCopy.java`
#### Snippet
```java
    private SegmentNodeStorePersistence destPersistence;

    private ExecutorService executor = Executors.newFixedThreadPool(READ_THREADS + 1);

    public SegmentCopy(Builder builder) {
```

### FieldMayBeFinal
Field `executor` may be 'final'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/SegmentStoreMigrator.java`
#### Snippet
```java
    private final Integer revisionCount;

    private ExecutorService executor = Executors.newFixedThreadPool(READ_THREADS + 1);

    private SegmentStoreMigrator(Builder builder) {
```

## RuleId[id=InstantiationOfUtilityClass]
### InstantiationOfUtilityClass
Instantiation of utility class `CommitMarker`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/CommitMarker.java`
#### Snippet
```java
    private static final String KEY = CommitMarker.class.getName();

    private static final CommitMarker INSTANCE = new CommitMarker();

    @NotNull
```

## RuleId[id=UnnecessaryUnicodeEscape]
### UnnecessaryUnicodeEscape
Unicode escape sequence `\u00b5` can be replaced with 'µ'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/TimeDurationFormatter.java`
#### Snippet
```java
        t = new HashMap<>(t);
        // Unicode "MICRO SIGN"
        t.put(TimeUnit.MICROSECONDS, "\u00b5s");
        DISPLAYUNIT = Collections.unmodifiableMap(t);
    }
```

## RuleId[id=SynchronizationOnLocalVariableOrMethodParameter]
### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `s`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
    void clear() {
        for (Segment<K, V> s : segments) {
            synchronized (s) {
                if (evicted != null) {
                    s.evictedAll(RemovalCause.EXPLICIT);
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `loadNow`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
                // we synchronize a bit early here, but that's fine (we don't
                // optimize for the case where loading is extremely quick)
                synchronized (loadNow) {
                    alreadyLoading = loading.putIfAbsent(key, loadNow);
                    if (alreadyLoading == null) {
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `alreadyLoading`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
                }
                // another thread is (or was) already loading
                synchronized (alreadyLoading) {
                    alreadyLoading.set(true);
                    // loading might have been finished, so check again
```

### SynchronizationOnLocalVariableOrMethodParameter
Synchronization on local variable `that`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/AbstractBlob.java`
#### Snippet
```java
            synchronized (this) {
                if (hashCode != null) {
                    synchronized (that) {
                        if (that.hashCode != null) {
                            return hashCode.equals(that.hashCode);
```

## RuleId[id=UnnecessaryLocalVariable]
### UnnecessaryLocalVariable
Local variable `statisticsProvider` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java
        this.cache = cache;

        StatisticsProvider statisticsProvider = provider;

        // Configure cache name
```

### UnnecessaryLocalVariable
Local variable `copiedRecsFile` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
                    @Override
                    public File retrieve(String path) {
                        File copiedRecsFile = new File(path);
                        return copiedRecsFile;
                    }
```

### UnnecessaryLocalVariable
Local variable `snapshotMarker` is redundant
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java

    private File getSnapshotMarkerFile() {
        File snapshotMarker = new File(rootDir, prefix + snapshotMarkerSuffix);
        return snapshotMarker;
    }
```

### UnnecessaryLocalVariable
Local variable `storageOptions` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDBConfig.java`
#### Snippet
```java
            root.getChildren().put(STORAGE_ENGINE, configString);

            Bson storageOptions = BsonDocument.parse(root.toString());
            return storageOptions;
        } else {
```

### UnnecessaryLocalVariable
Local variable `tname` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                // skip indices on tables in other schemas in case we have that information
                if (rmetSchemaName.isEmpty() || inSchema.isEmpty() || rmetSchemaName.equals(inSchema)) {
                    String tname = asQualifiedDbName(inSchema, rs.getString("TABLE_NAME"));
                    info.tname = tname;
                    String cname = rs.getString("COLUMN_NAME");
```

### UnnecessaryLocalVariable
Local variable `w` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
            readStore = writeStore;
            readGeneration = writeGeneration;
            MapFactory w = createMapFactory(writeGeneration + 1, false);
            writeStore = w;
            writeGeneration++;
```

### UnnecessaryLocalVariable
Local variable `encryptedBytes` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/broadcast/UDPBroadcaster.java`
#### Snippet
```java
            cipherOutputStream.flush();
            cipherOutputStream.close();
            byte[] encryptedBytes = outputStream.toByteArray();
            return encryptedBytes;
        } catch (IOException e) {
```

### UnnecessaryLocalVariable
Local variable `diff` is redundant
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
            // * positive when local instance is ahead
            // * and negative when the local instance is behind
            final long diff = midPoint - serverLocalTimeMillis;

            return diff;
```

### UnnecessaryLocalVariable
Local variable `output` is redundant
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
                throw new RuntimeException(e);
            }
            String output = new String(out.toByteArray(), "UTF-8");
            return output;
        } catch (Exception e) {
```

### UnnecessaryLocalVariable
Local variable `file` is redundant
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
                    continue;
                }
                String file = arg;
                Reader reader;
                LineNumberReader r;
```

### UnnecessaryLocalVariable
Local variable `rowcounter` is redundant
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
                bfbs.add(bfb);
            }
            int rowcounter = merge(fbw, cmp, distinct, bfbs, typeToString);
            return rowcounter;
        } finally {
```

### UnnecessaryLocalVariable
Local variable `editorProvider` is redundant
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticIndexImporterSupport.java`
#### Snippet
```java
        ElasticIndexTracker indexTracker = new ElasticIndexTracker(connection,
                new ElasticMetricHandler(StatisticsProvider.NOOP));
        ElasticIndexEditorProvider editorProvider = new ElasticIndexEditorProvider(indexTracker, connection,
                new ExtractedTextCache(10 * FileUtils.ONE_MB, 100));
        return editorProvider;
```

### UnnecessaryLocalVariable
Local variable `persistence` is redundant
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/AwsSegmentStoreService.java`
#### Snippet
```java
    private static SegmentNodeStorePersistence createAwsPersistence(Configuration configuration) throws IOException {
        AwsContext awsContext = AwsContext.create(configuration);
        AwsPersistence persistence = new AwsPersistence(awsContext);
        return persistence;
    }
```

### UnnecessaryLocalVariable
Local variable `selector1` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
            return c;
        } else {
            String selector1 = name;
            read(".");
            String property1 = readName();
```

### UnnecessaryLocalVariable
Local variable `literal` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
            return var;
        } else if (readIf("TRUE")) {
            LiteralImpl literal = getUncastLiteral(PropertyValues.newBoolean(true));
            return literal;
        } else if (readIf("FALSE")) {
```

### UnnecessaryLocalVariable
Local variable `literal` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
            return literal;
        } else if (readIf("FALSE")) {
            LiteralImpl literal = getUncastLiteral(PropertyValues.newBoolean(false));
            return literal;
        } else if (readIf("CAST")) {
```

### UnnecessaryLocalVariable
Local variable `c` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
            if (readIf("IN")) {
                DynamicOperandImpl right = parseDynamicOperand();
                ConstraintImpl c = factory.comparison(right, Operator.EQUAL, left);
                return c;
            } else {
```

### UnnecessaryLocalVariable
Local variable `newQuery` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryRecorder.java`
#### Snippet
```java
                }
            }
            String newQuery = query.substring(0, pathIndex) + "/jcr:root/" + path + query.substring(end, query.length());
            query = newQuery;
        }
```

### UnnecessaryLocalVariable
Local variable `join` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
            // but couldn't be evaluated before
            if (!j.canEvaluate(oldSelectors) && j.canEvaluate(newSelectors)) {
                JoinImpl join = new JoinImpl(result, last, JoinType.INNER, j);
                return join;
            }
```

### UnnecessaryLocalVariable
Local variable `l1` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
                if (left instanceof OrCondition) {
                    OrCondition orLeft = (OrCondition) left;
                    Expression l1 = orLeft.left;
                    Expression l2 = orLeft.right;
                    OrCondition orRight = new OrCondition(l2, right);
```

### UnnecessaryLocalVariable
Local variable `in` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
            list.addAll(left.getRight());
            list.addAll(right.getRight());
            InCondition in = new InCondition(le, list);
            return in;
        }
```

### UnnecessaryLocalVariable
Local variable `f` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            Expression right = parseExpression();
            read(")");
            Expression.Contains f = new Expression.Contains(left, right);
            return f;
        } else if ("jcr:score".equals(functionName)) {
```

### UnnecessaryLocalVariable
Local variable `f` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            Expression expr = parseExpression();
            read(")");
            Expression.NativeFunction f = new Expression.NativeFunction(selectorName, language, expr);
            return f;
        } else if ("rep:similar".equals(functionName)) {
```

### UnnecessaryLocalVariable
Local variable `f` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            Expression path = parseExpression();
            read(")");
            Expression.Similar f = new Expression.Similar(property, path);
            return f;
        } else if ("rep:spellcheck".equals(functionName)) {
```

### UnnecessaryLocalVariable
Local variable `lastParseIndex` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
        converter.initialize(partList);
        converter.read();
        int lastParseIndex = converter.parseIndex;
        int lastOrIndex = lastParseIndex;
        converter.read("(");
```

### UnnecessaryLocalVariable
Local variable `union` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
                result = stat;
            } else {
                UnionStatement union = new UnionStatement(result, stat);
                result = union;
            }
```

### UnnecessaryLocalVariable
Local variable `k0` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/SipHash.java`
#### Snippet
```java

    public SipHash(long seed) {
        long k0 = seed;
        long k1 = Long.rotateLeft(seed, 32);
        v0 = k0 ^ 0x736f6d6570736575L;
```

### UnnecessaryLocalVariable
Local variable `before` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/IndexImporter.java`
#### Snippet
```java
                    indexInfos, checkpoint, laneName);

            NodeState before = indexedState;

            NodeBuilder builder = nodeStore.getRoot().builder();
```

### UnnecessaryLocalVariable
Local variable `result` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/GlobbingPathFilter.java`
#### Snippet
```java
            }
            boolean headMatches = wildcardMatch(name, head);
            boolean result = pattern.size() == 1
                ? headMatches
                : headMatches && STAR_STAR.equals(pattern.get(1));
```

### UnnecessaryLocalVariable
Local variable `tokenName` is redundant
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenProviderImpl.java`
#### Snippet
```java
                TokenInfo tokenInfo;
                try {
                    String tokenName = uuid;
                    tokenInfo = createTokenNode(tokenParent, tokenName, expTime, uuid, id, attributes);
                    root.commit(CommitMarker.asCommitAttributes());
```

### UnnecessaryLocalVariable
Local variable `p` is redundant
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/query/FulltextIndexPlanner.java`
#### Snippet
```java

            private void visitTerm(String propertyName) {
                String p = propertyName;
                String propertyPath = null;
                String nodePath = null;
```

### UnnecessaryLocalVariable
Local variable `comma` is redundant
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/FunctionIndexProcessor.java`
#### Snippet
```java
            String prop = remaining;
            int paren = remaining.indexOf(')');
            int comma = remaining.indexOf(',');
            int end = comma;
            if (paren >=0) {
```

### UnnecessaryLocalVariable
Local variable `targetValue` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/index/IndexV2.java`
#### Snippet
```java
        float lowValue = Long.MIN_VALUE;
        float highValue = Long.MAX_VALUE;
        float targetValue = msb;

        while (lowIndex <= highIndex) {
```

### UnnecessaryLocalVariable
Local variable `targetValue` is redundant
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/index/IndexV1.java`
#### Snippet
```java
        float lowValue = Long.MIN_VALUE;
        float highValue = Long.MAX_VALUE;
        float targetValue = msb;

        while (lowIndex <= highIndex) {
```

### UnnecessaryLocalVariable
Local variable `uuid` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/FrozenNodeRefsByScanningCommand.java`
#### Snippet
```java
            }

            String uuid = propValue;
            String referrerPath = n.getPath();
            String referrerProperty = p.getName();
```

### UnnecessaryLocalVariable
Local variable `stats` is redundant
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
            evictionCount += s.evictionCount.longValue();
        }
        CacheStats stats = new CacheStats(hitCount, missCount, loadSuccessCount,
                loadExceptionCount, totalLoadTime, evictionCount);
        return stats;
```

### UnnecessaryLocalVariable
Local variable `propPath` is redundant
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
        private void binaryProperties(NodeState state, String path, ReferenceCollector collector) {
            for (PropertyState p : state.getProperties()) {
                String propPath = path;//PathUtils.concat(path, p.getName());
                if (p.getType() == Type.BINARY) {
                    String blobId = p.getValue(Type.BINARY).getContentIdentity();
```

### UnnecessaryLocalVariable
Local variable `jsonFacetString` is redundant
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/query/facet/FacetResult.java`
#### Snippet
```java
                String value = row.getValue(column);
                if (value != null) {
                    String jsonFacetString = value;
                    parseJson(dimension, jsonFacetString);
                }
```

### UnnecessaryLocalVariable
Local variable `e` is redundant
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/fulltext/FullTextParser.java`
#### Snippet
```java
        p.propertyName = propertyName;
        p.text = text;
        FullTextExpression e = p.parseOr();
        return e;
    }
```

### UnnecessaryLocalVariable
Local variable `prefilter` is redundant
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ChangeProcessor.java`
#### Snippet
```java
        }

        final ChangeSetFilter prefilter = fp;
        if (prefilter.excludes(changeSet)) {
            return FilterResult.EXCLUDE;
```

### UnnecessaryLocalVariable
Local variable `dstStore` is redundant
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/MigrationFactory.java`
#### Snippet
```java
    protected NodeStore createTarget(Closer closer, BlobStore srcBlobStore) throws IOException {
        BlobStore dstBlobStore = datastores.getDstBlobStore(srcBlobStore).create(closer);
        NodeStore dstStore = stores.getDstStore().create(dstBlobStore, closer);
        return dstStore;
    }
```

### UnnecessaryLocalVariable
Local variable `before` is redundant
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/OutOfBandIndexerBase.java`
#### Snippet
```java
        //It would only traverse the diff i.e. those index definitions paths
        //whose lane has been changed
        NodeState before = baseState;
        NodeState after = copyOnWriteStore.getRoot();

```

### UnnecessaryLocalVariable
Local variable `presFreeMemory` is redundant
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/NodeStateEntrySorter.java`
#### Snippet
```java
        Runtime r = Runtime.getRuntime();
        long allocatedMemory = r.totalMemory() - r.freeMemory();
        long presFreeMemory = r.maxMemory() - allocatedMemory;
        return presFreeMemory;
    }
```

## RuleId[id=UnpredictableBigDecimalConstructorCall]
### UnpredictableBigDecimalConstructorCall
Unpredictable `new BigDecimal()` call
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ConsolidatedDataStoreCacheStats.java`
#### Snippet
```java
                    stats.getRequestCount(),
                    stats.getHitCount(),
                    new BigDecimal(stats.getHitRate(),new MathContext(2)),
                    stats.getMissCount(),
                    new BigDecimal(stats.getMissRate(), new MathContext(2)),
```

### UnpredictableBigDecimalConstructorCall
Unpredictable `new BigDecimal()` call
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ConsolidatedDataStoreCacheStats.java`
#### Snippet
```java
                    new BigDecimal(stats.getHitRate(),new MathContext(2)),
                    stats.getMissCount(),
                    new BigDecimal(stats.getMissRate(), new MathContext(2)),
                    stats.getLoadCount(),
                    stats.getLoadSuccessCount(),
```

### UnpredictableBigDecimalConstructorCall
Unpredictable `new BigDecimal()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/cache/impl/ConsolidatedCacheStats.java`
#### Snippet
```java
                    stats.getRequestCount(),
                    stats.getHitCount(),
                    new BigDecimal(stats.getHitRate(),new MathContext(2)),
                    stats.getMissCount(),
                    new BigDecimal(stats.getMissRate(), new MathContext(2)),
```

### UnpredictableBigDecimalConstructorCall
Unpredictable `new BigDecimal()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/cache/impl/ConsolidatedCacheStats.java`
#### Snippet
```java
                    new BigDecimal(stats.getHitRate(),new MathContext(2)),
                    stats.getMissCount(),
                    new BigDecimal(stats.getMissRate(), new MathContext(2)),
                    stats.getLoadCount(),
                    stats.getLoadSuccessCount(),
```

## RuleId[id=BusyWait]
### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
                    logger.error("doRun: got an exception: " + e, e);
                    try {
                        Thread.sleep(5000);
                    } catch (Exception e2) {
                        logger.error("doRun: got an exception while sleeping due to another exception: " + e2, e2);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/AbortingIndexerLock.java`
#### Snippet
```java
                log.info("Async indexer for lane [{}] found to be running. Would wait for {} seconds " +
                        "more for it to stop", mbean.getName(), delta);
                Thread.sleep(intervalBetweenTriesMsec);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/ClusterNodeStoreLock.java`
#### Snippet
```java
                log.info("Wait " + sleep + " ms");
                try {
                    Thread.sleep(sleep);
                } catch (InterruptedException e1) {
                    // ignore
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/queue/SegmentWriteQueue.java`
#### Snippet
```java
                    log.error("Can't persist the segment {}", segmentToRetry.getUuid(), e.getCause());
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e1) {
                        log.warn("Interrupted", e);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
                while (runningJob) {
                    System.out.println("Job is running... Traversed " + count + " nodes. Found " + emptyNodesCount + " empty and " + wrongNodesCount + " wrong nodes.");
                    Thread.sleep(PROGRESS_WAITING_TIME_MILLIS);
                }
            } catch (InterruptedException e) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/Downloader.java`
#### Snippet
```java
                                callable, waitTime, retried, e);
                        try {
                            Thread.sleep(waitTime);
                        } catch (InterruptedException ignore) {}
                    }
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/S3DataStoreFactory.java`
#### Snippet
```java
                try {
                    while (store.getStats().get(1).getElementCount() > 0) {
                        Thread.sleep(100);
                    }
                } catch (InterruptedException e) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/AzureDataStoreFactory.java`
#### Snippet
```java
                try {
                    while (store.getStats().get(1).getElementCount() > 0) {
                        Thread.sleep(100);
                    }
                } catch (InterruptedException e) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityNodeSuite.java`
#### Snippet
```java
                        LOG.debug("Waiting for async indexing to finish");
                    }
                    Thread.sleep(5000);
                } catch (InterruptedException e) {
                    LOG.error("Error waiting for async index to finish", e);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseAndSortTask.java`
#### Snippet
```java
                log.info("{} Could not register to memory manager. Sleeping {} ms before retrying", taskID, sleepDuration);
                try {
                    Thread.sleep(sleepDuration);
                } catch (InterruptedException e) {
                    log.warn(taskID + " Interrupted while sleeping while trying to register to memory manager", e);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/DocumentStoreIndexerBase.java`
#### Snippet
```java
                    try {
                        log.info("Waiting for {} millis before retrying", backOffTimeInMillis);
                        Thread.sleep(backOffTimeInMillis);
                        backOffTimeInMillis *= 2;
                    } catch (InterruptedException ie) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/OakFixture.java`
#### Snippet
```java
                    LOG.debug("vgc: " + stats);
                    // org.apache.jackrabbit.oak.plugins.document.NodeDocument.MODIFIED_IN_SECS_RESOLUTION
                    Thread.sleep(5 * 1000);
                }
                catch (Throwable ex) {
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/InitialContentMigrator.java`
#### Snippet
```java
        do {
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                throw new IOException(e);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
            long runtimeEnd = System.currentTimeMillis() + RUNTIME;
            while (System.currentTimeMillis() < runtimeEnd) {
                Thread.sleep(runtimeEnd - System.currentTimeMillis());
            }

```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ContinuousRevisionGCTest.java`
#### Snippet
```java

        for (;;) {
            Thread.sleep(TimeUnit.SECONDS.toMillis(10));
            Stopwatch sw = Stopwatch.createStarted();
            String result = revisionGC(nodeStore);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReplicaCrashResilienceTest.java`
#### Snippet
```java
                                + ") from the google cache probably: " + e);
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e2) {
                            e.printStackTrace();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReplicaCrashResilienceTest.java`
#### Snippet
```java
                                System.out.println("Reader: Closer than 100, waiting...level1="+level1+", level2="+level2);
                                try {
                                    Thread.sleep(1000);
                                } catch (InterruptedException e) {
                                    e.printStackTrace();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReplicaCrashResilienceTest.java`
#### Snippet
```java
                            if (!level1Node.hasNode(level2)) {
                                System.err.println("Reader: NOT FOUND: level1="+level1+", level2="+level2);
                                Thread.sleep(500);
                                session.refresh(false);
                                System.err.println("Reader: Reverifying once...");
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReplicaCrashResilienceTest.java`
#### Snippet
```java
                            System.out.println("Got an UncheckedException from the google cache probably: " + e);
                            try {
                                Thread.sleep(500);
                            } catch (InterruptedException e2) {
                                e.printStackTrace();
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ObservationTest.java`
#### Snippet
```java
            while (!isDone(createNodes) || (eventCount.get() / LISTENER_COUNT < nodeCount.get() * EVENTS_PER_NODE)) {
                long t0 = System.currentTimeMillis();
                Thread.sleep(OUTPUT_RESOLUTION);
                t += System.currentTimeMillis() - t0;

```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureRepositoryLock.java`
#### Snippet
```java
                if ((System.currentTimeMillis() - start) / 1000 < timeoutSec) {
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e1) {
                        throw new IOException(e1);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureRepositoryLock.java`
#### Snippet
```java
            }
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                log.error("Interrupted the lease renewal loop", e);
```

### BusyWait
Call to `Thread.sleep()` in a loop, probably busy-waiting
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                            t.start();
                            for (int s = 0; t.isAlive(); s++) {
                                Thread.sleep(100);
                                if (s % 10 == 0) {
                                    synchronized (fOut) {
```

## RuleId[id=RedundantFileCreation]
### RedundantFileCreation
`new File` is redundant
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/S3DataStoreFactory.java`
#### Snippet
```java
    public S3DataStoreFactory(String configuration, String directory, boolean ignoreMissingBlobs) throws IOException {
        this.props = new Properties();
        FileReader reader = new FileReader(new File(configuration));
        try {
            props.load(reader);
```

### RedundantFileCreation
`new File` is redundant
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/AzureDataStoreFactory.java`
#### Snippet
```java
    public AzureDataStoreFactory(String configuration, String directory, boolean ignoreMissingBlobs) throws IOException {
        this.props = new Properties();
        FileReader reader = new FileReader(new File(configuration));
        try {
            props.load(reader);
```

## RuleId[id=ArraysAsListWithZeroOrOneArgument]
### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
                    },
                    null, null);
            return Arrays.asList(r).iterator();
        }
        if (LOG.isDebugEnabled()) {
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
                    },
                    null, null);
            return Arrays.asList(r).iterator();
        }
        if (LOG.isDebugEnabled()) {
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            currTags = Sets.newHashSet(tree.getProperty(INDEX_TAGS).getValue(STRINGS));
        }
        Set<String> tagVals = Sets.newHashSet(Iterables.concat(currTags, asList(additionalTagVals)));
        boolean noAdditionalTags = currTags.containsAll(tagVals);
        if (!noAdditionalTags) {
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
    public int hashCode() {
        return Objects.hashCode(primaryType, mixinTypes,
                Arrays.asList(properties), getTemplateType(), childName);
    }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-benchmarks-solr/src/main/java/org/apache/jackrabbit/oak/benchmark/SolrBenchmarkRunner.java`
#### Snippet
```java

        BenchmarkRunner.addToBenchMarkList(
                Arrays.asList(new FullTextSolrSearchTest(
                        benchmarkOptions.getWikipedia().value(options),
                        benchmarkOptions.getFlatStructure().value(options),
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/privilege/PrivilegeBitsProvider.java`
#### Snippet
```java
    @NotNull
    public PrivilegeBits getBits(@NotNull Privilege[] privileges, @NotNull final NameMapper nameMapper) {
        return getBits(Iterables.filter(Iterables.transform(Arrays.asList(privileges), privilege -> nameMapper.getOakNameOrNull(privilege.getName())), Predicates.notNull()));
    }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/permission/Permissions.java`
#### Snippet
```java
            return NO_PERMISSION;
        } else {
            return getPermissions(Sets.newHashSet(Arrays.asList(permissionNames.split(","))));
        }
    }
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexMerge.java`
#### Snippet
```java
        // TODO probably need the ability to configure mounts
        return Mounts.newBuilder()
                .mount("libs", true, Arrays.asList(
                        // pathsSupportingFragments
                        "/oak:index/*$"
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDefMergerUtils.java`
#### Snippet
```java
    private static HashSet<String> USE_PRODUCT_PROPERTY = new HashSet<>(Arrays.asList(
            "jcr:created", "jcr:lastModified", "jcr:uuid", "jcr:createdBy", "jcr:lastModifiedBy", "jcr:createdBy"));
    private static HashSet<String> USE_PRODUCT_CHILD_LEVEL_0 = new HashSet<>(Arrays.asList(
            "tika"));

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/RemoteSolrServerProvider.java`
#### Snippet
```java
    private SolrClient initializeWithCloudSolrServer() throws IOException {
        // try SolrCloud client
        CloudSolrClient cloudSolrServer = new CloudSolrClient.Builder().withZkHost(Arrays.asList(
                    remoteSolrServerConfiguration.getSolrZkHost().split(","))).build();
        cloudSolrServer.setZkConnectTimeout(remoteSolrServerConfiguration.getConnectionTimeout());
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/IndexDefinitionBuilder.java`
#### Snippet
```java
            currTags = Sets.newHashSet(tree.getProperty(INDEX_TAGS).getValue(STRINGS));
        }
        Set<String> tagVals = Sets.newHashSet(Iterables.concat(currTags, asList(additionalTagVals)));
        boolean noAdditionalTags = currTags.containsAll(tagVals);
        if (!noAdditionalTags) {
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/BufferedOakDirectory.java`
#### Snippet
```java
            if (LOG.isDebugEnabled()) {
                LOG.debug("Reopen buffered OakDirectory. Current list of files: {}",
                        Arrays.asList(buffered.listAll()));
            }
            buffered.close();
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/BlobStoreOptions.java`
#### Snippet
```java

    public BlobStoreOptions(OptionParser parser){
        fdsOption = parser.acceptsAll(asList("fds"), "FileDataStore config path")
                .withRequiredArg().ofType(String.class);
        fdsPathOption = parser.acceptsAll(asList("fds-path"), "FileDataStore path")
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/BlobStoreOptions.java`
#### Snippet
```java
        fdsOption = parser.acceptsAll(asList("fds"), "FileDataStore config path")
                .withRequiredArg().ofType(String.class);
        fdsPathOption = parser.acceptsAll(asList("fds-path"), "FileDataStore path")
                .withRequiredArg().ofType(String.class);
        fakeDsPathOption = parser.acceptsAll(asList("fake-ds-path"), "Path to be used to construct a Fake " +
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/BlobStoreOptions.java`
#### Snippet
```java
        fdsPathOption = parser.acceptsAll(asList("fds-path"), "FileDataStore path")
                .withRequiredArg().ofType(String.class);
        fakeDsPathOption = parser.acceptsAll(asList("fake-ds-path"), "Path to be used to construct a Fake " +
                "FileDataStore. It return an empty stream for any Blob but allows writes if used in read-write mode. (for testing purpose only)")
                .withRequiredArg().ofType(String.class);
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/Options.java`
#### Snippet
```java

    public Options(OptionBeans... options) {
        this.oakRunOptions = Sets.newEnumSet(asList(options), OptionBeans.class);
    }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/CompositeStoreFixture.java`
#### Snippet
```java

    private static final MountInfoProvider MOUNT_INFO_PROVIDER = Mounts.newBuilder()
            .mount("libs", true, asList(
                    "/oak:index/*$" // pathsSupportingFragments
            ), asList(
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java

            if (concurrencyLevels == null || concurrencyLevels.isEmpty()) {
                concurrencyLevels = Arrays.asList(1);
            }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BenchmarkRunner.java`
#### Snippet
```java
        if (benchmarks.isEmpty()) {
            System.err.println("Warning: no benchmarks specified, supported benchmarks are: "
                    + asSortedString(Arrays.asList(allBenchmarks)));
        }

```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilityRunner.java`
#### Snippet
```java

        addToScalabilitySuiteList(
                Arrays.asList(
                        new ScalabilityStandbySuite()
                                .addBenchmarks(new StandbyBulkTransferBenchmark()
```

### ArraysAsListWithZeroOrOneArgument
Call to `asList()` with only one argument
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/ScalabilityRunner.java`
#### Snippet
```java
        if (argmap.isEmpty()) {
            System.err.println("Warning: no scalability suites specified, " +
                "supported  are: " + Arrays.asList(allSuites));
        }

```

## RuleId[id=PointlessBooleanExpression]
### PointlessBooleanExpression
`NOAPPEND == false` can be simplified to '!NOAPPEND'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    private static boolean isAppendableUpdate(UpdateOp update) {
        return NOAPPEND == false;
    }

```

### PointlessBooleanExpression
`earlyShutdown == false` can be simplified to '!earlyShutdown'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java

    private boolean overrideEarlyShutdown() {
        if (earlyShutdown == false) {
            return false;
        }
```

## RuleId[id=IntegerDivisionInFloatingPointContext]
### IntegerDivisionInFloatingPointContext
`value.length() / (4 * 1024)`: integer division in floating-point context
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java
        @Override public int weigh(String key, File value) {
            // convert to number of 4 KB blocks
            return Math.round(value.length() / (4 * 1024));
        }};

```

### IntegerDivisionInFloatingPointContext
`maxSize / (1024L * 4)`: integer division in floating-point context
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java

        // convert to number of 4 KB blocks
        long size = Math.round(maxSize / (1024L * 4));

        cacheLoader = new CacheLoader<String, File>() {
```

### IntegerDivisionInFloatingPointContext
`(now - rec.scope.toMs) / rec.suggestedIntervalMs`: integer division in floating-point context
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollector.java`
#### Snippet
```java
        if (rec.suggestedIntervalMs > 0) {
            estimatedIterations = (int)Math.ceil(
                    (now - rec.scope.toMs) / rec.suggestedIntervalMs);
        }
        return new VersionGCInfo(rec.lastOldestTimestamp, rec.scope.fromMs,
```

### IntegerDivisionInFloatingPointContext
`maxMergedSegmentBytes / 1024 / 1024.`: integer division in floating-point context
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
     * @see #getMaxMergedSegmentMB */
    public double getMaxMergedSegmentMB() {
        return maxMergedSegmentBytes / 1024 / 1024.;
    }

```

### IntegerDivisionInFloatingPointContext
`maxMergedSegmentBytes / 1024 / 1024.`: integer division in floating-point context
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
        sb.append("maxMergeAtOnce=").append(maxMergeAtOnce).append(", ");
        sb.append("maxMergeAtOnceExplicit=").append(maxMergeAtOnceExplicit).append(", ");
        sb.append("maxMergedSegmentMB=").append(maxMergedSegmentBytes / 1024 / 1024.).append(", ");
        sb.append("floorSegmentMB=").append(floorSegmentBytes / 1024 / 1024.).append(", ");
        sb.append("forceMergeDeletesPctAllowed=").append(forceMergeDeletesPctAllowed).append(", ");
```

### IntegerDivisionInFloatingPointContext
`floorSegmentBytes / 1024 / 1024.`: integer division in floating-point context
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
        sb.append("maxMergeAtOnceExplicit=").append(maxMergeAtOnceExplicit).append(", ");
        sb.append("maxMergedSegmentMB=").append(maxMergedSegmentBytes / 1024 / 1024.).append(", ");
        sb.append("floorSegmentMB=").append(floorSegmentBytes / 1024 / 1024.).append(", ");
        sb.append("forceMergeDeletesPctAllowed=").append(forceMergeDeletesPctAllowed).append(", ");
        sb.append("segmentsPerTier=").append(segsPerTier).append(", ");
```

## RuleId[id=UseBulkOperation]
### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
            if (!toBeInserted.isEmpty()) {
                for (String id : insert(connection, tmd, toBeInserted)) {
                    successfulUpdates.add(id);
                }
            }
```

### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
                Set<String> set1 = new HashSet<String>();
                for (String aVca1 : vca1) {
                    set1.add(aVca1);
                }
                String[] vca2 = getNewDef().getValueConstraints();
```

### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
                Set<String> set2 = new HashSet<String>();
                for (String aVca2 : vca2) {
                    set2.add(aVca2);
                }

```

### UseBulkOperation
Iteration can be replaced with bulk 'Map.putAll()' call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenLoginModule.java`
#### Snippet
```java
    private static AuthInfo getAuthInfo(@NotNull TokenInfo tokenInfo, @NotNull Iterable<? extends Principal> principals) {
        Map<String, Object> attributes = new HashMap<>();
        tokenInfo.getPublicAttributes().forEach((key, value) -> attributes.put(key, value));
        return new AuthInfoImpl(tokenInfo.getUserId(), attributes, principals);
    }
```

### UseBulkOperation
Iteration can be replaced with bulk 'Map.putAll()' call
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/ConfigInstaller.java`
#### Snippet
```java

        for (Map.Entry<String, String> e : simpleConfig.entrySet()) {
            current.put(e.getKey(), e.getValue());
        }
    }
```

### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
                        if (!suggestions.isEmpty()) {
                            for (SimpleOrderedMap<Object> suggestion : suggestions) {
                                retrievedSuggestions.add(suggestion);
                            }
                        }
```

### UseBulkOperation
Iteration can be replaced with bulk 'Collection.addAll()' call
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/NamespacePrefixNodestoreChecker.java`
#### Snippet
```java
        public Context(String[] prefixes) {
            for (String prefix : prefixes ) {
                validPrefixes.add(prefix);
            }
        }
```

## RuleId[id=StringEquality]
### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/PropertyExistenceImpl.java`
#### Snippet
```java
    
    private static boolean equalsStrings(String a, String b) {
        return a == null || b == null ? a == b : a.equals(b);
    }

```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/PropertyInexistenceImpl.java`
#### Snippet
```java
    
    private static boolean equalsStrings(String a, String b) {
        return a == null || b == null ? a == b : a.equals(b);
    }

```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java

    public boolean isFinished() {
        return indexStats.getStatus() == STATUS_DONE;
    }

```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/LocalNameMapper.java`
#### Snippet
```java
        if (jcrName.startsWith("{")) {
            String oakName = getOakNameFromExpanded(jcrName);
            if (oakName != jcrName) {
                return oakName;
            } // else not an expanded name, so fall through to local mapping
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        readStats.mark();
        String childName = getTemplate().getChildName();
        if (childName == Template.ZERO_CHILD_NODES) {
            return Collections.emptyList();
        } else if (childName == Template.MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        if (childName == Template.ZERO_CHILD_NODES) {
            return Collections.emptyList();
        } else if (childName == Template.MANY_CHILD_NODES) {
            return getChildNodeMap().getEntries();
        } else {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        readStats.mark();
        String childName = getTemplate().getChildName();
        if (childName == Template.ZERO_CHILD_NODES) {
            return Collections.emptyList();
        } else if (childName == Template.MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        if (childName == Template.ZERO_CHILD_NODES) {
            return Collections.emptyList();
        } else if (childName == Template.MANY_CHILD_NODES) {
            return getChildNodeMap().getKeys();
        } else {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        readStats.mark();
        String childName = getTemplate().getChildName();
        if (childName == Template.ZERO_CHILD_NODES) {
            return 0;
        } else if (childName == Template.MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        if (childName == Template.ZERO_CHILD_NODES) {
            return 0;
        } else if (childName == Template.MANY_CHILD_NODES) {
            return getChildNodeMap().size();
        } else {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
                                 PropertyTemplate propertyTemplate) {
        int ids = 2;
        if (template.getChildName() != Template.ZERO_CHILD_NODES) {
            ids++;
        }
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        String beforeChildName = beforeTemplate.getChildName();
        String afterChildName = afterTemplate.getChildName();
        if (afterChildName == Template.ZERO_CHILD_NODES) {
            if (beforeChildName != Template.ZERO_CHILD_NODES) {
                for (ChildNodeEntry entry
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        String afterChildName = afterTemplate.getChildName();
        if (afterChildName == Template.ZERO_CHILD_NODES) {
            if (beforeChildName != Template.ZERO_CHILD_NODES) {
                for (ChildNodeEntry entry
                        : beforeTemplate.getChildNodeEntries(beforeId)) {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
                }
            }
        } else if (afterChildName != Template.MANY_CHILD_NODES) {
            NodeState afterNode =
                    afterTemplate.getChildNode(afterChildName, afterId);
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
                }
            }
            if (beforeChildName == Template.MANY_CHILD_NODES
                    || (beforeChildName != Template.ZERO_CHILD_NODES
                        && !beforeNode.exists())) {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
            }
            if (beforeChildName == Template.MANY_CHILD_NODES
                    || (beforeChildName != Template.ZERO_CHILD_NODES
                        && !beforeNode.exists())) {
                for (ChildNodeEntry entry
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
                }
            }
        } else if (beforeChildName == Template.ZERO_CHILD_NODES) {
            for (ChildNodeEntry entry
                    : afterTemplate.getChildNodeEntries(afterId)) {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
                }
            }
        } else if (beforeChildName != Template.MANY_CHILD_NODES) {
            boolean beforeChildRemoved = true;
            NodeState beforeChild =
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        readStats.mark();
        String childName = getTemplate().getChildName();
        if (childName == Template.MANY_CHILD_NODES) {
            MapEntry child = getChildNodeMap().getEntry(name);
            if (child != null) {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
                return child.getNodeState();
            }
        } else if (childName != Template.ZERO_CHILD_NODES
                && childName.equals(name)) {
            RecordId childNodeId = getSegment().readRecordId(getRecordNumber(), 0, 2);
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        readStats.mark();
        String childName = getTemplate().getChildName();
        if (childName == Template.ZERO_CHILD_NODES) {
            return false;
        } else if (childName == Template.MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        if (childName == Template.ZERO_CHILD_NODES) {
            return false;
        } else if (childName == Template.MANY_CHILD_NODES) {
            return getChildNodeMap().getEntry(name) != null;
        } else {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeState.java`
#### Snippet
```java
        Segment segment = getSegment();
        int ids = 2;
        if (template.getChildName() != Template.ZERO_CHILD_NODES) {
            ids++;
        }
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java

        // Recurses into child nodes in this segment
        if (template.getChildName() == MANY_CHILD_NODES) {
            RecordId childMapId = segment.readRecordId(nodeId.getRecordNumber(), 0, 2);
            MapRecord childMap = reader.readMap(childMapId);
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
                }
            }
        } else if (template.getChildName() != ZERO_CHILD_NODES) {
            RecordId childId = segment.readRecordId(nodeId.getRecordNumber(), 0, 2);
            onNode(nodeId, childId);
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentParser.java`
#### Snippet
```java
        }

        int ids = template.getChildName() == ZERO_CHILD_NODES ? 1 : 2;
        size += ids * RECORD_ID_BYTES;

```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java

    MapRecord getChildNodeMap(RecordId recordId) {
        checkState(childName != ZERO_CHILD_NODES);
        Segment segment = recordId.getSegment();
        RecordId childNodesId = segment.readRecordId(recordId.getRecordNumber(), 2 * RECORD_ID_BYTES);
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java

    short getTemplateType() {
        if (childName == ZERO_CHILD_NODES) {
            return ZERO_CHILD_NODES_TYPE;
        } else if (childName == MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
        if (childName == ZERO_CHILD_NODES) {
            return ZERO_CHILD_NODES_TYPE;
        } else if (childName == MANY_CHILD_NODES) {
            return MANY_CHILD_NODES_TYPE;
        } else {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java

    public NodeState getChildNode(String name, RecordId recordId) {
        if (childName == ZERO_CHILD_NODES) {
            return MISSING_NODE;
        } else if (childName == MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
        if (childName == ZERO_CHILD_NODES) {
            return MISSING_NODE;
        } else if (childName == MANY_CHILD_NODES) {
            MapRecord map = getChildNodeMap(recordId);
            MapEntry child = map.getEntry(name);
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java

        // Compare child nodes
        if (childName == ZERO_CHILD_NODES) {
            return true;
        } else if (childName != MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
        if (childName == ZERO_CHILD_NODES) {
            return true;
        } else if (childName != MANY_CHILD_NODES) {
            NodeState thisChild = getChildNode(childName, thisId);
            NodeState thatChild = getChildNode(childName, thatId);
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
            builder.append(" = ?, ");
        }
        if (childName == ZERO_CHILD_NODES) {
            builder.append("<no children>");
        } else if (childName == MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
        if (childName == ZERO_CHILD_NODES) {
            builder.append("<no children>");
        } else if (childName == MANY_CHILD_NODES) {
            builder.append("<many children>");
        } else {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java

    Iterable<? extends ChildNodeEntry> getChildNodeEntries(RecordId recordId) {
        if (childName == ZERO_CHILD_NODES) {
            return Collections.emptyList();
        } else if (childName == MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
        if (childName == ZERO_CHILD_NODES) {
            return Collections.emptyList();
        } else if (childName == MANY_CHILD_NODES) {
            MapRecord map = getChildNodeMap(recordId);
            return map.getEntries();
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java

        int offset = 2 * RECORD_ID_BYTES;
        if (childName != ZERO_CHILD_NODES) {
            offset += RECORD_ID_BYTES;
        }
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java

            String childName = template.getChildName();
            if (childName == Template.MANY_CHILD_NODES) {
                ids.add(writeChildNodes(before, state));
            } else if (childName != Template.ZERO_CHILD_NODES) {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java
            if (childName == Template.MANY_CHILD_NODES) {
                ids.add(writeChildNodes(before, state));
            } else if (childName != Template.ZERO_CHILD_NODES) {
                ids.add(writeNode(state.getChildNode(template.getChildName()), null));
            }
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java
            RecordId childNameId = null;
            String childName = template.getChildName();
            if (childName == Template.ZERO_CHILD_NODES) {
                head |= 1 << 29;
            } else if (childName == Template.MANY_CHILD_NODES) {
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/DefaultSegmentWriter.java`
#### Snippet
```java
            if (childName == Template.ZERO_CHILD_NODES) {
                head |= 1 << 29;
            } else if (childName == Template.MANY_CHILD_NODES) {
                head |= 1 << 28;
            } else {
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/TarReader.java`
#### Snippet
```java
                if (reader != null) {
                    for (String other : archives) {
                        if (other != name) {
                            log.info("Removing unused tar file {}", other);
                            archiveManager.delete(other);
```

### StringEquality
String values are compared using `!=`, not 'equals()'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/session/SessionNamespaces.java`
#### Snippet
```java
            prefix = base + i;
        }
        if (base != prefix) {
            local.put(prefix, uri);
        }
```

### StringEquality
String values are compared using `==`, not 'equals()'
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeState.java`
#### Snippet
```java
        for (String name : nodeNames) {
            totalCount++;
            if (name == STOP_COUNTING_CHILDREN || totalCount >= max) {
                return MAX_VALUE;
            }
```

## RuleId[id=ConditionalBreakInInfiniteLoop]
### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeState.java`
#### Snippet
```java
                } else if ("children".equals(k)) {
                    json.read('[');
                    while (true) {
                        if (json.matches(']')) {
                            break;
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java`
#### Snippet
```java
        case '{':
            TreeMap<Revision, Object> map = new TreeMap<Revision, Object>(REVERSE);
            while (true) {
                if (json.matches('}')) {
                    break;
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java`
#### Snippet
```java
        ClusterNodeInfoDocument infoDoc = nodeInfo;
        int clusterId = infoDoc.getClusterId();
        for (;;) {
            if (missingLastRevUtil.acquireRecoveryLock(
                    clusterId, revisionContext.getClusterId())) {
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJSONSupport.java`
#### Snippet
```java
                if (useRevisionMaps) {
                    Map<Revision, Object> map = new TreeMap<Revision, Object>(StableRevisionComparator.REVERSE);
                    while (true) {
                        if (json.matches('}')) {
                            break;
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJSONSupport.java`
#### Snippet
```java
                } else {
                    Map<String, Object> map = new HashMap<String, Object>();
                    while (true) {
                        if (json.matches('}')) {
                            break;
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJSONSupport.java`
#### Snippet
```java
            case '[':
                List<Object> list = new ArrayList<Object>();
                while (true) {
                    if (json.matches(']')) {
                        break;
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/json/JsopTokenizer.java`
#### Snippet
```java
                }
                pos++;
                while (true) {
                    ch = jsop.charAt(pos++);
                    if (ch == '*' && jsop.charAt(pos) == '/') {
```

### ConditionalBreakInInfiniteLoop
Conditional break inside loop
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
        }
        Query q = parseSelect();
        while (true) {
            if (!readIf("UNION")) {
                break;
```

## RuleId[id=LoopStatementsThatDontLoop]
### LoopStatementsThatDontLoop
`while` statement does not loop
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
            @Override
            protected LuceneResultRow computeNext() {
                while (!queue.isEmpty() || loadDocs()) {
                    return queue.remove();
                }
```

### LoopStatementsThatDontLoop
`while` statement does not loop
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
            @Override
            protected FulltextResultRow computeNext() {
                while (!queue.isEmpty() || loadDocs()) {
                    return queue.remove();
                }
```

## RuleId[id=RedundantClassCall]
### RedundantClassCall
Redundant call to `isInstance()`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/metric/MetricStatisticsProvider.java`
#### Snippet
```java
            @Override
            public boolean isInstance(Stats metric) {
                return MeterStats.class.isInstance(metric);
            }

```

### RedundantClassCall
Redundant call to `isInstance()`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/metric/MetricStatisticsProvider.java`
#### Snippet
```java
            @Override
            public boolean isInstance(Stats metric) {
                return TimerStats.class.isInstance(metric);
            }

```

### RedundantClassCall
Redundant call to `isInstance()`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/metric/MetricStatisticsProvider.java`
#### Snippet
```java
            @Override
            public boolean isInstance(Stats metric) {
                return HistogramStats.class.isInstance(metric);
            }

```

### RedundantClassCall
Redundant call to `isInstance()`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/metric/MetricStatisticsProvider.java`
#### Snippet
```java
            @Override
            public boolean isInstance(Stats metric) {
                return CounterStats.class.isInstance(metric);
            }

```

## RuleId[id=UnnecessaryStringEscape]
### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                    StaticOperandImpl esc = parseStaticOperand();
                    if (!(esc instanceof LiteralImpl)) {
                        throw getSyntaxError("only ESCAPE '\' is supported");
                    }
                    PropertyValue v = ((LiteralImpl) esc).getLiteralValue();
```

### UnnecessaryStringEscape
`\'` is unnecessarily escaped
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                    PropertyValue v = ((LiteralImpl) esc).getLiteralValue();
                    if (!v.getValue(Type.STRING).equals("\\")) {
                        throw getSyntaxError("only ESCAPE '\' is supported");
                    }
                }
```

## RuleId[id=ManualArrayCopy]
### ManualArrayCopy
Manual array copy
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/queue/SegmentWriteAction.java`
#### Snippet
```java

        this.buffer = new byte[length];
        for (int i = 0; i < length; i++) {
            this.buffer[i] = buffer[i + offset];
        }
```

## RuleId[id=RefusedBequest]
### RefusedBequest
Method `clone()` does not call 'super.clone()'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexInput.java`
#### Snippet
```java

    @Override
    public OakIndexInput clone() {
        // TODO : shouldn't we call super#clone ?
        OakIndexInput clonedIndexInput = new OakIndexInput(this);
```

### RefusedBequest
Method `clone()` does not call 'super.clone()'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakBufferedIndexFile.java`
#### Snippet
```java

    @Override
    public OakIndexFile clone() {
        return new OakBufferedIndexFile(this);
    }
```

### RefusedBequest
Method `clone()` does not call 'super.clone()'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakStreamingIndexFile.java`
#### Snippet
```java

    @Override
    public OakIndexFile clone() {
        return new OakStreamingIndexFile(this);
    }
```

## RuleId[id=RedundantArrayCreation]
### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    // set of supported indexed properties
    private static final Set<String> INDEXEDPROPERTIES = new HashSet<String>(Arrays.asList(new String[] { MODIFIED,
            NodeDocument.HAS_BINARY_FLAG, NodeDocument.DELETED_ONCE, NodeDocument.SD_TYPE, NodeDocument.SD_MAX_REV_TIME_IN_SECS, VERSIONPROP }));

    // set of required table columns
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    // set of optional table columns
    private static final Set<String> OPTIONALCOLUMNS = Collections
            .unmodifiableSet(new HashSet<String>(Arrays.asList(new String[] { "version", "sdtype", "sdmaxrevtime" })));

    // set of properties not serialized to JSON
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    // set of properties not serialized to JSON, schema version 2
    private static final Set<String> COLUMNPROPERTIES2 = new HashSet<String>(Arrays.asList(
            new String[] { ID, NodeDocument.HAS_BINARY_FLAG, NodeDocument.DELETED_ONCE, COLLISIONSMODCOUNT, MODIFIED, MODCOUNT,
                    NodeDocument.SD_TYPE, NodeDocument.SD_MAX_REV_TIME_IN_SECS, VERSIONPROP }));

    private final RDBDocumentSerializer ser = new RDBDocumentSerializer(this);
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    // set of required table columns
    private static final Set<String> REQUIREDCOLUMNS = Collections.unmodifiableSet(new HashSet<String>(Arrays.asList(
            new String[] { "id", "dsize", "deletedonce", "bdata", "data", "cmodcount", "modcount", "hasbinary", "modified" })));

    // set of optional table columns
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    // set of properties not serialized to JSON
    private static final Set<String> COLUMNPROPERTIES = new HashSet<String>(Arrays.asList(
            new String[] { ID, NodeDocument.HAS_BINARY_FLAG, NodeDocument.DELETED_ONCE, COLLISIONSMODCOUNT, MODIFIED, MODCOUNT }));
    // set of properties not serialized to JSON, schema version 2
    private static final Set<String> COLUMNPROPERTIES2 = new HashSet<String>(Arrays.asList(
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ClusterNodesCommand.java`
#### Snippet
```java

        List<String> header = new ArrayList<>();
        header.addAll(Arrays.asList(new String[] { sId, sState, sStarted, sLeaseEnd, sLeft, sRecoveryBy }));
        if (verbose) {
            header.add(sLastRootRev);
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
    // level, no WARNING)
    private static final Set<String> ACCEPTEDCLASSES = new HashSet<String>(
            Arrays.asList(new String[] { ImporterImpl.class.getName() }));

    public static void handleCall(String operation) throws UnsupportedRepositoryOperationException {
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
    // log message
    private static final Set<String> IGNOREDCLASSES = new HashSet<String>(Arrays.asList(
            new String[] { Thread.class.getName(), java.lang.reflect.Method.class.getName(), LockDeprecation.class.getName(),
                    LockManagerImpl.class.getName(), NodeImpl.class.getName(), SessionImpl.class.getName() }));

    // classes for which we tolerate locking related calls for now (only TRACE
```

### RedundantArrayCreation
Redundant array creation for calling varargs method
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java

    public static final List DEFAULT_TYPES = Arrays.asList(
            new String[]{"pdf", "rtf", "doc", "ppt", "xls"});

    public static class Search {
```

## RuleId[id=DuplicateBranchesInSwitch]
### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ValueConverter.java`
#### Snippet
```java
                    case PropertyType.PATH:
                        // prefix name with "./" (JCR 2.0 spec 3.6.4.9)
                        return PropertyValues.newUri("./" + v);
                }
        }
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/Constraints.java`
#### Snippet
```java
                return new ReferenceConstraint(constraint);
            case PropertyType.WEAKREFERENCE:
                return new ReferenceConstraint(constraint);
            case PropertyType.URI:
                return new StringConstraint(constraint);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/constraint/Constraints.java`
#### Snippet
```java
                return new ReferenceConstraint(constraint);
            case PropertyType.URI:
                return new StringConstraint(constraint);
            case PropertyType.DECIMAL:
                return new DecimalConstraint(constraint);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/CompiledPermissionImpl.java`
#### Snippet
```java
                }
            case INTERNAL:
                return PrivilegeBits.EMPTY;
            default:
                return getPrivilegeBits(tree);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/mount/FragmentMatcher.java`
#### Snippet
```java
                        break;
                    case '$':
                        i++;
                        break;
                    default:
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/SinglePropertyState.java`
#### Snippet
```java
            case PropertyType.DATE: return (S) getConverter().toDate();
            case PropertyType.BOOLEAN: return (S) (Boolean) getConverter().toBoolean();
            case PropertyType.NAME: return (S) getConverter().toString();
            case PropertyType.PATH: return (S) getConverter().toString();
            case PropertyType.REFERENCE: return (S) getConverter().toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/SinglePropertyState.java`
#### Snippet
```java
            case PropertyType.BOOLEAN: return (S) (Boolean) getConverter().toBoolean();
            case PropertyType.NAME: return (S) getConverter().toString();
            case PropertyType.PATH: return (S) getConverter().toString();
            case PropertyType.REFERENCE: return (S) getConverter().toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter().toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/SinglePropertyState.java`
#### Snippet
```java
            case PropertyType.NAME: return (S) getConverter().toString();
            case PropertyType.PATH: return (S) getConverter().toString();
            case PropertyType.REFERENCE: return (S) getConverter().toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter().toString();
            case PropertyType.URI: return (S) getConverter().toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/SinglePropertyState.java`
#### Snippet
```java
            case PropertyType.PATH: return (S) getConverter().toString();
            case PropertyType.REFERENCE: return (S) getConverter().toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter().toString();
            case PropertyType.URI: return (S) getConverter().toString();
            case PropertyType.DECIMAL: return (S) getConverter().toDecimal();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/SinglePropertyState.java`
#### Snippet
```java
            case PropertyType.REFERENCE: return (S) getConverter().toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter().toString();
            case PropertyType.URI: return (S) getConverter().toString();
            case PropertyType.DECIMAL: return (S) getConverter().toDecimal();
            default: throw new IllegalArgumentException("Unknown type:" + type);
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MultiPropertyState.java`
#### Snippet
```java
            case PropertyType.LONG: return (S) (Long) getConverter(values.get(index)).toLong();
            case PropertyType.DOUBLE: return (S) (Double) getConverter(values.get(index)).toDouble();
            case PropertyType.DATE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.BOOLEAN: return (S) (Boolean) getConverter(values.get(index)).toBoolean();
            case PropertyType.NAME: return (S) getConverter(values.get(index)).toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MultiPropertyState.java`
#### Snippet
```java
            case PropertyType.DATE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.BOOLEAN: return (S) (Boolean) getConverter(values.get(index)).toBoolean();
            case PropertyType.NAME: return (S) getConverter(values.get(index)).toString();
            case PropertyType.PATH: return (S) getConverter(values.get(index)).toString();
            case PropertyType.REFERENCE: return (S) getConverter(values.get(index)).toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MultiPropertyState.java`
#### Snippet
```java
            case PropertyType.BOOLEAN: return (S) (Boolean) getConverter(values.get(index)).toBoolean();
            case PropertyType.NAME: return (S) getConverter(values.get(index)).toString();
            case PropertyType.PATH: return (S) getConverter(values.get(index)).toString();
            case PropertyType.REFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter(values.get(index)).toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MultiPropertyState.java`
#### Snippet
```java
            case PropertyType.NAME: return (S) getConverter(values.get(index)).toString();
            case PropertyType.PATH: return (S) getConverter(values.get(index)).toString();
            case PropertyType.REFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.URI: return (S) getConverter(values.get(index)).toString();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MultiPropertyState.java`
#### Snippet
```java
            case PropertyType.PATH: return (S) getConverter(values.get(index)).toString();
            case PropertyType.REFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.URI: return (S) getConverter(values.get(index)).toString();
            case PropertyType.DECIMAL: return (S) getConverter(values.get(index)).toDecimal();
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MultiPropertyState.java`
#### Snippet
```java
            case PropertyType.REFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.WEAKREFERENCE: return (S) getConverter(values.get(index)).toString();
            case PropertyType.URI: return (S) getConverter(values.get(index)).toString();
            case PropertyType.DECIMAL: return (S) getConverter(values.get(index)).toDecimal();
            default: throw new IllegalArgumentException("Unknown type:" + type);
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/query/qom/LiteralImpl.java`
#### Snippet
```java
                return cast("REFERENCE");
            case PropertyType.STRING:
                return escape(value.getString());
            case PropertyType.URI:
                return cast("URI");
```

### DuplicateBranchesInSwitch
Duplicate branch in 'switch'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/util/SolrUtils.java`
#### Snippet
```java
                return propertyName + "_double_sort";
            case PropertyType.DECIMAL:
                return propertyName + "_double_sort";
            default:
                return propertyName + "_string_sort";
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/DefaultSolrConfiguration.java`
#### Snippet
```java
            }
            case NO_RESTRICTION:
                break;
            default:
                break;
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/osgi/OakSolrConfigurationProviderService.java`
#### Snippet
```java
                        }
                        case NO_RESTRICTION:
                            break;
                        default:
                            break;
```

### DuplicateBranchesInSwitch
Branch in 'switch' is a duplicate of the default branch
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/OakSolrNodeStateConfiguration.java`
#### Snippet
```java
            }
            case NO_RESTRICTION:
                break;
            default:
                break;
```

## RuleId[id=NonFinalFieldInEnum]
### NonFinalFieldInEnum
Non-final field `type` in enum 'SegmentStoreType'
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsToolUtils.java`
#### Snippet
```java
        TAR("TarMK Segment Store"), AWS("AWS Segment Store");

        private String type;

        SegmentStoreType(String type) {
```

### NonFinalFieldInEnum
Non-final field `type` in enum 'ExporterType'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/MetricsExporterFixtureProvider.java`
#### Snippet
```java
        pushgateway("Prometheus Push Gateway");

        private String type;

        ExporterType(String type) {
```

### NonFinalFieldInEnum
Non-final field `type` in enum 'ExporterType'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/MetricsExporterFixture.java`
#### Snippet
```java
        pushgateway("Prometheus Push Gateway");

        private String type;

        ExporterType(String type) {
```

### NonFinalFieldInEnum
Non-final field `type` in enum 'SegmentStoreType'
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java
        TAR("TarMK Segment Store"), AZURE("Azure Segment Store");

        private String type;

        SegmentStoreType(String type) {
```

## RuleId[id=RegExpSimplifiable]
### RegExpSimplifiable
`[=]` can be simplified to '='
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/ConfigInstaller.java`
#### Snippet
```java
        return s.replaceAll("[(]", "\\\\(").
                replaceAll("[)]", "\\\\)").
                replaceAll("[=]", "\\\\=").
                replaceAll("[\\*]", "\\\\*");
    }
```

### RegExpSimplifiable
`[\\*]` can be simplified to '\\\*'
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/ConfigInstaller.java`
#### Snippet
```java
                replaceAll("[)]", "\\\\)").
                replaceAll("[=]", "\\\\=").
                replaceAll("[\\*]", "\\\\*");
    }

```

### RegExpSimplifiable
`\\p{Space}` can be simplified to '\\s'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/DocViewImportHandler.java`
#### Snippet
```java
     */
    private Iterable<String> parseNames(String value) throws SAXException {
        String[] names = value.split("\\p{Space}+");
        List<String> qnames = Lists.newArrayListWithCapacity(names.length);
        for (String name : names) {
```

## RuleId[id=OctalLiteral]
### OctalLiteral
Octal integer `0400`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/SegmentTarWriter.java`
#### Snippet
```java
        // File mode
        System.arraycopy(
                String.format("%07o", 0400).getBytes(UTF_8), 0,
                header, 100, 7);

```

## RuleId[id=DuplicateExpressions]
### DuplicateExpressions
Multiple occurrences of `Paths.get(comparePath)`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDiffCommand.java`
#### Snippet
```java
                    return;
                }
                if (Files.isRegularFile(Paths.get(comparePath))) {
                    System.out.println("Comparing indexes " + index1 + " and " + index2 +
                            " in file \"" +
```

### DuplicateExpressions
Multiple occurrences of `Paths.get(comparePath)`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDiffCommand.java`
#### Snippet
```java
                            " in file \"" +
                            comparePath + "\"");
                    System.out.println(IndexDiff.compareIndexesInFile(Paths.get(comparePath), index1, index2));
                } else {
                    System.out.println("Comparing indexes " + index1 + " and " + index2 +
```

## RuleId[id=StringBufferReplaceableByString]
### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeState.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder buff = new StringBuilder();
        buff.append("{ path: '").append(path).append("', ");
        buff.append("rootRevision: '").append(rootRevision).append("', ");
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/async/InvalidateCacheAction.java`
#### Snippet
```java
    @Override
    public String toString() {
        return new StringBuilder("InvalidateCacheAction").append(Iterables.toString(keys)).toString();
    }
}
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/async/PutToCacheAction.java`
#### Snippet
```java
    @Override
    public String toString() {
        return new StringBuilder("PutToCacheAction[").append(key).append(']').toString();
    }
}
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
        @Override
        public String toString() {
            final StringBuilder sb = new StringBuilder("PoolConfig{");
            sb.append("maxActiveSize=").append(maxActiveSize);
            sb.append(", lookupOnValidate=").append(lookupOnValidate);
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
        @Override
        public String toString() {
            final StringBuilder sb = new StringBuilder("Identity{");
            sb.append("baseDN='").append(baseDN).append('\'');
            sb.append(", objectClasses=").append(Arrays.toString(objectClasses));
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapProviderConfig.java`
#### Snippet
```java
    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder("LdapProviderConfig{");
        sb.append("name='").append(name).append('\'');
        sb.append(", hostname='").append(hostname).append('\'');
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/json/JsopBuilder.java`
#### Snippet
```java
            }
        }
        StringBuilder buff = new StringBuilder(length + 2);
        return buff.append('\"').append(s).append('\"').toString();
    }
```

### StringBufferReplaceableByString
`StringBuilder builder` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/NativeFunctionImpl.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("native(");
        builder.append(quote(selectorName));
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
    @Override
    public String getIndexCostInfo() {
        StringBuilder buff = new StringBuilder();
        buff.append("{ ");
        buff.append(left.getIndexCostInfo());
```

### StringBufferReplaceableByString
`StringBuilder builder` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SpellcheckImpl.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("spellcheck(");
        builder.append(quote(selectorName));
```

### StringBufferReplaceableByString
`StringBuilder builder` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SuggestImpl.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("suggest(");
        builder.append(quote(selectorName));
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java`
#### Snippet
```java
    @Override
    public String getPlan(NodeState rootState) {
        StringBuilder buff = new StringBuilder();
        buff.append(left.getPlan(rootState)).
            append(' ').
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java`
#### Snippet
```java
    @Override
    public String getIndexCostInfo(NodeState rootState) {
        StringBuilder buff = new StringBuilder();
        buff.append(toString());
        buff.append("{ ");
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsMBeanImpl.java`
#### Snippet
```java
        }
        if (statement.length() > MAX_QUERY_SIZE) {
            statement = new StringBuilder().append("Truncated query: ")
                    .append(statement.substring(0, MAX_QUERY_SIZE >> 1))
                    .append(" ...... ")
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        @Override
        public String toString() {
            StringBuilder buff = new StringBuilder("suggest(");
            buff.append(term);
            buff.append(')');
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        @Override
        public String toString() {
            StringBuilder buff = new StringBuilder("cast(");
            buff.append(expr.toString());
            buff.append(" as ").append(type).append(')');
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        @Override
        public String toString() {
            StringBuilder buff = new StringBuilder("similar(");
            buff.append(property);
            buff.append(", ").append(path).append(')');
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        @Override
        public String toString() {
            StringBuilder buff = new StringBuilder("native(");
            buff.append(selector);
            buff.append(", ").append(language).append(", ").append(expression).append(')');
```

### StringBufferReplaceableByString
`StringBuilder buff` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
        @Override
        public String toString() {
            StringBuilder buff = new StringBuilder("spellcheck(");
            buff.append(term);
            buff.append(')');
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/AuthorizableImpl.java`
#### Snippet
```java
    public int hashCode() {
        if (hashCode == 0) {
            StringBuilder sb = new StringBuilder();
            sb.append(isGroup() ? "group:" : "user:");
            sb.append(':');
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/AuthorizableImpl.java`
#### Snippet
```java
    public String toString() {
        String typeStr = (isGroup()) ? "Group '" : "User '";
        return new StringBuilder().append(typeStr).append(id).append('\'').toString();
    }
    
```

### StringBufferReplaceableByString
`StringBuilder stmt` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserProvider.java`
#### Snippet
```java
        // index as well.
        try {
            StringBuilder stmt = new StringBuilder();
            stmt.append("SELECT * FROM [").append(UserConstants.NT_REP_AUTHORIZABLE).append(']');
            stmt.append(" WHERE [").append(UserConstants.REP_PRINCIPAL_NAME).append("] = $principalName");
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserProvider.java`
#### Snippet
```java
                                   @Nullable String intermediatePath) throws RepositoryException {
        String authRoot = (isGroup) ? groupPath : userPath;
        String folderPath = new StringBuilder()
                .append(authRoot)
                .append(getFolderPath(nodeName, intermediatePath, authRoot)).toString();
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserPrincipalProvider.java`
#### Snippet
```java

    private static String buildSearchPatternContains(@NotNull String nameHint) {
        StringBuilder sb = new StringBuilder();
        sb.append('%');
        sb.append(nameHint.replace("%", "\\%").replace("_", "\\_"));
```

### StringBufferReplaceableByString
`StringBuilder statement` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserPrincipalProvider.java`
#### Snippet
```java
            }
            AuthorizableType type = AuthorizableType.getType(searchType);
            StringBuilder statement = new StringBuilder()
                    .append(QueryUtil.getSearchRoot(type, config.getParameters()))
                    .append("//element(*,").append(QueryUtil.getNodeTypeName(type)).append(')')
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/principal/PrincipalProviderImpl.java`
#### Snippet
```java
            return "%";
        } else {
            StringBuilder sb = new StringBuilder();
            sb.append('%');
            sb.append(nameHint.replace("%", "\\%").replace("_", "\\_"));
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/principal/PrincipalImpl.java`
#### Snippet
```java
    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(getClass().getName()).append(':').append(name);
        return sb.toString();
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/state/NodeStateUtils.java`
#### Snippet
```java
            return "[null]";
        }
        StringBuilder sb = new StringBuilder();
        sb.append(toString(node, 1, "  ", "/"));
        return sb.toString();
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/explorer/NodeStoreTree.java`
#### Snippet
```java
            }
        } catch (Exception e) {
            StringBuilder sb = new StringBuilder();
            sb.append("Unable to switch head revision to ");
            sb.append(revision);
```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/SameNameSiblingsEditor.java`
#### Snippet
```java
        this.childrenDefsWithoutSns = parent.childrenDefsWithoutSns;
        this.builder = builder;
        this.path = new StringBuilder(parent.path).append('/').append(name).toString();
    }

```

### StringBufferReplaceableByString
`StringBuilder` can be replaced with 'String'
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeBuilder.java`
#### Snippet
```java
            return parentPath + name;
        } else {
            return new StringBuilder(parentPath.length() + name.length() + 1)
                    .append(parentPath)
                    .append('/')
```

### StringBufferReplaceableByString
`StringBuilder sb` can be replaced with 'String'
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/basic/DefaultSyncedIdentity.java`
#### Snippet
```java
    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder("DefaultSyncedIdentity{");
        sb.append("id='").append(id).append('\'');
        sb.append(", ref=").append(ref);
```

## RuleId[id=UnnecessaryReturn]
### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/NotImpl.java`
#### Snippet
```java
            // "b.y is null", because that would alter the
            // result
            return;
        }
        // ignore
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/spi/persistence/split/SplitSegmentArchiveManager.java`
#### Snippet
```java
        if (roArchiveList.contains(archiveName)) {
            // archive is in read only part
            return;
        } else {
            rwArchiveManager.backup(archiveName, backupArchiveName, recoveredEntries);
```

### UnnecessaryReturn
`return` is unnecessary as the last statement in a 'void' method
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/ExternalLoginTest.java`
#### Snippet
```java
        public void beforeTest() {
            if (!doReport) {
                return;
            }
        }
```

## RuleId[id=ManualMinMaxCalculation]
### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
              sweepIfRefsPastRetention);
        LOG.debug("Earliest reference available for timestamp [{}]", earliestRefAvailTime);
        earliestRefAvailTime = (earliestRefAvailTime < markStart ? earliestRefAvailTime : markStart);

        // Find all blob references after iterating over the whole repository
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
                    LOG.trace("Earliest ref timestamp {}", earliestRef);

                    return (earliestMarker < earliestRef ? earliestMarker : earliestRef);
                } else {
                    LOG.error("Not all repositories have marked references available : {} or older than retention time: {}",
```

### ManualMinMaxCalculation
Can be replaced with 'Math.max()' call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/TimeInterval.java`
#### Snippet
```java
    public TimeInterval notEarlierThan(long timestampMs) {
        if (fromMs < timestampMs) {
            return new TimeInterval(timestampMs, (timestampMs > toMs) ? timestampMs : toMs);
        } else {
            return this;
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/TimeInterval.java`
#### Snippet
```java
    public TimeInterval notLaterThan(long timestampMs) {
        if (timestampMs < toMs) {
            return new TimeInterval((timestampMs < fromMs) ? timestampMs : fromMs, timestampMs);
        } else {
            return this;
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
                    bucket);
                int batchSize = 500, startIndex = 0, size = deleteList.size();
                int endIndex = batchSize < size ? batchSize : size;
                while (endIndex <= size) {
                    delObjsReq.setKeys(Collections.unmodifiableList(deleteList.subList(
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
                    } else {
                        startIndex = endIndex;
                        endIndex = (startIndex + batchSize) < size
                                ? (startIndex + batchSize)
                                : size;
                    }
                }
```

### ManualMinMaxCalculation
Can be replaced with 'Math.max()' call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeDefDiff.java`
#### Snippet
```java
            });
            // select the most compatible ones
            final int size = defs1.size() > defs2.size() ? defs1.size() : defs2.size();
            AtomicInteger allowedNewNull = new AtomicInteger(defs1.size() - defs2.size());
            AtomicInteger allowedOldNull = new AtomicInteger(defs2.size() - defs1.size());
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MergeRunner.java`
#### Snippet
```java
        result.remove(MERGE_POISON_PILL);
        result.sort(fileSizeComparator);
        int endIdx = size > result.size() ? result.size() : size;
        return result.subList(0, endIdx);
    }
```

### ManualMinMaxCalculation
Can be replaced with 'Math.min()' call
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityStandbySuite.java`
#### Snippet
```java
        for (int j = 0; j <= nodeCount / 1000; j++) {
            Node folder = parent.addNode("Folder#" + j, "nt:folder");
            for (int i = 0; i < (nodeCount < 1000 ? nodeCount : 1000); i++) {
                Node file = folder.addNode("server" + i, "nt:file");

```

## RuleId[id=SimplifiableConditionalExpression]
### SimplifiableConditionalExpression
`builder == null ? false : builder.getReadOnlyMode()` can be simplified to 'builder!=null \&\& builder.getReadOnlyMode()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
    private void initialize(DataSource ds, DocumentNodeStoreBuilder<?> builder, RDBOptions options) throws Exception {

        this.readOnly = builder == null ? false : builder.getReadOnlyMode();
 
        this.tnData = RDBJDBCTools.createTableName(options.getTablePrefix(), "DATASTORE_DATA");
```

### SimplifiableConditionalExpression
`builder == null ? false : builder.getReadOnlyMode()` can be simplified to 'builder!=null \&\& builder.getReadOnlyMode()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoBlobStore.java`
#### Snippet
```java
    public MongoBlobStore(@NotNull MongoDatabase db, long cacheSize, @Nullable DocumentNodeStoreBuilder<?> builder) {
        super(cacheSize);
        readOnly = builder == null ? false : builder.getReadOnlyMode();
        // use a block size of 2 MB - 1 KB, because MongoDB rounds up the
        // space allocated for a record to the next power of two
```

### SimplifiableConditionalExpression
`(renameKeyProp == null || "".equals(renameKeyProp))
? false
: Boolean.parseBoolean(renameKeyProp)` can be simplified to 'renameKeyProp!=null \&\& !"".equals(renameKeyProp) \&\& Boolean.parseBoolean(renameKeyProp)'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java

            String renameKeyProp = properties.getProperty(S3Constants.S3_RENAME_KEYS);
            boolean renameKeyBool = (renameKeyProp == null || "".equals(renameKeyProp))
                    ? false
                    : Boolean.parseBoolean(renameKeyProp);
```

### SimplifiableConditionalExpression
`selector != null ? selector.matchesAllTypes()
: false` can be simplified to 'selector != null \&\& selector.matchesAllTypes()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/index/FilterImpl.java`
#### Snippet
```java
        this.queryStatement = impl.queryStatement;
        this.selector = impl.selector;
        this.matchesAllTypes = selector != null ? selector.matchesAllTypes()
                : false;
        this.settings = filter.getQueryLimits();
```

### SimplifiableConditionalExpression
`selector != null ? selector.matchesAllTypes()
: false` can be simplified to 'selector != null \&\& selector.matchesAllTypes()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/index/FilterImpl.java`
#### Snippet
```java
        this.selector = selector;
        this.queryStatement = queryStatement;
        this.matchesAllTypes = selector != null ? selector.matchesAllTypes()
                : false;
        this.settings = settings;
```

### SimplifiableConditionalExpression
`matchState == null ? false : matchState.getValue(Type.BOOLEAN)` can be simplified to 'matchState!=null \&\& matchState.getValue(Type.BOOLEAN)'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/jmx/PropertyIndexStats.java`
#### Snippet
```java
            for (Tree node : traverser.breadthFirstTraversal(t)) {
                PropertyState matchState = node.getProperty("match");
                boolean match = matchState == null ? false : matchState.getValue(Type.BOOLEAN);
                int depth = PathUtils.getDepth(node.getPath());

```

### SimplifiableConditionalExpression
`size == 0 ? false : elements.get(size - 1).equals("**")` can be simplified to 'size!=0 \&\& elements.get(size - 1).equals("\*\*")'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/GlobbingPathHelper.java`
#### Snippet
```java
        }
        int size = elements.size();
        boolean endsWithStarStar = size == 0 ? false : elements.get(size - 1).equals("**");
        if (endsWithStarStar) {
            elements.remove(size - 1);
```

### SimplifiableConditionalExpression
`!isHiddenOakMountExists(indexNode) ? true : false` can be simplified to '!isHiddenOakMountExists(indexNode)'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/indexversion/LuceneIndexVersionOperation.java`
#### Snippet
```java
    protected boolean checkIfDisabledIndexCanBeMarkedForDeletion(NodeState indexNode) {
        // check if index node exists in read-only repo, if not, return true (and disabled index can be fully deleted), otherwise return false (and no action to be performed).
        return !isHiddenOakMountExists(indexNode) ? true : false;
    }

```

## RuleId[id=JavadocLinkAsPlainText]
### JavadocLinkAsPlainText
Link specified as plain text
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBConnectionHandler.java`
#### Snippet
```java
     * affect subsequent users of that connection. This system property allows to enable a check to be done upon
     * {@link #closeConnection(Connection)} so that problems can be detected early rather than late.
     * See also https://issues.apache.org/jira/browse/OAK-2337.
     */
    private static final boolean CHECKCONNECTIONONCLOSE = SystemPropertySupplier
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MongoConnection.java`
#### Snippet
```java
    /**
     * Constructs a new connection using the specified MongoDB connection string.
     * See also http://docs.mongodb.org/manual/reference/connection-string/
     *
     * @param uri the MongoDB URI
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticPropertyDefinition.java`
#### Snippet
```java

    /**
     * Class for defining parameters for similarity search based on https://elastiknn.com/api.
     * For all possible models and query combinations, see https://elastiknn.com/api/#model-and-query-compatibility
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticPropertyDefinition.java`
#### Snippet
```java
    /**
     * Class for defining parameters for similarity search based on https://elastiknn.com/api.
     * For all possible models and query combinations, see https://elastiknn.com/api/#model-and-query-compatibility
     */
    public static class SimilaritySearchParameters {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticIndexNameHelper.java`
#### Snippet
```java
    /**
     * Convert {@code e} to Elasticsearch safe index name.
     * Ref: https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html
     */
    private static String getElasticSafeName(String suggestedIndexName) {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
     * <p>
     * Default is 60'000 (one minute).
     * See: http://mongodb.github.io/node-mongodb-native/driver-articles/anintroductionto1_4_and_2_6.html#maxtimems
     */
    private final long maxQueryTimeMS =
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/IOUtils.java`
#### Snippet
```java
    /**
     * Returns a human-readable version of the file size, where the input represents
     * a specific number of bytes. Based on http://stackoverflow.com/a/3758880/1035417
     */
    public static String humanReadableByteCount(long bytes) {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/IOUtils.java`
#### Snippet
```java
    /**
     * Returns a human-readable version of this byte count. The result uses the binary system, that is, 1K = 1024.
     * Based on https://stackoverflow.com/a/3758880/2071159.
     */
    public static String humanReadableByteCountBin(long bytes) {
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/DynamoDBClient.java`
#### Snippet
```java

    /**
     * There is a limition on the request size, see https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_BatchWriteItem.html
     * Therefore the number of items needs to be provided as chunks by the caller.
     *
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/PropertyDefinitionImpl.java`
#### Snippet
```java
     * In contrast to {@link javax.jcr.PropertyType#valueFromName(String)} this method
     * requires all type names to be all upper case.
     * See also: OAK-294 and http://java.net/jira/browse/JSR_283-811
     *
     * @param name the name of the property type.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/TapeSampling.java`
#### Snippet
```java
 *
 * Implementation inspired from "JONES,T.G. A note on sampling a tape file"
 * (https://dl.acm.org/citation.cfm?id=368159)
 */

```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/user/UserConstants.java`
#### Snippet
```java
    /**
     * Optionally enables the UsernameCaseMapped profile defined in
     * https://tools.ietf.org/html/rfc7613#section-3.2 for user name comparison.
     * Use this if half-width and full-width user names should be considered
     * equal.
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
 * This class implements an approximation of the the LIRS replacement algorithm
 * invented by Xiaodong Zhang and Song Jiang as described in
 * http://www.cse.ohio-state.edu/~zhang/lirs-sigmetrics-02.html with a few
 * smaller changes: An additional queue for non-resident entries is used, to
 * prevent unbound memory usage. The maximum size of this queue is at most the
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/EditorDiff.java`
#### Snippet
```java
    /**
     * Checked exceptions don't compose. So we need to hack around.
     * See http://markmail.org/message/ak67n5k7mr3vqylm and
     * http://markmail.org/message/bhocbruikljpuhu6
     */
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/EditorDiff.java`
#### Snippet
```java
     * Checked exceptions don't compose. So we need to hack around.
     * See http://markmail.org/message/ak67n5k7mr3vqylm and
     * http://markmail.org/message/bhocbruikljpuhu6
     */
    private CommitFailedException exception;
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-jackrabbit-api/src/main/java/org/apache/jackrabbit/api/security/authorization/PrivilegeCollection.java`
#### Snippet
```java
     * @param privilegeNames The JCR names of privileges to be tested. They can be passed in expanded form 
     * (like e.g. {@link Privilege#JCR_READ}) or in qualified form (i.e. 'jcr:read' if 'jcr' was the prefixed defined for 
     * the 'http://www.jcp.org/jcr/1.0' namespace.
     * @return {@code true} if the underlying {@code privileges} include all specified privilege names either directly 
     * or by means of aggregation; {@code false} if one or multiple privileges are not included. If {@code jcr:all} privilege 
```

### JavadocLinkAsPlainText
Link specified as plain text
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/util/AzureConfigurationParserUtils.java`
#### Snippet
```java
     * <b>AccountKey</b>=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;<br>
     * <b>SharedAccessSignature</b>=mySasToken==;<br>
     * <b>BlobEndpoint</b>=http://127.0.0.1:10000/devstoreaccount1;<br>
     * <b>ContainerName</b>=mycontainer;<br>
     * <b>Directory</b>=mydir<br>
```

## RuleId[id=FieldCanBeLocal]
### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/CachingBlobStore.java`
#### Snippet
```java
    protected final long blobCacheSize;

    private final Weigher<String, byte[]> weigher = new Weigher<String, byte[]>() {
        @Override
        public int weigh(@NotNull String key, @NotNull byte[] value) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/CompositeDataStoreCache.java`
#### Snippet
```java
     * The directory where the files are created.
     */
    private final File directory;

    public CompositeDataStoreCache(String path, File home, long size, int uploadSplitPercentage,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/AbstractSharedCachingDataStore.java`
#### Snippet
```java
     * The root rootDirectory where the files are created.
     */
    private File rootDirectory;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FileDataStoreService.java`
#### Snippet
```java
    public static final String PATH = "path";

    private ServiceRegistration delegateReg;

    private Logger log = LoggerFactory.getLogger(getClass());
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/UploadStagingCache.java`
#### Snippet
```java

    /** Handle to the cache **/
    private final UploadStagingCache cache;

    StagingCacheStats(UploadStagingCache cache, StatisticsProvider provider, long maxWeight) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
    private int maxCachedBinarySize = 1024 * 1024;

    private final Weigher<String, byte[]> weigher = new Weigher<String, byte[]>() {
        @Override
        public int weigh(@NotNull String key, @NotNull byte[] value) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
    private final String root;

    private final Whiteboard whiteboard;

    private CheckpointMBean checkpointMbean;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final TimerStats queryNodesLockTimer;
    private final MeterStats createSplitNodeMeter;
    private final MeterStats updateNodeFailureMeter;
    private final MeterStats updateNodeRetryCountMeter;
    private final MeterStats removeNodes;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final TimerStats createNodeUpsertTimer;
    private final TimerStats createNodeTimer;
    private final TimerStats updateNodeTimer;
    private final MeterStats createNodeUpsertMeter;
    private final MeterStats createNodeMeter;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final MeterStats queryJournal;
    private final TimerStats queryJournalTimer;
    private final TimerStats createNodeUpsertTimer;
    private final TimerStats createNodeTimer;
    private final TimerStats updateNodeTimer;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final MeterStats queryNodesLock;
    private final TimerStats queryNodesLockTimer;
    private final MeterStats createSplitNodeMeter;
    private final MeterStats updateNodeFailureMeter;
    private final MeterStats updateNodeRetryCountMeter;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final MeterStats updateNodeMeter;
    private final MeterStats createJournal;
    private final TimerStats createJournalTimer;
    private final MeterStats findSplitNodes;
    private final StatisticsProvider statisticsProvider;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final MeterStats updateNodeRetryCountMeter;
    private final MeterStats removeNodes;
    private final TimerStats removeNodesTimer;
    private final MeterStats prefetchNodes;
    private final TimerStats prefetchNodesTimer;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final MeterStats createSplitNodeMeter;
    private final MeterStats updateNodeFailureMeter;
    private final MeterStats updateNodeRetryCountMeter;
    private final MeterStats removeNodes;
    private final TimerStats removeNodesTimer;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentStoreStats.java`
#### Snippet
```java
    private final TimerStats queryJournalTimer;
    private final TimerStats createNodeUpsertTimer;
    private final TimerStats createNodeTimer;
    private final TimerStats updateNodeTimer;
    private final MeterStats createNodeUpsertMeter;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
        private long maxLastModifiedTime;
        private RDBConnectionHandler ch;
        private static int BATCHSIZE = 1024 * 64;
        private List<String> results = new LinkedList<String>();
        private String lastId = null;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBConnectionHandler.java`
#### Snippet
```java
    }

    private final int LOGTHRESHOLD = 20;

    private ConcurrentMap<WeakReference<Connection>, ConnectionHolder> connectionMap = new ConcurrentHashMap<>();
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java

    public static final String SYS_PROP_DISABLE_SWEEP2 = "oak.documentMK.disableSweep2";
    private boolean disableSweep2 = SystemPropertySupplier.create(SYS_PROP_DISABLE_SWEEP2, Boolean.FALSE).loggingTo(LOG)
            .get();

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java

        private static int INTERVAL_MS = 1000;
        private static int TOLERANCE_FOR_WARNING_MS = 2000;

        BackgroundLeaseUpdate(DocumentNodeStore nodeStore,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoBlobStore.java`
#### Snippet
```java
    private final MongoCollection<MongoBlob> blobCollection;
    private long minLastModified;
    private final boolean readOnly;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/secondary/SecondaryStoreCache.java`
#### Snippet
```java
    private final MeterStats headRevMatched;
    private final MeterStats prevRevMatched;
    private final int maxSize = 10000;
    private final EvictingQueue<AbstractDocumentNodeState> queue;
    private volatile AbstractDocumentNodeState[] previousRoots = EMPTY;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticIndexProviderService.java`
#### Snippet
```java

    private ElasticConnection elasticConnection;
    private ElasticMetricHandler metricHandler;
    private ElasticIndexTracker indexTracker;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticPurgeOldIndexVersionCommand.java`
#### Snippet
```java
    private ElasticIndexOptions indexOpts;
    public static final String NAME = "purge-index-versions";
    private final String summary = "Provides elastic purge index related operations";

    @Override
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticPurgeOldIndexVersionCommand.java`
#### Snippet
```java
public class ElasticPurgeOldIndexVersionCommand extends PurgeOldIndexVersionCommand {

    private Options opts;
    private ElasticIndexOptions indexOpts;
    public static final String NAME = "purge-index-versions";
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-elastic/src/main/java/org/apache/jackrabbit/oak/index/ElasticIndexCommand.java`
#### Snippet
```java
    private static final String LOG_SUFFIX = "indexing";

    private final String summary = "Provides elastic index management related operations";
    private static boolean disableExitOnError;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SimpleExcerptProvider.java`
#### Snippet
```java
    private static final boolean CASE_SENSITIVE_HIGHLIGHT = Boolean.getBoolean("oak.query.caseSensitiveHighlight");

    private static int maxFragmentSize = 150;

    private SimpleExcerptProvider() {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/UnionQueryImpl.java`
#### Snippet
```java
    private Optional<Long> limit = Optional.empty();
    private Optional<Long> offset = Optional.empty();
    private long size = -1;
    private final QueryEngineSettings settings;
    private boolean isInternal;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/cow/COWNodeStoreService.java`
#### Snippet
```java
    private ObserverTracker observerTracker;

    private Whiteboard whiteboard;

    private WhiteboardExecutor executor;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
    private final int depth;

    private final PathFilter pathFilter;

    private final boolean unique;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
    private final Filter filter;

    private boolean matchesAllTypes;

    private boolean matchesNodeTypes;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
    private boolean matchesAllTypes;

    private boolean matchesNodeTypes;

    private final double cost;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexPlan.java`
#### Snippet
```java
    private final String name;

    private final Set<String> properties;

    private final Set<IndexStoreStrategy> strategies;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/datastore/DataStoreTextWriter.java`
#### Snippet
```java
     * stripped of
     */
    private boolean dataStoreBlobId = true;

    private final boolean readOnlyMode;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/query/ResultRowToAuthorizable.java`
#### Snippet
```java

    private final UserManagerImpl userManager;
    private final Root root;
    private final AuthorizableType targetType;
    private final String selectorName;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/Installer.java`
#### Snippet
```java
     * todo: to be configured
     */
    private final String configTemplate =
            "/WEB-INF/templates/repository-config.json";

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/Installer.java`
#### Snippet
```java
     * todo: to be configured
     */
    private final String bootstrapTemplate = "/WEB-INF/templates/bootstrap.properties";

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java

    private final SecureFacetConfiguration secureFacets;
    private final long randomSeed;

    private final int numberOfTopFacets;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/TarRevisions.java`
#### Snippet
```java
    private final AtomicReference<RecordId> head;

    private final SegmentNodeStorePersistence persistence;

    private final JournalFile journalFile;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/Compact.java`
#### Snippet
```java
    private final File path;

    private final File journal;

    private final FileAccessMode fileAccessMode;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/MediaRange.java`
#### Snippet
```java
    private static final int QRESOLUTION = 1000;
    private static double CORRECTIONFORSUBTYPEMATCH = 1f / (10 * QRESOLUTION);
    private static double CORRECTIONFORTYPEANDSUBTYPEMATCH = 2f / (10 * QRESOLUTION);
    
    public static MediaRange parse(String range, MediaTypeRegistry registry) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/MediaRange.java`
#### Snippet
```java

    private static final int QRESOLUTION = 1000;
    private static double CORRECTIONFORSUBTYPEMATCH = 1f / (10 * QRESOLUTION);
    private static double CORRECTIONFORTYPEANDSUBTYPEMATCH = 2f / (10 * QRESOLUTION);
    
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
    private String uploadDomainOverride = null;
    private String downloadDomainOverride = null;
    private boolean createBlobContainer = true;
    private boolean presignedDownloadURIVerifyExists = true;
    private boolean enableSecondaryLocation = AzureConstants.AZURE_BLOB_ENABLE_SECONDARY_LOCATION_DEFAULT;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/GuavaDeprecation.java`
#### Snippet
```java
    private static final Logger LOG = LoggerFactory.getLogger(GuavaDeprecation.class);

    private static String LOGLEVEL = "error";

    private GuavaDeprecation() {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks-elastic/src/main/java/org/apache/jackrabbit/oak/benchmark/util/ElasticGlobalInitializer.java`
#### Snippet
```java
    private final Set<String> excludes;

    private final String filePath;

    private String async = null;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java

    private static String VERSION_STORAGE_PATH = "/jcr:system/jcr:versionStorage";
    private static int PROGRESS_WAITING_TIME_MILLIS = 20 * 1000;

    private volatile int count = 0;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/MetricsExporterFixtureProvider.java`
#### Snippet
```java
        pushgateway("Prometheus Push Gateway");

        private String type;

        ExporterType(String type) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/FrozenNodeRefsByScanningCommand.java`
#### Snippet
```java
    public static final String NAME = "frozennoderefsbyscanning";

    private final String summary = "Scans repository and lists all references to nt:frozenNode";

    @Override
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/MetricsExporterFixture.java`
#### Snippet
```java
        pushgateway("Prometheus Push Gateway");

        private String type;

        ExporterType(String type) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/LuceneIndexerProvider.java`
#### Snippet
```java
            new ExtractedTextCache(FileUtils.ONE_MB * 5, TimeUnit.HOURS.toSeconds(5));
    private final ExtendedIndexHelper extendedIndexHelper;
    private final DirectoryFactory dirFactory;
    private final LuceneIndexWriterFactory indexWriterFactory;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/LuceneIndexerProvider.java`
#### Snippet
```java
    private final ExtractedTextCache textCache =
            new ExtractedTextCache(FileUtils.ONE_MB * 5, TimeUnit.HOURS.toSeconds(5));
    private final ExtendedIndexHelper extendedIndexHelper;
    private final DirectoryFactory dirFactory;
    private final LuceneIndexWriterFactory indexWriterFactory;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexCommand.java`
#### Snippet
```java
    public static final String INDEX_CONSISTENCY_CHECK_TXT = "index-consistency-check-report.txt";

    private final String summary = "Provides index management related operations";

    private File info;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java

    private Options opts;
    private DataStoreOptions dataStoreOpts;

    private static final Comparator<String> idComparator = new Comparator<String>() {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
        private final static Splitter delimSplitter = Splitter.on(DELIM).trimResults().omitEmptyStrings();

        private final BlobStoreOptions optionBean;
        private final BlobStoreOptions.Type blobStoreType;
        private final File outDir;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
    private static final String DELIM = ",";

    private Options opts;
    private DataStoreOptions dataStoreOpts;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/MapDBMapFactory.java`
#### Snippet
```java
            Serializable {
        private static final long serialVersionUID = 8648365575103098316L;
        private int size = 8 + 4 + 4 + 1;
        public void serialize(DataOutput o, Revision r) throws IOException {
            o.writeLong(r.getTimestamp());
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractor.java`
#### Snippet
```java
    private final AtomicLong totalSizeRead = new AtomicLong();

    private int maxExtractedLength = MAX_EXTRACT_LENGTH;
    private File tikaConfig;
    private TikaHelper tika;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractor.java`
#### Snippet
```java
    private ExecutorService executorService;
    private int threadPoolSize = Runtime.getRuntime().availableProcessors();
    private int queueSize = 100;

    private final AtomicInteger errorCount = new AtomicInteger();
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/exporter/NodeStateExportCommand.java`
#### Snippet
```java
    public static final String NAME = "export";

    private final String summary = "Exports NodeState as json";

    @Override
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/exporter/CNDStreamWriter.java`
#### Snippet
```java
    private int depth = 0;
    private String deferredName;
    private String indent = "  ";

    public CNDStreamWriter(PrintWriter w) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run/src/main/java/org/apache/jackrabbit/oak/exporter/ExportOptions.java`
#### Snippet
```java
    public static final OptionsBeanFactory FACTORY = ExportOptions::new;

    private String defaultFilter = "{\"properties\":[\"*\", \"-:childOrder\"]}";
    private final OptionSpec<File> filterFileOpt;
    private final OptionSpec<File> outDirOpt;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authorization/models/predefined/PredefinedPermissionProvider.java`
#### Snippet
```java
class PredefinedPermissionProvider implements PermissionProvider {

    private final Set<Principal> principals;

    PredefinedPermissionProvider(@NotNull Set<Principal> principals) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    private boolean searcherEnabled = Boolean.parseBoolean(System.getProperty("searcherEnabled", "true"));
    private File indexCopierDir;
    private IndexCopier copier;
    private NRTIndexFactory nrtIndexFactory;
    private LuceneIndexProvider luceneIndexProvider;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
    static final String NATIVE_LUCENE_QUERY = "native*lucene";

    private static double MIN_COST = 2.3;

    private final Logger log = LoggerFactory.getLogger(SolrQueryIndex.class);
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/MultiLuceneIndex.java`
#### Snippet
```java
    private final Filter filter;
    private final NodeState root;
    private final Set<String> relPaths;
    
    MultiLuceneIndex(Filter filter, NodeState root,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/MultiLuceneIndex.java`
#### Snippet
```java
public class MultiLuceneIndex {
    
    private final Filter filter;
    private final NodeState root;
    private final Set<String> relPaths;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/MultiLuceneIndex.java`
#### Snippet
```java
    
    private final Filter filter;
    private final NodeState root;
    private final Set<String> relPaths;
    
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexStatsUpdateCallback.java`
#### Snippet
```java
    private final String indexPath;
    private final LuceneIndexMBean luceneIndexMBean;
    private final StatisticsProvider statisticsProvider;
    private final AsyncIndexesSizeStatsUpdate asyncIndexesSizeStatsUpdate;
    private final IndexingContext indexingContext;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexStatsUpdateCallback.java`
#### Snippet
```java

    private final BiFunction<String, Map<String, String>, HistogramStats> histogram;
    private final StatsProviderUtil statsProviderUtil;

    LuceneIndexStatsUpdateCallback(String indexPath, @NotNull LuceneIndexMBean luceneIndexMBean,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
            .getLogger(LuceneIndex.class);
    public static final String NATIVE_QUERY_FUNCTION = "native*lucene";
    private static double MIN_COST = 2.2;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
    private ExecutorService executorService;

    private int threadPoolSize;

    private ExtractedTextCache extractedTextCache;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
    private DocumentQueue documentQueue;

    private LuceneIndexEditorProvider editorProvider;

    private IndexTracker tracker;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
    private LuceneIndexEditorProvider editorProvider;

    private IndexTracker tracker;

    private PropertyIndexCleaner cleaner;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/hybrid/NRTIndex.java`
#### Snippet
```java
    private final IndexUpdateListener refreshPolicy;

    private final StatisticsProvider statisticsProvider;
    private final TimerStats refreshTimer;
    private final HistogramStats sizeHisto;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
     * length of time series analysis for commit rate and no. of segments
     */
    private double timeSeriesLength = 50d;

    /**
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
     * values close to 1 weigh recent values more
     */
    private double alpha = 0.7;

    /** Sole constructor, setting all settings to their
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseWithSortStrategy.java`
#### Snippet
```java
    private final Charset charset = UTF_8;
    private final Comparator<NodeStateHolder> comparator;
    private NotificationEmitter emitter;
    private MemoryListener listener;
    private final int maxMemory = Integer.getInteger(OAK_INDEXER_MAX_SORT_MEMORY_IN_GB, OAK_INDEXER_MAX_SORT_MEMORY_IN_GB_DEFAULT);
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseWithSortStrategy.java`
#### Snippet
```java
    private final Comparator<NodeStateHolder> comparator;
    private NotificationEmitter emitter;
    private MemoryListener listener;
    private final int maxMemory = Integer.getInteger(OAK_INDEXER_MAX_SORT_MEMORY_IN_GB, OAK_INDEXER_MAX_SORT_MEMORY_IN_GB_DEFAULT);
    private final long minMemory = Integer.getInteger(OAK_INDEXER_MIN_MEMORY, 2);
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MergeRunner.java`
#### Snippet
```java
    private final ArrayList<File> mergedFiles = Lists.newArrayList();
    private final ArrayList<File> unmergedFiles = Lists.newArrayList();
    private ExecutorService executorService;
    private final int threadPoolSize;
    private final int batchMergeSize;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileSplitter.java`
#### Snippet
```java
    private Set<String> splitNodeTypeNames;
    private boolean useCompression = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_ZIP, "true"));
    private boolean useLZ4 = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_LZ4, "false"));
    
    static Predicate<File> IS_SPLIT = path -> path.getParent().endsWith(SPLIT_DIR_NAME);
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/FlatFileSplitter.java`
#### Snippet
```java
    private final Set<IndexDefinition> indexDefinitions;
    private Set<String> splitNodeTypeNames;
    private boolean useCompression = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_ZIP, "true"));
    private boolean useLZ4 = Boolean.parseBoolean(System.getProperty(OAK_INDEXER_USE_LZ4, "false"));
    
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/DocumentStoreIndexerBase.java`
#### Snippet
```java
        private final MongoDocumentStore documentStore;
        private final Logger traversalLogger;
        private final CompositeIndexer indexer;

        private MongoNodeStateEntryTraverserFactory(RevisionVector rootRevision, DocumentNodeStore documentNodeStore,
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java

public abstract class BlobStoreFixture implements Closeable{
    private final String name;
    protected final String unique;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java
        return new BlobStoreFixture("FBS") {
            private File storeDir;
            private FileBlobStore fbs;

            @Override
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java
                                                final StatisticsProvider statisticsProvider) {
        return new BlobStoreFixture("DS") {
            private DataStore dataStore;
            private BlobStore blobStore;
            private File storeDir;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/SegmentTarFixture.java`
#### Snippet
```java
    }
    
    private final File base;
    private final int maxFileSize;
    private final int segmentCacheSize;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/principal/SyncHandlerMappingTracker.java`
#### Snippet
```java
    private static final class Mapping {
        private final String syncHandlerName;
        private final String idpName;

        private Mapping(@NotNull String syncHandlerName, @NotNull String idpName) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/principal/SyncHandlerMappingTracker.java`
#### Snippet
```java

    private static final class Mapping {
        private final String syncHandlerName;
        private final String idpName;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/principal/ExternalPrincipalConfiguration.java`
#### Snippet
```java
    private ServiceRegistration dynamicMembershipRegistration;

    private ExternalIdentityMonitor monitor = ExternalIdentityMonitor.NOOP;

    @SuppressWarnings("UnusedDeclaration")
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/NamespaceRegistryTest.java`
#### Snippet
```java
public class NamespaceRegistryTest extends AbstractTest {

    private Session session;

    private NamespaceRegistry registry;
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/LoginWithTokensTest.java`
#### Snippet
```java
    private final long tknExpy = TimeUnit.SECONDS.toMillis(15);

    private final long cleanupThreshold = 100;

    public LoginWithTokensTest(int numberOfUsers) {
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/BundlingNodeTest.java`
#### Snippet
```java

    private final Random random = new Random(42); //fixed seed
    private int nodesPerFolder = 10;

    private boolean bundlingEnabled = Boolean.parseBoolean(System.getProperty("bundlingEnabled", "false"));
```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ManyUserReadTest.java`
#### Snippet
```java

    private final int numberOfUsers = 1000;
    private final int numberOfMembers = 10;
    private final boolean randomUser;

```

### FieldCanBeLocal
Field can be converted to a local variable
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ISO8601FormatterTest.java`
#### Snippet
```java
    private static final String TYPE = System.getProperty("ISO8601FormatterTest", "jcr-commons-cal");

    private static int COUNT = 1000000;

    private static TimeZone TZ = TimeZone.getTimeZone("UTC");
```

## RuleId[id=IfStatementMissingBreakInLoop]
### IfStatementMissingBreakInLoop
Loop can be terminated after condition is met
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/OakEventFilterImpl.java`
#### Snippet
```java
            boolean includeThis = false;
            for (String aRelativeGlobPath : relativeGlobPaths) {
                if (aRelativeGlobPath.equals("") || aRelativeGlobPath.equals(".") || aRelativeGlobPath.equals("*")
                        || aRelativeGlobPath.equals("**")) {
                    includeThis = true;
```

## RuleId[id=ThrowablePrintedToSystemOut]
### ThrowablePrintedToSystemOut
'Throwable' argument `e` to 'System.err.println()' call
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java
            beforeArchives = archiveManager.listArchives();
        } catch (IOException e) {
            System.err.println(e);
        }

```

### ThrowablePrintedToSystemOut
'Throwable' argument `e` to 'System.err.println()' call
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java
            afterArchives = archiveManager.listArchives();
        } catch (IOException e) {
            System.err.println(e);
        }
        printArchives(System.out, afterArchives);
```

### ThrowablePrintedToSystemOut
'Throwable' argument `e` to 'System.err.println()' call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCacheUpgradeCommand.java`
#### Snippet
```java
                options = parser.parse(args);
            } catch (Exception e) {
                System.err.println(e);
                parser.printHelpOn(System.err);
                return;
```

### ThrowablePrintedToSystemOut
'Throwable' argument `e` to 'System.err.println()' call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                options = parser.parse(args);
            } catch (Exception e) {
                System.err.println(e);
                System.err.println(Arrays.toString(args));
                System.err.println();
```

### ThrowablePrintedToSystemOut
'Throwable' argument `e` to 'System.err.println()' call
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java
            beforeArchives = roArchiveManager.listArchives();
        } catch (IOException e) {
            System.err.println(e);
        }

```

### ThrowablePrintedToSystemOut
'Throwable' argument `e` to 'System.err.println()' call
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java
            afterArchives = rwArchiveManager.listArchives();
        } catch (IOException e) {
            System.err.println(e);
        }
        printArchives(System.out, afterArchives);
```

## RuleId[id=FunctionalExpressionCanBeFolded]
### FunctionalExpressionCanBeFolded
Method reference can be replaced with qualifier
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java
    private static long getValue(List<Query> queries, Optional<Long> value, Function<Query, Optional<Long>> getter, Long defaultValue) {
        if (!value.isPresent()) {
            return queries.stream().map(getter::apply).filter(Optional::isPresent).map(Optional::get).findFirst()
                    .orElse(defaultValue);
        }
```

## RuleId[id=FinalizeNotProtected]
### FinalizeNotProtected
'finalize()' should have protected access, not public
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

        @Override
        public void finalize() throws Throwable {
            try {
                if (this.connection != null) {
```

### FinalizeNotProtected
'finalize()' should have protected access, not public
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java

    @Override
    public void finalize() throws Throwable {
        super.finalize();
        // TODO should not be needed, but it seems
```

## RuleId[id=MalformedFormatString]
### MalformedFormatString
Too many arguments for format string (found: 2, expected: 0)
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexDumper.java`
#### Snippet
```java
                    serializer.setSerializeBlobContent(true);
                    serializer.serialize(indexDir);
                    System.out.printf("    - Dumping raw node content%n", indexPath, FileUtils.sizeOf(indexDir));
                    System.out.printf("    - %s (%s)%n", indexPath, FileUtils.sizeOf(indexDir));
                } catch (Exception e2){
```

### MalformedFormatString
Too few arguments for format string (found: 1, expected at least: 9)
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
                }
                if (statistics.getN() > 0) {
                    System.out.format(
                            "%-28.28s  %6d  %6.0f  %6.0f  %6.0f  %6.0f %6.0f  %6d  %6.0f"+statsFormatsJoined(false)+"%n",
                            statsArg);
```

### MalformedFormatString
Too few arguments for format string (found: 1, expected at least: 9)
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
                            statsArg);
                    if (out != null) {
                        out.format(
                                "%-28.28s, %6d, %6.0f, %6.0f, %6.0f, %6.0f, %6.0f, %6d, %6.0f"+statsFormatsJoined(false)+"%n",
                                statsArg);
```

## RuleId[id=ThrowFromFinallyBlock]
### ThrowFromFinallyBlock
`throw` inside 'finally' block
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/IndexImporter.java`
#### Snippet
```java
                LOG.warn("Error occurred while releasing indexer lock", e);
                if (success) {
                    throw e;
                }
            }
```

### ThrowFromFinallyBlock
`throw` inside 'finally' block
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/S3DataStoreFactory.java`
#### Snippet
```java
                        store.close();
                    } catch (DataStoreException e) {
                        throw new IOException(e);
                    }
                }
```

### ThrowFromFinallyBlock
`throw` inside 'finally' block
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/blob/AzureDataStoreFactory.java`
#### Snippet
```java
                        store.close();
                    } catch (DataStoreException e) {
                        throw new IOException(e);
                    }
                }
```

## RuleId[id=IfStatementWithIdenticalBranches]
### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LogSilencer.java`
#### Snippet
```java
        final Long approxNow = System.currentTimeMillis();
        final Long prevOrNull = silences.putIfAbsent(key, approxNow);
        if (prevOrNull == null) {
            // then we did not have this key in the silences map
            // which means no silence yet
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

    private static boolean hasChangesToCollisions(UpdateOp update) {
        if (!USECMODCOUNT) {
            return false;
        } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
    public byte[] getOrCreateReferenceKey() throws DataStoreException {
        try {
            if (secret != null && secret.length != 0) {
                return secret;
            } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/accesscontrol/Util.java`
#### Snippet
```java
                                       int importBehavior) throws AccessControlException {
        String name = checkValidPrincipal(principal).getName();
        if (importBehavior == ImportBehavior.BESTEFFORT) {
            return true;
        } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
    public byte[] getOrCreateReferenceKey() throws DataStoreException {
        try {
            if (secret != null && secret.length != 0) {
                return secret;
            } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/GuavaDeprecation.java`
#### Snippet
```java

    public static boolean deprecatedCaller(Exception ex, String className, List<String> allowed) {
        if (allowed == null) {
            return true;
        } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/spi/mount/FragmentMatcher.java`
#### Snippet
```java
            }
        }
        if (j == subject.length()) {
            while (i < pattern.length()) {
                patternChar = pattern.charAt(i);
```

### IfStatementWithIdenticalBranches
Common part can be extracted removing branch
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/fv/MinHashFilter.java`
#### Snippet
```java

    while (hashPosition < hashCount) {
      if (hashPosition == -1) {
        hashPosition++;
      } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
        <td><font size=-1>Result&nbsp;Page:&nbsp;
        <%
        if (currentPageIndex != (Long) indexes.get(0)) {
            %><td nowrap align=right><a href=search.jsp?q=<%= Text.encodeIllegalXMLCharacters(q) %>&start=<%= (currentPageIndex - 1) * 10 %>>Previous</a><%
        } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
        for (Iterator it = indexes.iterator(); it.hasNext(); ) {
            long pageIdx = (Long) it.next();
            if (pageIdx == currentPageIndex) {
                %><td nowrap><font size=-1><%= pageIdx + 1 %><%
            } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
            }
        }
        if (currentPageIndex < (maxPage - 1)) {
            %><td nowrap><font size=-1><a href=search.jsp?q=<%= Text.encodeIllegalXMLCharacters(q) %>&start=<%= (currentPageIndex + 1) * 10 %>>Next</a><%
        } else {
```

### IfStatementWithIdenticalBranches
Common part can be extracted from 'if'
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        }

if (seedWord != null && numDocs > 0 && filetypes.size() > 0) { %>
<html>
<head>
```

## RuleId[id=SimplifyOptionalCallChains]
### SimplifyOptionalCallChains
Can be replaced with 'isEmpty()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java

    private static long getValue(List<Query> queries, Optional<Long> value, Function<Query, Optional<Long>> getter, Long defaultValue) {
        if (!value.isPresent()) {
            return queries.stream().map(getter::apply).filter(Optional::isPresent).map(Optional::get).findFirst()
                    .orElse(defaultValue);
```

## RuleId[id=SlowListContainsAll]
### SlowListContainsAll
Call to 'list.containsAll(collection)' may have poor performance
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/version/VersionCopier.java`
#### Snippet
```java
                        .sorted(versionComparator).collect(Collectors.toList());
                // source version only has a rootVersion which means nothing to update
                boolean noUpdate = sourceVersions.isEmpty() || targetVersions.containsAll(sourceVersions);
                if (noUpdate) {
                    logger.info("Skipping version history for {}: No update required", versionHistoryPath);
```

## RuleId[id=InfiniteLoopStatement]
### InfiniteLoopStatement
`while` statement cannot complete without throwing an exception
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/Profiler.java`
#### Snippet
```java
            pid = Integer.parseInt(args[0]);
            long last = 0;
            while (true) {
                tick();
                long t = System.currentTimeMillis();
```

### InfiniteLoopStatement
`for` statement cannot complete without throwing an exception
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ContinuousRevisionGCTest.java`
#### Snippet
```java
            try {
                System.out.print("Creating garbage ");
                for (int i = 0; ; i++) {
                    Node n = s.getRootNode().addNode("node-" + i);
                    for (int j = 0; j < 1000; j++) {
```

### InfiniteLoopStatement
`for` statement cannot complete without throwing an exception
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ContinuousRevisionGCTest.java`
#### Snippet
```java
        t.start();

        for (;;) {
            Thread.sleep(TimeUnit.SECONDS.toMillis(10));
            Stopwatch sw = Stopwatch.createStarted();
```

## RuleId[id=SlowAbstractSetRemoveAll]
### SlowAbstractSetRemoveAll
Call to 'set.removeAll(list)' may work slowly
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                splitOpsPhase1.clear();
                splitOpsPhase2.clear();
                splitCandidates.keySet().removeAll(removeCandidates);
                removeCandidates.clear();
            }
```

### SlowAbstractSetRemoveAll
Call to 'set.removeAll(list)' may work slowly
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
            batchSplit(splitOpsPhase2);
        }
        splitCandidates.keySet().removeAll(removeCandidates);
    }

```

### SlowAbstractSetRemoveAll
Call to 'set.removeAll(list)' may work slowly
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentBufferWriterPool.java`
#### Snippet
```java
                // as flushed.
                toFlush.addAll(toReturn);
                disposed.removeAll(toReturn);
            } finally {
                poolMonitor.leave();
```

## RuleId[id=FuseStreamOperations]
### FuseStreamOperations
Stream may be extended replacing 'sort'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDefMergerUtils.java`
#### Snippet
```java

        List<IndexName> newNames = newIndexes.getChildren().keySet().stream().map(s -> IndexName.parse(s))
                .collect(Collectors.toList());
        Collections.sort(newNames);
        List<IndexName> allNames = allIndexes.getChildren().keySet().stream().map(s -> IndexName.parse(s))
```

### FuseStreamOperations
Stream may be extended replacing 'sort'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/merge/IndexDefMergerUtils.java`
#### Snippet
```java
        Collections.sort(newNames);
        List<IndexName> allNames = allIndexes.getChildren().keySet().stream().map(s -> IndexName.parse(s))
                .collect(Collectors.toList());
        Collections.sort(allNames);
        HashMap<String, JsonObject> mergedMap = new HashMap<>();
```

### FuseStreamOperations
Stream may be extended replacing TreeSet
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/ExternalLoginTest.java`
#### Snippet
```java
        Set<String> principals = new TreeSet<>(sd.getAuthInfo().getPrincipals().stream()
                .map((p) -> p.getName().startsWith("p_") ? p.getName().substring(2) : p.getName())
                .collect(Collectors.toSet()));
        principals.remove("everyone");
        principals.remove(userId);
```

### FuseStreamOperations
Stream may be extended replacing TreeSet
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/ExternalLoginTest.java`
#### Snippet
```java
            Set<String> principals = extractGroupPrincipals(s, id);
            Set<String> expected = new TreeSet<>(StreamSupport.stream(idp.getDeclaredGroupRefs(id).spliterator(), false)
                    .map(ExternalIdentityRef::getId).collect(Collectors.toSet()));
            expected.addAll(auto);
            assertEquals(expected, principals);
```

## RuleId[id=RedundantStringFormatCall]
### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java

        System.out.printf("Compacting %s\n", path);
        System.out.printf("    before\n");
        List<String> beforeArchives = Collections.emptyList();
        try {
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java

        printArchives(System.out, beforeArchives);
        System.out.printf("    -> compacting\n");

        try (FileStore store = newFileStore(persistence, Files.createTempDir(), strictVersionCheck, segmentCacheSize,
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java
                return 1;
            }
            System.out.printf("    -> cleaning up\n");
            store.cleanup();
            JournalFile journal = persistence.getJournalFile();
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsCompact.java`
#### Snippet
```java

        watch.stop();
        System.out.printf("    after\n");
        List<String> afterArchives = Collections.emptyList();
        try {
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/Compact.java`
#### Snippet
```java
    public int run() {
        System.out.printf("Compacting %s with %s and %s compactor type\n", path, fileAccessMode.description, compactorType.description());
        System.out.printf("    before\n");
        Set<File> beforeFiles = listFiles(path);
        printFiles(System.out, beforeFiles);
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/Compact.java`
#### Snippet
```java
        printFiles(System.out, beforeFiles);
        System.out.printf("    size %s\n", printableSize(sizeOfDirectory(path)));
        System.out.printf("    -> compacting\n");

        Stopwatch watch = Stopwatch.createStarted();
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/Compact.java`
#### Snippet
```java
                return 1;
            }
            System.out.printf("    -> cleaning up\n");
            store.cleanup();
            JournalFile journal = new LocalJournalFile(path, "journal.log");
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/Compact.java`
#### Snippet
```java

        watch.stop();
        System.out.printf("    after\n");
        Set<File> afterFiles = listFiles(path);
        printFiles(System.out, afterFiles);
```

### RedundantStringFormatCall
Redundant call to `format()`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ClusterNodesCommand.java`
#### Snippet
```java
        String format = sformat.toString();

        out.println(String.format(format, header.toArray()));
        for (Map<String, String> m : body) {
            List<String> l = new ArrayList<>();
```

### RedundantStringFormatCall
Redundant call to `format()`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ClusterNodesCommand.java`
#### Snippet
```java
                l.add(m.get(h));
            }
            out.println(String.format(format, l.toArray()));
        }
    }
```

### RedundantStringFormatCall
Redundant call to `format()`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/IOTraceCommand.java`
#### Snippet
```java

            System.out.println(
                    format("tracing %s with %s", segmentStore, trace.getDescription()));
            System.out.println(
                    format("mmap=%b, segment cache=%d", mmap, segmentCache));
```

### RedundantStringFormatCall
Redundant call to `format()`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/IOTraceCommand.java`
#### Snippet
```java
                    format("tracing %s with %s", segmentStore, trace.getDescription()));
            System.out.println(
                    format("mmap=%b, segment cache=%d", mmap, segmentCache));
            System.out.println(
                    format("Writing trace to %s", output));
```

### RedundantStringFormatCall
Redundant call to `format()`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/IOTraceCommand.java`
#### Snippet
```java
                    format("mmap=%b, segment cache=%d", mmap, segmentCache));
            System.out.println(
                    format("Writing trace to %s", output));

            trace.collectIOTrace(segmentStore, mmap, segmentCache, output);
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java
        System.out.printf("Compacting %s\n", path);
        System.out.printf(" to %s\n", targetPath);
        System.out.printf("    before\n");
        List<String> beforeArchives = Collections.emptyList();
        try {
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java

        printArchives(System.out, beforeArchives);
        System.out.printf("    -> compacting\n");

        try (FileStore store = newFileStore(splitPersistence, Files.createTempDir(), strictVersionCheck, segmentCacheSize,
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java
            }

            System.out.printf("    -> [skipping] cleaning up\n");
        } catch (Exception e) {
            watch.stop();
```

### RedundantStringFormatCall
Redundant call to `printf()`
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/AzureCompact.java`
#### Snippet
```java

        watch.stop();
        System.out.printf("    after\n");
        List<String> afterArchives = Collections.emptyList();
        try {
```

## RuleId[id=PointlessNullCheck]
### PointlessNullCheck
Unnecessary 'null' check before 'equals()' call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                    if (a == null && b == null) {
                        // ok
                    } else if (a == null || b == null || !a.equals(b)) {
                        w.tag('^').key(name).object().endObject();
                    }
```

### PointlessNullCheck
Unnecessary 'null' check before 'equals()' call
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java

            String enablePresignedAccelerationStr = properties.getProperty(S3Constants.PRESIGNED_URI_ENABLE_ACCELERATION);
            setBinaryTransferAccelerationEnabled(enablePresignedAccelerationStr != null && "true".equals(enablePresignedAccelerationStr));

            presignedDownloadURIVerifyExists =
```

### PointlessNullCheck
Unnecessary 'null' check before 'equals()' call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java`
#### Snippet
```java
            String l = left.getCommonLeftPart();
            String r = right.getCommonLeftPart();
            if (l != null && r != null && l.equals(r)) {
                return l;
            }
```

### PointlessNullCheck
Unnecessary 'null' check before 'equals()' call
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/AbstractBlob.java`
#### Snippet
```java
        //Check for identity first. If they are same then its
        //definitely same blob. If not we need to check further.
        if (ai != null && bi != null && ai.equals(bi)){
            return true;
        }
```

### PointlessNullCheck
Unnecessary 'null' check before 'equals()' call
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
                        queryBuilder.append(first);
                    } else {
                        if (pr.first != null && pr.last != null && pr.first.equals(pr.last)) {
                            queryBuilder.append(fieldName).append(':');
                            queryBuilder.append(first);
```

### PointlessNullCheck
Unnecessary 'null' check before 'isValidPrincipal()' call
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/FilterProviderImpl.java`
#### Snippet
```java
        public Principal getValidPrincipal(@NotNull String oakPath) {
            ItemBasedPrincipal principal = principalProvider.getItemBasedPrincipal(oakPath);
            if (principal != null && isValidPrincipal(principal)) {
                return principal;
            } else {
```

## RuleId[id=TypeParameterExtendsObject]
### TypeParameterExtendsObject
Wildcard type argument `?` explicitly extends 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                result.append(column).append(" ").append(realOperand);

                List<? extends Object> operands = cond.getOperands();
                if (operands.size() == 1) {
                    result.append(" ?");
```

### TypeParameterExtendsObject
Wildcard type argument `?` explicitly extends 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
        }

        public List<? extends Object> getOperands() {
            return this.operands;
        }
```

### TypeParameterExtendsObject
Wildcard type argument `?` explicitly extends 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

        private final String propertyName, operator;
        private final List<? extends Object> operands;

        public QueryCondition(String propertyName, String operator, long value) {
```

### TypeParameterExtendsObject
Wildcard type argument `?` explicitly extends 'java.lang.Object'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
        }

        public QueryCondition(String propertyName, String operator, List<? extends Object> values) {
            this.propertyName = propertyName;
            this.operator = operator;
```

## RuleId[id=ConstantValue]
### ConstantValue
Condition `toBeRemoved != null` is always `true`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/BlobIdTracker.java`
#### Snippet
```java
                    }

                    if (toBeRemoved != null) {
                        toBeRemoved.delete();
                    }
```

### ConstantValue
Value `threw` is always 'true'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
        } finally {
            if (!traceOutput && (!LOG.isTraceEnabled() && candidates == 0)) {
                Closeables.close(fs, threw);
            }
            sw.stop();
```

### ConstantValue
Condition `candTemp != null` is always `true`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
                    }

                    if (candTemp != null) {
                        candTemp.delete();
                    }
```

### ConstantValue
Condition `newView != null` is always `true`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
        boolean changed = originalView == null || (newView.getViewSeqNum() != originalView.getViewSeqNum())
                || (newHasInstancesWithBacklog != hasInstancesWithBacklog);
        logger.debug("checkView: viewFine: {}, changed: {}, originalView: {}, newView: {}", newView != null, changed, originalView,
                newView);

```

### ConstantValue
Value `newViewOrNull` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
            // then there was a concurrent update of the clusterView
            // and we should do some quick backoff sleeping
            logger.debug("doCheckView: newViewOrNull is null: " + newViewOrNull);
            return null;
        } else {
```

### ConstantValue
Condition `lastWrittenRootRev == null` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
        }
        Revision lastWrittenRootRev = Revision.fromString(lastWrittenRootRevStr);
        if (lastWrittenRootRev == null) {
            logger.warn("hasBacklog: node has no lastWrittenRootRev: " + clusterNode.getClusterId());
            return false;
```

### ConstantValue
Condition `defaultDriver != null` is always `true`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDataSourceFactory.java`
#### Snippet
```java
            // try to determine driver from JDBC URL
            String defaultDriver = RDBJDBCTools.driverForDBType(RDBJDBCTools.jdbctype(url));
            if (defaultDriver != null && !defaultDriver.isEmpty()) {
                LOG.info("trying to load {}", defaultDriver);

```

### ConstantValue
Value `v` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
                }
                String v = rs.getString(fn);
                data.append(fn).append(": ").append(v == null ? v : v.trim());
            }
        }
```

### ConstantValue
Condition `o != null` is always `true` when reached
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/TimeInterval.java`
#### Snippet
```java
    @Override
    public boolean equals(Object o) {
        if (o instanceof TimeInterval && o != null) {
            return fromMs == ((TimeInterval) o).fromMs && toMs == ((TimeInterval) o).toMs;
        } else {
```

### ConstantValue
Condition `t instanceof MongoWriteConcernException` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
        Type type = Type.GENERIC;
        if (t instanceof MongoSocketException
                || t instanceof MongoWriteConcernException
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
```

### ConstantValue
Value `t` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
        Type type = Type.GENERIC;
        if (t instanceof MongoSocketException
                || t instanceof MongoWriteConcernException
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
```

### ConstantValue
Condition `t instanceof MongoNotPrimaryException` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
        if (t instanceof MongoSocketException
                || t instanceof MongoWriteConcernException
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
```

### ConstantValue
Value `t` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
        if (t instanceof MongoSocketException
                || t instanceof MongoWriteConcernException
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
```

### ConstantValue
Condition `t instanceof MongoCommandException` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
```

### ConstantValue
Condition `t instanceof MongoCommandException || t instanceof WriteConcernException ...` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
            int code = ((MongoException) t).getCode();
            if (code == 11600               // InterruptedAtShutdown
```

### ConstantValue
Value `t` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
                || t instanceof MongoNotPrimaryException) {
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
```

### ConstantValue
Condition `t instanceof WriteConcernException` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
            int code = ((MongoException) t).getCode();
```

### ConstantValue
Value `t` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
            type = Type.TRANSIENT;
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
            int code = ((MongoException) t).getCode();
```

### ConstantValue
Condition `t instanceof MongoWriteConcernWithResponseException` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
            int code = ((MongoException) t).getCode();
            if (code == 11600               // InterruptedAtShutdown
```

### ConstantValue
Value `t` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
        } else if (t instanceof MongoCommandException
                || t instanceof WriteConcernException
                || t instanceof MongoWriteConcernWithResponseException) {
            int code = ((MongoException) t).getCode();
            if (code == 11600               // InterruptedAtShutdown
```

### ConstantValue
Condition `needComma` is always `true`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
            } else {
                fulljson = asJSON(fieldNames, fulljson);
                if (format == Format.JSONARRAY && needComma && !rs.isLast()) {
                    fulljson.append(",");
                }
```

### ConstantValue
Condition `value == null` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
                    long memory = 0L;
                    memory += (key == null ? 0L : keyType.getMemory(key));
                    memory += (value == null ? 0L : valueType.getMemory(value));
                    stats.markBytesWritten(memory);
                    stats.markPut();
```

### ConstantValue
Condition `value == null` is always `false`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
            long memory = 0L;
            memory += (key == null ? 0L: keyType.getMemory(key));
            memory += (value == null ? 0L: valueType.getMemory(value));
            stats.markBytesWritten(memory);
            stats.markPut();
```

### ConstantValue
Value `oldDoc` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                }
                stats.doneFindAndModify(watch.elapsed(TimeUnit.NANOSECONDS), collection, update.getId(), true, true, 0);
                return oldDoc;
            } catch (DocumentStoreException ex) {
                // may have failed due to a race condition; try update instead
```

### ConstantValue
Value `allowCreate` is always 'true'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
            if (allowCreate && result == null) {
                if (retries > 0) {
                    result = internalCreateOrUpdate(collection, update, allowCreate, checkConditions, retries - 1);
                }
                else {
```

### ConstantValue
Result of `groups.size()` is always '0'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapIdentityProvider.java`
#### Snippet
```java
            timer.mark("iterate");
            log.debug("getDeclaredGroupRefs: search below {} with {} found {} entries. {}",
                        config.getGroupConfig().getBaseDN(), searchFilter, groups.size(), timer);

            return groups;
```

### ConstantValue
Condition `resultEntry != null` is always `false`
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapIdentityProvider.java`
#### Snippet
```java
            searchCursor = connection.search(req);
            while (searchCursor.next()) {
                if (resultEntry != null) {
                    log.warn("search for {} returned more than one entry. discarding additional ones.", searchFilter);
                } else {
```

### ConstantValue
Condition `resultEntry == null` is always `true`
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapIdentityProvider.java`
#### Snippet
```java
            closeSearchCursor(searchCursor);
        }
        if (resultEntry == null) {
            log.debug("getEntry: search below {} with {} found 0 entries.", idConfig.getBaseDN(), searchFilter);
        } else {
```

### ConstantValue
Value `resultEntry` is always 'null'
in `oak-auth-ldap/src/main/java/org/apache/jackrabbit/oak/security/authentication/ldap/impl/LdapIdentityProvider.java`
#### Snippet
```java
            log.debug("getEntry: search below {} with {} found {}", idConfig.getBaseDN(), searchFilter, resultEntry.getDn());
        }
        return resultEntry;
    }

```

### ConstantValue
Value `v` is always 'null'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
                    toMapBuilder(builder, (BasicDBObject) v, key);
                } else {
                    builder.put(key, String.valueOf(v));
                }
            }
```

### ConstantValue
Condition `collection == Collection.NODES` is always `true`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
                    if (result.getModifiedCount() > 0) {
                        // success, update cached document
                        if (collection == Collection.NODES) {
                            NodeDocument newDoc = (NodeDocument) applyChanges(collection, cachedDoc, updateOp);
                            nodesCache.put(newDoc);
```

### ConstantValue
Value `content` is always 'null'
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticCustomAnalyzer.java`
#### Snippet
```java
            }

            Map<String, Object> args = convertNodeState(child, transformers, content);

            // stemmer in elastic don't have language based configurations. They all stay under the stemmer config with
```

### ConstantValue
Condition `ioex == null` is always `true`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/StringSort.java`
#### Snippet
```java
                    c.close();
                } catch (IOException mostlyIgnored) {
                    if (ioex == null) {
                        ioex = mostlyIgnored;
                    }
```

### ConstantValue
Condition `lastLine != null` is always `true` when reached
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
                T r = bfb.pop();
                // Skip duplicate lines
                if (!distinct || (lastLine == null || (lastLine != null && cmp.compare(r, lastLine) != 0))) {
                    fbw.write(typeToString.apply(r));
                    fbw.newLine();
```

### ConstantValue
Condition `lastLine != null` is always `true` when reached
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
            for (T r : tmplist) {
                // Skip duplicate lines
                if (!distinct || (lastLine == null || (lastLine != null && cmp.compare(r, lastLine) != 0))) {
                    fbw.write(typeToString.apply(r));
                    fbw.newLine();
```

### ConstantValue
Condition `null != presignedURL` is always `true`
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
            catch (URISyntaxException e) {
                LOG.error("AWS request to create presigned S3 URI failed - could not convert '{}' to URI",
                        (null != presignedURL ? presignedURL.toString() : "")
                );
            }
```

### ConstantValue
Condition `bindings != null` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java
            q.setLimit(actualLimit);
            q.setOffset(actualOffset);
            if (bindings != null) {
                for (Entry<String, ? extends PropertyValue> e : bindings.entrySet()) {
                    q.bindValue(e.getKey(), e.getValue());
```

### ConstantValue
Condition `list != null` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/InImpl.java`
#### Snippet
```java
            list.add(s.currentValue());
        }
        if (list != null) {
            operand1.restrictList(f, list);
        }
```

### ConstantValue
Condition `indexPlan != null` is always `false`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
                }

                if (indexPlan != null && indexPlan.getPlanName() != null) {
                    indexName += "[" + indexPlan.getPlanName() + "]";
                }
```

### ConstantValue
Condition `indexPlan != null && indexPlan.getPlanName() != null` is always `false`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
                }

                if (indexPlan != null && indexPlan.getPlanName() != null) {
                    indexName += "[" + indexPlan.getPlanName() + "]";
                }
```

### ConstantValue
Value `indexPlan` is always 'null'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
                bestCost = cost;
                bestIndex = index;
                bestPlan = indexPlan;
            } else if (cost - bestCost <= 0.1) {
                almostBestCost = cost;
```

### ConstantValue
Condition `bestIndex == null` is always `false` when reached
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
        }

        if (potentiallySlowTraversalQuery || bestIndex == null) {
            // Log warning for fulltext queries without index, since these cannot return results
            if(!filter.getFulltextConditions().isEmpty()) { 
```

### ConstantValue
Condition `ch >= 0` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/name/Namespaces.java`
#### Snippet
```java
            } else if ("/:[]|*".indexOf(ch) != -1) { // TODO: XMLChar check for unpaired surrogates
                return false; // invalid name character
            } else if (!allowOtherControlChars && ch >= 0 && ch < 32 && (ch != 9 && ch != 0xa && ch != 0xd)) {
                // https://www.w3.org/TR/xml/#NT-Char - disallowed control chars
                return false;
```

### ConstantValue
Value `unique` is always 'true'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
            .setProperty(REINDEX_PROPERTY_NAME, false);
        if (unique) {
            entry.setProperty(UNIQUE_PROPERTY_NAME, unique);
        }
        entry.setProperty(PropertyStates.createProperty(PROPERTY_NAMES, propertyNames, NAMES));
```

### ConstantValue
Value `unique` is always 'true'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUtils.java`
#### Snippet
```java
                .setProperty(REINDEX_PROPERTY_NAME, reindex);
        if (unique) {
            entry.setProperty(UNIQUE_PROPERTY_NAME, unique);
        }
        entry.setProperty(PropertyStates.createProperty(PROPERTY_NAMES, propertyNames, NAMES));
```

### ConstantValue
Condition `currentSelector.isChild` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
                        currentSelector.nodeName = name;
                    } else {
                        if (currentSelector.isChild) {
                            currentSelector.isChild = false;
                            currentSelector.isParent = true;
```

### ConstantValue
Condition `joinCondition == null` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            }
        } else {
            if (!force && condition == null && joinCondition == null) {
                // a child node of a given path, such as "/test"
                // use the same selector for now, and extend the path
```

### ConstantValue
Condition `excludePrefixes != null` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePattern.java`
#### Snippet
```java
            return false;
        }
        if (excludePrefixes != null) {
            for(String exc : excludePrefixes) {
                if (prefix.startsWith(exc) || exc.startsWith(prefix)) {
```

### ConstantValue
Value `beforeCheckpoint` is always 'null'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
                        name, beforeCheckpoint);
                beforeCheckpoint = null;
                callback.setCheckpoint(beforeCheckpoint);
                before = MISSING_NODE;
            } else if (noVisibleChanges(state, root) && !switchOnSync) {
```

### ConstantValue
Condition `mixins.add(MIX_REP_MERGE_CONFLICT)` is always `true`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/AnnotatingConflictHandler.java`
#### Snippet
```java
    private static NodeBuilder addConflictMarker(@NotNull NodeBuilder parent) {
        List<String> mixins = newArrayList(parent.getNames(JCR_MIXINTYPES));
        if (mixins.add(MIX_REP_MERGE_CONFLICT)) {
            parent.setProperty(JCR_MIXINTYPES, mixins, NAMES);
        }
```

### ConstantValue
Value `copyVersions` is always 'null'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/version/VersionCopyConfiguration.java`
#### Snippet
```java
    public Calendar getOrphanedMinDate() {
        if (copyVersions == null) {
            return copyVersions;
        } else if (copyOrphanedVersions != null && copyVersions.after(copyOrphanedVersions)) {
            return copyVersions;
```

### ConstantValue
Condition `i == colon + i` is always `false`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/NamePathMapperImpl.java`
#### Snippet
```java
                case ':':
                    if (i == slash + 1              // "x/:y"
                            || i == colon + i       // "x::y"
                            || colon > slash        // "x:y:z"
                            || i + 1 == length) {   // "x:"
```

### ConstantValue
Condition `i == colon + i` is always `false`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/NamePathMapperImpl.java`
#### Snippet
```java
                case '/':
                    if (i == slash + 1              // "x//y"
                            || i == colon + i       // "x:/y"
                            || i + 1 == length) {   // "x/"
                        return true;
```

### ConstantValue
Value `initialized` is always 'true'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/UserImporter.java`
#### Snippet
```java

        initialized = true;
        return initialized;
    }

```

### ConstantValue
Value `readable` is always 'false'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/composite/CompositeTreePermission.java`
#### Snippet
```java
                }
            }
            return readable;
        }

```

### ConstantValue
Condition `Double.isNaN(estimatedEntryCount)` is always `false` when reached
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/LMSEstimator.java`
#### Snippet
```java
            estimatedEntryCount += weights[i] * getInput(filter, i);
        }
        if (Double.isInfinite(estimatedEntryCount) || Double.isNaN(estimatedEntryCount)) {
            // prevent over / under flow
            estimatedEntryCount = 1;
```

### ConstantValue
Condition `failTestOnMissingFunctionIndex` is always `true`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/query/FulltextIndexPlanner.java`
#### Snippet
```java
        }
        boolean failTestOnMissingFunctionIndex = true;
        if (failTestOnMissingFunctionIndex) {
            // this means even just function restrictions fail the test
            // (for example "where upper(name) = 'X'",
```

### ConstantValue
Value `writerGroups` is always 'null'
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStoreStats.java`
#### Snippet
```java
        this.statisticsProvider = statisticsProvider;

        this.commitsTracker = new CommitsTracker(writerGroups, otherWritersLimit);
        this.commitsCount = statisticsProvider.getMeter(COMMITS_COUNT, StatsOptions.DEFAULT);
        this.commitQueueSize = statisticsProvider.getCounterStats(COMMIT_QUEUE_SIZE, StatsOptions.DEFAULT);
```

### ConstantValue
Value `sync` is always 'true'
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java
        builder.setProperty(FulltextIndexConstants.PROP_PROPERTY_INDEX, true);
        if (sync) {
            builder.setProperty(FulltextIndexConstants.PROP_SYNC, sync);
        }
        builder.setProperty(FulltextIndexConstants.PROP_NAME, name);
```

### ConstantValue
Value `key` is always 'null'
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
            }
        }
        return key;
    }

```

### ConstantValue
Condition `nameStart == len` is always `false`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/namepath/JcrNameParser.java`
#### Snippet
```java
        }

        if (nameStart == len || state == STATE_NAME_START) {
            listener.error("Local name must not be empty");
            return false;
```

### ConstantValue
Condition `c == EOF` is always `true` when reached
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/namepath/JcrPathParser.java`
#### Snippet
```java
                        state = STATE_PREFIX_START;
                    } else if (state != STATE_URI
                            && !(state == STATE_PREFIX_START && c == EOF)) { // ignore trailing slash
                        listener.error('\'' + jcrPath + "' is not a valid path. '" + c +
                                "' not a valid name character.");
```

### ConstantValue
Condition `"set".equals(op)` is always `true`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/CheckpointsCommand.java`
#### Snippet
```java
                    }
                }
            } else if ("set".equals(op)) {
                if (opArg.size() < 3) {
                    failWith("Missing checkpoint id");
```

### ConstantValue
Condition `seeker == null` is always `false` when reached
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/RecoveryCommand.java`
#### Snippet
```java
            }

            if (agent == null || seeker == null) {
                System.err.println("Recovery only available for MongoDocumentStore and RDBDocumentStore (this: "
                        + ds.getClass().getName() + ")");
```

### ConstantValue
Condition `nodeStore instanceof org.apache.jackrabbit.oak.segment.SegmentNodeStore` is always `false` when reached
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                if ((options.has(verbose) &&
                    (nodeStore instanceof SegmentNodeStore ||
                        nodeStore instanceof org.apache.jackrabbit.oak.segment.SegmentNodeStore)) ||
                        options.has(verboseRootPath)) {
                    NodeTraverser traverser = new NodeTraverser(nodeStore, dsType);
```

### ConstantValue
Value `nodeStore` is always 'null'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                if ((options.has(verbose) &&
                    (nodeStore instanceof SegmentNodeStore ||
                        nodeStore instanceof org.apache.jackrabbit.oak.segment.SegmentNodeStore)) ||
                        options.has(verboseRootPath)) {
                    NodeTraverser traverser = new NodeTraverser(nodeStore, dsType);
```

### ConstantValue
Condition `subDirs != null` is always `true`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
                outDir.listFiles());

            if (subDirs != null && !subDirs.isEmpty()) {
                File workDir = subDirs.get(0);
                List<File> outFiles =
```

### ConstantValue
Condition `outFiles != null` is always `true`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCommand.java`
#### Snippet
```java
                    FileFilterUtils.filterList(FileFilterUtils.prefixFileFilter(filePrefix), workDir.listFiles());

                if (outFiles != null && !outFiles.isEmpty()) {
                    return outFiles.get(0);
                }
```

### ConstantValue
Value `p` is always 'null'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TikaHelper.java`
#### Snippet
```java
            return getSupportingParser(parsers.get(mediaType), mediaType);
        }
        return p;
    }

```

### ConstantValue
Value `p` is always 'null'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TikaHelper.java`
#### Snippet
```java
            return unwrap(((ParserDecorator) p).getWrappedParser());
        }
        return p;
    }

```

### ConstantValue
Value `s` is always 'null'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/SysViewImportHandler.java`
#### Snippet
```java
                    state.nodeTypeName = new NameInfo(s).getRepoQualifiedName();
                } catch (IOException e) {
                    throw new SAXException(new InvalidSerializedDataException("illegal node type name: " + s, e));
                } catch (RepositoryException e) {
                    throw new SAXException(new InvalidSerializedDataException("illegal node type name: " + s, e));
```

### ConstantValue
Condition `tree == null` is always `false`
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/xml/ImporterImpl.java`
#### Snippet
```java
                    // resolve uuid conflict
                    tree = resolveUUIDConflict(parent, conflicting, id, nodeInfo);
                    if (tree == null) {
                        // no new node has been created, so skip this node
                        parents.push(null); // push null onto stack for skipped node
```

### ConstantValue
Value `relaxedLocking` is always 'true'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            return emptyMap();
        } else if (refreshInterval == null) {
            return singletonMap(RELAXED_LOCKING, (Object) Boolean.valueOf(relaxedLocking));
        } else if (!relaxedLocking) {
            return singletonMap(REFRESH_INTERVAL, (Object) refreshInterval);
```

### ConstantValue
Value `relaxedLocking` is always 'true'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/repository/RepositoryImpl.java`
#### Snippet
```java
            return ImmutableMap.of(
                    REFRESH_INTERVAL, (Object) refreshInterval,
                    RELAXED_LOCKING,  (Object) Boolean.valueOf(relaxedLocking));
        }
    }
```

### ConstantValue
Condition `searchMgr == null` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/IndexAccessor.java`
#### Snippet
```java
            logger.error("getting search manager", ex);
        }
        if (searchMgr == null) {
            return null;
        }
```

### ConstantValue
Condition `copyBinaries` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            }
            // can't copy binaries if they are stored externally and we don't know where
        } else if (!srcDefined && !dstDefined && !srcEmbedded && copyBinaries) {
            return BlobMigrationCase.UNSUPPORTED;
            // can't copy binaries if they are stored externally and we don't know where
```

### ConstantValue
Condition `dstDefined` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            // can't copy binaries if they are stored externally and we don't know where
            // (even if the destination datastore is defined)
        } else if (!srcDefined && !srcEmbedded && dstDefined) {
            return BlobMigrationCase.UNSUPPORTED;
            // source is embedded and no destination given
```

### ConstantValue
Condition `srcEmbedded` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.UNSUPPORTED;
            // source is embedded and no destination given
        } else if (!srcDefined && srcEmbedded && !dstDefined) {
            return BlobMigrationCase.EMBEDDED_TO_EMBEDDED;
            // source is embedded and the destination is given
```

### ConstantValue
Condition `srcEmbedded` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.EMBEDDED_TO_EMBEDDED;
            // source is embedded and the destination is given
        } else if (!srcDefined && srcEmbedded && dstDefined) {
            return BlobMigrationCase.EMBEDDED_TO_EXTERNAL;
            // source is given, no destination, but also no --copy-binaries -> copy references
```

### ConstantValue
Condition `dstDefined` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.EMBEDDED_TO_EMBEDDED;
            // source is embedded and the destination is given
        } else if (!srcDefined && srcEmbedded && dstDefined) {
            return BlobMigrationCase.EMBEDDED_TO_EXTERNAL;
            // source is given, no destination, but also no --copy-binaries -> copy references
```

### ConstantValue
Condition `srcDefined` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.EMBEDDED_TO_EXTERNAL;
            // source is given, no destination, but also no --copy-binaries -> copy references
        } else if (srcDefined && !dstDefined && !copyBinaries) {
            return BlobMigrationCase.COPY_REFERENCES;
            // source is given, no destination, but --copy-binaries -> copy to embedded
```

### ConstantValue
Condition `srcDefined` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.COPY_REFERENCES;
            // source is given, no destination, but --copy-binaries -> copy to embedded
        } else if (srcDefined && !dstDefined && copyBinaries) {
            return BlobMigrationCase.EXTERNAL_TO_EMBEDDED;
            // source and destination is given
```

### ConstantValue
Condition `copyBinaries` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.COPY_REFERENCES;
            // source is given, no destination, but --copy-binaries -> copy to embedded
        } else if (srcDefined && !dstDefined && copyBinaries) {
            return BlobMigrationCase.EXTERNAL_TO_EMBEDDED;
            // source and destination is given
```

### ConstantValue
Condition `srcDefined` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.EXTERNAL_TO_EMBEDDED;
            // source and destination is given
        } else if (srcDefined && dstDefined) {
            return BlobMigrationCase.EXTERNAL_TO_EXTERNAL;
        }
```

### ConstantValue
Condition `srcDefined && dstDefined` is always `true`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.EXTERNAL_TO_EMBEDDED;
            // source and destination is given
        } else if (srcDefined && dstDefined) {
            return BlobMigrationCase.EXTERNAL_TO_EXTERNAL;
        }
```

### ConstantValue
Condition `dstDefined` is always `true` when reached
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/DatastoreArguments.java`
#### Snippet
```java
            return BlobMigrationCase.EXTERNAL_TO_EMBEDDED;
            // source and destination is given
        } else if (srcDefined && dstDefined) {
            return BlobMigrationCase.EXTERNAL_TO_EXTERNAL;
        }
```

### ConstantValue
Value `paths` is always 'null'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/MigrationOptions.java`
#### Snippet
```java
    private static String[] checkPaths(String[] paths) throws CliArgumentException {
        if (paths == null) {
            return paths;
        }
        for (String p : paths) {
```

### ConstantValue
Condition `nodeStore instanceof DocumentNodeStore` is always `false`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/checkpoint/CheckpointRetriever.java`
#### Snippet
```java
        } else if (nodeStore instanceof org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore) {
            result = getCheckpoints(org.apache.jackrabbit.oak.plugins.segment.CheckpointAccessor.getCheckpointsRoot((org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore) nodeStore));
        } else if (nodeStore instanceof DocumentNodeStore) {
            result = DocumentCheckpointRetriever.getCheckpoints((DocumentNodeStore) nodeStore);
        } else if (nodeStore instanceof FileStoreUtils.NodeStoreWithFileStore) {
```

### ConstantValue
Value `nodeStore` is always 'null'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/checkpoint/CheckpointRetriever.java`
#### Snippet
```java
        } else if (nodeStore instanceof org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore) {
            result = getCheckpoints(org.apache.jackrabbit.oak.plugins.segment.CheckpointAccessor.getCheckpointsRoot((org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore) nodeStore));
        } else if (nodeStore instanceof DocumentNodeStore) {
            result = DocumentCheckpointRetriever.getCheckpoints((DocumentNodeStore) nodeStore);
        } else if (nodeStore instanceof FileStoreUtils.NodeStoreWithFileStore) {
```

### ConstantValue
Condition `nodeStore instanceof FileStoreUtils.NodeStoreWithFileStore` is always `false`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/checkpoint/CheckpointRetriever.java`
#### Snippet
```java
        } else if (nodeStore instanceof DocumentNodeStore) {
            result = DocumentCheckpointRetriever.getCheckpoints((DocumentNodeStore) nodeStore);
        } else if (nodeStore instanceof FileStoreUtils.NodeStoreWithFileStore) {
            result = getCheckpoints(CheckpointAccessor.getCheckpointsRoot(((FileStoreUtils.NodeStoreWithFileStore) nodeStore).getNodeStore()));
        } else {
```

### ConstantValue
Value `nodeStore` is always 'null'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/checkpoint/CheckpointRetriever.java`
#### Snippet
```java
        } else if (nodeStore instanceof DocumentNodeStore) {
            result = DocumentCheckpointRetriever.getCheckpoints((DocumentNodeStore) nodeStore);
        } else if (nodeStore instanceof FileStoreUtils.NodeStoreWithFileStore) {
            result = getCheckpoints(CheckpointAccessor.getCheckpointsRoot(((FileStoreUtils.NodeStoreWithFileStore) nodeStore).getNodeStore()));
        } else {
```

### ConstantValue
Value `userID` is always 'null'
in `oak-exercise/src/main/java/org/apache/jackrabbit/oak/exercise/security/authentication/UserIDTestLoginModule.java`
#### Snippet
```java
            // and finally add the one that produces the desired result:
            String userID = null;
            subject.getPublicCredentials().add(new AuthInfoImpl(userID, Collections.<String, Object>emptyMap(), Collections.<Principal>emptySet()));
            return true;
        } else {
```

### ConstantValue
Condition `type != null` is always `true`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/osgi/OakSolrConfigurationProviderService.java`
#### Snippet
```java
                        if (mapping.length == 2 && mapping[0] != null && mapping[1] != null) {
                            Type<?> type = Type.fromString(mapping[0]);
                            if (type != null && type.tag() == propertyType.tag()) {
                                return mapping[1];
                            }
```

### ConstantValue
Condition `type != null` is always `true`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/OakSolrNodeStateConfiguration.java`
#### Snippet
```java
                if (mapping.length == 2 && mapping[0] != null && mapping[1] != null) {
                    Type<?> type = Type.fromString(mapping[0]);
                    if (type != null && type.tag() == propertyType.tag()) {
                        return mapping[1];
                    }
```

### ConstantValue
Condition `pr.last != null` is always `true`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
                                queryBuilder.append('*');
                            }
                        } else if ((pr.first != null && pr.last == null) || (pr.last != null && pr.first == null) || (!pr.first.equals(pr.last))) {
                            // TODO : need to check if this works for all field types (most likely not!)
                            queryBuilder.append(fieldName).append(':');
```

### ConstantValue
Condition `i < pts.length` is always `true` when reached
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
                    ptQueryBuilder.append("(");
                }
                if (i > 0 && i < pts.length) {
                    ptQueryBuilder.append("OR ");
                }
```

### ConstantValue
Condition `lastDocToRecord != null` is always `false`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                }

                if (lastDocToRecord != null) {
                    this.lastDoc = lastDocToRecord;
                }
```

### ConstantValue
Value `disableStorage` is always 'true'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexProviderService.java`
#### Snippet
```java
            log.info("Feature to ensure that index definition matches the index state is disabled. Change in " +
                    "index definition would now affect query plans and might lead to inconsistent results.");
            IndexDefinition.setDisableStoredIndexDefinition(disableStorage);
        }
    }
```

### ConstantValue
Value `successFullyDeleted` is always 'true'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexCopier.java`
#### Snippet
```java
                    "Attempt would be made to delete it on next run ", fileName, dir, e);
        }
        return successFullyDeleted;
    }

```

### ConstantValue
Condition `pr.last == null` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    return NumericRangeQuery.newLongRange(propertyName, first, last,
                            pr.firstIncluding, pr.lastIncluding);
                } else if (pr.first != null && pr.last == null) {
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newLongRange(propertyName, first, null, pr.firstIncluding, true);
```

### ConstantValue
Condition `!pr.last.equals(pr.first)` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newLongRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return NumericRangeQuery.newLongRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Value `pr.first` is always 'null'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newLongRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return NumericRangeQuery.newLongRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Condition `pr.last == null` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    return NumericRangeQuery.newDoubleRange(propertyName, first, last,
                            pr.firstIncluding, pr.lastIncluding);
                } else if (pr.first != null && pr.last == null) {
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newDoubleRange(propertyName, first, null, pr.firstIncluding, true);
```

### ConstantValue
Condition `!pr.last.equals(pr.first)` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newDoubleRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return NumericRangeQuery.newDoubleRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Value `pr.first` is always 'null'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newDoubleRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return NumericRangeQuery.newDoubleRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Condition `pr.last == null` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    return NumericRangeQuery.newLongRange(propertyName, first, last,
                            pr.firstIncluding, pr.lastIncluding);
                } else if (pr.first != null && pr.last == null) {
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newLongRange(propertyName, first, null, pr.firstIncluding, true);
```

### ConstantValue
Condition `!pr.last.equals(pr.first)` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newLongRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return NumericRangeQuery.newLongRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Value `pr.first` is always 'null'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return NumericRangeQuery.newLongRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return NumericRangeQuery.newLongRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Condition `pr.last == null` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    return TermRangeQuery.newStringRange(propertyName, first, last,
                            pr.firstIncluding, pr.lastIncluding);
                } else if (pr.first != null && pr.last == null) {
                    // '>' & '>=' use cases
                    return TermRangeQuery.newStringRange(propertyName, first, null, pr.firstIncluding, true);
```

### ConstantValue
Condition `!pr.last.equals(pr.first)` is always `true` when reached
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return TermRangeQuery.newStringRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return TermRangeQuery.newStringRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Value `pr.first` is always 'null'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                    // '>' & '>=' use cases
                    return TermRangeQuery.newStringRange(propertyName, first, null, pr.firstIncluding, true);
                } else if (pr.last != null && !pr.last.equals(pr.first)) {
                    // '<' & '<='
                    return TermRangeQuery.newStringRange(propertyName, null, last, true, pr.lastIncluding);
```

### ConstantValue
Condition `q != null` is always `true`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                if (planResult.evaluateNodeNameRestriction()) {
                    Query q = createNodeNameQuery(pr);
                    if (q != null) {
                        qs.add(q);
                    }
```

### ConstantValue
Value `CACHE_FACET_RESULTS` is always 'false'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
        public List<Facet> getFacets(int numberOfFacets, String columnName) throws IOException {
            if (!CACHE_FACET_RESULTS) {
                LOG.trace("{} = {} getting uncached results for columnName = {}", CACHE_FACET_RESULTS_NAME, CACHE_FACET_RESULTS, columnName);
                return getFacetsUncached(numberOfFacets, columnName);
            }
```

### ConstantValue
Condition `lastDocToRecord != null` is always `false`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                }

                if (lastDocToRecord != null) {
                    this.lastDoc = lastDocToRecord;
                }
```

### ConstantValue
Condition `e instanceof MongoInterruptedException || e instanceof MongoIncompatibleDriverException` is always `true`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                }
            } catch (MongoException e) {
                if (e instanceof MongoInterruptedException || e instanceof MongoIncompatibleDriverException) {
                    // Non-recoverable exceptions
                    throw e;
```

### ConstantValue
Condition `e instanceof MongoInterruptedException || e instanceof MongoIncompatibleDriverException` is always `true`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                        downloadCompleted = true;
                    } catch (MongoException e) {
                        if (e instanceof MongoInterruptedException || e instanceof MongoIncompatibleDriverException) {
                            // Non-recoverable exceptions
                            throw e;
```

### ConstantValue
Value `initialized` is always 'true'
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/PrincipalPolicyImporter.java`
#### Snippet
```java

        initialized = true;
        return initialized;
    }

```

### ConstantValue
Value `hasNode` is always 'true'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ReplicaCrashResilienceTest.java`
#### Snippet
```java
                                final boolean hasNode = level1Node.hasNode(level2);
                                if (hasNode) {
                                    System.err.println("Reader: yup, exists: "+hasNode+", level1="+level1+", level2="+level2);
                                } else {
                                    System.err.println("Reader: not found: level1="+level1+", level2="+level2);
```

### ConstantValue
Condition `i` is always `false`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CreateManyIndexedNodesTest.java`
#### Snippet
```java
        session.save();
        
        for(int i=0; i<THREAD_COUNT-1; i++) {
            addBackgroundJob(new Writer());
        }
```

### ConstantValue
Condition `q != null` is always `true`
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
        RowIterator rows = null;
        String suggestedQuery = null;
        if (q != null && q.length() > 0) {
            String stmt;
            if (q.startsWith("related:")) {
```

### ConstantValue
Condition `q == null` is always `false`
in `oak-examples/webapp/src/main/webapp/swr.jsp`
#### Snippet
```java
            // ignore
        }
        if (q == null || numResults == null) {
            return;
        }
```

### ConstantValue
Condition `jcrSession != null` is always `true`
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
<%    }
    } finally {
        if (jcrSession != null) {
            jcrSession.logout();
        }
```

## RuleId[id=NonAtomicOperationOnVolatileField]
### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `totalMigratedNodes`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/migration/BlobMigrator.java`
#### Snippet
```java
        try {
            NodeState newRoot = nodeStore.merge(rootBuilder, EmptyHook.INSTANCE, CommitInfo.EMPTY);
            totalMigratedNodes += migratedNodes;
            log.info("{} nodes merged succesfully. Nodes migrated in this session: {}", migratedNodes, totalMigratedNodes);
            lastCommit = System.currentTimeMillis();
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `numChangedNodes`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java`
#### Snippet
```java
        for (String name : path.elements()) {
            if (node.get(name) == null) {
                numChangedNodes++;
            }
            node = node.getOrCreate(name);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `cyclicExecutionCount`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUpdate.java`
#### Snippet
```java
                        cyclicExecutionCount = 0;
                    }
                    cyclicExecutionCount++;
                    continue;
                }
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `nodesRead`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java

        long incTraversal() {
            return ++nodesRead;
        }

```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `updates`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java

        long incUpdates() {
            return ++updates;
        }

```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `timeoutCount`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/ExtractedTextCache.java`
#### Snippet
```java
            }
        } catch (TimeoutException e) {
            timeoutCount++; // TODO : use AtomicInteger ? this is a non-atomic operation on a volatile field
            throw e;
        } catch (ExecutionException e) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `count`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
    private void iterateAndFindEmptyAndWrongVersionNodes(Tree root, int level, ReadOnlyVersionManager readOnlyVersionManager, HashSet<Tree> emptyNodes, HashMap<String, String> wrongNodes) {
        for (Tree treeNode : root.getChildren()) {
            count++;
            if (treeNode.getPropertyCount() == 0) {
                emptyNodes.add(treeNode);
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `emptyNodesCount`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
            if (treeNode.getPropertyCount() == 0) {
                emptyNodes.add(treeNode);
                emptyNodesCount++;
            }
            if (level == 6) {
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `wrongNodesCount`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
                if (prop == null) {
                    wrongNodes.put(treeNode.getPath(), "is null");
                    wrongNodesCount++;
                } else if (Type.STRING.equals(prop.getType())) {
                    wrongNodes.put(treeNode.getPath(), "not a String");
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `wrongNodesCount`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
                } else if (Type.STRING.equals(prop.getType())) {
                    wrongNodes.put(treeNode.getPath(), "not a String");
                    wrongNodesCount++;
                } else if (!"nt:versionHistory".equals(prop.getValue(Type.STRING))) {
                    wrongNodes.put(treeNode.getPath(), "is set to " + prop.getValue(Type.STRING));
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `wrongNodesCount`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/GenerateVersionInconsistencyReport.java`
#### Snippet
```java
                } else if (!"nt:versionHistory".equals(prop.getValue(Type.STRING))) {
                    wrongNodes.put(treeNode.getPath(), "is set to " + prop.getValue(Type.STRING));
                    wrongNodesCount++;
                }
            }
```

### NonAtomicOperationOnVolatileField
Non-atomic operation on volatile field `deleteAttemptCount`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/LocalIndexFile.java`
#### Snippet
```java

    public void incrementAttemptToDelete(){
        deleteAttemptCount++;
    }

```

## RuleId[id=StringConcatenationInsideStringBufferAppend]
### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java

            if (maj < dbmax || (maj == dbmax && min < dbmin)) {
                result.append(
                        "Unsupported " + dbname + " version: " + maj + "." + min + ", expected at least " + dbmax + "." + dbmin);
            }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java
                    result.append(", ");
                }
                result.append("Unsupported " + dbname + " driver version: " + md.getDriverName() + " " + maj + "." + min
                        + ", expected at least " + drmax + "." + drmin);
            }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java
                types.put(met.getColumnTypeName(i), met.getColumnType(i));
            }
            sb.append(" /* " + types.toString() + " */");
            return sb.toString();
        } catch (SQLException ex) {
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuffer.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
        private boolean refill() {
            StringBuffer query = new StringBuffer();
            query.append("select ID from " + metaTable);
            if (maxLastModifiedTime > 0) {
                query.append(" where LASTMOD <= ?");
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java
                    // delete if there is NO entry where the last modified of
                    // the meta is YOUNGER than x
                    dataStatement.append(" and not exists(select * from " + this.tnMeta + " where " + this.tnMeta + ".ID = "
                            + this.tnData + ".ID and LASTMOD > ?)");
                }
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        PreparedStatementComponent stringAppend = this.dbInfo.getConcatQuery(appendDataWithComma, tmd.getDataLimitInOctets());
        StringBuilder t = new StringBuilder();
        t.append("update " + tmd.getName() + " set ");
        t.append(setModifiedConditionally ? "MODIFIED = case when ? > MODIFIED then ? else MODIFIED end, " : "MODIFIED = ?, ");
        t.append("HASBINARY = ?, DELETEDONCE = ?, MODCOUNT = ?, CMODCOUNT = ?, DSIZE = DSIZE + ?, ");
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
            t.append("VERSION = " + SCHEMAVERSION + ", ");
        }
        t.append("DATA = " + stringAppend.getStatementComponent() + " ");
        t.append("where ID = ?");
        if (oldmodcount != null) {
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuffer.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
            sql.append("DATA, BDATA ");
        }
        sql.append("from " + tmd.getName() + " where ID = ?");
        PreparedStatement stmt = connection.prepareStatement(sql.toString());
        ResultSet rs = null;
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

        StringBuilder t = new StringBuilder();
        t.append("update " + tmd.getName() + " set ");
        t.append("MODIFIED = ?, HASBINARY = ?, DELETEDONCE = ?, MODCOUNT = ?, CMODCOUNT = ?, DSIZE = ?, DATA = ?, "
                + (tmd.hasVersion() ? (" VERSION = " + SCHEMAVERSION + ", ") : "") + "BDATA = ? ");
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        StringBuilder t = new StringBuilder();
        t.append("update " + tmd.getName() + " set ");
        t.append("MODIFIED = ?, HASBINARY = ?, DELETEDONCE = ?, MODCOUNT = ?, CMODCOUNT = ?, DSIZE = ?, DATA = ?, "
                + (tmd.hasVersion() ? (" VERSION = " + SCHEMAVERSION + ", ") : "") + "BDATA = ? ");
        t.append("where ID = ?");
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java

        if (limit != Integer.MAX_VALUE && this.dbInfo.getFetchFirstSyntax() == FETCHFIRSTSYNTAX.TOP) {
            selectClause.append("TOP " + limit + " ");
        }

```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
        }

        selectClause.append(columns + " from " + tmd.getName());

        String whereClause = buildWhereClause(minId, maxId, excludeKeyPatterns, conditions);
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
            switch (this.dbInfo.getFetchFirstSyntax()) {
                case LIMIT:
                    query.append(" LIMIT " + limit);
                    break;
                case FETCHFIRST:
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreJDBC.java`
#### Snippet
```java
                    break;
                case FETCHFIRST:
                    query.append(" FETCH FIRST " + limit + " ROWS ONLY");
                    break;
                default:
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsData.java`
#### Snippet
```java
                StringBuilder buff = new StringBuilder();
                for(StackTraceElement e : Thread.currentThread().getStackTrace()) {
                    buff.append("\n\tat " + e);
                }
                name = name + buff.toString();
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
                nodeType = "nt:base";
            }
            buff.append('[' + nodeType + ']').append(" as ").append(s.name);
            if (s.joinCondition != null) {
                buff.append(" on ").append(s.joinCondition);
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Template.java`
#### Snippet
```java
            builder.append("<many children>");
        } else {
            builder.append(childName + " = <node>");
        }
        builder.append(" }");
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ClusterNodesCommand.java`
#### Snippet
```java
                sformat.append(' ');
            }
            sformat.append("%" + widths.get(h) + "s");
        }
        String format = sformat.toString();
```

### StringConcatenationInsideStringBufferAppend
String concatenation as argument to `StringBuilder.append()` call
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
        StackTraceElement elements[] = Thread.currentThread().getStackTrace();
        StringBuilder b = new StringBuilder();
        b.append("operation '" + operation + "' called from:");
        int depth = 0;
        for (StackTraceElement e : elements) {
```

## RuleId[id=OptionalIsPresent]
### OptionalIsPresent
Can be replaced with single expression in functional style
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
            optionValues.add("index tag [" + queryOptions.indexTag + "]");
        }
        if (queryOptions.offset.isPresent()) {
            optionValues.add("offset " + queryOptions.offset.get());
        }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
            optionValues.add("offset " + queryOptions.offset.get());
        }
        if (queryOptions.limit.isPresent()) {
            optionValues.add("limit " + queryOptions.limit.get());
        }
```

### OptionalIsPresent
Can be replaced with single expression in functional style
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
            optionValues.add("limit " + queryOptions.limit.get());
        }
        if (queryOptions.prefetchCount.isPresent()) {
            optionValues.add("prefetches " + queryOptions.prefetchCount.get());
        }
```

## RuleId[id=UNCHECKED_WARNING]
### UNCHECKED_WARNING
Unchecked cast: 'capture' to 'java.util.List'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/ConsolidatedDataStoreCacheStats.java`
#### Snippet
```java
                    }
                } else if (propertyState.getType() == Type.BINARIES) {
                    final List<Blob> blobs = (List<Blob>) propertyState.getValue(propertyState.getType());
                    if (null == blobs) {
                        return false;
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.Map'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUpgradeUtils.java`
#### Snippet
```java
                ValidatingObjectInputStream input = new ValidatingObjectInputStream(fis);
                input.accept(HashMap.class, Map.class, Number.class, Long.class, String.class);
                asyncUploadMap = (Map<String, Long>) input.readObject();
            } catch (Exception e) {
                LOG.error("Error in reading pending uploads map [{}] from location [{}]", UPLOAD_MAP,
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.jackrabbit.oak.plugins.blob.FileCache.CacheBuildJob' to 'java.util.concurrent.Callable'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/FileCache.java`
#### Snippet
```java
            this.executor = executor;
        }
        this.executor.submit(new CacheBuildJob());
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
                LOG.info("Repositories with unavailable references {}", unAvailRepos);

                Set<String> notOldRefs = Collections.EMPTY_SET;
                long retentionTime = clock.getTime() - maxLastModifiedInterval;
                LOG.info("Retention time calculated [{}]", retentionTime);
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.jackrabbit.oak.plugins.document.spi.JournalPropertyBuilder' to 'org.apache.jackrabbit.oak.plugins.document.spi.JournalPropertyBuilder'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalPropertyHandler.java`
#### Snippet
```java
            String name = srv.getName();
            if (!builders.containsKey(name)) {
                builders.put(name, srv.newBuilder());
            } else {
                throw new IllegalStateException("Duplicate JournalPropertyService found " +
```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.jackrabbit.oak.plugins.document.rdb.RDBDataSourceFactory.CloseableDataSource' to 'T'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDataSourceFactory.java`
#### Snippet
```java
        @Override
        public <T> T unwrap(Class<T> c) throws SQLException {
            return c.isInstance(this) ? (T) this : c.isInstance(this.ds) ? (T) this.ds : this.ds.unwrap(c);
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'javax.sql.DataSource' to 'T'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDataSourceFactory.java`
#### Snippet
```java
        @Override
        public <T> T unwrap(Class<T> c) throws SQLException {
            return c.isInstance(this) ? (T) this : c.isInstance(this.ds) ? (T) this.ds : this.ds.unwrap(c);
        }

```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.Map'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJSONSupport.java`
#### Snippet
```java
            appendJsonString(sb, (String) value);
        } else if (value instanceof Map) {
            appendJsonMap(sb, (Map<Object, Object>) value);
        } else {
            throw new IllegalArgumentException("unexpected type: " + value.getClass());
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.List\>'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentSerializer.java`
#### Snippet
```java
                        throw new DocumentStoreException("expected array but got: " + ob);
                    }
                    List<List<Object>> update = (List<List<Object>>) ob;
                    for (List<Object> op : update) {
                        applyUpdate(doc, update, op);
```

### UNCHECKED_WARNING
Unchecked call to 'compareTo(T)' as a member of raw type 'java.lang.Comparable'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentSerializer.java`
#### Snippet
```java
            if (rev == null) {
                Comparable newValue = (Comparable) value;
                if (old == null || newValue.compareTo(old) > 0) {
                    doc.put(key, value);
                }
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.Map'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
    @NotNull
    private static StringBuilder asCSV(List<String> csvFieldNames, StringBuilder fulljson) {
        Map<String, Object> doc = (Map<String, Object>) JSON.parse(fulljson.toString());
        StringBuilder buf = new StringBuilder();
        String delim = "";
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.Map'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
                if (checkMember) {
                    if (o instanceof Map) {
                        Map<String, Object> m = (Map<String, Object>) o;
                        if (m.containsKey(fn[1])) {
                            dumpJsonValuetoCsv(buf, m.get(fn[1]));
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.Map'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
            return fulljson;
        } else {
            Map<String, Object> doc = (Map<String, Object>) JSON.parse(fulljson.toString());
            StringBuilder buf = new StringBuilder();
            buf.append('{');
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'K'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
        }
        for (Object k : keys) {
            getOrCreate((K) k, false);
        }
    }
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'K'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
        }
        for (Object k : keys) {
            getOrCreate((K) k, false).incrementCount();
        }
    }
```

### UNCHECKED_WARNING
Unchecked call to 'write(WriteBuffer, T)' as a member of raw type 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
            @Nullable
            public Void apply(@Nullable WriteBuffer buffer) {
                keyType.write(buffer, key);
                if (value == null) {
                    buffer.put((byte) 0);
```

### UNCHECKED_WARNING
Unchecked call to 'write(WriteBuffer, T)' as a member of raw type 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
                } else {
                    buffer.put((byte) 1);
                    valueType.write(buffer, value);
                }
                return null;
```

### UNCHECKED_WARNING
Unchecked call to 'getMemory(T)' as a member of raw type 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
                if (addedToQueue) {
                    long memory = 0L;
                    memory += (key == null ? 0L : keyType.getMemory(key));
                    memory += (value == null ? 0L : valueType.getMemory(value));
                    stats.markBytesWritten(memory);
```

### UNCHECKED_WARNING
Unchecked call to 'getMemory(T)' as a member of raw type 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
                    long memory = 0L;
                    memory += (key == null ? 0L : keyType.getMemory(key));
                    memory += (value == null ? 0L : valueType.getMemory(value));
                    stats.markBytesWritten(memory);
                    stats.markPut();
```

### UNCHECKED_WARNING
Unchecked call to 'getMemory(T)' as a member of raw type 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java

            long memory = 0L;
            memory += (key == null ? 0L: keyType.getMemory(key));
            memory += (value == null ? 0L: valueType.getMemory(value));
            stats.markBytesWritten(memory);
```

### UNCHECKED_WARNING
Unchecked call to 'getMemory(T)' as a member of raw type 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
            long memory = 0L;
            memory += (key == null ? 0L: keyType.getMemory(key));
            memory += (value == null ? 0L: valueType.getMemory(value));
            stats.markBytesWritten(memory);
            stats.markPut();
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.h2.mvstore.MVMap.Builder' to 'org.h2.mvstore.MVMap.Builder'. Reason: 'new MVMap.Builder(). keyType(keyType)' has raw type, so result of valueType is erased
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
    @Override
    public void addGeneration(int generation, boolean readOnly) {
        MVMap.Builder<K, V> b = new MVMap.Builder<K, V>().
                keyType(keyType).valueType(valueType);
        CacheMap<K, V> m = cache.openMap(generation, type.getMapName(), b);
        map.addReadMap(generation, m);
```

### UNCHECKED_WARNING
Unchecked call to 'valueType(DataType)' as a member of raw type 'org.h2.mvstore.MVMap.Builder'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
    @Override
    public void addGeneration(int generation, boolean readOnly) {
        MVMap.Builder<K, V> b = new MVMap.Builder<K, V>().
                keyType(keyType).valueType(valueType);
        CacheMap<K, V> m = cache.openMap(generation, type.getMapName(), b);
        map.addReadMap(generation, m);
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.h2.mvstore.type.DataType' to 'org.h2.mvstore.type.DataType'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
    public void addGeneration(int generation, boolean readOnly) {
        MVMap.Builder<K, V> b = new MVMap.Builder<K, V>().
                keyType(keyType).valueType(valueType);
        CacheMap<K, V> m = cache.openMap(generation, type.getMapName(), b);
        map.addReadMap(generation, m);
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Iterable\>' to 'java.lang.Iterable'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/NodeCache.java`
#### Snippet
```java
    public ImmutableMap<K, V> getAllPresent(
            Iterable<?> keys) {
        Iterable<K> typedKeys = (Iterable<K>) keys;
        memCacheMetadata.incrementAll(keys);
        ImmutableMap<K, V> result = memCache.getAllPresent(keys);
```

### UNCHECKED_WARNING
Unchecked cast: 'java.util.Map' to 'java.util.Map'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
            Map<String, T> oldDocs = new HashMap<>(updateOps.size());
            if (collection == NODES) {
                oldDocs.putAll((Map<String, T>) getCachedNodes(operationsToCover.keySet()));
            }

```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.jackrabbit.oak.commons.sort.BinaryFileBuffer' to 'org.apache.jackrabbit.oak.commons.sort.BinaryFileBuffer'
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
        for (BinaryFileBuffer bfb : buffers) {
            if (!bfb.empty()) {
                pq.add(bfb);
            }
        }
```

### UNCHECKED_WARNING
Unchecked call to 'unlock(T)' as a member of raw type 'org.apache.jackrabbit.oak.plugins.index.importer.AsyncIndexerLock'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/IndexImporter.java`
#### Snippet
```java

    private void resumeCurrentIndexing(LockToken lockToken) throws CommitFailedException {
        indexerLock.unlock(lockToken);
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.jackrabbit.oak.plugins.metric.MetricStatisticsProvider.StatsBuilder' to 'org.apache.jackrabbit.oak.plugins.metric.MetricStatisticsProvider.StatsBuilder'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/metric/MetricStatisticsProvider.java`
#### Snippet
```java

    private CompositeStats compStats(Type type, StatsBuilder builder){
        Stats stats = getStats(typeToName(type), builder, StatsOptions.DEFAULT);
        return (CompositeStats) stats;
    }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.function.Consumer' to 'java.util.function.Consumer'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/NodeStateCopier.java`
#### Snippet
```java
         */
        public Builder withNodeConsumer(@NotNull Consumer consumer) {
            this.newNodesConsumer = consumer;
            return this;
        }
```

### UNCHECKED_WARNING
Unchecked call to 'accept(T)' as a member of raw type 'java.util.function.Consumer'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/NodeStateCopier.java`
#### Snippet
```java
                // add new children
                target.setChildNode(childName, childSource);
                newNodesConsumer.accept(childPath);
                hasChanges = true;
            } else {
```

### UNCHECKED_WARNING
Unchecked call to 'setDefaultConfig(T)' as a member of raw type 'org.apache.jackrabbit.oak.spi.security.CompositeConfiguration'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/SecurityProviderImpl.java`
#### Snippet
```java
        composite.setRootProvider(rootProvider);
        composite.setTreeProvider(treeProvider);
        composite.setDefaultConfig(initDefaultConfiguration(defaultConfig));
        return composite;
    }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.LinkedHashSet' to 'java.util.Set'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/RepMembersConflictHandler.java`
#### Snippet
```java

        // merge ours and theirs to a de-duplicated set
        Set<String> combined = new LinkedHashSet<>(Sets.intersection(ourMembers, theirMembers));
        for (String m : Sets.difference(ourMembers, theirMembers)) {
            if (!base.contains(m)) {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Iterator\[\]' to 'java.util.Iterator\[\]'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/DynamicMembershipTracker.java`
#### Snippet
```java
        public @NotNull Iterator<Authorizable> getMembers(@NotNull Group group, boolean includeInherited) throws RepositoryException {
            int size = providers.size();
            Iterator<Authorizable>[] members = new Iterator[size];
            for (int i = 0; i < size; i++) {
                members[i] = providers.get(i).getMembers(group, includeInherited);
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Iterator\[\]' to 'java.util.Iterator\[\]'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/DynamicMembershipTracker.java`
#### Snippet
```java
        public @NotNull Iterator<Group> getMembership(@NotNull Authorizable authorizable, boolean includeInherited) throws RepositoryException {
            int size = providers.size();
            Iterator<Group>[] groups = new Iterator[size];
            for (int i = 0; i < size; i++) {
                groups[i] = providers.get(i).getMembership(authorizable, includeInherited);
```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.jackrabbit.api.security.user.Authorizable' to 'T'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/autosave/AuthorizableWrapper.java`
#### Snippet
```java
            return null;
        } else {
            return (T) mgr.wrap(authorizable);
        }
    }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.lang.Class' to 'java.lang.Class'. Reason: 'monitor' has raw type, so result of getMonitorClass is erased
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/SecurityProviderRegistration.java`
#### Snippet
```java
        Iterable<Iterable<Monitor<?>>> monitors = Iterables.transform(securityProvider.getConfigurations(), sc -> sc.getMonitors(statisticsProvider));
        for (Monitor monitor : Iterables.concat(monitors)) {
            Registration reg = whiteboard.register(monitor.getMonitorClass(), monitor, monitor.getMonitorProperties());
            closer.register(reg::unregister);

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/permission/PermissionUtil.java`
#### Snippet
```java
            return true;
        } else {
            Set<String> adminNames = config.getConfigValue(PARAM_ADMINISTRATIVE_PRINCIPALS, Collections.EMPTY_SET);
            for (Principal principal : principals) {
                if (principal instanceof AdminPrincipal || adminNames.contains(principal.getName())) {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.ArrayList' to 'java.util.ArrayList'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authorization/restriction/GlobsPattern.java`
#### Snippet
```java

    GlobsPattern(@NotNull String path, @NotNull Iterable<String> restrictions)  {
        ArrayList<GlobPattern> l = new ArrayList<>(Iterables.size(restrictions));
        restrictions.forEach(restriction -> {
            if (restriction != null) {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.concurrent.ConcurrentHashMap' to 'java.util.Map'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenConfigurationImpl.java`
#### Snippet
```java
    }

    private final Map<String, CredentialsSupport> credentialsSupport = new ConcurrentHashMap<>(
            ImmutableMap.of(SimpleCredentialsSupport.class.getName(), SimpleCredentialsSupport.getInstance()));

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/user/LoginModuleImpl.java`
#### Snippet
```java
    public boolean logout() throws LoginException {
        Set creds = Stream.of(credentials, authInfo).filter(Objects::nonNull).collect(Collectors.toSet());
        return logout((creds.isEmpty() ? null : creds), principals);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'put(K, V)' as a member of raw type 'java.util.Map'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenLoginModule.java`
#### Snippet
```java

                log.debug("Login: adding login name to shared state.");
                sharedState.put(SHARED_KEY_LOGIN_NAME, tokenInfo.getUserId());
                return true;
            }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenLoginModule.java`
#### Snippet
```java
    public boolean logout() throws LoginException {
        Set creds = Stream.of(tokenCredentials, authInfo).filter(Objects::nonNull).collect(Collectors.toSet());
        return logout((creds.isEmpty() ? null : creds), principals);
    }

```

### UNCHECKED_WARNING
Unchecked call to 'put(K, V)' as a member of raw type 'java.util.Map'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/authentication/token/TokenLoginModule.java`
#### Snippet
```java
                        ti.getPrivateAttributes().forEach((key, value) -> tc.setAttribute(key, value));
                        ti.getPublicAttributes().forEach((key, value) -> tc.setAttribute(key, value));
                        sharedState.put(SHARED_KEY_ATTRIBUTES, ti.getPublicAttributes());
                        updateSubject(subject, tc, null);
                    } else {
```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.jackrabbit.oak.spi.security.authentication.OpenAuthenticationConfiguration' to 'T'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/OpenSecurityProvider.java`
#### Snippet
```java
    public <T> T getConfiguration(@NotNull Class<T> configClass) {
        if (AuthenticationConfiguration.class == configClass) {
            return (T) new OpenAuthenticationConfiguration();
        } else if (AuthorizationConfiguration.class == configClass) {
            return (T) new OpenAuthorizationConfiguration();
```

### UNCHECKED_WARNING
Unchecked cast: 'org.apache.jackrabbit.oak.spi.security.authorization.OpenAuthorizationConfiguration' to 'T'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/OpenSecurityProvider.java`
#### Snippet
```java
            return (T) new OpenAuthenticationConfiguration();
        } else if (AuthorizationConfiguration.class == configClass) {
            return (T) new OpenAuthorizationConfiguration();
        } else {
            throw new IllegalArgumentException("Unsupported security configuration class " + configClass);
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Iterator\[\]' to 'java.util.Iterator\[\]'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/principal/CompositePrincipalProvider.java`
#### Snippet
```java
    @Override
    public Iterator<Principal> findPrincipals(@Nullable String nameHint, int searchType) {
        Iterator<? extends Principal>[] iterators = new Iterator[providers.size()];
        int i = 0;
        for (PrincipalProvider provider : providers) {
```

### UNCHECKED_WARNING
Unchecked call to 'put(K, V)' as a member of raw type 'java.util.Map'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/GuestLoginModule.java`
#### Snippet
```java
                if (credentials == null) {
                    guestCredentials = new GuestCredentials();
                    sharedState.put(AbstractLoginModule.SHARED_KEY_CREDENTIALS, guestCredentials);
                    return true;
                }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.lang.Iterable' to 'java.lang.Iterable'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/AuthInfoImpl.java`
#### Snippet
```java
    public AuthInfoImpl(@Nullable String userID, @Nullable Map<String, ?> attributes,
                        @Nullable Set<? extends Principal> principals) {
        this(userID, attributes, (Iterable) principals);
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/AbstractLoginModule.java`
#### Snippet
```java
            log.debug("Login: No supported credentials found in shared state; looking for credentials in subject.");
            for (Class clz : getSupportedCredentials()) {
                Set<Credentials> cds = subject.getPublicCredentials(clz);
                if (!cds.isEmpty()) {
                    log.debug("Login: Credentials found in subject.");
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.lang.Class' to 'java.lang.Class'
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/AbstractLoginModule.java`
#### Snippet
```java
            log.debug("Login: No supported credentials found in shared state; looking for credentials in subject.");
            for (Class clz : getSupportedCredentials()) {
                Set<Credentials> cds = subject.getPublicCredentials(clz);
                if (!cds.isEmpty()) {
                    log.debug("Login: Credentials found in subject.");
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.Collection'. Reason: 'spec' has raw type, so result of options is erased
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreOptions.java`
#### Snippet
```java
        Set<String> result = new HashSet<>();
        for (OptionSpec spec : actionOpts){
            result.addAll(spec.options());
        }
        return result;
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                    closer.register(traverser);

                    List<String> rootPathList = options.valuesOf(verboseRootPath);
                    traverser.traverse((String[]) rootPathList.toArray(new String[rootPathList.size()]));

```

### UNCHECKED_WARNING
Unchecked assignment: 'joptsimple.ArgumentAcceptingOptionSpec' to 'joptsimple.OptionSpec'
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                    closer.register(traverser);

                    List<String> rootPathList = options.valuesOf(verboseRootPath);
                    traverser.traverse((String[]) rootPathList.toArray(new String[rootPathList.size()]));

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.lang.Iterable'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/json/JsonSerializer.java`
#### Snippet
```java
                            @Override
                            public Iterable<? extends ChildNodeEntry> getChildNodeEntries() {
                                return Collections.EMPTY_LIST;
                            }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java
        }

        List<PropertyDefinitionTemplate> propertyDefinitionTemplates = tmpl.getPropertyDefinitionTemplates();
        for (QPropertyDefinition qpd : def.getPropertyDefs()) {
            PropertyDefinitionTemplate pdt = createPropertyDefinitionTemplate(valueFactory, ntMgr, qpd);
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/RepositoryUpgrade.java`
#### Snippet
```java

        // + jcr:childNodeDefinition (nt:childNodeDefinition) = nt:childNodeDefinition protected sns
        List<NodeDefinitionTemplate> nodeDefinitionTemplates = tmpl.getNodeDefinitionTemplates();
        for (QNodeDefinition qnd : def.getChildNodeDefs()) {
            NodeDefinitionTemplate ndt = createNodeDefinitionTemplate(ntMgr, qnd);
```

### UNCHECKED_WARNING
Unchecked cast: 'capture' to 'S'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/SolrServerConfiguration.java`
#### Snippet
```java
            }
        }
        return (S) constructor.newInstance(this); // TODO : each SolrServerProvider impl. is forced to have a constructor with a SolrServerConfiguration, fix?
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.jackrabbit.oak.plugins.index.solr.configuration.SolrServerConfiguration' to 'org.apache.jackrabbit.oak.plugins.index.solr.configuration.SolrServerConfiguration'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/NodeStateSolrServerConfigurationProvider.java`
#### Snippet
```java
            int connectionTimeout = getIntValueFor(Properties.CONNECTION_TIMEOUT, SolrServerConfigurationDefaults.CONNECTION_TIMEOUT);

            return (SolrServerConfiguration) new RemoteSolrServerConfiguration(solrZkHost, solrCollection, solrShardsNo,
                    solrReplicationFactor, solrConfDir, socketTimeout, connectionTimeout, solrHttpUrls);
        } else {
            throw new RuntimeException("unexpected Solr server type: " + type);
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.LinkedHashMap' to 'java.util.Map'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/LuceneFacetSearchTest.java`
#### Snippet
```java
    @Override
    protected Repository[] createRepository(RepositoryFixture fixture) throws Exception {
        Map<String, Boolean> propMap = new LinkedHashMap();
        propMap.put(SEARCH_PROP, false);
        propMap.put(FACET_PROP_1, true);
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.List'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/AggregateNodeSearcher.java`
#### Snippet
```java
    protected Query getQuery(@NotNull QueryManager qm,
        ExecutionContext context) throws RepositoryException {
        List<String> relationships = (List<String>) context.getMap().get(RELATIONSHIPS);
        // /jcr:root//element(*, ActivityType)[((id = 1234 or id = '1354'))] order by jcr:created
        // descending
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.List'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/AggregateNodeSearcher.java`
#### Snippet
```java
        QueryManager qm;
        try {
            List<Authorizable> users = (List<Authorizable>) context.getMap()
                .get(ScalabilityNodeRelationshipSuite.CTX_USER);
            Random rand = new Random(99);
            Authorizable user = users.get(rand.nextInt(users.size()));
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.ArrayList\>'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
                for (Map.Entry<String, Object> suggestionResult : suggestionResults) {
                    if ("suggestions".equals(suggestionResult.getKey())) {
                        ArrayList<SimpleOrderedMap<Object>> suggestions = ((ArrayList<SimpleOrderedMap<Object>>) suggestionResult.getValue());
                        if (!suggestions.isEmpty()) {
                            for (SimpleOrderedMap<Object> suggestion : suggestions) {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set\>'. Reason: 'suggest' has raw type, so result of entrySet is erased
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/SolrQueryIndex.java`
#### Snippet
```java
                    Map suggest = (Map) response.get("suggest");
                    if (suggest != null) {
                        Set<Map.Entry<String, Object>> suggestEntries = suggest.entrySet();
                        if (!suggestEntries.isEmpty()) {
                            putSuggestions(suggestEntries, queue, filter, configuration, solrServer);
```

### UNCHECKED_WARNING
Unchecked call to 'FulltextIndexEditorContext(NodeState, NodeBuilder, IndexDefinition, IndexUpdateCallback, FulltextIndexWriterFactory, ExtractedTextCache, IndexingContext, ...)' as a member of raw type 'org.apache.jackrabbit.oak.plugins.index.search.spi.editor.FulltextIndexEditorContext'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexEditorContext.java`
#### Snippet
```java
                             IndexAugmentorFactory augmentorFactory,
                             IndexingContext indexingContext, boolean asyncIndexing) {
        super(root, definition, indexDefinition, updateCallback, indexWriterFactory, extractedTextCache,
            indexingContext, asyncIndexing);
        this.augmentorFactory = augmentorFactory;
```

### UNCHECKED_WARNING
Unchecked assignment: 'org.apache.jackrabbit.oak.plugins.index.lucene.LuceneIndexEditorContext' to 'org.apache.jackrabbit.oak.plugins.index.search.spi.editor.FulltextIndexEditorContext'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexEditorProvider.java`
#### Snippet
```java
                context.setPropertyUpdateCallback(compositePropertyUpdateCallback);
            }
            return new LuceneIndexEditor(context);
        }
        return null;
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.lang.Iterable'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/IndexFieldProvider.java`
#### Snippet
```java
        @Override
        public Iterable<Field> getAugmentedFields(String path, NodeState document, NodeState indexDefinition) {
            return Collections.EMPTY_LIST;
        }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/IndexFieldProvider.java`
#### Snippet
```java
        @Override
        public Set<String> getSupportedTypes() {
            return Collections.EMPTY_SET;
        }
    };
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.HashMap' to 'java.util.Map'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexMeta.java`
#### Snippet
```java
        this.indexPath = checkNotNull(p.getProperty("indexPath"));
        this.creationTime = Long.valueOf(checkNotNull(p.getProperty("creationTime")));
        this.properties = new HashMap<>(Maps.fromProperties(p));
    }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.Set' to 'java.util.Set'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/FulltextQueryTermsProvider.java`
#### Snippet
```java
        @Override
        public Set<String> getSupportedTypes() {
            return Collections.EMPTY_SET;
        }
    };
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.Collection'. Reason: 'spec' has raw type, so result of options is erased
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/OakHelpFormatter.java`
#### Snippet
```java
                    field.setAccessible(true);
                    OptionSpec spec = (OptionSpec) field.get(bean);
                    names.addAll(spec.options());
                }
            }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.Collection'. Reason: 'spec' has raw type, so result of options is erased
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/IndexOptions.java`
#### Snippet
```java
        Set<String> result = new HashSet<>();
        for (OptionSpec spec : actionOpts){
            result.addAll(spec.options());
        }
        return result;
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.concurrent.BlockingQueue' to 'java.util.concurrent.BlockingQueue'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/TraverseAndSortTask.java`
#### Snippet
```java
        this.memoryManager = memoryManager;
        this.dumpThreshold = dumpThreshold;
        this.parentSortedFiles = parentSortedFiles;
        this.pathPredicate = pathPredicate;
        sortWorkDir = DirectoryHelper.createdSortWorkDir(storeDir, taskID, lastModifiedLowerBound, lastModifiedUpperBound);
```

### UNCHECKED_WARNING
Unchecked call to 'submit(Callable)' as a member of raw type 'java.util.concurrent.ExecutorCompletionService'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedStrategy.java`
#### Snippet
```java
            MongoCollection<BasicDBObject> dbCollection = MongoDocumentStoreHelper.getDBCollection(docStore, Collection.NODES);
            PipelinedMongoDownloadTask downloadTask = new PipelinedMongoDownloadTask(dbCollection, mongoBatchSize, mongoDocQueue);
            ecs.submit(downloadTask);

            File flatFileStore = null;
```

### UNCHECKED_WARNING
Unchecked call to 'submit(Callable)' as a member of raw type 'java.util.concurrent.ExecutorCompletionService'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedStrategy.java`
#### Snippet
```java
                        transformStageStatistics
                );
                ecs.submit(transformTask);
            }

```

### UNCHECKED_WARNING
Unchecked call to 'submit(Callable)' as a member of raw type 'java.util.concurrent.ExecutorCompletionService'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedStrategy.java`
#### Snippet
```java
                    storeDir, pathComparator, algorithm, emptyBatchesQueue, nonEmptyBatchesQueue, sortedFilesQueue
            );
            ecs.submit(sortTask);

            PipelinedMergeSortTask mergeSortTask = new PipelinedMergeSortTask(storeDir, pathComparator, algorithm, sortedFilesQueue);
```

### UNCHECKED_WARNING
Unchecked call to 'submit(Callable)' as a member of raw type 'java.util.concurrent.ExecutorCompletionService'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedStrategy.java`
#### Snippet
```java

            PipelinedMergeSortTask mergeSortTask = new PipelinedMergeSortTask(storeDir, pathComparator, algorithm, sortedFilesQueue);
            ecs.submit(mergeSortTask);


```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.ArrayList' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/RemoveMembersTest.java`
#### Snippet
```java
    final int batchSize;

    private final List<String> groupPaths = new ArrayList(GROUP_CNT);

    public RemoveMembersTest(int numberOfMembers, int batchSize) {
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        @Override
        public List<? extends ValidatorProvider> getValidators(@NotNull String workspaceName, @NotNull Set<Principal> principals, @NotNull MoveTracker moveTracker) {
            return Collections.EMPTY_LIST;
        }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        @Override
        public List<? extends CommitHook> getCommitHooks(@NotNull String workspaceName) {
            return Collections.EMPTY_LIST;
        }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        @Override
        public List<ThreeWayConflictHandler> getConflictHandlers() {
            return Collections.EMPTY_LIST;
        }

```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.List' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/CompositeAuthorizationTest.java`
#### Snippet
```java
        @Override
        public List<ProtectedItemImporter> getProtectedItemImporters() {
            return Collections.EMPTY_LIST;
        }

```

### UNCHECKED_WARNING
Unchecked call to 'toArray(T\[\])' as a member of raw type 'java.util.Collection'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/HasPermissionHasItemGetItemTest.java`
#### Snippet
```java
    void additionalOperations(@NotNull String path, @NotNull Session s, @NotNull AccessControlManager acMgr) {
        try {
            String actions = Text.implode((String[]) Utils.getRandom(PERMISSIONS, 3).toArray(new String[0]), ",");
            s.hasPermission(path, actions);
        } catch (RepositoryException e) {
```

### UNCHECKED_WARNING
Unchecked call to 'add(E)' as a member of raw type 'java.util.Set'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/Utils.java`
#### Snippet
```java
            while (s.size() < len) {
                int index = (int) Math.floor(size * Math.random());
                s.add(objects.get(index));
            }
            return s;
```

### UNCHECKED_WARNING
Unchecked call to 'toArray(T\[\])' as a member of raw type 'java.util.Collection'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/HasPrivilegesHasItemGetItemTest.java`
#### Snippet
```java
    void additionalOperations(@NotNull String path, @NotNull Session s, @NotNull AccessControlManager acMgr) {
        try {
            acMgr.hasPrivileges(getAccessControlledPath(path), (Privilege[]) Utils.getRandom(allPrivileges, 3).toArray(new Privilege[0]));
        } catch (RepositoryException e) {
            if (doReport) {
```

### UNCHECKED_WARNING
Unchecked call to 'toArray(T\[\])' as a member of raw type 'java.util.Collection'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authorization/AbstractHasItemGetItemTest.java`
#### Snippet
```java
            int targetCnt = (principal.getName().equals(pGrantedRead.getName())) ? numberOfACEs-1 : numberOfACEs;
            while (cnt < targetCnt) {
                if (createEntry(acMgr, principal, getRandom(nodePaths), (Privilege[]) Utils.getRandom(allPrivileges, 3).toArray(new Privilege[0]))) {
                    cnt++;
                }
```

### UNCHECKED_WARNING
Unchecked assignment: 'java.util.ArrayList' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/authentication/external/ListIdentitiesTest.java`
#### Snippet
```java
public class ListIdentitiesTest extends AbstractExternalTest {

    private static final List<String> AUTO_IDS = new ArrayList();
    static {
        for (int i = 0; i<100; i++) {
```

### UNCHECKED_WARNING
Unchecked cast: 'java.lang.Object' to 'java.util.List'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/ConcurrentReader.java`
#### Snippet
```java
                .addNode(id);
            readPaths =
                (List<String>) context.getMap().get(ScalabilityAbstractSuite.CTX_SEARCH_PATHS_PROP);
            rand = new Random();
            session.save();
```

### UNCHECKED_WARNING
Unchecked call to 'add(E)' as a member of raw type 'java.util.List'
in `oak-examples/webapp/src/main/webapp/search.jsp`
#### Snippet
```java
            minPage = Math.max(0, currentPageIndex - 10);
            for (long i = minPage; i < maxPage; i++) {
                indexes.add(i);
            }

```

### UNCHECKED_WARNING
Unchecked call to 'addAll(Collection)' as a member of raw type 'java.util.List'
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        String[] types = request.getParameterValues("filetype");
        if (types != null) {
            filetypes.addAll(Arrays.asList(types));
        } else {
            filetypes = DEFAULT_TYPES;
```

### UNCHECKED_WARNING
Unchecked call to 'addAll(Collection)' as a member of raw type 'java.util.List'
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                        final String host = urls[i].getHost();
                        List folderNames = new ArrayList();
                        folderNames.addAll(Arrays.asList(host.split("\\.")));
                        Collections.reverse(folderNames);
                        folderNames.addAll(Arrays.asList(path.split("/", 0)));
```

### UNCHECKED_WARNING
Unchecked call to 'addAll(Collection)' as a member of raw type 'java.util.List'
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                        folderNames.addAll(Arrays.asList(host.split("\\.")));
                        Collections.reverse(folderNames);
                        folderNames.addAll(Arrays.asList(path.split("/", 0)));
                        final String fileName = URLDecoder.decode((String) folderNames.remove(folderNames.size() - 1), "UTF-8").replaceAll(":", "_");
                        Node node = root;
```

## RuleId[id=DataFlowIssue]
### DataFlowIssue
Dereference of `f.list()` may produce `NullPointerException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/DataStoreCacheUtils.java`
#### Snippet
```java
            if ((f == null) || f.equals(root)
                || (f.list() == null)
                || (f.list().length > 0)) {
                break;
            }
```

### DataFlowIssue
Argument `input` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java
            FileOutputStream os = new FileOutputStream(file);
            try {
                IOUtils.copyLarge(input, os);
            } finally {
                Closeables.close(os, true);
```

### DataFlowIssue
Argument `input` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java
        try {
            File file = new File(getPath(), name);
            FileUtils.copyFile(input, file);
        } catch (IOException e) {
            LOG.error("Exception while adding metadata record file {} with name {}, {}",
```

### DataFlowIssue
Argument `prefix` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java

        for (File file : FileFilterUtils.filterList(
                FileFilterUtils.prefixFileFilter(prefix),
                root.listFiles())) {
            if (!file.isDirectory()) { // skip directories which are actual data store files
```

### DataFlowIssue
Argument `prefix` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/OakFileDataStore.java`
#### Snippet
```java
        List<DataRecord> rootRecords = new ArrayList<DataRecord>();
        for (File file : FileFilterUtils.filterList(
                FileFilterUtils.prefixFileFilter(prefix),
                root.listFiles())) {
            if (!file.isDirectory()) { // skip directories which are actual data store files
```

### DataFlowIssue
Argument `input` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
        try {
            File file = new File(fsPathDir, name);
            FileUtils.copyFile(input, file);
        } catch (IOException e) {
            LOG.error("Exception while adding metadata record file {} with name {}, {}",
```

### DataFlowIssue
Argument `prefix` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
        List<DataRecord> rootRecords = new ArrayList<DataRecord>();
        for (File file : FileFilterUtils
            .filterList(FileFilterUtils.prefixFileFilter(prefix), fsPathDir.listFiles())) {
            if (!file.isDirectory()) { // skip directories which are actual data store files
                rootRecords
```

### DataFlowIssue
Argument `input` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
            FileOutputStream os = new FileOutputStream(file);
            try {
                IOUtils.copyLarge(input, os);
            } finally {
                Closeables.close(os, true);
```

### DataFlowIssue
Argument `prefix` might be null
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java

        for (File file : FileFilterUtils
            .filterList(FileFilterUtils.prefixFileFilter(prefix), fsPathDir.listFiles())) {
            if (!file.isDirectory()) { // skip directories which are actual data store files
                if (!file.delete()) {
```

### DataFlowIssue
Dereference of `d.listFiles()` may produce `NullPointerException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                if (d.exists()) {
                    if (old.exists()) {
                        for (File p : d.listFiles()) {
                            String name = p.getName();
                            File newName = new File(old, name);
```

### DataFlowIssue
Dereference of `old.listFiles()` may produce `NullPointerException`
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/FileBlobStore.java`
#### Snippet
```java
                File old = new File(x, sub + OLD_SUFFIX);
                if (old.exists()) {
                    for (File p : old.listFiles()) {
                        String name = p.getName();
                        File file = new File(old, name);
```

### DataFlowIssue
Method invocation `getRecord` will produce `NullPointerException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
            DataRecord record = delegate instanceof SharedDataStore ?
                    ((SharedDataStore) delegate).getRecordForId(identifier) :
                    delegate.getRecord(identifier);

            if (stats instanceof ExtendedBlobStatsCollector) {
```

### DataFlowIssue
Method invocation `addRecord` will produce `NullPointerException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
        return delegate instanceof TypedDataStore ?
                ((TypedDataStore) delegate).addRecord(input, options) :
                delegate.addRecord(input);
    }

```

### DataFlowIssue
Method invocation `getAllIdentifiers` will produce `NullPointerException`
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java`
#### Snippet
```java
        Iterator<DataRecord> result = delegate instanceof SharedDataStore ?
                ((SharedDataStore) delegate).getAllRecords() :
                Iterators.transform(delegate.getAllIdentifiers(),
                        new Function<DataIdentifier, DataRecord>() {
                            @Nullable
```

### DataFlowIssue
Casting `o` to `JournalProperty` may produce `ClassCastException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalPropertyHandler.java`
#### Snippet
```java
        checkArgument(o instanceof JournalProperty, "CommitContext entry for name [%s] " +
                "having value [%s] is not of type JournalEntry", name, o);
        return (JournalProperty) o;
    }

```

### DataFlowIssue
Method invocation `getMessage` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBranch.java`
#### Snippet
```java
        time = System.currentTimeMillis() - time;
        store.getStatsCollector().failedMerge(numRetries, time, suspendMillis, exclusive);
        String msg = ex.getMessage() + " (retries " + numRetries + ", " + time + " ms)";
        throw new CommitFailedException(ex.getSource(), ex.getType(),
                ex.getCode(), msg, ex.getCause());
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStoreDB.java`
#### Snippet
```java
    private RDBBlobStoreDB(String description) {
        this.description = description;
        this.vendorCode = RDBCommonVendorSpecificCode.DEFAULT;
    }

```

### DataFlowIssue
Variable is already assigned to this value
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStoreDB.java`
#### Snippet
```java
    private RDBDocumentStoreDB(String description) {
        this.description = description;
        this.vendorCode = RDBCommonVendorSpecificCode.DEFAULT;
    }

```

### DataFlowIssue
Method invocation `getTimestamp` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                Branch b = branches.getBranch(r);
                if (b != null) {
                    minTimestamp = Math.min(b.getBase().getRevision(clusterId).getTimestamp(), minTimestamp);
                }
            }
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoThrottlerFactory.java`
#### Snippet
```java
                throttleTime = throttleTime * 2;
            } else if (fuzzyCompare(oplogWindow, threshold,0.001) <= 0) {
                throttleTime = throttlingTime;
            } else {
                throttleTime = 0;
```

### DataFlowIssue
Condition `t instanceof MongoSocketException` is redundant and can be replaced with a null check
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
    static Type getDocumentStoreExceptionTypeFor(Throwable t) {
        Type type = Type.GENERIC;
        if (t instanceof MongoSocketException
                || t instanceof MongoWriteConcernException
                || t instanceof MongoNotPrimaryException) {
```

### DataFlowIssue
Casting `state` to `AbstractDocumentNodeState` may produce `ClassCastException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/secondary/PathFilteringDiff.java`
#### Snippet
```java
                " of expected type i.e. AbstractDocumentNodeState. Parent %s (%s)",
                state, state.getClass(), parent.getPath(), name, parent, parent.getClass());
        return (AbstractDocumentNodeState) state;
    }

```

### DataFlowIssue
Method invocation `incrementCount` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
            return;
        }
        getOrCreate(key, true).incrementCount();
    }

```

### DataFlowIssue
Method invocation `incrementCount` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
            return;
        }
        getOrCreate(key, false).incrementCount();
    }

```

### DataFlowIssue
Method invocation `incrementCount` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
        }
        for (Object k : keys) {
            getOrCreate((K) k, false).incrementCount();
        }
    }
```

### DataFlowIssue
Method invocation `mightBeenAffected` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                    if (lastmodified == row.getModified() && lastmodified >= 1) {
                        try (CacheLock lock = acquireLockFor(row.getId())) {
                            if (!tracker.mightBeenAffected(row.getId())) {
                                // otherwise mark it as fresh
                                ((NodeDocument) doc).markUpToDate(now);
```

### DataFlowIssue
Method invocation `getId` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                if (cached != null && cached != NodeDocument.NULL) {
                    T doc = castAsT(unwrap(cached));
                    documents.put(doc.getId(), doc);
                }
            }
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                    if (maxCacheAge == 0) {
                        invalidateNodesCache(id, true);
                        doc = null;
                    }
                    final NodeDocument cachedDoc = doc;
```

### DataFlowIssue
Argument `fileName` might be null
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
                if (compact) {
                    try {
                        MVStoreTool.compact(fileName, true);
                    } catch (Exception e) {
                        exceptionCount++;
```

### DataFlowIssue
Argument `getFileName(oldReadGeneration)` might be null
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
            if (oldRead != null) {
                oldRead.closeStore();
                new File(getFileName(oldReadGeneration)).delete();
            }
        }
```

### DataFlowIssue
Argument `getFileName(gen)` might be null
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
                        int gen = Integer.parseInt(g);
                        if (gen >= 0) {
                            File f2 = new File(getFileName(gen));
                            if (fn.equals(f2.getName())) {
                                // ignore things like "cache-000.data"
```

### DataFlowIssue
Argument `getFileName(oldest)` might be null
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/PersistentCache.java`
#### Snippet
```java
        while (generations.size() > 2) {
            Integer oldest = generations.first();
            File oldFile = new File(getFileName(oldest));
            if (!oldFile.canWrite()) {
                LOG.info("Ignoring old, read-only generation " + oldFile.getAbsolutePath());
```

### DataFlowIssue
Method invocation `setSoTimeout` may produce `NullPointerException`
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/broadcast/TCPBroadcaster.java`
#### Snippet
```java
                throw lastException;
            }
            server.setSoTimeout(TIMEOUT);
            serverSocket = server;
            LOG.info("Listening on port " + server.getLocalPort());
```

### DataFlowIssue
Method invocation `toString` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/util/TermQueryBuilderFactory.java`
#### Snippet
```java
        if (pr.first != null && pr.first.equals(pr.last) && pr.firstIncluding && pr.lastIncluding) {
            // [property]=[value]
            return Query.of(q -> q.term(t -> t.field(propertyName).value(FieldValue.of(first.toString()))));
        } else if (pr.first != null && pr.last != null) {
            return newRangeQuery(propertyName, first, last, pr.firstIncluding, pr.lastIncluding);
```

### DataFlowIssue
Method invocation `get` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/ElasticResponseHandler.java`
#### Snippet
```java

    public String getPath(Hit<? extends JsonNode> hit) {
        return transformPath(hit.source().get(FieldNames.PATH).asText());
    }

```

### DataFlowIssue
Method invocation `get` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/facets/ElasticSecureFacetAsyncProvider.java`
#### Snippet
```java
        if (path != null && isAccessible.test(path)) {
            for (String field: facetFields) {
                JsonNode value = searchHit.source().get(field);
                if (value != null) {
                    facetsMap.compute(field, (column, facetValues) -> {
```

### DataFlowIssue
Method invocation `to` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/ElasticSuggestIterator.java`
#### Snippet
```java
                .map(hit -> hit.innerHits().get(FieldNames.SUGGEST).hits().hits())
                .flatMap(Collection::stream)
                .map(hit -> new ElasticSuggestion(hit.source().to(ObjectNode.class).get("value").asText(), hit.score()))
                .collect(Collectors.toCollection(() -> new PriorityQueue<>((a, b) -> Double.compare(b.score, a.score))))
                .stream().distinct().iterator();
```

### DataFlowIssue
Unboxing of `hit.score()` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/ElasticSuggestIterator.java`
#### Snippet
```java
                .map(hit -> hit.innerHits().get(FieldNames.SUGGEST).hits().hits())
                .flatMap(Collection::stream)
                .map(hit -> new ElasticSuggestion(hit.source().to(ObjectNode.class).get("value").asText(), hit.score()))
                .collect(Collectors.toCollection(() -> new PriorityQueue<>((a, b) -> Double.compare(b.score, a.score))))
                .stream().distinct().iterator();
```

### DataFlowIssue
Method invocation `getNewStream` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticCustomAnalyzer.java`
#### Snippet
```java
        @Override
        public InputStream openResource(String resource) {
            return ConfigUtil.getBlob(nodeState.getChildNode(resource), resource).getNewStream();
        }

```

### DataFlowIssue
Method invocation `value` may produce `NullPointerException`
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/ElasticResultRowAsyncIterator.java`
#### Snippet
```java
                    searchTotalTime, searchResponse.timedOut());
            if (hitsSize > 0) {
                long totalHits = searchResponse.hits().total().value();
                LOG.debug("Processing search response that took {} to read {}/{} docs", searchResponse.took(), hitsSize, totalHits);
                lastHitSortValues = searchHits.get(hitsSize - 1).sort();
```

### DataFlowIssue
Method invocation `openStream` may produce `NullPointerException`
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/io/LazyInputStream.java`
#### Snippet
```java
        if (!opened) {
            opened = true;
            in = inputStreamSupplier != null ? inputStreamSupplier.get() : byteSource.openStream();
        }
    }
```

### DataFlowIssue
Condition `marked instanceof Closeable` is redundant and can be replaced with a null check
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/io/FileLineDifferenceIterator.java`
#### Snippet
```java
        @Override
        public void close() {
            if (marked instanceof Closeable) {
                closeQuietly(marked);
            }
```

### DataFlowIssue
Condition `all instanceof Closeable` is redundant and can be replaced with a null check
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/io/FileLineDifferenceIterator.java`
#### Snippet
```java
                closeQuietly(marked);
            }
            if (all instanceof Closeable) {
                closeQuietly(all);
            }
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
            if ((this.cache = stringToType.apply(fbr.readLine())) == null) {
                this.empty = true;
                this.cache = null;
            } else {
                this.empty = false;
```

### DataFlowIssue
Method invocation `getTime` may produce `NullPointerException`
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
                        bucket,
                        blobId,
                        lastModified.getTime(),
                        size,
                        s3ReqDecorator
```

### DataFlowIssue
Method invocation `close` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/InitialContent.java`
#### Snippet
```java
                NodeTypeRegistry.register(root, stream, "built-in node types");
            } finally {
                stream.close();
            }
        } catch (IOException e) {
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ResultRowImpl.java`
#### Snippet
```java
                    if (a == null || b == null) {
                        if (a == b) {
                            comp = 0;
                        } else if (a == null) {
                            // TODO order by: nulls first (it looks like), or
```

### DataFlowIssue
Method invocation `verifyNotPotentiallySlow` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryEngineImpl.java`
#### Snippet
```java
            }
            if (isPotentiallySlow) {
                result.verifyNotPotentiallySlow();
            }
        }
```

### DataFlowIssue
Method invocation `getProperty` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
            result = currentRow.getValue(oakPropertyName);
        } else {
            result = PropertyValues.create(t.getProperty(oakPropertyName));
        }
        if (result == null) {
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/SQL2Parser.java`
#### Snippet
```java
                    break;
                }
                types[i] = type = CHAR_IGNORE;                
                startLoop = i;
                i += 2;
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
            } else {
                // explicitly set in the query
                traversal = queryOptions.traversal;
            }
            String caller = IndexUtils.getCaller(settings.getIgnoredClassNamesInCallTrace());
```

### DataFlowIssue
Dereference of `union` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
            }
        }
        union.orderList = orderList;
        union.xpathQuery = xpathQuery;
        union.measure = measure;
```

### DataFlowIssue
Casting `readOnlyParent` to `ImmutableTree` may produce `ClassCastException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/factories/TreeFactory.java`
#### Snippet
```java
    public static Tree createReadOnlyTree(@NotNull Tree readOnlyParent, @NotNull String childName, @NotNull NodeState childState) {
        checkArgument(readOnlyParent instanceof ImmutableTree);
        return new ImmutableTree((ImmutableTree) readOnlyParent, childName, childState);
    }
}
```

### DataFlowIssue
Casting `readOnlyTree` to `AbstractTree` may produce `ClassCastException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/tree/impl/TreeProviderService.java`
#### Snippet
```java
    public NodeState asNodeState(@NotNull Tree readOnlyTree) {
        checkArgument(readOnlyTree instanceof AbstractTree);
        return ((AbstractTree) readOnlyTree).getNodeState();
    }
}
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java`
#### Snippet
```java
            if (selectors.size() > 0) {
                // no explicit path restriction - so it's a node name restriction
                currentSelector.isChild = true;
                currentSelector.nodeName = name;
            } else {
```

### DataFlowIssue
Argument `previousAsync` might be null
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/AsyncLaneSwitcher.java`
#### Snippet
```java
        checkState(previousAsync != null, "No previous async state property found for index [%s]", indexPath);

        if (isNone(previousAsync)) {
            idxBuilder.removeProperty(IndexConstants.ASYNC_PROPERTY_NAME);
        } else {
```

### DataFlowIssue
Dereference of `rootDir.listFiles(((FileFilter) DirectoryFileFilter.DIRECTORY))` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/IndexerInfo.java`
#### Snippet
```java
    public Map<String, File> getIndexes() throws IOException {
        ImmutableMap.Builder<String, File> indexes = ImmutableMap.builder();
        for (File dir : rootDir.listFiles(((FileFilter) DirectoryFileFilter.DIRECTORY))) {
            File metaFile = new File(dir, INDEX_METADATA_FILE_NAME);
            if (metaFile.exists()) {
```

### DataFlowIssue
Method invocation `execute` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndex.java`
#### Snippet
```java
                "Property index is used even when no index"
                + " is available for filter " + filter);
        return plan.execute();
    }

```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
                    updatePostRunStatus = false;
                } else {
                    updatePostRunStatus = true;
                }
            } else {
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/AsyncIndexUpdate.java`
#### Snippet
```java
                    }
                }
                updatePostRunStatus = true;
            }
            mergeWithConcurrencyCheck(store, validatorProviders, builder, beforeCheckpoint,
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/strategy/UniqueEntryStoreStrategy.java`
#### Snippet
```java
                count = k.getProperty("entry").count();
            } else {
                count = 0;
            }
        } else {
```

### DataFlowIssue
Method invocation `getChildNode` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/MergingNodeStateDiff.java`
#### Snippet
```java
        }

        NodeBuilder baseClean = conflictMarker.getChildNode(ConflictAnnotatingRebaseDiff.BASE);
        if (baseClean.exists()) {
            baseClean.getChildNode(name).remove();
```

### DataFlowIssue
Method invocation `getChildNode` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/MergingNodeStateDiff.java`
#### Snippet
```java
            }
        }
        NodeBuilder baseClean = conflictMarker.getChildNode(ConflictAnnotatingRebaseDiff.BASE);
        if (baseClean.exists()) {
            baseClean.removeProperty(name);
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/ConflictValidator.java`
#### Snippet
```java
                    switch (ct) {
                        case DELETE_CHANGED_PROPERTY:
                            ours = null;
                            theirs = ps;
                            break;
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/commit/ConflictValidator.java`
#### Snippet
```java
                        case CHANGE_DELETED_PROPERTY:
                            ours = ps;
                            theirs = null;
                            break;
                    }
```

### DataFlowIssue
Method invocation `isValidChildNode` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/TypeEditor.java`
#### Snippet
```java
        NodeBuilder childBuilder = builder.getChildNode(name);
        TypeEditor editor = new TypeEditor(this, name, primary, mixins, childBuilder, validate);
        if (checkThisNode && validate && !effective.isValidChildNode(name, editor.getEffective())) {
            constraintViolation(
                    1, "No matching definition found for child node " + name
```

### DataFlowIssue
Method invocation `next` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/DescendantsIterator.java`
#### Snippet
```java
            return null;
        }
        return stack.peekFirst().next().getNodeState();
    }

```

### DataFlowIssue
Method invocation `hasNext` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/DescendantsIterator.java`
#### Snippet
```java

    private boolean fillStack() {
        while (stack.size() < maxLevel || !stack.peekFirst().hasNext()) {
            Iterator<? extends ChildNodeEntry> topIterator = stack.peekFirst();
            if (topIterator.hasNext()) {
```

### DataFlowIssue
Method invocation `hasNext` may produce `NullPointerException`
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/migration/DescendantsIterator.java`
#### Snippet
```java
        while (stack.size() < maxLevel || !stack.peekFirst().hasNext()) {
            Iterator<? extends ChildNodeEntry> topIterator = stack.peekFirst();
            if (topIterator.hasNext()) {
                final NodeState nextNode = topIterator.next().getNodeState();
                stack.push(nextNode.getChildNodeEntries().iterator());
```

### DataFlowIssue
Method invocation `read` may produce `NullPointerException`
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/Installer.java`
#### Snippet
```java
        byte[] buffer = new byte[8192];
        int read;
        while ((read = in.read(buffer)) >= 0) {
            out.write(buffer, 0, read);
        }
```

### DataFlowIssue
Method invocation `get` may produce `NullPointerException`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/query/FulltextIndex.java`
#### Snippet
```java
                    }
                    if (columnName.startsWith(QueryConstants.REP_EXCERPT)) {
                        String excerpt = currentRow.excerpts.get(columnName);
                        if (excerpt != null) {
                            return PropertyValues.newString(excerpt);
```

### DataFlowIssue
Method invocation `release` may produce `NullPointerException`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/query/FulltextIndex.java`
#### Snippet
```java
            return sb.toString();
        } finally {
            index.release();
        }
    }
```

### DataFlowIssue
Argument `maxCountedParent` might be null
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/query/FulltextIndexPlanner.java`
#### Snippet
```java
        //Set the parent path to one which is present in most prop. In case of tie any one
        //such path would be picked
        result.setParentPath(maxCountedParent);

        //Now add only those properties to plan which have the maxCountedParent
```

### DataFlowIssue
Method invocation `getArrayType` may produce `NullPointerException`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/FunctionIndexProcessor.java`
#### Snippet
```java
            result = PropertyStates.createProperty("value", values.get(0), type);
        } else {
            type = type.getArrayType();
            result = PropertyStates.createProperty("value", values, type);
        }
```

### DataFlowIssue
Method invocation `getNewStream` may produce `NullPointerException`
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/IndexDefinition.java`
#### Snippet
```java

    public InputStream getTikaConfig(){
        return ConfigUtil.getBlob(getTikaConfigNode(), TIKA_CONFIG).getNewStream();
    }

```

### DataFlowIssue
Casting `builder` to `SegmentNodeBuilder` may produce `ClassCastException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java
            @NotNull CommitInfo info) throws CommitFailedException {
        checkArgument(builder instanceof SegmentNodeBuilder);
        checkArgument(((SegmentNodeBuilder) builder).isRootBuilder());
        if (loggingHook != null) {
            commitHook = new CompositeHook(commitHook, loggingHook);
```

### DataFlowIssue
Casting `builder` to `SegmentNodeBuilder` may produce `ClassCastException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java
        checkArgument(builder instanceof SegmentNodeBuilder);

        SegmentNodeBuilder snb = (SegmentNodeBuilder) builder;

        NodeState root = getRoot();
```

### DataFlowIssue
Method invocation `getBaseState` may produce `NullPointerException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java

        NodeState root = getRoot();
        NodeState before = snb.getBaseState();
        if (!SegmentNodeState.fastEquals(before, root)) {
            SegmentNodeState after = snb.getNodeState();
```

### DataFlowIssue
Casting `builder` to `SegmentNodeBuilder` may produce `ClassCastException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java
        checkArgument(builder instanceof SegmentNodeBuilder);

        SegmentNodeBuilder snb = (SegmentNodeBuilder) builder;

        NodeState root = getRoot();
```

### DataFlowIssue
Method invocation `reset` may produce `NullPointerException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/SegmentNodeStore.java`
#### Snippet
```java

        NodeState root = getRoot();
        snb.reset(root);

        return root;
```

### DataFlowIssue
Argument `segmentstoreDir.list(new SuffixFileFilter(".tar"))` might be null
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/file/tar/SegmentTarManager.java`
#### Snippet
```java
    @Override
    public List<String> listArchives() {
        return Arrays.asList(segmentstoreDir.list(new SuffixFileFilter(".tar")));
    }

```

### DataFlowIssue
Casting `changes` to `SegmentNodeBuilder` may produce `ClassCastException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/scheduler/Commit.java`
#### Snippet
```java
        checkNotNull(changes);
        checkArgument(changes instanceof SegmentNodeBuilder);
        this.changes = (SegmentNodeBuilder) changes;

        this.hook = checkNotNull(hook);
```

### DataFlowIssue
Dereference of `directory.listFiles()` may produce `NullPointerException`
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/persistentcache/PersistentDiskCache.java`
#### Snippet
```java
                NAME,
                () -> maxCacheSizeBytes,
                () -> Long.valueOf(directory.listFiles().length),
                () -> FileUtils.sizeOfDirectory(directory),
                () -> evictionCount.get());
```

### DataFlowIssue
Method invocation `provideStore` may produce `NullPointerException`
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/server/StandbyServer.java`
#### Snippet
```java
            checkState(storeProvider != null);

            FileStore store = storeProvider.provideStore();

            if (standbyReferencesReader == null) {
```

### DataFlowIssue
Dereference of `representations` may produce `NullPointerException`
in `oak-http/src/main/java/org/apache/jackrabbit/oak/http/AcceptHeader.java`
#### Snippet
```java
        int maxIndex = 0;
        double maxQ = 0.0;
        for (int i = 0; i < representations.length; i++) {
            double q = 0.0;
            MediaType type = registry.normalize(representations[i].getType());
```

### DataFlowIssue
Method invocation `getPath` may produce `NullPointerException`
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/namepath/PathTracker.java`
#### Snippet
```java
    public String getPath() {
        if (path == null) { // implies parent != null
            path = PathUtils.concat(parent.getPath(), name);
        }
        return path;
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/namepath/JcrNameParser.java`
#### Snippet
```java
                    // therefore reset the nameStart and change state.
                    state = STATE_NAME;
                    nameStart = 0;
                } else if (state == STATE_NAME_START) {
                    state = STATE_NAME;
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/namepath/JcrNameParser.java`
#### Snippet
```java
                        // normal local name.
                        state = STATE_NAME;
                        nameStart = 0;
                    } else {
                        listener.error("The URI prefix of the name " + jcrName + " is " +
```

### DataFlowIssue
Casting `obj` to `RepositoryInitializer` may produce `ClassCastException`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexDefinitionUpdater.java`
#### Snippet
```java
        String outFilePath = optionSet.has("out") ? optionSet.valueOf("out").toString() : null;

        new IndexDefinitionUpdater().process(inFilePath, outFilePath, (RepositoryInitializer)obj);
    }

```

### DataFlowIssue
Condition `nodeStore instanceof SegmentNodeStore` is redundant and can be replaced with a null check
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                // is present (find blob references under a specific root path.)
                if ((options.has(verbose) &&
                    (nodeStore instanceof SegmentNodeStore ||
                        nodeStore instanceof org.apache.jackrabbit.oak.segment.SegmentNodeStore)) ||
                        options.has(verboseRootPath)) {
```

### DataFlowIssue
Argument `marker` might be null
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/DataStoreCheckCommand.java`
#### Snippet
```java
                    FileUtils.copyFile(traverser.references, register.createFile(refOp, dumpPath));
                } else {
                    retrieveBlobReferences(blobStore, marker,
                        register.createFile(refOp, dumpPath), dsType, options.has(verbose));
                }
```

### DataFlowIssue
Argument `storeDir` might be null
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractorMain.java`
#### Snippet
```java
                        "must be specified via %s", tikaOpts.getStoreDirSpecOpt());

                DataStoreTextWriter writer = closer.register(new DataStoreTextWriter(storeDir, false));

                TextPopulator textPopulator = new TextPopulator(writer);
```

### DataFlowIssue
Argument `storeDir` might be null
in `oak-run/src/main/java/org/apache/jackrabbit/oak/plugins/tika/TextExtractorMain.java`
#### Snippet
```java
                checkNotNull(blobStore, "BlobStore found to be null.");

                DataStoreTextWriter writer = new DataStoreTextWriter(storeDir, false);
                TextExtractor extractor = new TextExtractor(writer);

```

### DataFlowIssue
Dereference of `store.list()` may produce `NullPointerException`
in `oak-run/src/main/java/org/apache/jackrabbit/oak/segment/FileStoreHelper.java`
#### Snippet
```java
        }
        // for now the only check is the existence of the journal file
        for (String f : store.list()) {
            if ("journal.log".equals(f)) {
                return true;
```

### DataFlowIssue
Condition `jsopWriter instanceof Closeable` is redundant and can be replaced with a null check
in `oak-run/src/main/java/org/apache/jackrabbit/oak/exporter/NodeStateSerializer.java`
#### Snippet
```java
        serialize(jsopWriter, blobSerializer);

        if (jsopWriter instanceof Closeable) {
            ((Closeable) jsopWriter).close();
        }
```

### DataFlowIssue
Casting `builder` to `MemoryNodeBuilder` may produce `ClassCastException`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeStore.java`
#### Snippet
```java
        NodeState newBase = getRoot();
        if (base != newBase) {
            ((MemoryNodeBuilder) builder).reset(newBase);
            head.compareAgainstBaseState(
                    base, new ConflictAnnotatingRebaseDiff(builder));
```

### DataFlowIssue
Casting `builder` to `MemoryNodeBuilder` may produce `ClassCastException`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeStore.java`
#### Snippet
```java
        checkArgument(builder instanceof MemoryNodeBuilder);
        NodeState head = getRoot();
        ((MemoryNodeBuilder) builder).reset(head);
        return head;
    }
```

### DataFlowIssue
Casting `builder` to `MemoryNodeBuilder` may produce `ClassCastException`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeStore.java`
#### Snippet
```java
            @NotNull CommitInfo info) throws CommitFailedException {
        checkArgument(builder instanceof MemoryNodeBuilder);
        MemoryNodeBuilder mnb = (MemoryNodeBuilder) builder;
        checkArgument(mnb.isRoot());
        checkNotNull(commitHook);
```

### DataFlowIssue
Method invocation `isRoot` may produce `NullPointerException`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeStore.java`
#### Snippet
```java
        checkArgument(builder instanceof MemoryNodeBuilder);
        MemoryNodeBuilder mnb = (MemoryNodeBuilder) builder;
        checkArgument(mnb.isRoot());
        checkNotNull(commitHook);
        rebase(builder);
```

### DataFlowIssue
Method invocation `head` may produce `NullPointerException`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeBuilder.java`
#### Snippet
```java
            // switch to connected state recursively up to the parent
            MutableNodeState parentState =
                    builder.parent.head().getMutableNodeState();
            MutableNodeState state =
                    parentState.getMutableChildNode(builder.name);
```

### DataFlowIssue
Method invocation `head` may produce `NullPointerException`
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/MemoryNodeBuilder.java`
#### Snippet
```java
            if (revision != rootRevision) {
                // root revision changed: recursively re-get state from parent
                NodeState parentState = builder.parent.head().getCurrentNodeState();
                NodeState newState = parentState.getChildNode(builder.name);
                if (newState instanceof MutableNodeState) {
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/BundleLoader.java`
#### Snippet
```java
                method = null;
            } catch (NoSuchMethodException e) {
                method = null;
            }
        }
```

### DataFlowIssue
Argument `is` might be null
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/CliUtils.java`
#### Snippet
```java
        InputStream is = CliUtils.class.getClassLoader().getResourceAsStream("upgrade_usage.txt");
        try {
            return IOUtils.toString(is);
        } finally {
            IOUtils.closeQuietly(is);
```

### DataFlowIssue
Method invocation `hasExternalBlobReferences` may produce `NullPointerException`
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/node/StoreFactory.java`
#### Snippet
```java
            return true;
        } else {
            return nodeStoreFactory.hasExternalBlobReferences();
        }
    }
```

### DataFlowIssue
Condition `nodeStore instanceof org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore` is redundant and can be replaced with a null check
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/checkpoint/CheckpointRetriever.java`
#### Snippet
```java
        if (nodeStore instanceof SegmentNodeStore) {
            result = getCheckpoints(CheckpointAccessor.getCheckpointsRoot((SegmentNodeStore) nodeStore));
        } else if (nodeStore instanceof org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore) {
            result = getCheckpoints(org.apache.jackrabbit.oak.plugins.segment.CheckpointAccessor.getCheckpointsRoot((org.apache.jackrabbit.oak.plugins.segment.SegmentNodeStore) nodeStore));
        } else if (nodeStore instanceof DocumentNodeStore) {
```

### DataFlowIssue
Method invocation `getPath` may produce `NullPointerException`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/index/SolrIndexEditor.java`
#### Snippet
```java
    String getPath() {
        if (path == null) { // => parent != null
            path = concat(parent.getPath(), name);
        }
        return path;
```

### DataFlowIssue
Argument `inputStream` might be null
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/server/RemoteSolrServerProvider.java`
#### Snippet
```java
        assert newFile.createNewFile();
        FileOutputStream outputStream = new FileOutputStream(newFile);
        IOUtils.copy(inputStream, outputStream);
        inputStream.close();
        outputStream.flush();
```

### DataFlowIssue
Method invocation `getPathPrefix` may produce `NullPointerException`
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/query/FilterQueryParser.java`
#### Snippet
```java
            Filter.PathRestriction pathRestriction = filter.getPathRestriction();
            if (pathRestriction != null) {
                String path = purgePath(filter, plan.getPathPrefix());
                String fieldName = configuration.getFieldForPathRestriction(pathRestriction);
                if (fieldName != null) {
```

### DataFlowIssue
Method invocation `getMBean` may produce `NullPointerException`
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java

        int sleepCount = 0;
        while (backgroundObserver.getMBean().getQueueSize()> 0 && ++sleepCount < 100) {
            TimeUnit.MILLISECONDS.sleep(100);
        }
```

### DataFlowIssue
Casting `callback` to `ContextAwareCallback` may produce `ClassCastException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexEditorProvider.java`
#### Snippet
```java
            checkArgument(callback instanceof ContextAwareCallback, "callback instance not of type " +
                    "ContextAwareCallback [%s]", callback);
            IndexingContext indexingContext = ((ContextAwareCallback)callback).getIndexingContext();
            BlobDeletionCallback blobDeletionCallback = activeDeletedBlobCollector.getBlobDeletionCallback();
            indexingContext.registerIndexCommitCallback(blobDeletionCallback);
```

### DataFlowIssue
Method invocation `getNewStream` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/NodeStateAnalyzerFactory.java`
#### Snippet
```java
        public InputStream openResource(String resource) throws IOException {
            if (state.hasChildNode(resource)){
                return ConfigUtil.getBlob(state.getChildNode(resource), resource).getNewStream();
            }
            return delegate.openResource(resource);
```

### DataFlowIssue
Method invocation `getNewStream` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/NodeStateAnalyzerFactory.java`
#### Snippet
```java
                                                Version matchVersion) throws IOException {
        Blob blob = ConfigUtil.getBlob(file, name);
        Reader stopwords = new InputStreamReader(blob.getNewStream(), IOUtils.CHARSET_UTF_8);
        try {
            return WordlistLoader.getWordSet(stopwords, matchVersion);
```

### DataFlowIssue
Method invocation `setExplicitLuceneMatchVersion` will produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/NodeStateAnalyzerFactory.java`
#### Snippet
```java

        if (state.hasProperty(LuceneIndexConstants.ANL_LUCENE_MATCH_VERSION)){
            o.setExplicitLuceneMatchVersion(true);
        }
    }
```

### DataFlowIssue
Method invocation `listAll` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexMBeanImpl.java`
#### Snippet
```java
                checkNotNull(source, "IndexSearcher not backed by DirectoryReader");
                Directory dest = FSDirectory.open(new File(destPath));
                for (String file : source.listAll()) {
                    source.copy(dest, file, file, IOContext.DEFAULT);
                }
```

### DataFlowIssue
Method invocation `isEmpty` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
        if (token != null) {
            List<String> tokens = tokenize(token, analyzer);
            if (!tokens.isEmpty()) {
                token = tokens.get(0);
            }
```

### DataFlowIssue
Method invocation `getDefinition` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
            // no relative property in the full-text constraint
            boolean nonFullTextConstraints = parent.isEmpty();
            String planDesc = getLuceneRequest(filter, null, nonFullTextConstraints, index.getDefinition()) + " ft:(" + ft + ")";
            if (!parent.isEmpty()) {
                planDesc += " parent:" + parent;
```

### DataFlowIssue
Method invocation `release` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
            return planDesc;
        } finally {
            index.release();
        }
    }
```

### DataFlowIssue
Method invocation `isEmpty` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
        List<String> tokens = tokenize(text, analyzer);

        if (tokens.isEmpty()) {
            // TODO what should be returned in the case there are no tokens?
            return new BooleanQuery();
```

### DataFlowIssue
Method invocation `getSearcher` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                checkState(indexNode != null);
                try {
                    IndexSearcher searcher = indexNode.getSearcher();
                    LuceneRequestFacade luceneRequestFacade = getLuceneRequest(filter, searcher.getIndexReader(),
                            nonFullTextConstraints, indexNode.getDefinition());
```

### DataFlowIssue
Method invocation `getSearcher` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                checkState(indexNode != null);
                try {
                    IndexSearcher searcher = indexNode.getSearcher();
                    LuceneRequestFacade luceneRequestFacade = getLuceneRequest(filter, searcher.getIndexReader(),
                            nonFullTextConstraints, indexNode.getDefinition());
```

### DataFlowIssue
Method invocation `replace` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                // The correct logic is in LucenePropertyIndex#createLikeQuery.
                // Leaving the code as it is, because this class is deprecated, as it is just for compatVersion=1
                first = first.replace('%', WildcardQuery.WILDCARD_STRING);
                first = first.replace('_', WildcardQuery.WILDCARD_CHAR);

```

### DataFlowIssue
Dereference of `tokenize(first, analyzer)` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndex.java`
#### Snippet
```java
                        addReferenceConstraint(first, qs, reader);
                    } else {
                        for (String t : tokenize(first, analyzer)) {
                            qs.add(new TermQuery(new Term(name, t)));
                        }
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/StatisticalSortedSetDocValuesFacetCounts.java`
#### Snippet
```java
            sampleIterator = getSampledMatchingDocIterator(docIterator, randomSeed, hitCount, sampleSize);
        } else {
            sampleSize = hitCount;
        }
        int accessibleSampleCount = getAccessibleSampleCount(dim, sampleIterator);
```

### DataFlowIssue
Casting `def` to `LuceneIndexDefinition` may produce `ClassCastException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/DefaultIndexWriterFactory.java`
#### Snippet
```java
                LuceneIndexDefinition.class, def.getClass());

        LuceneIndexDefinition definition = (LuceneIndexDefinition)def;

        if (mountInfoProvider.hasNonDefaultMounts()){
```

### DataFlowIssue
Method invocation `getSearcher` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
            checkState(indexNode != null);
            try {
                IndexSearcher searcher = indexNode.getSearcher();
                LuceneRequestFacade luceneRequestFacade = getLuceneRequest(plan, augmentorFactory, searcher.getIndexReader());
                if (luceneRequestFacade.getLuceneRequest() instanceof Query) {
```

### DataFlowIssue
Method invocation `isArray` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
        Type<?> t = oe.getPropertyType();
        checkState(t != null, "Type cannot be null");
        checkState(!t.isArray(), "Array types are not supported");

        int type = getPropertyType(defn, oe.getPropertyName(), t.tag());
```

### DataFlowIssue
Argument `indexNode` might be null
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LucenePropertyIndex.java`
#### Snippet
```java
                checkState(indexNode != null);
                try {
                    IndexSearcher searcher = getCurrentSearcher(indexNode);
                    LuceneRequestFacade luceneRequestFacade = getLuceneRequest(plan, augmentorFactory, searcher.getIndexReader());
                    if (luceneRequestFacade.getLuceneRequest() instanceof Query) {
```

### DataFlowIssue
Dereference of `localIndex.dir.listFiles(File::isDirectory)` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/LuceneIndexImporter.java`
#### Snippet
```java
        LuceneIndexDefinition definition = (LuceneIndexDefinition)reindexOps.apply(true);

        for (File dir : localIndex.dir.listFiles(File::isDirectory)) {
            String jcrName = localIndex.indexMeta.getJcrNameFromFSName(dir.getName());
            if (jcrName != null) {
```

### DataFlowIssue
Method invocation `getScore` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
                    }
                    if (verbose()) {
                        message("  add merge=" + writer.get().segString(merge.segments) + " size=" + String.format(Locale.ROOT, "%.3f MB", bestMergeBytes / 1024. / 1024.) + " score=" + String.format(Locale.ROOT, "%.3f", bestScore.getScore()) + " " + bestScore.getExplanation() + (bestTooLarge ? " [max merge]" : ""));
                    }
                } else {
```

### DataFlowIssue
Dereference of `dirs` may produce `NullPointerException`
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/IndexRootDirectory.java`
#### Snippet
```java

        ListMultimap<String, LocalIndexDir> pathToDirMap = ArrayListMultimap.create();
        for (File indexDir : dirs){
            LocalIndexDir localIndexDir = new LocalIndexDir(indexDir);
            pathToDirMap.get(localIndexDir.getJcrPath()).add(localIndexDir);
```

### DataFlowIssue
Casting `builder` to `MongoDocumentNodeStoreBuilder` may produce `ClassCastException`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/DocumentFixtureProvider.java`
#### Snippet
```java
            wb.register(MongoConnection.class, mongo, emptyMap());
            closer.register(mongo::close);
            ((MongoDocumentNodeStoreBuilder) builder).setMongoDB(mongo.getMongoClient(), mongo.getDBName());
            dns = builder.build();
            wb.register(MongoDocumentStore.class, (MongoDocumentStore) builder.getDocumentStore(), emptyMap());
```

### DataFlowIssue
Casting `builder` to `RDBDocumentNodeStoreBuilder` may produce `ClassCastException`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/cli/DocumentFixtureProvider.java`
#### Snippet
```java
                    rdbOpts.getUser(), rdbOpts.getPassword());
            wb.register(DataSource.class, ds, emptyMap());
            ((RDBDocumentNodeStoreBuilder) builder).setRDBConnection(ds);
            dns = builder.build();
            wb.register(RDBDocumentStore.class, (RDBDocumentStore) builder.getDocumentStore(), emptyMap());
```

### DataFlowIssue
Method invocation `openStream` may produce `NullPointerException`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/run/commons/LoggingInitializer.java`
#### Snippet
```java
        URL url = getClass().getResource("/" + config);
        File dest = new File(workDir, config);
        try (InputStream is = url.openStream()) {
            FileUtils.copyInputStreamToFile(is, dest);
        }
```

### DataFlowIssue
Argument `sortWorkDir.listFiles()` might be null
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/MultithreadedTraverseWithSortStrategy.java`
#### Snippet
```java

        static Stream<File> getDataFiles(File sortWorkDir) {
            return Arrays.stream(sortWorkDir.listFiles()).filter(f -> !STATUS_FILE_NAME.equals(f.getName()) &&
                    !COMPLETION_MARKER_FILE_NAME.equals(f.getName()) && !LAST_MODIFIED_UPPER_LIMIT.equals(f.getName()));
        }
```

### DataFlowIssue
Method invocation `estimatedMemUsage` may produce `NullPointerException`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/FlatFileBufferLinkedList.java`
#### Snippet
```java
    public void add(@NotNull NodeStateEntry item) {
        Preconditions.checkArgument(item != null, "Can't add null to the list");
        long incomingSize = item.estimatedMemUsage();
        long memUsage = estimatedMemoryUsage();
        Preconditions.checkState(memUsage + incomingSize <= memLimit,
```

### DataFlowIssue
Method invocation `estimatedMemUsage` may produce `NullPointerException`
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/FlatFileBufferLinkedList.java`
#### Snippet
```java
        head.next = head.next.next;
        size--;
        memUsage -= ret.estimatedMemUsage();
        if (size == 0) {
            tail = head;
```

### DataFlowIssue
Argument `item` might be null
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/linkedList/PersistedLinkedList.java`
#### Snippet
```java
    public void add(@NotNull NodeStateEntry item) {
        Preconditions.checkArgument(item != null, "Can't add null to the list");
        String s = writer.toString(item);
        long index = tailIndex++;
        map.put(index, s);
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                            downloadRange(new DownloadRange(nextLastModified, nextLastModified + 1, lastIdDownloaded));
                            // We have managed to reconnect, reset the failure timestamp
                            failuresStartTimestamp = null;
                            numberOfFailures = 0;
                            // Continue downloading everything starting from the next _lastmodified value
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                            // We have managed to reconnect, reset the failure timestamp
                            failuresStartTimestamp = null;
                            numberOfFailures = 0;
                            // Continue downloading everything starting from the next _lastmodified value
                            downloadRange(new DownloadRange(nextLastModified + 1, Long.MAX_VALUE, null));
```

### DataFlowIssue
Variable is already assigned to this value
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java
                    configure(dataStore, config);

                    dataStore = configureIfCloudDataStore(className, dataStore, config, unique.toLowerCase(), statisticsProvider);
                    storeDir = new File(basedir, unique);
                    dataStore.init(storeDir.getAbsolutePath());
```

### DataFlowIssue
Casting `builder` to `CompositeNodeBuilder` may produce `ClassCastException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
    public NodeState rebase(NodeBuilder builder) {
        checkArgument(builder instanceof CompositeNodeBuilder);
        CompositeNodeBuilder nodeBuilder = (CompositeNodeBuilder) builder;
        MountedNodeStore globalStore = ctx.getGlobalStore();
        NodeState globalResult = globalStore.getNodeStore().rebase(nodeBuilder.getNodeBuilder(globalStore));
```

### DataFlowIssue
Method invocation `getNodeBuilder` may produce `NullPointerException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
        CompositeNodeBuilder nodeBuilder = (CompositeNodeBuilder) builder;
        MountedNodeStore globalStore = ctx.getGlobalStore();
        NodeState globalResult = globalStore.getNodeStore().rebase(nodeBuilder.getNodeBuilder(globalStore));
        return ctx.createRootNodeState(globalResult);
    }
```

### DataFlowIssue
Casting `builder` to `CompositeNodeBuilder` may produce `ClassCastException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
    public NodeState merge(NodeBuilder builder, CommitHook commitHook, CommitInfo info) throws CommitFailedException {
        checkArgument(builder instanceof CompositeNodeBuilder);
        CompositeNodeBuilder nodeBuilder = (CompositeNodeBuilder) builder;
        if (!PathUtils.denotesRoot(nodeBuilder.getPath())) {
            throw new IllegalArgumentException();
```

### DataFlowIssue
Method invocation `getPath` may produce `NullPointerException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
        checkArgument(builder instanceof CompositeNodeBuilder);
        CompositeNodeBuilder nodeBuilder = (CompositeNodeBuilder) builder;
        if (!PathUtils.denotesRoot(nodeBuilder.getPath())) {
            throw new IllegalArgumentException();
        }
```

### DataFlowIssue
Casting `globalStore` to `Clusterable` may produce `ClassCastException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
            checkArgument(globalStore instanceof Clusterable,
                    "globalStore must implement Clusterable");
            this.clusterable = (Clusterable) globalStore;
        }

```

### DataFlowIssue
Casting `builder` to `CompositeNodeBuilder` may produce `ClassCastException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
    public NodeState reset(NodeBuilder builder) {
        checkArgument(builder instanceof CompositeNodeBuilder);
        CompositeNodeBuilder nodeBuilder = (CompositeNodeBuilder) builder;
        MountedNodeStore globalStore = ctx.getGlobalStore();
        NodeState globalResult = globalStore.getNodeStore().reset(nodeBuilder.getNodeBuilder(globalStore));
```

### DataFlowIssue
Method invocation `getNodeBuilder` may produce `NullPointerException`
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
        CompositeNodeBuilder nodeBuilder = (CompositeNodeBuilder) builder;
        MountedNodeStore globalStore = ctx.getGlobalStore();
        NodeState globalResult = globalStore.getNodeStore().reset(nodeBuilder.getNodeBuilder(globalStore));
        return ctx.createRootNodeState(globalResult);
    }
```

### DataFlowIssue
Method invocation `getID` may produce `NullPointerException`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/FindAuthorizableWithScopeTest.java`
#### Snippet
```java
                adminSession.save();
            }
            Session reader = login(new SimpleCredentials(u.getID(), "pw".toCharArray()));
            testUserManager = ((JackrabbitSession) reader).getUserManager();
        }
```

### DataFlowIssue
Method invocation `hashCode` may produce `NullPointerException`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/wikipedia/WikipediaImport.java`
#### Snippet
```java
                    }
                    page.setProperty("text", text);
                    code += title.hashCode();
                    code += text.hashCode();
                    count++;
```

### DataFlowIssue
Dereference of `lastException` may produce `NullPointerException`
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/AzureUtilities.java`
#### Snippet
```java

        if (result == null) {
            throw lastException;
        } else {
            return result;
```

### DataFlowIssue
Method invocation `close` may produce `NullPointerException`
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                }
            } finally {
                reader.close();
            }
            return urls.toArray(new URL[urls.size()]);
```

## RuleId[id=DeprecatedIsStillUsed]
### DeprecatedIsStillUsed
Deprecated member 'setNodeCachePredicate' is still used
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreBuilder.java`
#### Snippet
```java
     */
    @Deprecated
    public T setNodeCachePredicate(Predicate<String> p){
        this.nodeCachePredicate = input -> input != null && p.apply(input.toString());
        return thisBuilder();
```

### DeprecatedIsStillUsed
Deprecated member 'getOldClient' is still used
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/ElasticConnection.java`
#### Snippet
```java
     * @return the old Elasticsearch client
     */
    public RestHighLevelClient getOldClient() {
        return getClients().rhlClient;
    }
```

### DeprecatedIsStillUsed
Deprecated member 'NodeCounterEditorOld' is still used
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/NodeCounterEditorOld.java`
#### Snippet
```java
 */
@Deprecated
public class NodeCounterEditorOld implements Editor {

    public static final String DATA_NODE_NAME = ":index";
```

### DeprecatedIsStillUsed
Deprecated member 'NodeCounterOld' is still used
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/counter/jmx/NodeCounterOld.java`
#### Snippet
```java
 */
@Deprecated
public class NodeCounterOld extends AnnotatedStandardMBean implements NodeCounterMBean {

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'SecurityProviderImpl' is still used
in `oak-core/src/main/java/org/apache/jackrabbit/oak/security/SecurityProviderImpl.java`
#### Snippet
```java
 */
@Deprecated
public class SecurityProviderImpl implements SecurityProvider, WhiteboardAware {

    private volatile AuthenticationConfiguration authenticationConfiguration;
```

### DeprecatedIsStillUsed
Deprecated member 'LoginModuleStatsCollector' is still used
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/LoginModuleStatsCollector.java`
#### Snippet
```java
@Deprecated
@ProviderType
public interface LoginModuleStatsCollector {

    void setLoginModuleMonitor(@NotNull LoginModuleMonitor lmm);
```

### DeprecatedIsStillUsed
Deprecated member 'LoginModuleStats' is still used
in `oak-security-spi/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/LoginModuleStats.java`
#### Snippet
```java
 */
@Deprecated
public class LoginModuleStats implements LoginModuleMBean, LoginModuleMonitor {

    private final StatisticsProvider statisticsProvider;
```

### DeprecatedIsStillUsed
Deprecated member 'CacheLIRS' is still used
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java`
#### Snippet
```java
    @Deprecated(since = "1.20.0", forRemoval = true)
    @SuppressWarnings("unchecked")
    CacheLIRS(Weigher<K, V> weigher, long maxMemory, int averageMemory,
            int segmentCount, int stackMoveDistance, final CacheLoader<K, V> loader,
            EvictionCallback<K, V> evicted, String module) {
```

### DeprecatedIsStillUsed
Deprecated member 'PartialConflictHandler' is still used
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/spi/commit/PartialConflictHandler.java`
#### Snippet
```java
 */
@Deprecated
public interface PartialConflictHandler {

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'getFulltextConditions' is still used
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/Filter.java`
#### Snippet
```java
     */
    @Deprecated
    Collection<String> getFulltextConditions();

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'getExecutionTime' is still used
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/IndexStatsMBean.java`
#### Snippet
```java
     */
    @Deprecated
    CompositeData getExecutionTime();

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'INDEX_PATH' is still used
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexConstants.java`
#### Snippet
```java
     */
    @Deprecated
    String INDEX_PATH = "indexPath";
}

```

### DeprecatedIsStillUsed
Deprecated member 'TapeSampling' is still used
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/util/TapeSampling.java`
#### Snippet
```java
 */
@Deprecated
public class TapeSampling<T> {
    private final Random rGen;
    private final Iterator<T> input;
```

### DeprecatedIsStillUsed
Deprecated member 'IndexFieldProvider' is still used
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/IndexFieldProvider.java`
#### Snippet
```java
 */
@Deprecated
public interface IndexFieldProvider {
    /**
     * Implementation which doesn't do anything useful... yet, abides with the contract.
```

### DeprecatedIsStillUsed
Deprecated member 'FulltextQueryTermsProvider' is still used
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/spi/FulltextQueryTermsProvider.java`
#### Snippet
```java
 */
@Deprecated
public interface FulltextQueryTermsProvider {
    /**
     * Implementation which doesn't do anything useful... yet, abides with the contract.
```

### DeprecatedIsStillUsed
Deprecated member 'addMountInfoConfigFromProperties' is still used
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/MountInfoProviderService.java`
#### Snippet
```java
     */
    @Deprecated
    private void addMountInfoConfigFromProperties(Props mountInfoProps) {
        String[] paths = mountInfoProps.mountedPaths();
        String mountName = mountInfoProps.mountName();
```

### DeprecatedIsStillUsed
Deprecated member 'ExternalGroupRef' is still used
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/ExternalGroupRef.java`
#### Snippet
```java
 */
@Deprecated
public class ExternalGroupRef extends ExternalIdentityRef {

    /**
```

### DeprecatedIsStillUsed
Deprecated member 'joinPaths' is still used
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/basic/DefaultSyncContext.java`
#### Snippet
```java
     */
    @Deprecated
    public static String joinPaths(String... paths) {
        return PathUtils.concatRelativePaths(paths);
    }
```

## RuleId[id=RedundantCollectionOperation]
### RedundantCollectionOperation
`contains` can be replaced with 'Map.containsValue()'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/LocalNameMapper.java`
#### Snippet
```java
                String mapping = getNamespacesProperty(jcrPrefix);
                if (mapping != null
                        && local.values().contains(mapping)) {
                    return null;
                }
```

## RuleId[id=SwitchStatementWithTooFewBranches]
### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/tool/AwsToolUtils.java`
#### Snippet
```java
        SegmentNodeStorePersistence persistence = null;

        switch (storeType) {
        case AWS:
            String[] parts = pathOrUri.substring(4).split(";");
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java`
#### Snippet
```java
    public List<JoinConditionImpl> getInnerJoinConditions() {
        ArrayList<JoinConditionImpl> set = new ArrayList<JoinConditionImpl>();
        switch (joinType) {
        case INNER:
            set.add(joinCondition);
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/PropertyValues.java`
#### Snippet
```java
        }

        switch (p1.getType().tag()) {
        case PropertyType.BINARY:
            if (p1.isArray() && !p2.isArray()) {
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/PropertyValues.java`
#### Snippet
```java
        }

        switch (p1.getType().tag()) {
        case PropertyType.BINARY:
            if (p1.isArray() && !p2.isArray()) {
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java
        SegmentNodeStorePersistence persistence = null;

        switch (storeType) {
        case AZURE:
            CloudBlobDirectory cloudBlobDirectory = createCloudBlobDirectory(pathOrUri.substring(3));
```

### SwitchStatementWithTooFewBranches
'switch' statement has too few case labels (1), and should probably be replaced with an 'if' statement
in `oak-segment-azure/src/main/java/org/apache/jackrabbit/oak/segment/azure/tool/ToolUtils.java`
#### Snippet
```java
        SegmentNodeStorePersistence persistence = null;

        switch (storeType) {
        case AZURE:
            CloudBlobDirectory cloudBlobDirectory = createCloudBlobDirectory(pathOrUri.substring(3));
```

## RuleId[id=MismatchedJavadocCode]
### MismatchedJavadocCode
Method is specified to return list but the return type is set
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/query/async/ElasticResponseListener.java`
#### Snippet
```java
     * Returns the source fields this listener is interested on
     *
     * @return the list of fields to listen to (only PATH as default)
     */
    default Set<String> sourceFields() {
```

### MismatchedJavadocCode
Method is specified to return list but the return type is array
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/observation/filter/FilterConfigMBean.java`
#### Snippet
```java
    /**
     * A set of paths, potentially containing globs, that include all events of this filter.
     * @return  list of paths
     * @see org.apache.jackrabbit.oak.plugins.observation.filter.FilterBuilder#addSubTree(String)
     */
```

### MismatchedJavadocCode
Method is specified to return list but the return type is array
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/util/FunctionIndexProcessor.java`
#### Snippet
```java
     *
     * @param functionCode the tokens, for example ["function", "lower", "@name"]
     * @return the list of properties, for example ["name"]
     */
    public static String[] getProperties(String[] functionCode) {
```

### MismatchedJavadocCode
Method is specified to return map but the return type is list
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/ConsolidatedListenerMBeanImpl.java`
#### Snippet
```java
     * based on the JMX ObjectName service property of the MBean
     *
     * @return map of EventListenerMBean and corresponding Observer
     */
    private List<ListenerMBeans> getListenerMBeans() {
```

### MismatchedJavadocCode
Method is specified to return 'true' but its return type is not boolean
in `oak-api/src/main/java/org/apache/jackrabbit/oak/api/jmx/QueryEngineSettingsMBean.java`
#### Snippet
```java
     * Whether Path restrictions are enabled while figuring out index plan
     *
     * @return true if enabled
     */
    String getStrictPathRestriction();
```

### MismatchedJavadocCode
Method is specified to return list but the return type is array
in `oak-auth-external/src/main/java/org/apache/jackrabbit/oak/spi/security/authentication/external/impl/jmx/SynchronizationMBean.java`
#### Snippet
```java
     * Returns a list of orphaned users, i.e. users that don't exist anymore on the IDP. Note that this can be an
     * expensive operation since all potential users need to be examined.
     * @return a list of the user ids of orphaned users.
     */
    @NotNull
```

## RuleId[id=CatchMayIgnoreException]
### CatchMayIgnoreException
Empty `catch` block
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBConnectionHandler.java`
#### Snippet
```java
                        connectionMap.remove(k);
                    }
                } catch (SQLException ex) {
                }
            });
```

### CatchMayIgnoreException
Empty `catch` block
in `oak-commons/src/main/java/org/apache/jackrabbit/oak/commons/sort/ExternalSort.java`
#### Snippet
```java
                try {
                    buffer.close();
                } catch (Exception e) {}
            }
            for (File f : files) {
```

### CatchMayIgnoreException
Empty `catch` block
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/Utils.java`
#### Snippet
```java
                Thread.sleep(100 * tries);
            }
            catch (InterruptedException e) { }
        }
        return bucketExists;
```

### CatchMayIgnoreException
Empty `catch` block
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
                    LOG.info("Rename S3 keys tasks timedout. Waiting again");
                }
            } catch (InterruptedException ie) {

            }
```

### CatchMayIgnoreException
Empty `catch` block
in `oak-segment-aws/src/main/java/org/apache/jackrabbit/oak/segment/aws/DynamoDBClient.java`
#### Snippet
```java
        try {
            Thread.sleep(1L);
        } catch (InterruptedException e) {
        }
        return new Item()
```

### CatchMayIgnoreException
Empty `catch` block
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/fixture/BlobStoreFixture.java`
#### Snippet
```java
            try {
                result = loadAndTransformProps(cfgFile);
            } catch (IOException e) {
            }
        }
```

## RuleId[id=CollectionAddAllCanBeReplacedWithConstructor]
### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterView.java`
#### Snippet
```java
        deactivatingIds.addAll(backlogIds);
        Set<Integer> inactiveIds = new HashSet<Integer>();
        inactiveIds.addAll(clusterViewDoc.getInactiveIds());
        if (!inactiveIds.removeAll(backlogIds) && backlogIds.size() > 0) {
            // then not all backlogIds were listed is inactive - which is
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/AndImpl.java`
#### Snippet
```java
            if (c instanceof OrImpl) {
                ArrayList<ConstraintImpl> list = new ArrayList<ConstraintImpl>();
                list.addAll(andList);
                list.remove(i);
                list.add(c);
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
        List<SourceImpl> selectors = result.getInnerJoinSelectors();
        Set<SourceImpl> oldSelectors = new HashSet<SourceImpl>();
        oldSelectors.addAll(selectors);
        Set<SourceImpl> newSelectors = new HashSet<SourceImpl>();
        newSelectors.addAll(selectors);
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java`
#### Snippet
```java
        oldSelectors.addAll(selectors);
        Set<SourceImpl> newSelectors = new HashSet<SourceImpl>();
        newSelectors.addAll(selectors);
        newSelectors.add(last);
        for (JoinConditionImpl j : conditions) {
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeImpl.java`
#### Snippet
```java
        // TODO distinguish between additive and overriding property definitions. See 3.7.6.8 Item Definitions in Subtypes
        Collection<PropertyDefinition> definitions = new ArrayList<PropertyDefinition>();
        definitions.addAll(Arrays.asList(getDeclaredPropertyDefinitions()));
        for (NodeType type : getSupertypes()) {
            definitions.addAll(Arrays.asList(type.getDeclaredPropertyDefinitions()));
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/NodeTypeImpl.java`
#### Snippet
```java
        // TODO distinguish between additive and overriding node definitions. See 3.7.6.8 Item Definitions in Subtypes
        Collection<NodeDefinition> definitions = new ArrayList<NodeDefinition>();
        definitions.addAll(Arrays.asList(getDeclaredChildNodeDefinitions()));
        for (NodeType type : getSupertypes()) {
            definitions.addAll(Arrays.asList(type.getDeclaredChildNodeDefinitions()));
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-search-mt/src/main/java/org/apache/jackrabbit/oak/plugins/index/mt/MTFulltextQueryTermsProviderFactory.java`
#### Snippet
```java
            log.debug("decoder initialized");
            Set<String> nodeTypes = new HashSet<>();
            nodeTypes.addAll(Arrays.asList(nts));
            queryTermsProvider = new MTFulltextQueryTermsProvider(decoder, nodeTypes, minScore);
        } catch (Exception e) {
```

### CollectionAddAllCanBeReplacedWithConstructor
'putAll()' call can be replaced with parametrized constructor call
in `oak-core-spi/src/main/java/org/apache/jackrabbit/oak/osgi/OsgiWhiteboard.java`
#### Snippet
```java
        default:
            SortedMap<ServiceReference, T> sorted = new TreeMap<>();
            sorted.putAll(services);
            return new ArrayList<>(sorted.values());
        }
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/ClusterNodesCommand.java`
#### Snippet
```java

        List<String> header = new ArrayList<>();
        header.addAll(Arrays.asList(new String[] { sId, sState, sStarted, sLeaseEnd, sLeft, sRecoveryBy }));
        if (verbose) {
            header.add(sLastRootRev);
```

### CollectionAddAllCanBeReplacedWithConstructor
'putAll()' call can be replaced with parametrized constructor call
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/ConfigInstaller.java`
#### Snippet
```java

            final Hashtable<String, Object> current = new Hashtable<String, Object>();
            current.putAll(pidEntry.getValue());
            performSubstitution(current);

```

### CollectionAddAllCanBeReplacedWithConstructor
'putAll()' call can be replaced with parametrized constructor call
in `oak-pojosr/src/main/java/org/apache/jackrabbit/oak/run/osgi/OakOSGiRepositoryFactory.java`
#### Snippet
```java

        Map config = new HashMap();
        config.putAll(parameters);

        PojoServiceRegistry registry = initializeServiceRegistry(config);
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
        String[] types = request.getParameterValues("filetype");
        if (types != null) {
            filetypes.addAll(Arrays.asList(types));
        } else {
            filetypes = DEFAULT_TYPES;
```

### CollectionAddAllCanBeReplacedWithConstructor
'addAll()' call can be replaced with parametrized constructor call
in `oak-examples/webapp/src/main/webapp/populate.jsp`
#### Snippet
```java
                        final String host = urls[i].getHost();
                        List folderNames = new ArrayList();
                        folderNames.addAll(Arrays.asList(host.split("\\.")));
                        Collections.reverse(folderNames);
                        folderNames.addAll(Arrays.asList(path.split("/", 0)));
```

## RuleId[id=UnnecessaryToStringCall]
### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java

                if (refFiles.size() > 0) {
                    File temp = new File(root, repoId + UUID.randomUUID().toString());
                    copyFile(fs.getMarkedRefs(), temp);

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Revision.java`
#### Snippet
```java
    public String toReadableString() {
        StringBuilder buff = new StringBuilder();
        buff.append("revision: \"").append(toString()).append("\"");
        buff.append(", clusterId: ").append(clusterId);
        buff.append(", time: \"").
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/UpdateOp.java`
#### Snippet
```java
            String s = name;
            if (revision != null) {
                s += "." + revision.toString();
            }
            return s;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreMBeanImpl.java`
#### Snippet
```java
            @Override
            public String apply(Revision input) {
                return input.getClusterId() + "=" + input.toString();
            }
        }), String.class);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJDBCTools.java`
#### Snippet
```java
                types.put(met.getColumnTypeName(i), met.getColumnType(i));
            }
            sb.append(" /* " + types.toString() + " */");
            return sb.toString();
        } catch (SQLException ex) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java`
#### Snippet
```java
                if (lastRev != null) {
                    startTime = lastRev.getTimestamp();
                    reason = "lastRev: " + lastRev.toString();
                } else {
                    startTime = nodeInfo.getStartTime();
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java`
#### Snippet
```java
                if (sweepRev != null && sweepRev.getTimestamp() < startTime) {
                    startTime = sweepRev.getTimestamp();
                    reason = "sweepRev: " + sweepRev.toString();
                }
                // are there branch commits that were merged right before the
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java`
#### Snippet
```java
                if (bc != null) {
                    startTime = bc.getTimestamp();
                    reason = "branchRev: " + bc.toString();
                }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJSONSupport.java`
#### Snippet
```java
            sb.append("null");
        } else if (value instanceof Number) {
            sb.append(value.toString());
        } else if (value instanceof Boolean) {
            sb.append(value.toString());
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBJSONSupport.java`
#### Snippet
```java
            sb.append(value.toString());
        } else if (value instanceof Boolean) {
            sb.append(value.toString());
        } else if (value instanceof String) {
            appendJsonString(sb, (String) value);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterNodeInfo.java`
#### Snippet
```java
            LOG.warn("Error getting the machine id; using a UUID", exception);
        }
        return RANDOM_PREFIX + UUID.randomUUID().toString();
    }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBBlobStore.java`
#### Snippet
```java

            LOG.info("RDBBlobStore (" + getModuleVersion() + ") instantiated for database " + dbDesc + ", using driver: "
                    + driverDesc + ", connecting to: " + dbUrl + (diag.isEmpty() ? "" : (", properties: " + diag.toString()))
                    + ", transaction isolation level: " + isolationDiags + ", " + tableInfo);
            if (!tablesPresent.isEmpty()) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBConnectionHandler.java`
#### Snippet
```java
                if (cnt > 0) {
                    LOG.trace(cnt + " connections with age >= " + LOGTHRESHOLD + "ms active while obtaining new connection: "
                            + sb.toString());
                }
            }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBConnectionHandler.java`
#### Snippet
```java
                    sb.append('.').append(e.getMethodName()).append('(').append(loc).append(')');
                } else {
                    sb.append(e.toString());
                }
                prevClass = e.getClassName();
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentSerializer.java`
#### Snippet
```java
                sb.append("\"*\",");
            } else {
                throw new DocumentStoreException("Can't serialize " + update.toString() + " for JSON append");
            }
            appendJsonString(sb, key.getName());
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/LoggingDocumentStoreWrapper.java`
#### Snippet
```java
        }
        log("// unexpected exception type: " + e.getClass().getName());
        return new DocumentStoreException("Unexpected exception: " + e.toString(), e);
    }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                    } catch (Throwable t) {
                        failing = true;
                        LOG.warn("Background operation failed: " + t.toString(), t);
                    }
                    delay = delaySupplier.get();
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                return;
            }
            LOG.warn("Background read operation failed: " + e.toString(), e);
            throw e;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                return;
            }
            LOG.warn("Background sweep operation failed (will be retried with next run): " + e.toString(), e);
            throw e;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
                return;
            }
            LOG.warn("Background update operation failed (will be retried with next run): " + e.toString(), e);
            throw e;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java`
#### Snippet
```java
        String result = "(successful)";
        if (ex != null) {
            result = "(with exception: " + ex.toString() + ")";
        }
        LOG.info("Disposed DocumentNodeStore with clusterNodeId: {}, {}",
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/util/Utils.java`
#### Snippet
```java
            String msg = String.format("Cluster id %d has a _lastRev %s (%s) " +
                    "newer than current time %s. Please check system time on " +
                    "cluster nodes.", clusterId, rev.toString(),
                    timestampToString(rev.getTimestamp()), timestampToString(now));
            throw new DocumentStoreException(msg);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBExport.java`
#### Snippet
```java
            buf.append("null");
        } else if (o instanceof Boolean) {
            buf.append(o.toString());
        } else if (o instanceof Long) {
            buf.append(((Long) o).longValue());
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
            if (!requiredColumns.isEmpty()) {
                String message = String.format("Table %s: the following required columns are missing: %s", tableName,
                        requiredColumns.toString());
                LOG.error(message);
                throw new DocumentStoreException(message);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
            if (!unknownColumns.isEmpty()) {
                String message = String.format("Table %s: the following columns are unknown and will not be maintained: %s",
                        tableName, unknownColumns.toString());
                LOG.info(message);
            }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
            List<Map.Entry<String, Long>> tmp = new ArrayList<>(cnUpdates.entrySet());
            Collections.sort(tmp, (Entry<String, Long> o1, Entry<String, Long> o2) -> o1.getKey().compareTo(o2.getKey()));
            return " (Cluster Node updates: " + tmp.toString() + ")";
        }
    }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java

        LOG.info("RDBDocumentStore (" + getModuleVersion() + ") instantiated for database " + dbDesc + ", using driver: "
                + driverDesc + ", connecting to: " + dbUrl + (diag.isEmpty() ? "" : (", properties: " + diag.toString()))
                + ", transaction isolation level: " + isolationDiags + tableDiags);
        if (!tablesPresent.isEmpty()) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
                return String.format("%s %s %s", propertyName, operator, operands.get(0).toString());
            } else {
                return String.format("%s %s %s", propertyName, operator, operands.toString());
            }
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java
        return new DataIdentifier(
                String.format("%s-%d",
                        UUID.randomUUID().toString(),
                        Instant.now().toEpochMilli()
                )
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/NativeFunctionImpl.java`
#### Snippet
```java
        // conditions
        if (!(selector.getIndex() instanceof NativeQueryIndex)) {
            log.warn("No full-text index was found that can process the condition " + toString());
            return false;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SpellcheckImpl.java`
#### Snippet
```java
        // conditions
        if (!(selector.getIndex() instanceof FulltextQueryIndex)) {
            log.warn("No full-text index was found that can process the condition " + toString());
            return false;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/LengthImpl.java`
#### Snippet
```java
                        "Can not compare the length with a constant of type "
                                + PropertyType.nameFromValue(v.getType().tag()) +
                                " and value " + v.toString());
            }
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SimilarImpl.java`
#### Snippet
```java
        // conditions
        if (!(selector.getIndex() instanceof FulltextQueryIndex)) {
            log.warn("No full-text index was found that can process the condition " + toString());
            return false;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SuggestImpl.java`
#### Snippet
```java
        // conditions
        if (!(selector.getIndex() instanceof FulltextQueryIndex)) {
            log.warn("No full-text index was found that can process the condition " + toString());
            return false;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java`
#### Snippet
```java
    public String getIndexCostInfo(NodeState rootState) {
        StringBuilder buff = new StringBuilder();
        buff.append(toString());
        buff.append("{ ");
        buff.append(left.getIndexCostInfo(rootState));
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/stats/QueryStatsData.java`
#### Snippet
```java
                    buff.append("\n\tat " + e);
                }
                name = name + buff.toString();
            }
            lastThreadName = name;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
    public String getPlan(NodeState rootState) {
        StringBuilder buff = new StringBuilder();
        buff.append(toString());
        buff.append(" /* ");
        QueryIndex index = getIndex();
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java`
#### Snippet
```java
        }
        if (!selectorConstraints.isEmpty()) {
            buff.append(" where ").append(new AndImpl(selectorConstraints).toString());
        }
        buff.append(" */");
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
        // select ...
        buff.append("select ");
        buff.append(new Expression.Property(columnSelector, QueryConstants.JCR_PATH, false).toString());
        if (selectors.size() > 1) {
            buff.append(" as ").append('[').append(QueryConstants.JCR_PATH).append(']');
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
        }
        buff.append(", ");
        buff.append(new Expression.Property(columnSelector, QueryConstants.JCR_SCORE, false).toString());
        if (selectors.size() > 1) {
            buff.append(" as ").append('[').append(QueryConstants.JCR_SCORE).append(']');
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
        if (columnList.isEmpty()) {
            buff.append(", ");
            buff.append(new Expression.Property(columnSelector, "*", false).toString());
        } else {
            for (int i = 0; i < columnList.size(); i++) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Statement.java`
#### Snippet
```java
        // where ...
        if (where != null) {
            buff.append(" where ").append(where.toString());
        }
        
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/importer/IndexImporter.java`
#### Snippet
```java
                LOG.error("Unable to revert back index lanes for: "
                        + indexPathsToUpdate.stream().collect(StringBuilder::new, StringBuilder::append,
                        (a, b) -> a.append(",").append(b)).toString(), commitFailedException);
                throw e;
            }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-core/src/main/java/org/apache/jackrabbit/oak/namepath/impl/NamePathMapperImpl.java`
#### Snippet
```java
        JcrPathParser.parse(jcrPath, listener);
        if (parseErrors.length() != 0) {
            log.debug("Could not parse path " + jcrPath + ": " + parseErrors.toString());
            return null;
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-examples/webapp/src/main/java/org/apache/jackrabbit/j2ee/RepositoryAccessServlet.java`
#### Snippet
```java
                jndiContext = new InitialContext(config.getJndiConfig().getJndiEnv());
            } catch (NamingException e) {
                log.error("Create initial context: " + e.toString());
            }
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/PrintingDiff.java`
#### Snippet
```java
            val.append(" = ").append(ps.getValue(STRING));
        }
        return ps.getName() + "<" + ps.getType() + ">" + val.toString();
    }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/tool/DebugStore.java`
#### Snippet
```java
        System.out.format("%s in %6d data segments%n", byteCountToDisplaySize(dataSize), dataCount);
        System.out.format("%s in %6d bulk segments%n", byteCountToDisplaySize(bulkSize), bulkCount);
        System.out.println(analyser.toString());

        Set<SegmentId> garbage = newHashSet(idmap.keySet());
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/standby/netty/SSLSubjectMatcher.java`
#### Snippet
```java
            if (!pattern.matcher(subject).matches()) {
                throw new Exception(
                    "Pattern match /" + pattern.toString() + "/ failed on: " + subject + "\n" +
                    "Note: the Java implementation of regex always implicitly matches from beginning to\n" +
                    "end, as in ^YOUR_PATTERN$, so if you want to match /acme/ anywhere in the subject\n" +
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-segment-remote/src/main/java/org/apache/jackrabbit/oak/segment/remote/RemoteUtilities.java`
#### Snippet
```java

    public static String getSegmentFileName(long offset, long msb, long lsb) {
        return String.format("%04x.%s", offset, new UUID(msb, lsb).toString());
    }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
            }

            String cacheKey = identifier.toString()
                    + domain
                    + nullToEmpty(downloadOptions.getContentTypeHeader())
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-blob-cloud-azure/src/main/java/org/apache/jackrabbit/oak/blob/cloud/azure/blobstorage/AzureBlobStoreBackend.java`
#### Snippet
```java
        return new DataIdentifier(
                String.format("%s-%d",
                        UUID.randomUUID().toString(),
                        Instant.now().toEpochMilli()
                )
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/PrintingDiff.java`
#### Snippet
```java
            val.append(" = ").append(ps.getValue(STRING));
        }
        return ps.getName() + "<" + ps.getType() + ">" + val.toString();
    }
}
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/JsonIndexCommand.java`
#### Snippet
```java
                value = (Long) value + (Long) v2;
            } else {
                value = value.toString() + v2.toString();
            }
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/run/JsonIndexCommand.java`
#### Snippet
```java
                value = (Long) value + (Long) v2;
            } else {
                value = value.toString() + v2.toString();
            }
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexDefinitionUpdater.java`
#### Snippet
```java
            if (sw.getBuffer().length() > 0) {
                pw.println(indent + "^ " + name);
                pw.print(sw.toString());
            }

```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-run/src/main/java/org/apache/jackrabbit/oak/index/IndexDefinitionUpdater.java`
#### Snippet
```java
                val.append(" = ").append(ps.getValue(STRING));
            }
            return ps.getName() + "<" + ps.getType() + ">" + val.toString();
        }
    }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/value/Conversions.java`
#### Snippet
```java
            Calendar date = ISO8601.parse(toString());
            if (date == null) {
                throw new IllegalArgumentException("Not a date string: " + toString());
            }
            return date;
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/fulltext/FullTextOr.java`
#### Snippet
```java
                buff.append('(');
            }
            buff.append(e.toString());
            if (e.getPrecedence() < getPrecedence()) {
                buff.append(')');
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-query-spi/src/main/java/org/apache/jackrabbit/oak/spi/query/fulltext/FullTextAnd.java`
#### Snippet
```java
                buff.append('(');
            }                
            buff.append(e.toString());
            if (e.getPrecedence() < getPrecedence()) {
                buff.append(')');
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/lock/LockDeprecation.java`
#### Snippet
```java
                whitelistThisCall |= ACCEPTEDCLASSES.contains(cn);
                if (!IGNOREDCLASSES.contains(cn) && !cn.startsWith("sun.reflect")) {
                    b.append(" ").append(e.toString());
                    depth += 1;
                }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/StoreArguments.java`
#### Snippet
```java
    private static void validateDescriptors(List<StoreDescriptor> descriptors, MigrationOptions options) throws CliArgumentException {
        if (descriptors.size() < 2) {
            throw new CliArgumentException("Not enough node store arguments: " + descriptors.toString(), 1);
        } else if (descriptors.size() > 2) {
            throw new CliArgumentException("Too much node store arguments: " + descriptors.toString(), 1);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-upgrade/src/main/java/org/apache/jackrabbit/oak/upgrade/cli/parser/StoreArguments.java`
#### Snippet
```java
            throw new CliArgumentException("Not enough node store arguments: " + descriptors.toString(), 1);
        } else if (descriptors.size() > 2) {
            throw new CliArgumentException("Too much node store arguments: " + descriptors.toString(), 1);
        } else if (descriptors.get(1).getType() == JCR2_DIR_XML) {
            throw new CliArgumentException("Can't use CRX2 as a destination", 1);
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
                        builder.append(p.getName()).append(": [...]");
                    } else {
                        builder.append(p.toString());
                    }
                    if (i.hasNext()) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/CompositeNodeStore.java`
#### Snippet
```java
            Set<String> changedPaths = getModifiedPaths(baseState, nodeState);
            if (!changedPaths.isEmpty()) {
                throw new CommitFailedException("CompositeStore", 31, "Unable to perform changes on read-only mount " + mountedNodeStore.getMount().getName() + ". Failing paths: " + changedPaths.toString());
            }
        }
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
        System.out.format(
                "# %-26.26s       C     min     10%%     50%%     90%%     max     N       mean%s%n",
                toString(), statsNamesJoined(false));
        if (out != null) {
            out.format(
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
            out.format(
                    "# %-26.26s,      C,    min,    10%%,    50%%,    90%%,    max,    N      mean%s%n",
                    toString(), statsNamesJoined(true));
        }
        for (RepositoryFixture fixture : fixtures) {
```

### UnnecessaryToStringCall
Unnecessary `toString()` call
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
                    out.format(
                            "# %-26.26s       min     10%%     50%%     90%%     max       N%n",
                            benchmark.toString());
                }

```

## RuleId[id=InnerClassMayBeStatic]
### InnerClassMayBeStatic
Inner class `FSBackendDataRecord` may be 'static'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/FSBackend.java`
#### Snippet
```java
     * FSBackendDataRecord which lazily retrieves the input stream of the record.
     */
    class FSBackendDataRecord extends AbstractDataRecord {
        private long length;
        private long lastModified;
```

### InnerClassMayBeStatic
Inner class `GarbageCollectionOperationStats` may be 'static'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
    }

    class GarbageCollectionOperationStats implements OperationsStatsMBean {
        static final String NAME = "DataStoreGarbageCollection";
        static final String CONSISTENCY_NAME = "DataStoreConsistencyCheck";
```

### InnerClassMayBeStatic
Inner class `SuspendedCommit` may be 'static'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/CommitQueue.java`
#### Snippet
```java
    }

    private class SuspendedCommit {

        private final Semaphore semaphore;
```

### InnerClassMayBeStatic
Inner class `UnsupportedIndexedPropertyException` may be 'static'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/rdb/RDBDocumentStore.java`
#### Snippet
```java
    }

    protected class UnsupportedIndexedPropertyException extends DocumentStoreException {

        private static final long serialVersionUID = -8392572622365260105L;
```

### InnerClassMayBeStatic
Inner class `NOOPIndexEditor` may be 'static'
in `oak-search-elastic/src/main/java/org/apache/jackrabbit/oak/plugins/index/elastic/index/ElasticIndexEditorProvider.java`
#### Snippet
```java
     * where OAK_INDEX_ELASTIC_WRITER_DISABLE = true is set as system property.
     */
    private class NOOPIndexEditor<D> extends FulltextIndexEditor<D> {
        public NOOPIndexEditor(FulltextIndexEditorContext<D> context) {
            super(context);
```

### InnerClassMayBeStatic
Inner class `AggregationResult` may be 'static'
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/QueueingHandler.java`
#### Snippet
```java
class QueueingHandler extends DefaultEventHandler {
    
    class AggregationResult {
        
        private final String name;
```

### InnerClassMayBeStatic
Inner class `Properties` may be 'static'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/OakSolrNodeStateConfiguration.java`
#### Snippet
```java
     * Properties that may be retrieved from the configuration {@link org.apache.jackrabbit.oak.spi.state.NodeState}.
     */
    public final class Properties {
        // --> oak solr config properties <--
        public static final String PATH_FIELD = "pathField";
```

### InnerClassMayBeStatic
Inner class `Properties` may be 'static'
in `oak-solr-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/solr/configuration/nodestate/NodeStateSolrServerConfigurationProvider.java`
#### Snippet
```java
     * Properties that may be retrieved from the configuration {@link org.apache.jackrabbit.oak.spi.state.NodeState}.
     */
    public final class Properties {
        public static final String SERVER_TYPE = "solrServerType";

```

### InnerClassMayBeStatic
Inner class `NodeTypeIndexFixerInitializer` may be 'static'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    }

    private class NodeTypeIndexFixerInitializer implements RepositoryInitializer {

        @Override
```

### InnerClassMayBeStatic
Inner class `LuceneFullTextInitializer` may be 'static'
in `oak-benchmarks-lucene/src/main/java/org/apache/jackrabbit/oak/benchmark/HybridIndexTest.java`
#### Snippet
```java
    }

    private class LuceneFullTextInitializer implements RepositoryInitializer {
        @Override
        public void initialize(@NotNull NodeBuilder builder) {
```

### InnerClassMayBeStatic
Inner class `CompositeFulltextQueryTermsProvider` may be 'static'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    class CompositeFulltextQueryTermsProvider implements FulltextQueryTermsProvider {

        private final String nodeType;
```

### InnerClassMayBeStatic
Inner class `CompositeIndexFieldProvider` may be 'static'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexAugmentorFactory.java`
#### Snippet
```java
    }

    class CompositeIndexFieldProvider implements IndexFieldProvider {

        private final String nodeType;
```

### InnerClassMayBeStatic
Inner class `SegmentByteSizeDescending` may be 'static'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/writer/CommitMitigatingTieredMergePolicy.java`
#### Snippet
```java
    }

    private class SegmentByteSizeDescending implements Comparator<SegmentCommitInfo> {
        @Override
        public int compare(SegmentCommitInfo o1, SegmentCommitInfo o2) {
```

### InnerClassMayBeStatic
Inner class `COWFileReference` may be 'static'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/CopyOnWriteDirectory.java`
#### Snippet
```java
    }

    private abstract class COWFileReference {
        protected final String name;

```

### InnerClassMayBeStatic
Inner class `UUIDInitializer` may be 'static'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/SearchTest.java`
#### Snippet
```java


    protected class UUIDInitializer implements RepositoryInitializer {
        @Override
        public void initialize(@NotNull NodeBuilder builder) {
```

### InnerClassMayBeStatic
Inner class `Writer` may be 'static'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ContinuousRevisionGCTest.java`
#### Snippet
```java
    }

    private class Writer implements Runnable {

        private final Session s;
```

### InnerClassMayBeStatic
Inner class `Visitor` may be 'static'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentTraversalTest.java`
#### Snippet
```java
    }

    private final class Visitor extends TraversingItemVisitor.Default {

        private long propertyCnt;
```

### InnerClassMayBeStatic
Inner class `Listener` may be 'static'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/ConcurrentCreateNodesTest.java`
#### Snippet
```java
    }

    private class Listener implements EventListener {

        @Override
```

### InnerClassMayBeStatic
Inner class `Job` may be 'static'
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/benchmarks/search/ConcurrentReader.java`
#### Snippet
```java
    }

    abstract class Job {
        final Node parent;
        final Session session;
```

## RuleId[id=SuspiciousMethodCalls]
### SuspiciousMethodCalls
Suspicious call to 'Map.containsKey()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMap.java`
#### Snippet
```java
            }
            try {
                return map.containsKey(key);
            } catch (Exception e) {
                reopen(i, e);
```

### SuspiciousMethodCalls
Suspicious call to 'Map.get()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMap.java`
#### Snippet
```java
            }
            try {
                return map.get(key);
            } catch (Exception e) {
                reopen(i, e);
```

### SuspiciousMethodCalls
Suspicious call to 'Map.remove()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMap.java`
#### Snippet
```java
            }
            try {
                return map.remove(key);
            } catch (Exception e) {
                reopen(i, e);
```

### SuspiciousMethodCalls
Suspicious call to 'Map.remove()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
            return null;
        }
        return metadataMap.remove(key);
    }

```

### SuspiciousMethodCalls
Suspicious call to 'Map.remove()'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/persistentCache/CacheMetadata.java`
#### Snippet
```java
        }
        for (Object k : keys) {
            metadataMap.remove(k);
        }
    }
```

### SuspiciousMethodCalls
Suspicious call to 'List.contains()'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/PropertyBuilder.java`
#### Snippet
```java

    public boolean hasValue(Object value) {
        return values.contains(value);
    }

```

### SuspiciousMethodCalls
Suspicious call to 'List.remove()'
in `oak-store-spi/src/main/java/org/apache/jackrabbit/oak/plugins/memory/PropertyBuilder.java`
#### Snippet
```java
    @NotNull
    public PropertyBuilder<T> removeValue(Object value) {
        values.remove(value);
        return this;
    }
```

### SuspiciousMethodCalls
'Set' may not contain objects of type ''
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/CopyOnReadDirectory.java`
#### Snippet
```java
    private void removeDeletedFiles() throws IOException {
        Set<String> remoteFiles = stream(remote.listAll())
                .filter(name -> !IndexCopier.REMOTE_ONLY.contains(name))
                .collect(Collectors.toSet());

```

### SuspiciousMethodCalls
'Set' may not contain objects of type ''
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/CopyOnReadDirectory.java`
#### Snippet
```java
                ImmutableSet.copyOf(local.listAll()).stream()
                // but not in my view
                .filter(name -> !remoteFiles.contains(name))
                // and also older than a safe timestamp (deleteBeforeTS)
                .filter(name -> IndexCopier.isFileModifiedBefore(name, local, deleteBeforeTS))
```

### SuspiciousMethodCalls
Suspicious call to 'List.remove()'
in `oak-authorization-principalbased/src/main/java/org/apache/jackrabbit/oak/spi/security/authorization/principalbased/impl/PrincipalPolicyImpl.java`
#### Snippet
```java
        validateEntry(ace);

        if (!entries.remove(ace)) {
            throw new AccessControlException("AccessControlEntry " +ace+ " not contained in AccessControlList");
        }
```

## RuleId[id=SynchronizeOnNonFinalField]
### SynchronizeOnNonFinalField
Synchronization on a non-final field `sessions`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
            LOG.trace("Creating new session");
            Session session = repository.login(credentials);
            synchronized (sessions) {
                sessions.add(session);
            }
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `sessions`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
            session.logout();
        }
        synchronized (sessions) {
            sessions.remove(session);
        }
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `sessions`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/benchmark/AbstractTest.java`
#### Snippet
```java
       try {
           Session session = repository.login(credentials);
           synchronized (sessions) {
               sessions.add(session);
           }
```

### SynchronizeOnNonFinalField
Synchronization on a non-final field `sessions`
in `oak-benchmarks/src/main/java/org/apache/jackrabbit/oak/scalability/suites/ScalabilityAbstractSuite.java`
#### Snippet
```java
        try {
            Session session = repository.login(credentials);
            synchronized (sessions) {
                sessions.add(session);
            }
```

## RuleId[id=ConditionCoveredByFurtherCondition]
### ConditionCoveredByFurtherCondition
Condition 'other == null' covered by subsequent condition '!(other instanceof BlockId)'
in `oak-blob/src/main/java/org/apache/jackrabbit/oak/spi/blob/AbstractBlobStore.java`
#### Snippet
```java
                return true;
            }
            if (other == null || !(other instanceof BlockId)) {
                return false;
            }
```

### ConditionCoveredByFurtherCondition
Condition 'filter != null' covered by subsequent condition 'filter instanceof FileLineDifferenceIterator'
in `oak-blob-plugins/src/main/java/org/apache/jackrabbit/oak/plugins/blob/MarkSweepGarbageCollector.java`
#### Snippet
```java
                    return FileIOUtils.writeStrings(filter, fs.getGcCandidates(), true);
                } finally {
                    if (filter != null && filter instanceof FileLineDifferenceIterator) {
                        ((FileLineDifferenceIterator) filter).close();
                    }
```

### ConditionCoveredByFurtherCondition
Condition 'obj == null' covered by subsequent condition '!(obj instanceof String)'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java

        Object obj = doc.get(ACTIVE_KEY);
        if (obj == null || !(obj instanceof String)) {
            logger.trace("<init>: {} : {}", ACTIVE_KEY, obj);
            this.activeIds = new Integer[0];
```

### ConditionCoveredByFurtherCondition
Condition 'obj2 == null' covered by subsequent condition '!(obj2 instanceof String)'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java

        Object obj2 = doc.get(RECOVERING_KEY);
        if (obj2 == null || !(obj2 instanceof String)) {
            logger.trace("<init>: {} : {}", RECOVERING_KEY, obj2);
            this.recoveringIds = new Integer[0];
```

### ConditionCoveredByFurtherCondition
Condition 'obj3 == null' covered by subsequent condition '!(obj3 instanceof String)'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java

        Object obj3 = doc.get(INACTIVE_KEY);
        if (obj3 == null || !(obj3 instanceof String)) {
            logger.trace("<init>: {} : {}", INACTIVE_KEY, obj3);
            this.inactiveIds = new Integer[0];
```

### ConditionCoveredByFurtherCondition
Condition 'obj4 == null' covered by subsequent condition '!(obj4 instanceof Map)'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/ClusterViewDocument.java`
#### Snippet
```java

        Object obj4 = doc.get(CLUSTER_VIEW_HISTORY_KEY);
        if (obj4 == null || !(obj4 instanceof Map)) {
            logger.trace("<init> viewHistory is null");
            this.viewHistory = null;
```

### ConditionCoveredByFurtherCondition
Condition 'oakVersion != null' covered by subsequent condition 'oakVersion instanceof String'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentDiscoveryLiteService.java`
#### Snippet
```java
            boolean warn = false;
            Object oakVersion = clusterNode.get(ClusterNodeInfo.OAK_VERSION_KEY);
            if (oakVersion != null && (oakVersion instanceof String)) {
                try {
                    warn = versionPredates((String) oakVersion, "1.3.5");
```

### ConditionCoveredByFurtherCondition
Condition 't instanceof MongoSocketException' covered by subsequent condition 't instanceof MongoWriteConcernException'
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoUtils.java`
#### Snippet
```java
    static Type getDocumentStoreExceptionTypeFor(Throwable t) {
        Type type = Type.GENERIC;
        if (t instanceof MongoSocketException
                || t instanceof MongoWriteConcernException
                || t instanceof MongoNotPrimaryException) {
```

### ConditionCoveredByFurtherCondition
Condition 'enablePresignedAccelerationStr != null' covered by subsequent condition '"true".equals(...)'
in `oak-blob-cloud/src/main/java/org/apache/jackrabbit/oak/blob/cloud/s3/S3Backend.java`
#### Snippet
```java

            String enablePresignedAccelerationStr = properties.getProperty(S3Constants.PRESIGNED_URI_ENABLE_ACCELERATION);
            setBinaryTransferAccelerationEnabled(enablePresignedAccelerationStr != null && "true".equals(enablePresignedAccelerationStr));

            presignedDownloadURIVerifyExists =
```

### ConditionCoveredByFurtherCondition
Condition 'childNodeCount == Long.MAX_VALUE' covered by subsequent condition 'childNodeCount \> maxValueCount'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/jmx/PropertyIndexStats.java`
#### Snippet
```java
            } else {
                long childNodeCount = data.getChildNodeCount(maxValueCount);
                if (childNodeCount == Long.MAX_VALUE || childNodeCount > maxValueCount) {
                    status = String.format("stats cannot be determined as number of values exceed the max limit of " +
                            "[%d]. Estimated value count [%d]", maxValueCount, childNodeCount);
```

### ConditionCoveredByFurtherCondition
Condition 'e instanceof MongoInterruptedException' covered by subsequent condition 'e instanceof MongoIncompatibleDriverException'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                }
            } catch (MongoException e) {
                if (e instanceof MongoInterruptedException || e instanceof MongoIncompatibleDriverException) {
                    // Non-recoverable exceptions
                    throw e;
```

### ConditionCoveredByFurtherCondition
Condition 'e instanceof MongoInterruptedException' covered by subsequent condition 'e instanceof MongoIncompatibleDriverException'
in `oak-run-commons/src/main/java/org/apache/jackrabbit/oak/index/indexer/document/flatfile/pipelined/PipelinedMongoDownloadTask.java`
#### Snippet
```java
                        downloadCompleted = true;
                    } catch (MongoException e) {
                        if (e instanceof MongoInterruptedException || e instanceof MongoIncompatibleDriverException) {
                            // Non-recoverable exceptions
                            throw e;
```

## RuleId[id=ServletWithoutMappingInspection]
### ServletWithoutMappingInspection
Servlet should have a mapping
in `oak-examples/webapp/src/main/webapp/WEB-INF/web.xml`
#### Snippet
```java
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>Repository</servlet-name>
        <description>
            This servlet provides other servlets and jsps a common way to access
```

## RuleId[id=UnnecessaryContinue]
### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/Sweep2Helper.java`
#### Snippet
```java
            if (cRev.equals(rev)) {
                // fine
                continue;
            } else {
                // then rev should be in the branch commit list
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/mongo/MongoDocumentStore.java`
#### Snippet
```java
            for (Entry<String, UpdateOp> entry : bulkOperations.entrySet()) {
                if (bulkResult.failedUpdates.contains(entry.getKey())) {
                    continue;
                } else if (bulkResult.upserts.contains(entry.getKey())) {
                    result.put(entry.getValue(), null);
```

### UnnecessaryContinue
`continue` is unnecessary as the last statement in a loop
in `oak-jcr/src/main/java/org/apache/jackrabbit/oak/jcr/observation/OakEventFilterImpl.java`
#### Snippet
```java
                    if (relativeGlobPath.equals("")) {
                        // this corresponds to 'SELF' which is already included, so skip
                        continue;
                    } else {
                        String additionalGlobPath;
```

## RuleId[id=CopyConstructorMissesField]
### CopyConstructorMissesField
Copy constructor does not copy field 'isClone'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakIndexInput.java`
#### Snippet
```java
    }

    private OakIndexInput(OakIndexInput that) {
        super(that.toString());
        this.file = that.file.clone();
```

### CopyConstructorMissesField
Copy constructor does not copy fields 'index' and 'blobModified'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakBufferedIndexFile.java`
#### Snippet
```java
    }

    private OakBufferedIndexFile(OakBufferedIndexFile that) {
        this.name = that.name;
        this.file = that.file;
```

### CopyConstructorMissesField
Copy constructor does not copy field 'blobInputStream'
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/directory/OakStreamingIndexFile.java`
#### Snippet
```java
    }

    private OakStreamingIndexFile(OakStreamingIndexFile that) {
        this.name = that.name;
        this.file = that.file;
```

## RuleId[id=ThrowableNotThrown]
### ThrowableNotThrown
Result of `process()` not thrown
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/PrefetchDispatcher.java`
#### Snippet
```java
                    @Override
                    public void run() {
                        EditorDiff.process(
                                new VisibleEditor(TraversingEditor.INSTANCE),
                                before, state);
```

### ThrowableNotThrown
Result of `process()` not thrown
in `oak-store-document/src/main/java/org/apache/jackrabbit/oak/plugins/document/bundlor/BundlingConfigHandler.java`
#### Snippet
```java
    @Override
    public synchronized void contentChanged(@NotNull NodeState root, @NotNull CommitInfo info) {
        EditorDiff.process(changeDetector, this.root, root);
        this.root = root;
    }
```

### ThrowableNotThrown
Result of `process()` not thrown
in `oak-search/src/main/java/org/apache/jackrabbit/oak/plugins/index/search/spi/query/FulltextIndexTracker.java`
#### Snippet
```java
        }

        EditorDiff.process(CompositeEditor.compose(editors), this.root, root);
        this.root = root;

```

### ThrowableNotThrown
Result of `process()` not thrown
in `oak-lucene/src/main/java/org/apache/jackrabbit/oak/plugins/index/lucene/IndexTracker.java`
#### Snippet
```java
        }

        EditorDiff.process(CompositeEditor.compose(editors), this.root, root);
        this.root = root;

```

### ThrowableNotThrown
Result of `process()` not thrown
in `oak-store-composite/src/main/java/org/apache/jackrabbit/oak/composite/checks/NodeTypeDefinitionNodeStoreChecker.java`
#### Snippet
```java
            // errors already propagated via the ConstraintViolationCallback so 
            // no need to look at the CommitException
            EditorDiff.process(editor, MISSING_NODE, root);
            
        } catch (CommitFailedException e) {
```

## RuleId[id=EqualsWhichDoesntCheckParameterClass]
### EqualsWhichDoesntCheckParameterClass
`equals()` should check the class of its parameter
in `oak-segment-tar/src/main/java/org/apache/jackrabbit/oak/segment/Record.java`
#### Snippet
```java

    @Override
    public boolean equals(Object that) {
        return fastEquals(this, that);
    }
```

## RuleId[id=CastCanBeRemovedNarrowingVariableType]
### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'nt' to 'NodeTypeImpl'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
        List<PropertyDefinition> definitions = new ArrayList<PropertyDefinition>();
        for (NodeType nt : nodeTypes.values()) {
            definitions.addAll(((NodeTypeImpl) nt).internalGetPropertyDefinitions());
        }
        return definitions;
```

### CastCanBeRemovedNarrowingVariableType
Cast may be removed by changing the type of 'nt' to 'NodeTypeImpl'
in `oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/EffectiveNodeTypeImpl.java`
#### Snippet
```java
        List<NodeDefinition> definitions = new ArrayList<NodeDefinition>();
        for (NodeType nt : nodeTypes.values()) {
            definitions.addAll(((NodeTypeImpl) nt).internalGetChildDefinitions());
        }
        return definitions;
```

